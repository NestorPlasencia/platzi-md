[Curso Avanzado de Django 1461](https://platzi.com/cursos/django-avanzado)

# Bienvenida [3416]

## 0010. ¬°Bienvenidos! [17174](https://platzi.com/clases/1461-django-avanzado/17174-bienvenidos3918/)

### Descripci√≥n:


 **Pre-requisitos del curso** :

* Experiencia escribiendo programas orientados a objetos en Python  
‚Äì Al menos 200 l√≠neas  
‚Äì Preferentemente con Python 3.5

* Estar familiarizado con la terminal  
‚Äì Saber moverse entre el sistema de archivos hasta bash scripting y pipes de nuestros comandos  
‚Äì Preferentemente en un Sistema Operativo tipo UNIX

* Entender muy bien conceptos b√°sicos de desarrollo web  
‚Äì Modelo cliente-servidor, protocolos de internet y HTTP  
‚Äì Diferencias entre Backend y Frontend

* **Django**  
‚Äì Flujo de vida de una petici√≥n y clases HttpResponse y HttpRequest  
‚Äì Haber conclu√≠do y lanzado** 3 o m√°s proyectos**  
‚Äì Class-based views

* Docker  
‚Äì Contenedores, Im√°genes y vol√∫menes  
‚Äì Docker compose




### Links:

* [1.- Bienvenidos! - Google Slides](https://docs.google.com/presentation/d/15GPeSxWlkCx1OGwICofxmZH70x5ufPVLjY33Q4oe4K8/edit?usp=sharing)

* [Curso de Python | Materiales](https://platzi.com/clases/python/)

* [Introducci√≥n a Terminal y L√≠nea de Comandos | Materiales](https://platzi.com/clases/terminal/)

* [Curso de ingenier√≠a de software | Platzi | Materiales](https://platzi.com/clases/ingenieria/)

* [Curso de Desarrollo Web Online | Materiales](https://platzi.com/clases/html5-css3/)

* [Curso de Django | Materiales](https://platzi.com/clases/django/)

* [Fundamentos de Docker | Materiales](https://platzi.com/clases/docker/)

### Comentarios:

* **Yesica Lizeth Cort√©s Pineda (Platzi)** (13) [494263](https://platzi.com/comentario/494263/) 

	Hola!! Bienvenido al curso. El repositorio del curso lo puedes ver aqui: <https://github.com/pablotrinidad/cride-platzi>

* **Hebert  lughi villafuerte ccacala** (6) [578879](https://platzi.com/comentario/578879/) 

	windows no es util :v

* **Diego Andres Fonseca Soto** (5) [494590](https://platzi.com/comentario/494590/) 
Estuve esperando con ansias este curso, excelente profesor.

	* **Iv√°n Mauricio Toro Cifuentes** [494590] (4)

		Me pasa exactamente igual. Y con cuerdo contigo, Pablo es un gran profesor.

* **German Tellez Vanegas** (3) [814383](https://platzi.com/comentario/814383/) 

	diablos que cambio f√≠sico profe xD

* **JCBC** (3) [531781](https://platzi.com/comentario/531781/) 

	Me quedo con la frase: ‚ÄúEl trabajo de un backend es 90% leer y dise√±ar y un 10% realmente programar.‚Äù üòÉ

* **jsballesteros** (3) [495182](https://platzi.com/comentario/495182/) 

	Que bueno por fin un curso avanzado django !!!

* **Nicol√°s Mayorga Vargas** (2) [1002873](https://platzi.com/comentario/1002873/) 

	Qu√© salvajada de proyecto.  
	Muchas felicitaciones Pablo. Haz mejorado mucho respecto a tu pedagog√≠a respecto al curso anterior.

* **Juan Guillermo Perez Cardozo** (2) [949556](https://platzi.com/comentario/949556/) 

	excelente profesor pablo trinidad , el dicto el curso de django "basico " y lo entendi a al perfeccion.

	* **Angel Ponce** [949556] (1)

		Concuerdo al 100%

* **Christian Medina Medina** (2) [936104](https://platzi.com/comentario/936104/) 

	Viendo el primer video me siento muy motivado a seguir aprendiendo por todo el contenido a ser desarrollado.  
	Saludos!

* **David Behar** (2) [875533](https://platzi.com/comentario/875533/) 

	Wow, me falta algo de experiencia en un par de puntos, pero a ver qu√© tal me va,
	
	¬°Here we go!

	* **Angel Ponce** [875533] (2)

		Adelante Bro! Recuerda que la practica hace al maestro, asi que persevera!

* **kushiahu** (2) [622870](https://platzi.com/comentario/622870/) 

	Oh my God!!! esta largo el curso, pero esta genial el temario!!!

* **jenapi** (2) [581449](https://platzi.com/comentario/581449/) 

	Esas palabras de aliento al inicio, la descripcion estructurada del profesor‚Ä¶ HERE WE GO

* **morwen1** (2) [575017](https://platzi.com/comentario/575017/) 

	me gustaria ver los joins con los modelos

* **Javier F√©lix Alonso L√≥pez** (2) [503027](https://platzi.com/comentario/503027/) 

	Muy buen profesor! üòÉ estoy aplicando a un puesto de backend con django jaja me ha servido mucho sus cursos! gracias!

* **esdraspavon** (2) [494572](https://platzi.com/comentario/494572/) 

	Bien, esto pinta genial! **Comparte Ride** manos a la obra!! üòÑ

* **Adri√°n Andr√©s Sosa** (1) [1015117](https://platzi.com/comentario/1015117/) 

	Buen√≠simo, un curso bastante completo!

* **hugoorlandogonzalez** (1) [990640](https://platzi.com/comentario/990640/) 

	Que buen curso se viene! Por fin proyectos reales! üòÑ

* **YojanPardo** (1) [904807](https://platzi.com/comentario/904807/) 

	viendo no m√°s los pre-requisitos de este curso y la cantidad de contenidos, parece ser que va a ser super interesante!!

* **Francisco Soto** (1) [767090](https://platzi.com/comentario/767090/) 

	Un curso avanzado como dice el titulo,pero falta mas docencia de parte de pablo se entiende que no lo es y hace su mejor esfuerzo.  
	Para mejorar en programaci√≥n se necesita practica,lo cuales en este curso te saltas 4 horas de armado de app para comenzar con el fuerte del curso,lo cual NO [sirve.Se](http://sirve.Se) necesita siempre compenzar desde 0 No olvidar que son cursos.  
	saludos

	* **Pablo Trinidad** [767090] (4)

		Es correcto lo que mencionas: este curso no es para alumnos que vienen de 0. Es por eso que los pre-requisitos que menciono son extensos.

	* **wilson_romero** [767090] (1)
Es un buen curso. Y nos ense√±a c√≥mo se crea un proyecto para la vida Real y nos lleva por varias tecnolog√≠as importantes docker, API Rest y por supuesto Django. Gracias Pablo

	* **lcmartinez_ (Platzi)** [767090] (1)

		@daeselixir por favor pasate por el curso de Django Basico para que puedas entender todo lo que el profesor ense√±a en este curso.
		
		Aca te dejo el link: <https://platzi.com/clases/django/>

* **diegoaranr** (1) [744591](https://platzi.com/comentario/744591/) 

	Windows in√∫tl :v  
	Excelente profe, el curso b√°sico de django fue brutal!

	* **Angel Ponce** [744591] (1)

		Es util! pero no para el backend jeje

* **Danny Rivadeneira** (1) [500939](https://platzi.com/comentario/500939/) 

	Que Hype el proyecto esta buenisimo XD

* **ingkstr** (1) [496877](https://platzi.com/comentario/496877/) 
Se ve genial el curso. A darle!!!

* **Hebert  lughi villafuerte ccacala** (1) [494736](https://platzi.com/comentario/494736/) 

	esto esta muy bueno , ya quiero empezar esto!!!

* **Iv√°n Mauricio Toro Cifuentes** (1) [494647](https://platzi.com/comentario/494647/) 

	¬°Aqu√≠ vamos! üêç

# Cimientos [3407]

## 0020. Arquitectura de una aplicaci√≥n [17209](https://platzi.com/clases/1461-django-avanzado/17209-arquitectura-de-una-aplicacion/)

### Descripci√≥n:


El objetivo de este curso es convertirte en un Backend profesional que usa **Django** como su herramienta profesional.

El **Backend** consiste en:

* Servidor
* Aplicaci√≥n
* Base de Datos



Un **Backend** developer es un dise√±ador, su trabajo consiste un 90% en leer, dise√±ar, analizar y planear. Un 10% en programar. Nuestro trabajo m√°s importante es el dise√±o del sistema y las decisiones tomadas son m√°s costosas y m√°s dif√≠ciles de cambiar.

**Web Services** es la manera en que se implementan las arquitecturas orientadas a servicios, se crean bloques que son accesibles a trav√©s de la web, son independientes del lenguaje de programaci√≥n.

* **SOAP** : Tiene su propio est√°ndar, conocido por utilizar XML.
* **REST** : Representational State Transfer, el objetivo es que nuestras operaciones sean Stateless. REST depende mucho m√°s del protocolo HTTP.
* **GraphQL** : Es el m√°s moderno, desarrollado por Facebook. Funciona m√°s como un Query Language para las API, un lenguaje de consultas.



### Links:

* [Web Tools APIs | USPS](https://www.usps.com/business/web-tools-apis/welcome.htm)

* [Graph API - Documentation - Facebook for Developers](https://developers.facebook.com/docs/graph-api/)

* [GitHub GraphQL API v4 | GitHub Developer Guide](https://developer.github.com/v4/)

* [GitHub - kamranahmedse/developer-roadmap: Roadmap to becoming a web developer in 2019](https://github.com/kamranahmedse/developer-roadmap)

* [2.- Arquitectura de una aplicaci√≥n - Google Slides](https://docs.google.com/presentation/d/1HlT7niPOISnHjk6ldbmCvZdiOeKqlzLNxfsGY5499_E/edit?usp=sharing)

### Comentarios:

* **esdraspavon** (8) [494605](https://platzi.com/comentario/494605/) 

	**SOA** (Service Oriented Architecture):
	
	Es auto-contenida (self-contained)  
	Es una caja negra para sus consumidores  
	Representa una actividad de negocio con un fin muy especifico
	
	Web Services:
	
	* SOAP (<https://www.usps.com/business/web-tools-apis/welcome.htm>)
	* RESTful HTTP (<https://developers.facebook.com/docs/graph-api/>)
	* GraphQL (<https://developer.github.com/v4/>)
	
	

* **ravillarreal** (3) [671369](https://platzi.com/comentario/671369/) 

	Cuando nombr√≥ el Developer Roadmap me dije: ‚Äúeste tipo sabe‚Äù xD. Excelente recurso para saber que aprender y entender la idea general de lo que debe ser un Frontend y un Backend.

	* **Kevin Javier Morales** [671369] (3)

		Dejo este nuevo enlace por ac√° <https://roadmap.sh/>

* **jjorgewill** (3) [509008](https://platzi.com/comentario/509008/) 

	para usar grahpQL tambien recomiendo esta app <https://github.com/jjorgewill/graphene-django-extras> super buena, integra los serializar de restframework y se obtiene un buen rendimiento

* **jjorgewill** (3) [509003](https://platzi.com/comentario/509003/) 

	uhh, no van a tocar graphQL, pero bueno puedo recomendar django_graphene

* **Iv√°n Mauricio Toro Cifuentes** (2) [494660](https://platzi.com/comentario/494660/) 

	[Curso de GraphQL](https://platzi.com/clases/graphql/)

* **Adri√°n Andr√©s Sosa** (1) [1015273](https://platzi.com/comentario/1015273/) 

	Muy buena info con respecto a la ruta de un backend

* **Diego Acosta** (1) [937469](https://platzi.com/comentario/937469/) 

	Excelente

* **jlquichimbo** (1) [718392](https://platzi.com/comentario/718392/) 

	Buenas compa√±eros y profe Pablo, tengo una pregunta.  
	Estoy implementando mi aplicaci√≥n como SaaS utilizando el esquema _Multi Tenancy_ e integr√© la app _django-tenant-schemas_ y funciona a la perfecci√≥n en mi computador local.  
	Alguien a desplegado a producci√≥n algo similar?  
	He le√≠do casi toda la documentaci√≥n de Heroku, actualizado mi plan de Heroku-Postgres sin resultados favorables.  
	Conocen otra IaaS para desplegar mi aplicaci√≥n multi tenant?  
	Gracias compa√±eros.

	* **lcmartinez_ (Platzi)** [718392] (2)

		@jlquichimbo:  
		Haciendo una busqueda vi algo que te puede ser util:  
		<https://github.com/bernardopires/django-tenant-schemas/issues/591#issuecomment-479411941>
		
		En cualquier caso puedes usar una instancia de EC2 de AWS y hacer todos los settings tu mismo.

* **benitezconzeta** (1) [648860](https://platzi.com/comentario/648860/) 

	Ser√≠a bueno contar con un curso similar a este pero con graphQL ¬øAlguien m√°s de acuerdo? üòÉ

	* **Diego Alexander Forero Higuera (Platzi)** [648860] (2)

		Puedes revisar una librer√≠a para python que se llama graphene esta se puede integrar con django, si sabes grapQL puedes implementarla sin mayor problema.

* **Damian Perez** (1) [609377](https://platzi.com/comentario/609377/) 
Hace tiempo estaba esperando un curso avanzado de Django comi este.

* **jenapi** (1) [582061](https://platzi.com/comentario/582061/) 

	es totalmente obligatorio el uso de docker en este curso? Lo pregunto ya que mi pc es de 2gb de ram y un sistema de 32 bit

	* **davidtoca (Platzi)** [582061] (1)

		No es obligatorio, pero tendrias que tener un sistema basado en unix como linux o mac y correr todo en tu maquina directamente

	* **jenapi** [582061] (1)

		Gracias por el dato.  
		He conseguido otro proveedor de containers llamado Vagrant‚Ä¶ compatible con sistemas de 32 (cosa que deber√≠a hacer docker, expandir√≠a el horizonte) y es valido para usarse en este caso, la funcionalidad es similar a docker. asi que si alguien tiene este mismo problema pues busquen vagrant en el navegador lean la documentacion y sera una via rentable para superar este dilema.

	* **asanchez2091** [582061] (1)

		creo que no vas a poder instalar docker. Pero te recomiendo que igualmente veas este curso y tomas muchos apuntes para cuando puedas comprar un pc nuevo. Ya sepas como lo vas a comprar (te recomiendo uuna opcion de 64 bit y no menos de 8gb de ram)

* **Alexander  Silvera** (1) [516632](https://platzi.com/comentario/516632/) 

	hola cuando en otro proyecto quiero realizar la instalaci√≥n con docker de las dependencias me sale este error con Celery:
	
	v20web-centro_celerybeat_1 exited with code 1  
	v20web-centro_celeryworker_1 exited with code 1

* **johnyauyo** (1) [495830](https://platzi.com/comentario/495830/) 

	¬øMicro servicios en que categor√≠a est√°?

	* **Kevin Javier Morales** [495830] (1)

		Me parece que es una arquitectura por si sola, puedes tener diferentes microservicios conectados entre s√≠ y de esa forma tendr√°s tu aplicaci√≥n, web o servicio.

* **jenapi** (1) [58800](https://platzi.com/comentario/582061/) 
es totalmente obligatorio el uso de docker en este curso? Lo pregunto ya que mi pc es de 2gb de ram y un sistema de 32 bit

	* **davidtoca (Platzi)** [58800] (1)

		No es obligatorio, pero tendrias que tener un sistema basado en unix como linux o mac y correr todo en tu maquina directamente

* **Alexander  Silvera** (1) [53348](https://platzi.com/comentario/516632/) 
hola cuando en otro proyecto quiero realizar la instalaci√≥n con docker de las dependencias me sale este error con Celery: v20web-centro_c...

* **johnyauyo** (1) [51755](https://platzi.com/comentario/495830/) 
¬øMicro servicios en que categor√≠a est√°?

	* **Kevin Javier Morales** [51755] (1)

		Me parece que es una arquitectura por si sola, puedes tener diferentes microservicios conectados entre s√≠ y de esa forma tendr√°s tu aplicaci√≥n, web o servicio.

## 0030. The Twelve-Factor App [17140](https://platzi.com/clases/1461-django-avanzado/17140-the-tlwelve-factor-app/)

### Descripci√≥n:


Algunos principios de Twelve Factor app

* Formas **declarativas** de configuraci√≥n
* Un **contrato claro** con el OS
* Listas para **lanzar**
* Minimizar la **diferencia** entre entornos
* **F√°cil de escalar**



**Codebase** : Se refiere a que nuestra app siempre debe estar trackeada por un sistema de control de versiones como Git, Mercurial, etc. Una sola fuente de verdad.

**Dependencias** : Una 12 factor app nunca debe depender de la existencia impl√≠cita de nuestro OS, siempre se declaran expl√≠citamente qu√© dependencias usa el proyecto y se encarga de que estas no se filtren. Dependency Isolation.

**Configuraci√≥n** : Ac√° nos referimos a algo que va a cambiar durante entornos.

**Backing services** : Estos pueden ser conectados y desconectados a voluntad. Es cualquier servicio que nuestra aplicaci√≥n puede consumir a trav√©s de la red como Base de Datos, Mensajer√≠a y Cola, Env√≠o de Emails o Cach√©.

**Build, release, run** : Separa estrictamente las etapas de construcci√≥n y las de ejecuci√≥n. Build es convertir nuestro c√≥digo fuente en un paquete.Release es la etapa donde agregamos a nuestro paquete cosas de configuraci√≥n como variables de entorno y Run donde corremos la aplicaci√≥n en el entorno correspondiente. Las etapas no se pueden mezclar.

**Procesos** : En el caso m√°s complejo tenemos muchos procesos corriendo como Celery y Redis, en esta parte los procesos son stateless y no comparten nada. Cualquier dato que necesite persistir en memoria o en disco duro tiene que almacenarse en un backing services,

**Dev/prod parity** : Reducir la diferencia entre entornos para reducir tiempo entre deploys y las personas involucradas sean las mismas que puedan hacer el deploy

**Admin processes** : Tratar los procesos administrativos como una cosa diferente, no deben estar con la app.

### Links:

* [The Twelve-Factor App ](https://12factor.net/)

### Comentarios:

* **moisesurias** (6) [494810](https://platzi.com/comentario/494810/) 

	Yo lo entiendo asi:
	
	  1. **Codebase**  
	Esto significa que tengo que poder hacer un pull de todo mi c√≥digo fuente.
	
	  2. **Dependencies**  
	Debe de haber una manera de tener todas mis dependencias en un solo lugar.  
	Entiendo que algo como el requirements.txt de python puede ser una forma de lograr esto.
	
	  3. ** Config **  
	Este archivo o archivos debe tener la configuraci√≥n de mi ambiente de ejecuci√≥n, ya sea ambiente de desarrollo de pruebas o de producci√≥n. Lo que deber√≠a de cambiar en configuraci√≥n del proyecto deber√≠a de estar en este archivo o archivos.
	
	  4. **Backing services**  
	Yo debo de ser capaz de trabajar con mis ‚Äòbacking services‚Äô como base de datos o sistema de colas separadamente de mi proyecto o mejor dicho deben de ser intercambiables. En este caso, yo considero que tener en un archivo de _config_ o equivalente la configuraci√≥n de la base de datos y hacer los queries a esta utilizando un ORM es una forma de conseguir este paso, al menos en bases de datos, al menos asi lo entiendo, por favor corr√≠jame si me equivoco.
	
	  5. **Build, release and run **  
	Un delivery pipeline deberia de tener estos estados por separado. Esto lo entiendo en concepto, me parece un poco confuso en la pr√°ctica porque el c√≥digo compilado que he tenido la oportunidad de trabajar todo se hacia autom√°ticamente.
	
	  6. ** Processes**  
	La data que utilizan mis procesos deber√≠a de venir de una fuente externa como una base de datos o un sistema de almacenamiento y no asumir que esa data esta en memoria.
	
	  7. **Port binding **  
	Los procesos deber√≠an de ser auto contenidos, es decir que mi aplicaci√≥n, servicios, o procesos deber√≠an de poder comunicarse con otras aplicaciones, procesos o servicios auto contenidos que expongan su contenido a travez de un puerto. Eso para mi fue un poco dif√≠cil de entender, pero es como cuando alguien se conecta a un servidor de apache, uno se conecta a travez de un puerto abierto de apache, o la conexi√≥n a mysql (que regularmente es 3306 ) es decir que yo se que puedo conectarme a mi base de datos en el purto 3306 y que pase adentro, no tengo ni idea, solo se que puedo comunicarme con mi base de datos a travez de ese puerto y punto.
	
	  8. ** Concurrency **  
	Escalabilidad horizontal. Yo puedo escalar levantando otro contenedor u otra instancia y esto no debe de afectar al resto de procesos.
	
	
	
	
	9. **Disposability**  
	La aplicaci√≥n debe de poder apagarse y apagar todos sus recursos as√≠ como encenderse y encender todos sus recursos.
	
	  1. ** Dev / prod parity **  
	Los ambientes de desarrollo y producci√≥n deben ser lo m√°s similar posible. Esto es f√°cil de lograr utilizando cosas como Vagrant o Docker.
	
	  2. ** Logs **  
	Los logs deben de guardarse en algun lugar central.
	
	  3. **Admin processes **  
	Los procesos de administraci√≥n o de administrador deber√≠an de ejecutarse independientemente de los dem√°s procesos.  
	Los procesos administrativos no son parte de la applicaci√≥n.
	
	
	

	* **Eric Eduardo Manzano Leal** [494810] (1)

		Para el punto 7 **Port binding **, por lo que entiendo es como cuando desarrollamos una aplicaci√≥n de php y hacemos el deploy con php-fpm, o con python lo hacemos con unicorn, pero el que sirve el sito web, es por ejemplo, nginx a trav√©s de un puerto, a nginx no le importa que lenguaje tenga en el Back-end, solo que tenga el servicio activo por un puerto, lo interesante seria configurar un socket UNIX

* **Manuel Alejandro Aguilar T√©llez Gir√≥n** (2) [997646](https://platzi.com/comentario/997646/) 

	Les dejo mi aporte. Recomendaciones y aclaraciones, son bienvenidas.  
	**7 Port binding**  
	La Twelve-Factor app es completamente aut√≥noma, cuando el usuario se conecta a la app via hostname, una capa de enroutamiento se encarga de conectar al puerto conveniente para mirar el contenido de la app, lo que un developer ve como `http://localhost:5000/`, el usuario lo ve como `web-app.com`.
	
	**8 concurrency**  
	El developer debe poder arquitectar su app manejando cada uno de sus procesos como un trabajo por separado. Esto debe de permitir que la app escale sin problemas horizontalmente.
	
	**9 Disposability**  
	Los procesos son _desechables_ , es decir, se deben de o parar en cuanto se le d√© dicha indicaci√≥n y lo deben de hacer, si se inicia: r√°pidamente, si se detiene: elegantemente. Esto facilita el escalamiento, el r√°pido despliegue de los cambios en el c√≥digo y la configuraci√≥n y la robustez del despliegue de ejecuci√≥n
	
	**11 Logs**  
	Un _log_ es un output que indica c√≥mo se comporta la aplicaci√≥n.  
	Una Twelve-Factor app no se debe de preocupar por d√≥nde manda estos logs o d√≥nde los va a guardar, simplemente los refleja en la `stdout` del dispositivo del developer para que este lo analice cuando sea conveniente.
	
	Espero sea un buen aporte y les ayude. Agradezco si tienen algo adicional que agregar. üòÉ

	* **Sara Galv√°n Ortega** [997646] (2)

		Gracias!! muy buen aporte!!!

	* **Manuel Alejandro Aguilar T√©llez Gir√≥n** [997646] (0)

		¬°Gracias! üòÑ

* **asanchez2091** (2) [921709](https://platzi.com/comentario/921709/) 

	el principio VII es medio abstracto la mejor manera de entenderlo es traduciendo la cuestion:
	
	La aplicaci√≥n de doce factores es completamente aut√≥noma y no se basa en la inyecci√≥n en tiempo de ejecuci√≥n de un servidor web en el entorno de ejecuci√≥n para crear un servicio orientado a la web. La aplicaci√≥n web exporta HTTP como un servicio al vincularse a un puerto y escuchar las solicitudes que ingresan en ese puerto.
	
	En un entorno de desarrollo local, el desarrollador visita una URL de servicio como http: // localhost: 5000 / para acceder al servicio exportado por su aplicaci√≥n. En la implementaci√≥n, una capa de enrutamiento maneja las solicitudes de enrutamiento desde un nombre de host de cara al p√∫blico a los procesos web vinculados a puertos.

* **David Granados** (2) [856226](https://platzi.com/comentario/856226/) 

	Factor VII
	``` 
	    The twelve-factor app is completely self-contained anddoesnot rely on runtime injection of a webserver intothe execution environment to create a web-facing service. The web app exports HTTP as a service by binding to a port, and listening to requests coming inonthat port.
	    
	```
	
	Entiendo que las aplicaciones deben enlazar sus servicios directamente con puertos, tales como el 80/443 para el http, y recibir requests y servir respuestas a trav√©s de los mismos.
	
	Una aplicaci√≥n en PHP entonces no puede cumplir con este factor?

	* **asanchez2091** [856226] (1)

		Si puede olv√≠date del lenguaje. Esto es mas bien una forma correcta de desarrollar Saas.

* **Alejandro Villegas Carvajal** (2) [494761](https://platzi.com/comentario/494761/) 

	Comenzando con el numero 12, me parece buena practica usar gestores de logs, por ejemplo pappertrail o stackDriver si tener tu all en google

* **esdraspavon** (2) [494625](https://platzi.com/comentario/494625/) 

	The Twelve Factors  
	I. Codebase  
	One codebase tracked in revision control, many deploys  
	II. Dependencies  
	Explicitly declare and isolate dependencies  
	III. Config  
	Store config in the environment  
	IV. Backing services  
	Treat backing services as attached resources  
	V. Build, release, run  
	Strictly separate build and run stages  
	VI. Processes  
	Execute the app as one or more stateless processes  
	VII. Port binding  
	Export services via port binding  
	VIII. Concurrency  
	Scale out via the process model  
	IX. Disposability  
	Maximize robustness with fast startup and graceful shutdown  
	X. Dev/prod parity  
	Keep development, staging, and production as similar as possible  
	XI. Logs  
	Treat logs as event streams  
	XII. Admin processes  
	Run admin/management tasks as one-off processes

* **Adri√°n Andr√©s Sosa** (1) [1015338](https://platzi.com/comentario/1015338/) 

	Ok, la p√°gina 12-factor ya esta en los bookmarks, la verdad que son items fundamentales para proyectos serios.

* **andres-alba** (1) [997071](https://platzi.com/comentario/997071/) 

	En que clase del curso b√°sico de Django menciona lo que son Formas declarativas de configuraci√≥n, y contrato con el OS, me gustar√≠a repasar estos conceptos para entender mejor.

* **Juan Guillermo Perez Cardozo** (1) [949881](https://platzi.com/comentario/949881/) 

	gracias por la explicacion

* **jadry92** (1) [911465](https://platzi.com/comentario/911465/) 

	VII. Port binding: Este principio significa qu√© la aplicaci√≥n web maneja (escucha y responde) las peticiones HTTP a travez de puertos espec√≠ficos en lugar de URL‚ÄôS.  
	VIII. Concurrency: Este principio significa que cada servicio web tiene un √∫nico ‚Äú **processes are a first class citizen** ‚Äù proceso dentro del OS, en el caso de procesos Linux/Unix corren como Daemos (demonios).

* **AlexMaguey** (1) [818178](https://platzi.com/comentario/818178/) 

	En codebase tambi√©n se refiere a que se pueden tener m√∫ltiples deploys con el mismo codebase aunque cada deploy puede tener diferentes versiones. Por ejemplo staging puede tener commits que no est√©n en producci√≥n.
	
	![](https://12factor.net/images/codebase-deploys.png)

## 0040. Codebase Settings modular [17139](https://platzi.com/clases/1461-django-avanzado/17139-codebase-settings-modular/)

### Descripci√≥n:


### Links:

* [GitHub - joke2k/django-environ: Django-environ allows you to utilize 12factor inspired environment variables to configure your Django application.](https://github.com/joke2k/django-environ)

* [GitHub - django-extensions/django-extensions: This is a repository for collecting global custom management extensions for the Django Framework.](https://github.com/django-extensions/django-extensions)

* [GitHub - anymail/django-anymail: Django email backends and webhooks for Amazon SES, Mailgun, Mailjet, Postmark, SendGrid, SendinBlue, SparkPost and more](https://github.com/anymail/django-anymail)

* [GitHub - jschneier/django-storages: https://django-storages.readthedocs.io/](https://github.com/jschneier/django-storages)

* [About Docker CE | Docker Documentation](https://docs.docker.com/install/#supported-platforms)

* [Install Docker Compose | Docker Documentation](https://docs.docker.com/compose/install/)

* [GitHub - joke2k/django-environ: Django-environ allows you to utilize 12factor inspired environment variables to configure your Django application.](https://github.com/joke2k/django-environ)

* [GitHub - anymail/django-anymail: Django email backends and webhooks for Amazon SES, Mailgun, Mailjet, Postmark, SendGrid, SendinBlue, SparkPost and more](https://github.com/anymail/django-anymail)

### Comentarios:

* **Alejandro Villegas Carvajal** (10) [494788](https://platzi.com/comentario/494788/) 

	Git con el Codigo  
	<https://github.com/pablotrinidad/cride-platzi/tree/1/Codebase>

	* **Jesus Herrera** [494788] (1)

		con que commit inicia el proyecto?

	* **Jesus Herrera** [494788] (1)

		Listo ya entend√≠ en la url bien (rama 1/Codebase)

* **asanchez2091** (5) [925532](https://platzi.com/comentario/925532/) 

	Para los que buscan el proyecto cride aqui les dejo en enlace [cride en github](https://github.com/pablotrinidad/cride-platzi)

	* **Erik Ochoa** [925532] (3)

		Gracias por compartir! apreciamos tus aportes y que ayudes a otros estudiantes. üôè

* **Alexander  Silvera** (5) [495697](https://platzi.com/comentario/495697/) 

	Realmente este es un curso avanzado de verdad, son muchos temas que hay que estudiar y como dice el profe el 90% es de construcci√≥n y de estudio y lectura de la estructura de nuestro proyecto y un 10% c√≥digo p√∫ro.  
	A estudiar se ha dicho, gracias.

	* **Kevin Javier Morales** [495697] (1)

		Hay que tomarlo con calma y ver los videos varias veces hasta que aprendamos bien como configurar este y futuros proyectos, c√≥mo funciona todo üí™

	* **Alexander  Silvera** [495697] (1)

		Si es as√≠, ahora puedo trabajar con docker desde windows o creo una maquina virtual con Virtual Box de linux y realizo todo el trabajo desde ah√≠. Que me recomiendan??

	* **Kevin Lozoya Giner** [495697] (3)

		Yo por ahora estoy con Windows 10. Me he instalado el Docker Desktop y cuando reinicias el PC ya tienes los comando `docker` y `docker-compose`.  
		Ya pasar√© por aqu√≠ otra vez si me empieza ir mal. Pero la instalaci√≥n, por ahora, sin problema.

* **Iv√°n Mauricio Toro Cifuentes** (5) [494694](https://platzi.com/comentario/494694/) 

	En esta clase se entiende lo avanzado que es el curso. üòÑ

* **Francisco Soto** (2) [766960](https://platzi.com/comentario/766960/) 

	Deber√≠an dejar los link en las descripciones de los cursos‚Ä¶
	
	saludos

	* **javier alarcon** [766960] (1)

		si esta algo desorganizado esto

	* **Kevin Javier Morales** [766960] (1)

		Los encuentras en la secci√≥n de enlaces, aca arribita.

* **wilarizav** (2) [631044](https://platzi.com/comentario/631044/) 

	No encuentro el repo de projecto üò¶

	* **Diego Alexander Forero Higuera (Platzi)** [631044] (4)

		Los archivos los encuentras en la primera clase del curso, igual te dejo el enlace del repo del profesor <https://github.com/pablotrinidad/cride-platzi/> cada clase esta en un branch.

* **esdraspavon** (2) [516092](https://platzi.com/comentario/516092/) 

	Objetivos del c√≥digo base
	
	* Configuraci√≥n declarativa
	* Contrato claro con el OS
	* Lista para lanzar
	* Reducir diferencia entre entornos
	* F√°cil de escalar
	
	
	
	* * *
	
	¬øPor qu√© Docker?
	
	* No necesita un ‚ÄúGuest OS‚Äù
	* Usa muy poca memoria
	* F√°cil de replicar y controlar
	* F√°cil de compartir
	
	
	
	* * *
	
	[Docker](https://docs.docker.com/install/#supported-platforms)  
	[Docker compose](https://docs.docker.com/compose/install/)

* **Christian Medina Medina** (2) [79232](https://platzi.com/comentario/936194/) 
Una consulta, como evitar que se siga reproduciendo el siguiente video?

	* **Erik Ochoa** [79232] (1)

		En la plataforma no existe una opci√≥n para eso, tienes 5 segundos para dar click en ‚Äúvolver a ver‚Äù y as√≠ evitas que cargue la siguiente clase.

* **Gonzalo Garc√≠a** (2) [75147](https://platzi.com/comentario/864875/) 
De todos los links que veo ninguno es el repo de CRide. ¬øD√≥nde se supone que est√°?

	* **Gerardo Cetzal Balam** [75147] (2)

		[https://github.com/pablotrinidad/cride-platzi](repo)  
		y te pasas a la rama 1/Codebase

* **Adri√°n Andr√©s Sosa** (1) [1016864](https://platzi.com/comentario/1016864/) 

	Que bueno ver estos settings tan completos

* **Jos√© Ricardo Romo Guti√©rrez** (1) [937377](https://platzi.com/comentario/937377/) 

	Por que utilizan MD5? no se supone que esta roto?..

	* **rulobars** [937377] (1)

		Pero solo lo uso en el ambiente de Test por ser mas rapido de computar, en produccion usa los que se definieron en la base.

* **asanchez2091** (1) [925560](https://platzi.com/comentario/925560/) 

	versi√≥n 2.1 ok la pagina el dia de hoy 15 de enero de 2020 ya van por la version 3 Oh!!!

	* **Erik Ochoa** [925560] (2)

		El desarrollo de software nunca para. He escuchado decir que un software nunca lo terminas, s√≥lo lo lanzas para despu√©s mantenerlo y actualizarlo constantemente.

* **jadry92** (1) [911490](https://platzi.com/comentario/911490/) 

	Comando para que copien el c√≥digo inicial:  
	git clone -b 1/Codebase [git@github.com](mailto:git@github.com):pablotrinidad/cride-platzi.git

	* **V√≠ctor Daniel Cardozo Fern√°ndez** [911490] (1)

		gracias!

* **Delia Roman** (1) [887509](https://platzi.com/comentario/887509/) 

	Si quiero usar cualquier VPS en lugar de amazon, c√≥mo configuro el [production.py](http://production.py) en la parte de Storages ‚Ä¶ en general cambian mucho los settings si no uso AWS ??

* **Jorge Enrique Callisaya Sanchez** (1) [875095](https://platzi.com/comentario/875095/) 

	Si quieren tener el repositorio base con el que empieza el Profe pueden descargar el zip elgiendo la rama de Codebase primeramente, o si les gusta bajarlo mediante **git** pueden **clonar** el proyecto y reiniciar los cambios a como estaba en el **primer commit** con el comando :  
	`git reset --hard <hash del primer commit>`

* **miguelmesa9480111** (1) [817801](https://platzi.com/comentario/817801/) 

	$ docker-compose -f local.yml build

* **jsosorio** (1) [785579](https://platzi.com/comentario/785579/) 

	Docker es excelente, pero ¬øusa muy poca memoria? mmmmm.Cuando tenemos varios proyectos con Docker nos damos cuenta que no es as√≠.

	* **Kevin Javier Morales** [785579] (2)

		Comparado con m√°quinas virtuales, Docker siempre va a consumir menos memoria y ser√° m√°s ligero al momento de subir tus aplicaciones en producci√≥n

	* **jsosorio** [785579] (1)

		Estoy de acuerdo, solo si se compara con m√°quinas virtuales, aun as√≠ consume bastante.

	* **Jos√© Ricardo Romo Guti√©rrez** [785579] (1)

		Cual es tu soluci√≥n entonces, si dices que docker consume bastante memoria, que otra cosa podemos usar?

	* **Manuel Alejandro Aguilar T√©llez Gir√≥n** [785579] (1)

		Existen opciones √∫tiles para reducir considerablemente el tama√±o de un contenedor, por ejemplo, hacer build desde una imagen que use s√≥lo contenga los binarios necesarios como _alpine_ , adem√°s puedes hacer build de dicha imagen en multi-stage para mantener s√≥lo los archivos que necesites ya sea en local o producci√≥n. Esto no s√≥lo te ayuda a que sea m√°s liviano el contenedor, tambi√©n ayuda a reducir tiempos al hacer push/pull del mismo e incluso reducir vulnerabilidades. Espero haberte ayudado üòâ

	* **Manuel Alejandro Aguilar T√©llez Gir√≥n** [785579] (1)

		Te dejo [este link](https://www.youtube.com/watch?v=wGz_cbtCiEA) que te aclarar√° de una mejor forma lo que intent√© decir en el comentario anterior.

* **jenapi** (1) [584517](https://platzi.com/comentario/584517/) 

	una pregunta‚Ä¶ como se podria configurar vagrant para que tenga las mismas especificaciones que tiene este contenedor de docker?

	* **Diego Alexander Forero Higuera (Platzi)** [584517] (3)

		Vagrant es mucho m√°s pesado que docker porque vagrant inicia una maquina virtual a diferencia de docker que corre directamente sobre el kernel. Una instancia de docker esta disponible en no m√°s de 5 segundos una vez tienes el contenedor creado, cosa que no pasa con vagrant.

	* **Ivan Trivi√±o** [584517] (1)

		En principio deber√≠as tratar de usar Docker ya que es m√°s r√°pido, ligero y vers√°til, pero si por cualquier motivo estas obligado a utilizar Vagrant o cualquier otra tecnolog√≠a similar solo debes asegurarte de instalar las dependencias requeridas por la aplicaci√≥n (que las puedes encontrar en el script del Dockerfile y en los archivos dentro del directorio requirements) y verificar que los puertos por los que vas a exponer la aplicaci√≥n est√©n abiertos en tu m√°quina virtual.

* **jenapi** (1) [584103](https://platzi.com/comentario/584103/) 

	alguien tiene idea de que seria necesario instalar en una vm de vagrant para realizar este curso?

	* **robertpro** [584103] (2)

		En teor√≠a pip y las dependencias del proyecto, no creo necesario nada mas

	* **Diego Alexander Forero Higuera (Platzi)** [584103] (1)

		Hola te recomiendo que uses docker en lugar de vagrant es mucho mas liviano y r√°pido que vagrant. Adicionalmente puedes descargarte la imagen de python 3.6 y ya tienes instalado todo lo necesario para seguir el curso.

	* **jenapi** [584103] (1)

		@GOLLUM23 claro. el problema es que tengo un aqrquitectura de 32 bit y no puedo usar docker en mi pc

	* **Diego Alexander Forero Higuera (Platzi)** [584103] (2)

		@jenapi, ok, pero igual creo que vagrant igual solo lo vas a poder montar con un sistema de 32 bits, igual lo que necesitas puedes encontrarlo usando una maquina virtual, puedes probar usando virtualbox y una imagen de ubuntu te va a servir igual y la imagen de ubuntu viene con lo que necesitas para seguir el curso (b√°sicamente python)

	* **jenapi** [584103] (1)

		Gracias por el aporte üòÉ

* **benitezconzeta** (1) [514746](https://platzi.com/comentario/514746/) 

	Pablo, agradezco por el gran curso que est√°s dando y pregunto ¬øPor qu√© usas psycopg2 en lugar de psycopg2-binary? ¬øCual es la diferencia o la motivaci√≥n?  
	Consulto porque hay quienes recomiendan usar psycopg2-binary. Quiz√°s no entiendo bien la diferencia sobre cu√°ndo usar cada uno.  
	Saludos!!! (y)

	* **Skootik Mobile Technologies** [514746] (3)

		La explicacion la tienes en el announcement de la [v.2.7.4](http://initd.org/psycopg/articles/2018/02/08/psycopg-274-released/), pero resumiendo, habia problemas con un paquete (ssl) que iba mal para algunos usuarios y crearon el -binary, da igual cual instales que luego funcionan igual.

	* **benitezconzeta** [514746] (1)

		Gracias @AlchemyML !!!1

* **jjorgewill** (1) [509036](https://platzi.com/comentario/509036/) 

	Super potente este curso, he trabajado con todas esas tecnolog√≠as as√≠ que a reafirmar conocimientos

* **jjorgewill** (1) [509031](https://platzi.com/comentario/509031/) 

	üòÉ estoy emocionado por aprender docker

* **Everardo S√°nchez** (1) [506038](https://platzi.com/comentario/506038/) 

	Veo que hay muchos comentarios # NOQA, ¬øa qu√© se refiere eso?

	* **JPabloMayorgaM** [506038] (1)

		Es un estandar, indica que no tiene aseguramiento de calidad, puede usarse para marcar que ignore advertencias de verificaci√≥n automatica de codigo como pep 8 en [este link](https://stackoverflow.com/questions/45346575/what-does-noqa-mean-in-python-comments) m√°s detalles

* **PLATZI_LOVERS21** (1) [505715](https://platzi.com/comentario/505715/) 

	Buen dia profe me salio este error, estoy usando docker en windows
	``` 
	    $ docker-compose -f local.yml build
	    Building postgres
	    ERROR: SSL error: [SSL: TLSV1_ALERT_PROTOCOL_VERSION] tlsv1 alert protocol version (_ssl.c:661)```
	    
	```

* **Alexander  Silvera** (1) [504626](https://platzi.com/comentario/504626/) 

	Tomando en cuenta lo realizado en el curso anterior de django, en este no √∫tilizamos entornos virtuales, se puede saber por que motivo es??

	* **Pablo Trinidad** [504626] (3)

		No es necesario ya que usamos Docker para distribuir la aplicaci√≥n.

	* **Alexander  Silvera** [504626] (1)

		Ok muchas gracias ya entiendo

* **Alexander  Silvera** (1) [504617](https://platzi.com/comentario/504617/) 

	Vuelvo a plantear una duda con respecto a el c√≥digo ya pre-instalado o ya creado, como ser las carpetas iniciales. Esto lo creo el profesor y si lo creo el profesor estas configuraciones sirven para cualquier proyecto que uno quiera realizar, o lo debemos de modificar seg√∫n nuestras necesidades??

	* **Kevin Javier Morales** [504617] (2)

		Es una configuraci√≥n que suele servir para cualquier proyecto, pero siempre depende de ti y del proyecto que hagas. Puedes modificarlo como tu quieras y c√≥mo te sea m√°s c√≥modo siempre teniendo en cuenta el 12factor

* **jsballesteros** (1) [495224](https://platzi.com/comentario/495224/) 

	Que buena explicaci√≥n !

* **asanchez2091** (1) [79071](https://platzi.com/comentario/933083/) 
estoy leyendo que en el github de django-environ se√±alan una serie de issues. Debo considerarlos para el proyecto??. O cuando el mio prop...

	* **Erik Ochoa** [79071] (1)

		Todos los proyectos tienen issues en los que se est√°n trabajando, lo importante es que tomes una versi√≥n ‚Äú **release** ‚Äù para trabajar en producci√≥n, cualquier major issue suelen solucionarse r√°pido y sacar un patch.

* **asanchez2091** (1) [78673](https://platzi.com/comentario/925685/) 
md5 no es inseguro para las contrase√±as??

* **jenapi** (1) [58956](https://platzi.com/comentario/584517/) 
una pregunta‚Ä¶ como se podria configurar vagrant para que tenga las mismas especificaciones que tiene este contenedor de docker?

	* **Diego Alexander Forero Higuera (Platzi)** [58956] (3)

		Vagrant es mucho m√°s pesado que docker porque vagrant inicia una maquina virtual a diferencia de docker que corre directamente sobre el kernel. Una instancia de docker esta disponible en no m√°s de 5 segundos una vez tienes el contenedor creado, cosa que no pasa con vagrant.

* **jenapi** (1) [58930](https://platzi.com/comentario/584103/) 
alguien tiene idea de que seria necesario instalar en una vm de vagrant para realizar este curso?

	* **robertpro** [58930] (2)

		En teor√≠a pip y las dependencias del proyecto, no creo necesario nada mas

* **benitezconzeta** (1) [53191](https://platzi.com/comentario/514746/) 
Pablo, agradezco por el gran curso que est√°s dando y pregunto ¬øPor qu√© usas psycopg2 en lugar de psycopg2-binary? ¬øCual es la diferencia ...

	* **Skootik Mobile Technologies** [53191] (3)

		La explicacion la tienes en el announcement de la [v.2.7.4](http://initd.org/psycopg/articles/2018/02/08/psycopg-274-released/), pero resumiendo, habia problemas con un paquete (ssl) que iba mal para algunos usuarios y crearon el -binary, da igual cual instales que luego funcionan igual.

* **Alexander  Silvera** (1) [52395](https://platzi.com/comentario/504626/) 
Tomando en cuenta lo realizado en el curso anterior de django, en este no √∫tilizamos entornos virtuales, se puede saber por que motivo es??

	* **Pablo Trinidad** [52395] (3)

		No es necesario ya que usamos Docker para distribuir la aplicaci√≥n.

* **Alexander  Silvera** (1) [52393](https://platzi.com/comentario/504617/) 
Vuelvo a plantear una duda con respecto a el c√≥digo ya pre-instalado o ya creado, como ser las carpetas iniciales. Esto lo creo el profes...

	* **Kevin Javier Morales** [52393] (2)

		Es una configuraci√≥n que suele servir para cualquier proyecto, pero siempre depende de ti y del proyecto que hagas. Puedes modificarlo como tu quieras y c√≥mo te sea m√°s c√≥modo siempre teniendo en cuenta el 12factor

## 0050. Codebase Dependencias y archivos de docker [17142](https://platzi.com/clases/1461-django-avanzado/17142-codebase-dependencias-y-archivos-de-docker/)

### Descripci√≥n:


### Links:

* [GitHub - jschneier/django-storages: https://django-storages.readthedocs.io/](https://github.com/jschneier/django-storages)

* [GitHub - anymail/django-anymail: Django email backends and webhooks for Amazon SES, Mailgun, Mailjet, Postmark, SendGrid, SendinBlue, SparkPost and more](https://github.com/anymail/django-anymail)

* [GitHub - django-extensions/django-extensions: This is a repository for collecting global custom management extensions for the Django Framework.](https://github.com/django-extensions/django-extensions)

* [GitHub - joke2k/django-environ: Django-environ allows you to utilize 12factor inspired environment variables to configure your Django application.](https://github.com/joke2k/django-environ)

* [GitHub - getsentry/sentry: Sentry is cross-platform application monitoring, with a focus on error reporting.](https://github.com/getsentry/sentry)

### Comentarios:

* **V√≠ctor Daniel Cardozo Fern√°ndez** (2) [900936](https://platzi.com/comentario/900936/) 

	Hago docker-compose ps y me sale eso:
	
	![](https://i.imgur.com/D6JLB9g.png)
	
	Deber√≠an estar los 3 contenedores de celery estar funcionando peor por alguna raz√≥n dice Exit 1
	
	Viendo los logs todos me dan este error. ¬øPor qu√© podr√≠a ser?
	
	![](https://i.imgur.com/3UFdrgr.png)

	* **Manuel Alejandro Aguilar T√©llez Gir√≥n** [900936] (1)

		Hola amigo, perd√≥n por tardar tanto. Buscando un poco por ah√≠ me di cuenta que el problema es que el modulo tornado fue deprecado y causa problemas. Lo solucion√© instalando tornado, al escribirlo en mi requirements.txt as√≠  
		`tornado>=4.2.0,<6.0.0`  
		Y actualizando redis  
		`redis>=3.2`  
		Con eso todo deber√≠a funcionar

* **AlexMaguey** (2) [818222](https://platzi.com/comentario/818222/) 

	Para gestionar sus dependencias les recomiendo usar poetry.  
	<https://poetry.eustace.io/>

	* **Kevin Javier Morales** [818222] (1)

		Tambi√©n esta la opci√≥n de [Pipenv](https://github.com/pypa/pipenv)

* **uninorteplatziparatodos** (2) [572257](https://platzi.com/comentario/572257/) 

	2ride_flower_1 /entrypoint /start-flower Exit 1  
	2ride_celerybeat_1 /entrypoint /start-celerybeat Exit 1  
	2ride_celeryworker_1 /entrypoint /start-celeryw ‚Ä¶ Exit 1
	
	Obtuve estos tres c√≥digos de error

	* **uninorteplatziparatodos** [572257] (1)

		Tengo dudas, ¬øtodo eso lo codeaste t√∫? o ese nivel de abstracci√≥n entre local y producci√≥n est√° en internet

	* **Diego Alexander Forero Higuera (Platzi)** [572257] (2)

		Puedes ver los logs de los contenedores para ver la causa por la que est√°n fallando el comando es docker logs <nombre del contenedor>, cuando veas el error lo puedes compartir para ayudarte a solucionar. En cuando a lo de los Dockerfiles puedes ver por ejemplo los dockerfiles de las imagenes de docker hub y usarlas como base para tus propias im√°genes.

	* **uninorteplatziparatodos** [572257] (1)

		Gracias Gollum, mi duda iba en relaci√≥n a la forma como tiene configurada el settings, el base y el local. Quer√≠a saber si exist√≠a alguna manera de crear el proyecto de esa manera o eso lo configur√≥ manualmente?

	* **Diego Alexander Forero Higuera (Platzi)** [572257] (2)

		La creaci√≥n de im√°genes para docker es muy manual y personalizada, tu puedes basarte en una imagen ya existente y hacer modificaciones por ejemplo para agregar variables de entorno o librer√≠as especificas que quieres que est√©n disponibles al momento de crear la imagen sin necesidad de hacer la instalaci√≥n posterior.

	* **uninorteplatziparatodos** [572257] (1)

		Vale Gollum, much√≠simas gracias. Entonces este video es oro y tesoro porque hacer lo que √©l hizo es bastante jarto jajaja

* **Franco Correa** (2) [496960](https://platzi.com/comentario/496960/) 

	Una muy buena explicaci√≥n del cl√°sico `django-cookiecutter` üòÉ

* **asanchez2091** (2) [78676](https://platzi.com/comentario/925698/) 
Escuche de Freddy Vega que platzi esta hecho en Django y que puede soportar unas 300 mil solicitudes. Ahora como logra esta ya que he le√≠...

	* **Nicolas Restrepo** [78676] (3)

		Django es un framework que escala muy f√°cilmente, todo depende de la calidad de tu c√≥digo. No solo Platzi usa django, tambi√©n lo usa la nasa, y creo que la muestra m√°s grande de escalabilidad es instagram

* **Adri√°n Andr√©s Sosa** (1) [1016920](https://platzi.com/comentario/1016920/) 

	El titulo ‚ÄúCurso Avanzado de Django‚Äù esta muy bien puesto, esta es una estructura de folders bastante completa y profesional

* **Sebastian Rodriguez Sanchez** (1) [873481](https://platzi.com/comentario/873481/) 

	donde descargo el codigo de cride?

	* **Ricardo Moreno** [873481] (1)

		-> <https://github.com/pablotrinidad/cride-platzi/>

* **chinocejas** (1) [617875](https://platzi.com/comentario/617875/) 

	Folders del proyecto

	* **jgorocica** [617875] (1)

		¬øCuales folders?

* **chinocejas** (1) [617873](https://platzi.com/comentario/617873/) 

	Folders del proyecto

	* **jgorocica** [617873] (1)

		¬øCuales folders?

* **chinocejas** (1) [617874](https://platzi.com/comentario/617874/) 

	Folders del proyecto

	* **jgorocica** [617874] (1)

		¬øCuales folders?

* **Jose Antonio Caraballo Rojas** (1) [503344](https://platzi.com/comentario/503344/) 

	si quiero iniciar un proyecto como el que veremos aqu√≠ pero con ese mismos entorno y herramientas que usamos en este curso, como hago uso este c√≥digo y ajusto a mi gusto o recomiendan armar mi stack desde cero?

	* **judamaro** [503344] (3)

		Pues tu mismo lo dices, usa el entorno y herramientas y si es necesario ajusta el c√≥digo a lo que necesites, aunque no creo que debas empezar desde 0

* **Alexander  Silvera** (1) [499983](https://platzi.com/comentario/499983/) 

	Una consulta todas estas carpetas, de config, compose, etc; las tenemos que crear desde cero o ya viene configurados. Y si hay que crearlas desde cero, depende de cada proyecto que vayamos a realizar??

	* **Pablo Trinidad** [499983] (1)

		Ya vienen configuradas.

* **David Alejandro Abreu Abreu** (1) [82130](https://platzi.com/comentario/998132/) 
Alguien teniendo problemas con docker? me arroja el siguiente error y no he podido solucionar PS C:\Users\David\Documents\Platzi Cu...

	* **Juan David Castro (Platzi)** [82130] (1)

		üëã ¬°Hola, David!
		
		Otras personas tuvieron el mismo error y pudieron solucionarlo removiendo las variables de entorno que establece Docker Toolbox y reinici√°ndo tu pc: <https://github.com/docker/for-win/issues/2706>. üòâ
		
		> System properties -> Advanced system settings -> Environment variables -> User variables

* **Erick Herrera** (1) [81790](https://platzi.com/comentario/989894/) 
Hay alguna clase de Platzi en alg√∫n curso donde hablen m√°s a fondo lo de las LICENCIAS? como la MIT general que nombra Pablo? Gracias

* **Guido Maycol Gutierrez Miranda** (1) [79923](https://platzi.com/comentario/949187/) 
Me sale este error en varios lados cuando ejecuto el comando: docker-compose -f local.yml up. ImportError: cannot import name ‚Äòpython_2_u...

	* **Juan David Castro (Platzi)** [79923] (1)

		Puede ser que est√©s usando una versi√≥n de Django que no soporta esa librer√≠a. Mira: <https://stackoverflow.com/questions/20741754/python-2-unicode-compatible-error>. üòâ

* **Sebastian Rodriguez Sanchez** (1) [75657](https://platzi.com/comentario/873491/) 
donde descargo el folder de cride?

	* **Carlos Garcia Castellanos** [75657] (1)

		[CRide](https://github.com/pablotrinidad/cride-platzi)

* **benitezconzeta** (1) [62954](https://platzi.com/comentario/648929/) 
Creando mi propio proyecto con cookiecutter veo que en los requeriments me agrega junto con django el siguiente comentario: # pyup < 3...

	* **Diego Alexander Forero Higuera (Platzi)** [62954] (2)

		Hola. lo que mencionas de pyup<3.0 es que va a poder instalar cualquier versi√≥n siempre y cuando sea menor a la 3, esto es porque cuando hay cambios mayores de versiones puede romper la funcionalidad de tu librer√≠a. En cuando a la versi√≥n de django puedes escribir en los requirements igual como con pyup , osea Django < 3.0 esto va a permitir que se instalan todas las versiones que sean menores a la 3.

* **uninorteplatziparatodos** (1) [58040](https://platzi.com/comentario/572257/) 
2ride_flower_1 /entrypoint /start-flower Exit 1 2ride_celerybeat_1 /entrypoint /start-celerybeat Exit 1 2ride_celer...

	* **uninorteplatziparatodos** [58040] (1)

		Tengo dudas, ¬øtodo eso lo codeaste t√∫? o ese nivel de abstracci√≥n entre local y producci√≥n est√° en internet

* **Jose Antonio Caraballo Rojas** (1) [52297](https://platzi.com/comentario/503344/) 
si quiero iniciar un proyecto como el que veremos aqu√≠ pero con ese mismos entorno y herramientas que usamos en este curso, como hago uso...

	* **judamaro** [52297] (3)

		Pues tu mismo lo dices, usa el entorno y herramientas y si es necesario ajusta el c√≥digo a lo que necesites, aunque no creo que debas empezar desde 0

* **Alexander  Silvera** (1) [52062](https://platzi.com/comentario/499983/) 
Una consulta todas estas carpetas, de config, compose, etc; las tenemos que crear desde cero o ya viene configurados. Y si hay que crearl...

	* **Pablo Trinidad** [52062] (1)

		Ya vienen configuradas.

## 0060. Codebase Docker [17141](https://platzi.com/clases/1461-django-avanzado/17141-codebase-docker/)

### Descripci√≥n:


### Comentarios:

* **EmmanuelO** (7) [868224](https://platzi.com/comentario/868224/) 

	Para los que tengan problemas con celery, tornado, redis, cosas como ‚Äò√âste m√≥dulo no se encuentra en tornado‚Äô, etc, etc.
	
	Dejen las dependencias de Celery de la siguiente forma
	``` 
	    # Celery
	    redis>=3.2.0
	    django-redis==4.10.0
	    celery==4.2.1
	    tornado>=5.0.0,<6.0.0
	    flower==0.9.2
	    
	```
	
	Tendr√°n que ejecutar otra vez ‚Äúdocker-compose build‚Äù

* **Kevin Lozoya Giner** (4) [496414](https://platzi.com/comentario/496414/) 

	En Windows, para poner la variable de entorno COMPOSE_FILE, podemos crear un archivo en la ra√≠z de nuestro proyecto (donde se encuentra `local.yml`) llamado `.env` y dentro declarar:
	``` 
	    COMPOSE_FILE=local.yml
	    
	```

	* **Jesus Herrera** [496414] (4)

		se puede utilizar tambien en WINDOWS ‚Äúset‚Äù en lugar de ‚ÄúEXPORT‚Äù
		``` 
		    set COMPOSE_FILE=local.yml
		    
		```
		
		luego correr
		``` 
		    docker-compose up
		    
		```

	* **jenapi** [496414] (1)

		@jesusmaherrera En que archivo va el export?

	* **Jesus Herrera** [496414] (2)

		en consola antes de escribir los comandos de **docker-compose**

* **nicolaspoveda** (3) [918774](https://platzi.com/comentario/918774/) 

	no puedo correr el proyecto, clone el repo de pablo, y este est√° mas construido que el de la clase hasta tiene apps adcionales, cuando corro el comando para correr el proyecto, sale este error
	``` 
	    File "/usr/local/lib/python3.6/site-packages/rest_framework/authtoken/models.py", line 6, in <module>
	    celeryworker_1  |     from django.utils.encoding import python_2_unicode_compatible
	    celeryworker_1  | ImportError: cannot import name 'python_2_unicode_compatible'
	    
	    
	```
	
	donde esta el codigo inicial para ir a la par con las clases?  
	que debo hacer para seguir la clase con normalidad?

	* **Christian Medina Medina** [918774] (1)

		tengo este mismo problema‚Ä¶ dime como pudiste solucionarlo?

	* **jorgerivera01** [918774] (1)

		alguien porfavor help!

	* **jorgerivera01** [918774] (1)

		ya seeeee!! dentro del archivo requeriments/base.txt cambien ‚Äúdjango>=2.0.10 por django==2.2.2‚Äù el prob es que versiones nuevas de django tienen prob con python 2 ya que este dejo de ser soportado en enero de 2020
		
		gracias a Alexis Munera que me ayudo

	* **Guido Maycol Gutierrez Miranda** [918774] (1)

		Entonces que? Hago todo de nuevo depues de cambiar la version de django??

	* **Virgo_21** [918774] (1)

		Me sirvio lo que comenta jorgerivera01, es un tema de dependencias de django con su version 3

* **miguelmesa9480111** (3) [818891](https://platzi.com/comentario/818891/) 

	```
	    # Para construir las imagenes
	    $ docker-compose -f local.yml build
	    
	    # Para correr el stack
	    $ docker-compose -f local.yml up
	    
	    # Para ver el estado de los procesos de Docker
	    $ docker-compose -f local.yml ps 
	    
	    # Para detener la ejecuci√≥n
	    $ docker-compose -f local.yml down
	    
	```
	
	Para no tener que colocar ‚Äú-f local.yml‚Äù en cada comando, se puede crear una variable de entorno de esta forma:
	``` 
	    $ export COMPOSE_FILE=local.yml
	    
	```

	* **Luis √Ångel Cuandon Salazar** [818891] (1)

		Para correr comandos de Django usamos
		``` 
		    $ docker-compose run--rm SERVICE COMMAND
		    
		```
		
		Por ejemplo para crear un super usuario
		``` 
		    $ docker-compose run--rm django  \
		    	python manage.py createsuperuser
		    
		```

* **Juan Carlos Pinz√≥n** (3) [526279](https://platzi.com/comentario/526279/) 

	No he podido avanzar, me dice que no encuentra el [manage.py](http://manage.py) (estoy en windows con Docker Toolbox)
	
	![{81565218-139D-4B7E-84B7-5DB6DD8BC775}.png](https://static.platzi.com/media/user_upload/%7B81565218-139D-4B7E-84B7-5DB6DD8BC775%7D-5854fd92-37ee-4dd4-8add-7db9a9df38a1.jpg)

	* **pedrojuliorozo** [526279] (1)

		Despu√©s de dar muchas vueltas, opt√© por borrar todo el proyecto y descomprimirlo de nuevo y volver a empezar.

* **hugoorlandogonzalez** (2) [998548](https://platzi.com/comentario/998548/) 

	No puedo ejecutar el archivo ya que me sale el siguiente error:
	
	ImportError: cannot import name ‚Äòpython_2_unicode_compatible‚Äô
	
	Alguno tiene el mismo problema?

* **sgomez2113** (2) [935228](https://platzi.com/comentario/935228/) 

	docker es muy molesto, no he podido avanzar por andar solucionando error tras error üò¢

	* **Kevin Javier Morales** [935228] (2)

		Qu√© errores te ha dado Docker?

	* **asanchez2091** [935228] (1)

		P√°sate primero por el curso de docker que tienen aqu√≠ en platzi te lo recomiendo.

* **David Alejandro Abreu Abreu** (2) [795886](https://platzi.com/comentario/795886/) 

	En mi caso Docker corre con la direccion de IP _192.168.99.100._ Al acceder al _localhost:8000_ me rechazaba la conexion. Tuve que colocar la ip de Docker en los _Allowed Host_ para poder acceder.

* **wilson_romero** (2) [685241](https://platzi.com/comentario/685241/) 

	Comandos Docker $ docker container $ docker images $ docker volume $ docker network ls rm prune -a -q

* **chinocejas** (2) [618238](https://platzi.com/comentario/618238/) 

	Hola, no estoy pudiendo levantar el celerybeat_1
	
	Despu√©s de hacer el up de la app, ejecuto el comando:
	``` 
	    docker-compose -f local.yml ps
	    
	```
	
	Y el √∫nico que no levanta es CeleryBeat.
	``` 
	     Name          Command               State            Ports
	    ------------------------------------------------
	    cride-platzi_celerybeat_1     /entrypoint /start-celerybeat    Exit 1```
	    
	```
	
	La applicaci√≥n de django en localhost:8000/admin no se puede acceder tampoco, por lo que estoy trabado ac√°.  
	[Ac√° est√°](https://github.com/chinocejas/docker-logs/blob/master/LogsUP) el log
	
	Alguno sabe que puede ser?

	* **Diego Alexander Forero Higuera (Platzi)** [618238] (1)

		Puedes compartir el archivo donde configuraste las tareas de celery beat, al parecer esta teniendo un problema en la definici√≥n de las tareas.

	* **jenapi** [618238] (2)

		Puede deberse a la configuraci√≥n del scheduler de celerybeat.  
		Prueba poner esto en compose>local>django>celery>beat>start
		``` 
		    /*Para que me funcionara tuve que borrar lo que estaba en ese file (exceptuando los imports) pero tengo que borrar manualmente el celerybeat.pid, creo que se puede solucionar esto √∫ltimo pero esperar√© a terminar el curso para experimentar conelc√≥digo*/
		    
		    mkdir -p /var/run/celery/
		    celery -A cride.taskapp beat -l INFO -s /var/run/celery/beat-schedule
		    
		```

	* **Gloria Yaneth Ramirez Alzate** [618238] (1)

		Saludos a todos,
		
		Comenc√© este curso ayer, y estoy experimentando lo mismo. El celerybeat_1 no est√° ejecutandose. ¬øAlguien pudo resolver esta novedad?
		
		Gracias!

	* **jenapi** [618238] (1)

		Estas usando docker toolkit?

	* **Gloria Yaneth Ramirez Alzate** [618238] (1)

		Hola jenapi,
		
		Gracias por contestar. Ya pude resolver la novedad, y s√≠, estoy en Windows 10 usando el docker toolbox. Pude resolver el problema luego de mirar este link --> <https://github.com/pydanny/cookiecutter-django/issues/1793#issuecomment-445536207>

* **Nicolas Eduardo Romero Morales** (2) [540056](https://platzi.com/comentario/540056/) 

	No logro levantar el celery y el flower no dejan de mandar errores  
	(Linux Mint)
	
	![Screenshot from 2019-03-20 13-48-19.png](https://static.platzi.com/media/user_upload/Screenshot%20from%202019-03-20%2013-48-19-52bc043e-4735-4941-b4f0-31f08d595657.jpg)

	* **H√©ctor Ocegueda** [540056] (14)

		yo tuve que cambiar el archivo base.txt, con eso todos los servicios quedaron up, espero te sirva
		``` 
		    # Celery
		    redis>=3.2.0
		    tornado>=4.2.0,<6.0.0
		    django-redis==4.10.0
		    celery==4.2.1
		    flower==0.9.2```
		    
		```

	* **Germ√°n** [540056] (2)

		Hola chicos tengo el mismo problema y no logro solucionarlo ayudaa!! Por fii!

	* **aviloncho** [540056] (8)

		Hola amigos.  
		Yo tambien tenia problemas para levantar Celery y Flower. Lo solucione cambiando los requirements de _Celery_ en el archivo _base.txt_.
		``` 
		    # Celery
		    redis>=3.2.0
		    django-redis==4.10.0
		    celery==4.2.1
		    flower==0.9.2
		    tornado>=4.2.0,<6.0.0
		    
		```
		
		Se cambio la version de redis y se agrego tornado al final.  
		Espero les sea de ayuda.

	* **aviloncho** [540056] (5)

		Olvide mencionar que despues de cambiar este archivo, deben ejecutar nuevamente el comando:
		``` 
		    docker-compose build
		    
		```
		
		Para que docker vuelva a construir los servicios tomando el cambio hecho en el archivo de requirements.

	* **Eduardo Kiriakos Piazza** [540056] (2)

		Ten√≠a el mismo problema y me sirvi√≥ tu sugerencia, muchas gracias!

	* **ingkstr** [540056] (2)

		Con el cambio que sugieren en los requirements de base.txt tambi√©n me funcion√≥. Muchas gracias!!!

* **Jesus Herrera** (2) [531964](https://platzi.com/comentario/531964/) 

	Habilitar debugger

* **Didier Z√∫√±iga** (2) [496569](https://platzi.com/comentario/496569/) 

	Si al correr `docker-compose -f local.yml up` llegan a tener un error tipo:
	``` 
	    ERROR: for flower  Cannot start service flower: driver failed programming external connectivity onendpoint
	    
	```
	
	Solo intenten reiniciar Docker y listo.

* **Guido Maycol Gutierrez Miranda** (2) [79900](https://platzi.com/comentario/948842/) 
Me sale este error en varios lados cuando ejecuto el comando: docker-compose -f local.yml up. ImportError: cannot import name ‚Äòpython_2_u...

	* **Jhonnathan Capelo** [79900] (3)

		ve a descargarte [](https://github.com/pablotrinidad/cride-platzi) y escoge la rama (Branch) Codebase  
		cambia a la ultima version de django en el archivo requirements/base.txt
		``` 
		    # Django
		    django==3.0.2
		    
		```
		
		y cambia
		``` 
		    # Celery
		    redis==3.2.0
		    django-redis==4.10.0
		    celery==4.2.1
		    flower==0.9.3
		    tornado==4.5.2
		    
		```
		
		y has el build

* **raga** (1) [1014563](https://platzi.com/comentario/1014563/) 

	El export funciona solo dentro de la instancia de la consola o se agrega al zshcr?

	* **Enrique Alexis Lopez Araujo** [1014563] (1)

		Cuando hacer el export solo funciona dentro de la sesion de la terminal si quisiera agregarlo al .zshcr para que cad aves que abras alguna sesion de tu terminal tome la variable que necesitas.

* **Carlos Oliveros** (1) [994914](https://platzi.com/comentario/994914/) 

	Hola. Por que no mejor dejar el archivo de docker compose con el nombre por defecto (docker-compose.yml), y asi evitar tener que exportar la variable de entorno y/o tener que usar -f local.yml?

	* **Gabriel De Andrade** [994914] (1)

		Para separar entornos locales de desarrollo y entornos de producci√≥n üòÑ

	* **Carlos Oliveros** [994914] (1)

		Si, es una buena solucion aunque no la mejor. Gracias y saludos.

	* **Gabriel De Andrade** [994914] (1)

		Bueno, si, de todas maneras no las veo como mejores o peores, solo diferentes üòõ

* **Luis Fernando Cruz Carrillo** (1) [981062](https://platzi.com/comentario/981062/) 

	Hola, les comparto el siguiente script, espara facilitar la ejecuci√≥n repetitiva de los comandos para leventar los servicios de este curso, espero que lo disfruten. Saludos.
	
	<https://gist.github.com/quattrococodrilo/b85da7d5715f1139af8fd7497c06accf>
	``` 
	    #!/bin/bash
	    # Author: Luis Fernando Cruz Carrillo
	    # Email: quattrococodrilo@gmail.com
	    # This file must be in docker-compose's file directory, and need
	    # have execution allows. It work fine in linux systems, but if you
	    # taste it in emulated Ubuntu terminal in Windows, please share me
	    # your results. Enjoy!
	    
	    options_start(){
	        # Options menu
	    
	        echo-e"---------------------------"
	        echo-e"--------QUICK START--------"
	        echo-e"---------------------------"
	        echo"Run a docker-compose file by the \"easy way\"."
	        echo"Sintax: command [option] [suboption]"
	        echo"Options -up / -down"
	        echo"Suboptions:"
	        echo-e"\t -rs Run service separately: first, you need run command with option -up in one terminal, and then run command with -up -rs options in another terminal."
	        echo-e"\t -a Run in stand alone mode: first, it run the services in silence mode, and then run separately one of them, by example, django."
	    }
	    
	    if [ ! $1 ]; then
	        options_start
	        exit 1
	    fi
	    
	    prepare_environ () {
	        # Set a docker-compose file as a COMPOSE_FILE variable.
	    
	        dir_files=($(ls *.yml))
	    
	        echo"Select compose file:"
	    
	        for (( df=0; df < ${#dir_files[@]}; df++ ))
	        do
	            echo"$((df + 1)). ${dir_files[$df]}"
	        done
	    
	        read -p "Option [number]: " option
	    
	        option=$(( option - 1 ))
	    
	        path_to_file=$(pwd)
	    
	        composer_file=${dir_files[option]}
	    
	        export COMPOSE_FILE="$path_to_file/$composer_file"
	    }
	    
	    
	    rs_option () {
	        # This function allows run a service in stand alone mode.
	    
	        docker-compose ps
	        read -p "Enter service name: " name
	        if [ $name ]; then
	            read -p "Enter app name: " app
	            if [ $app ]; then
	                docker rm -f$name
	                docker-compose run --rm --service-ports $app
	            fi
	        else
	            options_start
	            exit 1
	        fi
	    }
	    
	    
	    add_exception_ignore () {
	        # Add program name as exception in .dockerignore.
	    
	        program_name="executor.sh"
	    
	        if [ -f .dockerignore ]; then
	            file=.dockerignore
	            exist_exception=0
	            while IFS= read line
	            do
	                if [ "$line" = "$program_name" ]; then
	                    exist_exception=1
	                fi
	            done <"$file"
	        fi
	    
	        if [ $exist_exception-eq 0 ]; then
	            echo"$program_name" >> $file
	        fi
	    }
	    
	    
	    if [ $1 = "--help" ]; then
	        options_start
	    
	    elif [ $1 = "-up" ]; then
	        add_exception_ignore
	        prepare_environ
	    
	        if [ $2 = "-rs" ]; then
	            rs_option
	        elif [ $2 = "-a" ]; then
	            docker-compose up -d
	            rs_option
	        else
	            docker-compose up
	        fi
	    
	    
	    elif [ $1 = "-down" ]; then
	        if [ ! $COMPOSE_FILE ]; then
	            prepare_environ
	        fi
	        docker-compose down
	    fi
	    
	    
	```

* **Jos√© Ricardo Romo Guti√©rrez** (1) [938049](https://platzi.com/comentario/938049/) 

	me esta gustando bastante este curso‚Ä¶

* **asanchez2091** (1) [925775](https://platzi.com/comentario/925775/) 

	a ese est√°n yo le agregar√≠a pgadmin 4 para revisar la base de datos

	* **Pamela Andrea Paredes Gutierrez** [925775] (1)

		Simplemente para poder ver desde cualquier heeramienta habilitas el puerto `5432` y te conectas con las credenciales del archivo de llaves `.postrgres`
		``` 
		      postgres:
		        build:
		          context: .
		          dockerfile: ./compose/production/postgres/Dockerfile
		        image: cride_production_postgres
		        volumes:
		          - local_postgres_data:/var/lib/postgresql/data
		          - local_postgres_data_backups:/backups
		        env_file:
		          - ./.envs/.local/.postgres
		        ports:
		          - "5432:5432"
		    
		```

* **Jorge Enrique Callisaya Sanchez** (1) [875239](https://platzi.com/comentario/875239/) 

	si no puedes levantar las im√°genes con el comando `docker-compose -f local.yml up` , quiz√° es por que docker requiere que le des un disco disponible en cual trabajar(c:\ o d:\ o, etc) para agregar un disco disponible debes ir a settings de docker/shared Drives y marcar el disco en donde esta tu proyecto, esto te abrir√° otra ventana donde debes colocar tu contrase√±a de inicio de sesi√≥n de tu computadora, en el caso no tengas una contrase√±a debes crearte una para que funcione

* **Mario Emiliano Gordon Pico** (1) [863252](https://platzi.com/comentario/863252/) 

	Tengo errores despu√©s de ejecutar e UP de docker compose
	
	como puedo solucionarlo, estoy corriendo en un mac?
	
	celerybeat_1 | ImportError: cannot import name ‚Äòpython_2_unicode_compatible‚Äô

	* **Antonio Tapias** [863252] (0)

		¬øHas sabido como solucionarlo?  
		Me ocurre lo mismo estando en una m√°quina virtual de Ubuntu.

	* **albertorcaballero** [863252] (2)

		Yo he conseguido resolverlo cambiando en requirements/base.txt la versi√≥n de django, antes estaba as√≠:
		
		django>=2.0.10
		
		Y yo lo he dejado de esta forma:
		
		django==2.0.10
		
		Se ve que en las √∫ltimas versiones ya no existe esa llibrer√≠a.

	* **Jose Padron (Platzi)** [863252] (1)

		Te recomiendo usar la versi√≥n m√°s actualizada de django, tambi√©n nos ayudar√≠a si puedes compartir el Dockerfile

	* **Nicolas Restrepo** [863252] (1)

		Este es el dockerfile
		``` 
		    FROM python:3.6-alpine
		    
		    ENV PYTHONUNBUFFERED 1
		    
		    RUNapk update \
		      # psycopg2 dependencies
		      && apk add --virtual build-deps gcc python3-dev musl-dev \
		      && apk add postgresql-dev \
		      # Pillow dependencies
		      && apk add jpeg-dev zlib-dev freetype-dev lcms2-dev openjpeg-dev tiff-dev tk-dev tcl-dev \
		      # CFFI dependencies
		      && apk add libffi-dev py-cffi \
		      # Translations dependencies
		      && apk add gettext \
		      # https://docs.djangoproject.com/en/dev/ref/django-admin/#dbshell
		      && apk add postgresql-client
		    
		    # Requirements are installed here to ensure they will be cached.
		    COPY./requirements /requirements
		    RUNpip install -r /requirements/local.txt
		    
		    COPY./compose/production/django/entrypoint /entrypoint
		    RUNsed -i 's/\r//' /entrypoint
		    RUNchmod +x /entrypoint
		    
		    COPY./compose/local/django/start /start
		    RUNsed -i 's/\r//' /start
		    RUNchmod +x /start
		    
		    COPY./compose/local/django/celery/worker/start /start-celeryworker
		    RUNsed -i 's/\r//' /start-celeryworker
		    RUNchmod +x /start-celeryworker
		    
		    COPY./compose/local/django/celery/beat/start /start-celerybeat
		    RUNsed -i 's/\r//' /start-celerybeat
		    RUNchmod +x /start-celerybeat
		    
		    COPY./compose/local/django/celery/flower/start /start-flower
		    RUNsed -i 's/\r//' /start-flower
		    RUNchmod +x /start-flower
		    
		    WORKDIR/app
		    
		    ENTRYPOINT["/entrypoint"]
		    
		    
		```

	* **Nicolas Restrepo** [863252] (1)

		cambi√© a django 3.0 y a√∫n as√≠ sigo teniendo el mismo problema

	* **Oscar David Garcia Medina** [863252] (1)

		Gracias Alberto, cambiar en el requirements/base.txt  
		a django==2.0.10 me funcion√≥, yo reinici√© docker e hice el build otravez. Me funcion√≥ luego de eso

	* **Nicolas Restrepo** [863252] (1)

		@OOSS tambi√©n lo hice y a√∫n as√≠ no obtue ning√∫n resultado

	* **asanchez2091** [863252] (1)

		NO que va a mi no me funciono lo que hicieron aqu√≠

* **Juan Felipe Suaza** (1) [831904](https://platzi.com/comentario/831904/) 

	recomendado el docker-compose que maneja pycharm unos cuantos clicks y todos nuestros servicios arriba

* **wilson_romero** (1) [685239](https://platzi.com/comentario/685239/) 

	Habilitar debugger Django en Docker Container $ docker-compose up $ docker-compose ps $ docker rm -f <ID> $docker-compose run --rm --service_ports django

* **wilson_romero** (1) [685236](https://platzi.com/comentario/685236/) 

	Comandos administrativos $ docker-compose run --rm django COMMAND ejemplo: $ docker-compose run --rm django python manage.py createsuperuser

* **wilson_romero** (1) [685235](https://platzi.com/comentario/685235/) 

	Pro Tip $ export COMPOSE_FILE=local.yml $ docker-compose build $ docker-compose up $ docker-compose ps $ docker-compose down

* **wilson_romero** (1) [685233](https://platzi.com/comentario/685233/) 

	Correr el stack de docker

* **wilson_romero** (1) [685232](https://platzi.com/comentario/685232/) 

	Crear imagenes docker

* **victor Manuel Pe√±a Torres** (1) [678941](https://platzi.com/comentario/678941/) 

	comandos para habilitar debugger

* **victor Manuel Pe√±a Torres** (1) [678937](https://platzi.com/comentario/678937/) 

	crear una variable de entrono para no tener que escribir local.yml primera linea de la imagen comandos √∫tiles desde la segunda linea

* **jenapi** (1) [592806](https://platzi.com/comentario/592806/) 

	tengo un problema y es que al usar docker-compose up me sale este mensaje
	``` 
	    ModuleNotFoundError: No module named 'cride'```
	    
	```

	* **jenapi** [592806] (1)

		aqui dejo el error completo
		``` 
		    flower_1        | Traceback (most recent calllast):
		    flower_1        |   File"/usr/local/bin/celery", line 10, in <module>
		    flower_1        |     sys.exit(main())
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/celery/__main__.py", line 16, inmain
		    flower_1        |     _main()
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/celery/bin/celery.py", line 322, inmain
		    flower_1        |     cmd.execute_from_commandline(argv)
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/celery/bin/celery.py", line 496, in execute_from_commandline
		    flower_1        |     super(CeleryCommand, self).execute_from_commandline(argv)))
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/celery/bin/base.py", line 273, in execute_from_commandline
		    flower_1        |     argv = self.setup_app_from_commandline(argv)
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/celery/bin/base.py", line 479, in setup_app_from_commandline
		    flower_1        |     self.app = self.find_app(app)
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/celery/bin/base.py", line 501, in find_app
		    flower_1        |     return find_app(app, symbol_by_name=self.symbol_by_name)
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/celery/app/utils.py", line 359, in find_app
		    flower_1        |     sym = symbol_by_name(app, imp=imp)
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/celery/bin/base.py", line 504, in symbol_by_name
		    flower_1        |     return imports.symbol_by_name(name, imp=imp)
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/kombu/utils/imports.py", line 56, in symbol_by_name
		    flower_1        |     module = imp(module_name, package=package, **kwargs)
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/celery/utils/imports.py", line 104, in import_from_cwd
		    flower_1        |     return imp(module, package=package)
		    flower_1        |   File"/usr/local/lib/python3.6/importlib/__init__.py", line 126, in import_module
		    flower_1        |     return _bootstrap._gcd_import(name[level:], package, level)
		    flower_1        |   File"<frozen importlib._bootstrap>", line 994, in _gcd_import
		    flower_1        |   File"<frozen importlib._bootstrap>", line 971, in _find_and_load
		    flower_1        |   File"<frozen importlib._bootstrap>", line 953, in _find_and_load_unlocked
		    flower_1        | ModuleNotFoundError: Nomodule named 'cride'
		    
		```
		
		ademas de este error tambien me sale el siguiente
		``` 
		    Traceback (most recent calllast):
		    celerybeat_1    |   File"/usr/local/bin/celery", line 10, in <module>
		    celerybeat_1    |     sys.exit(main())
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/celery/__main__.py", line 16, inmain
		    celerybeat_1    |     _main()
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/celery/bin/celery.py", line 322, inmain
		    celerybeat_1    |     cmd.execute_from_commandline(argv)
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/celery/bin/celery.py", line 496, in execute_from_commandline
		    celerybeat_1    |     super(CeleryCommand, self).execute_from_commandline(argv)))
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/celery/bin/base.py", line 273, in execute_from_commandline
		    celerybeat_1    |     argv = self.setup_app_from_commandline(argv)
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/celery/bin/base.py", line 479, in setup_app_from_commandline
		    celerybeat_1    |     self.app = self.find_app(app)
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/celery/bin/base.py", line 501, in find_app
		    celerybeat_1    |     return find_app(app, symbol_by_name=self.symbol_by_name)
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/celery/app/utils.py", line 359, in find_app
		    celerybeat_1    |     sym = symbol_by_name(app, imp=imp)
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/celery/bin/base.py", line 504, in symbol_by_name
		    celerybeat_1    |     return imports.symbol_by_name(name, imp=imp)
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/kombu/utils/imports.py", line 56, in symbol_by_name
		    celerybeat_1    |     module = imp(module_name, package=package, **kwargs)
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/celery/utils/imports.py", line 104, in import_from_cwd
		    celerybeat_1    |     return imp(module, package=package)
		    celerybeat_1    |   File"/usr/local/lib/python3.6/importlib/__init__.py", line 126, in import_module
		    celerybeat_1    |     return _bootstrap._gcd_import(name[level:], package, level)
		    celerybeat_1    |   File"<frozen importlib._bootstrap>", line 994, in _gcd_import
		    celerybeat_1    |   File"<frozen importlib._bootstrap>", line 971, in _find_and_load
		    celerybeat_1    |   File"<frozen importlib._bootstrap>", line 953, in _find_and_load_unlocked
		    celeryworker_1  | ModuleNotFoundError: Nomodule named 'cride'
		    celerybeat_1    | ModuleNotFoundError: Nomodule named 'cride'
		    cride_celeryworker_1 exited with code 1
		    cride_celerybeat_1 exited with code 1
		    
		```
		
		he puesto el nombre de la carpeta que contiene el proyecto igual que el del video (‚Äúcride‚Äù) y tengo adentro una carpeta llamada cride

	* **ebar0n (Platzi)** [592806] (1)

		Hola, tienes el codigo en algun repositorio? si es asi puedes compartirlo y trato de replicar el error, de momento a simple vista algo esta mal configurado porque no encuentra el modulo.

	* **jenapi** [592806] (1)

		claro, el codigo es exactamente el que usa en el curso (literalmente lo descargue en un .ZIP, lo descomprimi en una carpeta en mi desktop, llamada cride, y lo corri).  
		<https://github.com/pablotrinidad/cride-platzi/tree/1/Codebase>

	* **jenapi** [592806] (1)

		Trate con los siguientes cambios, tal y como dicen en algunos aportes arriba le cambie la version de celery y de tornado y me da este error de nuevo

	* **ibacrea** [592806] (1)

		Lograste solucionar el error de ModuleNotFoundError: No module named ‚Äòcride‚Äô ?

	* **jenapi** [592806] (1)

		no no he podido solucionarlo‚Ä¶ Te da el mismo error?

	* **ibacrea** [592806] (1)

		creo es por que no esta copiando los archivos del proyecto al contenedor de django, intenta cambiar el copy por el add, ahora al llegar verifico si es eso y te aviso

	* **ibacrea** [592806] (1)

		Amigo logro solucionar el problema es debido a que debes especificar en el dockerfile donde se encuentra tu app
		``` 
		    volumes:
		          - /D/data/cride:/app
		    
		```
		
		y logre hacerlo funcionar üòÑ

	* **jenapi** [592806] (1)
no no he podido solucionarlo... Te da el mismo error?

	* **jenapi** [592806] (1)

		En el local.yml??

	* **ibacrea** [592806] (1)

		si, en el local

	* **jenapi** [592806] (1)

		He dado con el problema. Resulta que si tu usas docker toolbox se crea una virtual machine, que tiene un volumen que refleja el path a un directory en tu maquina. El caso es que por defecto virtualBox crea un path a tu maquina que dirige a los usuarios, pero dentro de la maquina virtual se llama de otra manera, para que funcione tal cual lo hace docker debes cambiarlo y poner un path que sea igual al de tu maquina (host)

	* **jenapi** [592806] (1)

		gracias por su coolaboraci√≥n.  
		Para un tutorial m√°s expl√≠cito visiten: <https://medium.com/@Charles_Stover/fixing-volumes-in-docker-toolbox-4ad5ace0e572>  
		PD: Est√° en ingl√©s

	* **Luis Andr√©s Arce C√°rdenas** [592806] (1)
@jenapi c√≥mo has logrado solucionar el problema? Eh seguido lo que comentaste en el link pero no lo eh logrado, de pronto podr√≠as hacer un blog explicando y postear el link aqu√≠, por favor.

	* **jenapi** [592806] (2)

		@luilliarcec te dejo el link del tutorial, <https://platzi.com/tutoriales/1461-django-avanzado/4195-configurar-la-vm-de-docker-toolbox-para-poder-usar-volumes/>

	* **jenapi** [592806] (2)

		espero que te sirva ‚úå

	* **Luis Andr√©s Arce C√°rdenas** [592806] (2)

		Te has ganado el cielo, hermano. Gracias.

* **fernando-sp** (1) [560670](https://platzi.com/comentario/560670/) 

	hola recien estoy viendo docker y tengo una duda , cuando utilizas el comando docker-compose -f local.yml build ‚Ä¶ descarga los requirement.txt ?

	* **Diego Alexander Forero Higuera (Platzi)** [560670] (1)

		Si, porque en archivo Dockerfile esta configurado para que copie el archivo requirements.txt y ejecuta la instalaci√≥n. Lo ves exactamente en este momento <https://platzi.com/clases/1461-django-avanzado/17142-codebase-dependencias-y-archivos-de-docker/?time=289> de la clase de Dependencias y Archivos de Docker.

* **Adolfo M.Valdivieso** (1) [559723](https://platzi.com/comentario/559723/) 

	Al correr
	``` 
	    $ docker-compose ps
	    
	```
	
	tengo como repsuesta
	``` 
	               Name                          Command               State            Ports
	    ----------------------------------------------------------------------------------------------
	    cride-platzi_celerybeat_1     /entrypoint /start-celerybeat    Exit 1
	    cride-platzi_celeryworker_1   /entrypoint /start-celeryw ...   Exit 1
	    cride-platzi_django_1         /entrypoint /start               Up       0.0.0.0:8000->8000/tcp
	    cride-platzi_flower_1         /entrypoint /start-flower        Exit 1
	    cride-platzi_postgres_1       docker-entrypoint.sh postgres    Up       5432/tcp
	    cride-platzi_redis_1          docker-entrypoint.sh redis ...   Up       6379/tcp
	    
	```
	
	Pero al intentar eliminar el servicio cride-platzi_django_1
	``` 
	    $ docker-compose rm -f cride-platzi_django_1 
	    
	```
	
	Recibo:
	``` 
	    ERROR: No such service: cride-platzi_django_1
	    
	```
	
	A alguien m√°s le ha pasado esto?
	
	La √∫nica forma en la que logre borrarlo fue usando:
	``` 
	    $ docker rm -f <CONTAINER_ID>
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [559723] (1)

		Si revisas la clase en este punto <https://platzi.com/clases/1461-django-avanzado/17141-codebase-docker/?time=460> el comando para eliminar los contenedores es con docker rm -f <ID> no con docker-compose.

* **bruno bordigoni fica** (1) [547770](https://platzi.com/comentario/547770/) 

	Buenas, estoy usando DockerToolbox en Windows y al usar el comando: docker-compose -f local.yml build, no hay problema, pero luego al usar:
	
	docker-compose -f local.yml up, arroja entre otros errores: python: can‚Äôt open file ‚Äò[manage.py](http://manage.py)‚Äô: [Errno 2] No such file or directory.
	
	Se ruega ayuda, Gracias!!!

	* **bruno bordigoni fica** [547770] (1)

		Adem√°s presenta este error:
		
		* AttributeError: module ‚Äò[tornado.web](http://tornado.web)‚Äô has no attribute ‚Äòasynchronous‚Äô
		
		

	* **Omar perozo** [547770] (1)

		en tu carpeta requirements accede al archivo base.txt y agrega:
		
		redis>=3.2.0  
		tornado>=4.2.0,<6.0.
		
		el error se debe a la version de tornado y luego te pide que redis sea al menos 3.2.0

	* **jenapi** [547770] (1)

		Yo tenia el mismo error, he intentado esta solucion pero no corre celery

* **Juan Carlos Pinz√≥n** (1) [527309](https://platzi.com/comentario/527309/) 

	Cuando hago el docker-compose up me salen estos errores con celery y flower
	
	![{81565218-139D-4B7E-84B7-5DB6DD8BC775}.png](https://static.platzi.com/media/user_upload/%7B81565218-139D-4B7E-84B7-5DB6DD8BC775%7D-ee473871-6b88-4178-bc18-8c6cf9a20219.jpg) ![{B05EFBA9-61B5-4D57-98E9-D2A4713715DE}.png](https://static.platzi.com/media/user_upload/%7BB05EFBA9-61B5-4D57-98E9-D2A4713715DE%7D-96da12f0-3130-4650-bfdf-22246d405049.jpg)
	
	Incluso si entro a la terminal de alpine con el comando docker-compose exec dajngo sh y ejecuta al menos para ver la version (celery --version) sale ese chorro de errores, he consultado y nada
	
	Uso docker con docker toolbox for windows

	* **esdraspavon** [527309] (1)

		Hola! He utilizado ubuntu y no he tenido ningun inconveniente en seguir el curso, sin embargo cuando lo replique en windows me surgieron un par de trabas.  
		Y una de ellas fue que tuve que usar otra version de redis para que Celery no tuviera en inconvenientes.  
		use redis==3.2.0 en vez de redis>=2.10.6, < 3  
		Pruebalo y me cuentas!!

	* **Diego Alexander Forero Higuera (Platzi)** [527309] (1)

		Aseg√∫rate que tienes todas las dependencias instaladas.

	* **Juan Carlos Pinz√≥n** [527309] (1)

		@esdraspavon mira que lo coloqu√© tal cual y me sigue saliendo el mismo error anterior.
		
		@Gollum23 ingres√© a la terminal de alpine y las tiene todas
		
		![{899377E6-6458-4D3D-B378-BFD40B89E716}.png](https://static.platzi.com/media/user_upload/%7B899377E6-6458-4D3D-B378-BFD40B89E716%7D-17ccf980-5504-410b-9cba-9eeb9ff76baa.jpg)

* **Alexander  Silvera** (1) [515325](https://platzi.com/comentario/515325/) 

	Si deseo colocar la fecha de nacimiento de un usuario cual ser√≠a el metodo que debo de usar??

	* **Miguel Herreros Cejas** [515325] (1)

		¬øTe refieres al campo de la base de datos? ¬øConfigurarlo en Django?

	* **Alexander  Silvera** [515325] (1)

		Si pero es un Charfile o DateTime??

	* **esdraspavon** [515325] (1)

		Si vas a realizar operaciones sobre el, un Datetime seria correcto, eso agilizar√≠a en un futuro poder por ejemplo: calcular la edad.

	* **Ramon Sanchez** [515325] (1)

		```
		    birthdate = models.DateField()
		    
		```

	* **walis85300 (Platzi)** [515325] (1)

		`DateField` si quieres almacenar tambi√©n la hora ser√≠a `DateTimeField`

* **Alexander  Silvera** (1) [504709](https://platzi.com/comentario/504709/) 

	Tengo estos errores al querer correr el comando de docker:  
	docker-compose -f local.yml up
	
	Es el siguiente:  
	ERROR: for django Cannot create container for service django: b‚ÄôDrive has not been shared‚Äô  
	ERROR: Encountered errors while bringing up the project.
	
	Ya coloque la variable en el archivo .env y de todos modos sigue persistiendo, alguien puede ayudarme??

	* **PLATZI_LOVERS21** [504709] (1)

		Tienes que activar opcion de shared drives y seleccionar el disco donde esta tu proyecto en settings de docker desktop
		
		<https://github.com/docker/compose/issues/4854>

* **JavierPoduje** (1) [498387](https://platzi.com/comentario/498387/) 

	No puedo entrar al admin. Me aparece el siguiente error:
	``` 
	    ProgrammingError at /admin/
	    relation "auth_user" does not exist
	    LINE 1: ...user"."is_active", "auth_user"."date_joined" FROM "auth_user...
	    
	```
	
	Alguine sabe como resolverlo?

	* **Jesus Herrera** [498387] (1)

		Me suena a que no se han aplicado las migraciones en django

* **fabianfalon** (1) [494640](https://platzi.com/comentario/494640/) 

	@pablotrinidad todavia falta para el deploy pero se va a deployar con docker? vamos a tener varias instancias? por ej una para workers otra para django y otra para flower ?

	* **Pablo Trinidad** [494640] (2)

		Hay un post al final del curso que incluye el deployment con Docker a un s√≥lo servidor.
		
		Saludos!

* **jadry92** (1) [80357](https://platzi.com/comentario/957353/) 
Hola me esta saliedo este error pero no se que lo causa a alguien tambi√©n les sale? si miro los proccesos sale que el error es en celery...

* **asanchez2091** (1) [79317](https://platzi.com/comentario/938074/) 
Los archivos txt los usa fjango para la configuracion de laguna manera me parece que si. Alguien me puede aclarar eso??

	* **federicolopez3745496** [79317] (1)

		te refieres al archivo requirements.txt ? si es asi, esto se usa para que cuando vayas a usar el proyecto en otro computador, o lo compartas con alguien se instalen las mismas dependencias para que no ocurra ningun fallo, mas que todo en las versiones de las librerias. Recuerda que se crea un entorno para que solo se usen las librerias necesarias en el proyecto.
		
		para guardar en un archivo requirements.txt la informaci√≥n usas el comando pip freeze (que es para mostrar lo que tienes instalado con pip, junto con el pipe > requirements.txt. Quedaria asi:
		``` 
		    pip freeze > requirements.txt
		    
		```
		
		recuerda crear primero el archivo requirements.txt, o si lo quieres hacer todo desde un solo comando, puedes hacerlo de la siguiente manera:
		``` 
		    touch requirements.txt && pip freeze > requirements.txt
		    
		```
		
		el curso de terminal y lineas de comandos te ense√±a todo al respecto, lo recomiendo mucho !
		
		Espero que te haya dado respuesta a lo que buscas,

* **Juan Felipe Suaza** (1) [76037](https://platzi.com/comentario/880159/) 
Hola alguien sabe que puede estar ocurriendo me sale este error y he hecho todo igual al profesor? from django.utils.encoding impor...

	* **Juan Felipe Suaza** [76037] (1)

		Tuve varios problemas instalando las dependencias y q flower celery y beat corrieran  
		lo solucione editando los requerimientos
		``` 
		    redis==3.2.0
		    django-redis==4.10.0
		    celery==4.2.1
		    flower==0.9.3
		    tornado==4.5.2```
		    
		```

* **Eduardo Villota** (1) [72783](https://platzi.com/comentario/822532/) 
Hola!, Al ejecutar el comnado sudo docker-compose run -rm django manage.py createsuperuser la terminal me responde Run a on...

	* **Eduardo Villota** [72783] (1)

		pude resolver el problema agregando la palabra pythona antes del [manage.py](http://manage.py)
		
		`sudo docker-compose -f local.yml run --rm django python manage.py createsuperuser`

* **Kevin Lozoya Giner** (1) [67093](https://platzi.com/comentario/717626/) 
Para quieres tengan el error de python: can‚Äôt open file ‚Äòmanage.py‚Äô: [Errno 2] No such file or directory o ModuleNotF...

* **Luis Andr√©s Arce C√°rdenas** (1) [62548](https://platzi.com/comentario/642109/) 
Tengo los siguientes errores python: can‚Äôt open file ‚Äòmanage.py‚Äô: [Errno 2] No such file or directory Modu...

	* **Diego Alexander Forero Higuera (Platzi)** [62548] (1)

		Hola puedes compartir tu archivo local.yml al parecer alguna configuraci√≥n esta mal y no encuentra el archivo [manage.py](http://manage.py) lo que desencadena el resto de errores.

* **jenapi** (1) [59553](https://platzi.com/comentario/592806/) 
tengo un problema y es que al usar docker-compose up me sale este mensaje ModuleNotFoundError: No module named 'cride'``` 

	* **jenapi** [59553] (1)

		aqui dejo el error completo
		``` 
		    flower_1        | Traceback (most recent calllast):
		    flower_1        |   File"/usr/local/bin/celery", line 10, in <module>
		    flower_1        |     sys.exit(main())
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/celery/__main__.py", line 16, inmain
		    flower_1        |     _main()
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/celery/bin/celery.py", line 322, inmain
		    flower_1        |     cmd.execute_from_commandline(argv)
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/celery/bin/celery.py", line 496, in execute_from_commandline
		    flower_1        |     super(CeleryCommand, self).execute_from_commandline(argv)))
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/celery/bin/base.py", line 273, in execute_from_commandline
		    flower_1        |     argv = self.setup_app_from_commandline(argv)
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/celery/bin/base.py", line 479, in setup_app_from_commandline
		    flower_1        |     self.app = self.find_app(app)
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/celery/bin/base.py", line 501, in find_app
		    flower_1        |     return find_app(app, symbol_by_name=self.symbol_by_name)
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/celery/app/utils.py", line 359, in find_app
		    flower_1        |     sym = symbol_by_name(app, imp=imp)
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/celery/bin/base.py", line 504, in symbol_by_name
		    flower_1        |     return imports.symbol_by_name(name, imp=imp)
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/kombu/utils/imports.py", line 56, in symbol_by_name
		    flower_1        |     module = imp(module_name, package=package, **kwargs)
		    flower_1        |   File"/usr/local/lib/python3.6/site-packages/celery/utils/imports.py", line 104, in import_from_cwd
		    flower_1        |     return imp(module, package=package)
		    flower_1        |   File"/usr/local/lib/python3.6/importlib/__init__.py", line 126, in import_module
		    flower_1        |     return _bootstrap._gcd_import(name[level:], package, level)
		    flower_1        |   File"<frozen importlib._bootstrap>", line 994, in _gcd_import
		    flower_1        |   File"<frozen importlib._bootstrap>", line 971, in _find_and_load
		    flower_1        |   File"<frozen importlib._bootstrap>", line 953, in _find_and_load_unlocked
		    flower_1        | ModuleNotFoundError: Nomodule named 'cride'
		    
		```
		
		ademas de este error tambien me sale el siguiente
		``` 
		    Traceback (most recent calllast):
		    celerybeat_1    |   File"/usr/local/bin/celery", line 10, in <module>
		    celerybeat_1    |     sys.exit(main())
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/celery/__main__.py", line 16, inmain
		    celerybeat_1    |     _main()
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/celery/bin/celery.py", line 322, inmain
		    celerybeat_1    |     cmd.execute_from_commandline(argv)
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/celery/bin/celery.py", line 496, in execute_from_commandline
		    celerybeat_1    |     super(CeleryCommand, self).execute_from_commandline(argv)))
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/celery/bin/base.py", line 273, in execute_from_commandline
		    celerybeat_1    |     argv = self.setup_app_from_commandline(argv)
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/celery/bin/base.py", line 479, in setup_app_from_commandline
		    celerybeat_1    |     self.app = self.find_app(app)
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/celery/bin/base.py", line 501, in find_app
		    celerybeat_1    |     return find_app(app, symbol_by_name=self.symbol_by_name)
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/celery/app/utils.py", line 359, in find_app
		    celerybeat_1    |     sym = symbol_by_name(app, imp=imp)
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/celery/bin/base.py", line 504, in symbol_by_name
		    celerybeat_1    |     return imports.symbol_by_name(name, imp=imp)
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/kombu/utils/imports.py", line 56, in symbol_by_name
		    celerybeat_1    |     module = imp(module_name, package=package, **kwargs)
		    celerybeat_1    |   File"/usr/local/lib/python3.6/site-packages/celery/utils/imports.py", line 104, in import_from_cwd
		    celerybeat_1    |     return imp(module, package=package)
		    celerybeat_1    |   File"/usr/local/lib/python3.6/importlib/__init__.py", line 126, in import_module
		    celerybeat_1    |     return _bootstrap._gcd_import(name[level:], package, level)
		    celerybeat_1    |   File"<frozen importlib._bootstrap>", line 994, in _gcd_import
		    celerybeat_1    |   File"<frozen importlib._bootstrap>", line 971, in _find_and_load
		    celerybeat_1    |   File"<frozen importlib._bootstrap>", line 953, in _find_and_load_unlocked
		    celeryworker_1  | ModuleNotFoundError: Nomodule named 'cride'
		    celerybeat_1    | ModuleNotFoundError: Nomodule named 'cride'
		    cride_celeryworker_1 exited with code 1
		    cride_celerybeat_1 exited with code 1
		    
		```
		
		he puesto el nombre de la carpeta que contiene el proyecto igual que el del video (‚Äúcride‚Äù) y tengo adentro una carpeta llamada cride

* **fernando-sp** (1) [57105](https://platzi.com/comentario/560670/) 
hola recien estoy viendo docker y tengo una duda , cuando utilizas el comando docker-compose -f local.yml build ‚Ä¶ descarga los requireme...

	* **Diego Alexander Forero Higuera (Platzi)** [57105] (1)

		Si, porque en archivo Dockerfile esta configurado para que copie el archivo requirements.txt y ejecuta la instalaci√≥n. Lo ves exactamente en este momento <https://platzi.com/clases/1461-django-avanzado/17142-codebase-dependencias-y-archivos-de-docker/?time=289> de la clase de Dependencias y Archivos de Docker.

* **Juan Carlos Pinz√≥n** (1) [54240](https://platzi.com/comentario/527309/) 
Cuando hago el docker-compose up me salen estos errores con celery y flower Incluso si entro a la terminal de alpine con el comando doc...

	* **esdraspavon** [54240] (1)

		Hola! He utilizado ubuntu y no he tenido ningun inconveniente en seguir el curso, sin embargo cuando lo replique en windows me surgieron un par de trabas.  
		Y una de ellas fue que tuve que usar otra version de redis para que Celery no tuviera en inconvenientes.  
		use redis==3.2.0 en vez de redis>=2.10.6, < 3  
		Pruebalo y me cuentas!!

* **Rodrigo Perera** (0) [896406](https://platzi.com/comentario/896406/) 

	Hola, estoy teniendo problemas al realizar el docker-compose -f local.yml up. Obtengo los siguientes errores:  
	django_1 | python: can‚Äôt open file ‚Äò[manage.py](http://manage.py)‚Äô: [Errno 2] No such file or directory  
	flower_1 | ModuleNotFoundError: No module named 'cride‚Äô  
	celerybeat_1 | ModuleNotFoundError: No module named ‚Äòcride‚Äô
	
	Estoy utilizando Windows 10 Home y Docker Toolbox.
	
	Gracias.

	* **Rodrigo Perera** [896406] (1)

		¬øAlguna sugenrencia?

## 0070. Setups alternativos [17177](https://platzi.com/clases/1461-django-avanzado/17177-setups-alternativos/)

### Descripci√≥n:


### Links:

* [GitHub - audreyr/cookiecutter: A command-line utility that creates projects from cookiecutters (project templates). E.g. Python package projects, jQuery plugin projects.](https://github.com/audreyr/cookiecutter)

* [GitHub - pydanny/cookiecutter-django: Cookiecutter Django is a framework for jumpstarting production-ready Django projects quickly.](https://github.com/pydanny/cookiecutter-django)

* [GitHub - inventivehack/cookiecutter-django-ihk](https://github.com/inventivehack/cookiecutter-django-ihk)

### Comentarios:

* **Denielly  Calcagno** (5) [618079](https://platzi.com/comentario/618079/) 

	Hola, ahora que tuve un poco de tiempo libres pude hacer un cookiecutter basado en el template de Pablo basado en pydanny tambi√©n.  
	Lo comparto para que lo pulamos entre todo que seguro tiene margen de mejora. Espero les sea √∫til. Saludos üòÉ  
	[cookiecutter-django-api](https://github.com/gianfrancolombardo/cookiecutter-django-api)

	* **Kevin Javier Morales** [618079] (1)

		Esta muy bien, gracias por compartirlo üòÉ

	* **Virgo_21** [618079] (0)

		muchas gracias por el aporte

	* **Virgo_21** [618079] (1)

		me gusto mucho lo que hiciste denielly, me gustaria trabajar en ver que se puede pulir, te dejo mi email, [edwinbaeza05@gmail.com](mailto:edwinbaeza05@gmail.com)

	* **Luis Fernando Cruz Carrillo** [618079] (1)

		Hola, est√° bueno el proyecto, te dejo este script, tal vez sea √∫til, es solo para levantar el docker-compose seg√∫n lo recomendado en el video anterior. Saludos.
		
		<https://gist.github.com/quattrococodrilo/b85da7d5715f1139af8fd7497c06accf>

* **Agustin Ramos** (2) [587827](https://platzi.com/comentario/587827/) 

	Hola!! Me encuentro desarrollando una single-page application y me estoy basando en la estructura de docker de este proyecto para la construcci√≥n de mi api, lo que me esta funcionando de maravillas!!. El frontend esta siendo desarrollado en angular, y mi duda es si seria conveniente montar angular como un servicio mas en docker, es decir en este caso agregarlo como un servicio mas en el local.yml, o conviene mantener backend y frontend separados de alg√∫n otro modo. Se que escapa un poco al alcance de este curso pero seria de gran ayuda. Gracias!!!

	* **Miguel Herreros Cejas** [587827] (2)

		Buenas. Interesante pregunta. Yo tengo hecho lo mismo en VUE y lo tengo separado, ya que en Docker lo que tengo corriendo realmente es mi backend. Pero creo que es mejor que te conteste alguien m√°s experimentado sobre si es conveniente o no.

	* **Diego Alexander Forero Higuera (Platzi)** [587827] (4)

		Las dos formas son validas, para desarrollo lo mejor es hacerlo con contenedor para el back y para el front, esto porque puedes tener diferentes proyectos en desarrollo con diferentes versiones de librer√≠as con esto evitas problemas, aunque node separa bien esto con la carpeta node_modules, otra ventaja que tienes es que al levantar el contenedor puedes hacer que se compile todo de una vez.

* **Ramon Sanchez** (2) [525018](https://platzi.com/comentario/525018/) 

	holaaa Me sale este error al momento de levantar el contenedor  
	u no encuentro como solocionarlo
	``` 
	    celeryworker_1  |   File "/usr/local/lib/python3.6/site-packages/flower/api/tasks.py", line83, in TaskApply
	    celeryworker_1  |     @web.asynchronous
	    celeryworker_1  | AttributeError: module 'tornado.web' has no attribute 'asynchronous'
	    cride-platzi_flower_1 exited with code 1
	    django_1        | Performing system checks...
	    django_1        | 
	    django_1        | System check identified no issues (0 silenced).
	    django_1        | March 02, 2019 - 08:41:09
	    django_1        | Django version2.1.7, using settings 'config.settings.local'
	    django_1        | Starting development server athttp://0.0.0.0:8000/
	    django_1        | Quit the server with CONTROL-C.
	    cride-platzi_celerybeat_1 exited with code 1
	    cride-platzi_celeryworker_1 exited with code 1
	    
	    
	```

	* **Ramon Sanchez** [525018] (13)

		Hola, ya lo resolvi y es que se instala la version nueva de tornado=6.0 y trae bug  
		por eso en el requeriments -> base.txt colocan tornado==5.1.1  
		y hacen build normalmente  
		y el programa andaria normal

* **esdraspavon** (2) [516523](https://platzi.com/comentario/516523/) 

	[Cookiecutter](https://github.com/audreyr/cookiecutter)
	
	[Cookiecutter Django](https://github.com/pydanny/cookiecutter-django)
	
	[Cookiecutter Django Inventivehack](https://github.com/inventivehack/cookiecutter-django-ihk)

* **Ramon Sanchez** (2) [54033](https://platzi.com/comentario/525018/) 
holaaa Me sale este error al momento de levantar el contenedor u no encuentro como solocionarlo celeryworker_1 | File "/usr/loca...

	* **Ramon Sanchez** [54033] (13)

		Hola, ya lo resolvi y es que se instala la version nueva de tornado=6.0 y trae bug  
		por eso en el requeriments -> base.txt colocan tornado==5.1.1  
		y hacen build normalmente  
		y el programa andaria normal

* **Manuel Alejandro Aguilar T√©llez Gir√≥n** (1) [82503](https://platzi.com/comentario/1006623/) 
Hola comunidad. Entonces los archivos que usa Pablo ¬øvienen de un cookie-cutter? Cada vez que yo haga una app en django, ¬øMe recomiendan ...

* **Agustin Ramos** (1) [59158](https://platzi.com/comentario/587827/) 
Hola!! Me encuentro desarrollando una single-page application y me estoy basando en la estructura de docker de este proyecto para la cons...

	* **Miguel Herreros Cejas** [59158] (2)

		Buenas. Interesante pregunta. Yo tengo hecho lo mismo en VUE y lo tengo separado, ya que en Docker lo que tengo corriendo realmente es mi backend. Pero creo que es mejor que te conteste alguien m√°s experimentado sobre si es conveniente o no.

# Modelos [3417]

## 0080. Herencia de modelos [17184](https://platzi.com/clases/1461-django-avanzado/17184-herencia-de-modelos/)

### Descripci√≥n:


La herencia de modelos puede ser √∫til porque podemos tener datos generales que pueden ser heredados por otras que no necesariamente tienen su propia tabla, porque queremos que haya herencia de m√∫ltiples tablas que se reflejan en la base de datos o porque queremos extender la funcionalidad de un modelo.

### Links:

* [Models | Django documentation | Django](https://docs.djangoproject.com/en/2.0/topics/db/models/#model-inheritance)

* [Model Meta options | Django documentation | Django](https://docs.djangoproject.com/en/2.0/ref/models/options/)

### Comentarios:

* **JavierPoduje** (14) [495647](https://platzi.com/comentario/495647/) 

	El video no muestra el c√≥digo que estas escribiendo @PabloTrinidad. Al parecer hay que re-editar.

	* **Juan Esteban Angulo Uribe** [495647] (2)

		Total

	* **Jesus Herrera** [495647] (1)

		[aqu√≠ esta el commit de Pablo Trinidad del v√≠deo](https://github.com/pablotrinidad/cride-platzi/commit/4fbcaa66286549c525f3b4d5fc5d769aa63429a3)

	* **esdraspavon** [495647] (2)

		Al parecer ya esta solucionado! üí™

* **softpymes** (5) [495782](https://platzi.com/comentario/495782/) 

	Hola por favor muestra lo que estas haciendo en consola y en el editor.

	* **esdraspavon** [495782] (2)

		Al parecer ya esta solucionado! üí™

* **jsballesteros** (5) [495767](https://platzi.com/comentario/495767/) 

	Hola @PabloTrinidad, estas escribiendo c√≥digo pero no muestras lo que realizas, ajustar esto por favor !

	* **esdraspavon** [495767] (2)

		Al parecer ya esta solucionado! üí™

* **Adrian Gonz√°lez** (4) [496106](https://platzi.com/comentario/496106/) 

	Donde trabajo implementan uno similar pero m√°s completo a mi parecer, se necesita tener **django crum** para poder usar el m√©todo get_current_user().
	``` 
	    classAuditoria(models.Model):
	        """
	        Modelo de Auditoria donde se va a guardar de forma automatica la fecha de
	        creaci√≥n de un objeto, quien lo cre√≥, la fecha de la √∫ltima actualizaci√≥n y
	         quien fue el que lo actualiz√≥, este modelo no tendr√° vista en la parte
	        administrativa de la plataforma ya que se usa como herencia en todos los
	        modelos para recrear este registro autom√°tico sobre todos los datos que
	        se trabajan en la misma.
	        """
	        fecha_creacion = models.DateTimeField(auto_now_add=True,
	                                              verbose_name='Fecha de creaci√≥n')
	        """Fecha Creacion - tipo: DateTimeField"""
	        creado_por = models.ForeignKey(User, on_delete=models.CASCADE,
	                                       related_name='%(class)s_creado_por',
	                                       null=True, blank=True,
	                                       verbose_name='Usuario de creaci√≥n')
	        """Creado Por - tipo: ForeignKey"""
	        fecha_actualizacion = models.DateTimeField(auto_now=True,
	                                                   verbose_name='Fecha de actualizaci√≥n')
	        """Fecha Actualizacion - tipo: DateTimeField"""
	        actualizado_por = models.ForeignKey(
	            User, on_delete=models.CASCADE,
	            related_name='%(class)s_modificado_por',
	            null=True, blank=True,
	            verbose_name='Usuario √∫ltima actualizaci√≥n')
	        """Actualizado Por - tipo: ForeignKey"""
	    
	        classMeta:
	            abstract = True
	    
	        deftraer_usuario(self):
	            return get_current_user()
	    
	        defsave(self, *args, **kwargs):
	            if self.fecha_creacion isNone:
	                self.creado_por = self.traer_usuario()
	                self.actualizado_por = self.traer_usuario()
	            else:
	                self.actualizado_por = self.traer_usuario()
	            super(Auditoria, self).save(*args, **kwargs)
	    
	```

	* **Linuxer** [496106] (1)

		buen aporte, gracias

	* **aviloncho** [496106] (1)

		Hola. Gracias por el aporte.
		
		Trato de inferir cual es el resultado de lo que asignan en **related_name** dentro de los campos _ForeignKey_
		``` 
		    related_name='%(class)s_creado_por'
		    
		```
		
		Creo que lo que hace %(class) es asignar realmente el nombre de la clase que crea el objeto. Por ejemplo si tengo un modelo _Movie(Auditoria)_ , el **related_name** quedaria: **Movie_creado_por**
		
		Alguien me podria confirmar si estoy en lo correcto o decirme cual es el resultado final.
		
		Muchas gracias

* **Franco Correa** (3) [496978](https://platzi.com/comentario/496978/) 

	Que raro, un error de edici√≥n ü§¶

	* **Alejandro Villegas Carvajal** [496978] (1)

		Reportalo porfa, para que lo solucionen rapido

	* **esdraspavon** [496978] (2)

		Al parecer ya esta solucionado! üí™

* **rulobars** (3) [496049](https://platzi.com/comentario/496049/) 

	Mientras re-editan el video les dejo el codigo de la clase CRideModel para que puedan seguir mejor el video.
	``` 
	    classCRideModel(models.Model):
	        """Comparte Ride base model.
	    
	        CRideModel acts as an abstract base class from which every
	        other model in the project will inherit. This class provides
	        every table with the following attributes:
	            + created (DateTime): Store the datetime the objects was created
	            + modified (DateTime): Store the last datetime the objects was modified
	        """
	    
	        created = models.DateTimeField(
	            'created at',
	            auto_now_add = True
	            help_text='Date time on which the object was ccreated.'
	            )
	        modified = models.DateTimeField(
	            'modified at',
	            auton_now = True
	            help_text='Date time on which the object was modified.'
	            )
	    
	        classMeta:
	            """Meta option."""
	    
	            abstract = True
	    
	            get_lasted_by = 'created'
	            orderinng = ['-created', '-modified']```
	    
	```

* **David Behar** (1) [875662](https://platzi.com/comentario/875662/) 

	En mi IDE (vscode) tengo el problema de que no me est√° entendiendo mi import de django.db.
	
	Me sale el siguiente error (s√≥lo en la ayuda del ide)
	``` 
	    unresolved import 'django.db'
	    
	```

	* **Edgar Jean Marco Gamarra Rojas** [875662] (1)

		es por que no estamos usando un evironment y por que vs code no tiene seleccionado un environment, en el curso anterior creamos un entorno virtual (python3 -m venv .env) en este curso lo estamos trabajando con contenedores

	* **Virgo_21** [875662] (1)

		es exactamente como lo comenta edgar, vscode te deja seleccionar el interprete de diferentes entornos (pyenv, virtualenv, etc), apenas me estoy adentrando a contenedores y no se si exista la forma de hacer referencia a dicho contenedor desde vscode, seria bueno si alguien nos podria apoyar con esa info.

* **Alexander  Silvera** (1) [792747](https://platzi.com/comentario/792747/) 

	tengo una duda si en mi caso quiero crear un modelo videos y en √©l quiero obtener la url del video en youtube, pero no quiero que los mismos se almacenen en la base de datos. Puedo generar una clase Meta: abstract = True?? Gracias.

* **dimabechile** (1) [722936](https://platzi.com/comentario/722936/) 

	creo que falto el deleted_at para evitar eliminar un registro en la base de datos.
	
	Saludos

* **alello90** (1) [669062](https://platzi.com/comentario/669062/) 

	Me gustar√≠a que en el timestamp se implementara quien creo y quien modifico un objeto.

## 0090. Proxy models [17182](https://platzi.com/clases/1461-django-avanzado/17182-proxy-models/)

### Descripci√≥n:


Los **Proxys** nos permiten extender la funcionalidad de un modelo sin crear una nueva tabla en la base de datos, la diferencia con los Abstract Models es que estas solo exponen un molde de atributos y las **proxys** extienden de una tabla ya existente.

### Links:

* [Models | Django documentation | Django](https://docs.djangoproject.com/en/2.0/topics/db/models/#proxy-models)

### Comentarios:

* **FreddyGomez** (3) [516560](https://platzi.com/comentario/516560/) 

	En algunos caso es mejor desactivar el usuario que borrarlo, que opinan?

	* **DiegoTinitana** [516560] (3)

		Una vez ingresado un usuario solo son estados casi nunca se borran datos en bases de datos relacional

	* **EmmanuelO** [516560] (2)

		Eso tambien depende de las pol√≠ticas de privacidad, ya que actualmente el usuario tiene derecho a que toda su informaci√≥n sea borrada de un sitio.

	* **Kevin Javier Morales** [516560] (1)

		Actualmente es mejor borrar al usuario por cuestiones de privacidad y todo eso del GDPR, si dejas eso claro en tus t√©rminos y condiciones a algunos usuarios les gustar√° esa opci√≥n y tendr√°n la seguridad que toda su informaci√≥n ser√° eliminada de la plataforma.

	* **asanchez2091** [516560] (1)

		hay muchas plataformas que dicen borrar tu usuario y bajo cuerda no borran nada.

* **Manuel Alejandro Aguilar T√©llez Gir√≥n** (1) [82531](https://platzi.com/comentario/1007245/) 
Entonces, ni los Abstract Models ni los proxy models se ver√°n reflejados como una tabla en la base de datos, la diferencia es que uno pro...

## 0100. App de usuarios [17180](https://platzi.com/clases/1461-django-avanzado/17180-app-de-usuarios/)

### Descripci√≥n:


### Links:

* [Customizing authentication in Django | Django documentation | Django](https://docs.djangoproject.com/en/2.1/topics/auth/customizing/#extending-the-existing-user-model)

* [Customizing authentication in Django | Django documentation | Django](https://docs.djangoproject.com/en/2.0/topics/auth/customizing/#extending-the-existing-user-model)

* [GitHub - ovity/octotree: GitHub code tree on steroids](https://github.com/ovity/octotree)

* [GitHub - django/django: The Web framework for perfectionists with deadlines.](https://github.com/django/django)

### Comentarios:

* **Diego Andres Fonseca Soto** (15) [501987](https://platzi.com/comentario/501987/) 

	Creo que hubo un error en el campo ‚Äúis_verified‚Äù, el default deber√≠a ser False.

* **aleducode** (8) [507146](https://platzi.com/comentario/507146/) 

	la extensi√≥n para el browser se llama Octotree aca dejo el link [Octotree](https://chrome.google.com/webstore/detail/octotree/bkhaagjahfmjljalopjnoealnfndnagc/related?hl=es)

* **alello90** (3) [734506](https://platzi.com/comentario/734506/) 

	Yo hago √∫nico el email en el class Meta de la siguiente forma
	``` 
	    classMeta:
	            unique_together = ('email',)
	    
	```
	
	De esta clase me surgen 2 preguntas. La segunda como contra pregunta a las respuesta de la primera.
	
	¬øVolver a definir el campo es una mejor opci√≥n?  
	¬øPorque?

	* **Manuel Alejandro Aguilar T√©llez Gir√≥n** [734506] (1)

		Me imagino que para un c√≥digo m√°s limpio o una declaraci√≥n m√°s explicita de cuando alguien revise nuestro c√≥digo caiga en cuenta que se sobrescribi√≥ el campo y se agregaron nuevas cosillas como el mensaje de error. Me encanta porque puedes agregar mensajes personalizados, por ejemplo, adem√°s si quisieras agregar un widget, te conviene tenerla sobrescrita

* **apolanco3225** (1) [608018](https://platzi.com/comentario/608018/) 

	con el modelo proxy podr√≠a a√±adir nuevos campos a los usuarios de Django? es decir, si quisiera generar algun tipo de roles como por ejemplo si es estudiante o profesor, sin necesidad de crear tablas para esos dos tipos de usuario, solo extendiendo los Users de django

	* **Kevin Javier Morales** [608018] (1)

		Si, todas las opciones con el modelo users son para diferentes tipos de extender el modelo, puedes agregar m√°s campo o crear el tuyo propio, pero teniendo ciertos elementos base que te proporciona Django.

## 0110. Organizando modelos en un paquete de Django [17181](https://platzi.com/clases/1461-django-avanzado/17181-organizando-modelos-en-un-paquete-de-django/)

### Descripci√≥n:
Deconstruir el modelo de Usuario en m√∫ltiples archivos dentro de un paquete

### Links:

* [Curso de Expresiones Regulares | Materiales](https://platzi.com/clases/expresiones-regulares/)

* [Customizing authentication in Django | Django documentation | Django](https://docs.djangoproject.com/en/2.0/topics/auth/customizing/#extending-the-existing-user-model)

### Comentarios:

* **EmmanuelO** (3) [557073](https://platzi.com/comentario/557073/) 

	La expresi√≥n regular para validar tel√©fonos:
	``` 
	    r'\+?1?\d{9,15}$
	    
	```

* **Gonzalo Garc√≠a** (2) [943475](https://platzi.com/comentario/943475/) 

	Tuve el siguiente problema corriendo el comando tal cual lo muestra el profesor:
	``` 
	    gonza@gonza:~/Development/django_avanzado/cride$ docker-compose run --rm django python manage.py makemigrations
	    ERROR: 
	            Can't find a suitable configuration file in this directory or any
	            parent. Are you in the right directory?
	    
	            Supported filenames: docker-compose.yml, docker-compose.yaml
	    
	```
	
	No s√© qu√© era, pero por si a alguien tambi√©n le pasa, lo solucion√© corriendo el comando de la siguiente manera:
	``` 
	    gonza@gonza:~/Development/django_avanzado/cride$ docker-compose -f local.yml run --rm django python manage.py makemigrations
	    
	```

	* **V√≠ctor Daniel Cardozo Fern√°ndez** [943475] (1)

		Eso es porque no le has dicho a tu sistema que use el local.yml por defecto. Para hacerlo tienes que hacer
		``` 
		    export COMPOSE_FILE=local.yml
		    
		```
		
		De ah√≠ ya podr√°s usar los mensajes comandos de manera m√°s sencilla

* **wilson_romero** (2) [686385](https://platzi.com/comentario/686385/) 

	Borrar la el volumen de la base de datos. $ docker-compose ps $ docker-compose down $ docker volume ls $ docker volume rm cride_local_postgres_data

* **jsballesteros** (2) [509962](https://platzi.com/comentario/509962/) 

	Hola, mira que me esta saliendo este error ¬ø sabes por que ?
	
	File ‚Äú/usr/local/lib/python3.6/site-packages/django/contrib/auth/management/commands/createsuperuser.py‚Äù, line 117, in handle  
	self.UserModel._default_manager.db_manager(database).get_by_natural_key(username)  
	AttributeError: ‚ÄòManager‚Äô object has no attribute ‚Äòget_by_natural_key‚Äô

	* **jsballesteros** [509962] (2)

		Ya lo resolvi jejejeje, estaba llamando en la herencia a AbstractBaseUser y es AbstractUser.
		
		slds !!!

* **Hern√°n Chilabert** (1) [1017550](https://platzi.com/comentario/1017550/) 

	 **Sustituci√≥n del modelo User personalizado**  
	Creamos la clase `User` heredando de `AbstractUser` y agregamos todos los campos que nuestra aplicaci√≥n necesite.  
	Luego, en el archivo de configuraci√≥n ([base.py](http://base.py)), agregamos: `AUTH_USER_MODEL = 'users.User'`
	
	**Organizar modelos en m√∫ltiples archivos**  
	Creamos el directorio _models_ , creamos el archivo `__init__.py`, creamos los archivos correspondientes a los modelos ([users.py](http://users.py), [profiles.py](http://profiles.py), etc) y dentro del archivo `__init__.py` importamos los modelos: `from .users import User`

* **wilson_romero** (1) [686381](https://platzi.com/comentario/686381/) 

	Error django.db.migrations.exceptions.InconsistentMigrationHistory: Migration admin.0001_initial is applied before its dependency users.0001_initial on database 'default'. Se aplico ya la app de usuarios por defecto antes del usar la custom

* **wilson_romero** (1) [686378](https://platzi.com/comentario/686378/) 

	Correr el comando makemigrations $ docker-compose run --rm django manage.py makemigrations

* **wilson_romero** (1) [686375](https://platzi.com/comentario/686375/) 

	correr el container de Django independiente

* **wilson_romero** (1) [686001](https://platzi.com/comentario/686001/) 

	Adicionar en los settings un modelo de usuario custom

* **Andres Arias** (1) [612697](https://platzi.com/comentario/612697/) 

	Baj√© los containers entre la clase anterior y esta. Ahora no se levantan, no estoy seguro que hacer, primero me sali√≥ que el atributo error_message del campo email daba error, y lo comente.
	
	Despues salio esto [Reverse accessor for ‚ÄòUser.groups‚Äô clashes with reverse accessor for ‚ÄòUser.groups‚Äô].  
	Le puse en settings base AUTH_USER_MODEL = ‚Äúusers.User‚Äù para que sea el modelo default
	
	Despues salio que no tenia migraciones, le hice las migraciones con:  
	sudo docker-compose -f local.yml run --rm django python [manage.py](http://manage.py) makemigrations
	
	Despues sale el error django.db.migrations.exceptions.InconsistentMigrationHistory: Migration admin.0001_initial is applied before its dependency users.0001_initial on database 'default‚Äô  
	y no se que hacer con esto, alg√∫n consejo?

* **asanchez2091** (1) [79672](https://platzi.com/comentario/944288/) 
SE podria empezar a construir un proyecto en django como en el primer curso y luego evolucionar hasta aqui?? seria muy complicado?

	* **wilson_romero** [79672] (1)

		No, solo que al manejar docker es m√°s f√°cil llevarlo a producci√≥n. Por que debes instalar PostgreSQL , Celery, entre otros. y tendras que hacer lo mismo en producci√≥n. Docker es una gran herramienta y es un buen momento para aprender su potencial

* **eduardotaipe** (1) [74802](https://platzi.com/comentario/859400/) 
Por qu√© se escribe en el __init__.py, from .user import User. Y como trabaja?

	* **Erik Ochoa** [74802] (2)

		El archivo **init**.py es utilizado para inicializar paquetes de Python y es muy com√∫n usarlo para realizar configuraciones e importar las librer√≠as necesarias para nuestro m√≥dulo.
		
		Puedes leer m√°s en la [documentaci√≥n oficial](http://docs.python.org.ar/tutorial/3/modules.html).

* **jenapi** (1) [60779](https://platzi.com/comentario/610706/) 
el celery beat es algo indispensable??? lo pregunto porque desde el principio del curso me dice que tiene algo mal con el scheduler pero ...

	* **aleducode** [60779] (1)

		Celery lo vas a necesitar para las tareas as√≠ncronas el error ya est√° corregido en el repo oficial en este pull request, <https://github.com/pablotrinidad/cride-platzi/pull/2>

* **jsballesteros** (1) [52810](https://platzi.com/comentario/509962/) 
Hola, mira que me esta saliendo este error ¬ø sabes por que ? File ‚Äú/usr/local/lib/python3.6/site-packages/django/contrib/auth/management/...

	* **jsballesteros** [52810] (2)

		Ya lo resolvi jejejeje, estaba llamando en la herencia a AbstractBaseUser y es AbstractUser.
		
		slds !!!

## 0120. Creando el modelo de perfil de usuario [17188](https://platzi.com/clases/1461-django-avanzado/17188-creando-el-modelo-de-perfil-de-usuario/)

### Descripci√≥n:


### Links:

* [Model field reference | Django documentation | Django](https://docs.djangoproject.com/en/2.1/ref/models/fields/#django.db.models.ForeignKey.on_delete)

* [Model field reference | Django documentation | Django](https://docs.djangoproject.com/en/2.1/ref/models/fields/)

### Comentarios:

* **adrianrbp** (3) [714807](https://platzi.com/comentario/714807/) 

	campos de [AbstractUser](https://github.com/django/django/blob/master/django/contrib/auth/models.py)
	
	  1. **username** (CharField)
	
	  2. **first_name** (CharField)
	
	  3. **last_name** (CharField)
	
	  4. **email** (EmailField)
	
	  5. **is_staff** (BooleanField)
	
	  6. **is_active** (BooleanField)
	
	  7. **date_joined** (DateTimeField)
	
	
	
	
	campos de [AbstractBaseUser](https://github.com/django/django/blob/master/django/contrib/auth/base_user.py)
	
	  1. **password** (CharField)
	  2. **last_login** (DateTimeField)
	  3. **is_active** = True
	
	

* **Alvez Gerardo** (3) [509253](https://platzi.com/comentario/509253/) 

	Creo que ser√≠a bueno usar ``admin.StackedInline``` para que al crear el`` usuario`se cree tambi√©n `` `profile`.

	* **jorgesaw** [509253] (1)

		Una buena manera es agregar una funci√≥n de tipo signal para que al momento de crear el usuario se cree por defecto un perfile en blanco. Lo que se crea en definitiva es la relaci√≥n user->profile.
		
		En [profiles.py](http://profiles.py) se puede agregar lo siguiente para lograr tal efecto:
		``` 
		    from django.dispatch import receiver
		    from django.db.models.signals import post_save
		    
		    from .users import User
		    
		    @receiver(post_save, sender=User)
		    defensure_profile_exists(sender, instance, **kwargs):
		        """
		        Se√±al que se encarga de crear un perfil por defecto en caso de  que el usuario se cree una cuenta (post_save) pero nunca ingrese a su perfil.
		        """
		        if kwargs.get('created', False): # Si acaba de crearse un usuario creamos el perfil
		            Profile.objects.get_or_create(user=instance)
		    
		```

* **Gabriel De Andrade** (2) [60311](https://platzi.com/comentario/603800/) 
En cuanto a el on_delete: ¬øC√≥mo juega esto con el GDPR? ¬øTodav√≠a se pueden mantener los datos incluso cuando el usuario borra la cuenta? ...

	* **adrianrbp** [60311] (2)

		creo que lo mejor es usar CASCADE, porque si el usuario quiere borrar su cuenta ( eso ser√≠a para que no queden datos personales en la plataforma) es preferible que se borre el perfil y el usuario al mismo tiempo como explica pablo.  
		Me parece que fb desactiva o desenlaza al usuario y con posibilidad de reactivar la cuenta, ese ser√≠a otro caso de uso y depende de lo que necesite el usuario.

* **Gonzalo Garc√≠a** (1) [946451](https://platzi.com/comentario/946451/) 

	Por qu√© CustomUser hereda de UserAdmin y ProfileAdmin hereda del tipico ModelAdmin?

	* **Erick Herrera** [946451] (1)

		Hola Gonzalo, lo que yo entiendo, es que User, ya se encotraba hecho por Django, y nosotros lo personalizamos a CustomUser. Como el modelo ya estaba hecho por Django, tambi√©n ten√≠a hecho el Admin, por eso heredamos de UserAdmin, para Customizarlo, como lo hicimos con User.  
		Si vas a c√≥digo en github, puedes ver UserAdmin: <https://github.com/django/django/blob/master/django/contrib/auth/admin.py>
		
		Espero te sirva, un abrazo

* **asanchez2091** (1) [944348](https://platzi.com/comentario/944348/) 

	En mi caso pienso que no seria buena idea eliminar toda la informacion de usuario debido aque si estoy en un sistema que trabaje por subscriptor necesito saber quien fue ese usuario si un d√≠a se da de baja y decide reingresar nuevamente.

* **asanchez2091** (1) [944299](https://platzi.com/comentario/944299/) 

	Cuando el cambia la versi√≥n de django y uno desea instalar el proyecto no te deja que curioso no.

* **jenapi** (1) [611887](https://platzi.com/comentario/611887/) 

	Yo opino que no debe tener reputaci√≥n, es como si no ha hecho nada pues no le calificamos nada

	* **adrianrbp** [611887] (2)

		creo que es m√°s f√°cil bajar la reputaci√≥n de un usuario por mal servicio o mal comportamiento que acordarse de calificar al usuario por que realiz√≥ buenas acciones.
		
		Pero creo tambi√©n que depende del comportamiento de los usuarios en la plataforma, por ejemplo en el playstore una app empieza con 0 estrellas y de los usuarios descargan apps hay un porcentaje que no califican la app y los que califican √≥ es porque les gust√≥ mucho √≥ se quejan de alg√∫n bug.
		
		Estar√≠a bueno experimentar con esa funcionalidad y ver como lo utiliza el usuario o que opina.

* **Gabriel De Andrade** (1) [603800](https://platzi.com/comentario/603800/) 

	En cuanto a el on_delete:
	
	¬øC√≥mo juega esto con el GDPR?  
	¬øTodav√≠a se pueden mantener los datos incluso cuando el usuario borra la cuenta?
	
	Pregunto es por que los datos del perfil del usuario pasar√≠an a ser anonimos ya que se borra el user, lo que quedar√≠a ser√≠a la informaci√≥n sobre su perfil sin estar vinculada a ning√∫n usuario espec√≠fico

	* **adrianrbp** [603800] (2)

		creo que lo mejor es usar CASCADE, porque si el usuario quiere borrar su cuenta ( eso ser√≠a para que no queden datos personales en la plataforma) es preferible que se borre el perfil y el usuario al mismo tiempo como explica pablo.  
		Me parece que fb desactiva o desenlaza al usuario y con posibilidad de reactivar la cuenta, ese ser√≠a otro caso de uso y depende de lo que necesite el usuario.

	* **Ivan Trivi√±o** [603800] (1)

		En principio siempre deber√≠as tratar de realizar borrado l√≥gico de los datos (agregando un campo booleano en la base de datos y mostrar el contenido segun el valor de dicho campo) y s√≥lo si es absolutamente necesario eliminar los datos por completo de la base de datos; de esa forma vas a evitar perder informaci√≥n util para tu negocio.
		
		Con respecto al comentario de @adrianrbp, el valor que debe ir en el on_delete depende mucho de los datos. Por ejemplo, imagina tienes una plataforma de suscripciones y cada suscripci√≥n, esta asociada a un usuario con un ‚Äúon_delete=CASCADE‚Äù; si por alg√∫n motivo eliminas ese usuario por completo de la base de datos perder√°s tambi√©n toda la informaci√≥n de las suscripciones asociadas a ese usuario, cosa que podr√≠a afectar fuertemente tus indicadores de ventas o desempe√±o, entre otros.

## 0130. Soluci√≥n del reto arreglando la migraci√≥n de users a user [17189](https://platzi.com/clases/1461-django-avanzado/17189-solucion-del-reto-arreglando-la-migracion-de-users/)

### Descripci√≥n:


### Links:

* [Curso de Django | Materiales](https://platzi.com/clases/django/)

### Comentarios:

* **Onil Calcines** (6) [595743](https://platzi.com/comentario/595743/) 

	 **Recomiendo que se salten de la clase 7 vayan a la 9 y la esta clase 8 la vean despues de la clase 13 ‚ÄúCreando el modelo de perfil de usuario‚Äù y luego continuen con la 14 normal.**

	* **Juan Pablo Cano Buitrago** [595743] (1)

		Gracias!!!

* **David Granados** (4) [897803](https://platzi.com/comentario/897803/) 

	Tambi√©n podemos usar ‚Äúsquash migrations‚Äù para no estar borrando a cada rato los volumes o la bd, y esto si es algo que se puede hacer en producci√≥n
	
	<https://docs.djangoproject.com/en/3.0/topics/migrations/#migration-squashing>

	* **V√≠ctor Daniel Cardozo Fern√°ndez** [897803] (4)

		Si, el problema es que tendr√≠amos m√°s migraciones in√∫tiles cuando el proyecto ni siquiera se ha lanzado en producci√≥n. El squash migrations sirve cuando estamos en producci√≥n y no queremos cargarnos la base de datos. Pero si a√∫n no subimos a prod lo m√°s limpio es borrar la migraci√≥n y volverla a generar.

* **morwen1** (4) [576959](https://platzi.com/comentario/576959/) 

	de donde sale este reto? si clase anterior hablaron de setups alternativos

	* **Diego Alexander Forero Higuera (Platzi)** [576959] (2)

		Gracias por avisar, vamos a revisar el orden de las clases.

* **Franco Correa** (3) [502455](https://platzi.com/comentario/502455/) 

	El titulo ser√≠a de _users_ a _user_. No viceversa.

* **Onil Calcines** (2) [594658](https://platzi.com/comentario/594658/) 

	evidentemente se saltaron una clase donde debe aparecer todo el codigo de los modelos y vistas y parte del admin.
	
	Podran darle solucion a esto lo antes posible ?, gracias.

* **Miguel Herreros Cejas** (2) [515924](https://platzi.com/comentario/515924/) 

	He encontrado un sitio interesante que habla sobre el Admin de Django:  
	<https://developer.mozilla.org/es/docs/Learn/Server-side/Django/Admin_site>
	
	No he visto o no me he dado cuenta de que resuelva una duda. ¬øSe podr√≠a insertar, por ejemplo Profile, dentro de User en el admin de Django?
	
	Esto ser√≠a muy util, por ejemplo, si yo tengo un sistema de tickets, y quiero utilizar el Django de Admin para administrar los tickets siendo SuperAdmin, poder leer/gestionar los comentarios dentro de la configuraci√≥n en el Admin de un ticket determinado.

	* **josericardoperezperez** [515924] (0)

		Ese ejemeplo se ve en el curso b√°sico de Django por el mismo profe Pablo con una relaci√≥n uno a uno Usuario - Profile extendiendo el modelo de Usuario.
		
		<https://platzi.com/clases/1318-django/12412-implementacion-del-modelo-de-usuarios-de-platzigra/>

* **josericardoperezperez** (0) [592649](https://platzi.com/comentario/592649/) 

	Esta desordenado este video, pero para que no se pierdan este video va por esta rama
	
	<https://github.com/pablotrinidad/cride-platzi/tree/5/Profile-model>

## 0140. Aplicaci√≥n y modelo de c√≠rculos [17197](https://platzi.com/clases/1461-django-avanzado/17197-aplicacion-y-modelo-de-circulos/)

### Descripci√≥n:


### Comentarios:

* **Efren092** (13) [499460](https://platzi.com/comentario/499460/) 

	**Django Integer Field types:**
	
	**\- IntegerField:** Puede almacenar valores enteres desde -2147483648 hasta 2147483647.
	
	**\- PositiveIntegerField:** Como un IntegerField, pero debe ser positivo o cero . Puede almacenar valores desde 0 hasta 2147483647. El valor 0 es aceptado por razones de compatibilidad hacia atr√°s.
	
	**\- PositiveSmallIntegerField:** Como un PositiveIntegerField, pero solo permite valores hasta un cierto limite (dependiente de la base de datos). Puede almacenar valores desde 0 hasta 32767 en todas las bases de datos compatibles con Django.
	
	**\- SmallIntegerField:** Como un IntegerField, pero solo permite valores bajo un determinado limite (dependiente de la base de datos). Puede almacenar valores desde -32768 hasta 32767 en todas las bases de datos compatibles con Django.
	
	**\- BigIntegerField:** Un entero de 64 bits, muy parecido a IntegerField, excepto que se garantiza que se ajustan a los n√∫meros desde -9223372036854775808 hasta 9223372036854775807. El widget predeterminado en un formulario para este campo es un TextInput.

* **Juan Felipe Suaza** (2) [881691](https://platzi.com/comentario/881691/) 

	PositiveIntegerField se hace para que el usuario no pueda ingresar un numero negativo y para que las operaciones matematicas que se hagan con esta variable no arrojen un resultado de coma flotante

* **Eduardo Kiriakos Piazza** (2) [58855](https://platzi.com/comentario/582878/) 
Cuando extendia la clase meta: class Meta(CRideModel.META):, Me lanzaba el siguiente error: AttributeError: type object ‚ÄòCRideModel‚Äô has ...

	* **ebar0n (Platzi)** [58855] (1)

		Hola, de hecho el profesor si lo tiene mal, seguramente en la siguiente clase lo corrige, la forma correcta es tal como lo indicas.
		``` 
		    classMeta(CRideModel.Meta):
		    
		```
		
		Al profesor no es que si le sirviera, solo la escribio y aun no lo prueba en este video.

* **luis-salamanca** (1) [813659](https://platzi.com/comentario/813659/) 

	Herencia de la clase Meta

* **Eduardo Kiriakos Piazza** (1) [582878](https://platzi.com/comentario/582878/) 

	Cuando extendia la clase meta: class Meta(CRideModel.META):, Me lanzaba el siguiente error:
	
	AttributeError: type object ‚ÄòCRideModel‚Äô has no attribute ‚ÄòMETA‚Äô .
	
	Luego lo cambi√© por class Meta(CRideModel.Meta): y funcion√≥. Por qu√© al prof s√≠ le funcion√≥ escribiendo META en may√∫scula?

	* **ebar0n (Platzi)** [582878] (1)

		Hola, de hecho el profesor si lo tiene mal, seguramente en la siguiente clase lo corrige, la forma correcta es tal como lo indicas.
		``` 
		    classMeta(CRideModel.Meta):
		    
		```
		
		Al profesor no es que si le sirviera, solo la escribio y aun no lo prueba en este video.

	* **Onil Calcines** [582878] (2)

		efectivamente es Meta y ese error es rectificado en la siguiente clase minuto 0:46

* **Guido Maycol Gutierrez Miranda** (1) [82786](https://platzi.com/comentario/1012851/) 
Hola tengo este error, alguien que me pueda ayduar?? PostgreSQL is available Traceback (most recent call last): File ‚Äú

	* **Manuel Alejandro Aguilar T√©llez Gir√≥n** [82786] (1)

		¬øQu√© comando corriste?

* **eduardotaipe** (1) [75022](https://platzi.com/comentario/862924/) 
D√≥nde encuentro el c√≥digo de la aplicaci√≥n comparte rife

	* **Juan Felipe Peralta Zapata** [75022] (1)

		¬°Hola, Eduardo! ‚ö°
		
		El c√≥digo lo puedes encontrar en [este repositorio](https://github.com/pablotrinidad/cride-platzi).

* **eduardotaipe** (1) [74865](https://platzi.com/comentario/860364/) 
En qu√© momento creo la carpeta media que no lo vi

	* **David Granados** [74865] (2)

		esa carpeta est√° especificada en los config/settings/base.py  
		en la secci√≥n:
		``` 
		    # Media
		    MEDIA_ROOT = str(APPS_DIR('media'))
		    MEDIA_URL = '/media/'
		    
		```
		
		Se cre√≥ autom√°ticamente al subir la primera foto de un perfil de usuario.

## 0150. Migraciones y admin de c√≠rculos [17190](https://platzi.com/clases/1461-django-avanzado/17190-migraciones-y-admin-de-circulos/)

### Descripci√≥n:


### Links:

* [circles.csv ¬∑ GitHub](https://gist.github.com/pablotrinidad/93ee462e0ee761bd505f0a2fed3d1c8c)

* [Welcome to the django-extensions documentation! ‚Äî django-extensions 2.1.4 documentation](https://django-extensions.readthedocs.io/en/latest/)

### Comentarios:

* **Kevin Lozoya Giner** (18) [497355](https://platzi.com/comentario/497355/) 

	Para importar cosas de un archivo csv (gracias, curso de Python3):
	``` 
	    import csv
	    
	    defimport_csv(csv_filename):
	        with open(csv_filename, mode='r') as csvfile:
	            reader = csv.DictReader(csvfile)
	            for row in reader:
	                circle = Circle(**row)
	                circle.save()
	                print(circle.name)
	    
	```

* **Hern√°n Chilabert** (13) [715230](https://platzi.com/comentario/715230/) 

	Una forma sencilla de precargar datos es usando [fixtures](https://docs.djangoproject.com/en/2.2/howto/initial-data/)
	
	Dentro del directorio circles tiene que crear el directorio fixtures y crear un archivo en formato JSON (circles.json por ejemplo) con la info que esta abajo y luego, desde el terminal tienen que correr el comando `loaddata`:
	``` 
	    docker-compose run --rm django python manage.py loaddata cride/circles/fixtures/circles.json
	    
	```
	
	**circles.json**
	``` 
	    [
	        {
	            "model": "circles.circle",
	            "pk": 1,
	            "fields": {
	                "name": "Facultad de Ciencias, UNAM",
	                "slug_name": "unam-fciencias",
	                "is_public": 1,
	                "verified": 1,
	                "members_limit": 0,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 2,
	            "fields": {
	                "name": "Tec de Monterrey, Campos Santa F√©",
	                "slug_name": "itesm-csf",
	                "is_public": 1,
	                "verified": 1,
	                "members_limit": 0,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 3,
	            "fields": {
	                "name": "Inventive",
	                "slug_name": "inventive",
	                "is_public": 0,
	                "verified": 1,
	                "members_limit": 30,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 4,
	            "fields": {
	                "name": "Platzi Bogot√°",
	                "slug_name": "platzi-bog",
	                "is_public": 0,
	                "verified": 1,
	                "members_limit": 120,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 5,
	            "fields": {
	                "name": "Platzi M√©xico",
	                "slug_name": "platzi-mex",
	                "is_public": 0,
	                "verified": 1,
	                "members_limit": 30,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 6,
	            "fields": {
	                "name": "Google M√©xico",
	                "slug_name": "google-mx",
	                "is_public": 0,
	                "verified": 1,
	                "members_limit": 250,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 7,
	            "fields": {
	                "name": "Curso de Fotograf√≠a, UVA",
	                "slug_name": "curso-foto-uva",
	                "is_public": 1,
	                "verified": 0,
	                "members_limit": 25,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 8,
	            "fields": {
	                "name": "Equipo de futbol, chapinero",
	                "slug_name": "fut-chapinero",
	                "is_public": 1,
	                "verified": 0,
	                "members_limit": 40,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 9,
	            "fields": {
	                "name": "Grupo 3340, Pr√°cticas de campo",
	                "slug_name": "grupo-3340-campo",
	                "is_public": 1,
	                "verified": 0,
	                "members_limit": 50,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 10,
	            "fields": {
	                "name": "Generaci√≥n 2018 Escuela de enfermer√≠a",
	                "slug_name": "enfermeria-2018",
	                "is_public": 1,
	                "verified": 0,
	                "members_limit": 0,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 11,
	            "fields": {
	                "name": "Facultad de Ingenier√≠a, UNAM",
	                "slug_name": "unam-fi",
	                "is_public": 1,
	                "verified": 1,
	                "members_limit": 0,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 12,
	            "fields": {
	                "name": "Facultad de Medicina, UNAM",
	                "slug_name": "unam-fm",
	                "is_public": 1,
	                "verified": 1,
	                "members_limit": 0,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 13,
	            "fields": {
	                "name": "Platzi Developer Circle - Bogot√°",
	                "slug_name": "platzi-dev",
	                "is_public": 1,
	                "verified": 0,
	                "members_limit": 0,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 14,
	            "fields": {
	                "name": "Platzi Developer Circle - CDMX",
	                "slug_name": "platzi-dev-mx",
	                "is_public": 1,
	                "verified": 0,
	                "members_limit": 0,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 15,
	            "fields": {
	                "name": "IBM Santa F√©",
	                "slug_name": "ibm-santafe",
	                "is_public": 0,
	                "verified": 1,
	                "members_limit": 0,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 16,
	            "fields": {
	                "name": "P&G - Santa F√©",
	                "slug_name": "p-n-g",
	                "is_public": 1,
	                "verified": 0,
	                "members_limit": 1000,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 17,
	            "fields": {
	                "name": "Amigos de Centraal",
	                "slug_name": "comunidad-centraal",
	                "is_public": 1,
	                "verified": 0,
	                "members_limit": 0,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 18,
	            "fields": {
	                "name": "Central Academy",
	                "slug_name": "centraal-academy",
	                "is_public": 1,
	                "verified": 1,
	                "members_limit": 0,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 19,
	            "fields": {
	                "name": "Estado de M√©xico - CDMX",
	                "slug_name": "edomex",
	                "is_public": 1,
	                "verified": 0,
	                "members_limit": 0,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 20,
	            "fields": {
	                "name": "Satelite - Santa F√© entre semana",
	                "slug_name": "sat-sfe-week",
	                "is_public": 1,
	                "verified": 0,
	                "members_limit": 0,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        },
	        {
	            "model": "circles.circle",
	            "pk": 21,
	            "fields": {
	                "name": "Sable Digital",
	                "slug_name": "sable",
	                "is_public": 0,
	                "verified": 0,
	                "members_limit": 30,
	                "created": "2019-08-31",
	                "modified": "2019-08-31"
	            }
	        }
	    ]
	    
	```
	
	De esta forma se evita tener que crear una funcion para leer el csv e importar la data y el comando `loaddata` se podria agregar al Dockerfile para que se ejecute al correr el comando `build` de Docker.

	* **adrianrbp** [715230] (2)

		interesante propuesta para importar datos iniciales, los fixtures los hab√≠a visto para hacer testing, pero para hacer testing utilizo factory boy y faker.
		
		dependiendo del proyecto creo que si se podr√≠a agregar al dockerfile, pero de manera opcional √≥ solo para dev lo veo mejor y no en el build de producci√≥n claro, para tener una db limpia desde el inicio.
		
		saludos,

	* **Gonzalo Mendoza Garc√≠a** [715230] (1)

		Que gran aporte, gracias

* **Jesus Herrera** (6) [542927](https://platzi.com/comentario/542927/) 

	Codigo para importar Circulos desde shell_plus
	``` 
	    circles = [
	        ["Facultad de Ciencias, UNAM","unam-fciencias",1,1,0],
	        ["Tec de Monterrey, Campos Santa F√©","itesm-csf",1,1,0],
	        ["Inventive","inventive",0,1,30],
	        ["Platzi Bogot√°","platzi-bog",0,1,120],
	        ["Platzi M√©xico","platzi-mex",0,1,30],
	        ["Google M√©xico","google-mx",0,1,250],
	        ["Curso de Fotograf√≠a, UVA","curso-foto-uva",1,0,25],
	        ["Equipo de futbol, chapinero","fut-chapinero",1,0,40],
	        ["Grupo 3340, Pr√°cticas de campo","grupo-3340-campo",1,0,50],
	        ["Generaci√≥n 2018 Escuela de enfermer√≠a","enfermeria-2018",1,0,0],
	        ["Facultad de Ingenier√≠a, UNAM","unam-fi",1,1,0],
	        ["Facultad de Medicina, UNAM","unam-fm",1,1,0],
	        ["Platzi Developer Circle - Bogot√°","platzi-dev",1,0,0],
	        ["Platzi Developer Circle - CDMX","platzi-dev-mx",1,0,0],
	        ["IBM Santa F√©","ibm-santafe",0,1,0],
	        ["P&G - Santa F√©","p-n-g",1,0,1000],
	        ["Amigos de Centraal","comunidad-centraal",1,0,0],
	        ["Central Academy","centraal-academy",1,1,0],
	        ["Estado de M√©xico - CDMX","edomex",1,0,0],
	        ["Satelite - Santa F√© entre semana","sat-sfe-week",1,0,0],
	        ["Sable Digital","sable",0,0,30],
	    ]
	    for cirlce in circles:
	        name = cirlce[0]
	        slug_name = cirlce[1]
	        is_public = cirlce[2]
	        verified = cirlce[3]
	        members_limit = cirlce[4]
	        print(f'Processed { name } { slug_name } { is_public } { verified } { members_limit }')
	        Circle.objects.create(
	            name=name,
	            slug_name=slug_name,
	            is_public=is_public,
	            verified=verified,
	            members_limit=members_limit,
	        )
	    
	```

	* **Germ√°n** [542927] (3)

		```
		    for cirlce in circles:
		       name,slug_name,is_public ,verified ,members_limit=cirlce
		       print(f'Processed { name } { slug_name } { is_public } { verified } { members_limit }')
		       Circle.objects.create(
		           name=name,
		           slug_name=slug_name,
		           is_public=is_public,
		           verified=verified,
		           members_limit=members_limit,
		       )
		    
		    
		```
		
		Lo puedes hacer tambi√©n as√≠ con destructuring- una lineas menos üòõ

* **Adrian Gonz√°lez** (3) [496235](https://platzi.com/comentario/496235/) 

	Django import export es una librer√≠a muy √∫til tambi√©n para poder importar los datos desde el admin.
	
	[Django import export](https://django-import-export.readthedocs.io/en/latest/)

* **Delia Roman** (2) [1042761](https://platzi.com/comentario/1042761/) 

	El modelo Circles al heredar el meta de CRideModel, heredar√≠a lo de abstract=True??

* **jgaspar** (2) [1040265](https://platzi.com/comentario/1040265/) 

	```
	    defload_circles():
	    	with open('circles.csv') as csv_file:
	    		csv_reader = csv.DictReader(csv_file)
	                    line_count = 0
	                    for row in csv_reader:
	                    	circles = Circle(
	        			name = row["name"],
	    			slug_name = row["slug_name"],
	    			is_public = row["is_public"],
	     			verified = row["verified"],
	    			members_limit = row["members_limit"])
	    			circles.save()
	    			name = row["name"]
	     			print(f'{name} ha sido guardado satisfactoriamente')
	     			line_count += 1
	    		print(f'Han finalizado la carga con un total de {line_count}')
	    
	```

	* **gerson-mayer** [1040265] (1)

		No sabia por donde arrancar un script para eso!, lo lei y lo analice para poder aprender algo mas! Muchas gracias por compartir!

* **alexhernandez4675** (2) [986547](https://platzi.com/comentario/986547/) 

	Hola, me sale este error, aver si alguien me pudiera ayudar:  
	File ‚Äú/usr/local/lib/python3.6/site-packages/django_extensions/management/commands/shell_plus.py‚Äù, line 11, in <module>  
	from django.utils.six import PY3  
	ModuleNotFoundError: No module named ‚Äòdjango.utils.six‚Äô

	* **Erick Herrera** [986547] (1)

		¬øLograste solucionarlo? me aparece lo mismo

	* **Manuel Alejandro Aguilar T√©llez Gir√≥n** [986547] (2)

		El problema es que efectivamente no existe django.utils.six lo cambiaron a
		``` 
		    import six
		    
		```
		
		Solamente, como estamos trabajando en una versi√≥n superior de django entonces da ese error. Espero poder solucionarlo y te digo xD

	* **Erick Herrera** [986547] (1)

		@FixingMind5 genial, igual intentar√© solucionarlo, si lo logras av√≠same por favor jajajaj  
		gracias

	* **Erick Herrera** [986547] (1)

		Al final lo que hice fue usar la versi√≥n que usa Pablo, as√≠ no me complico m√°s jajaj y se solucion√≥ todo. (django==2.0.10)

	* **Manuel Alejandro Aguilar T√©llez Gir√≥n** [986547] (1)

		S√≠, es regresando a la versi√≥n anterior o en su defecto cambiar el [manage.py](http://manage.py) pero sinceramente es algo que no quiero tocar xD

* **Eduardo Kiriakos Piazza** (2) [583703](https://platzi.com/comentario/583703/) 

	En hype por el shell_plus!

* **Erick Herrera** (1) [954356](https://platzi.com/comentario/954356/) 

	Tengo una duda, si no tuviera los datos que da el profesor en su archivo, existe alguna forma de crear datos aleatorios para llenar la base de datos sin tener que agregar uno por uno?

* **David Alejandro Abreu Abreu** (1) [797661](https://platzi.com/comentario/797661/) 

	Generalmente siempre uso _IPython_ , pero me parece mucho mejor ese _shell_plus_ de Django_extension!

* **joseangelchepo** (1) [562762](https://platzi.com/comentario/562762/) 

	Aqui mi funci√≥n
	``` 
	    import csv
	    
	    defimport_csv(filename): 
	        with open(filename) as csvarchivo:
	            entrada=csv.DictReader(csvarchivo)
	            for reg in entrada:
	                if int(reg['members_limit'])!=0:
	                    Circle.objects.create( 
	                    name=reg['name'], 
	                    slug_name=reg['slug_name'], 
	                    is_public=reg['is_public'], 
	                    verifed=reg['verifed'], 
	                    is_limited=1, 
	                    members_limit=reg['members_limit']) 
	                    print(reg['name']) 
	                else:
	                    Circle.objects.create( 
	                    name=reg['name'], 
	                    slug_name=reg['slug_name'], 
	                    is_public=reg['is_public'], 
	                    verifed=reg['verifed'],  
	                    members_limit=reg['members_limit']) 
	                    print(reg['name'])
	    
	```

* **Eric Eduardo Manzano Leal** (1) [528470](https://platzi.com/comentario/528470/) 
Hola a todos, Tengo un sistema con millones de registros en una tabla, quiero hacer un reporte pero consultando la base de datos directamente tarda demasiado, es un reporte con agrupamientos y Joins, alguien sabe ¬øque arquitectura debo usar para generar√° reportes grandes?, estaba pensando en usar decir como una especie de espejo, pero la verdad no tengo idea de c√≥mo se resuelve esto, me ayudan por favor. Saludos.

	* **Eric Eduardo Manzano Leal** [528470] (1)
Quise decir que usar Redis como espejo, agreg√≥ que uso Django y PostgreSQL

	* **Jesus Herrera** [528470] (1)

		Tienes problemas si utilizas consultas de Django?

	* **Hern√°n Chilabert** [528470] (1)

		Hola!  
		¬øTienen √≠ndices las columnas por las cuales queres filtrar? Es clave tener indices.

# Introducci√≥n a Django REST Framework [3418]

## 0160. Aprende c√≥mo construir tu propio API con Django Rest Framework [17200](https://platzi.com/clases/1461-django-avanzado/17200-aprende-como-construir-tu-propio-api-con-django-re/)

### Descripci√≥n:


En esta clase el profesor Pablo Trinidad nos explica c√≥mo construir nuestra primera API en Django con Django Rest Framework

Django Rest Framework es una librer√≠a que cuenta con muchas herramientas para poder crear nuestras APIs con ayuda de Django. Tiene algunos beneficios como pol√≠ticas de autenticaci√≥n incluyendo packetes de OAuth1 y OAuth2, serializaci√≥n de datos que soporta ORM (Object-relational Mapping), puedes hacer uso de las populares Class Based Views y Function Based Views si necesitas algo m√°s personalizado. Empresas como Mozilla, Red Hat, Heroku y Eventbrit lo utilizan.

### Links:

* [HTTPie ‚Äì command line HTTP client](https://httpie.org/)

* [Request and response objects | Django documentation | Django](https://docs.djangoproject.com/en/2.1/ref/request-response/)

### Comentarios:

* **Serivt** (3) [494645](https://platzi.com/comentario/494645/) 

	En la documentaci√≥n de Django recomiendan usar imports relativos en componentes locales.
	
	<https://docs.djangoproject.com/en/1.11/internals/contributing/writing-code/coding-style/#imports>

	* **Germ√°n** [494645] (1)

		SI

	* **aviloncho** [494645] (1)

		Siempre he tenido la duda al importar paquetes:  
		¬øPath relativo √≥ absoluto?

	* **Nicolas Eduardo Romero Morales** [494645] (1)

		depende de la aplicacion, pero regularmente las apps son mas faciles de mover otra si tienes imports relativos, para facilitar un mas las cosas los templates tambien deben de estar dentro de cada app

* **esdraspavon** (2) [519675](https://platzi.com/comentario/519675/) 

	[HTTPie](https://httpie.org/)
	
	[Documentacion de django JsonResponse](https://docs.djangoproject.com/en/2.1/ref/request-response/#jsonresponse-objects)

* **Alexander  Silvera** (1) [513577](https://platzi.com/comentario/513577/) 

	Como podr√≠a vincular mi api con graphql, es decir tendr√≠a que crear una api y vincularla con graphql para la realizaci√≥n de las querys??

	* **Kevin Javier Morales** [513577] (2)

		Para crear una API con GraphQL puedes hacer uso de este paquete <https://github.com/graphql-python/graphene-django> en lugar de DRF

	* **Alexander  Silvera** [513577] (1)

		Muchas gracias por el aporte y la ayuda.

* **Alexander  Silvera** (1) [53104](https://platzi.com/comentario/513577/) 
Como podr√≠a vincular mi api con graphql, es decir tendr√≠a que crear una api y vincularla con graphql para la realizaci√≥n de las querys??

	* **Kevin Javier Morales** [53104] (2)

		Para crear una API con GraphQL puedes hacer uso de este paquete <https://github.com/graphql-python/graphene-django> en lugar de DRF

## 0170. Vistas, URLs y Parsers de DRF [17195](https://platzi.com/clases/1461-django-avanzado/17195-vistas-urls-y-parsers-de-drf/)

### Descripci√≥n:


### Links:

* [Home - Django REST framework](https://www.django-rest-framework.org/)

* [GitHub - encode/django-rest-framework: Web APIs for Django. ??](https://github.com/encode/django-rest-framework)

* [GitHub - encode/django-rest-framework: Web APIs for Django. ??](https://github.com/encode/django-rest-framework)

* [Requests - Django REST framework](https://www.django-rest-framework.org/api-guide/requests/)

* [Views - Django REST framework](https://www.django-rest-framework.org/api-guide/views/)

* [Views - Django REST framework](https://www.django-rest-framework.org/api-guide/views/)

### Comentarios:

* **Adrian Gonz√°lez** (4) [497141](https://platzi.com/comentario/497141/) 

	Podr√≠an por favor comentarme el nombre de la extensi√≥n para ver los archivos como √°rbol, no le entiendo muy bien.

	* **Didier Z√∫√±iga** [497141] (7)

		Octotree

	* **esdraspavon** [497141] (10)

		[Octotree Chrome](https://chrome.google.com/webstore/detail/octotree/bkhaagjahfmjljalopjnoealnfndnagc?hl=es)
		
		[Octotree Mozilla Firefox](https://addons.mozilla.org/es/firefox/addon/octotree/)
		
		[Octotree Opera](https://addons.opera.com/es-419/extensions/details/octotree/)

* **asanchez2091** (2) [1019540](https://platzi.com/comentario/1019540/) 

	Pens√© que el uso de Django rest framwork iba hacer mucho pero mucho m√°s traum√°tico.

* **Nick1125** (1) [1046796](https://platzi.com/comentario/1046796/) 

	Ahora si empieza lo chido

* **Adri√°n Andr√©s Sosa** (1) [1018451](https://platzi.com/comentario/1018451/) 

	¬øLa aplicaci√≥n de la terminal para hacer peticiones es HTTPie (<https://httpie.org/>)?

* **Juan Felipe Suaza** (1) [808032](https://platzi.com/comentario/808032/) 

	Increible Profesor es Pablo

* **Daniel Agamez** (0) [1076087](https://platzi.com/comentario/1076087/) 

	una duda, como hizo platzi para juntar react con django?

## 0180. Serializers [17198](https://platzi.com/clases/1461-django-avanzado/17198-serializers/)

### Descripci√≥n:


Los **serializers** son contenedores que nos permiten tomar tipos de datos complejos, convertirlos en datos nativos de python para despu√©s poderlos usar como JSON o XML. Son contenedores que amoldan datos para que cumplan con las condiciones de los serializers y sean llevados a un tipo de estos y despu√©s estos puedan ser transformados en otra cosa.

### Links:

* [Serializers - Django REST framework](https://www.django-rest-framework.org/api-guide/serializers/)

* [Serializer fields - Django REST framework](https://www.django-rest-framework.org/api-guide/fields/)

* [Validators - Django REST framework](https://www.django-rest-framework.org/api-guide/validators/)

### Comentarios:

* **Miguel Herreros Cejas** (2) [517091](https://platzi.com/comentario/517091/) 

	Serializando modelos con campos/relaciones ForeignKey o ManytomanyFields
	
	<https://es.stackoverflow.com/questions/5419/django-rest-framework-serializando-modelos-que-tienen-campos-relaciones-foreignk#>_=_

* **Manuel Alejandro Aguilar T√©llez Gir√≥n** (1) [1011340](https://platzi.com/comentario/1011340/) 

	Iba a preguntar ¬øPor qu√© Pablo hace
	``` 
	    from rest_framework import serializers
	    
	```
	
	en lugar de
	``` 
	    from rest_framework.serializers import Serializer
	    
	```
	
	?  
	Pero ca√≠ en cuenta que Pablo usa los Fields dentro de **serializers** y me di cuenta que muchas veces por eso es importante traer todo el m√≥dulo xD

* **Alexander  Silvera** (1) [520051](https://platzi.com/comentario/520051/) 

	Por lo que entiendo estos archivos son una base donde se realiza toda la configuraci√≥n general, si es as√≠ entonces estos archivos los puedo usar para cualquier otro proyecto??  
	O sea a√∫n no comienza a realizar las aplicaciones particulares del proyecto, no??

	* **esdraspavon** [520051] (1)

		Los archivos que el profesor dio al inicio del curso es una configuraci√≥n que puede servirte para cualquier proyecto, siempre teniendo en cuenta el tipo de proyecto. Pero puedes modificarlo a tu gusto.

	* **aleducode** [520051] (1)

		Ac√° podes encontrar una gu√≠a completa para todo el tema del setup y codebase que no es muy claro de donde surge y basado en qu√© [django-cookie-cutter](https://cookiecutter-django.readthedocs.io/en/latest/)

* **Alexander  Silvera** (1) [520041](https://platzi.com/comentario/520041/) 

	Por lo que entendi aqu√≠ esta mostrando toda la configuraci√≥n base para el proyecto y que puede servir para cualquier proyecto.  
	Si es as√≠ entonces puedo usar todo estos archivos para otro proyecto???  
	Esto esto as√≠ o estoy equivocado??  
	Saludos

	* **esdraspavon** [520041] (2)

		Los archivos que el profesor dio al inicio del curso es una configuraci√≥n que puede servirte para cualquier proyecto, siempre teniendo en cuenta el tipo de proyecto. Pero puedes modificarlo a tu gusto.

* **aleducode** (1) [511465](https://platzi.com/comentario/511465/) 

	Algun simil a este proyecto pero con MYSQL??

	* **Alexander  Silvera** [511465] (3)

		Lo √∫nico que debes de hacer es cambiar la base de datos con la que te vas a conectar, eso lo realizas dentro del archivo Settings.

	* **Juan Felipe Suaza** [511465] (1)

		Tambien tienes q modificar los archivos de docker y hacer la respectiva configuracion

* **Jorge Enrique Callisaya Sanchez** (1) [76490](https://platzi.com/comentario/888126/) 
Al sobre-escribir la funci√≥n create, seg√∫n la documentaci√≥n. se manda los par√°metros de self, y validated_data, ¬øPor que el prof...

	* **fredyramosp** [76490] (1)

		A√∫n no llevo el curso, pero de lo que s√© y puedo entender de tu pregunta, lo que importa es que el m√©todo create, recibe 2 parametros un implicito(self) y otro explicito, que supongo que en la documentaci√≥n se llama self, y validated_data, Sin embargo, le puedes colocar cualquier nombre al 2do parametro y eso no afectar√° el resultado.
		``` 
		    defcreate(self, validated_data):
		    	pass
		    
		    defcreate(self, validated_data):
		    	pass
		    
		```
		
		Ambas formas son validos, solo que ahora debes usar en el cuerpo del metodo, los nombres de la variable que estas colocando.
		
		Al final el serializer enviar√† los valores validados al metodo que has res-escrito.

* **Alexander  Silvera** (1) [53637](https://platzi.com/comentario/520051/) 
Por lo que entiendo estos archivos son una base donde se realiza toda la configuraci√≥n general, si es as√≠ entonces estos archivos los pue...

	* **esdraspavon** [53637] (1)

		Los archivos que el profesor dio al inicio del curso es una configuraci√≥n que puede servirte para cualquier proyecto, siempre teniendo en cuenta el tipo de proyecto. Pero puedes modificarlo a tu gusto.

* **Alexander  Silvera** (1) [53634](https://platzi.com/comentario/520041/) 
Por lo que entendi aqu√≠ esta mostrando toda la configuraci√≥n base para el proyecto y que puede servir para cualquier proyecto. Si es as√≠ ...

	* **esdraspavon** [53634] (2)

		Los archivos que el profesor dio al inicio del curso es una configuraci√≥n que puede servirte para cualquier proyecto, siempre teniendo en cuenta el tipo de proyecto. Pero puedes modificarlo a tu gusto.

## 0190. Buenas pr√°cticas para el dise√±o de un API REST [17199](https://platzi.com/clases/1461-django-avanzado/17199-buenas-practicas-para-el-diseno-de-un-api-rest/)

### Descripci√≥n:


Uno de los prerequisitos para crear APIs es conocer el protocolo HTTP. Verbos, m√©todos, estados y las cabeceras.

Van a estar dise√±ando una interfaz **para programadores** para que otros programadores puedan interactuar, nos olvidaremos de los templates para que un equipo de Frontend se encargue de eso. Debemos tener la perspectiva de un usuario de API y no la de un dise√±ador de API.

El **objetivo** es algo que siempre se deben preguntar qu√© problema deben de resolverle al usuario final nuestra API. El **√©xito** de nuestra API se mide por qu√© tan r√°pido nuestros compa√±eros pueden usarla.

**REST** : Es una serie de principio de c√≥mo dise√±ar una web service. Un estilo de arquitectura.

**HTTP Status Code** :

* 201: Creado
* 304: No modificado
* 404: No encontrado
* 401: No autorizado
* 403: Prohibido o restringido.



**Pro tips** :

* SSL
* Cach√©
* Valida
* CSRF o Cross-Site Request Forgery
* Limita los requests
* Complementa tu API con un SDK



### Links:

* [https://pages.apigee.com/rs/apigee/images/api-design-ebook-2012-03.pdf](https://pages.apigee.com/rs/apigee/images/api-design-ebook-2012-03.pdf)

* [Graph API - Documentation - Facebook for Developers](https://developers.facebook.com/docs/graph-api/)

* [APIs Design - Speaker Deck](https://speakerdeck.com/pablotrinidad/apis-design)

* [List of HTTP status codes - Wikipedia](https://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

### Comentarios:

* **ingkstr** (5) [701755](https://platzi.com/comentario/701755/) 

	Creo que en este momento han cambiado mi paradigma de backend. Solo me gustar√≠a que siguiendo con este curso pudieramos ver un ejemplo de como una API interactua con un dise√±o frontend (muy b√°sico).

	* **Bruno Diharce** [701755] (1)

		Podrias pensar el frontend como cuando se usa httpie.

	* **Juan Ma Betancourt** [701755] (1)

		seria fant√°stico, normalmente los cursos drf se limitan a mostrar el backend.

	* **David Alejandro Abreu Abreu** [701755] (1)

		Yo tambien pienso lo mismo, hace poco termine el curso Profesional de Vue.js, y por ningun lado se asoma como hacer un CRUD, como manejar un formulario haciendo validaciones, hacer subida de archivos y enviar todo esto a un Backend. **Deber√≠an hacer como especies de cursos especiales donde mezclen ambos conocimientos, no se un ‚ÄúFullstack Vue.js y DjangoREST‚Äù**

* **esdraspavon** (4) [519956](https://platzi.com/comentario/519956/) 

	Excelente clase!! Muy buena informaci√≥n!! A mi YO del pasado le hubiera encantado saber esto antes‚Ä¶ jajaja üòÑ

* **lirux** (4) [506152](https://platzi.com/comentario/506152/) 

	Limitar el tipo de solicitudes: @api_view([‚ÄòGET‚Äô, ‚ÄòPOST‚Äô]), si no lo limitas, pueden hacer una solicitud DELETE, que sera admitida y no quieres este comportamiento.

* **wanderjosea** (2) [503454](https://platzi.com/comentario/503454/) 

	Alguien Podria darme un Ejemplo Sobre uno de los √∫ltimos ProTips.  
	‚ÄúLimit The Request‚Äù, no me quedo muy claro el concepto, Muchas Gracias de Antemano üòÉ

	* **lirux** [503454] (3)

		Limitar el tipo de solicitudes: @api_view([‚ÄòGET‚Äô, ‚ÄòPOST‚Äô]), si no lo limitas, pueden hacer una solicitud DELETE, que sera admitida y no quieres este comportamiento.

	* **lirux** [503454] (2)

		Adicional a los tipos de request, autorizaci√≥n a traves de autenticaci√≥n

* **Luis √Ångel Cuandon Salazar** (2) [79167](https://platzi.com/comentario/935110/) 
Hola! Una pregunta. En los errores, cual es la diferencia entre 401 Unauthorized y 403 Forbidden?

	* **Luis √Ångel Cuandon Salazar** [79167] (1)

		Investigando encontr√© esto:  
		401 Unauthorized, ser refiere a que no tienes ningun tipo de acceso.  
		403 Forbidden, es que tienes acceso pero no tienes los privilegios necesarios.

* **Maxc_Martinez** (1) [1027737](https://platzi.com/comentario/1027737/) 

	un resumen muy importante acerca de los status code, exelente!

* **Nicolas Restrepo** (1) [918747](https://platzi.com/comentario/918747/) 

	Hola, amigos.  
	¬øDonde puedo aprender sobre protocolos? ¬øHay alg√∫n curso aqu√≠?

	* **Claudio Jesus V√°zquez Villanueva** [918747] (1)

		Me parece esta este para [REST](https://platzi.com/clases/api-rest/)

* **troya_carlos** (1) [881568](https://platzi.com/comentario/881568/) 

	Como podria yo documentar una API?. conocen alguna libreria para ello, tengo entendido que con DRF se puede, pero en el caso que se desarrolle una API en otra tecnologia, que opciones tengo?

	* **David Granados** [881568] (2)

		Te recomiendo swagger
		
		<https://swagger.io/>  
		<https://django-rest-swagger.readthedocs.io/en/latest/>

* **Hebert  lughi villafuerte ccacala** (1) [526006](https://platzi.com/comentario/526006/) 

	Que buena clase !!! üòÉ ‚Ä¶

* **fourier** (1) [74297](https://platzi.com/comentario/850233/) 
c√≥mo puedo generar un SDK de mi API creado con DRF?

	* **FernanddoSalas** [74297] (1)

		No se puede generar, la unica forma de tener SDK para una API es programandolo.

* **morwen1** (0) [588641](https://platzi.com/comentario/588641/) 

	Buenas , se puede mandar una imagen por una API rest ??

	* **davidtoca (Platzi)** [588641] (3)

		puedes mandar la url a la imagen

	* **pruebadate** [588641] (2)

		Otra manera de mandar imagenes pero no es muy recomendable es que las combiertas a base64 y las envies en cadena, si es que no deseas mandar por URL

## 0200. Request, response, renderers y parsers [17194](https://platzi.com/clases/1461-django-avanzado/17194-request-response-renderers-y-parsers/)

### Descripci√≥n:


### Links:

* [Requests - Django REST framework](https://www.django-rest-framework.org/api-guide/requests/)

* [Responses - Django REST framework](https://www.django-rest-framework.org/api-guide/responses/)

* [406 Not Acceptable](https://httpstatuses.com/)

### Comentarios:

* **Adri√°n Andr√©s Sosa** (1) [1018718](https://platzi.com/comentario/1018718/) 

	Adem√°s de buen profesor, en lo referente a informaci√≥n cada video vale oro hasta ahora.

* **alexhernandez4675** (1) [986804](https://platzi.com/comentario/986804/) 

	Este profesor me encanta ‚ù§Ô∏è  
	Uno de los mejores de platzi

# Real DRF [3415]

## 0210. Autenticaci√≥n y tipos de autenticaci√≥n [17196](https://platzi.com/clases/1461-django-avanzado/17196-autenticacion-y-tipos-de-autenticacion/)

### Descripci√≥n:


La autenticaci√≥n es la parte de asociar una petici√≥n a un usuario y despu√©s al objeto request se le asigna dos propiedades como request.user y request.auth

### Links:

* [Authentication - Django REST framework](https://www.django-rest-framework.org/api-guide/authentication/)

* [Permissions - Django REST framework](https://www.django-rest-framework.org/api-guide/permissions/)

* [JSON Web Tokens - jwt.io](https://jwt.io/)

* [Basic access authentication - Wikipedia](https://en.wikipedia.org/wiki/Basic_access_authentication)

* [OAuth - Wikipedia](https://en.wikipedia.org/wiki/OAuth)

### Comentarios:

* **Hamel Barrero** (3) [879102](https://platzi.com/comentario/879102/) 

	lo siento no puedo seguir el curso bien pues cuando instalo docker todo mi computador se pone muy lento pues no es muy capaz de soportarlo.

	* **Nicolas Restrepo** [879102] (1)

		¬øQu√© recursos tiene tu pc?

	* **mauriciodinki** [879102] (1)

		Yo con 8GB en RAM y un i7 en la laptop, apenas y la libro

	* **Nicolas Restrepo** [879102] (1)

		Que raro, yo tengo un i5 y 8 de ram y me va perfectamente

	* **Manuel Alejandro Aguilar T√©llez Gir√≥n** [879102] (1)

		Revisa si tienes vol√∫menes o im√°genes que no necesitas, tal vez el espacio que esas im√°genes ocupan est√° alentando tu computadora

	* **David Alejandro Abreu Abreu** [879102] (2)

		Si puedes, yo no pude hacerlo con docker. **Tienes que hacerlo con un setup alternativo.** Yo ando con _virtualenv_ y _pydanny/cookiecutter_. **Sete√© las variables de entorno en mi entorno virtual** , y en el archivo _[local.py](http://local.py)_. Coloque la configuraci√≥n para SQLite. A√∫n no resuelvo como har√© con Celery, pero ah√≠ veo.

* **Rafael Mendoza Gui√±ez** (1) [592185](https://platzi.com/comentario/592185/) 

	Es necesario la extensi√≥n recomendada para roles por la doc de DRF o con los groups y permissions puedo hacer lo mismo??

	* **Andres Rodriguez** [592185] (1)

		Te refieres a [django-rest-framework-roles](https://github.com/computer-lab/django-rest-framework-roles)? En realidad se trata de una extensi√≥n muy corta que te ayuda a escribir menos c√≥digo si quieres implementar ‚Äòroles‚Äô en tu API. Al final igual te toca a t√≠ definir la l√≥gica de tus roles (como filtrar un queryset dependiento del ‚Äòrol‚Äô del usuario que hace un request) basado en groups y permissions.

* **luiseduardiazc** (1) [552169](https://platzi.com/comentario/552169/) 

	Ya tengo corriendo un proyecto que guarda los token‚Äôs en la base de datos y expiran en 24 horas seria engorroso cambiar el m√©todo de autenticaci√≥n pero podr√≠a encriptar los token‚Äôs antes de que se guarden en la base de datos.
	
	¬øQue opinan ?

	* **Minrock** [552169] (4)

		A mi parecer es mejor cambiar a JWT, guardar los tokens en una base de datos no es una muy buena pr√°ctica, en teor√≠a es mas facil acceder a esos token y a pesar de tener ‚Äúexpiraci√≥n‚Äù 24 horas es un tiempo muy largo. En mis ultimos proyectos he utilizado JWT con tokens de refrescado, de esta manera puedo poner una expiraci√≥n de 5 minutos y con el segundo token mi front-end puede pedir otro token de 5 minutos y as√≠, no me exenta de que pueda ser atacado y puedan realizar acciones en esos 5 minutos, pero por lo menos en 5 minutos a una persona le quedar√≠a dificil hacer muchas transacciones, a menos claro que lo haga de manera autom√°tica y muy especifico para mi sitio, as√≠ si lograr√≠a algo a mayor escala, pero la seguridad nos dice ‚Äúhacer las cosas mas dificiles para el atacante‚Äù ya que tener un sistema 100% ‚Äúseguro‚Äù no existe.

	* **fabianfalon** [552169] (1)

		@minrock, tenes algun ejemplo de como configurar JWT para hacer un refresh del token una vez que expira?

* **fabianfalon** (1) [495971](https://platzi.com/comentario/495971/) 

	@pablotrinidad que recomiendas usar como autenticacion? que usas frecuentemente en tus proyectos?

	* **Alejandro Villegas Carvajal** [495971] (2)

		a mi personalmente me ha funcionado bien usar un token de autenticaci√≥n en los request. o JWT

	* **fabianfalon** [495971] (1)

		@lejandrovillegasc yo siempre use el que trae DRF, pero como en la clase decia que no lo recomienda, estuve averiguando estos dias como hacer login y authentication con JWT

	* **Miguel Herreros Cejas** [495971] (2)

		Te aconsejo probar oauth0, en ‚ÄúCurso de autentifaci√≥n con Oauth0‚Äù te lo explican con detalle.  
		Yo en el frontend utilizo este sistema, con Vue.js y Vuex, que te evita utilizar cookies y localstorage. Y en backend, DRF provee un toolkit.
		
		<https://django-oauth-toolkit.readthedocs.io/en/latest/index.html>

* **Rafael Mendoza Gui√±ez** (1) [59510](https://platzi.com/comentario/592185/) 
Es necesario la extensi√≥n recomendada para roles por la doc de DRF o con los groups y permissions puedo hacer lo mismo??

	* **Andres Rodriguez** [59510] (1)

		Te refieres a [django-rest-framework-roles](https://github.com/computer-lab/django-rest-framework-roles)? En realidad se trata de una extensi√≥n muy corta que te ayuda a escribir menos c√≥digo si quieres implementar ‚Äòroles‚Äô en tu API. Al final igual te toca a t√≠ definir la l√≥gica de tus roles (como filtrar un queryset dependiento del ‚Äòrol‚Äô del usuario que hace un request) basado en groups y permissions.

* **fabianfalon** (1) [51770](https://platzi.com/comentario/495971/) 
@pablotrinidad que recomiendas usar como autenticacion? que usas frecuentemente en tus proyectos?

	* **Alejandro Villegas Carvajal** [51770] (2)

		a mi personalmente me ha funcionado bien usar un token de autenticaci√≥n en los request. o JWT

## 0220. APIView [17193](https://platzi.com/clases/1461-django-avanzado/17193-apiview/)

### Descripci√≥n:


### Comentarios:

* **alexgv04** (1) [978944](https://platzi.com/comentario/978944/) 

	podria realizar lo mismo que hiciste con views aplicado a models, es decir tener dentro de una misma app varios modelos y cada modelo tener su propio archivo?

* **morwen1** (1) [595030](https://platzi.com/comentario/595030/) 

	WOW eso del **init**.py no lo sabia O-O

* **Rodrigo Carre√±o** (1) [62568](https://platzi.com/comentario/642391/) 
Como puedo hacer que la ur permitas un primary key con puntos para mi caso conctreto es un login: ejemplo : 

	* **aleducode** [62568] (1)

		Hola, lo que debes hacer es declarar la url asi:
		``` 
		    router.register(
		        r'agentes/(?P<username>[a-zA-Z0-9_-]+)',
		        views.YourViewSet,
		        basename='yourbasename'
		    )
		    
		```

* **Juan Fernando Romero Ortega** (0) [907543](https://platzi.com/comentario/907543/) 

	Hola a todos, tengo una duda, y pues es respecto a lo que el profesor coloca en los archivos init, no entiendo el por que lo hace, ¬øcual es la raz√≥n par hacerlo?

	* **Nicolas Restrepo** [907543] (1)

		Lo hace para que puedas importar las clases desde otros modulos de la aplicaci√≥n

## 0230. Creando el token de autorizaci√≥n [17192](https://platzi.com/clases/1461-django-avanzado/17192-creando-el-token-de-autorizacion/)

### Descripci√≥n:


### Links:

* [Authentication - Django REST framework](https://www.django-rest-framework.org/api-guide/authentication/#tokenauthentication)

### Comentarios:

* **rulobars** (5) [497189](https://platzi.com/comentario/497189/) 

	El video dice que dura 26:14 pero despues del 13:45 ya no hay nada.

	* **Kevin Javier Morales** [497189] (1)

		Ya est√° arreglado üòÉ

* **Adrian Gonz√°lez** (3) [503827](https://platzi.com/comentario/503827/) 

	Por favor arreglen el video.

	* **Kevin Javier Morales** [503827] (1)

		Ya est√° arreglado üòÉ

* **Luis √Ångel Cuandon Salazar** (1) [1043021](https://platzi.com/comentario/1043021/) 

	Hola!  
	Una pregunta, he visto varios ejemplos donde la autentificacion se maneja fuera de las url versionadas.  
	¬øLa autentificacion no se debe versionar?

* **jenapi** (1) [617506](https://platzi.com/comentario/617506/) 

	Hey esta clase me lanza un error si pongo
	``` 
	    token, user= serializer.save()
	    
	```
	
	psero si lo hago al revez no
	``` 
	    user, token = serializer.save()
	    
	```
	
	Por qu√© pasa esto?

	* **Andres Arias** [617506] (2)

		No estoy seguro del error que te este dando, pero en el metodo create del serializers.users se est‚Äôa devolviendo " return self.context[‚Äòuser‚Äô], token.key ", primero el usuario y despues la llave del token.  
		O sea que estarias guardando el user en la variable token, y el token en la variable user; despu√©s cuando vayas a usarlas van a estar al rev√©s y va a saltar error

* **adrianrbp** (1) [603427](https://platzi.com/comentario/603427/) 

	Token.objects.get_or_create(user=self.context['user'])

* **Franco Correa** (1) [532045](https://platzi.com/comentario/532045/) 

	No es redundante comentar `"""Meta class."""` en la clase Meta? es como que no agrega ninguna informaci√≥n adicional. Lo mismo con `UserModelSerializer` comentando ‚ÄúUser model serializer‚Äù. Simplemente es repetir lo que ya escribiste.

	* **Diego Alexander Forero Higuera (Platzi)** [532045] (4)

		Escribir documentaci√≥n en el c√≥digo es algo complicado de hacer, como lo mencionas si puede ser redundante, pero por ejemplo la mayor√≠a de IDE‚Äôs usan estos comentarios para mostrar ayudas al momento de escribir c√≥digo y pueden ser √∫tiles cuando el c√≥digo fuente ya es mucho, puedes llegar a buscar por el termino User Login y vas a llegar al c√≥digo comentado porque simplemente no te acuerdas que el nombre del serializador de UserLogin.

* **Jose Antonio Caraballo Rojas** (1) [517400](https://platzi.com/comentario/517400/) 

	donde podemos ver la implementacion de un token seguro para mejorar el proyecto que estamos desarrollando en este curso se puede usara JWT para todo el proyecto y no solo para verificar los usuarios por email , como seria su uso en todo el proyecto conocen una gu√≠a o algo? gracias

	* **Franco Correa** [517400] (1)

		‚ÄúNo est√° en el alcance de este curso‚Äù
		
		classic

	* **walis85300 (Platzi)** [517400] (2)

		Hay una implementaci√≥n de JWT para Django Rest Framework que puede ser √∫til <https://getblimp.github.io/django-rest-framework-jwt/>

	* **fernando-sp** [517400] (4)

		yo recomendaria el simplejwt , obtienes un token cuando te logueas por primera vez y un token de refresh cada cierto tiempo .  
		<https://github.com/davesque/django-rest-framework-simplejwt>

* **fabianfalon** (1) [496039](https://platzi.com/comentario/496039/) 

	Este video esta mal grabado, hay partes que no coincide el audio con la imagen

	* **Kevin Javier Morales** [496039] (2)

		Ya est√° arreglado üòÉ

* **Jose Antonio Caraballo Rojas** (1) [53426](https://platzi.com/comentario/517400/) 
donde podemos ver la implementacion de un token seguro para mejorar el proyecto que estamos desarrollando en este curso se puede usara JW...

	* **Franco Correa** [53426] (1)

		‚ÄúNo est√° en el alcance de este curso‚Äù
		
		classic

* **fabianfalon** (1) [51776](https://platzi.com/comentario/496039/) 
Este video esta mal grabado, hay partes que no coincide el audio con la imagen

	* **Kevin Javier Morales** [51776] (2)

		Ya est√° arreglado üòÉ

* **cristobalfroufe** (0) [655509](https://platzi.com/comentario/655509/) 

	¬øHay alguna impelmentaci√≥n de Token seguro como ejemplo, que con pocos conocimientos sea f√°cil de implementar?  
	No entiendo muy bien, es un curso avanzado, pero el ejemplo de token no es seguro.

	* **Jorge Enrique Callisaya Sanchez** [655509] (1)

		Seguramente en tu metodo create del serializer devolviste al reves los datos

## 0240. User sign up [17191](https://platzi.com/clases/1461-django-avanzado/17191-user-sign-up/)

### Descripci√≥n:


### Links:

* [Authentication - Django REST framework](https://www.django-rest-framework.org/api-guide/authentication/#tokenauthentication)

### Comentarios:

* **Miguel Herreros Cejas** (5) [586689](https://platzi.com/comentario/586689/) 

	El chino de la tienda de al lado de mi casa se llama Li, no podr√≠a utilizar nuestra aplicaci√≥n üò¶  
	Jaja

* **Rafael Mendoza Gui√±ez** (2) [592332](https://platzi.com/comentario/592332/) 

	C√≥mo puedo agregar el perfil al retorno del token y del usuario? c√≥mo accedo a la relaci√≥n??

	* **Andres Arias** [592332] (1)

		Deberias hacer algo como lo que se hizo en el user, despues de validar los datos, pones al perfil en el contexto con self.context[‚Äòprofile‚Äô] = user.profile (deberias comprobar que exista el perfil primero)  
		despues devolverlo en el metodo create.  
		En UserLoginAPIView agregar una variable a user, token para que quede algo como user, profile, token (el orden tiene que ser el que devolves en el metodo create), y finalmente lo pasas al diccionario data, podrias hacerlo manualmente o crear un ModelSerializer para el perfil

* **jenapi** (1) [61170](https://platzi.com/comentario/617531/) 
Por lo que entiendo, Los serializers manejan la data, algo como los forms(?, y se la suministran a la base de datos cuando en el model de...

	* **Ivan Trivi√±o** [61170] (1)

		As√≠ es, los serializers te permiten realizar validaciones sobre los datos que llegan a trav√©s de las peticiones HTTP y automatizar el proceso de guardado en la base de datos, pero tambi√©n te permiten darle formato a los datos que quieres entregar al cliente a trav√©s de un response.
		
		En t√©rminos generales te van a funcionar para validar campos y darle formato a los datos de entrada/salida.

* **Juan Fernando Romero Ortega** (0) [909333](https://platzi.com/comentario/909333/) 

	Ayuda por favor!!! tengo problemas a la hora de levantar el docker, siempre falla es el contenedor de django, Estoy en win10, ¬øAlguna sugerencia?

	* **Jorge Enrique Callisaya Sanchez** [909333] (1)

		¬øQue error te sale?

	* **alexgv04** [909333] (2)

		probaste cambiando en el requirements esta dependencia django>=2.0.10 por django==2.0.10?

## 0250. Limitar login a usuarios con cuenta verificada [17202](https://platzi.com/clases/1461-django-avanzado/17202-limitar-login-a-usuarios-con-cuenta-verificada/)

### Descripci√≥n:


### Comentarios:

* **Adri√°n Andr√©s Sosa** (1) [1019252](https://platzi.com/comentario/1019252/) 

	Me hubiera gustado ver como solucionabas el error ‚Äúis_verified‚Äù sin borrar la base de datos y con datos ya cargados en la DB

* **alexgv04** (1) [982474](https://platzi.com/comentario/982474/) 

	hola, saben como solucionar este problema, al consumir los servicios de django con una app en angular  
	code 400, message Bad HTTP/0.9 request type (‚Äô\x16\x03\x01\x01\x07\x01\x00\x01\x03\x03\x03\x10√õe4¬¢\¬£\x00}\x93\x82H\x94\x90\x1a¬™¬∑&"/}\x91\x80√ë¬§¬µ\x9a\x19√ûf‚Äô)  
	You‚Äôre accessing the development server over HTTPS, but it only supports HTTP.

	* **alexgv04** [982474] (1)

		SESSION_COOKIE_SECURE = True  
		CSRF_COOKIE_SECURE = True  
		SECURE_SSL_REDIRECT = True
		
		<https://stackoverflow.com/questions/35536491/error-youre-accessing-the-development-server-over-https-but-it-only-supports/35536980>

* **Jesus Herrera** (1) [594297](https://platzi.com/comentario/594297/) 

	Comprobaci√≥n de validaci√≥n

* **Jesus Herrera** (1) [594161](https://platzi.com/comentario/594161/) 

	 **Modificar un modelos usando docker y django**
	
	* Modificar modelo
	* detener django y postrgres
	```        detener servidor de django
	        docker rm -f cride-platzi_postrgres_1
	        ```
	    
	```
	
	* eliminar volumen de postrges_data
	
	
	``` 
	    docker volumes ls
	    docker volume rm cride-platzi_local_postgres_data
	    
	```
	
	-crear migraciones
	``` 
	    docker-compose run--rm django python manage.py makemigrations
	    
	```
	
	* Iniciar django  
	docker-compose run --rm --service-ports django
	
	

* **Jesus Herrera** (1) [592505](https://platzi.com/comentario/592505/) 

	modificaci√≥n en modelo

* **Jesus Herrera** (1) [592490](https://platzi.com/comentario/592490/) 

	Cambios para verificar si el usuario es verified

* **Jesus Herrera** (1) [592489](https://platzi.com/comentario/592489/) 

	verificaci√≥n

* **Jesus Herrera** (1) [592050](https://platzi.com/comentario/592050/) 

	Iniciar de nuevo contenedores (TODO EL PROCESO)

## 0260. Configurar env√≠o de email [17203](https://platzi.com/clases/1461-django-avanzado/17203-configurar-envio-de-email/)

### Descripci√≥n:


### Links:

* [GitHub - anymail/django-anymail: Django email backends and webhooks for Amazon SES, Mailgun, Mailjet, Postmark, SendGrid, SendinBlue, SparkPost and more](https://github.com/anymail/django-anymail)

* [Sending email | Django documentation | Django](https://docs.djangoproject.com/en/2.1/topics/email/)

* [Templates | Django documentation | Django](https://docs.djangoproject.com/en/2.1/topics/templates/#django.template.loader.render_to_string)

* [GitHub - jpadilla/pyjwt: JSON Web Token implementation in Python](https://github.com/jpadilla/pyjwt)

* [Welcome to PyJWT ‚Äî PyJWT 1.7.1 documentation](https://pyjwt.readthedocs.io/en/latest/)

### Comentarios:

* **esdraspavon** (9) [520364](https://platzi.com/comentario/520364/) 

	 **account_verification.html**
	``` 
	    <p>Welcome @{{ user.username }}!</p>
	    
	    <p>
	        Before you start using <b>Comparte Ride</b> we need you to do one last thing.
	        Please visit the following <a href="">link</a> and enter this code
	    </p>
	    
	    <p style="text-align:center">
	        <code style="text-align:center">
	            {{ token }}
	        </code>
	    </p>
	    
	```

* **alexgv04** (1) [990233](https://platzi.com/comentario/990233/) 

	como les parece SES de aws para el envi√≥ de correos alguien lo ha usado?

* **Jorge Enrique Callisaya Sanchez** (1) [76885](https://platzi.com/comentario/894795/) 
Hola una pregunta cuando me creo un nuevo usuario,todo sale bien solo que el cuando muestra el contenido del html del email el valor de *...

	* **aparicio_juan** [76885] (1)

		Hola prueba agregar en el head de tu html este meta, tu problema es codificaci√≥n.
		``` 
		    <metacharset="UTF-8">
		    
		```
		
		Mira el Content-Trandfer-Encoding te lo esta haciendo en us-ascii y no permite tildes ni √±.

* **jenapi** (1) [61417](https://platzi.com/comentario/621354/) 
No me sale ninguno de los archivos que usan en esta clase, no se si es el curso o es la plataforma.Soy solo yo o a alguien m√°s le pasa es...

* **Luis Felipe Andr√©s Barraza Vega** (0) [761940](https://platzi.com/comentario/761940/) 

	El token me sale como ‚ÄúNone‚Äù
	
	[01/Oct/2019 17:40:48] ‚ÄúPOST /users/signup/ HTTP/1.1‚Äù 500 16623  
	Content-Type: multipart/alternative;  
	boundary="=============6056390498993981306"  
	MIME-Version: 1.0  
	Subject: Welcome @feli! Verify your account to start using Comparte Ride  
	From: Comparte Ride <[noreply@comparteride.com](mailto:noreply@comparteride.com)  
	To: [f@bcoder.cl](mailto:f@bcoder.cl)  
	Date: Tue, 01 Oct 2019 17:41:32 -0000  
	Message-ID: [156995169208.72.2310036084690690173@771822879a7b](mailto:156995169208.72.2310036084690690173@771822879a7b)
	
	‚Äì=============6056390498993981306  
	Content-Type: text/plain; charset="utf-8"  
	MIME-Version: 1.0  
	Content-Transfer-Encoding: 7bit
	
	<p>Welcome @feli!</p>p>
	
	<p>  
	Before your start using <b>Comparte Ride</b> we need you to do one last thing.  
	Please visit the following <a href="">link</a> and enter this code  
	</p>
	
	<p style=‚Äútext-align:center‚Äù>  
	<code style=‚Äútext-align:center‚Äù>  
	None  
	</code>  
	</p>  
	‚Äì=============6056390498993981306  
	Content-Type: text/html; charset="utf-8"  
	MIME-Version: 1.0  
	Content-Transfer-Encoding: 7bit
	
	<p>Welcome @feli!</p>p>
	
	<p>  
	Before your start using <b>Comparte Ride</b> we need you to do one last thing.  
	Please visit the following <a href="">link</a> and enter this code  
	</p>
	
	<p style=‚Äútext-align:center‚Äù>  
	<code style=‚Äútext-align:center‚Äù>  
	None  
	</code>  
	</p>  
	‚Äì=============6056390498993981306‚Äì

	* **Manuel Alejandro Aguilar T√©llez Gir√≥n** [761940] (1)

		Hola. ¬øPuedes proporcionarnos las dos funciones que Pablo crea en la clase para ayudarte?, por favor üòÑ

## 0270. Instalar PyJWT y generar tokens [17206](https://platzi.com/clases/1461-django-avanzado/17206-instalar-pyjwt-y-generar-tokens/)

### Descripci√≥n:


### Links:

* [GitHub - jpadilla/pyjwt: JSON Web Token implementation in Python](https://github.com/jpadilla/pyjwt)

* [Welcome to PyJWT ‚Äî PyJWT 1.7.1 documentation](https://pyjwt.readthedocs.io/en/latest/index.html)

### Comentarios:

* **Jesus Herrera** (1) [603100](https://platzi.com/comentario/603100/) 

	prueba de creacion de token

* **Jesus Herrera** (1) [603091](https://platzi.com/comentario/603091/) 

	Crear funci√≥n para generar token

## 0280. Verificar cuenta usando JWT [17205](https://platzi.com/clases/1461-django-avanzado/17205-verificar-cuenta-usando-jwt/)

### Descripci√≥n:


### Links:

* [Serializers - Django REST framework](https://www.django-rest-framework.org/api-guide/serializers/#saving-instances)

* [pyjwt/exceptions.py at master ¬∑ jpadilla/pyjwt ¬∑ GitHub](https://github.com/jpadilla/pyjwt/blob/master/jwt/exceptions.py)

### Comentarios:

* **luispillaga** (1) [1044334](https://platzi.com/comentario/1044334/) 

	Que tal quiz√°s le sirva a alguien.  
	Al hacer el decode en el serializer obtenia un error tenia esto:  
	`payload = jwt.decode(data, .......)`y tuve que hacer  
	`payload = jwt.decode(data.get('token'), ...`  
	No estoy seguro del porque a Pablo si le funciona alguien m√°s tuvo este error?

* **alexgv04** (1) [987664](https://platzi.com/comentario/987664/) 

	se puede usar el jwtoken para el inicio de sesi√≥n?

* **Jes√∫s Andr√©s Miranda Roa** (1) [983029](https://platzi.com/comentario/983029/) 

	con docker, hay alguna manera de enlazar pgadmin4 con el ?

* **operez12** (1) [759979](https://platzi.com/comentario/759979/) 

	En el ejemplo se utiliz√≥ el m√©todo POST y se env√≠a el token generado al endpoint en el body de la petici√≥n, este par√°metro deber√≠a llegar por petici√≥n GET al endpoint para que el usuario pueda activar su cuenta al hacer clic no?

	* **David Granados** [759979] (1)

		Por definici√≥n REST una petici√≥n GET no deber√≠a modificar base de datos, y en este caso la verificaci√≥n de la cuenta si lo hace.

* **morwen1** (1) [693729](https://platzi.com/comentario/693729/) 
Nadie sabe c√≥mo implementar JWT para un login??

	* **Kevin Javier Morales** [693729] (2)

		Tal vez este [art√≠culo](https://simpleisbetterthancomplex.com/tutorial/2018/12/19/how-to-use-jwt-authentication-with-django-rest-framework.html) te pueda ayudar a implementarlo para autenticaci√≥n

* **Andres Arias** (1) [622151](https://platzi.com/comentario/622151/) 

	Buenas, tengo una duda sobre el metodo validate_token. S√© que se llama cuando llamamos serializer.is_valid() en la vista AccountVerificationAPIView, pero porque pasa esto? no veo que la clase Serializer tenga una metodo validate_token(). O es que is_valid() llama a todos los metodos que se llamen validate_NOMBRE_DE_CAMPO (en este caso token)

	* **Andres Arias** [622151] (3)

		Ya encontr√© la respuesta es Field-level validation en <https://www.django-rest-framework.org/api-guide/serializers/>

* **Jesus Herrera** (1) [604194](https://platzi.com/comentario/604194/) 

	Verificaci√≥n

* **Jesus Herrera** (1) [604151](https://platzi.com/comentario/604151/) 

	Creaci√≥n de vista para verificar JWT

## 0290. Actualizar modelo de circle (membership) [17207](https://platzi.com/clases/1461-django-avanzado/17207-actualizar-modelo-de-circle-membership/)

### Descripci√≥n:


### Links:

* [Models | Django documentation | Django](https://docs.djangoproject.com/en/2.1/topics/db/models/#extra-fields-on-many-to-many-relationships)

### Comentarios:

* **fabianfalon** (5) [504733](https://platzi.com/comentario/504733/) 

	En el model Membership, si ya tenemos el campo user para que agregamos el profile? podemos acceder al profile como user.profile en caso de necesitar data del profile no?

	* **aviloncho** [504733] (4)

		Tengo la misma duda. Y estoy de acuerdo contigo. Se podr√≠a acceder al _Profile_ a trav√©s del _User_.  
		¬øAlguien que nos pueda sacar de la duda?

	* **fabianfalon** [504733] (2)

		@aviloncho a lo mejor se hizo por cuestiones practicas/pedagogicas

	* **Hern√°n Chilabert** [504733] (2)

		Justamente para no tener que ir a buscarlo cada vez que lo necesitamos.  
		En cada `user.profile` que se hace, es un hit m√°s innecesario a la base. En proyectos de gran escala, esto puede afectar.

	* **aviloncho** [504733] (1)

		@herchila tienes razon. No lo habia visto desde esa perspectiva. Gracias por tu aporte.

* **jenapi** (2) [622690](https://platzi.com/comentario/622690/) 

	Para qu√© sirve el fereignKey en el model??

	* **Kevin Javier Morales** [622690] (1)

		Esto es para crear relaciones entre columnas de base de datos. Puedes ver la [documentaci√≥n](https://docs.djangoproject.com/en/2.2/ref/models/fields/#foreignkey) para entender m√°s.

* **Adrian Gonz√°lez** (2) [56640](https://platzi.com/comentario/555137/) 
Cu√°l es la diferencia entre poner ‚Äòapp.model‚Äô y solo el nombre del modelo en el campo Foreignkey o ManyToManyField?

	* **Andres Rodriguez** [56640] (5)

		Cuando pasas una clase de python a la funci√≥n ForeignKey o ManyToManyField, Django debe **resolver** la clase que pasas por parametro, lo que puede llevar a un problema de **dependencia c√≠clica** si tus modelos dependen uno de otro de forma c√≠clica. Esto es un problema que se puede solucionar deshaciendo estas dependencias c√≠clicas, modelandolas de una forma diferente.
		
		Muchas veces, la naturaleza de tus modelos es as√≠, c√≠clica, y no puedes evitarlo. Es en ese caso cuando usas una _lazy-relationship_ del tipo ‚Äòapp.model‚Äô. Si te fijas, est√°s pasando un string de python, y no una clase, y por tanto Django no necesita resolver ning√∫n modelo para terminar de resolver otro, eliminando el problema de la dependencia c√≠clica.

* **fabianfalon** (1) [52407](https://platzi.com/comentario/504733/) 
En el model Membership, si ya tenemos el campo user para que agregamos el profile? podemos acceder al profile como user.profile en caso d...

	* **aviloncho** [52407] (4)

		Tengo la misma duda. Y estoy de acuerdo contigo. Se podr√≠a acceder al _Profile_ a trav√©s del _User_.  
		¬øAlguien que nos pueda sacar de la duda?

* **Adrian Gonz√°lez** (0) [555137](https://platzi.com/comentario/555137/) 

	Cu√°l es la diferencia entre poner ‚Äòapp.model‚Äô y solo el nombre del modelo en el campo Foreignkey o ManyToManyField?

	* **Andres Rodriguez** [555137] (5)

		Cuando pasas una clase de python a la funci√≥n ForeignKey o ManyToManyField, Django debe **resolver** la clase que pasas por parametro, lo que puede llevar a un problema de **dependencia c√≠clica** si tus modelos dependen uno de otro de forma c√≠clica. Esto es un problema que se puede solucionar deshaciendo estas dependencias c√≠clicas, modelandolas de una forma diferente.
		
		Muchas veces, la naturaleza de tus modelos es as√≠, c√≠clica, y no puedes evitarlo. Es en ese caso cuando usas una _lazy-relationship_ del tipo ‚Äòapp.model‚Äô. Si te fijas, est√°s pasando un string de python, y no una clase, y por tanto Django no necesita resolver ning√∫n modelo para terminar de resolver otro, eliminando el problema de la dependencia c√≠clica.

	* **walis85300 (Platzi)** [555137] (1)

		Cuando pones como `string` la clase a la que hace referencia te evitas el problema de dependencia c√≠clica.

## 0300. Crear CircleViewSet [17204](https://platzi.com/clases/1461-django-avanzado/17204-crear-circleviewset/)

### Descripci√≥n:


### Links:

* [Viewsets - Django REST framework](https://www.django-rest-framework.org/api-guide/viewsets/)

* [Generic views - Django REST framework](https://www.django-rest-framework.org/api-guide/generic-views/)

* [GitHub - encode/django-rest-framework: Web APIs for Django. ??](https://github.com/encode/django-rest-framework)

### Comentarios:

* **Jesus Herrera** (1) [614639](https://platzi.com/comentario/614639/) 

	modificar vistas

* **Jesus Herrera** (1) [614633](https://platzi.com/comentario/614633/) 

	Obtener datos de un circulo

* **Jesus Herrera** (1) [613762](https://platzi.com/comentario/613762/) 

	revisi√≥n de c√≥digo

* **Jesus Herrera** (1) [613651](https://platzi.com/comentario/613651/) 

	crear Urls

* **Jesus Herrera** (1) [613550](https://platzi.com/comentario/613550/) 

	Creaci√≥n de serializer

* **Jesus Herrera** (1) [613455](https://platzi.com/comentario/613455/) 

	Codificaci√≥n de views con Class Base View

## 0310. A√±adiendo autorizaci√≥n y paginaci√≥n [17201](https://platzi.com/clases/1461-django-avanzado/17201-anadiendo-autorizacion-y-paginacion/)

### Descripci√≥n:


### Links:

* [Pagination - Django REST framework](https://www.django-rest-framework.org/api-guide/pagination/#limitoffsetpagination)

* [Django REST Framework 3.9 -- Classy DRF](http://www.cdrf.co/)

* [Authentication - Django REST framework](https://www.django-rest-framework.org/api-guide/authentication/)

### Comentarios:

* **aleducode** (2) [591566](https://platzi.com/comentario/591566/) 

	un tip que nos puede ahorrar trabajo, en la vista de login de postman ponemos en el apartado ‚ÄòTEST‚Äô el siguiente c√≥digo para capturar el token y reflejarlo en el resto del entorno.
	``` 
	    vardata = JSON.parse(responseBody);
	    postman.setEnvironmentVariable("ID_TOKEN", data.access_token);```
	    
	```

	* **Andres Gallardo** [591566] (2)

		Excelente !!

* **Luis √Ångel Cuandon Salazar** (1) [971409](https://platzi.com/comentario/971409/) 

	Tambi√©n pueden usar insomnia en lugar de postman, esta m√°s joven el proyecto pero igual muy bueno  
	<https://insomnia.rest/>

* **Jorge Enrique Callisaya Sanchez** (1) [903602](https://platzi.com/comentario/903602/) 

	Url de descarga de Postman [](https://www.getpostman.com/downloads/)

	* **V√≠ctor Daniel Cardozo Fern√°ndez** [903602] (1)

		<http://getpostman.com/>

* **aviloncho** (1) [674448](https://platzi.com/comentario/674448/) 

	Paginaci√≥n

* **Jorge Enrique Callisaya Sanchez** (1) [77408](https://platzi.com/comentario/903770/) 
Al usar ViewSets al momento de crear un circulo.¬øComo sabe que campos son requeridos?¬øEn que momento definimos eso?

	* **David Granados** [77408] (1)

		A trav√©s del CircleModelSerializer que a su vez lo toma del modelo Circle

## 0320. Creaci√≥n de circulos [17171](https://platzi.com/clases/1461-django-avanzado/17171-creacion-de-circulos/)

### Descripci√≥n:


### Links:

* [CreateModelMixin -- Classy DRF](http://www.cdrf.co/3.9/rest_framework.mixins/CreateModelMixin.html)

### Comentarios:

* **Francisco Ezequiel Ba√±os Ramirez** (3) [546481](https://platzi.com/comentario/546481/) 

	Y que pasa si por ejemplo queremos solo cambiar el limite de miembros? Por ejemplo con el verbo PATCH pues que nos da error. Para eso se me ocurrio poner una sencilla verificacion antes de validar todo esto.
	
	Les dejo la funcion completa aqui
	``` 
	      def validate(self, data):
	            """Verifies congruence between is_limited and members_limit fields."""
	    
	            method = self.context['request'].method
	            
	            ifmethod == 'POST':
	                members_limit = data.get('members_limit', None)
	                is_limited = data.get('is_limited', False)
	    
	                ifbool(members_limit) ^ is_limited:
	                    raise serializers.ValidationError('If there is members_limit or is_limited both need to exist.')
	    
	            return data
	    
	```

* **alexgv04** (1) [1016057](https://platzi.com/comentario/1016057/) 

	hola, quer√≠a hacer debug a el c√≥digo desde pycharm a la parte de la clase que hereda modelViewset, no me funcionaba y me pens√© que hab√≠a des configurado algo, pero buscando esto es normal <https://stackoverflow.com/questions/41637025/pycharm-debug-django-rest-viewsets>

* **Pablo Didone** (1) [835553](https://platzi.com/comentario/835553/) 

	Hola a todos, cuando corro [manage.py](http://manage.py) migrate obtengo este error:
	
	**django.db.utils.ProgrammingError: relation ‚Äúcircles_membership‚Äù does not exist**
	
	No puedo encontrar la soluci√≥n. A alguien le pas√≥?
	
	Gracias

	* **aparicio_juan** [835553] (1)

		Hola, creo que est√° bastante claro el mensaje del error, si quieres mas ayuda deber√≠as de poner tus modelos as√≠ podemos ver que esta mal o falta. saludos

	* **alexhernandez4675** [835553] (1)

		Ami me sale lo mismo, y no encuentro el fallo

	* **Erick Herrera** [835553] (1)

		Parece que me apareci√≥ el mismo error antes, y no encontraba el error, y era porque al crear el modelo, borr√© las migraciones, pero no la base de datos. As√≠ que borre la base de datos tambi√©n, hice las migraciones y me funcion√≥. Ojal√° les sirva  
		Un abrazo

* **Agusitn Machiavello** (1) [583947](https://platzi.com/comentario/583947/) 

	¬øEstoy quedando bobo o el video est√° repetido con el anterior? ¬øAcaso es un bug?

	* **Diego Alexander Forero Higuera (Platzi)** [583947] (2)

		Hola, acabo de revisar y las clases son diferentes, prueba refrescando el navegador.

	* **Agusitn Machiavello** [583947] (1)

		Ya me sale el oto video. Aunque ya hab√≠a probado eso, estoy casi seguro que es un bug aunque no sucede siempre. Gracias

	* **AngelQS** [583947] (1)

		Me pasa lo mismo hasta el d√≠a de hoy, al estar retrocediendo o avanzando entre v√≠deos, se reproduce uno con el nombre de otro v√≠deo.

	* **Agusitn Machiavello** [583947] (1)

		Me alegro de saber que no soy el √∫nico! Lo que me ha funcionado es cerrar la pesta√±a y volver a entrar, pero claramente es molesto‚Ä¶

## 0330. Update de c√≠rculo, custom permissions y DRF Mixins [17172](https://platzi.com/clases/1461-django-avanzado/17172-update-de-circulo-custom-permissions-y-drf-mixins/)

### Descripci√≥n:


### Links:

* [Viewsets - Django REST framework](https://www.django-rest-framework.org/api-guide/viewsets/#introspecting-viewset-actions)

* [Permissions - Django REST framework](https://www.django-rest-framework.org/api-guide/permissions/)

### Comentarios:

* **fabianfalon** (9) [579492](https://platzi.com/comentario/579492/) 

	Tambien podriamos agregar lo siguiente al viewset para no permitir el metodo DELETE
	``` 
	    from rest_framework.exceptions import MethodNotAllowed
	    ...
	    classCircleViewSet(viewsets.ModelViewSet):
	        ....
	        defdestroy(self, request, pk=None):
	            raise MethodNotAllowed('DELETE')
	    
	    
	```

	* **Manuel Alejandro Aguilar T√©llez Gir√≥n** [579492] (0)

		Incre√≠ble. Gracias por tu aporte

* **Eric Eduardo Manzano Leal** (1) [531772](https://platzi.com/comentario/531772/) 

	estos videos NO son 1080, me lastima y cansa mucho la vista üò°

	* **Diego Alexander Forero Higuera (Platzi)** [531772] (4)

		Hola, en el server A y server B tienes calidad 1080p, lo puedes seleccionar en icono del engrane en el reproductor de video.
		
		![Screenshot_20190311_063159.png](https://static.platzi.com/media/user_upload/Screenshot_20190311_063159-29cf0992-b975-47e8-a6ed-419479253454.jpg)

* **jenapi** (1) [61680](https://platzi.com/comentario/625765/) 
Por qu√© creamos la clase IsCircleAdmin en el init.py y no en un archivo que tenga el nombre IsCircleAdmin y lo importamo...

	* **aleducode** [61680] (1)

		la Class IsCircleAdmin est√° y deber√≠a estar dentro del archivo [permissions.py](http://permissions.py) de la app. fu√© un error que luego se corrigi√≥.

## 0340. Migraci√≥n de vistas de usuarios a ViewSets [17173](https://platzi.com/clases/1461-django-avanzado/17173-migracion-de-vistas-de-usuarios-a-viewsets/)

### Descripci√≥n:


### Links:

* [Viewsets - Django REST framework](https://www.django-rest-framework.org/api-guide/viewsets/)

### Comentarios:

* **jenapi** (3) [627557](https://platzi.com/comentario/627557/) 

	Hey no hay un logout para los users en este curso?? porque est√° signup, login, verification pero faltarian listar y logout algo asi como el CRUD

	* **David Granados** [627557] (1)

		No hay un ‚Äúlogout‚Äù porque es un REST API y por definici√≥n cada petici√≥n es ‚Äústateless‚Äù, es decir, no guardar el estado de una petici√≥n anterior y son totalmente independientes, no hay sesiones iniciadas por lo que no hay sesiones que terminar con un ‚Äúlogout‚Äù

* **Miguel Herreros Cejas** (1) [518869](https://platzi.com/comentario/518869/) 

	No he entendido el proceso de subir la foto.  
	Si yo tengo un formulario, por ejemplo en Vue, o Postman, con un campo field. ¬øDonde se guarda esa foto f√≠sicamente?  
	¬øLe env√≠o esa foto al Backend y el backend guarda la foto en sus carpetas y la direcci√≥n en la base de datos?

	* **esdraspavon** [518869] (3)

		Correcto, en este caso funcionar as√≠, tambi√©n puedes guardar la foto en alg√∫n otro servidor como aws

	* **Rafael Mendoza Gui√±ez** [518869] (2)

		Aunque en este caso a la mayor√≠a de APIs se les env√≠a la imagen en base64 como texto plano y despu√©s en el servidor drf hace el decode

## 0350. Detalle de usuario [17176](https://platzi.com/clases/1461-django-avanzado/17176-detalle-de-usuario/)

### Descripci√≥n:


### Links:

* [Permissions - Django REST framework](https://www.django-rest-framework.org/api-guide/permissions/)

* [Model field reference | Django documentation | Django](https://docs.djangoproject.com/en/2.1/ref/models/fields/#django.db.models.ManyToManyField.through_fields)

### Comentarios:

* **jenapi** (4) [627689](https://platzi.com/comentario/627689/) 

	Me parece un poco il√≥gico que solo el user vea sus datos, porque si nos dadentramos en el app que tenemos es mejor que todos vean el user pero que solo el lo pueda modificar, no tiene sentido que si voy a llevar en el mismo auto a alguien no sepa su reputaci√≥n. No se si soy solo yo.

	* **Andres Gallardo** [627689] (2)

		Coincido con vos ! Pero bueno, esto ya pasa a ser parte de las relgas de negocio de la aplicaci√≥n

	* **Mario Emiliano Gordon Pico** [627689] (1)

		es cierto, de nada sirve crear un perfil para verlo yo mismo. Todo dependera del modelo de negocio que uno decida tener

	* **alexhernandez4675** [627689] (1)

		Lo bueno es que cambiarlo no es muy dificil, pero ese permiso nos sirve para ponerlo por si queremos que haya un patch en los usuarios üòÉ

	* **Manuel Alejandro Aguilar T√©llez Gir√≥n** [627689] (1)

		Pens√© lo mismo, pero creo que lo hace para mostrar otro ejemplo de c√≥mo crear tus propios permisos e implementarlos. Concuerdo con Alex, cambiarlo no es muy dif√≠cil, todo depender√° de c√≥mo sea la l√≥gica de tu negocio. üòÑ

* **Onil Calcines** (1) [598476](https://platzi.com/comentario/598476/) 

	Metodo Retrieve para obtener la data basica del user y como extra data los circulos a que dicho user es miembro

* **Miguel Angel Bernal Colonia** (1) [78052](https://platzi.com/comentario/914383/) 
Como se puede implementar paginaci√≥n sobre los c√≠rculos ?

## 0360. Update profile data [17175](https://platzi.com/clases/1461-django-avanzado/17175-update-profile-data/)

### Descripci√≥n:


### Comentarios:

* **Manuel Pita** (2) [522905](https://platzi.com/comentario/522905/) 

	En en el serializes UserModelSerializer, se esta usando para mostrar la los datos del profile del user.
	
	Otra opciones es agregar en el class meta la variable depth = 1
	``` 
	    classUserModelSerializer(serializers.ModelSerializer):
	        """User model serializer."""
	    
	        classMeta:
	            """Meta class"""
	    
	            model = User
	            fields = (
	                'username',
	                'first_name',
	                'last_name',
	                'email',
	                'phone_number',
	                'profile'
	            )
	    	read_only_fields = ('profile',)
	    
	            depth = 1
	    
	```
	
	Pero este mostrar√≠a todo los datos de profile .

* **Manuel Alejandro Aguilar T√©llez Gir√≥n** (1) [83686](https://platzi.com/comentario/1032287/) 
Bueno, y si yo quiero manejar un Update de User y Profile en un mismo form en el template, ¬øC√≥mo ser√≠a?

## 0370. List members - Recursos anidado [17183](https://platzi.com/clases/1461-django-avanzado/17183-list-members-recursos-anidado/)

### Descripci√≥n:


### Comentarios:

* **aleducode** (4) [606825](https://platzi.com/comentario/606825/) 

	durante la declaraci√≥n de URL, hubo un typo en la expresi√≥n regular por lo tanto no va funcionar con slug_name que tengan n√∫meros, ac√° dejo la correci√≥n:
	``` 
	    router.register(r'circles/(?P<slug_name>[a-zA-Z0-9_-]+)/members',
	                    membership_views.MembershipViewSet, base_name='membership')```
	    
	```

* **alello90** (1) [686642](https://platzi.com/comentario/686642/) 

	En el minuto 11:50 no se ve que es lo que esta haciendo, pueden editar esa parte por favor. Gracias.

	* **adrianrbp** [686642] (2)

		est√° agregando el UserModelSerializer para poder tener los datos del usuario y no solo el id.
		``` 
		    user= UserModelSerializer(read_only=True)
		    
		```
		
		parecido a lo hecho con ‚Äúprofile‚Äù en UserModelSerializer, donde en la respuesta se devuelve los datos del perfil y no solo el id.

* **JavierPoduje** (1) [579534](https://platzi.com/comentario/579534/) 

	Creo que no est√° el video en donde se crea el ProfileModelSerializers, por lo que al realizar la petici√≥n a /circles/platzi-chile/members/ el campo ‚Äúprofile‚Äù no aparece.
	
	Si te pas√≥ lo anterior, como a m√≠, realiza los siguientes pasos:
	
	Primero, agrega el campo ‚Äúprofile‚Äù en par√°metros de fields en la clase Meta del UserModelSerializer. Adem√°s, debes importar ‚ÄúProfileModelSerializer‚Äù y mencionar que profile corresponde a su serializer:
	``` 
	    from cride.users.models import User, Profile
	    
	    # Serializers
	    from cride.users.serializers.profiles import ProfileModelSerializer
	    
	    # Utilities
	    from datetime import timedelta
	    import jwt
	    
	    
	    classUserModelSerializer(serializers.ModelSerializer):
	        """User model Serializer."""
	    
	        profile = ProfileModelSerializer(read_only=True)
	    
	        classMeta:
	            model = User
	            fields = (
	                'username',
	                'first_name',
	                'last_name',
	                'email',
	                'phone_number',
	                'profile'
	            )
	    
	```
	
	Luego, en la carpeta cride.users.serializers crea el archivo ‚Äú[profiles.py](http://profiles.py)‚Äù agregando lo siguiente:
	``` 
	    """Profile serializer."""
	    
	    # Django REST Framework
	    from rest_framework import serializers
	    
	    # Models
	    from cride.users.models import Profile
	    
	    
	    classProfileModelSerializer(serializers.ModelSerializer):
	        """Profile model serializer."""
	    
	        classMeta:
	            """Meta class."""
	    
	            model = Profile
	            fields = (
	                'picture',
	                'biography',
	                'rides_taken',
	                'rides_offered',
	                'reputation'
	            )
	            read_only_fields = (
	                'rides_taken',
	                'rides_offered',
	                'reputation'
	            )
	    
	```

* **miguelmesa9480111** (1) [75687](https://platzi.com/comentario/874019/) 
No entiendo bien porque en el metodo dispatch() retorna: super(MembershipViewSet, self).dispatch(request, *args, **kwargs)

	* **alexis** [75687] (1)

		Tiene que retornar super ya que super() lo que hace es invocar un m√©todo o un atributo de la clase padre. Para que comprendas como funciona tienes que estudiar m√°s sobre python por todo el c√≥digo que haces en django es super sencillo y con mucho sentido si es que conoces python.

## 0380. Retrieve destroy member [17178](https://platzi.com/clases/1461-django-avanzado/17178-retrieve-destroy-member/)

### Descripci√≥n:


### Links:

* [DestroyModelMixin -- Classy DRF](http://www.cdrf.co/3.9/rest_framework.mixins/DestroyModelMixin.html)

### Comentarios:

* **FernanddoSalas** (6) [552014](https://platzi.com/comentario/552014/) 

	 **Todos los miembros activos de un circulo pueden eliminar a cualquier usuario del mismo sin ser admin.**  
	Podemos solucionarlo a√±adiendo un permiso extra para la accion **destroy** como:
	``` 
	    classIsAdminOrMembershipOwner(BasePermission):
	        """
	        Allow accese only to (Circle's admin) or users
	        that are owner of the membership (object).
	        """
	    
	        defhas_permission(self, request, view):
	            membership = view.get_object()
	            if membership.user == request.user:
	                returnTrue
	    
	            try:
	                Membership.objects.get(
	                    circle=view.circle,
	                    user=request.user,
	                    is_active=True,
	                    is_admin=True
	                )
	            except Membership.DoesNotExist:
	                returnFalse
	            returnTrue
	    
	```
	
	Solo permite al usuario eliminarse a si mismo o que los admin puedan eliminar a cualquiera.

## 0390. Modelo de invitaciones y manager [17179](https://platzi.com/clases/1461-django-avanzado/17179-modelo-de-invitaciones-y-manager/)

### Descripci√≥n:


### Links:

* [Managers | Django documentation | Django](https://docs.djangoproject.com/en/2.1/topics/db/managers/)

### Comentarios:

* **Kevin Lozoya Giner** (2) [501796](https://platzi.com/comentario/501796/) 

	  1. ¬øC√∫ando hay que usar el par√°metro ‚Äòrelated_name‚Äô de un model field?
	
	  2. Yo lo puse para el reto en ‚Äòused_by‚Äô. ¬øQu√© diferencia hay entre ponerlo en un sitio u otro?
	
	
	

	* **Pablo Trinidad** [501796] (1)

		Saludos!
		
		<https://docs.djangoproject.com/en/2.1/ref/models/fields/#django.db.models.ForeignKey.related_name>

* **jenapi** (1) [638296](https://platzi.com/comentario/638296/) 

	Hey yo se que el source code se puede encontrar en <https://github.com/pablotrinidad/cride-platzi/>  
	Pero me parece que ser√≠a bueno tener el c√≥digo en la secci√≥n de archivos y enlaces, o solo los archivos que fueron modificados en la clase.

	* **adrianrbp** [638296] (1)

		creo que en algunas clases si estaba.  
		pero puedes ver los branches en el repo:  
		<https://github.com/pablotrinidad/cride-platzi/tree/C38> <\- la clase anterior  
		<https://github.com/pablotrinidad/cride-platzi/tree/C39> <\- esta clase

	* **adrianrbp** [638296] (1)

		estos son los branches, los numeros son distintos üòÑ :  
		<https://github.com/pablotrinidad/cride-platzi/tree/29/Retrieve-destroy-member> <\- la clase anterior  
		<https://github.com/pablotrinidad/cride-platzi/tree/30/Invitation-manager> <\- esta clase

* **Adolfo M.Valdivieso** (1) [587273](https://platzi.com/comentario/587273/) 

	No ser√≠a mucho m√°s sencillo crear una propiedad del modelo Invitation que devuelva una encriptaci√≥n del primary_key de esa invitaci√≥n. Y una funci√≥n para hacer la decriptaci√≥n?

* **Adolfo M.Valdivieso** (1) [59125](https://platzi.com/comentario/587273/) 
No ser√≠a mucho m√°s sencillo crear una propiedad del modelo Invitation que devuelva una encriptaci√≥n del primary_key de esa invitaci√≥n. Y ...

* **Kevin Lozoya Giner** (1) [52172](https://platzi.com/comentario/501796/) 
¬øC√∫ando hay que usar el par√°metro ‚Äòrelated_name‚Äô de un model field? Yo lo puse para el reto en ‚Äòused_by‚Äô. ¬øQu√© difer...

	* **Pablo Trinidad** [52172] (1)

		Saludos!
		
		<https://docs.djangoproject.com/en/2.1/ref/models/fields/#django.db.models.ForeignKey.related_name>

## 0400. Obtener invitaciones de un miembro [17186](https://platzi.com/clases/1461-django-avanzado/17186-obtener-invitaciones-de-un-miembro/)

### Descripci√≥n:


### Comentarios:

* **Carlos Oliveros** (1) [1054052](https://platzi.com/comentario/1054052/) 

	Podemos evitar linea `invitations = [x[0] for x in unused_invitations]`, si agregamos el parametro `flat=True` al query anterior, quedando `.values_list('code', flat=True)`

* **Minrock** (1) [585638](https://platzi.com/comentario/585638/) 

	En `diff = member.remaining_invitations - len(unused_invitations)` ¬øno ser√≠a mejor utilizar el m√©todo `.count`?, a pesar que utilicemos el m√©todo `values_list` su resultado sigue siendo un queryset y un `count` siempre es mejor que utilizar len sobre un queryset.

	* **Diego Alexander Forero Higuera (Platzi)** [585638] (2)

		Hola, las dos formas son validas, realmente un queryset es un listado de elementos, en este caso lo hizo as√≠ porque necesita los ids de las invitaciones, otra forma de hacerlo puede ser
		``` 
		    diff = member.remaining_invitations - unused_invitations.count()
		    
		```

	* **jenapi** [585638] (1)

		Saludos.  
		Dos cosas:  
		1 La programacion es algo totalmente personal y es que muchas veces la forma en la que una persona resuelve un problema no es la √∫nica  
		2 en este caso quieres ver cuales invitaciones no has usado por lo que es bueno hacerlo de la manera que lo hizo el instructor

## 0410. Unirse a grupo [17185](https://platzi.com/clases/1461-django-avanzado/17185-unirse-a-grupo/)

### Descripci√≥n:


### Comentarios:

* **Jorge Enrique Callisaya Sanchez** (1) [78836](https://platzi.com/comentario/928358/) 
Cuando le asigna a user=data ¬øNo le esta enviando un diccionario con los valores de invitation_code y user?¬øNo deber√≠amos colocar 

	* **David Alejandro Abreu Abreu** [78836] (1)

		En realidad le estar√≠a enviando una instancia del usuario que est√° en el request, ya que us√≥ el _CurrentUserDefault()_ que es lo que necesita el object manager para filtrar.

## 0420. Filtrado [17403](https://platzi.com/clases/1461-django-avanzado/17403-filtrado/)

### Descripci√≥n:


### Links:

* [django-filter ‚Äî django-filter 2.1.0 documentation](https://django-filter.readthedocs.io/en/master/)

* [Filtering - Django REST framework](https://www.django-rest-framework.org/api-guide/filtering/#searchfilter)

### Comentarios:

* **jenapi** (2) [640143](https://platzi.com/comentario/640143/) 

	Aqui dejo una duda que me sali√≥:  
	¬øEl API que estamos haciendo devuelve los datos en formato JSON? osea eso creo yo pero quiero corrovorar.  
	ü•¥

	* **Diego Alexander Forero Higuera (Platzi)** [640143] (1)

		Si las respuestas son en formato json.

	* **jenapi** [640143] (1)

		Entonces con los datos que nos devuelve nuestra api podr√≠amos crear un frontend con react.js???

	* **Diego Alexander Forero Higuera (Platzi)** [640143] (4)

		@jenapi claro, ese es el objetivo esto se conoce como BFF (Backend For Frontend) tu backend solo se encarga de responder json en los llamados y la app de Frontend es la encargada de las rutas y mostrar la informaci√≥n.

	* **jenapi** [640143] (1)

		vale gracias por aclarar mi duda. üëå

	* **Manuel Alejandro Aguilar T√©llez Gir√≥n** [640143] (0)

		Ok, acabo de tener una epifan√≠a. üòÇ

* **raga** (1) [1053798](https://platzi.com/comentario/1053798/) 

	 **Implementar Aplicaci√≥n de rides**
	
	**Modelo Rides**
	
	* Quien ofrece el ride
	* En que circulo lo ofrece
	* Lugar de salida
	* Horario de salida
	* Lugar de llegada
	* Hora de llegada
	* Asientos disponibles
	* Comentarios extra
	* Posibilidad de guardar los pasajeros que se van sumando
	* Activar y desactivar ride
	
	

* **raga** (1) [1053788](https://platzi.com/comentario/1053788/) 

	Genial la clase!
	
	Estar√≠a bueno que las tareas queden en la descripci√≥n.  
	Eso facilitar√≠a la hoja de ruta a la hora de desarrollar y evita que estemos yendo para atr√°s del v√≠deo varias veces.  
	jaja

* **omnicanaljamar** (1) [1049341](https://platzi.com/comentario/1049341/) 

	django.db.utils.IntegrityError: null value in column ‚Äúis_admin‚Äù violates not-null constraint
	
	cuando trato de insertar unnuevo miembro a un Circle me alta este error y tengo que colocar is_admin = False siempre‚Ä¶ ! eso es en Membership Serialzier aiudaaaa
	``` 
	    # Member creation
	            member = Membership.objects.create(
	                user=user,
	                profile=user.profile,
	                circle=circle,
	                inivited_by=invitation.issued_by,
	                is_admin=False
	            )
	    
	```

* **Jorge Enrique Callisaya Sanchez** (1) [78957](https://platzi.com/comentario/930648/) 
{ ‚Äúcount‚Äù: 1, ‚Äúnext‚Äù: null, ‚Äúprevious‚Äù: null, ‚Äúresults‚Äù: [ { ‚Äúid‚Äù: 28, ‚Äúname‚Äù: ‚ÄúPera‚Äù, ‚Äúslug_name‚Äù: ‚Äúpera‚Äù, ‚Äúabout‚Äù: ‚ÄúHola mundo, desde l...

* **Jorge Enrique Callisaya Sanchez** (1) [78955](https://platzi.com/comentario/930646/) 
{ ‚Äúcount‚Äù: 1, ‚Äúnext‚Äù: null, ‚Äúprevious‚Äù: null, ‚Äúresults‚Äù: [ { ‚Äúid‚Äù: 29, ‚Äúname‚Äù: ‚ÄúCirculo Sandia‚Äù, ‚Äúslug_name‚Äù: ‚Äúsandia‚Äù, ‚Äúabout‚Äù: ‚ÄúEste es...

* **Jorge Enrique Callisaya Sanchez** (1) [78953](https://platzi.com/comentario/930639/) 
Cuando coloco que me busque por un slugname,para algunos me muestra solo un resultado(eso esta bien), pero para otros me muestra 3 result...

* **aleducode** (0) [622807](https://platzi.com/comentario/622807/) 

	al declarar las variables ordering me salta este error en el __count
	``` 
	    FieldError at /circles/
	    Cannot resolve keyword 'count' into field. Choices are: auth_token, circle, created, date_joined, email, first_name, groups, id, invitation, invited_by, is_active, is_client, is_staff, is_superuser, is_verified, issued_by, last_login, last_name, logentry, membership, modified, password, phone_number, profile, user_permissions, username
	    
	```

	* **Jorge Enrique Callisaya Sanchez** [622807] (1)

		Tienes que colocar el nombre del campo con el que haces la relaci√≥n con el modelo Member en el caso de Pablo es: **members** y con eso puede efectuar el query:  
		**members__count**. Si colocaste otro nombre debes de cambiarlo igual en tu query : ** <nombre campo>__count**.

## 0430. App de rides y modelos [17399](https://platzi.com/clases/1461-django-avanzado/17399-app-de-rides-y-modelos/)

### Descripci√≥n:


### Comentarios:

## 0440. Implementar la publicaci√≥n de un ride [17408](https://platzi.com/clases/1461-django-avanzado/17408-implementar-la-publicacion-de-un-ride/)

### Descripci√≥n:


### Comentarios:

* **Francisco Ezequiel Ba√±os Ramirez** (5) [558654](https://platzi.com/comentario/558654/) 

	Como decias al principio el problema de agregar a los viewsets que dependian de un circulo el modelo de circulo, decidi hacerlo mediante mixins y asi me quedo üòâ
	``` 
	    classAddCircleMixin(GenericViewSet):
	        """Add circle mixin
	    
	        Manages adding a circle object to views
	        that require it.
	        """
	    
	        defdispatch(self, request, *args, **kwargs):
	            """Return the normal dispatch but adds the circle model."""
	    
	            slug_name = self.kwargs['slug_name']
	    
	            self.circle = get_object_or_404(
	                Circle,
	                slug_name=slug_name
	            )
	    
	            return super(AddCircleMixin, self).dispatch(request, *args, **kwargs)
	    
	    
	```

	* **aviloncho** [558654] (2)

		Excelente!! Solo tengo una duda. ¬øEn que archivo y carpeta guardaste este _Mixin_?
		
		Gracias por tu aporte.

	* **Manuel Alejandro Aguilar T√©llez Gir√≥n** [558654] (2)

		Incre√≠ble. Muchas gracias.
		
		@aviloncho  
		Yo lo guardar√≠a en crie/circles/mixins/circles.py

* **Jorge Enrique Callisaya Sanchez** (1) [79078](https://platzi.com/comentario/933221/) 
¬øPor que creamos una nueva aplicaci√≥n para rides si pod√≠amos crear un modelo que dentro de la aplicaci√≥n de circles como hicimos con invi...

## 0450. Validaci√≥n de campos de un serializer [17402](https://platzi.com/clases/1461-django-avanzado/17402-validacion-de-campos-de-un-serializer/)

### Descripci√≥n:


### Links:

* [GenericViewSet -- Classy DRF](http://www.cdrf.co/3.9/rest_framework.viewsets/GenericViewSet.html)

### Comentarios:

* **Adolfo M.Valdivieso** (5) [588958](https://platzi.com/comentario/588958/) 

	Las actualizaciones complejas de base de datos deber√≠an correr dentro de una transacci√≥n at√≥mica para que en caso uno falle, la base de datos no aplique ninguno de los cambios.
	
	Esto se puede hacer usando:
	``` 
	    withtransaction.atomic():
	    	# cambio a base de datos 1
	    	...
	    	# cambio a base de datos n
	    
	```

	* **Manuel Alejandro Aguilar T√©llez Gir√≥n** [588958] (0)

		Siempre me pregunt√© para qu√© era
		``` 
		    with transaction.atomic():
		    
		```
		
		¬°Muchas gracias!

* **Jes√∫s Andr√©s Miranda Roa** (1) [1035469](https://platzi.com/comentario/1035469/) 

	Tengo una duda con respecto all get_serializer_context
	``` 
	    defget_serializer_context(self):
	            """Add circle to serializer context."""
	     
	            context = super(RideViewSet, self).get_serializer_context()
	            context['circle'] = self.circle
	          
	            return context
	    
	    
	```
	
	porque usar el Super ? , si decimos
	``` 
	    defget_serializer_context(self):
	            """Add circle to serializer context."""
	     
	            context = {}
	            context['request'] = self.request
	            context['circle'] = self.circle
	          
	            return context
	    
	    
	```
	
	no hace lo mismo ?

	* **Diego Alexander Forero Higuera (Platzi)** [1035469] (1)

		El context puede tener muchos m√°s datos que solo el request, es por esto que se usa el super para que la variable context tenga todo el contexto que hereda del viewset.

## 0460. Listado de rides [17405](https://platzi.com/clases/1461-django-avanzado/17405-listado-de-rides/)

### Descripci√≥n:


### Links:

* [GenericViewSet -- Classy DRF](http://www.cdrf.co/3.9/rest_framework.viewsets/GenericViewSet.html)

### Comentarios:

* **Eduardo Kiriakos Piazza** (1) [606268](https://platzi.com/comentario/606268/) 

	Tengo par de d√≠as con un error! Al momento de crear un nuevo ride desde postman me lo crea con offered_in = null. En cambio lo hago desde el shell usando Ride.objects.create() y s√≠ reconoce el circle.
	
	En la vista:
	``` 
	    defget_serializer_context(self):
	        """Add circle to the serializer context."""
	        context = super(RideViewSet, self).get_serializer_context()
	        context['circle'] = self.circle
	        return context```
	    En el metodo create del serializer:
	    
	```
	``` 
	    def create(self, data):
	      """Create ride and update stats."""
	      circle = self.context['circle']
	      ride = Ride.objects.create(**data, offered_in=circle)```
	    
	```

	* **jenapi** [606268] (1)

		no se si esto pueda ayudarte. Trata de evitar llamar al circulo en offered ride, explico, no declares circle como variable(Ya que sabes que el m√©todo funciona como quieres, trata de usarlo lo m√°s ‚Äúpuro‚Äù posible, osea hardcodealo / _As√≠ vas aislando la ra√≠z del problema_ / , sin ver el error como tal no puedo ayudarte mucho) busca en los modelos a ver si est√°s haciendo una llamada a un atributo inexistente. Trata tambien de agregar al contexto la variable circle pero en el m√©todo validate a ver si lo logras. espero haber sido de ayuda üòÉ

	* **jenapi** [606268] (1)

		antes de hacer ning√∫n cambio, recuerda hacer un git brach, no vayas a da√±ar lo que ya te funcionaba(Experiencias personales me lo han ense√±ado)

## 0470. Editar un ride [17401](https://platzi.com/clases/1461-django-avanzado/17401-editar-un-ride/)

### Descripci√≥n:


### Links:

* [BaseSerializer -- Classy DRF](http://www.cdrf.co/3.9/rest_framework.serializers/BaseSerializer.html)

* [Serializer relations - Django REST framework](https://www.django-rest-framework.org/api-guide/relations/)

### Comentarios:

## 0480. Unirse a viaje [17404](https://platzi.com/clases/1461-django-avanzado/17404-unirse-a-viaje/)

### Descripci√≥n:


### Links:

* [Many-to-many relationships | Django documentation | Django](https://docs.djangoproject.com/en/2.1/topics/db/examples/many_to_many/)

* [Serializers - Django REST framework](https://www.django-rest-framework.org/api-guide/serializers/#partial-updates)

### Comentarios:

* **Jorge Enrique Callisaya Sanchez** (2) [940955](https://platzi.com/comentario/940955/) 

	Cuando hace la ultima validaci√≥n en el m√©todo validate el profe se equivoco puesto que si tuviste un ride en cualesquier circle y quieres tomar un ride nuevo en cualquier circle este te saldr√° que ya estas en el viaje sin embargo no es cierto, aqu√≠ les dejo la soluci√≥n:
	``` 
	    defvalidate(self, data):
	            """Verify rides allow new passengers."""
	            ride = self.context['ride']
	            if ride.departure_date <= timezone.now():
	                raise serializers.ValidationError("You can't join this ride now")
	    
	            if ride.available_seats < 1:
	                raise serializers.ValidationError("Ride is already full!")
	    
	            if ride.passengers.filter(pk=self.context['user'].pk).exists():
	                raise serializers.ValidationError('Passenger is already in this trip')
	    
	            return data
	    
	```

	* **Jes√∫s Andr√©s Miranda Roa** [940955] (1)

		Para mi falto una validacion que era, si estas en un ride agregado, no te puedes unir a otro ride hasta que termine ese

* **raga** (1) [1056408](https://platzi.com/comentario/1056408/) 

	¬øComo diferencia cuando el update es para Join y cuando es para RideModelSerializer?  
	Porque en el get serializer ahora con update mandamos el JoinRideSerializer pero si quiere hacer update del c√≠rculo no estaria dando el mismo serializer?

* **Manuel Alejandro Aguilar T√©llez Gir√≥n** (1) [1051834](https://platzi.com/comentario/1051834/) 

	Otra cosa que falt√≥ actualizar es el n√∫mero de asientos disponibles. Mi forma de arreglarlo fue desde el m√©todo `update` del **JoinRideSerializer** en cride.rides.serializers.rides de esta forma
	``` 
	    defupdate(self, instance, data):
	            """Add passenger to ride and updates stats"""
	            ride = self.context['ride']
	            user = self.context['user']
	    
	            ride.passengers.add(user)
	            instance.available_seats -= 1# Lineas que 
	            instance.save()			# modifiqu√©
	    
	            # Profile
	            profile = user.profile
	            profile.rides_taken += 1
	            profile.save()
	    	
	    	...
	    
	```
	
	¬øQu√© opinan, hay otra mejor alternativa? Gracias por los aportes üòÑ

* **Jorge Enrique Callisaya Sanchez** (1) [79469](https://platzi.com/comentario/940926/) 
La condicion: if Ride.objects.filter(passengers__pk=data['passenger']): ¬øNo nos traer√≠a todos los rides que hizo el usuario...

## 0490. Terminar viaje [17400](https://platzi.com/clases/1461-django-avanzado/17400-terminar-viaje/)

### Descripci√≥n:


### Comentarios:

* **jenapi** (3) [649202](https://platzi.com/comentario/649202/) 

	algo que no not√© em la clase pasada fue que en el m√©todo update se actualizara la cantidad de asientos, porque al agregar passengers no disminuye el nro de hacientos disponibles
	``` 
	            ride.passengers.add(user)
	            ride.availiable_seats -= 1
	            ride.save()
	    
	```
	
	Todo esto va en el update

* **Kevin Lozoya Giner** (2) [797750](https://platzi.com/comentario/797750/) 

	Al tratar de un serializer para actualizar, en vez de usar `self.context['view'].get_object()` se puede utilizar `self.instance` para usar el objecto Ride que le hemos pasado al serializer en la view.

* **Manuel Pita** (2) [532164](https://platzi.com/comentario/532164/) 

	En la actividad donde se agrega el permiso que no pueda agregar un ride el due√±o de la vista.  
	En la explicaci√≥n falto agregar el self., es decir. de:  
	if action == 'join‚Äô  
	es:  
	if self.action == ‚Äòjoin‚Äô

* **Jorge Enrique Callisaya Sanchez** (1) [943008](https://platzi.com/comentario/943008/) 

	 **Correcci√≥n del m√©todo get_serializer class:**  
	Esto es por que cuando lo usamos en la action join no tendra ningun serializer as√≠ que lo colocamos:
	``` 
	    defget_serializer_class(self):
	            """Retorna un serializador basado en la action."""
	            if self.action=='create':
	                return CreateRideSerializer
	            if self.action in ['update','join']:
	                return JoinRideSerializer
	            if self.action=='finish':
	                return EndRideSerializer
	            return RideModelSerializer
	    
	```

## 0500. Calificar viaje [17208](https://platzi.com/clases/1461-django-avanzado/17208-calificar-viaje/)

### Descripci√≥n:


### Comentarios:

* **David Alejandro Abreu Abreu** (1) [1041330](https://platzi.com/comentario/1041330/) 

	Definitivamente este es uno de los cursos mas completos que he visto de Platzi, y lo que me gusta es que el desarrollo se lleva a cabo como dice Pablo, como un proyecto de la vida real. Hice el Curso profesional de Vue.js, y veo lo incompleto que esta, a ver que, con el contenido del curso, no puedo integrar una App Vue al nivel que lo requiere este proyecto.
	
	El el curso de Vue, lo √∫nico que se hizo con una API fue configurarla para listar, de acuerdo a una b√∫squeda. No creamos ni validamos validamos formularios, no enviamos im√°genes, no configuramos vistas de acuerdo a lo que pudiera ser un usuario, entre otros üò•

	* **Manuel Alejandro Aguilar T√©llez Gir√≥n** [1041330] (0)

		Yo tambi√©n creo que es un curso muy completo a pesar de que no he tomado el de Vue.js
		
		He notado que hay cursos que te sirven mejor como base y otros son como cuando ya tienes cierta experiencia. Estoy seguro que despu√©s de este curso, tomar cualquier otro donde se desarrolle una API ser√°‚Ä¶ m√°s f√°cil xD

# Tareas as√≠ncronas [3419]

## 0510. Creando tarea as√≠ncrona [17211](https://platzi.com/clases/1461-django-avanzado/17211-creando-tarea-asincrona/)

### Descripci√≥n:


### Links:

* [Calling Tasks ‚Äî Celery 4.2.0 documentation](http://docs.celeryproject.org/en/latest/userguide/calling.html#basics)

### Comentarios:

* **Denielly  Calcagno** (9) [613248](https://platzi.com/comentario/613248/) 

	Hola, en el inicio Pablo menciona una lectura sobre Celery. Ese articulo fue eliminado o solo yo no lo encuentro? Gracias

* **David Alejandro Abreu Abreu** (1) [1042246](https://platzi.com/comentario/1042246/) 

	Es decir que, a los pobres que no podemos correr Docker por lo pesado que es, nos toca investigar a ver como es el proceso de configuraci√≥n en virtualEnv de Celery, Redis, Flower y todo lo dem√°s üòÇüò´üò≠

* **Miguel Herreros Cejas** (1) [671042](https://platzi.com/comentario/671042/) 

	Buenas. ¬øComo podr√≠amos enviar un e-mail desde un frontend sin autentificaci√≥n? o pregunt√°ndolo de otro modo, ¬øComo usar DRF y Celery para enviar emails sin necesidad de autentificarse ni usar ning√∫n token?
	
	O sea, ser√≠a el t√≠pico e-mail de ‚Äú¬øNecesitas ayuda?‚Äù en el Login, donde el usuario podr√° enviar un e-mail sin autentificarse y sin utilizar ning√∫n token.

* **Ariam Blanco** (1) [659726](https://platzi.com/comentario/659726/) 

	Si llegaste hasta ac√° y tienes problemas con Celery, yo logr√© solventar modificando en el archivo de requirements lo siguiente:
	
	Archivo **base.txt**
	
	**Cambios:**
	
	<h1>Celery</h1>
	
	redis3.2.0  
	django-redis4.10.0  
	celery4.2.1  
	flower0.9.2  
	tornado>=4.2.0,<6.0.0

* **alexis** (1) [624313](https://platzi.com/comentario/624313/) 

	Tengo una duda con respecto a la configuraci√≥n de Celery.  
	¬øPara qu√© sirven estos par√°metros? CELERYD_TASK_TIME_LIMIT y CELERYD_TASK_SOFT_TIME_LIMIT. Ya se que son para tiempos, pero en s√≠, ¬øPara qu√©?

## 0520. Creando tarea peri√≥dica [17210](https://platzi.com/clases/1461-django-avanzado/17210-creando-tarea-periodica/)

### Descripci√≥n:


### Comentarios:

* **Adri√°n Andr√©s Sosa** (1) [1022494](https://platzi.com/comentario/1022494/) 

	Le dejo forma de llamar a periodic_task pero con crontab por si tienen la misma duda que yo.
	``` 
	    from celery.task.schedules import crontab
	    from celery.decorators import periodic_task
	    
	    @periodic_task(name='disable_finished_rides', 'run_every=crontab(hour=7, minute=30, day_of_week=1))
	    defdisable_finished_rides():
	        pass
	    
	```

# Testing [3420]

## 0530. Python unittest y Django TestCase [17213](https://platzi.com/clases/1461-django-avanzado/17213-python-unittest-y-djangos-testcase/)

### Descripci√≥n:


Unit Tests o Pruebas Unitarias estamos hablando de pruebas que prueban m√≥dulos particulares que por si solos no reflejan una funcionalidad compleja.

Las pruebas de integraci√≥n son m√≥dulos que se componen de m√∫ltiples partes, unidades.

### Links:

* [Writing and running tests | Django documentation | Django](https://docs.djangoproject.com/en/2.1/topics/testing/overview/)

* [unittest - Unit testing framework ‚Äî Python 3.7.2 documentation](https://docs.python.org/3.7/library/unittest.html)

* [25.3. unittest - Unit testing framework ‚Äî Python 2.7.15 documentation](https://docs.python.org/2/library/unittest.html)

### Comentarios:

* **Adolfo M.Valdivieso** (1) [589934](https://platzi.com/comentario/589934/) 

	pytest parece m√°s flexible que unittest

* **JPabloMayorgaM** (1) [551278](https://platzi.com/comentario/551278/) 

	Una pregunta en la clase se habla de pruebas unitarias, y las pruebas de integraci√≥n como se podr√≠an elaborar?

	* **Francisco Ezequiel Ba√±os Ramirez** [551278] (1)

		Supongo que algun dia haran un curso sobre ello, pero creo que de momento no hay nada al respecto üò¶.

	* **Fabricio  Rodr√≠guez Aguirre** [551278] (1)

		Carpe diem:  
		Mi respuesta a la pregunta sobre UT(unit test) e IT (integration test) va a ser algo larga. Para resumirla programaci√≥n no es lo √∫nico que los programadores deben estudiar.  
		En el video se menciona (muy en la superficie) el concepto de TDD y se da un ejemplo de prueba unitaria. La parte que rescato de todo el video es como est√° ejecutando pruebas dentro de un contenedor.  
		Llegado a este punto la cosa se pone candente. Ya que las pruebas m√°s TDD m√°s contenedores m√°s metodolog√≠as √°giles m√°s devops m√°s integraci√≥n continua, est√°n estrechamente interconectados.  
		Elaborar un proceso que tome en cuenta todo lo mencionado es el filo de la espada en esta industria. Herramientas como Gitlab o Azure Devops simplifican en buena manera la dura tarea,  
		Platzi deber√≠a tomar en cuenta este aspecto y no solamente explicar programacii√≥n, siendo esto √∫ltimo s√≥lo una fracci√≥n de lo que se aplica en los proyectos empresariales.
		
		Saluti,  
		Fabricio

* **Israel Elias Laura Rosas** (0) [818876](https://platzi.com/comentario/818876/) 

	En que momento se hizo la configuracion de settings para tests?  
	Es una buena practica? existe documentacion para esto?

	* **David Alejandro Abreu Abreu** [818876] (1)

		Te ayudo con la primera pregunta: Viene configurado ya en el entorno que esta usando, igual que vendr√≠a configurado con un Cookiecutter. Y supongo que si, de seguro hay buenas practicas a seguir al momento de configurar el ambiente de pruebas

## 0540. DRF APITestCase [17212](https://platzi.com/clases/1461-django-avanzado/17212-drf-apitestcase/)

### Descripci√≥n:


### Links:

* [Testing - Django REST framework](https://www.django-rest-framework.org/api-guide/testing/)

### Comentarios:

* **Andres Gallardo** (1) [786980](https://platzi.com/comentario/786980/) 

	Disculpen mi ignorancia, pero es una duda que siempre tuve con esto de los tests.
	
	Esos objetos que estan siendo instanciados y creados. Al terminar de ejecutarse el test, automaticamente son borrados? O quedan en nuestra base de datos guardados?
	
	Gracias

	* **aparicio_juan** [786980] (2)

		Se borra todo lo crees para pruebas, ya que la pr√≥xima ves que corras los test puede generarte un error si ya tienes esos datos. Es por esa raz√≥n que es los test tienes que crear los datos que vas a probar y estar√≠an en la DB.

	* **Jorge Enrique Callisaya Sanchez** [786980] (1)

		Exacto, como dijo el compa√±ero, por cada vez que ejecutes las pruebas se crean y se destruyen.

# Django Admin [3421]

## 0550. Admin actions Modificar datos de un query [17214](https://platzi.com/clases/1461-django-avanzado/17214-admin-actions-modificar-datos-de-un-query/)

### Descripci√≥n:


### Links:

* [Admin actions | Django documentation | Django](https://docs.djangoproject.com/en/2.1/ref/contrib/admin/actions/)

### Comentarios:

## 0560. Admin actions Regresando una respuesta HTTP [17215](https://platzi.com/clases/1461-django-avanzado/17215-admin-actions-regresando-una-respuesta-http/)

### Descripci√≥n:


Los Admin actions son funcionalidades que nos permiten agregar cambios a un queryset de un conjuto de datos del admin.

Ahora que ya sabes c√≥mo construir una API, una recomendaci√≥n es no extender el admin de Django m√°s all√° de sus capacidades.

### Links:

* [Outputting CSV with Django | Django documentation | Django](https://docs.djangoproject.com/en/2.1/howto/outputting-csv/)

### Comentarios:

# Deployment [3422]

## 0570. Instalaci√≥n de la aplicaci√≥n [17217](https://platzi.com/clases/1461-django-avanzado/17217-instalacion-de-la-aplicacion/)

### Descripci√≥n:


### Links:

* [About Docker CE | Docker Documentation](https://docs.docker.com/install/)

* [Install Docker Compose | Docker Documentation](https://docs.docker.com/compose/install/)

* [Deployment with Docker ‚Äî Cookiecutter Django 2019.17.5 documentation](https://cookiecutter-django.readthedocs.io/en/latest/deployment-with-docker.html)

### Comentarios:

* **alexxbetancourt** (2) [55782](https://platzi.com/comentario/545066/) 
es posible descargar las im√°genes desde docker hub en el servidor en lugar de hacerlo con Git descargando el proyecto entero?

	* **Andres Rodriguez** [55782] (1)

		Claro! De hecho dir√≠a que es la pr√°ctica m√°s recomendada.

* **benitezconzeta** (1) [635108](https://platzi.com/comentario/635108/) 

	Hola!!! ¬øQu√© deber√≠a tener en cuenta para hacer el deploy en digitalocean en lugar de AWS?

	* **Diego Alexander Forero Higuera (Platzi)** [635108] (2)

		El deploy es similar por no decir igual. Lo que cambia es la configuraci√≥n de la base de datos por ejemplo si usas el servicio o instalas un motor de base de datos en el droplet.

* **alexxbetancourt** (1) [545066](https://platzi.com/comentario/545066/) 

	es posible descargar las im√°genes desde docker hub en el servidor en lugar de hacerlo con Git descargando el proyecto entero?

	* **Andres Rodriguez** [545066] (1)

		Claro! De hecho dir√≠a que es la pr√°ctica m√°s recomendada.

* **esdraspavon** (1) [526632](https://platzi.com/comentario/526632/) 

	Esta clase no termina aqui, continua!

* **Alejandro Velazquez Mercado** (1) [518819](https://platzi.com/comentario/518819/) 

	Como se soluciono este error?  
	File ‚Äú/usr/local/lib/python3.6/site-packages/django/core/files/storage.py‚Äù, line 313, in listdir  
	for entry in os.listdir(path):  
	FileNotFoundError: [Errno 2] No such file or directory: ‚Äò/app/cride/static‚Äô

	* **aleducode** [518819] (1)

		tenes que crear el directorio static dentro de la carpeta cride del proyecto y volver a lanzar el docker-compose build

* **raulgustavo.gomezgaray** (1) [506561](https://platzi.com/comentario/506561/) 
Estoy viendo esta clase desde la aplicacion movil y parece estar incompleto , el profesor iba a proceder a mostrar algp de mailgun y antes de entrar a la pagina termina el video

	* **esdraspavon** [506561] (1)

		Si, as√≠ es! El video continua en la siguiente clase!!

* **Jorge Enrique Callisaya Sanchez** (1) [80428](https://platzi.com/comentario/958796/) 
¬øQue algoritmo uso para generar el **DJANGO_SECRET_KEY ** en producci√≥n?

	* **davidtoca (Platzi)** [80428] (1)

		Puedes usar el metodo que usa Django:
		
		<https://github.com/django/django/blob/9893fa12b735f3f47b35d4063d86dddf3145cb25/django/core/management/commands/startproject.py>
		``` 
		    from django.utils.crypto import get_random_string
		    chars = 'abcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*(-_=+)'
		    get_random_string(50, chars)
		    
		```

## 0580. Configuraci√≥n del dominio en Mailgun y del Bucket en Amazon S3 [17410](https://platzi.com/clases/1461-django-avanzado/17410-configuracion-del-dominio-en-mailgun-y-del-bucket-/)

### Descripci√≥n:


### Comentarios:

* **Agustin Ramos** (1) [870594](https://platzi.com/comentario/870594/) 

	Tengo un problema con caddy y digitalocean.  
	Llevo una semana intentando solucionar.  
	Alguien tiene la respuesta??
	
	caddy_1 | 2019/12/18 14:38:56 [INFO][[www.admincu-backend.com](http://www.admincu-backend.com)] AuthURL: <https://acme-v02.api.letsencrypt.org/acme/authz-v3/1797951446>  
	caddy_1 | 2019/12/18 14:38:56 [INFO][[www.admincu-backend.com](http://www.admincu-backend.com)] acme: Trying to solve HTTP-01  
	caddy_1 | 2019/12/18 14:39:11 [[www.admincu-backend.com](http://www.admincu-backend.com)] failed to get certificate: acme: Error 400 - urn:ietf:params:acme:error:connection - Fetching <http://www.admincu-backend.com/.well-known/acme-challenge/hmI1CCFgkHoUf1EOzSmS0XmgqUtmmpA5lNpS3qDh0ps:> Timeout during connect (likely firewall problem)  
	caddy_1 | exit status 1

	* **Miguel Herreros Cejas** [870594] (1)

		Buenas, yo tambi√©n tengo ese error. ¬øLo solucionaste? He optado por cambiar Caddy por Nginx

* **saduqz** (1) [826688](https://platzi.com/comentario/826688/) 

	En el minuto 9, toda la configuraci√≥n de permisos de Amazon S3 pasa muy acelerado.

* **Kevin Javier Morales** (1) [495817](https://platzi.com/comentario/495817/) 

	Este video contin√∫a en la siguiente clase üòÑ

* **Alberto Aldana** (0) [817241](https://platzi.com/comentario/817241/) 

	Hola cuando intento hacer docker-compose up me sale este error FATAL: role ‚ÄúsBLRWyyPsInwHftmHAWmYJURGWBGFpLs‚Äù does not exist

## 0590. Configuraci√≥n final de Docker Container usando Supervisor [17409](https://platzi.com/clases/1461-django-avanzado/17409-configuracion-final-de-docker-container-usando-sup/)

### Descripci√≥n:
Configurar un dominio y un certificado SSL de lets encrypt

### Comentarios:

* **fernando-sp** (1) [795841](https://platzi.com/comentario/795841/) 

	Tengo problemas con mis archivos staticos me pueden ayudar uu

	* **Kevin Javier Morales** [795841] (1)

		Cu√©ntanos qu√© problemas tienes para poder ayudarte üòÉ

## 0600. Tutorial de despliegue de la aplicaci√≥n [17216](https://platzi.com/clases/1461-django-avanzado/17216-tutorial-de-despliegue-de-la-aplicacion/)

### Descripci√≥n:


## Introducci√≥n

En esta lectura seguiremos todos los pasos necesarios para lanzar nuestra aplicaci√≥n  
a producci√≥n. El proceso de deployment es extremadamente sencillo por lo que, aunque  
en este tutorial estaremos usando AWS, migrar nuestro stack a cualquier otra plataforma  
en la nube con cualquier otro OS no implica ning√∫n esfuerzo sustancial.

Recuerda que todo el objetivo de usar docker es tener un contrato claro con el OS que  
nos permitiera liberar la aplicaci√≥n sin tener que realizar ning√∫n cambio al c√≥digo fuente.  
Por otro lado, y como vimos en los 12 principios de una app, la  
**[configuraci√≥n](https://12factor.net/config)** es el √∫nico elemento de nuestra aplicaci√≥n  
que cambiar√° dependiendo el entorno de ejecuci√≥n.

## Setup

### AWS (EC2)

En esta lectura trabajaremos con Ubuntu Server 18.04 LTS. Los pasos que debes seguir son:

  1. [Crear una instancia](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/EC2_GetStarted.html).  
Durante la creaci√≥n de la instancia debes: 
  * [Asignarle un rol](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/iam-roles-for-amazon-ec2.html)  
que tenga el permiso **`AmazonS3FullAccess`**
  * Asegurarte que el _security group_ de la instancia tenga abiertos los  
puertos 22 (SSH), 80 (HTTP) y 443 (HTTPS).
  2. [Contectarte a la instancia](https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/AccessingInstances.html)  
y actualizar los paquetes del servidor con los comandos: 
  * `sudo apt-get update -y`
  * `sudo apt-get upgrade -y`



### AWS (S3 Bucket)

El stack que tenemos est√° listo para manejar la media (archivos subidos por los usuarios) desde un  
servicio externo llamada S3. AWS S3 prometee la distribuci√≥n √≥ptima de archivos, as√≠ como su simple  
administraci√≥n.

Empezar a utilizar S3 es bastante sencillo:

  1. [Crea un bucket](https://docs.aws.amazon.com/AmazonS3/latest/gsg/CreatingABucket.html).

  2. [Agrega una pol√≠tica](https://docs.aws.amazon.com/AmazonS3/latest/user-guide/add-bucket-policy.html)  
al bucket como la siguiente:
```     {
       "Id": "Policy1548096183802",
       "Version": "2012-10-17",
       "Statement": [
         {
           "Sid": "Stmt1548096182270",
           "Action": [
             "s3:GetObject"
           ],
           "Effect": "Allow",
           "Resource": "arn:aws:s3:::BUCKET-NAME/*",
           "Principal": "*"
         }
       ]
     }
    
```




Recuerda reemplazar **`BUCKET_NAME`** con el nombre de tu bucket. Tambi√©n puedes obtener el  
[ARN](https://docs.aws.amazon.com/general/latest/gr/aws-arns-and-namespaces.html) de tu bucket  
revisando la descripci√≥n general.

### Docker

Docker es el verdadero h√©roe en todo esto. El tutorial se puede resumir en: 1) Insertar las variables  
de entorno. 2) docker-compose build y 3) docker-compose up.

Es necesario que instales los siguientes paquetes en el servidor:

* [Docker 1.10+](https://docs.docker.com/install/#supported-platforms)
* [Docker Compose 1.6+](https://docs.docker.com/compose/install/)



### Dominio

La configuraci√≥n espec√≠fica de los registros DNS del dominio var√≠a seg√∫n el proveedor pero  
realmente se traduce a crear los siguientes 2 registros:

* `A | www | IP`
* `A | @ | IP`



Lo cual quiere decir que crear√°s dos registros de tipo ADDRESS para tu dominio desnudo ([domain.com](http://domain.com))  
y tu subdominio www ([www.domain.com](http://www.domain.com)) y los dos apuntar√°n a la IP de la instancia.  
Cuando est√©s realizando la configuraci√≥n ten en mente que este cambio puede tomar entre 5 minutos y 48 horas. Personalmente nunca he tenido que esperar m√°s de 5 minutos pero tenlo en mente.

El valor de **`IP`** lo puedes obtener en el detalle de tu instancia en el dashboard de AWS EC2, aparecer√°  
como _`IPv4 Public IP`_.

Si la administraci√≥n de los registros DNS de tu dominio se vuelve un _pain in the ass_ , este  
puede ser un muy buen punto para que comiences a explorar servicios de Name Servers. Te recomiendo  
mirar Cloudflare y AWS Route 53.

### C√≥digo

Para esta lectura tengo preparado un ‚Äúbundle‚Äù final con los cambios que hemos realizado en  
el curso. Aqu√≠ tambi√©n puede ser un buen momento para explorar m√∫ltiples herramientas que  
automaticen la carga del c√≥digo fuente, as√≠ como su instalaci√≥n en el servidor. Estoy hablando  
de CI y CD. Por el momento lo descargaremos de la siguiente manera:

Ubicados en el home de ubuntu (`/home/ubuntu/`) corremos los siguientes comandos:

  1. Descargamos el archivo:  
`curl -o bundle.tar.gz https://codeload.github.com/pablotrinidad/cride-platzi/tar.gz/Deployment-bundle`
  2. Lo descomprimimos: `tar -xzf bundle.tar.gz`
  3. Lo renombramos: `mv cride-platzi-Deployment-bundle/ cride`



Al terminar esta secci√≥n contar√°s con docker instalado en el servidor, tu dominio apuntando  
a la IP de la instancia, un bucket de S3 listo para recibir y servir achivos, y el c√≥digo  
fuente ubucado en **`/home/ubuntu/cride/`**

## Instalaci√≥n de la app

Antes de comenzar, revisa el archivo `production.yml` en la ra√≠z del proyecto. Recuerda  
que este archivo tiene toda la configuraci√≥n necesaria para iniciar la aplicaci√≥n e incluye  
los siguientes servicios:

* **`django`** : La aplicaci√≥n corriendo bajo `Gunicorn`.
* **`postgres`** : Base de datos de PostgreSQL con los datos de la aplicaci√≥n.
* **`redis`** : Una instancia de Redis para cache.
* **`caddy`** : Un servidor HTTP que se encargar√° de recibir las peticiones del exterior y usa HTTPS por default.
* **`celeryworker`** : Corre el worker de Celery.
* **`celerybeat`** : Corre el beat de Celery.
* **`flower`** : Corre [Flower](https://github.com/mher/flower), una herramienta para visualizar celery en la web.



### Variables de entorno

La mayor√≠a de los servicios anteriores son configruados a trav√©s de variables de entorno por lo que  
tenemos que comenzar cre√°ndolas dentro de nuestro servidor.

Primero necesitamos un folder para almacenarlas, el cu√°l podemos conseguir corriendo (dentro de `/home/ubuntu/cride`)
``` 
    mkdir -p .envs/.production
    
```

Para que nuestra aplicaci√≥n funcione necesitamos los siguientes archivos de variables:
``` 
    touch .envs/.production/.django
    touch .envs/.production/.postgres
    touch .envs/.production/.caddy
    
```

Y dentro de cada uno, con tu editor de texto favorito (vi o nano), escribir las siguientes variables
``` 
    # .postgres
    
    # PostgreSQL
    POSTGRES_HOST=postgres
    POSTGRES_PORT=5432
    POSTGRES_DB=cride
    POSTGRES_USER=SECURE_USER
    POSTGRES_PASSWORD=SECURE_PASSWORD
    
```
``` 
    # .django
    
    # Django
    DJANGO_SETTINGS_MODULE=config.settings.production
    DJANGO_DEBUG=False
    DJANGO_SECRET_KEY=SECURE_SECRET_KEY
    
    # Static files
    DJANGO_AWS_STORAGE_BUCKET_NAME=S3_BUCKET_NAME
    
    # Admin
    DJANGO_ADMIN_URL=SECURE_ADMIN_URL
    
    # E-Mail
    MAILGUN_API_KEY=SECRET_KEY
    MAILGUN_DOMAIN=SECRET_KEY
    
    
    # Redis
    REDIS_URL=redis://redis:6379/0
    
    # Flower
    CELERY_FLOWER_USER=SECURE_USER
    CELERY_FLOWER_PASSWORD=SECURE_PASSWORD
    
```
``` 
    # .caddy
    
    DOMAIN_NAME=comparteride.com
    
```

Es **MUY IMPORTANTE** que notes que algunas de las variables no tienen valores  
y es tu trabajo poner valores reales y seguros. Como comentario adicional, tu ADMIN_URL  
debe terminar en `/`, es decir, si tu URL es `supersecretadminurl`, entonces el valor  
de `DJANGO_ADMIN_URL` debe ser `supersecretadminurl/`.

Adicionalmente tengo un script de Python que puedes usar para generar secretos de manera  
segura, este script tiene m√∫ltiples opciones de generaci√≥n pero por default escupe un  
hash de SHA256 codificado en base64. Puedes consultar el script aqu√≠: <https://gist.github.com/pablotrinidad/857eb828fd54ecee636a957e8219e8ac>,  
es muy f√°cil de usar.

### Launch the thing already!

Como mencion√© anteriorment, gracias a que el proyecto usa Docker podemos simplificar  
mucho el proceso de deployment. Al igual que en desarrollo, los comandos que tenemos  
que correr son los de construcci√≥n (build) y el de ejecuci√≥n (up). Vayamos al grano:

  1. La primer tarea que ejecuta Django es juntar los est√°ticos, pero como nosotros no hemos  
utilizado ninguno, tenemos que crear un folder vac√≠o por el momento: `mkdir /home/ubuntu/cride/static`
  2. Despu√©s construimos el stack con `sudo docker-compose -f production.yml build`
  3. Ahora podemos inicializar la base de datos con `sudo docker-compose -f production.yml run --rm django python manage.py migrate`
  4. Aprovechamos para crear un super usuario con `sudo docker-compose -f production.yml run --rm django python manage.py createsuperuser`
  5. Corremos la aplicaci√≥n con `sudo docker-compose -f production.yml up`
  6. Listo (casi)!



Ahora que el servidor est√° arriba te recomiendo probar que funcione correctamente  
realizando lo siguiente:

  1. Inicia sesi√≥n en el admin
  2. Crea un usuario llamando al API (`POST /users/signup/`)
  3. Verifica que el email se haya enviado usando Mailgun. (Tu cuenta tiene que estar ACTIVADA)
  4. Completa la verificaci√≥n de cuenta de Comparte Ride y actualiza la foto de perfil
  5. Si la URL de la foto de perfil es de AWS ( _‚Ä¶s3.amazonaws.com/‚Ä¶_ ), lo lograste!



## Cerrando la sesi√≥n SSH

Como ya sabes, en el momento en el que cierres la sesi√≥n SSH con el servidor el proceso  
que mantiene a Docker corriendo ser√° terminado. Para evitar esto podr√≠amos usar  
`docker-compose -f production.yml up -d` lo cu√°l ejecuta el stack en modo _‚Äúdetached‚Äù_ , pero  
realmente no resuelve el problema. Si el proceso termina su ejecuci√≥n necesitamos poder estar  
seguros de que se va a poder recuperar sin necesidad de iniciarlo manualmente. Para lograr esto  
usaremos una herramienta llamada supervisor que nos permitir√° registrar nuestra aplicaci√≥n  
como un servicio de Systemd. Para realizar esto tenemos que seguir los siguientes pasos:

  1. Instalar supervisor: `sudo apt-get install supervisor -y`
  2. Iniciar sesi√≥n como super user: `sudo su -`
  3. Crear el archivo `cride.conf` dentro de `/etc/supervisor/conf.d/` con el siguiente contenido:


``` 
    [program:cride]
    command=docker-compose -f production.yml up
    directory=/home/ubuntu/cride
    redirect_stderr=true
    autostart=true
    autorestart=true
    priority=10
    
```

  4. Registrar el servicio en supervisor con `supervisorctl reread` y luego `supervisorctl update`
  5. Iniciar el servicio con `supervisorctl restart cride`
  6. Verificar que el servicio est√© corriendo con `supervisorctl status`



Podemos verificar que todo est√© funcionando correctamente reiniciando el servidor desde AWS.  
Si al terminar el arranque del OS tu sitio est√° arriba, terminaste!

## Conclusi√≥n

Realmente el proceso de configuraci√≥n del servidor es ajeno al proyecto, finalmente lo √∫nico  
que tuvimos que hacer para lanzar nuestra aplicaci√≥n es correr `docker-compose build` y `docker-compose up`.

Ahora que ya tienes tu servicio corriendo te recomiendo much√≠simo leer la [documentaci√≥n](https://cookiecutter-django.readthedocs.io/en/latest/deployment-with-docker.html) del proyecto base  
(Django Cookiecutter) sobre deployment para fortalecer tu conocimiento sobre el stack.

Recuerda que cada que hagas una actualizaci√≥n y despu√©s de haber descargado el c√≥digo lo √∫nico  
que tienes que hacer es `docker-compose build` y `supervisorctl restart cride`.

### Comentarios:

* **ibacrea** (1) [611085](https://platzi.com/comentario/611085/) 

	al cambiar el user y pass de posgresql, me da error, hay otro archivo con esos datos?

## 0610. Futuros pasos y cierre del curso [17218](https://platzi.com/clases/1461-django-avanzado/17218-futuros-pasos-y-cierre-del-curso/)

### Descripci√≥n:


### Links:

* [GitHub - pablotrinidad/cride-platzi: REST API project used to teach Django on Platzi](https://github.com/pablotrinidad/cride-platzi)

### Comentarios:

* **ingkstr** (2) [899216](https://platzi.com/comentario/899216/) 

	Muy buen curso. Me ayud√≥ mucho sobre todo la parte de tareas as√≠ncronas.

* **Adri√°n Andr√©s Sosa** (1) [1022938](https://platzi.com/comentario/1022938/) 

	Muy bueno curso! Esta info vale mucho, gracias!

* **Oscar David Garcia Medina** (1) [962010](https://platzi.com/comentario/962010/) 

	Buen curso, muchas gracias por la ense√±anza üòÉ

* **ingkstr** (1) [77181](https://platzi.com/comentario/899823/) 
Ya tengo las nociones para hacer un backend mediante Django Rest Frameworks, pero suponiendo que tambi√©n tenga que integrar un frontend p...

	* **AlexisMoraSanchez** [77181] (1)

		Ahora mismo las opciones mas populares son vue y react, pruebalas y utiliza la que mas te guste!

* **Nimrod_r** (0) [996279](https://platzi.com/comentario/996279/) 

	Un grandioso curso Muchas gracias

