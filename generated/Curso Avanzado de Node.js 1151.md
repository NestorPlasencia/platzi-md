[Curso Avanzado de Node.js 1151](https://platzi.com/cursos/nodejs)

# Inicio del curso [1448]

## 0010. ¬øQu√© vamos a construir en el curso avanzado de Node.js [8247](https://platzi.com/clases/1151-nodejs/8247-bienvenida-que-vamos-a-construir/)

### Descripci√≥n:


Bienvenidos al **Curso Avanzado de Node.js.**  
Vamos a construir una plataforma de** Io**T, enfoc√°ndonos en _Real Time_. Utilizaremos las nuevas caracter√≠sticas de **JavaScript** que vienen en **ECMAScript 2016** y vamos a trabajar con **Postgres** como base de datos.  
Para tomar este curso necesitas conocimientos b√°sicos de **JavaScript.**  
Si tienes conocimientos de **Node.js** va a ser mucho mejor. En cuanto a requisitos t√©cnicos solo debes tener tu computador y un buen manejo de la terminal.  
Te invitamos a compartir tu progreso en el sistema de discusiones.

### Comentarios:

* **Sebastian Cardoso Castillo** (73) [291584](https://platzi.com/comentario/291584/) 

	Para los que reci√©n empiezan el curso les quiero contar mi experiencia. Este es un curso avanzado como dice t√≠tulo. Hay muchos conceptos nuevos que van a escuchar por primera vez. Cuando vean algo que no entiendan, paren el video y busquen el concepto en Google. Tambi√©n van a tener que mirar documentaci√≥n de m√≥dulos que no conocen. Este curso para mi ha sido uno de los mejores pero tambi√©n de los mas dif√≠ciles. He tenido que repasar las clases varias veces de principio a fin. Pueden mirar las clases de acuerdo a sus necesidades. Por ejemplo, yo estuve construyendo mi proyecto mientras las miraba y me sirvi√≥ mirar solo la construcci√≥n del m√≥dulo de la base de datos, la api y la integraci√≥n con el Frontend. Este es un mensaje para que no se desanimen y abandonen en la mitad del curso. Mientras tanto le voy a dar otra repasada.

	* **andrerivera** [291584] (3)

		que buen mensaje por que pare lo de fundamentos de javascript por lo mismo, me deja vacios que tengo que rellenarlos en youtube y google‚Ä¶

	* **Camilo Castillo** [291584] (0)

		Gracias men, por los consejos vamos a por el nuevo conocimiento

	* **Jos√© Ricardo Romo Guti√©rrez** [291584] (1)

		recuerdo cuando hice el de fundamentos de javascript, para mi fue super complejo, gracias compa√±ero, este curso lo termino por que lo termino.

	* **Oscar Stevens Cuartas Bejarano** [291584] (1)

		gracias men, no basta con tener el de javascript fundamentos?

	* **Giovanni** [291584] (1)

		Que alivio es justo lo que esperaba gracias man

	* **Celso Vicente Mercado Hurtado** [291584] (1)

		Si que alivio

* **Joaquin Araujo** (17) [225705](https://platzi.com/comentario/225705/) 

	JavaScript es un sue√±o ‚ù§Ô∏è

	* **glrodasz** [225705] (4)

		Una utopia ‚òòÔ∏è

	* **Joaquin Araujo** [225705] (2)

		JAJAJA tambien

	* **Oscar Stevens Cuartas Bejarano** [225705] (1)

		opio jajaja

	* **Benjam√≠n Sanz Qui√±onez** [225705] (1)

		apio equisde

* **jsteven** (4) [214164](https://platzi.com/comentario/214164/) 

	Qu√© buena introducci√≥n!

* **Jose Rodriguez Luis** (3) [599291](https://platzi.com/comentario/599291/) 

	como consigo el anterior curso de node js de julian duque??

	* **Raul Contreras** [599291] (3)

		Una pregunta ¬øPuede uno ver los cursos que ha hecho un profesor en particular? Es que tengo curiosidad‚Ä¶ XD

* **noemk2** (3) [300021](https://platzi.com/comentario/300021/) 

	vengo de hacer el curso de PHP üòÉ

	* **Oscar Barajas Tavares (Platzi)** [300021] (0)

		Seguro aprendiste demasiado en este curso.

* **wilantury** (2) [813922](https://platzi.com/comentario/813922/) 
Con muchas expectativas, se ve muy bueno.

* **Mario Emiliano Gordon Pico** (2) [722596](https://platzi.com/comentario/722596/) 
Muy interesante el proyecto a desarrollar

* **Alfonso Navarro** (2) [691121](https://platzi.com/comentario/691121/) 

	Viva Colombia carajo‚Ä¶

* **Luis Donaldo Lopez Gil** (2) [653538](https://platzi.com/comentario/653538/) 

	Genial, se ve interesante el curso

* **Jose Rueda** (2) [547690](https://platzi.com/comentario/547690/) 

	a Juli√°n siempre le toca dictar los cursos mas dificiles, tiene una capacidad gigante de explotarte la cabeza‚Ä¶ de mis profesores favoritos‚Ä¶ gracias por el curso !

* **Gabriel Antonio Berm√∫dez Arana** (2) [464472](https://platzi.com/comentario/464472/) 

	Una pregunta Julian, en ves de postgresql quisiera usar mongodb por llevrse bastante bien con express en nodejs, puedo implementarlo sin mucha dificultad ?

	* **Rub√©n Maier Enzler** [464472] (2)

		No creo que el profe te lo conteste, no dio se√±ales en todo el curso, pero s√≠, no cambiar√≠a mucho la implementaci√≥n, solo afectar√≠a en principio el primer modulo de platziverse-db

* **Jorge Eduardo Hern√°ndez Oropeza Yopal** (1) [1052129](https://platzi.com/comentario/1052129/) 

	De una‚Ä¶ Iniciemos.

* **franciscolesm22226d48ae644859** (1) [972317](https://platzi.com/comentario/972317/) 

	Con Toda‚Ä¶

* **Rodolfo  marquez** (1) [855017](https://platzi.com/comentario/855017/) 

	Muy buen curso!

* **luis_vazquez** (1) [846708](https://platzi.com/comentario/846708/) 

	listo y con muchas dudas para subir a producci√≥n

	* **Andres Roberto Coello Goyes** [846708] (1)

		puedes subirlo con NOW o en HEROKU son gratis y procura utilizar una dependencia llamada dotenv que permite guardar los datos de tu coneccion a db como el HOST, PASSWORD, USER, NAME‚Ä¶

* **FrcGustavo** (1) [837113](https://platzi.com/comentario/837113/) 

	Wow este curso de repente se ve que es muy largo, vamo a darle.

* **Jesbar** (1) [693616](https://platzi.com/comentario/693616/) 

	Genial, con muchas expectativas en este curso

* **Miguel Herreros Cejas** (1) [582498](https://platzi.com/comentario/582498/) 

	Buenas.  
	Estoy intentando recoger los datos de un device GPS tracker (EV-07s) a un servidor hecho con la libreria NET de Nodejs, pero no consigo recoger las tramas corriendo este servidor en entorno local con la ip del ordenador.  
	¬øEste es mi curso? O sea, se que este curso me ayudar√° a entender muchos conceptos sobre el tema, ¬øPero me ayudar√° a entender como se conectan los dispositivos externos con TCP/IP a un servidor local en Nodejs?

* **danielpinaudl** (1) [532413](https://platzi.com/comentario/532413/) 

	buenos dias, cuando se actualizara este curso? y de que fecha es. por otro lado que otra pagina es la mas recomendada si quiere aprender mas de node js

	* **Diego Alexander Forero Higuera (Platzi)** [532413] (2)

		Hola este curso es de aproximadamente hace 2 a√±os, pero los conocimientos siguen siendo vigentes, tenemos el curso b√°sico de node js <https://platzi.com/clases/basico-nodejs/> y el curso de esenciales de node js <https://platzi.com/clases/node-js/> que te serviran para aprender las bases de node js estos dos √∫ltimos fueron lanzados hace muy poco.

* **Juli√°n Andr√©s Vela Salazar** (1) [453865](https://platzi.com/comentario/453865/) 

	Excelente introducci√≥n

* **Oscar Stevens Cuartas Bejarano** (1) [407166](https://platzi.com/comentario/407166/) 

	metamosle toda muchachos

* **Juan  Reyes** (1) [353820](https://platzi.com/comentario/353820/) 
Mi proposito de 2018 es aprender NodeJs :)

* **dvsalcedo** (1) [342422](https://platzi.com/comentario/342422/) 

	Con muchas expectativas!

* **Miguel Herreros Cejas** (1) [340656](https://platzi.com/comentario/340656/) 

	Buenas. He decidido abandonar el curso de full-stack con Sails.js, ya que vengo de Laravel, y descubr√≠ adonis.js, el cual es bastante similar.  
	Me voy a enfocar en este curso y en Node.js  
	Espero que todos los conocimientos de este curso, me sirvan para crear una app robusta utilizando cualquier framework en Node.

* **Javier C√≥rdova** (1) [340398](https://platzi.com/comentario/340398/) 

	Vaya! Que introducci√≥n al curso üòÑ

* **Jos√© Ricardo Romo Guti√©rrez** (1) [333574](https://platzi.com/comentario/333574/) 

	Vine por oro y encontre diamantes, esto es genial, lo que buscaba, tengo un ESP32, y tenia la idea de que podria conectar la tarjeta a un servidor de nodejs y controlar el discpositivo. Tengo mucha fe en este curso

* **Pedro Rafael Jim√©nez Jij√≥n** (1) [328565](https://platzi.com/comentario/328565/) 

	Para la parte de Internet de las Cosas ¬ønecesitaremos arduino?

	* **Jos√© A Azocar R** [328565] (0)

		Puedes usar simuladores de Arduino como <http://fritzing.org/home/>

	* **mariandrea (Platzi)** [328565] (0)

		Otro buen simulador de Arduino es <https://www.tinkercad.com/>

* **Miguel Angel Espeso Alvarez** (1) [312443](https://platzi.com/comentario/312443/) 

	Ostia es el mismo Juli√°n que en el curso de Profesional de Node.js y javascript‚Ä¶

* **luis Sanchez grcia** (1) [191362](https://platzi.com/comentario/191362/) 

	Julian Ya no va a Rokiar para toda la vida

* **Engel_1010** (1) [79364](https://platzi.com/comentario/939062/) 
¬øNo es necesario saber PosgressSQL DB?

	* **Erik Ochoa** [79364] (1)

		No es necesario, pero saber las bases ayuda. Puedes hecharle un ojo al [Curso de PostgreSQL](https://platzi.com/clases/postgresql/) si algo no te queda claro, o como siempre puedes preguntar en el sistema de discusiones.

* **Gabriel Antonio Berm√∫dez Arana** (1) [49236](https://platzi.com/comentario/464472/) 
Una pregunta Julian, en ves de postgresql quisiera usar mongodb por llevrse bastante bien con express en nodejs, puedo implementarlo sin ...

	* **Rub√©n Maier Enzler** [49236] (2)

		No creo que el profe te lo conteste, no dio se√±ales en todo el curso, pero s√≠, no cambiar√≠a mucho la implementaci√≥n, solo afectar√≠a en principio el primer modulo de platziverse-db

* **Pedro Rafael Jim√©nez Jij√≥n** (0) [328566](https://platzi.com/comentario/328566/) 

	Encantado de comenzar con el gran profesor Juli√°n Duque, dicen que es dificil el curso, pero creo que el profesor es excelente

* **Jos√© Tuzinkievicz** (0) [313897](https://platzi.com/comentario/313897/) 

	Este curso es un gran desaf√≠o para m√≠, en calidad y cantidad.

* **Pivot** (0) [295105](https://platzi.com/comentario/295105/) 

	A m√≠ de entrada ya me cayo joya Juli√°n! Excelente introducci√≥n realmente dan ganas de hacer el curso

* **Nicolas Ticona Valdivia** (0) [253282](https://platzi.com/comentario/253282/) 

	Entusiasmado!

* **Flor Viviana  Mireles Rivera** (0) [248304](https://platzi.com/comentario/248304/) 

	Hola  
	Estoy desarrollando una app en node js que sube videos a youtube de forma automatica, una ves que el video se subi√≥ la misma app me muestra en la consola el id del video generado, mi pregunta es; ¬øhay alguna forma de pasar ese ID al front-end? ya sea por un JSON o por m√©todo POST o GET, lo que me importa es que ese ID lo pueda ver reflejado en el navegador ya que lo necesito para continuar con otros procesos. Gracias de antemano.

	* **Diego Alexander Forero Higuera (Platzi)** [248304] (5)

		Si estas pasando la petici√≥n de subida por ejemplo con Ajax en la respuesta puede devolver el id del video subido y con eso lo puedes mostrar en el frontend.

* **leonardoruizdiaz** (0) [246142](https://platzi.com/comentario/246142/) 

	i try so hard

* **Andres Alvarez** (0) [243034](https://platzi.com/comentario/243034/) 

	El curso se ve que prometedor

* **Marco Aurelio Elizalde Torres** (0) [218695](https://platzi.com/comentario/218695/) 

	Un curso muy interesante, ya quiero terminarlo.

* **brapastor** (0) [208550](https://platzi.com/comentario/208550/) 

	El curso se ve que promete üòÉ

* **Juan Carlos  Correa Herrera** (0) [191460](https://platzi.com/comentario/191460/) 

	Interesante, quiz√° pueda hacer mi sistema de seguridad en base a sensores casero :B

* **Rodman M. Swanston C.** (0) [191416](https://platzi.com/comentario/191416/) 

	En este curso se utilizara HTTP/2?

* **Jos√© Francisco Ojeda Vera** (0) [191415](https://platzi.com/comentario/191415/) 

	Excelente curso Platzi!

* **Sergio David Serrano Garc√©s** (0) [191401](https://platzi.com/comentario/191401/) 

	Si este curso hace lo que promete, creo que sera el mejor curso de Platzi =)

	* **Yesica Lizeth Cort√©s Pineda (Platzi)** [191401] (0)

		Seguro lo vas a disfrutar much√≠simo! El curso qued√≥ üëåüèªexcelente!

	* **Jose R. Torrens Acosta** [191401] (0)

		Hace un tiempo hubo uno MUY bueno, el Curso definitivo de JS, ah√≠ abarcaron backend y frontend, fue muy largo, pero realmente bueno. Luego lo dividieron en 2 cursos.

* **Alexander  Silvera** (0) [191381](https://platzi.com/comentario/191381/) 

	Muy bien preparados para aprender lo m√°s posible de node.

* **Michel Gonz√°lez Morales** (0) [191374](https://platzi.com/comentario/191374/) 

	Se ve muy interesante el curso !!!

* **Pedro Rafael Jim√©nez Jij√≥n** (0) [37047](https://platzi.com/comentario/328565/) 
Para la parte de Internet de las Cosas ¬ønecesitaremos arduino?

	* **Jos√© A Azocar R** [37047] (0)

		Puedes usar simuladores de Arduino como <http://fritzing.org/home/>

# Introducci√≥n a Node.js				 [1449]

## 0020. ¬øQu√© es Node.js [8248](https://platzi.com/clases/1151-nodejs/8248-que-es-nodejs/)

### Descripci√≥n:


**Node** es una plataforma _OpenSource_ para desarrollar aplicaciones, que est√° enfocada en tiempo real. Es similar a la m√°quina virtual de _Java_.

**Node** es muy √∫til para aplicaciones que tienen alta concurrencia. Utiliza **JavaScript** como lenguaje de programaci√≥n y patrones de programaci√≥n as√≠ncronos y orientados a objetos.

¬øPor qu√© decimos que **Node.js** es una plataforma simple?

  1. Es una librer√≠a est√°ndar es donde el c√≥digo va a morir. Mantener una plataforma est√°ndar actualizada puede ser un problema.
  2. _**npm**_ y la _**modularidad**_ de **Node** abre un ecosistema de trabajo muy grande.
  3. El modelo de trabajo _Open Source_ beneficia mucho a la plataforma.



**Node** existe gracias a un componente principal que se llama **V8** , que es el que nos permite utilizar **JavaScript** del lado del servidor.

### Comentarios:

* **Diego Alexander Forero Higuera (Platzi)** (37) [191448](https://platzi.com/comentario/191448/) 

	**V8** -> Maquina virtual de JS de google chrome.
	
	**libuv** -> librer√≠a encargada de manejar el event loop, operaciones de red y operaciones de entrada y salida de archivos.

	* **Jecsham Castillo** [191448] (1)

		Gracias!

* **Julio Gutierrez** (21) [240289](https://platzi.com/comentario/240289/) 

	* Node.js  
	Es una plataforma open source para desarrolar aplicaciones enfocadas en tiempo real. (Parecidas a JVM de Java o Framework .NET de Microsoft).  
	Ideal para alta concurrencia  
	Te permite desbloquear muchos recursos  
	Fullstack (desarrollo con Node.js en el server y js en el front).
	
	
	
	Node.js simple para desarrollar:
	
	Aplicaciones centradas en red,  
	Servidores en tiempo real.  
	Aplicaciones modulares  
	Utiliza patrones de programaci√≥n asincrono y orientado a eventos, pero esta es la clave que hace node.js especial.
	
	El core de Node.js es muy peque√±o, es simple de entender, el crecimiento de la plataforma en es base a la comunidad, creando modulos enfocados en resolver ciertos problemas. Mantenidos por el user-land (npm) .
	
	V8 -> es la maquina virtual de chrome, es lo que permite usar node.js del lado del servidor.
	
	LIBUV -> es una librer√≠a que se encarga de manejar el loop de las tareas y las operaciones de entrada y salida de archivos‚Ä¶
	
	zlib -> Encriptaci√≥n  
	openssl -> para comunicaci√≥n segura  
	http_parse-> para manejar todo el parseo de http
	
	* * *
	
	Networking and i/O  
	La mayor√≠a de las aplicaciones de Node.js son enfocadas para la red y de entrada y salida.  
	Dise√±ado para manejar grandes cargas de datos de entrada y salida.  
	Empoderar la web moderna.

* **Juan Carlos  Correa Herrera** (19) [191461](https://platzi.com/comentario/191461/) 

	Para quien sea curioso aqu√≠ est√° el c√≥digo fuente de node: <https://github.com/nodejs/node>
	
	Aqu√≠ est√°n las dependencias como V8 y Libuv que menciona Juli√°n Duque, adem√°s de http-parser, npm y otras m√°s: <https://github.com/nodejs/node/tree/master/deps>
	
	Nota curiosa: seg√∫n la doc de libuv en node, fue desarrollado principalmente para ser usado por node pero actualmente hay otros proyectos que tambi√©n lo usan. Incluso t√∫ puedes descargarlo y usarlo en tus proyectos personales üòÆ D:
	
	Si estoy en lo correcto, aqu√≠ est√° el core de node de Javascript: <https://github.com/nodejs/node/tree/master/lib>
	
	Son todos los m√≥dulos que tiene integrado Node, como crypto, fs, etc.
	
	Aqu√≠ est√° el core c y c++: <https://github.com/nodejs/node/tree/master/src>
	
	Y bueno, estoy sirve para ver que V8, libuv, npm, etc no son otra cosa m√°s que c√≥digo que puedes comprender aunque tendr√≠as que aprender c y c++ üòÆ

	* **Eduardo Hidalgo D√≠az Rugama** [191461] (1)

		sos grosso. buen aporte.

* **Iv√°n Mauricio Toro Cifuentes** (7) [320483](https://platzi.com/comentario/320483/) 

	 **¬øQu√© es Node?**  
	[Node](https://nodejs.org/es/) es una entorno de ejecuci√≥n multiplataforma de c√≥digo abierto usado para desarrollar aplicaciones enfocadas en tiempo real. Utiliza JavaScript como lenguaje de programaci√≥n, patrones de programaci√≥n [as√≠ncronos y orientados a eventos](https://es.wikipedia.org/wiki/Programaci%C3%B3n_dirigida_por_eventos) (programas en los cuales va determinado el flujo de ejecuci√≥n por los sucesos que ocurran en el sistema). Similar a la m√°quina virtual de Java de Oracle o al framework .NET de Microsoft.
	
	Node es muy √∫til para desarrollar aplicaciones que necesitan alta concurrencia, centradas en la red (servidores web, servidores para resolver dns, etc.), modulares, etc.
	
	**¬øPor qu√© decimos que Node es una plataforma simple?**
	
	* Una librer√≠a est√°ndar es donde el c√≥digo va a morir. Plataformas, como por ejemplo Go, tienen una librer√≠a est√°ndar muy grande, esto hace que mantener el core de la plataforma actualizado se les haga muy complejo a los desarrolladores core de la plataforma. La filosof√≠a de Node es mantener el core liviano (con lo suficiente para trabajar), y que todo el crecimiento de la plataforma se haga en el [userland](https://es.wikipedia.org/wiki/Espacio_de_usuario) (parte de la plataforma que no hace parte del core, es decir, todos los m√≥dulos externos al core).
	* [Npm](https://www.npmjs.com/) es el contenedor de todos los m√≥dulos, por lo cual se puede decir que npm es el userland de Node.
	* El modelo de trabajo de c√≥digo abierto beneficia mucho a la plataforma pues los m√≥dulos normalmente ubicados en el userland son mantenidos por empresas o individuos de la comunidad que apoyan la plataforma.
	* Node existe gracias a un componente principal que se llama [V8](https://developers.google.com/v8/) (M√°quina virtual de JS usada en el navegador Google Chrome), que es el que nos permite utilizar JavaScript del lado del servidor.
	
	
	
	**La arquitectura de Node**
	
	* Node.js core API: Es el conjunto de librer√≠as escritas en Javascript con las cuales interactuamos.
	* Node.js bindings: Permite comunicar la capa escrita en Javascript con las librer√≠as de bajo nivel.
	* V8 Javascript engine: M√°quina virtual de Javascript, es el componente principal de Node que nos permite ejecutar Javascript fuera del navegador.
	* Libuv: Librer√≠a encargada de manejar el event loop en Node (Loop de ejecuci√≥n de tareas as√≠ncronas), tambi√©n se encarga de las operaciones de red y operaciones de entrada y salida del sistema de archivos.
	* OpenSSL: Para comunicaci√≥n segura.
	* Zlib: Encriptaci√≥n.
	* Http_paser: Para hacer el parseo de el protocolo http.
	
	

* **Celso Vicente Mercado Hurtado** (3) [601847](https://platzi.com/comentario/601847/) 

	LINK paa instalar PostgreSQL:  
	<https://www.youtube.com/watch?v=iR8p55k2i0k>

* **Josu√© Isaac Fuentes L√≥pez** (3) [358293](https://platzi.com/comentario/358293/) 

	para los que tienen alguna duda sobre que es http2, les dejo el siguiente link:  
	<https://tools.ietf.org/html/rfc7540>

* **David Behar** (2) [977382](https://platzi.com/comentario/977382/) 

	## ¬øQu√© es Node.js?
	
	**Node** es una plataforma _OpenSource_ para desarrollar aplicaciones en javascript, que est√° enfocada en tiempo real. Es similar a la m√°quina virtual de _Java_.  
	.  
	**Node** es muy √∫til para aplicaciones que tienen alta concurrencia. Utiliza **JavaScript** como lenguaje de programaci√≥n y patrones de programaci√≥n as√≠ncronos y orientados a objetos.  
	.  
	¬øPor qu√© decimos que **Node.js** es una plataforma simple?  
	.
	
	  1. Es una librer√≠a est√°ndar es donde el c√≥digo va a morir. Mantener una plataforma est√°ndar actualizada puede ser un problema.
	  2. **_npm_** y la **_modularidad_** de **Node** abre un ecosistema de trabajo muy grande.
	  3. El modelo de trabajo _Open Source_ beneficia mucho a la plataforma.
	  4. Est√° dise√±ado para manejar Inputs y Outputs de manera eficiente  
	.  
	Node esta presente en aplicaciones:  
	.
	
	
	* Centradas.
	* Servidores.
	* Aplicaciones modulares.  
	.  
	**Node** existe gracias a un componente principal que se llama **V8** , que es el que nos permite utilizar **JavaScript** del lado del servidor.  
	.  
	Node se utiliza mucho para el manejo de **aplicaciones de Red** , no es de extra√±ar que el 1/4 del core de Node esta dedicado para el Networking.  
	.
	
	
	
	## Bindings presentes en el core de NodeJs
	
	* **Node Js Core API** :
	* **Node Js Bindings** :
	* **V8** -> Maquina virtual de JS de google chrome.
	* **libuv** -> librer√≠a encargada de manejar el event loop, operaciones de red y * operaciones de entrada y salida de archivos.
	* **Open SSL** : Comunicaci√≥n
	* **Zlib** : Encripci√≥n
	* **Http** -Parser: Parseador del protocolo http
	* **Http2** :
	
	
	
	## NPM
	
	.  
	Es donde estan alojados los modulos OpenSource de Node y javascript en general. Actualmente es una compa√±√≠a donde estan alojados una cantidad inmensa de modulos.  
	.  
	Node package manager, es el manejador de paquetes principal de javascript, comenz√≥ como un manejador de paquetes exclusivo para node, pero actualmente puedes encontrar paquetes que se encontraban en otros manejadores como **gulp** y **bower**.  
	.  
	**Otros manejadores de paquetes de js**
	
	[npm](https://www.npmjs.com/), [bower](https://bower.io/), [JSPM](https://jspm.io/), [Duo](https://duojs.org/), and [Yarn](https://yarnpkg.com/en/).

	* **Eduardo Lujan** [977382] (2)

		zlib no es para encripcion es para compresion decompresion, openssl es la que se encarga de esto

	* **David Behar** [977382] (1)

		Va, gracias Juan

* **MartinMB** (2) [963541](https://platzi.com/comentario/963541/) 

	Vamos que vamos

* **Alejo Goncalves** (2) [898486](https://platzi.com/comentario/898486/) 

	vamos con todo

* **robertmezagarcia** (2) [796543](https://platzi.com/comentario/796543/) 

	Interesante lo que es node.js

* **Oscar Stevens Cuartas Bejarano** (2) [407171](https://platzi.com/comentario/407171/) 

	como asi? osea que si uno quiere puedde usar V8 asi no mas? o el man tenia la pasta y le toco pagar algo?

* **Jos√© Rubial** (2) [310900](https://platzi.com/comentario/310900/) 

	 **¬øQue es Node.js?**
	
	Plataforma openSource para el desarollo de aplicaciones. Enfocada en aplicaciones de alta concurrencia.
	
	Para interactuar con Node lo haremos mediando JavaScript.
	
	Node esta presente en aplicaciones:
	
	* Centradas.
	* Servidores.
	* Aplicaciones modulares.
	
	
	
	**NPM (Node Package Manager)**  
	Es donde estan alojados los modulos OpenSource de Node. Actualmente es una compa√±√≠a donde estan alojados una cantidad inmensa de modulos.
	
	1/4 de Node esta dedicado para el Networking.

	* **Oscar Barajas Tavares (Platzi)** [310900] (0)

		Muy buen resumen

* **Byhako** (2) [269348](https://platzi.com/comentario/269348/) 

	¬ø Yarn es mejor que npm?

	* **Diego Alexander Forero Higuera (Platzi)** [269348] (5)

		Yarn era m√°s r√°pido para instalar dependencias pero en las √∫ltimas versiones de npm son iguales en cuanto a la parte de rendimiento y velocidad al instalar dependencias.

* **Lery Andy Pi√©rola Lazarte** (1) [1068187](https://platzi.com/comentario/1068187/) 
Entonces Node.Js saca el m√°ximo provecho de procesamiento de la PC o Servidor donde se instale. Es Correcto?

* **franciscolesm22226d48ae644859** (1) [972493](https://platzi.com/comentario/972493/) 

	que buena explicacion de la defincion de Node.js

* **luis_vazquez** (1) [846750](https://platzi.com/comentario/846750/) 

	Excelente, interesante la explicaci√≥n

* **Luis Paredes** (1) [608436](https://platzi.com/comentario/608436/) 

	Excelente.

* **Pmartinez** (1) [372451](https://platzi.com/comentario/372451/) 

	Node.js es un entorno en tiempo de ejecuci√≥n multiplataforma, de c√≥digo abierto, para la capa del servidor (pero no limit√°ndose a ello) basado en el lenguaje de programaci√≥n ECMAScript, as√≠ncrono, con I/O de datos en una arquitectura orientada a eventos y basado en el motor V8 de Google.

* **Jose Daniel Barr√≠a Reyes** (1) [349997](https://platzi.com/comentario/349997/) 

	utiliza patrones de programacion asincronos y orientados a eventos

* **juanortiz** (1) [343737](https://platzi.com/comentario/343737/) 

	Al Utilizar node con mongo db, seria algo similar a la base de datos de Firebase?

	* **Diego Alexander Forero Higuera (Platzi)** [343737] (3)

		Firebase es una base de datos similar a mongodb, lo que ofrece Firebase no es solo la base de datos si no un BaaS (Backend as a Service) donde tiene integradas muchas funcionalidades como pull notifications, todo esto lo puedes lograr tu mismo con mongo y node.

* **Esnor Noel Enrique Vaca Moreno** (1) [258606](https://platzi.com/comentario/258606/) 

	Node.js es un entorno de ejecuci√≥n para JavaScript construido con el motor de JavaScript V8 de Chrome. Node.js usa un modelo de operaciones E/S sin bloqueo y orientado a eventos, que lo hace liviano y eficiente. El ecosistema de paquetes de Node.js, npm, es el ecosistema mas grande de librer√≠as de c√≥digo abierto en el mundo.

* **hello_diego** (1) [80623](https://platzi.com/comentario/963042/) 
Que es un servidor TCP ?

	* **Juan David Castro (Platzi)** [80623] (1)

		Esta lectura lo explica muy claro: <https://es.ccm.net/contents/281-protocolo-tcp>. üòâ

* **fernan942** (1) [78015](https://platzi.com/comentario/913734/) 
Que son bindings?

	* **Mart√≠n Acosta** [78015] (2)

		Bindings son archivos que sirven de puente o enlace entre la API del n√∫cleo de Node, escrito en JavaScript, con las librer√≠as de C/C++. Estas librer√≠as son dependencias de Node.  
		Ac√° te dejo un recurso.  
		[](https://jorge-abad.es/publicaciones/5d7433d52709cc2894e451be)

* **oteka21** (0) [317081](https://platzi.com/comentario/317081/) 

	* node.js no es un nuevo lenguaje de programaci√≥n, es una herramienta que nos permite correr c√≥digo javascript fuera del navegador.
	
	* node es una plataforma sencilla o simple por que su core es bastante reducido (tiene lo b√°sico para empezar a trabajar) lo que lo hace mas f√°cil de mantener por los desarrolladores a diferencia de go.  
	esto hace que node se pueda ajustar a los requerimientos de cada proyecto agregando las librerias o modulos necesarios mediante npm.
	
	* para agregar modulos entra en acci√≥n npm (node package manager) el cual es el manejador de paquetes por defecto de node.
	
	
	

* **Alexander Velasquez** (0) [283939](https://platzi.com/comentario/283939/) 

	Capa de JavaScript  
	V8 (Maquina Virtual de Js de Chrome) - Libuv - Zlib
	
	* 1/4 del Core de Node est√° dedicado a Networking
	* Dise√±ado para grandes proceso de entrada y salida
	
	

* **Hugo Mart√≠nez** (0) [273719](https://platzi.com/comentario/273719/) 

	Excelente Presentacion Profe Julian, saludos desde Venezuela

* **dvdsosa** (0) [257290](https://platzi.com/comentario/257290/) 

	Muy buena presentaci√≥n. ¬øEst√° disponible para su descarga el slideshow (powerpoint) que Julian Duque presenta? Para as√≠ no estar copiando del mismo, me parece de provecho todo lo escrito en √©l.

	* **Diego Alexander Forero Higuera (Platzi)** [257290] (3)

		Ya la tienes disponible en la pesta√±a de archivos, es una presentaci√≥n de keynote.

	* **Daniel Sepulveda** [257290] (0)

		Hola la presentaci√≥n cuando la descargo no se ve bien parece un error de la descarga

* **Billi Ramirez** (0) [248251](https://platzi.com/comentario/248251/) 

	¬øpuedo ocupar SQL y NOSQL en el mismo proyecto con Nodejs?  
	ejemplo: ocupar postgresql y mongo

	* **davidtoca (Platzi)** [248251] (0)

		Si, es posible, podrias por ejemplo usar mongo usando el paquete de mongodb, y usar tambien posgresql con sequelizejs en el mismo proyecto

	* **Sebastian Cardoso Castillo** [248251] (0)

		Me hice la misma pregunta y luego de saber que si se puede ahora me pregunto, ¬øEs una buena pr√°ctica?

	* **Billi Ramirez** [248251] (0)

		Creo que depende de la Arquitectura, porque puedes tener componentes que algunos esten con NoSQL y otros con SQL. Aspectos transaccionales con SQL y datos de lectura rapida con MONGODB. Claro que para el usuario eso es transparente. Depende de como definas tu arquitectura.

* **Marco Aurelio Elizalde Torres** (0) [219259](https://platzi.com/comentario/219259/) 

	Cuando se refiere a aplicaciones de red, a que tipo de aplicaciones son o para que se pueden implementar?

	* **davidtoca (Platzi)** [219259] (1)

		aplicaciones interconnectadas en una red, puede ser una red local o incluso Internet, usualmente son aplicaci√≥nes distribuidas que deben hablarse entre s√≠ y que necesitan comunicarse en tiempo real

	* **Marco Aurelio Elizalde Torres** [219259] (0)

		Gracias por la respuesta

* **alvaritokore** (0) [208839](https://platzi.com/comentario/208839/) 

	libuv es exclusivo de nodejs? cuando haces javascript desde el cliente tambien usamos libuv?

	* **davidtoca (Platzi)** [208839] (1)

		Solo para node.js, es decir solo para Javascript del lado del servidor

* **marcos-senatori** (0) [204488](https://platzi.com/comentario/204488/) 

	Vuelvo a repetir, cambiaron el curso, este pinta mas ‚Äúorganizado‚Äù, pero hubieran dejado el anterior por un tiempo m√°s, para poder pasar a este.

	* **Diego Alexander Forero Higuera (Platzi)** [204488] (1)

		El curso anterior lo encuentras aqu√≠ <https://platzi.com/clases/node/>

	* **Juan Jos√© Vega Quintero** [204488] (0)

		Por qu√© ese curso ya no aparece en la carrera de JS

	* **Ricardo Palomino Palomino Vergara** [204488] (0)

		El link da Error

	* **Enrique Alexis Lopez Araujo** [204488] (0)

		Link: [https://platzi.com/clases/node-2016/](url)

* **Cesar Tacuri** (0) [191434](https://platzi.com/comentario/191434/) 

	Hola Julian, una consulta en cuanto a performance quien lo maneja mejor: Go o NodeJS ?

	* **Diego Alexander Forero Higuera (Platzi)** [191434] (3)

		Go suele ser mas r√°pido ya que es un lenguaje compilado y ejecutas ya tu archivo que est√° en lenguaje de maquina.

* **Nanbu** (0) [191414](https://platzi.com/comentario/191414/) 

	Muy buen v√≠deo Juli√°n!

## 0030. Caracter√≠sticas de la plataforma Node.js [8249](https://platzi.com/clases/1151-nodejs/8249-caracteristicas-de-la-plataforma-nodejs/)

### Descripci√≥n:


 **Networking** y _entrada_ y _salida_ : M√°s de 1/4 del core de **Node.js** est√° dedicado a _Networking._  
**Node.js** est√° especialmente dise√±ado para tipos de trabajo de entrada y salida.

**Node.js** es _modular_. **npm** es el registro de paquetes _OpenSource_ m√°s grande del mundo.  
El sistema modular de **Node.js** resuelve los problemas _dependency hell_.

La caracter√≠stica principal de **Node.js** es que podemos trabajar de manera as√≠ncrona y orientada a objetos.

**Node.js** es muy bueno para aplicaciones en tiempo real o para orquestaci√≥n de recursos entre m√∫ltiples aplicaciones.

**Node.js** no es bueno para computaciones que requieren uso de la CPU, ni para desarrollar aplicaciones como Systems programming.

### Comentarios:

* **Juan S√°ez Garc√≠a** (12) [232940](https://platzi.com/comentario/232940/) 

	Pinta que √©s multiusos üòÉ Haber si lo entiendo mejor que el de fundamentos de JS

	* **romerodiesan** [232940] (1)

		Si es multi uso, tiene much√≠simos m√≥dulos, pero no siempre es bueno para todo, hay que saber como usarlo y cu√°ndo.

	* **faaquinoa** [232940] (1)

		Si y es multi process que ayuda mucho

* **Ernesto Palafox** (10) [191581](https://platzi.com/comentario/191581/) 

	[Aqu√≠ el c√≥digo de Archy üòÉ](https://github.com/substack/node-archy/blob/master/index.js)

* **Julio Gutierrez** (8) [240299](https://platzi.com/comentario/240299/) 

	Para que es bueno
	
	* Aplicaciones en Red
	* Aplicaciones de entrada y salida
	* Orquestaci√≥n entre m√∫ltiples aplicaciones
	
	
	
	Para que no es bueno
	
	* Bigdata
	* Muchos datos no es entrada y salida, necesita mucha CPU
	* Aplicaciones de Sistemas y para manejar componentes nativas.
	
	

	* **William Calder√≥n Castillo** [240299] (2)

		Muchas gracias!

* **Iv√°n Mauricio Toro Cifuentes** (5) [320985](https://platzi.com/comentario/320985/) 

	 **Networking y I/O**  
	Un poco m√°s de 1/4 del core de Node est√° dedicado a Networking y I/O. [Libuv](http://libuv.org/) es la librer√≠a que se encarga de las comunicaciones en la red y el acceso de entrada y salida del sistema de archivos. Teniendo en cuenta lo anterior Node es muy √∫til creando aplicaciones de entrada y salida (con alta concurrencia y cargas de trabajo muy altas, como leer archivos muy grandes) y aplicaciones que requieran transmitir informaci√≥n en la red de cierta manera.
	
	Dentro del peque√±o core de Node existen m√≥dulos que permiten que esta plataforma sea tan poderosa en la creaci√≥n networking, algunos de estos son:
	
	* [HTTP](https://nodejs.org/api/http.html#http_http): Para usar servidores [HTTP](https://es.wikipedia.org/wiki/Protocolo_de_transferencia_de_hipertexto).
	* [HTTPS](https://nodejs.org/api/https.html#https_https): [HTTPS](https://es.wikipedia.org/wiki/Protocolo_seguro_de_transferencia_de_hipertexto) es el protocolo seguro de HTTP, usando [TLS/SSL](https://es.wikipedia.org/wiki/Transport_Layer_Security).
	* [Net](https://nodejs.org/api/net.html#net_net): Proporciona una API de red as√≠ncrona para la creaci√≥n de [TCP](https://es.wikipedia.org/wiki/Protocolo_de_control_de_transmisi%C3%B3n) basada en secuencias o [IPC](https://es.wikipedia.org/wiki/Comunicaci%C3%B3n_entre_procesos).
	* [Dgram](https://nodejs.org/api/dgram.html#dgram_udp_datagram_sockets): Presenta una implementaci√≥n de sockets [UDP](https://es.wikipedia.org/wiki/Protocolo_de_datagramas_de_usuario).
	* [DNS](https://nodejs.org/api/dns.html#dns_dns): Funciones para resolver nombres, ya sea conect√°ndose a un servidor [DNS](https://es.wikipedia.org/wiki/Sistema_de_nombres_de_dominio) o con operaciones del sistema operativo subyacente.
	
	
	
	**Modular**  
	El userland de Node es [NPM](https://www.npmjs.com/) ([The Node Package Manager](https://es.wikipedia.org/wiki/Npm)) el manejador de paquetes m√°s grande del mundo, adem√°s es open source lo que permite que el ecosistema de Node sea muy grande y crezca cada vez m√°s.
	
	La modularidad de Node se debe en gran medida a la filosof√≠a de que ‚Äúlos m√≥dulos deben ser peque√±os, que se concentren en hacer una cosa y que la hagan bien‚Äù (alta cohesi√≥n), de esta forma las aplicaciones de Node son un sistema de m√≥dulos especializados que interact√∫an entre s√≠, esto a su vez hace que las aplicaciones no sea monol√≠ticas o monolito (una aplicaci√≥n monol√≠tica se puede entender como una aplicaci√≥n en la que los m√≥dulos son muy dependientes entre ellos, alto [acoplamiento](https://es.wikipedia.org/wiki/Acoplamiento_\(inform%C3%A1tica\)), lo cual es indeseable en desarrollo de software pues es aplicaci√≥n muy dificil de mantener).
	
	El hecho de que las aplicaciones se trabajen como un sistema de m√≥dulos logra que se resuelva un problema muy com√∫n que es el [dependency hell](https://en.wikipedia.org/wiki/Dependency_hell) (infierno de dependencias, [aqu√≠ un ejemplo](http://npm.github.io/how-npm-works-docs/theory-and-design/dependency-hell.html)) el cual se resultado de conflictos entre las versiones de las dependencias de un proyecto, que pueden entrar en conflicto con las de otra aplicaci√≥n o proyecto, Node soluciona esto infierno de dependencias de manera local y por proyecto, debido a que su cargador de m√≥dulos puede cargar dos o m√°s versiones de un mismo m√≥dulo sin que entren en conflicto, [fuente](http://npm.github.io/how-npm-works-docs/theory-and-design/the-node-module-loader.html). Un ejemplo de un m√≥dulo peque√±o y especializado es [Archy](https://www.npmjs.com/package/archy).
	
	**JavaScript en el servidor**  
	JavaScript es el lenguaje del navegador (y ning√∫n otro lenguaje est√° cerca de sustituirlo), le da interactividad a la web de lado del cliente (frontend), con Node JavaScript ha llegado al servidor, esto hace que a un desarrollador frontend se le haga m√°s f√°cil desarrollar de parte del servidor (backend) pues es el mismo lenguaje tanto para front como para back haciendo que sean altamente productivos.
	
	**As√≠ncrono**  
	Sumado a lo anterior EcmaScript est√° trabajando constantemente mejorando el lenguaje, y dichas mejoras como: [async await](https://developer.mozilla.org/es/docs/Web/JavaScript/Referencia/Sentencias/funcion_asincrona), [clases](https://developer.mozilla.org/es/docs/Web/JavaScript/Referencia/Classes), [promesas nativas](https://developer.mozilla.org/es/docs/Web/JavaScript/Guide/Usar_promesas), entre otras, lleguen a Node haciendo que la experiencia de desarrollo sea m√°s agradable. Estas nuevas caracter√≠sticas permiten que en Node se trabaje de una forma as√≠ncrona y orientada a eventos, lo que hace que sea un plataforma ideal para aplicaciones en tiempo real.
	
	La programaci√≥n as√≠ncrona en Node es posible por medio de [callbacks](https://es.wikipedia.org/wiki/Callback_\(inform%C3%A1tica\)), [eventos](https://es.wikipedia.org/wiki/Programaci%C3%B3n_dirigida_por_eventos) y promesas. En Node las operaciones de entrada y salida no hacen que el [event loop](https://developer.mozilla.org/es/docs/Web/JavaScript/EventLoop) se bloquee, ¬øc√≥mo es esto posible si solo tenemos disponible un hilo? bueno, esto es posible debido a que aunque solo tengamos un hilo disponible para el usuario (es decir, las tareas se van a√±adiendo de forma secuencial a una cola de tareas), Node tiene 4 hilos, por defecto, para ejecutarlas, as√≠ se pueden ejecutar tareas sin bloquear el hilo de ejecuci√≥n de la aplicaci√≥n. Este [video](http://latentflip.com/loupe/) es excelente para entender c√≥mo funciona el event loop en JavaScript y este [art√≠culo](https://blog.nearsoftjobs.com/entendiendo-la-magia-detr%C3%A1s-de-nodejs-y-su-event-loop-8335e3b35e58) para entender c√≥mo funciona en Node.
	
	**Pros y contras**  
	Pros: Node es muy bueno para aplicaciones en tiempo real (orientadas en la red y en operaciones de entrada y salida) o para orquestaci√≥n de recursos entre m√∫ltiples aplicaciones.
	
	Contras: Node no es bueno para computaciones que requieren uso de la CPU, ni para desarrollar aplicaciones c√≥mo [systems programming](https://en.wikipedia.org/wiki/System_programming).

* **Oscar Stevens Cuartas Bejarano** (4) [407174](https://platzi.com/comentario/407174/) 

	dependecy HELL, me hace recordar esos clientes que quieren 1000000000000 plugins en sus wordpress jejeje

* **DavidMG01** (2) [879469](https://platzi.com/comentario/879469/) 

	Iniciando en Platzi‚Ä¶ üòÑ

* **Kiel Rodr√≠guez** (2) [208477](https://platzi.com/comentario/208477/) 

	¬øCu√°l ser√≠a un buen libro para reforzar lo aprendido sobre Node?

	* **Diego Alexander Forero Higuera (Platzi)** [208477] (12)

		Creo que m√°s que un libro lo que debes hacer es practicar, crear cosas tu mismo que solucionen alg√∫n problema y ver como lo logras implementar usando Node y JS

	* **Alberto Hern√°ndez L√≥pez** [208477] (4)

		Siempre es bueno echarte un libro (pues son una gran fuente de conocimiento) ac√° te dejo algunos que he le√≠do, est√°n en Ingl√©s espero que te sirvan:
		
		<https://carlosazaustre.es/libros-recomendados-sobre-javascript-y-node/>

	* **Jos√© Rubial** [208477] (0)

		El de Learning Node de Sbelly Powels esta brutal explica mas a fondo como funciona V8

* **Cesar Tacuri** (2) [191561](https://platzi.com/comentario/191561/) 

	SI NodeJS tiene como debilidad el uso de proceso de calculo o procesamiento de mucha informaci√≥n, que podemos complementar para poder salir airosos con dicha tarea, quiz√°s apoyarnos de integraciones con Python o que me recomiendan?

	* **Juan Carlos  Correa Herrera** [191561] (12)

		Si son c√°lculos que requieren procesamiento quiz√° una api hecha con python, en especial si son matem√°ticos. Puedes tener tus microservicios con node para las funcionalidades realtime y delegar procesamientos a python, cada api siendo independiente una de otra

* **Gtiseira** (1) [982303](https://platzi.com/comentario/982303/) 

	La verdad siendo que aun me queda mucho por practicar sobre JS, puedo comprender a perfecci√≥n la parte te√≥rica de lo presentado al momento. Muchas gracias y espero que siga as√≠!

* **franciscolesm22226d48ae644859** (1) [972518](https://platzi.com/comentario/972518/) 

	Genial

* **MartinMB** (1) [963583](https://platzi.com/comentario/963583/) 

	Muy interesante

* **luis_vazquez** (1) [846831](https://platzi.com/comentario/846831/) 

	Muy bien, aunque por la discusi√≥n del Big Data entonces me habr√≠a gustado ver una comparaci√≥n entre las distintas formas de crear un API REST (Node js, Microsoft Net Core, Laravel, Python - Flask, Django etc etc) y as√≠ reforzar para que me sirve el uso de la herramienta.

* **estevamdonnabella** (1) [619105](https://platzi.com/comentario/619105/) 

	A ver como usamos node.js com MQTT üòÉ

* **waldoaraque** (1) [608620](https://platzi.com/comentario/608620/) 

	The Node.js way‚Ä¶ Me gust√≥ esa frase.

* **Efr√©n S√°nchez** (1) [447489](https://platzi.com/comentario/447489/) 

	Electron te permite el desarrollo de aplicaciones de escritorio usando Node.js del lado del servidor y Chromium como interfaz

* **Rub√©n Maier Enzler** (1) [358456](https://platzi.com/comentario/358456/) 

	No entiendo porque pones al procesador como limitante de nodejs a la hora de manipular datos, ¬øporque no ser√≠a bueno para big data y porque python s√≠? no me quedo claro eso. Justamente, no es entrada y salida, es algo que requiere estrictamente la cpu, y eso va ser limitaci√≥n para cualquier lenguaje, porque depender√° del hardware. ¬øPorque bloquear√≠a el hilo de ejecuci√≥n? ¬øAcaso nodejs no tiene librer√≠as para manejar multihilos y permitir as√≠ el multiprocesamiento? Por otro lado ¬øMe dar√≠as un ejemplo de proyecto al que llamas ‚Äúaplicaciones de sistemas‚Äù?

	* **Diego Alexander Forero Higuera (Platzi)** [358456] (2)

		Python puede correr en multiples hilos, node por defecto no corre en multiples hilos por esto no es bueno para procesamiento intensivo de datos, adicionalmente a esto python es mucho m√°s r√°pido para realizar c√°lculos matem√°ticos.

	* **Rub√©n Maier Enzler** [358456] (1)

		pero porque python es mas rapido para c√°lculos matem√°ticos? Con respecto a lo de multihilos tengo entendido que existe un modulo llamado ‚ÄúCluster‚Äù que te permite manejar el multirprocesamiento, ¬øo no es as√≠?

	* **Diego Alexander Forero Higuera (Platzi)** [358456] (3)

		Si existen multiprocesamiento pero node ejecuta un calculo en un hilo no puede dividir el calculo en varios hilos, Python por otro lado es mucho m√°s eficiente para esta tarea que node.

	* **Rub√©n Maier Enzler** [358456] (1)

		Ahhhh ya entend√≠, gracias!

* **luisrangelc** (1) [356569](https://platzi.com/comentario/356569/) 

	System programming (or systems programming) is the activity of programming system software.  
	The primary distinguishing characteristic of systems programming when compared to application programming is that application programming aims to produce software which provides services to the user (e.g. word processor),  
	whereas systems programming aims to produce software which provides services to the computer hardware (e.g. disk defragmenter).  
	It requires a greater degree of hardware awareness.
	
	Using the Windows API directly was, at one point, a common way to write applications for Windows. So no, that‚Äôs not systems programming.
	
	Systems programming is not just ‚Äúclose to the OS‚Äù ‚Äì it‚Äôs something essential to the core functioning of the computer system.  
	So writing an OS is systems programming. Writing video drivers, filesystem drivers, network drivers for that OS is systems programming.  
	Writing a compiler for a particular combination of language/chipset is systems programming.
	
	In short, The system programming when compared with application programming is that the SP handles the OS software to work with hardware resources and AP handles the end users activity.

* **Javier Deferr Deferr** (1) [247678](https://platzi.com/comentario/247678/) 

	Capaz me estoy mareando pero si mongodb va de la mano con NODEJS porque una base de datos no relacionar, que no necesariamente, pero tiene como ventaja la gran capacidad de almacenar datos se maneja tan bien con nodejs, que escuche que no maneja bien los datos grandes?

	* **Diego Alexander Forero Higuera (Platzi)** [247678] (5)

		No es tanto que vayan de la mano, lo que sucede es que mongo por ser una base de datos documental (todo lo guarda como documento) es muy r√°pida y funciona bien con procesos realtime que puedes crear con Node.
		
		El uso de la base de datos depende de tus necesidades, si tiene informaci√≥n que necesita estar relacionada entre s√≠ (muchas tablas) no es recomendable usar mongodb lo mejor es usar una base de datos como MySQL o PostgreSQL.
		
		La herramienta correcta para solucionar tu problema.

	* **Javier Deferr Deferr** [247678] (0)

		Estoy 90% seguro que la base de datos que necesito es una no relacional, pero ahora no estoy seguro de que tecnologia usar, porque la herramienta tiene que manejar muchos datos, no relacionales.

* **lazarodev** (1) [239701](https://platzi.com/comentario/239701/) 

	Complementando a lo que dicen Juli√°n sobre utilizar _NodeJS _con **‚ÄúBigData‚Äù, **es que NodeJS no esta optimizado para trabajar tareas donde requiere uso de la CPU o GPU. Simplemente no fue creado para eso.

* **haroldv22** (1) [67045](https://platzi.com/comentario/716910/) 
pregunto, nodejs sera bueno para desarrollar una aplicacion de tipo financiera a nivel de backend ? ya que haces referencia a que no es m...

	* **alejandropereira** [67045] (1)

		por supuesto que si. no se quien te dijo eso porque node.js tiene la ventaja de que si un proceso toma mucho tiempo en terminar el comienza otro y continua.  
		el flujo jam√°s se detiene.

* **Juan Manuel Viveros Martinez** (0) [320510](https://platzi.com/comentario/320510/) 

	Este curso me servir√° mucho para crear un m√≥dulo de monitoreo de evaluaciones en l√≠nea en tiempo real, voy con toda.

	* **nachoogoomez** [320510] (1)

		A por todas! üí™

* **Diana Alfaro** (0) [260346](https://platzi.com/comentario/260346/) 

	Julian, muy interesante todo lo que nos ense√±as de Node.js hasta ahora, una pregunta: ¬øpor qu√© los textos que pones en el video est√°n en ingl√©s?  
	¬øNo ser√≠a mejor ponerlos en castellano tambi√©n?  
	Saludos.

	* **Diego Alexander Forero Higuera (Platzi)** [260346] (2)

		Es porque Julian trabaja en un ambiente anglo parlante por lo tanto esta muy acostumbrado a escribir todo en ingles üòâ

	* **nachoogoomez** [260346] (1)

		Y tambi√©n es m√°s bien una convenci√≥n no escrita hehe

	* **John Daison Agudelo S.** [260346] (3)

		HAy que dejar el miedo al ingles, aqui afortunadamente en platzi hay tambi√©n cursos de ingles ya, aprovechenlos!

* **romerodiesan** (0) [235939](https://platzi.com/comentario/235939/) 

	¬øEs bueno usar Go para Big Data verdad?

	* **Diego Alexander Forero Higuera (Platzi)** [235939] (6)

		Si bien Go es muy r√°pido no hay muchas librer√≠as enfocadas a an√°lisis de datos y manipulaci√≥n de los mismos, Python con librer√≠as como numpy, pandas y Jypiter son las mas usadas en el mercado.

* **Felipe Cardona** (0) [235520](https://platzi.com/comentario/235520/) 

	que es el core de node.js, para que funciona, de que se trata ? alguien que me pueda responder porfavor

	* **Diego Alexander Forero Higuera (Platzi)** [235520] (2)

		El core es el coraz√≥n de nodejs, es lo que se instala cuando instalas nodejs, luego instalas paquetes usando npm.
		
		Con el core de node tienes funcionalidades como un servidor propio y acceso a informaci√≥n del sistema entre otras cosas.

* **Irving  Acosta** (0) [211776](https://platzi.com/comentario/211776/) 

	D: yo no se nada de Redes, Tenemos en platzi alg√∫n curso que ense√±e a fondo sobre redes ?

	* **Nicole Chapaval (Platzi)** [211776] (6)

		¬°Pronto lo tendremos!

	* **Irving  Acosta** [211776] (1)

		Pero yo lo quiero ya XD

	* **nachoogoomez** [211776] (1)

		Ya esta disponible el curso de redes <https://platzi.com/cursos/redes/>

* **Stuard Gerardo Carrillo Gonzalez** (0) [204753](https://platzi.com/comentario/204753/) 

	No bueno es que pueden tener mas de un lenguaje en el backend, por lo tanto pueden usar un lenguaje para BidData y Nodejs para lo demas

## 0040. ¬øQu√© tipo de aplicaciones podemos desarrollar con Node.js [8250](https://platzi.com/clases/1151-nodejs/8250-que-tipo-de-aplicaciones-puedo-desarrollar-con-nod/)

### Descripci√≥n:


 **Node.js** es el proyecto _open source_ con el crecimiento m√°s r√°pido del mundo en este momento. Muchas empresas est√°n empezando no solo a utilizarlo sino a contribuir y patrocinar y tienen empleados dedicados a que aporten al proyecto y eso es lo que permite que tenga un crecimiento tan grande.

¬øQu√© tipo de aplicaciones podemos desarrollar?

**\- Aplicaciones de escritorio.**  
**\- Dispositivos embebidos.**  
**\- Servidores web.**  
**\- Aplicaciones m√≥viles: hace poco anunciaron el soporte para Android.**

### Comentarios:

* **Joaquin Araujo** (12) [225832](https://platzi.com/comentario/225832/) 

	JAJAJA esoy muy emocionado, amo JS ¬°LO AMO!

	* **Angrub** [225832] (1)

		Tambi√©n estoy muy emocionado

* **santiagosemhan** (5) [191610](https://platzi.com/comentario/191610/) 

	Me gustar√≠a saber m√°s acerca de la integraci√≥n entre node.js y android!

	* **Edgar Valdez Moises** [191610] (0)

		Tambi√©n quisiera saber sobre esto

	* **davidtoca (Platzi)** [191610] (4)

		Usualmente se hace a traves de una API REST, implementado en node.js y consumido en android.

	* **santiagosemhan** [191610] (0)

		David, me refer√≠a a si existe alg√∫n plan para dar soporte nativo a plataformas Android?

	* **AndresFdelgado** [191610] (0)

		A lo que se refer√≠a Julian es que antes solo se podian hacer aplicaciones para IOS con react native, y android no habia casi nada pero ultimamente el soporte de react native para hacer aplicaciones de android ha crecido mucho.

	* **Emanuel Pontoni** [191610] (1)

		<http://johnny-five.io/>  
		[Johnny-Five](http://johnny-five.io/)

	* **Angel Tigua** [191610] (1)

		la unica integracion es con api rest,

	* **Eduardo C√°rdenas** [191610] (0)

		Mediante la creaci√≥n de aplicaciones h√≠bridas, como con React Native, y tambi√©n con PWA.  
		<https://www.youtube.com/watch?v=JouY61oOqlM>

* **Oscar Stevens Cuartas Bejarano** (2) [407176](https://platzi.com/comentario/407176/) 

	wow!!!  
	<https://foundation.nodejs.org/>

* **franciscolesm22226d48ae644859** (1) [972575](https://platzi.com/comentario/972575/) 

	Cool‚Ä¶

* **MartinMB** (1) [963597](https://platzi.com/comentario/963597/) 

	Tremendo

* **luis_vazquez** (1) [846884](https://platzi.com/comentario/846884/) 

	Excelente!!

* **robertmezagarcia** (1) [796608](https://platzi.com/comentario/796608/) 

	Muy genial

* **dcortesnet** (1) [536604](https://platzi.com/comentario/536604/) 

	Python y javascript son los lenguajes m√°s queridos

* **FedeFenker** (1) [510243](https://platzi.com/comentario/510243/) 

	noto que la programacion en nodejs es medio criptica por los desgloses que se pueden hacer para ahorrar codigo‚Ä¶esto no afecta a la legibilidad??

	* **Erik Ochoa** [510243] (3)

		nodeJS usa el lenguaje de programaci√≥n JavaScript que se basa en el est√°ndar ECMAscript en el cual cada propuesta de implementaci√≥n pasa por un comit√© de expertos y un largo proceso para ser implementado.
		
		Puede que algunas cosas como las arrow function resten legibilidad (o no) creo que es una cuesti√≥n subjetiva, de gustos. Lo bueno (o malo) es que JavaScript es un lenguaje que no te impone una sola forma de hacer las cosas.

	* **Jordi Santamar√≠a Portol√©s** [510243] (1)

		Una vez te acostumbras a js, se lee todo mucho mas facil k en otros lenguajes.
		
		Todo es mantener un estilo de codificacion k sea facil de leer, basicamente que incorpores la libreria prettyfy en el proyecto para que quede todo bonito ^^

	* **Romel Javier Gomez Herrera** [510243] (1)

		Arrow functions no solo solo ‚Äúpara ahorrar codigo‚Äù. No son bloqueante de √°mbito como las funciones normales, por lo que te permite heredar funcionalidad externa.

* **Juli√°n Andr√©s Vela Salazar** (1) [453886](https://platzi.com/comentario/453886/) 

	No tenia ni idea que se podian desarrollar aplicaciones de escritorio con NodeJS excelente toda la info que nos brindan

* **Juan David Rubio Reyes** (1) [387625](https://platzi.com/comentario/387625/) 

	Me gusta mucho de lo que trata node.js

* **Victor Marcano** (1) [355650](https://platzi.com/comentario/355650/) 

	Este video te motiva muchisimo a aprender Node.js

* **KinakeyoyPlatzi** (1) [352511](https://platzi.com/comentario/352511/) 

	informacion muy util

* **ogitte** (1) [342336](https://platzi.com/comentario/342336/) 

	se puede hacer aplicaciones de contabilidad y puntos de venta ?

	* **Diego Alexander Forero Higuera (Platzi)** [342336] (2)

		Si es perfectamente posible, tienes que unir varias tecnolog√≠as pero es 100% posible.

* **Iv√°n Mauricio Toro Cifuentes** (1) [321202](https://platzi.com/comentario/321202/) 

	 **Del crecimiento de Node**  
	Node es el proyecto open source con el crecimiento m√°s r√°pido del mundo en este momento. Muchas empresas dedican parte de su talento humano a mejorar el ecosistema de Node haciendo contribuciones constantes a la plataforma, estas empresas son parte de [Node Foundation](https://foundation.nodejs.org/about/members).
	
	El 100% de las compa√±√≠as [Fortune 500](http://fortune.com/fortune500/) usan Node en algunas partes de su infraestructura, esto demuestra lo potente que puede llegar ha ser Node. Un uso com√∫n de Node es ser adaptador entre una plataforma frontend moderna (React, Angular, Vue, etc.) y backends [legacy](https://es.wikipedia.org/wiki/Sistema_heredado), que migrarlos a nuevas tecnolog√≠as es muy costoso.

* **Juan Manuel Viveros Martinez** (1) [320509](https://platzi.com/comentario/320509/) 

	Que interesante todo lo que se puede hacer con Node.js en la empresa que trabaja estamos haciendo un m√≥dulo para presentar evaluaciones en vivo que muestre los resultados instant√°neamente despu√©s de responder cada pregunta y creo que con Node.js ser√° muy f√°cil de usar.

* **Pedro Jesus Hincapie Garcia** (1) [284689](https://platzi.com/comentario/284689/) 

	Hola, me gustar√≠a saber como interviene NodeJS entre un Front moderno y una apliacacion legacy.
	
	Muchas gracias y quedo atento a sus comentarios.

	* **Pedro Jesus Hincapie Garcia** [284689] (2)

		sebaveg‚Ä¶ Gracias por el aporte, solo para por recomendaci√≥n deberias escuchar los videos no oirlos, de esta manera me aportarias un poquito mas.
		
		Gracias

* **lazarodev** (1) [239711](https://platzi.com/comentario/239711/) 

	Ser√≠a buenisimo que compartieran las diapositivas de las presentaciones que muestra Julian! üòÑ

	* **ricardocelis (Platzi)** [239711] (3)

		hola Lazaro, vamos a colocarlas =)

	* **Rub√©n Maier Enzler** [239711] (2)

		ya pasaron 6 meses y no agregaron ninguna diapositiva‚Ä¶

	* **Alejandro Villada T.** [239711] (2)

		ya van 7 y nada‚Ä¶

	* **viciotec** [239711] (2)

		ya van 7 y 9 horas y nada. . .

* **JESUS DARIO MARENCO PORTO** (1) [205004](https://platzi.com/comentario/205004/) 

	alguien sabe si en colombia especificamente en Cartagena existe una comunidad de node?

	* **davidtoca (Platzi)** [205004] (2)

		Existe un meetup de javascript, seguramente se tratan temas relacionados a nodejs <https://www.meetup.com/CartagenaJS/>

	* **JESUS DARIO MARENCO PORTO** [205004] (0)

		mucha gracias

* **Juan Carlos  Correa Herrera** (1) [191658](https://platzi.com/comentario/191658/) 

	<https://nodejs.org/es/foundation/>

* **waldoaraque** (1) [60641](https://platzi.com/comentario/608628/) 
tengo una duda que me qued√≥ en la cabeza desde el curso de esenciales‚Ä¶ ¬øPodr√≠a utilizar Node.js para un proyecto que aplique por ejemplo:...

	* **waldoaraque** [60641] (1)

		 **clustering**

* **FedeFenker** (1) [52834](https://platzi.com/comentario/510243/) 
noto que la programacion en nodejs es medio criptica por los desgloses que se pueden hacer para ahorrar codigo‚Ä¶esto no afecta a la legibi...

	* **Erik Ochoa** [52834] (3)

		nodeJS usa el lenguaje de programaci√≥n JavaScript que se basa en el est√°ndar ECMAscript en el cual cada propuesta de implementaci√≥n pasa por un comit√© de expertos y un largo proceso para ser implementado.
		
		Puede que algunas cosas como las arrow function resten legibilidad (o no) creo que es una cuesti√≥n subjetiva, de gustos. Lo bueno (o malo) es que JavaScript es un lenguaje que no te impone una sola forma de hacer las cosas.

* **Pedro Rafael Jim√©nez Jij√≥n** (0) [328624](https://platzi.com/comentario/328624/) 

	NodeJs esta siendo ampliamente utilizado en el ambito empresarial esto abre puertas a muchas ofertas de trabajo

* **Wilmer Alvarez Mamani** (0) [280215](https://platzi.com/comentario/280215/) 

	Cual es la fuente de estadisticas en donde indica la cantidad de personas o empresas que utilizan NODEJS?

* **Dario Acosta Acosta** (0) [261995](https://platzi.com/comentario/261995/) 

	Hola no me quedo bien claro para que sirve y que no‚Ä¶quisiera hacer una sistema de control de stock y facturacion, otro historia clinicas (para un hospital), es recomendable node.js, django o cualquiera de los dos?..  
	Saludos

	* **Diego Alexander Forero Higuera (Platzi)** [261995] (1)

		Yo te recomendar√≠a django par los dos, node.js te puede servir mejor en casos que necesites hacer cosas realtime, donde reportes cosas en tiempo real, para los caso que comentas no es tan necesario, aunque si se puede hacer.
		
		Algo que tambi√©n me gusta m√°s sobre node.js es go para el realtime y manejo de sockets es mucho m√°s r√°pido que node.

* **Jordi** (0) [252581](https://platzi.com/comentario/252581/) 

	Hola, d√≥nde me recomiendan coger un servidor para correr node.js de forma profesional?  
	Estuve inform√°ndome y casi todos los que encontr√© eran servidores dedicados y sale un poco caro.

	* **Diego Alexander Forero Higuera (Platzi)** [252581] (1)

		Puedes mirar opciones como Digital Ocean, AWS, Azure entre otros, son vps que consigues desde 5 o 10 dolares el mes.

	* **ricardocelis (Platzi)** [252581] (1)

		y puedes aprender a utilizarlos ac√° en Platzi: [platzi.com/do](http://platzi.com/do)[platzi.com/aws](http://platzi.com/aws)[platzi.com/azure](http://platzi.com/azure)

	* **Jordi** [252581] (1)

		DigitalOcean me va un poco lento la verdad, mira mi blog lo que tarda en cargar: [jordipiqueras.com](http://jordipiqueras.com). Tambi√©n te digo que utilizo CloudFlare y tengo el Dominio en una empresa de hosting distinta al del servidor.
		
		¬øQue opinas de la velocidad de carga? ¬øC√≥mo podr√≠a mejorarla?
		
		* Me mirar√© los cursos, me llama la atenci√≥n amazon aunque me parece caro y me preocupa que se disparen los precios.
		
		

	* **Mario Godinez** [252581] (0)

		Yo creo que el problema es donde pusiste a correr el servidor, yo tengo uno de $5 y me corre perfectamente NodeJS y Django

	* **Jordi** [252581] (0)

		Vale, voy a probar con node.js muchas gracias!

* **Santu1987** (0) [239485](https://platzi.com/comentario/239485/) 

	Esta super genial este inicio del curso!

* **Omar Gaston Chalas** (0) [237458](https://platzi.com/comentario/237458/) 

	Javascript es como un buen guerrero y Node seria su arma perfecta xD

# Preparando el entorno de Desarrollo				 [1450]

## 0050. C√≥mo instalar Node.js en macOS [8251](https://platzi.com/clases/1151-nodejs/8251-como-instalar-nodejs-en-macos/)

### Descripci√≥n:


Antes de empezar a desarrollar el proyecto es importante tener instaladas las aplicaciones que vamos a utilizar.  
En el v√≠deo vamos a ver la instalaci√≥n en _macOS_ , pero mas adelante vas a encontrar los art√≠culos para otros sistemas operativos.

El primer paso es ir a **[nodejs.org](url)**. Ah√≠ vas a encontrar dos versiones, la actual y la **LTS** , que significa _Long Term Support_. Debemos elegir la de la rama 8, que es la actual porque es la que tiene todos los √∫ltimos features y se va a convertir en la **LTS** muy pronto.

Para verificar que **Node.js** qued√≥ instalado vamos a la terminal y ejecutamos:  
`$ node -v`  
Con esto veremos la versi√≥n de **Node** que hemos descargado.

Otra forma de instalar, si trabajas con proyectos de **Node** que utilizan diferentes versiones, puedes utilizar **nvm**. Esta herramienta te permite cambiar entre versiones de **Node** f√°cilmente.

### Links:

* [Node.js](https://nodejs.org/en/)

* [GitHub - creationix/nvm: Node Version Manager - Simple bash script to manage multiple active node.js versions](https://github.com/creationix/nvm)

### Comentarios:

* **j2rojasr** (24) [260824](https://platzi.com/comentario/260824/) 

	Para los usuarios de Windows:
	
	  1. Descargar e instalar el instalador .exe que se encuentra en el archivo **_nvm-setup.zip_** del repositorio de coreybutler.  
	<https://github.com/coreybutler/nvm-windows/releases>
	
	
	* Si ya instalaron Node.js desde <https://nodejs.org/en/>, nvm detectar√° la versi√≥n ya instalada.
	* Para instalar node.js desde nvm, abrir la terminal de windows y escribir **_"nvm install 6"_** (la versi√≥n la eliges t√∫), y para empezar a usar esa versi√≥n de node en espec√≠fico debes escribir **_"nvm use 6.0.0"_**.
	* Para usar la versi√≥n del sistema escribir **_"nvm use system"_**
	
	

	* **Dharman Ballesteros Bedoya** [260824] (0)

		muchas gracias por tus aportes, me han sido de mucha ayuda.

	* **David Daniel Castillo Nava** [260824] (1)

		Excelente aporte!!

	* **schavez** [260824] (1)

		Se agradece el aporte

	* **Juli√°n Andr√©s Vela Salazar** [260824] (1)

		muchas gracias!

* **ignacioaredez** (9) [215686](https://platzi.com/comentario/215686/) 

	Otra pregunta? que ventajas tiene nvm ? es necesario para el curso nvm?
	
	Y por ultimo una critica constructiva, doy por seguro que el 90% de los usuarios de platzi trabaja windows. Porque los videos se hacen con Mac ?? Por lo menos que sean en GNU. Un saludo

	* **sampol.90 (Platzi)** [215686] (4)

		La ventaja principal de nvm es que te permite tener multiples versiones de Node y NPM en tu compu.
		
		Esto ayuda un mont√≥n si tienes proyectos que trabajan con una versi√≥n en especifico y si luego quieres usar por ejem node 8 no tienes que actualizar y luego hacer un downgrade.
		
		Saludos!!

	* **josepernia8** [215686] (1)

		Opino que en tal caso deber√≠a en alguna versi√≥n de Linux, acostumbrarse a hacer las cosas en Windows no es tan buena idea =p

	* **Augustolzd** [215686] (1)

		Gran parte de las personas que se dedican a programar, usan linux o mac, en windows normalmente cuando el DEV empieza, pero la mayor√≠a de los devs al obtener experiencia notan que las Macs son las mejores para el trabajo.

	* **Klupzor** [215686] (0)

		En mi caso uso virtualBox en windows para trabajar en mac, es buena alternativa para trabajar en otro sistema operativo sin necesidad de comprar otro equipo.

	* **Carlos Enrique Gonzalez Pe√±a** [215686] (1)

		Ciertamente la mayor√≠a de los desarrolladores se estan migrando a Mac o Linux, pero Platzi todo lo hace en Mac, aqu√≠ pregunto, por que utilizar la plataforma mas cara para presentar sus cursos?  
		La √∫nica opci√≥n que nos queda es instalar la maquina virtual y eso complica todo mucho mas.  
		La plataforma mas f√°cil de obtener y de empezar a usar en el primer instante en el que consigues tu equipo es windows por lo que es mas probable que sea mayor porcentaje el numero de personas con windows que con cualquiera de las otras 2 opciones

	* **ignacioaredez** [215686] (1)

		Veo que son muchos que me dicen deberia ser en linux no te acostumbres a windowns. Se√±ores y se√±oras cuando pido GNU me refiero a Ubuntu por ejemplo.
		
		Otra opcion a la maquina virtual es particionar el disco e instalar un segundo sistema operativo asi no se pierde potencia. Solo hace falta elegir la particion al iniciar el PC.
		
		Aqui les dejo una guia

	* **ignacioaredez** [215686] (2)

		Me olvide la guia XD
		
		<https://blog.uptodown.com/guia-paso-a-paso-instalar-windows-7-y-ubuntu-12-10-en-un-mismo-pc/>

* **nikosantis** (4) [869817](https://platzi.com/comentario/869817/) 

	Pensar que mientras veo esto estoy en la v12.13.1

* **William Calder√≥n Castillo** (3) [461962](https://platzi.com/comentario/461962/) 

	Para quien use ZSH y no bash, no olvide poner al final del comando
	
	curl -o- <https://raw.githubusercontent.com/creationix/nvm/v0.33.11/install.sh> | zsh

* **Oscar Jos√© Hern√°ndez Castillo** (3) [313608](https://platzi.com/comentario/313608/) 

	Aqu√≠ les dejo un tutorial que encontr√©, muestra paso a paso la instalaci√≥n de nvm en ubuntu 18.04.  
	<https://www.digitalocean.com/community/tutorials/how-to-install-node-js-on-ubuntu-18-04>

* **carlosextra1** (3) [221535](https://platzi.com/comentario/221535/) 

	CURSO 5  
	**node -v** = version de node  
	**nmp -v** = version de npm  
	**vim .bashrc** = editamos con vim el archivo .bashrc para agregar la ruta de la configuracion de nvm  
	**source .bashrc **= activamos el archivo .bashrc para activar el los comandos nvm  
	**nvm install 6 **=> instalamos la version 6 con este comando, si necesitamos otra version solo seria cambiar el 6 por el numer de version que necesitamos  
	**nvm use system** => usamos la versi√≥n de node que tenemos instalada en el sistema operativo

* **David Behar** (2) [977438](https://platzi.com/comentario/977438/) 

	Comandos importantes de nvm:
	
	Instala una versi√≥n diferente a la del sistema
	``` 
	    nvm install6
	    
	```
	
	Switchea entre versiones
	``` 
	    nvm use6
	    
	```
	
	Usa la version de node del sistema
	``` 
	    nvm usesystem
	    
	```

* **ignacioaredez** (2) [215684](https://platzi.com/comentario/215684/) 

	Los usuaris de windowns debemos instalar <https://github.com/coreybutler/nvm-windows>  
	o no es necesario ? y de ser asi cual de las 4 posibilidades debemos instalar?

	* **sampol.90 (Platzi)** [215684] (0)

		Tienes dos alternativas para:  
		[nvm-windows](https://github.com/coreybutler/nvm-windows) o [nodist](https://github.com/marcelklehr/nodist)

* **Marcelo Fontana** (2) [191632](https://platzi.com/comentario/191632/) 

	@julian_duque falta la instalacion para windows, d√≥nde lo podemos buscar?

	* **sampol.90 (Platzi)** [191632] (1)

		Para windows tienes dos alternativas:  
		[nvm-windows](https://github.com/coreybutler/nvm-windows) o [nodist](https://github.com/marcelklehr/nodist)

* **Emanuel Valero** (1) [875706](https://platzi.com/comentario/875706/) 

	Para este momento,
	
	* El enlace de GitHub para nvm es: <https://github.com/nvm-sh/nvm>.
	* Una alternativa a nvm para Windows es: <https://github.com/coreybutler/nvm-windows>.
	
	

* **Luis Fernando Ni√±o Gonzalez** (1) [370403](https://platzi.com/comentario/370403/) 

	Como Instalar multiples versiones de NodeJs con nvm

	* **zkmark9999** [370403] (1)
Con laragon

	* **Romel Javier Gomez Herrera** [370403] (1)

		<https://www.npmjs.com/package/n>
		
		![https://nimit.io/images/n/n.gif](https://nimit.io/images/n/n.gif)

* **andrerivera** (1) [364717](https://platzi.com/comentario/364717/) 
	
	![no puedo instalarlo2.png](https://static.platzi.com/media/user_upload/no%20puedo%20instalarlo2-db57bec7-ee72-4290-a07a-b667d905130b.jpg)
	
	instalando en git bash, me dice que lo reporte =)

	* **Diego Alexander Forero Higuera (Platzi)** [364717] (1)

		Estas intentando instalar una versi√≥n de nvm para linux que no va a funcionar bien en windows, te recomiendo el enlace que te comparti√≥ @lizardking <https://github.com/coreybutler/nvm-windows>

* **andrerivera** (1) [364714](https://platzi.com/comentario/364714/) 
	
	![no puedo instalarlo2.png](https://static.platzi.com/media/user_upload/no%20puedo%20instalarlo2-db57bec7-ee72-4290-a07a-b667d905130b.jpg)

* **andrerivera** (1) [364712](https://platzi.com/comentario/364712/) 
	
	![no se instala.png](https://static.platzi.com/media/user_upload/no%20se%20instala-7caec9f5-590b-4abe-b02e-420a223202b0.jpg)
	
	Me ayudan por favor !

	* **lizardking** [364712] (1)

		Hola que onda c√≥mo est√°s!, eo tratas de instalar nvm, pero ese tuto de gh que est√°s siguiendo no es exactamente para windows, mira, aqu√≠ hay uno que te puede servir para la instalaci√≥n en windows
		
		<https://github.com/coreybutler/nvm-windows>
		
		Cualquier cosa, avisanos

* **Josu√© Isaac Fuentes L√≥pez** (1) [358309](https://platzi.com/comentario/358309/) 

	Ahora si ya entendi que es nvm

* **Josu√© Isaac Fuentes L√≥pez** (1) [358307](https://platzi.com/comentario/358307/) 

	Ahpora si ya entendi que es nvm

* **uranoob** (1) [336132](https://platzi.com/comentario/336132/) 
Para Windows, pueden usar el bash de Linux y trabajar en √©l como si lo hicieran en √©l Linux. Aplica para Windows 10.

* **Jos√© Ricardo Romo Guti√©rrez** (1) [334045](https://platzi.com/comentario/334045/) 

	Para los usuarios de linux basados en debian:  
	La version 8:  
	curl -sL <https://deb.nodesource.com/setup_8.x> | sudo -E bash -  
	sudo apt-get install -y nodejs
	
	La version 10:  
	curl -sL <https://deb.nodesource.com/setup_10.x> | sudo -E bash -  
	sudo apt-get install -y nodejs
	
	* Para esto tienen que tener unstalado curl, si no, les saldra un error. En la consola escriben entonces:  
	sudo apt-get update  
	sudo apt-get install curl
	
	

* **Julio Gutierrez** (1) [242512](https://platzi.com/comentario/242512/) 

	nvm:  
	Es una herramienta que nos permite instalar diferentes versiones de node.js

* **Juan S√°ez Garc√≠a** (1) [232957](https://platzi.com/comentario/232957/) 

	Podr√≠a hacer el curso sin NVM?

	* **Diego Alexander Forero Higuera (Platzi)** [232957] (4)

		Si, NVM solo te permite tener multiples versiones de node para diferentes proyectos, pero puedes solo instalar una versi√≥n y seguir el curso.

* **ignacioaredez** (1) [220630](https://platzi.com/comentario/220630/) 

	Instalacion para Ubutu
	
	Nos vamos aqui <https://nodejs.org/en/download/package-manager/>
	
	Comprobamos que tenemos curl instalado en la terminal escribiendo curl
	
	Si no esta instalado te dira el comando para instalarlo,
	
	Vamos a la parte que pone usuarios de ubuntu y pegamos la primera linea en nuestraterminal de comandos al terminar copiados y pegamos la segunda linea en la termianl y listo
	
	Installa automaticamente npm
	
	Podemos comprobar ambos con el comando
	
	node -v  
	npm -v
	
	Muchas gracias y un saludo
	
	V

	* **ignacioaredez** [220630] (0)

		Corrigo en nvm no npm
		
		perdon por el fallo

	* **Diego Alexander Forero Higuera (Platzi)** [220630] (1)

		Yo recomiendo usar nvm, te permite probar varias versiones de node sin tener que estar instalando y desinstalando, solo tienes que decirle a nvm que version quieres instalar y una vez instalada puedes usarla y probar luego otra versi√≥n sin tener que hacer todo un proceso de instalaci√≥n de desinstalaci√≥n.

* **Carlos Alberto Villamizar Morantes** (1) [191575](https://platzi.com/comentario/191575/) 

	Se tiene Win 10 pueden instalar [nvm-windows](https://github.com/coreybutler/nvm-windows)

	* **Juan Carlos  Correa Herrera** [191575] (0)

		wow, eso est√° hecho con Go D:

* **andrerivera** (1) [40366](https://platzi.com/comentario/364717/) 
instalando en git bash, me dice que lo reporte =)

	* **Diego Alexander Forero Higuera (Platzi)** [40366] (1)

		Estas intentando instalar una versi√≥n de nvm para linux que no va a funcionar bien en windows, te recomiendo el enlace que te comparti√≥ @lizardking <https://github.com/coreybutler/nvm-windows>

* **andrerivera** (1) [40364](https://platzi.com/comentario/364712/) 
Me ayudan por favor !

	* **lizardking** [40364] (1)

		Hola que onda c√≥mo est√°s!, eo tratas de instalar nvm, pero ese tuto de gh que est√°s siguiendo no es exactamente para windows, mira, aqu√≠ hay uno que te puede servir para la instalaci√≥n en windows
		
		<https://github.com/coreybutler/nvm-windows>
		
		Cualquier cosa, avisanos

* **Iv√°n Mauricio Toro Cifuentes** (0) [321408](https://platzi.com/comentario/321408/) 

	[Instalar Node un Linux 18.04.](https://www.digitalocean.com/community/tutorials/how-to-install-node-js-on-ubuntu-18-04)

* **Teofilo Rosales Gama** (0) [296809](https://platzi.com/comentario/296809/) 

	Soy windows 10 pero por complicaciones estoy usando ubuntu 16 para que no se de dolores de cabeza como yo üò¶ usen este tutorial de internet :  
	<https://www.youtube.com/watch?v=FpnzwJrPQrU>

* **Diego Riquelme** (0) [280084](https://platzi.com/comentario/280084/) 

	Por favor, debido a que es primordial para realizar el curso debidamente, podr√≠an subir la informaci√≥n detallada como expresa Julian en el video (min. 0:30), para la correcta instalaci√≥n de los sistemas (Node.js - npm, - nvm) en Windows y Linux?..  
	Muchas gracias!  
	Slds.

	* **Diego Alexander Forero Higuera (Platzi)** [280084] (2)

		En windows la instalaci√≥n se hace con el instalador que provee nodejs en su p√°gina oficial, descargas el instalador y solo das en siguiente o next y terminas de instalar.
		
		Para linux ejecutas `curl -o- https://raw.githubusercontent.com/creationix/nvm/v0.33.8/install.sh | bash` en la terminal y esto instala nvm en tu sistema luego pones esto en tu archivo .bashrc
		``` 
		    export NVM_DIR="$HOME/.nvm"
		    [ -s"$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"# This loads nvm
		    
		```
		
		y por √∫ltimo ejecutas `source .bashrc` y ya tienes nvm listo para instalar la versi√≥n de node que quieras.

	* **Daniken Espinoza** [280084] (0)

		Obtuve un error que no encotraba el .bashrc cuando ejecutaba source .bashrc, solo lo copie al home de esta manera y me funciono
		``` 
		    cp /etc/skel/.bashrc
		    
		```

* **Diego Riquelme** (0) [280079](https://platzi.com/comentario/280079/) 

	Debido a que es primordial para realizar el curso debidamente, podr√≠an subir la informaci√≥n detallada como expresa Julian en el video (min. 0:30), para la correcta instalaci√≥n de los sistemas en Windows y Linux?... Muchas gracias!

* **Nelson Meza** (0) [263853](https://platzi.com/comentario/263853/) 

	export NVM_DIR="$HOME/.nvm"  
	[ -s ‚Äú$NVM_DIR/nvm.sh‚Äù ] && . ‚Äú$NVM_DIR/nvm.sh‚Äù # This loads nvm
	
	node -v = version de node  
	nmp -v = version de npm  
	vim .bashrc = editamos con vim el archivo .bashrc para agregar la ruta de la configuracion de nvm  
	**source .bashrc **= activamos el archivo .bashrc para activar el los comandos nvm  
	**nvm install 6 **=> instalamos la version 6 con este comando, si necesitamos otra version solo seria cambiar el 6 por el numer de version que necesitamos  
	nvm use system => usamos la versi√≥n de node que tenemos instalada en el sistema operativo.

* **Luis Guti√©rrez** (0) [247217](https://platzi.com/comentario/247217/) 

	Me voy a ir por el camino Linux =D

* **Dave Ch√°varri** (0) [244292](https://platzi.com/comentario/244292/) 

	Mientras llevo el curso Node ya est√° en la versi√≥n 9.4.0, hay alg√∫n problema de compatibilidad con la informaci√≥n de este curso?

	* **Diego Alexander Forero Higuera (Platzi)** [244292] (2)

		Lo mejor es que por lo menos tengas la versi√≥n estable osea la 8.9.x

	* **Luis Antonio Schmiel Paredes** [244292] (0)
<h1>o puedes usar las dos con [NVM](https://github.com/creationix/nvm).</h1>

* **Leo Uribe** (0) [224475](https://platzi.com/comentario/224475/) 

	cuando trato de correr el comando de NVM en linux (Ubuntu) me saca este error:
	
	‚ûú platziverse-db git:(master) ‚úó curl -o- <https://raw.githubusercontent.com/creationix/nvm/v0.33.6/install.sh> | bash
	
	curl: (60) error setting certificate verify locations:  
	CAfile: /usr/share/centrifydc/apache/certs/ca-certs.crt  
	CApath: none
	
	More details here: <http://curl.haxx.se/docs/sslcerts.html>
	
	curl performs SSL certificate verification by default, using a "bundle"  
	of Certificate Authority (CA) public keys (CA certs). The default  
	bundle is named curl-ca-bundle.crt; you can specify an alternate file  
	using the --cacert option.  
	If this HTTPS server uses a certificate signed by a CA represented in  
	the bundle, the certificate verification probably failed due to a  
	problem with the certificate (it might be expired, or the name might  
	not match the domain name in the URL).  
	If you‚Äôd like to turn off curl‚Äôs verification of the certificate, use  
	the -k (or --insecure) option.
	
	Alguna idea porque?

	* **Diego Alexander Forero Higuera (Platzi)** [224475] (1)

		Acabo de probar la instalaci√≥n y me funciona sin problema, al parecer es algo de tu sistema, tienes un firewall o algo que bloquee conexiones?

* **Enrique Alexis Lopez Araujo** (0) [214506](https://platzi.com/comentario/214506/) 

	Estos comandos me sirvieron para hacer el update de node 6 a la ultima version mas estable:
	
	  1. `sudo npm cache clean -f`
	  2. `sudo npm install -g n`
	  3. `sudo n stable`
	
	
	
	n: es un node version management, desafortunadamente n no esta soportada en windows, les dejo el link, por si quieren revisar mas doc: [https://github.com/tj/n](url) me sirvio mucho!

	* **Diego Alexander Forero Higuera (Platzi)** [214506] (2)

		Tambi√©n se puede usar nvm para linux y mac <https://github.com/creationix/nvm>  
		Para windows <https://github.com/coreybutler/nvm-windows>

* **Sergio Zapata Donado** (0) [204170](https://platzi.com/comentario/204170/) 

	¬øC√≥mo instalo nvm en windows 7?

	* **Diego Alexander Forero Higuera (Platzi)** [204170] (1)

		Prueba este <https://github.com/coreybutler/nvm-windows>

	* **Sergio Zapata Donado** [204170] (0)

		No funciona. De hecho parece que la versi√≥n actual de node ya viene con nvm instalado.

* **Edgar Valdez Moises** (0) [197218](https://platzi.com/comentario/197218/) 

	Como se pega algo del portapapeles a vim ?

	* **Diego Alexander Forero Higuera (Platzi)** [197218] (4)

		En linux se usa `ctrl + shift + v` pero tienes que estar en modo de insertar `i`

	* **Edgar Valdez Moises** [197218] (0)

		Gracias por el retorno

* **Edinson Carranza Salda√±a** (0) [196122](https://platzi.com/comentario/196122/) 

	Mongo vs PostgreSQL?

	* **sampol.90 (Platzi)** [196122] (0)

		Depende del proyecto üòÉ

	* **mariiglesia** [196122] (0)

		Por qu√© no los dos?  
		PostgreSQL para los datos que tienen relaciones y Mongo para el resto, por ejemplo, login.

* **griecovillamizar** (0) [191417](https://platzi.com/comentario/191417/) 

	una duda, usaremos ansible ? si instalamos el rol de ndoe desde nodesource queda la v < o default: 4.6, <https://github.com/nodesource/ansible-nodejs-role> >> se usa babel- node/register para pasar a produccion?

## 0060. C√≥mo instalar PostgreSQL y Redis en macOS [8252](https://platzi.com/clases/1151-nodejs/8252-como-instalar-postgresql-y-redis-en-macos/)

### Descripci√≥n:


Vamos a utilizar una base de datos relacional llamada **PostgreSQL**.

_Mac_ no tiene por defecto un manejador de paquetes entonces vamos a tener un repositorio de aplicaciones que podemos instalar en la l√≠nea de comandos, que se llama **Homebrew**. Despu√©s de esto ya podremos instalar **PostgreSQL**.

Una vez hemos instalado **Homebrew** podemos instalar **Postgres** ejecutando:  
`$brew install postgresql`

Y para inicializar:  
`$ brew services start postgresql`

Con brew services podemos inicializar **Postgres**.

Igualmente vamos a instalar Redis, que es una base de datos no relacional. Se instala de la misma forma:  
`$ brew install redis`

Y para inicializar:  
`$ brew services start redis`

### Links:

* [Homebrew ‚Äî The missing package manager for macOS](https://brew.sh/)

### Comentarios:

* **Ernesto Palafox** (73) [191603](https://platzi.com/comentario/191603/) 

	Para instalar Postgres en distribuciones linux basadas en Debian:
	``` 
	    sudo apt-get install postgresql postgresql-contrib libpq-dev
	    
	```
	
	Para instalar redis en distribuciones linux basadas en debian:
	``` 
	    sudo apt-getupdate
	    sudo apt-getinstallbuild-essential tcl
	    
	```
	
	Dado que no necesitamos guardar el c√≥digo fuente, podemos hacer uso del directorio /tmp
	``` 
	    cd /tmp
	    
	```
	
	Ahora descargamos la √∫ltima versi√≥n estable de Redis:
	``` 
	    curl -O http://download.redis.io/redis-stable.tar.gz
	    
	```
	
	Lo descomprimimos:
	``` 
	    tar xzvf redis-stable.tar.gz
	    
	```
	
	Ingresamos al directorio redis-stable que se extrajo:
	``` 
	    cd redis-stable
	    
	```
	
	Compilamos los binarios mediante el comando make:
	``` 
	    make
	    
	```
	
	Instalamos los binarios:
	``` 
	    sudo make install
	    
	```
	
	Y Listo üòÉ

	* **anhy_s** [191603] (0)

		Gracias! funcionando postgresql y redis en mi ubuntu

	* **yojotaman** [191603] (0)

		Gracias!! funciona perfecto.

	* **Marvkare** [191603] (0)

		excelente me funciono en kali :3

	* **Sebastian Cardoso Castillo** [191603] (1)

		Como se que se instalo redis?

	* **alvaritokore** [191603] (0)

		gracias

	* **Jos√© Rubial** [191603] (0)

		como confirmo que se instalo redis ?

	* **Jos√© Ricardo Romo Guti√©rrez** [191603] (1)

		Ejecuta el comando redis-server

	* **Eduardo Ignacio Denis** [191603] (1)

		Tratando de instalar redis en Ubuntu 18.04.1, tuve un error de package not found, installando tcl.
		
		Por si alguno tiene el mismo problema para solucionarlo instale --> $ sudo apt-get install build-essential tcl*

	* **briam-arismendi** [191603] (1)

		muchas gracias, funciono perfecto.

* **j2rojasr** (36) [260438](https://platzi.com/comentario/260438/) 

	Para los usuarios de Windows:
	
	  1. Descargar e instalar PostgreSQL. Hay 2 instaladores: De EnterpriseDB y de BigSQL. Yo us√© BigSQL y me fue bien. Solo darle **_"siguiente, siguiente y finalizar"_**  
	<https://www.postgresql.org/download/windows/>
	
	
	* Darle check a **_"pgAdmin3 LTS"_**
	* Asignarle como contrase√±a **_"root"_** a tu usuario
	* No olvides que tu usuario por defecto es **_"postgres"_**
	
	![PostgreSQL](https://i.imgur.com/XPQnnDl.png)
	
	  1. Descargar e instalar Redis. El instalador se encuentra en el repositorio de MicrosoftArchive. Solo dale **_"siguiente, siguiente y finalizar"_**  
	<https://github.com/MicrosoftArchive/redis/releases>
	
	
	* Abre la terminal de Windows (1) y escribe **_"redis-server"_**
	* Abre otra terminal de Windows (2) y escribe **_"redis-cli"_**
	* Luego, en la terminal (2) escribe **_"set name MiNombre"_** y luego **_"ping"_**. Debes obtener una respuesta **_"pong"_**  
	([Aqu√≠](https://www.youtube.com/watch?v=ncFhlv-gBXQ) un tutorial detallado. No olvides activar los subt√≠tulos)
	
	![edis](https://i.imgur.com/kCi8YyW.png)

	* **j2rojasr** [260438] (2)

		Por cierto, no hay Redis para 32 bit.

	* **Luis Eduardo  Martinez Ocoro** [260438] (1)

		Un gran aporte Rojas, gracias‚Ä¶

	* **MauricioHernanCabrera** [260438] (2)

		saben porque me aparece esto al ejecutar el comando redis-server?  
		![Sin t√≠tulo.png](https://static.platzi.com/media/user_upload/Sin%20t%C3%ADtulo-d9633385-2b74-4c4d-94b3-bba25c4a21e1.jpg)  
		todo lo demas me funciona

	* **MauricioHernanCabrera** [260438] (5)

		Encontre la solucion [Enlace a stackoverflow](https://stackoverflow.com/questions/31769097/cant-bind-tcp-listener-6379-using-redis-on-windows)  
		Ejecutan el comando redis-cli, una vez dentro del mismo ejecutan el comando shutdown, y ahora si les va a dejar correr el comando redis-server

	* **carolina-araya** [260438] (1)

		Porqu√© la contrase√±a debe ser root?

	* **Nicol√°s E. Rozo Espinosa** [260438] (1)

		Si se instala el msi, el crea el servicio de redis-server, por eso cuando se ejecutar el redis-server falla , porque ya esta arriba, solo se debe ejecutar el redis-cli, si funciona es que todo esta OK. (Y)

* **Rodman M. Swanston C.** (16) [191425](https://platzi.com/comentario/191425/) 

	Para instalar Redis en Windows deben descargar el archivo msi desde su pagina de [GitHub](https://github.com/MicrosoftArchive/redis/releases)

	* **Juan Carlos  Correa Herrera** [191425] (13)

		Y aqu√≠ para [postgres](https://www.postgresql.org/download/windows/) , espero este comentario sirva para ahorrar 5 segundos de vida que te tomar√≠a buscar postgres para windows

	* **Dobleve Tres** [191425] (1)

		no pude bajar redis, alguno pudo ?

	* **Marvkare** [191425] (4)

		yo con chocolatey  
		[](https://chocolatey.org/packages/redis-64)
		
		![](https://scontent.fmex10-2.fna.fbcdn.net/v/t1.0-9/26112333_1396430470483599_7875229635479323689_n.jpg?oh=63a031b53b2f783a9470e53df6b1cca7&oe=5AC2C68F)

	* **luisitocaiza17** [191425] (1)

		ja ja ja 5 segundos de vida,

* **ErickEJohnston** (7) [362992](https://platzi.com/comentario/362992/) 

	Buenas. Decid√≠ pagar la suscripci√≥n gracias al excelente trabajo de Freddy en el curso de programaci√≥n b√°sica, en donde explica a detalle como seguir cada paso para Mac, Linux y Windows. Sin embargo, creo que es un gran inconveniente (al igual que el v√≠deo pasado) el solo explicar el como realizar las instalaciones para Mac, mientras que los usuarios de Windows y otros sistemas operativos que queremos aprender y continuar con este curso pagado, tienen arregl√°rselas para hacer una descarga adecuada y que funcione.

	* **Kerohuixco** [362992] (1)
Tienes toda la raz√≥n. Creo que deberia por lo menos explicar las tres versiones en videos opcionales.

* **Carlos Enrique Gonzalez Pe√±a** (4) [267337](https://platzi.com/comentario/267337/) 

	Para hacerlo de forma similar solo cambiando el brew por choco en windows installen [Chocolatey ](https://chocolatey.org/)  
	Despues que lo installlan no olviden correr su CMD o el terminal de su preferencia como Hyper como Administrador y ponen los comandos tal cual los escribe Julian pero remplazando brew por choco  
	`choco install redis-64`  
	`choco install postgresql`
	
	Despu√©s los pasos que describe @j2rojasr abajo para iniciar redis
	
	* Abre la terminal de Windows (1) y escribe "redis-server"  
	Abre otra terminal de Windows (2) y escribe "redis-cli"  
	Luego, en la terminal (2) escribe ‚Äúset name MiNombre‚Äù y luego ‚Äúping‚Äù. Debes obtener una respuesta "pong"  
	Espero les sirva
	
	

	* **Carlos Enrique Gonzalez Pe√±a** [267337] (2)

		Para iniciar Postgresql sigue estos pasos  
		Si lo instalaste con Chocolatey te va a asignar una contrase√±a por default la cual es Postgres1234  
		Debes abrir el .exe llamado pgAdmin una ves dentro le das clic derecho dentro de la base de datos y le pones Connect.  
		Te va a pedir un password, pones Postgres1234 y listo ya iniciaste tu instancia

* **darius_mendez** (3) [556251](https://platzi.com/comentario/556251/) 

	La instalaci√≥n de postgreSQL se podr√≠a manejar con docker haciendo as√≠ m√°s portable el proyecto

	* **Jair Israel Avil√©s Eusebio** [556251] (1)

		Es correcto, solo que en este curso el alcance de dockerizar la aplicacion no esta considerada. Sin embargo el curso de Docker, usan un aplicacion de NodeJS y explican como manejar una base de datos relacional, complementando lo visto en este curso üòÑ

* **Luis Fernando Ni√±o Gonzalez** (3) [370408](https://platzi.com/comentario/370408/) 

	En Windows se puede usar un manejador de paquetes como [Chocolatey](https://chocolatey.org) , en esta se puede instalar postgresql con el comando:
	``` 
	    choco install postgresql
	    
	```
	
	y tambien se puede instalar el administrador de postgres con el comando
	``` 
	    choco install pgadmin3
	    
	```
	
	o
	``` 
	    choco install pgadmin4
	    
	```
	
	dependiendo de la versi√≥n que queramos usar.

* **Diego Antonio Bocanegra Galindez** (3) [275800](https://platzi.com/comentario/275800/) 

	Platzi tiene un video de como instalar Postgresql en linux, mac y windows
	
	<https://www.youtube.com/watch?v=QkwZIJKX4KM>  
	[](https://www.youtube.com/watch?v=QkwZIJKX4KM)

* **Jesus Sandrea** (3) [207157](https://platzi.com/comentario/207157/) 

	Estoy medio confundido, homebrew lo tengo que instalar en windows?

	* **Diego Alexander Forero Higuera (Platzi)** [207157] (6)

		No, homebrew es para mac.
		
		En windows puedes usar <https://chocolatey.org/> es similar a homebrew.

	* **Jesus Sandrea** [207157] (2)

		Descargando postgresql v10, ya solo restan 364 dias y 8 a√±os‚Ä¶

	* **Javier Casta√±eda** [207157] (1)

		Gracias GOLLUM23, ya me has salvado de unas cuantas,  
		si les da problemas en windows porque tienen que abrir la consola como administrador les dejo un enlace para poder ejecutar <https://chocolatey.org/>  
		<http://www.witigos.es/abrir-una-consola-cmd-con-derechos-de-administrador-en-windows-7/>

* **Emanuel Valero** (2) [875751](https://platzi.com/comentario/875751/) 

	Para esta fecha, la √∫ltima versi√≥n disponible de postgresql es la 12. Para instalar postgresql-12 en Ubuntu o Debian se puede utilizar el siguiente comando desde la terminal.
	``` 
	    sudo apt install postgresql-12 postgresql-client-12
	    
	```
	
	De igual manera, para instalar Redis en Ubuntu y Debian:
	``` 
	    sudo apt install redis
	    
	```

* **Fernando Azuaje** (2) [566093](https://platzi.com/comentario/566093/) 

	Les comparto un enlace para la instalacion de postgresSQL en Ubuntu u otra distro basada en Debian: [https://platzi.com/comunidad/como-instalar-postgresql-en-ubuntu-o-cualquier-distro-basada-en-debian/](url)  
	Hay un problema con la enumeracion pero el orden de los pasos es el que se muestra ahi

* **maximojimeno** (2) [555878](https://platzi.com/comentario/555878/) 

	como puedo instalar en win

* **Javier C√≥rdova** (2) [341192](https://platzi.com/comentario/341192/) 

	Muy interesante todo lo mencionado hasta ahora, pero nos dejan a un lado a los usuarios de Windows üòï

* **David Behar** (1) [977454](https://platzi.com/comentario/977454/) 

	```
	    brew install postgresql
	    
	    brew services start postgresql
	    
	    brew install redis
	    
	    brew services start redis```
	    
	```

* **David Behar** (1) [977441](https://platzi.com/comentario/977441/) 

	Seg√∫n yo homebrew viene instalado por defecto en MacOs, ¬øno?

	* **Gabriel De Andrade** [977441] (2)

		As√≠ es üòÑ

	* **David Behar** [977441] (1)

		En el video dice que lo tienes que instalar

	* **Gabriel De Andrade** [977441] (2)

		Hola David! Tienes raz√≥n. [Brew](https://brew.sh/) ac√° hay m√°s info de c√≥mo instalar homebrew, estaba equivocado ü§¶‚Äç‚ôÇÔ∏è

* **fernan942** (1) [916823](https://platzi.com/comentario/916823/) 

	How To Install and Use PostgreSQL on Ubuntu 18.04  
	[](https://www.digitalocean.com/community/tutorials/how-to-install-and-use-postgresql-on-ubuntu-18-04)
	
	How To Install and Secure Redis on Ubuntu 18.04  
	[](https://www.digitalocean.com/community/tutorials/how-to-install-and-secure-redis-on-ubuntu-18-04)

* **Karl Heitmann** (1) [746026](https://platzi.com/comentario/746026/) 

	¬øD√≥nde est√°n los art√≠culos que acompa√±an a este curso? No los he podido encontrar en ninguno de los cursos a los que me he metido

	* **Kevin Javier Morales** [746026] (1)

		Hola, a cu√°les art√≠culos te refieres?

	* **Karl Heitmann** [746026] (1)

		Hola, el profesor dice en el minuto 5:10 que las instrucciones detalladas para instalar PostgreSQL y Redis en Linux o Windows van a estar en los art√≠culos que acompa√±an el curso. Eso es lo que estoy buscando.

* **Juli√°n Andr√©s Vela Salazar** (1) [453924](https://platzi.com/comentario/453924/) 

	cual es mejor Redis o Mongodb?

* **Oscar Stevens Cuartas Bejarano** (1) [409270](https://platzi.com/comentario/409270/) 

	auxiliooo estoy baradoo!!! redis en windows no quiere correr apenas abro el archivo redis server se cierra

* **andrerivera** (1) [364727](https://platzi.com/comentario/364727/) 
	
	![trate de instalar esto y no me sirvio.png](https://static.platzi.com/media/user_upload/trate%20de%20instalar%20esto%20y%20no%20me%20sirvio-a1b23771-2577-4059-893a-dce42dec8577.jpg)
	
	Buenas alguien que me de una luz, veran ya supere los primeros pasos de instalacion pero cuando empiezo a instalar hembrew, no reconoce el directorio, trate de crear el directorio manualmente pero nada‚Ä¶ Me ayudan porfa?

	* **Diego Alexander Forero Higuera (Platzi)** [364727] (3)

		homebrew es un manejador de paquetes para mac, no te va a funcionar en windows, debes instalar chocolatey <https://chocolatey.org/>

	* **andrerivera** [364727] (1)

		ok gracias enserio, siempre me salvas cuando me atasco =) a seguirle =)

* **nicolasnatoli** (1) [350988](https://platzi.com/comentario/350988/) 

	Se puede utilizar Docker para tener corriendo en tu pc a postgres y a redis sin una instalacion. Solo corriendo los contenedores y con solo dos comandos.

	* **Diego Alexander Forero Higuera (Platzi)** [350988] (2)

		Si puedes tener los contenedores corriendo sin problema, no se si con solo dos comandos pero luego de configurados solo es necesario iniciar el contenedor para que funcionen.

* **camiladi** (1) [336812](https://platzi.com/comentario/336812/) 

	Tengo una consulta ¬øPor qu√© usar PostgreSQL? ¬øes posible usar alguna otra base de datos? es simple curiosidad, si es que para trabajar en nodeJs hay que usar obligatoriamente PostgreSql. Desconozco totalmente este tema. Si alguien me pudiese aclarar de agradezco de ante mano üòÑ

	* **Diego Alexander Forero Higuera (Platzi)** [336812] (3)

		Puedes usar cualquier base de datos que desees, se usa postgresql simplemente porque el profesor la selecciono para dar el curso.

* **Iv√°n Mauricio Toro Cifuentes** (1) [321454](https://platzi.com/comentario/321454/) 

	Instalar [PostgreSQL](https://www.digitalocean.com/community/tutorials/how-to-install-and-use-postgresql-on-ubuntu-18-04) y [Redis](https://www.digitalocean.com/community/tutorials/how-to-install-and-secure-redis-on-ubuntu-18-04) en Ubuntu 18.04.

* **Diego Riquelme** (1) [280087](https://platzi.com/comentario/280087/) 

	Mismo inconveniente que en el video anterior!... debido a que es primordial para realizar el curso debidamente, podr√≠an subir la informaci√≥n detallada como expresa Julian en el video, para la correcta instalaci√≥n de los sistemas (PostgreSQL y Redis ) en Windows? gracias!

* **Victor Gamez** (1) [241664](https://platzi.com/comentario/241664/) 

	 **Comandos Brew**
	
	Para poder listar todos los servicios que se estan ejecutando en nuestro brew.  
	`brew services list`  
	Para hacer un **restart a todos** los servicios de brew  
	`brew services restart --all`  
	Para poder **pararlos todos** los servicios  
	`brew services stop --all`  
	Para volverlos a **ejecutar nuevamente**  
	`brew services start --all`  
	Si queremos hacer las anteriores acciones pero solo para un servicio, cambiar el `--all`por el nombre del servicio

* **morenoomart** (1) [192075](https://platzi.com/comentario/192075/) 

	Brew para linux <http://linuxbrew.sh/>

* **luistorres3233** (1) [69212](https://platzi.com/comentario/753296/) 
En Platzi no hay un curso de REDIS? me podr√≠an pasar el link en caso de existir? gracias‚Ä¶

	* **Juan David Castro (Platzi)** [69212] (1)

		üëâ [Curso de MongoDB y Redis (2017)](https://platzi.com/clases/mongodb-redis-2017/)  
		üëâ [Resumen del curso Curso de MongoDB y Redis (2017)](https://github.com/MineiToshio/CursosPlatzi/tree/master/Curso%20de%20MongoDB%20y%20Redis)

* **andrerivera** (1) [40369](https://platzi.com/comentario/364727/) 
Buenas alguien que me de una luz, veran ya supere los primeros pasos de instalacion pero cuando empiezo a instalar hembrew, no reconoce ...

	* **Diego Alexander Forero Higuera (Platzi)** [40369] (3)

		homebrew es un manejador de paquetes para mac, no te va a funcionar en windows, debes instalar chocolatey <https://chocolatey.org/>

* **camiladi** (1) [37774](https://platzi.com/comentario/336812/) 
Tengo una consulta ¬øPor qu√© usar PostgreSQL? ¬øes posible usar alguna otra base de datos? es simple curiosidad, si es que para trabajar en...

	* **Diego Alexander Forero Higuera (Platzi)** [37774] (3)

		Puedes usar cualquier base de datos que desees, se usa postgresql simplemente porque el profesor la selecciono para dar el curso.

* **Federico Pereira Medina** (0) [306630](https://platzi.com/comentario/306630/) 

	Lo mejor es usar docker para no estar instalando nada el la MacOS.

	* **Federico Pereira Medina** [306630] (0)

		docker run --name myPostgres -itd -p 0.0.0.0:5432:5432/tcp -e POSTGRES_PASSWORD=myPostgres postgres:latest

	* **Federico Pereira Medina** [306630] (0)

		docker run --name myRedis -itd -p 0.0.0.0:6379:6379/tcp redis:latest

	* **Federico Pereira Medina** [306630] (0)

		Recomiendo el curso [Fundamentos de Docker](https://platzi.com/clases/docker/) con el profe Marcos Nils

* **Adolfo Cruz Basilio Geniz** (0) [290984](https://platzi.com/comentario/290984/) 

	Soy usuario windows pero me estoy complicando mucho al instalar todo seria mas facil en Ubuntu?

	* **Diego Alexander Forero Higuera (Platzi)** [290984] (2)

		Si, tambi√©n puedes probar cualquier otra distribuci√≥n de linux, pero si no tienes experiencia con linux la m√°s f√°cil para aprender es Ubuntu.

* **MauricioHernanCabrera** (0) [266344](https://platzi.com/comentario/266344/) 

	saben porque me aparece esto en al ejecutar el comando redis-server?  
	![Sin t√≠tulo.png](https://static.platzi.com/media/user_upload/Sin%20t%C3%ADtulo-8023af10-183b-4e78-880d-7b17e4290017.jpg)  
	todo lo demas me funciona perfecto

	* **MauricioHernanCabrera** [266344] (0)

		Encontre la solucion [Enlace a stackoverflow](https://stackoverflow.com/questions/31769097/cant-bind-tcp-listener-6379-using-redis-on-windows)  
		Ejecutan el comando redis-cli, una vez dentro del mismo ejecutan el comando shutdown, y ahora si les va a dejar correr el comando redis-server

	* **Diego Alexander Forero Higuera (Platzi)** [266344] (2)

		El server de redis estaba corriendo, solo que te dec√≠a que no encontraba el archivo de configuraci√≥n, por lo cual usa la configuraci√≥n b√°sica o por defecto.

	* **Adrian Serna** [266344] (0)

		Me pas√≥ lo mismo, lo que hice fue, ‚Äúmatar‚Äù el proceso y volverlo a iniciar <http://therealdanvega.com/blog/2015/04/16/windows-kill-process-by-port-number>

* **dvdsosa** (0) [257325](https://platzi.com/comentario/257325/) 

	Otros gestores de paquetes para macOS son <https://www.macports.org/> y <http://www.finkproject.org/>.

* **Sebastian Cardoso Castillo** (0) [246692](https://platzi.com/comentario/246692/) 

	Por qu√© me instala la versi√≥n 9 de PostgreSQL cuando escribo ‚Äúsugo apt-get install postgresql‚Äù en linux? En el sitio de PostgreSQL esta la versi√≥n 10. [](https://www.postgresql.org/docs/)

	* **Diego Alexander Forero Higuera (Platzi)** [246692] (2)

		La versi√≥n 10 es bastante reciente algunos meses, las distribuciones de linux como ubuntu primero prueban muy bien las nuevas versiones antes de incluirlas dentro de los repositorios para actualizar.

* **Alexander Marenco** (0) [245726](https://platzi.com/comentario/245726/) 

	Instalacion de postgresql fedora -> <http://aprendiendo-software.blogspot.com/2012/07/instalar-y-configurar-postgresql-en.html>

* **Victor Ferreira Angel Ferreira** (0) [243077](https://platzi.com/comentario/243077/) 

	muy buenas prof. Julian Duque y para todos

	* **Victor Ferreira Angel Ferreira** [243077] (0)

		Me gustar√≠a que pudieras incluir un apartado para la instalaci√≥n de las herramientas necesarias en Windows 10 tambi√©n, esto para que no sea un impedimento en el desarrollo de las calases para los que tenemos la limitaci√≥n de contar con este entorno de trabajo.  
		Desde ya gracias.

	* **Victor Ferreira Angel Ferreira** [243077] (2)

		Es una lastima que el Profesor o alguna persona responsable no respondan a las preguntas o inquietudes‚Ä¶

* **carlosextra1** (0) [223039](https://platzi.com/comentario/223039/) 

	Trabajar√© con Ubuntu como m√°quina virtual. Es m√°s f√°cil que Linux?

	* **Diego Alexander Forero Higuera (Platzi)** [223039] (2)

		Ubuntu es una distribuci√≥n de Linux, al igual que Centos, Fedora, RedHat, Manjaro, Arch, etc.

* **Javier Casta√±eda** (0) [212326](https://platzi.com/comentario/212326/) 

	para instalar PostgreSQL para windows y otros‚Ä¶  
	es √©ste enlace  
	<https://www.enterprisedb.com/downloads/postgres-postgresql-downloads#windows>

* **David  Raga Renteria** (0) [204306](https://platzi.com/comentario/204306/) 

	C√≥mo puedo instalar estas herramientas para windows ?
	
	Por npm ?

	* **davidtoca (Platzi)** [204306] (0)

		en windows, puedes usar el sistema de paquetes <https://chocolatey.org/>

	* **davidtoca (Platzi)** [204306] (0)

		o simplemente los instalas por aparte
		
		<https://www.postgresql.org/download/windows/>  
		<https://redis.io/download>

	* **David  Raga Renteria** [204306] (0)

		No me permite instalarlo en sistemas de 32 bits, sabes de alguna manera que me funcione ?

	* **Miguel Angel Gatto** [204306] (0)

		Mir√°, Redis no est√° pensado para Windows. La adaptaci√≥n es para Win de 64 bits. As√≠ que te conviene o reinstalar win para pasarte a 64bits y aparte eso te permite usar mas de 3,25gb de memoria si la tuvieras. O sino ponete un Linux Ubuntu que es f√°cil, pero hac√© backup por las dudas üòâ

* **Juan Carlos  Correa Herrera** (0) [191661](https://platzi.com/comentario/191661/) 

	Y por qu√© no Rethink db para real time? D:

	* **Diego Alexander Forero Higuera (Platzi)** [191661] (4)

		Porque Rethink DB es una base de datos noSQL, y en este caso se necesita poder relacionar agentes con m√©tricas, cada herramienta para cada caso de uso, si es necesario tener relaciones entre los modelos lo mejor es siempre una DB relacional.

	* **Juan Carlos  Correa Herrera** [191661] (0)

		Ya veo, entonces por qu√© Postgres y no MysqlDB/MariaDB ?

	* **Juan Carlos  Correa Herrera** [191661] (0)

		S√≠, estar√≠a fant√°stico saber el por qu√© la elecci√≥n de esas bases de datos y por qu√© no otras, tanto para postgres como para redis.
		
		¬øQu√© caracter√≠sticas tienen que las hace m√°s adecuadas que mysql y mongo, por ejemplo?

	* **Josh Ospina** [191661] (2)

		De acuerdo al alcance del Proyecto escoge la tecnologia que mejor se acomoda.
		
		Particularmente me gusta mas Postgrel por la opcion de poder realizar tambien creacion de documentos JSON de tipo NoSQL

	* **Andrs** [191661] (0)

		joshdev1205  
		Buenisimo ese dato

* **Alexander  Silvera** (0) [191569](https://platzi.com/comentario/191569/) 

	Para el caso de Windows cual versi√≥n de Redis es conveniente descargar??

	* **Juan Carlos  Correa Herrera** [191569] (0)

		En la terminal de Julian aparece que se instal√≥ la versi√≥n 4.0.1, entonces m√≠nimo esa

	* **Juan Carlos  Correa Herrera** [191569] (0)

		Ah bueno, viendo el repo de Redis que dejaron en los comentarios, aparece la 3.0.5 como latest released, pero en su [web oficial](https://redis.io/) aparece la 4.0.1 como latest stable version, so yo opto por esa :B

	* **Juan Carlos  Correa Herrera** [191569] (1)

		Sabes, parece que s√≠ debe ser la del repo en github pues es un ejecutable (.exe), parece que esa es la opci√≥n m√°s c√≥moda, mejor espera que te responda alguien del staff platzi o que suban los art√≠culos que dice Julian sobre instalaci√≥n en windows, de mientras ir√© por la 3.x, no pasa que la actualice despu√©s si es necesario m√°s adelante en el curso o.o

	* **Alexander  Silvera** [191569] (0)

		ok muchas gracias espero respuesta del Staff

## 0070. C√≥mo instalar Visual Studio Code en macOS [8253](https://platzi.com/clases/1151-nodejs/8253-como-instalar-visual-studio-code-en-macos/)

### Descripci√≥n:


 **Visual Studio Code** es el editor que vamos a utilizar en el curso, sin embargo puedes utilizar el editor que m√°s te guste.  
Una de las ventajas de este editor es que tiene un buen soporte para **Node.js** , adem√°s de que est√° desarrollado en **Node**.  
La instalaci√≥n es sencilla y en la documentaci√≥n nos dan las gu√≠as sobre c√≥mo utilizarlo mejor.  
Vamos a utilizar un paquete de desarrollo que se llama **VS Code** for **Node.js** que se puede descargar directamente desde el editor.

### Links:

* [Visual Studio Code - Code Editing. Redefined](https://code.visualstudio.com/)

* [
	
    VS Code for Node.js - Development Pack - Visual Studio Marketplace

](https://marketplace.visualstudio.com/items?itemName=nodesource.vscode-for-node-js-development-pack)

### Comentarios:

* **j2rojasr** (19) [260332](https://platzi.com/comentario/260332/) 

	Para usuarios de Windows:
	
	  1. Descargar VS Code y seleccionar Windows (32 bit o 64 bit a elecci√≥n):  
	_**<https://code.visualstudio.com/Download>**_
	
	  2. Ejecutar el instalador, darle a **_"Siguiente, siguiente, finalizar"_** , finalmente dejar en check la opci√≥n **_"Ejecutar Visual Studio Code"_**.
	
	  3. Una vez tengas el editor abierto, presionar la combinaci√≥n de teclas **_CTRL + SHIFT + X_**. Se abrir√° panel de Extensiones. All√≠ escribir **_"VS Code for Node.js - Development Pack"_** y darle click a **_"Instalar"_**.
	
	  4. Esperar que descargue la extensi√≥n y luego dar click en **_"Recargar"_**
	
	  5. Listo.
	
	
	![¬°Saludos!](https://i.imgur.com/WvmrXDU.png)

* **Leo Uribe** (6) [223439](https://platzi.com/comentario/223439/) 

	Constantemente en el curso se dice que los pasos para instalaciones Linux o Windows estan en loa Atriculos relacionados a cada modulo, pero no encuentro donde puedo encontrar eso? o si en realidad estan?  
	Me podrian indicar donde encuentro esta info?

	* **ricardocelis (Platzi)** [223439] (0)

		hola Leo ya reviso y te confirmo los enlaces por aqu√≠

	* **Diego Alexander Forero Higuera (Platzi)** [223439] (2)

		Algunos est√°n en la descripci√≥n debajo del video, otros los encuentras en la pesta√±a de enlaces o archivos arriba de esta discusi√≥n.

* **gamador** (2) [412488](https://platzi.com/comentario/412488/) 

	Uno de mis Extensiones favoritas es:  
	[Bracket Pair Colorizer](https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer)  
	Colorea los pares de par√©ntesis y llaves para poder identificarlas mas r√°pidamente!!!

* **Oscar Stevens Cuartas Bejarano** (2) [409274](https://platzi.com/comentario/409274/) 

	entonces este curso es para quienes tienen MAC, tengo bastantes problemas para avanzar en el curso con mi windows, y pues soy de los que no tiene para una mac por que si

	* **Alirio Alejandro Angel Arenas** [409274] (1)

		windows tiene la mayoria de instaladores donde solo tienes que dar siguiente una y otra vez desde las paginas oficiales de casa tema, nada que con un googlazo no se resuelva amigo

* **Sebastian Cardoso Castillo** (2) [246703](https://platzi.com/comentario/246703/) 

	Soy usuario de Linux, empece con SublimeText y luego pas√© a Atom que me encant√≥. Hace dos semanas descubr√≠ Visual Studio Code y ya no uso mas Atom. Este editor trabaja mejor con el lenguaje JavaScript. Adem√°s me gustan los temas.

	* **Lucas  Hick** [246703] (0)

		tal cual, hice el mismo camino!

	* **Lucas  Hick** [246703] (0)

		tal cual, hice el mismo camino!

	* **Jecsham Castillo** [246703] (1)

		Misma experiencia. Tambi√©n pas√© por Sublime y Atom y termin√© en Code

* **Emanuel Valero** (1) [875787](https://platzi.com/comentario/875787/) 

	Para instalar VS code an Ubuntu o Debian:
	
	* Descargar el archivo .deb desde la p√°gina oficial: <https://code.visualstudio.com/download>.
	* Desde la terminal, navegar hasta el directorio de descargas, en mi caso ‚Äò~/Downloads‚Äô:
	
	
	``` 
	    cd ~/Downloads
	    
	```
	
	* Instalar el paquete .deb:
	
	
	``` 
	    sudo dpkg -i code*.deb
	    
	```

* **Juli√°n Andr√©s Vela Salazar** (1) [453925](https://platzi.com/comentario/453925/) 

	uso Atom pero me gustan los cambios probare el Visual gracias!

* **Jos√© Valentin Salina Pe√±a** (1) [380994](https://platzi.com/comentario/380994/) 

	Como se llama el tema que usas en vs code???

	* **walis85300 (Platzi)** [380994] (2)

		Personalmente uso el Material Theme en VSCode

* **Victor Riveros** (1) [366410](https://platzi.com/comentario/366410/) 

	creo con esto podr√≠a serle infiel a sublime text‚Ä¶

* **Miguel Angel Espeso Alvarez** (1) [331823](https://platzi.com/comentario/331823/) 

	Hola, yo estaba funcionando convisual studio en windows pero al pasarme a Ubuntu ve va muy despacio y me ralentiza el ordenador incluso llegando a trabarlo.  
	Sigo buscado el ¬ø¬ø porque‚Ä¶???  
	Utilizando sublime-text no me llego a familiarizar, mas estando acostumbrado a visual studio.

	* **Diego Alexander Forero Higuera (Platzi)** [331823] (2)

		Revisa el consumo de memoria, si no recuerdo mal tu tienes un compu con menos de 1gb de ram, en linux existe algo llamado memoria swap el cual usa el disco duro como memoria ram, pero al ser un disco mecanico es muy lento y por esto se traba tu compu, una opci√≥n es desactivar la memoria swap escribiendo esto en la terminal `sudo swapoff`

	* **Miguel Angel Espeso Alvarez** [331823] (1)

		Efectivamente @GOLLUM23 estas en lo cierto. El de 750 Gb de RAM le utilice hasta que solucionaba lo de Rethinkdb en el 18.04.  
		Pero en este tambien tengo la SWAP activada.  
		La desactivare a ver que tal, y practico lo aprendido en el curso de servidores Linux, si no se olvida.  
		Gracias por estar ah√≠ con tus soluciones.

	* **Miguel Angel Espeso Alvarez** [331823] (1)

		Ahora parece que va mejor, gracias

* **Armando_Alamilla** (1) [321350](https://platzi.com/comentario/321350/) 

	Yo me acostumbr√© a sublime text ‚ù§Ô∏è

* **Jos√© Valentin Salina Pe√±a** (1) [41884](https://platzi.com/comentario/380994/) 
Como se llama el tema que usas en vs code???

	* **walis85300 (Platzi)** [41884] (2)

		Personalmente uso el Material Theme en VSCode

* **Victor Hugo Cortes Posada** (0) [225010](https://platzi.com/comentario/225010/) 

	Al intentar instalar en windows se me presento el siguiente error:  
	`C:\Program Files\Microsoft VS Code\Code.VisualElementsManifest.xml
	
	An error ocurred while trying to rename a file in the destination directory:  
	MoveFile failed; code 5.  
	Access is denied.
	
	Click Retry to try again, ignore to skip this file (not recommended), or Abort to cancel installation.`  
	Finalece unos procesos de code.exe, git.exe y los de mi antivirus para continuar.

	* **Diego Alexander Forero Higuera (Platzi)** [225010] (1)

		Intenta instalar como administrador, son problemas de permisos.

## 0080. C√≥mo instalar Ansible en macOS [8254](https://platzi.com/clases/1151-nodejs/8254-como-instalar-ansible-en-macos/)

### Descripci√≥n:


Otra herramienta que vamos a utilizar es **Ansible** , que nos sirve para automatizar tareas de infraestructura. La vamos a utilizar para crear _scripts_ de manera automatizada.

Para instalar **Ansible** vamos a utilizar **Homebrew** con el comando:  
`$ brew install ansible`

Por otro lado vamos a descargar **Vagrant** , que nos permite tener ambientes de desarrollo o servidores virtuales para hacer primero un _deploy_ local antes de hacer despliegue en la nube.

### Links:

* [Vagrant by HashiCorp](https://www.vagrantup.com/)

### Comentarios:

* **Marvkare** (18) [236129](https://platzi.com/comentario/236129/) 

	Instalaci√≥n de ansible solo en Windows 10 y curiosidades de ansible  
	![](https://scontent.fmex10-1.fna.fbcdn.net/v/t1.0-9/26165870_1397393563720623_3712627452041491663_n.jpg?oh=de93e2abc135de19320c638052637dd9&oe=5AC64928)
	
	-Espero les funcione peque√±as almas centelleantes :3
	
	-instalaci√≥n de bash Ubuntu **Obligatorio**
	
	<https://www.youtube.com/watch?v=3fwa73Ogn8c>
	
	Versi√≥n en ingles que me funci√≥n al 100 xD
	
	[https://www.youtube.com/watch?annotation_id=annotation_2430287973&feature=iv&src_vid=9g0IGoRJtzM&v=GFymkJiTlYU](https://www.youtube.com/watch?annotation_id=annotation_2430287973&feature=iv&src_vid=9g0IGoRJtzM&v=GFymkJiTlYU)
	
	-Instalaci√≥n de ansible
	
	<https://www.youtube.com/watch?v=Zimn-UCbQ0A>  
	versi√≥n en ingles :3
	
	<https://www.youtube.com/watch?v=9g0IGoRJtzM>
	
	-Curiosidades de ansible
	
	<https://www.youtube.com/watch?v=uqMkIdLE0AQ>  
	<http://web.mit.edu/rhel-doc/4/RH-DOCS/rhel-rg-es-4/ch-ssh.html>

	* **Marvkare** [236129] (0)

		olvide poner este video xD  
		[https://www.youtube.com/watch?v=slNIwBPeQvE&t=1s](https://www.youtube.com/watch?v=slNIwBPeQvE&t=1s)

	* **Jos√© Tuzinkievicz** [236129] (1)

		Me sirvi√≥ el de la instalaci√≥n de Ansible. Muchas gracias.

	* **LinusKey7** [236129] (1)

		jajajajjaj soy una peque√±a alma centellante üòÇ

	* **luisrangelc** [236129] (1)

		[](https://docs.ansible.com/ansible/latest/user_guide/windows_setup.html)

	* **luisrangelc** [236129] (1)

		[Windows 10](https://docs.ansible.com/ansible/latest/user_guide/windows_setup.html)

	* **luisrangelc** [236129] (1)

		[Windows 10 - ](https://www.jeffgeerling.com/blog/2017/using-ansible-through-windows-10s-subsystem-linux)

* **ivanguerra10** (8) [225001](https://platzi.com/comentario/225001/) 

	Instalar Ansible para Ubuntu (16.04):
	
	<https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-ansible-on-ubuntu-16-04>

* **Camilo Castillo** (7) [338949](https://platzi.com/comentario/338949/) 

	Instalaci√≥n de Ansible para Ubuntu
	
	* sudo apt-add-repository ppa:ansible/ansible
	
	* sudo apt-get update
	
	* sudo apt-get install ansible
	
	
	
	
	para comprobar la version de Ansible
	
	* ansible --version  
	Para instalar Vagrant en la consola colocar estos comandos
	
	* apt-get install virtualbox
	
	* apt-get install vagrant
	
	
	

	* **Josu√© Isaac Fuentes L√≥pez** [338949] (2)

		Ubuntu power jajaja

	* **Eduardo Ignacio Denis** [338949] (5)

		En Ubuntu 18.04 no me funcio agregar la ppa:ansible/ansible
		
		tuve que agregar el repositorio universe para ansible y el multiverse para virtualbox y vagrant
		
		$ sudo add-apt-repository universe  
		$ sudo apt-get install ansible
		
		$ sudo add-apt-repository multiverse  
		$ sudo apt-get install virtualbox  
		$ sudo apt-get install vagrant

* **MarlaCpp** (5) [841624](https://platzi.com/comentario/841624/) 

	Hola, yo instale ansible en windows 10 con ayuda de la aplicaci√≥n de ubuntu para windows 10, y no es una maquina virtual. Este es el v√≠deo que explican como hacerlo <https://www.youtube.com/watch?v=4sMFybv74Uo> y si quieren m√°s informaci√≥n de esta herramienta pueden ver este blog: <https://blogs.msdn.microsoft.com/commandline/learn-about-windows-console-and-windows-subsystem-for-linux-wsl/> que de verdad es muy interesante, espero les sirva.

	* **Deyvis Neyser Valdez Gavilan** [841624] (3)

		Gracias MarlaCpp, excelente aporte.

* **carlos galvan grajales** (5) [237002](https://platzi.com/comentario/237002/) 

	Hola, muchas gracias por montar este curso, esta genial, solo me gustaria que tubiera cosas como:  
	Por que usas esos programas exactamente en comparacion a otros que tambien son populares y que ense√±aras a instalarlos en otros sistemas como windows, aun que he visto que montan en los comentarios links para eso, no es lo mismo a verlo en un video, pero repito: Esta genial el curso!.

* **Angel Hayling** (3) [605536](https://platzi.com/comentario/605536/) 

	Saludos, me gustaria se√±alar un t√©ma, la cosa es, se entiende que para este tipo de t√©mas te quieran dirigir a el uso de macOS o Linux, pero (al menos bajo mi opini√≥n), me parece que deber√≠an dar aunque sea una introducci√≥n a c√≥mo ir√≠a por lo menos la instalaci√≥n de productos en el sistema operativo tanto windows como linux, as√≠ sea un escr√≠to como han hecho en clases pasada. Esto es solo una recomendaci√≥n personal, ya que, honestamente hablando, fue una de las cosas que m√°s me llam√≥ de platzi, que te ense√±an en un OS, pero, de igual forma te dejan una instrucci√≥n de c√≥mo realizar lo mismo desde los otros OS. Gracias

	* **Phantom45** [605536] (1)

		lo que pasa es que este es un curso antiguo, por eso mismo, no tienen implementadas algunas de las cosas que hacen ahora‚Ä¶

* **Oscar Stevens Cuartas Bejarano** (3) [407924](https://platzi.com/comentario/407924/) 

	huy noo pero que paso con windows mano,‚Ä¶

* **Andres Leonardo Arevalo** (3) [242425](https://platzi.com/comentario/242425/) 

	Me van a odiar por este comentario, pero que bueno que desarrollaron el curso sobre mac, lo compre hasta hace muy poco y no le hab√≠a sacado provecho a la maquinita jeje, no sab√≠a que se pod√≠a hacer todo esto en ese so.

* **Giovanny Betancourt** (3) [191481](https://platzi.com/comentario/191481/) 

	Juli√°n alguna raz√≥n especial para trabajar con Vgrant y no con Docker?

	* **Diego Alexander Forero Higuera (Platzi)** [191481] (15)

		Docker te permite correr containers por lo general linux, Vagrant te permite correr maquinas virtuales para poder emular los procesos de deploy manteniendo una consistencia con el entorno de producci√≥n.
		
		Docker es muy util si corres entornos de desarrollo con micro servicios ya que los contenedores son livianos e inician muy r√°pido.
		
		Creo que eso es lo m√°s importante.

	* **Giovanny Betancourt** [191481] (0)

		Gracias!

	* **Luis Osvaldo  Ledo Torrez** [191481] (4)

		creo que al final dar√°n cursos de microsoft office jajajaja

	* **Joaquin Araujo** [191481] (0)

		¬øno es m√°s liviano trabajar con Docker?

	* **nicolasnatoli** [191481] (1)

		Hoy, hay ambientes de produccion con Docker, incluso serverless ,si usas fargate en aws por ejemplo, pero estoy de acuerdo con que es mejor usar vagrant para emular los procesos de deploy.
		
		Estaria bueno poner el deploy de la app con ECS de aws, o kubernets por ejemplo.

* **charl-barrera** (2) [763407](https://platzi.com/comentario/763407/) 

	docker podr√≠a hacer la competencia de Vagrant?

	* **Santiago Andres Diaz Villarreal** [763407] (1)

		Si, la verdad no se entiende porque no manejamos docker.

* **Phantom45** (2) [610968](https://platzi.com/comentario/610968/) 

	[Instalar Ansible en Windows](http://www.oznetnerd.com/installing-ansible-windows/)

* **rodrigo-edgardo-armenta-santia** (1) [989210](https://platzi.com/comentario/989210/) 

	Funciona si se instala ansible en windows desde una subplataforma de ubuntu usando ‚ÄúWindows subsystem for linux‚Äù ?

* **MartinMB** (1) [965172](https://platzi.com/comentario/965172/) 

	800 cosas hay que instalar

* **Oscar Torres** (1) [933047](https://platzi.com/comentario/933047/) 

	Instale Ansible en ubuntu usando esta guia <https://www.digitalocean.com/community/tutorials/como-instalar-y-configurar-ansible-en-ubuntu-18-04-es>

* **juan-d-martin** (1) [908926](https://platzi.com/comentario/908926/) 

	Ansible lo us√© una vez en un curso de la universidad, jam√°s lo logr√© entender demasiado bien, espero lograr entenderlo en esta oportunidad

* **orivasm44** (1) [442055](https://platzi.com/comentario/442055/) 

	Hola PM2 <http://pm2.keymetrics.io/> seria un similar de Ansible ??

	* **Jair Israel Avil√©s Eusebio** [442055] (2)

		Hola, no necesariamente. Ansible permite automatizar tareas para el despliegue, configuracion y orquestracion de un sistema, mientras que PM2 es un administrador de procesos daemon para Node.JS que tiene caracteristicas como un balanceador de carga. Ambas herramientas se complementan en el flujo de DevOps.

* **David Daniel Castillo Nava** (1) [379304](https://platzi.com/comentario/379304/) 

	Alguien que me ayude con la instalaci√≥n en windows 7??

	* **Diego Alexander Forero Higuera (Platzi)** [379304] (1)

		Intenta siguiendo esto  
		<http://docs.ansible.com/ansible/latest/intro_windows.html>
		
		Tienes que tener en cuenta que es para windows 10.
		
		<https://ericsysmin.com/2016/07/28/install-ansible-on-windows/>
		
		En este enlace debes instalar todos los paquetes o librer√≠as del paso 2

* **Cesar Octavio de Jes√∫s Meza Carrillo** (1) [373101](https://platzi.com/comentario/373101/) 

	Como puedo instalar Ansible en Windows?

	* **Diego Alexander Forero Higuera (Platzi)** [373101] (1)

		Prueba esto  
		<http://docs.ansible.com/ansible/latest/intro_windows.html>
		
		Tienes que tener en cuenta que es para windows 10.
		
		<https://ericsysmin.com/2016/07/28/install-ansible-on-windows/>
		
		En este enlace debes instalar todos los paquetes o librer√≠as del paso 2

* **tzalejo** (1) [368345](https://platzi.com/comentario/368345/) 

	Buenas, consulta estaba instalando Vagrant y me salio que se instalo correctamente.  
	Luego cierro y abro la terminal y me da el siguiente error en la terminal:
	``` 
	    Last login: Thu Aug 3020:45:33 on ttys000
	    dyld: Library not loaded: /usr/local/opt/gdbm/lib/libgdbm.4.dylib
	      Referenced from: /usr/local/Cellar/zsh/5.4.2_1/bin/zsh
	      Reason: image not found
	    
	    [Proceso completado]
	    
	```
	
	Alguno le paso?tiene alguna idea de como solucionarlo?  
	Gracias.

	* **tzalejo** [368345] (1)

		me olvide de comentar sistema operativo que uso es macOS.

	* **tzalejo** [368345] (1)

		Bueno encontr√© la soluci√≥n, para aquellos que tengan el mismo problema, les dejo este enlace:  
		[](https://apple.stackexchange.com/questions/311442/broken-terminal)
		
		Saludos.

	* **tzalejo** [368345] (1)

		perd√≥n soy nuevo jaja este es el link  
		<https://apple.stackexchange.com/questions/311442/broken-terminal>

* **Josu√© Isaac Fuentes L√≥pez** (1) [358318](https://platzi.com/comentario/358318/) 

	en lugar de vagrant, se puede usar docker?

	* **Diego Alexander Forero Higuera (Platzi)** [358318] (2)

		Docker es util para desarrollo, pero aqu√≠ se usa vagrant para simular el despliegue de la aplicaci√≥n para lo cual es mejor que docker.

* **Adri√°n Casanova Yuste** (1) [346093](https://platzi.com/comentario/346093/) 

	SI usais **Windows Subsystem for Linux** , no vais a poder instalar completamente VirtualBox, aqui encontrareis el motivo bien explicado:
	
	<https://askubuntu.com/questions/816343/unable-to-install-virtualbox-in-windows-bash-ubuntu-windows-10>
	
	La unica alternativa que he encontrado sin usar es la siguiente:
	
	<https://www.vagrantup.com/docs/other/wsl.html>
	
	Y si no estais familiarizados con la consola de windows, aqui dejo una ayuda para completar el proceso:
	
	<https://www.build-business-websites.co.uk/add-vboxmanage-to-path/>
	
	Ah, y cometar de paso que Vagrant no admite todas las versiones de VirtualBox, solo es compatible con 4.0.x, 4.1.x, 4.2.x, 4.3.x, 5.0.x, 5.1.x, y 5.2.x.
	
	<https://www.vagrantup.com/docs/virtualbox/>

* **C√©sar Garcia** (1) [343284](https://platzi.com/comentario/343284/) 

	Instalaci√≥n en Windows <https://www.youtube.com/watch?v=9g0IGoRJtzM>

* **jesusmurf** (1) [337161](https://platzi.com/comentario/337161/) 

	Tengo poco conocimiento de Devops, Ansible vendr√≠a a ser como un Jenkins pero en terminal de comandos?

	* **Diego Alexander Forero Higuera (Platzi)** [337161] (2)

		Jenkins no solo permite hacer el despliegue de tu aplicaci√≥n, permite correr por ejemplo pruebas automatizadas para asegurar que tu c√≥digo funcione (si tienes test) es un sistema de integraci√≥n continua. Ansible es una herramienta de automatizaci√≥n enfocada en la parte del despliegue de aplicaciones, permite configurar por ejemplo los servidores para iniciar la aplicaci√≥n, no tener downtime al momento de desplegar una aplicaci√≥n, etc. Pueden trabajar de la mano.

	* **jesusmurf** [337161] (1)

		Entonces, entiendo que con Ansible no podr√≠a programar la ejecuci√≥n de los test autom√°ticos‚Ä¶ En la empresa donde trabajo estamos usando Jenkins y aunque soy frontend alguna vez me toca usarlo para lo que es el despliegue de la parte de Angular. Tienen previsto un curso de Jenkins? Podr√≠a ser muy interesante, sobre todo para los desarrolladores Java ya que seg√∫n tengo entendido Jenkins va bastante de la mano con Java. Los backend de donde trabajo usan Spring üòÉ

	* **Diego Alexander Forero Higuera (Platzi)** [337161] (2)

		Jenkins esta hecho con Java pero es un sistema de integraci√≥n continua que sirve para usar con cualquier lenguaje, si hay planes de un curso de Jenkins pero no hay nada definido.

* **Jos√© Ricardo Romo Guti√©rrez** (1) [334074](https://platzi.com/comentario/334074/) 

	despues de tanto tutorial de instalacion xD hubiera preferido un solo video con todas las instalaciones. al final hubiera estado bien, un peque√±o resumen, sobre todos los componente sque isntalamos y como los utilizaremos en la construccion del proyecto.

* **luisitocaiza17** (1) [318053](https://platzi.com/comentario/318053/) 

	Tengo un sistema operativo windows 8.1 por lo que lei Ansible no es soportado por esta versi√≥n üò¶ voy a tener que hacer todo en un maquina virtual‚Ä¶
	
	<https://www.virtualbox.org/wiki/Downloads>
	
	<https://www.ubuntu.com/download/desktop>?

* **Jos√© Rubial** (1) [311334](https://platzi.com/comentario/311334/) 

	‚ÄúEsten muy concentrados porque lo que se viene es c√≥digo‚Äù

* **Victor Hugo Roman Ruiz** (1) [297334](https://platzi.com/comentario/297334/) 

	Es mejor instalar alguna distribuci√≥n Linux que tratar de configurar las herramientas en windows e instalarlo en una maquina virtual dentro de windows. pueden instalar junto a windows para seleccionar uno en el arranque.  
	[Tutorial](https://www.genbeta.com/paso-a-paso/linux-paso-a-paso-instalar-ubuntu-con-dual-boot-junto-a-windows-10)

	* **Miguel Angel Espeso Alvarez** [297334] (1)

		Una buena solucion, estoy trabajando con un viejo pc al que le puse Ubuntu, y se traba mucho.  
		¬ø Tu ya probaste esa opcion ?  
		Gracias

	* **Victor Hugo Roman Ruiz** [297334] (2)

		si, desperdicie mucho tiempo configurando el entorno para windows. debes verificar que versi√≥n de ubuntu es recomendable para tu pc.  
		saludos!

* **Teofilo Rosales Gama** (1) [295304](https://platzi.com/comentario/295304/) 

	este curso lo puedo hacer en windos 10 (Virtual mchine ubuntu 16.04 a mas)  
	?

	* **Diego Alexander Forero Higuera (Platzi)** [295304] (1)

		Te va a funcionar sin problema en una maquina virtual con linux, vas a poder instalar todo lo que necesitas y seguir el curso sin problema.

	* **Teofilo Rosales Gama** [295304] (0)

		Me sales esto :  
		![VirtualBox_ubuntu_08_05_2018_16_46_42.png](https://static.platzi.com/media/user_upload/VirtualBox_ubuntu_08_05_2018_16_46_42-529d8c3e-e31f-4822-93f7-6e8227ed0749.jpg)

* **Luis Guti√©rrez** (1) [248281](https://platzi.com/comentario/248281/) 

	**Ubuntu:**
	
	Se me presentaron varios incovenitentes para instalar ansible, despues de investigar un poco encontre que es tan facil como activar una casilla.  
	![](https://i.stack.imgur.com/DiL3n.png)
	
	Nota: para encontrar una soluci√≥n relacionada a linux, lo mejor es buscar en ingles, aunque no lo entiendas completamente, si entiendes sobre programaci√≥n sera m√°s que suficiente.

* **Alberto Hern√°ndez L√≥pez** (1) [225371](https://platzi.com/comentario/225371/) 

	Veo que muchos tienen problemas con algunos softwares que utilizamos en los cursos, yo les recomiendo instalar una distribuci√≥n de LINUX si no tienen MAC (es lo que yo he hecho), utilizo Debian en una partici√≥n de mi disco, les ahorrar√° montones de problemas,
	
	Saludos.

* **Diego Chavez Zu√±iga** (1) [214811](https://platzi.com/comentario/214811/) 

	no todos tenemos mac üò¶

	* **Diego Alexander Forero Higuera (Platzi)** [214811] (3)

		Puedes montar una maquina virtual con cualquier versi√≥n de linux y te quita muchos dolores de cabeza o pasat√© directamente a linux, todos los comandos que se corren en mac funcionan en linux.

	* **Diego Chavez Zu√±iga** [214811] (1)

		gracias que distribuci√≥n de linux me recomiendas?

	* **Diego Alexander Forero Higuera (Platzi)** [214811] (3)

		Para que no tengas problemas puedes usar ubuntu.

	* **juand_silva** [214811] (2)

		O puedes correr Linux nativo en windows:  
		[subsystem linux for windows](https://www.howtogeek.com/249966/how-to-install-and-use-the-linux-bash-shell-on-windows-10/)  
		[install ansible on linux for windows](https://www.jeffgeerling.com/blog/2017/using-ansible-through-windows-10s-subsystem-linux)

	* **Adrian Serna** [214811] (0)

		@juand_silva! Compa√±ero, esto es m√°gino, muchas gracias!

* **Jesus Sandrea** (1) [208298](https://platzi.com/comentario/208298/) 

	Me podr√≠an decir como lo instalo en windows, en la documentaci√≥n no veo el comando exacto?

	* **Diego Alexander Forero Higuera (Platzi)** [208298] (2)

		No es solo un comando como en linux o mac, tienes que seguir una serie de pasos para lograrlo, aqu√≠ te dejo la documentaci√≥n de como hacerlo.
		
		<http://docs.ansible.com/ansible/latest/intro_windows.html>
		
		Tienes que tener en cuenta que es para windows 10.

	* **Jesus Sandrea** [208298] (3)

		<https://ericsysmin.com/2016/07/28/install-ansible-on-windows/>
		
		Aqui les dejo este link con las instrucciones para instalar ansible en windows.

	* **Rub√©n P√©rez Durand** [208298] (0)

		Para instalar cada paquete hay varios , como saber cual instalar en el paso 2.

	* **Diego Alexander Forero Higuera (Platzi)** [208298] (1)

		Tienes que instalar todos los paquetes.

* **John Anhuaman Centeno AC** (1) [192312](https://platzi.com/comentario/192312/) 

	C√≥mo puedo instalar Ansible para Windows?

	* **Diego Alexander Forero Higuera (Platzi)** [192312] (2)

		El soporte para windows es relativamente nuevo en Ansible, puedes usar la documentaci√≥n que existe en su p√°gina oficial.  
		<http://docs.ansible.com/ansible/latest/intro_windows.html>

	* **Dobleve Tres** [192312] (0)

		alguien pudo instalarlo en windows ?

	* **fabiojcortesr** [192312] (4)

		@GOLLUM23 Siguiendo todos esos pasos se puede continuar con el curso? Vale la pena seguir el curso con windows? Ser√≠a bueno para una pr√≥xima oportunidad, que cuando publiquen el curso, indiquen los procesos de instalaci√≥n para todos los sistemas operativos.

	* **Sergio Zapata Donado** [192312] (1)

		Hasta este punto estoy perdiendo el inter√©s en seguir siendo que todo es en mac

	* **Diego Alexander Forero Higuera (Platzi)** [192312] (3)

		@SergioZapataDonado, eso no debe ser un impedimento, yo uso linux y no puedo instalar ni scketch ni ning√∫n programa de adobe, hice los cursos por aprender cosas nuevas.
		
		Tienes que tener en cuenta que debes aprender a sortear con las dificultades de poder instalar un entorno de desarrollo o producci√≥n en cualquier sistema, por ejemplo no es lo mismo instalar algo en ubuntu server que en centos o redhat, uno el gestor de paquetes es diferente y otro hay cosas que tienes que hacer adicional en uno que no tienes que hacer en otro como compilar algunas librer√≠as a mano.
		
		Esto es lo apasionante de aprender nuevas tecnolog√≠as.

* **fernan942** (1) [78229](https://platzi.com/comentario/917519/) 
Cuando actulizaran este curso? Debe verdad que me decepcione al igual que muchos, tratando de instalar todos estos componentes para win y...

	* **Juan David Castro (Platzi)** [78229] (1)

		Recuerda que puedes tomar la [Escuela de JavaScript](https://platzi.com/escuela-javascript/) para aprender tanto Frontend como Backend y a integrarlos en una aplicaci√≥n funcional. Luego de esta carrera tal vez est√©s mejor preparado para este curso, aunque tambi√©n vamos a analizar muy bien c√≥mo seguir este curso desde sistemas diferentes a Mac.

* **David Daniel Castillo Nava** (1) [41754](https://platzi.com/comentario/379304/) 
Alguien que me ayude con la instalaci√≥n en windows 7??

	* **Diego Alexander Forero Higuera (Platzi)** [41754] (1)

		Intenta siguiendo esto  
		<http://docs.ansible.com/ansible/latest/intro_windows.html>
		
		Tienes que tener en cuenta que es para windows 10.
		
		<https://ericsysmin.com/2016/07/28/install-ansible-on-windows/>
		
		En este enlace debes instalar todos los paquetes o librer√≠as del paso 2

* **Cesar Octavio de Jes√∫s Meza Carrillo** (1) [41152](https://platzi.com/comentario/373101/) 
Como puedo instalar Ansible en Windows?

	* **Diego Alexander Forero Higuera (Platzi)** [41152] (1)

		Prueba esto  
		<http://docs.ansible.com/ansible/latest/intro_windows.html>
		
		Tienes que tener en cuenta que es para windows 10.
		
		<https://ericsysmin.com/2016/07/28/install-ansible-on-windows/>
		
		En este enlace debes instalar todos los paquetes o librer√≠as del paso 2

* **jesusmurf** (1) [37813](https://platzi.com/comentario/337161/) 
Tengo poco conocimiento de Devops, Ansible vendr√≠a a ser como un Jenkins pero en terminal de comandos?

	* **Diego Alexander Forero Higuera (Platzi)** [37813] (2)

		Jenkins no solo permite hacer el despliegue de tu aplicaci√≥n, permite correr por ejemplo pruebas automatizadas para asegurar que tu c√≥digo funcione (si tienes test) es un sistema de integraci√≥n continua. Ansible es una herramienta de automatizaci√≥n enfocada en la parte del despliegue de aplicaciones, permite configurar por ejemplo los servidores para iniciar la aplicaci√≥n, no tener downtime al momento de desplegar una aplicaci√≥n, etc. Pueden trabajar de la mano.

* **Jeffry Davila** (0) [362869](https://platzi.com/comentario/362869/) 

	Para instalar la consola de linux en window 10: <https://www.youtube.com/watch?v=jpYTrdYU-98>

* **luism88** (0) [322721](https://platzi.com/comentario/322721/) 

	Realmente me hace ruido que este curso, que utiliza herramientas mantenidas por la comunidad del software libre, se lleve a cabo en una MAC. Me parece contradictorio.  
	Solo es un peque√±a observaci√≥n que no afecta a la calidad del curso, debo decir me parece excelente.  
	Saludos

	* **Diego Alexander Forero Higuera (Platzi)** [322721] (2)

		En la industria la mayor√≠a de desarrolladores frontend usan mac, es una realidad de la industria, muchos buenos programas para compartir los dise√±os solo funcionan en mac como es sketch, los backend por lo general usamos linux a nivel profesional.

* **Iv√°n Mauricio Toro Cifuentes** (0) [321482](https://platzi.com/comentario/321482/) 

	Instalar [Ansible](https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-ansible-on-ubuntu-16-04) y [Vagrant](https://www.vagrantup.com/downloads.html) en Ubuntu 18.04.

* **Alfredo Zanoni** (0) [321104](https://platzi.com/comentario/321104/) 

	Se puede seguir este curso sin la necesidad de inslar ansible? no es una opcion en mi caso tener MAC/Linux, solo puedo usar windows‚Ä¶e instalar ansible en windows es un dolor de cabeza‚Ä¶la idea era aprender nodejs‚Ä¶

	* **camiladi** [321104] (1)

		Para los que les pueda servir, pueden instalar el Bash de ubuntu en windows 10.  
		<https://winphonemetro.com/2016/08/como-instalar-bash-ubuntu-windows-10-anniversary>
		
		luego instalas **ansible** como si estuvieses en linux.

* **Sanders Smith Guti√©rrez Mena** (0) [303629](https://platzi.com/comentario/303629/) 

	Para cualquier plataforma linux <https://pkgs.org/download/ansible>

* **Dharman Ballesteros Bedoya** (0) [300445](https://platzi.com/comentario/300445/) 

	Si tengo windows 7, que es lo mas recomendable que puedo hacer para llevar a cabo este curso sin mayores inconvenientes?

	* **Diego Alexander Forero Higuera (Platzi)** [300445] (2)

		Puedes instalar una maquina virtual usando virtual box, en esa maquina instalas cualquier distribuci√≥n de linux y no vas a tener problema con instalaci√≥n de nada.

	* **Dharman Ballesteros Bedoya** [300445] (0)

		Muchas gracias, eso har√©.

* **Fabi√°n Antonio Salgado Sep√∫lveda** (0) [298805](https://platzi.com/comentario/298805/) 

	Para windows me funciono el siguiente tutorial:  
	[Ansible en window](http://adamaconsulting.blogspot.cl/2016/01/como-instalar-ansible-en-windows.html)
	
	Espero les sirva

* **Sebastian Cardoso Castillo** (0) [286416](https://platzi.com/comentario/286416/) 

	Creo que webpack como lo tengo configurado no necesito estas herramientas porque hace lo mismo (automatiza tareas y crea un servidor y ambientes de desarrollo)

* **Victor Hugo Roman Ruiz** (0) [285912](https://platzi.com/comentario/285912/) 

	Que tal Devs, estoy armando un entorno windows-linux para este proyecto, me podrian ayudar donde podria instalar cada software para el ambiente de produccion?.

	* **Diego Alexander Forero Higuera (Platzi)** [285912] (1)

		No entiendo lo que necesitas, puedes ser m√°s claro?

	* **Victor Hugo Roman Ruiz** [285912] (0)

		ok una disculpa, no tengo un equipo con un buen hardware y quiero delegar responsabilidades con otra pc vieja. quiero instalar lo que son el servidor en ubuntu y desarrollar en windows. pero no se si se pueda en ubuntu con Ansible, redis para comunicacion con windows.  
		no se si soy mas claro.
		
		saludos, gracias por dar seguimiento

* **walter** (0) [273393](https://platzi.com/comentario/273393/) 

	hola alguien pudo instalar el ansible windows yo trate seg√∫n las instrucciones que fui encontrando , pero cuando ejecuto bash para instalar lo que falta no hace nada .

	* **Diego Alexander Forero Higuera (Platzi)** [273393] (4)

		Mi recomendaci√≥n personal es que montes una maquina virtual con ubuntu y hagas el cursos desde esta maquina virtual, vas a tener muchos menos dolores de cabeza y el entorno de linux es similar al del servidor donde vas a desplegar tu aplicaci√≥n.

* **carlos galvan grajales** (0) [245695](https://platzi.com/comentario/245695/) 

	Para los que quieran instalar Ansible en windows 10 con 64 bits que est√©n intentando lo de windows y linux pero no les aparezca como instalada una distribuci√≥n de linux instalada, la pueden descargar por aqu√≠: <https://docs.microsoft.com/es-es/windows/wsl/install-win10>

* **Samuel Alejandro Tazzo Pe√±a** (0) [220910](https://platzi.com/comentario/220910/) 

	**Profesor** podr√≠a explicar al menos en comentarios o dirigi√©ndonos a alguna pagina de como instalar Ansible en Windows.?? hay alguna soluci√≥n.?

	* **Victor Hugo Cortes Posada** [220910] (2)

		Este articulo te puede ser muy util si tienes windows 10 de 64-bit
		
		<https://www.jeffgeerling.com/blog/2017/using-ansible-through-windows-10s-subsystem-linux>

* **Rub√©n P√©rez Durand** (0) [215301](https://platzi.com/comentario/215301/) 

	Me gustar√≠a saber como instalar Ansible en windows.

	* **Diego Alexander Forero Higuera (Platzi)** [215301] (1)

		<http://docs.ansible.com/ansible/latest/intro_windows.html>
		
		Tienes que tener en cuenta que es para windows 10.
		
		<https://ericsysmin.com/2016/07/28/install-ansible-on-windows/>
		
		En este enlace debes instalar todos los paquetes o librer√≠as del paso 2

	* **Samuel Alejandro Tazzo Pe√±a** [215301] (0)

		DE que manera se instalan esos paquetes ?? sirve de algo la consola que se instala en el paso 1.??

	* **juand_silva** [215301] (3)

		Puedes correr Linux nativo en windows:
		
		* [subsystem linux for windows](https://www.howtogeek.com/249966/how-to-install-and-use-the-linux-bash-shell-on-windows-10/)
		
		* [install ansible on linux for windows](https://www.jeffgeerling.com/blog/2017/using-ansible-through-windows-10s-subsystem-linux)
		
		
		
		
		Funciona muy bien!

* **Edisson Mata** (0) [215149](https://platzi.com/comentario/215149/) 

	puedo seguir este curso usando windows 10?

	* **Diego Alexander Forero Higuera (Platzi)** [215149] (2)

		Si, pero va a costar un poco instalar algunas cosas, te recomiendo mejor instalar una maquina virtual con linux y hacer el curso desde esa maquina virtual.

	* **Rub√©n P√©rez Durand** [215149] (0)

		Cuales serian las caracter√≠sticas que tendr√≠a que tener esta maquina virtual.

	* **Miguel Angel Gatto** [215149] (0)

		Con 4 gb de ram va a andar, menos funciona igual pero m√°s lento y con 8 gb ya est√°s bien. Por eso te conviene tener instalado los en la pc as√≠ vas conociendo todas las opciones que ten√©s como usuario de PC.

# Arquitectura del Proyecto (Platziverse) [1466]

## 0090. Arquitectura y Componentes del proyecto [8324](https://platzi.com/clases/1151-nodejs/8324-arquitectura-y-componentes-del-proyecto/)

### Descripci√≥n:


### Comentarios:

* **Ivan Robles** (53) [292225](https://platzi.com/comentario/292225/) 

	Apenas voy iniciando este curso, me tom√© la libertad de crear una imagen con la arquitectura del proyecto ![](https://i.imgur.com/SeEckP4.jpg)

	* **Cesar Octavio de Jes√∫s Meza Carrillo** [292225] (2)

		Gracias por la grafica

	* **Angelo Segura** [292225] (2)

		Excelente para repasar

	* **Victor Hugo Roman Ruiz** [292225] (2)

		pasa el link

	* **OSCAR HUMBERTO REYES TORRES** [292225] (1)

		Gracias, es muy util

* **Jos√© Rubial** (12) [311347](https://platzi.com/comentario/311347/) 

	 **Aplicacion Platziverse** (Plataforma de **IoT** )
	
	**Componentes:**  
	- **platziversedb** (Modulo): Comunicaci√≥n con la Base de Datos. Aqu√≠ almacenaremos los componentes y las m√©tricas que van a estar almacenando la informaci√≥n de la aplicaci√≥n. Cada vez que ingrese informaci√≥n en tiempo real se almacenara mediante este modulo. Tambi√©n enviara informaci√≥n (en demanda) cada vez que se consulte la API.  
	- **Agent** (Agente de monitoreo): Definimos las m√©tricas que queremos monitorear y de manera real-time. A trav√©s de MQTT entregaremos la informaci√≥n por dos canales de comunicaci√≥n **web** (para mostrarlas) **DB** para guardarlas.  
	- **Servidor** (API): cargaremos las primeras 20 m√©tricas para dibujar en pantalla una gr√°fica y despu√©s actualizarla de manera real-time. La conexi√≥n con el servidor web se har√° mediante **proxy** para autenticaci√≥n y **tokens** de JSON (JWT).

* **Juan Carlos  Correa Herrera** (9) [191662](https://platzi.com/comentario/191662/) 

	Excelente _-_
	
	En mi trabajo hice un tipo agente con node que intercambia info de una DB a otra DB por requisitos que me dieron, pero creo que no es lo mejor que puede existir, adem√°s que estamos viendo la opci√≥n de usar sockets para aplicaciones real time con node pero casi no tenemos experiencia con ello usando Node, casi casi soy de los que m√°s familiarizado estoy y el cual evangelizo cada oportunidad que tengo, con esto tendr√© m√°s argumentos para continuar con mi evangelizaci√≥n y que Node sea fuertemente usado, eso me har√° m√°s feliz ‚ù§Ô∏è

* **Alirio Alejandro Angel Arenas** (3) [899811](https://platzi.com/comentario/899811/) 

	me encantaria que tuviese Typescript!.

* **Juan Carlos Suarez Medina** (3) [531531](https://platzi.com/comentario/531531/) 

	esta demasiado interesante, ya quiero ver el proyecto terminado

* **luis_vazquez** (2) [846900](https://platzi.com/comentario/846900/) 

	mmm 3 videos de como instalar todo el ambiente en linux, y para windows?

* **charl-barrera** (2) [786908](https://platzi.com/comentario/786908/) 

	en el grafico, hay una flecha que apunta al agente, me da a entender, que tambien recibe datos, esto es as√≠?

	* **jenapi** [786908] (2)

		Claro, el agente se encarga de monitorear datos, por ende tiene que recibir par√°metros y tambi√©n darlos.

* **alvaritokore** (2) [275400](https://platzi.com/comentario/275400/) 

	¬øEn el diagrama cu√°l es la diferencia entre ON DEMAND y RealTime?

	* **Diego Alexander Forero Higuera (Platzi)** [275400] (7)

		On Demand tu siempre pides la informaci√≥n al server de API, por ejemplo cuando refrescas o ingresas a la pagina.
		
		RealTime se actualiza la informaci√≥n en el navegador sin que hagas nada usando sockets y en este caso se usa el agent.

	* **Felipe Cardona** [275400] (1)

		Cual es la diferenia entre ajax y websockets ?

	* **viciotec** [275400] (2)

		AJAX son peticiones sin recarga y es direccional, mientras que los websockets es bidireccionalidad y siempre esta activa mientras no se cierre el canal.

* **juand_silva** (2) [225095](https://platzi.com/comentario/225095/) 

	Simplemente Sublimes los cursos del profe Julian

* **Carlos Azaustre** (2) [191382](https://platzi.com/comentario/191382/) 

	No se si s√≥lo me pasa a mi, pero √©sta lecci√≥n y la siguiente, no me aparece video :S

	* **ricardocelis (Platzi)** [191382] (2)

		Hola Carlos! Muchas gracias por avisar, ya qued√≥ corregido =)  
		¬°Saludos!

	* **tiodematias** [191382] (2)

		En la app movil, no aparece este v√≠deo.

* **David Behar** (1) [977516](https://platzi.com/comentario/977516/) 

	## MQTT
	
	.  
	[MQTT (Message Queue Telemetry Transport)](http://www.tst-sistemas.es/mqtt/) es un protocolo de transporte de mensajes Cliente/Servidor basado en publicaciones y subscripciones a los denominados ‚Äút√≥picos‚Äù. Cada vez que un mensaje es publicado ser√° recibido por el resto de dispositivos adheridos a un t√≥pico del protocolo.  
	.  
	El protocolo **MQTT** sirve mucho para conectar dispositivos de Internet de las Cosas, lo cual simplifica y hace m√°s sencilla la recogida de datos de sensores, la publicaci√≥n de los diferentes valores obtenidos y la configuraci√≥n remota de los nodos.
	
	## **JWT**
	
	.  
	**JSON Web Token** (abreviado **JWT** ) es un [est√°ndar abierto](https://es.wikipedia.org/wiki/Est%C3%A1ndar_abierto) basado en [JSON](https://es.wikipedia.org/wiki/JSON) para la creaci√≥n de [tokens de acceso](https://es.wikipedia.org/w/index.php?title=Tokens_de_acceso&action=edit&redlink=1) que permiten la propagaci√≥n de identidad y privilegios o _claims_ en ingl√©s (autorizaci√≥n).

* **RAUL HENDE** (1) [672561](https://platzi.com/comentario/672561/) 

	excelente proyecto

* **silvermiguel96** (1) [384144](https://platzi.com/comentario/384144/) 

	Para las personas que est√°n utilizando la maquina virtual cual fue la versi√≥n de ubunto que utilizaron para que nos presentara fallas.

* **Diego Burlando** (1) [359800](https://platzi.com/comentario/359800/) 

	Abracadabra! muy emocionado por ver como se realizan todas estos componentes!

* **Jos√© Rubial** (1) [311335](https://platzi.com/comentario/311335/) 

	La forma en la que se hace la arquitectura de este proyecto se puede estudiar mas a fondo en el curso de arquitectura de software?

	* **Diego Alexander Forero Higuera (Platzi)** [311335] (1)

		En los cursos de arquitectura de software se ense√±a desde la definici√≥n de arquitectura de software, roles, responsabilidades del arquitecto, en el avanzado se ven arquitecturas de aplicaciones pero no como tal se usa esta como ejemplo.

* **Jose Luis Campos Bautista** (1) [81589](https://platzi.com/comentario/984711/) 
¬øQu√© estilos de arquitectura se esta utilizando? Estas pueden ser: Componentes independientes Centrado en datos </...

* **Jose Osses Plaza** (0) [315542](https://platzi.com/comentario/315542/) 
Uppp

* **Byhako** (0) [271140](https://platzi.com/comentario/271140/) 

	Super animado con este curso.

* **Juan** (0) [231220](https://platzi.com/comentario/231220/) 

	porfavor pueden darme el link del curso anterior

	* **Diego Alexander Forero Higuera (Platzi)** [231220] (1)

		<https://platzi.com/clases/node-2016/>

	* **Sebastian Cardoso Castillo** [231220] (0)

		Por que ese curso no se muestra el enlace en la pagina de cursos. Quedo obsoleto con este? Me recomiendan verlo?

* **Samuel Alejandro Tazzo Pe√±a** (0) [220907](https://platzi.com/comentario/220907/) 

	Profesor @julian_duque podr√≠a explicar al menos en comentarios o dirigi√©ndonos a alguna pagina de como instalar Ansible en Windows.?? hay alguna soluci√≥n.?

	* **Diego Alexander Forero Higuera (Platzi)** [220907] (1)

		Prueba instalandolo con <https://chocolatey.org/>, te recomiendo que instales una maquina virtual con linux y vas a poder seguir el curso sin ning√∫n problema.

	* **ignacioaredez** [220907] (0)

		Samuel yo tenia el mismo problema eh instale una maquina virtual con ubunto fue todo muy sencillo avisa si necesitas ayuda. Pero te lo recomiendo aparte asi trabajas con Ubuntu

	* **juand_silva** [220907] (0)

		Puedes correr Linux nativo en windows:
		
		* [subsystem linux for windows](https://www.howtogeek.com/249966/how-to-install-and-use-the-linux-bash-shell-on-windows-10/)
		
		* [install ansible on linux for windows](https://www.jeffgeerling.com/blog/2017/using-ansible-through-windows-10s-subsystem-linux)
		
		
		

* **Samuel Alejandro Tazzo Pe√±a** (0) [220902](https://platzi.com/comentario/220902/) 

	Alguien ha instalado Ansible en Windows.??

	* **Diego Alexander Forero Higuera (Platzi)** [220902] (2)

		Prueba instalandolo con <https://chocolatey.org/>, te recomiendo que instales una maquina virtual con linux y vas a poder seguir el curso sin ning√∫n problema.

	* **juand_silva** [220902] (1)

		Puedes correr Linux nativo en windows:
		
		* [subsystem linux for windows](https://www.howtogeek.com/249966/how-to-install-and-use-the-linux-bash-shell-on-windows-10/)
		
		* [install ansible on linux for windows](https://www.jeffgeerling.com/blog/2017/using-ansible-through-windows-10s-subsystem-linux)
		
		
		
		
		Y funciona muy bien!

* **Sergio Zapata Donado** (0) [204542](https://platzi.com/comentario/204542/) 

	¬øAlguien ha podido instalar todas las cosas que han ‚Äúexplicado‚Äù hasta ahora en windows?

	* **Diego Alexander Forero Higuera (Platzi)** [204542] (2)

		Prueba usando <https://chocolatey.org/>

	* **Juan Jos√© Vega Quintero** [204542] (1)

		Todas me han funcionado menos ansible, hay alguna soluci√≥n

	* **Jesus Sandrea** [204542] (0)

		Igual a mi, todas menos Ansible

	* **juand_silva** [204542] (2)

		Puedes correr Linux nativo en windows:
		
		* [subsystem linux for windows](https://www.howtogeek.com/249966/how-to-install-and-use-the-linux-bash-shell-on-windows-10/)
		
		* [install ansible on linux for windows](https://www.jeffgeerling.com/blog/2017/using-ansible-through-windows-10s-subsystem-linux)
		
		
		

* **Luis Osvaldo  Ledo Torrez** (0) [191869](https://platzi.com/comentario/191869/) 

	buenas tardes a todos en lugar de postgretsql pude ser aplicable a ms sql? y si si es afirmativo, como se llama la librer√≠a de conexi√≥n con ms sql?

	* **all_nexus** [191869] (1)

		Existe un ORM muy bueno llamado sequelize, y lo mejor es que no es solo para postgres sql, tambien mysql, mongo. Link: (<http://docs.sequelizejs.com/>)

	* **Diego Alexander Forero Higuera (Platzi)** [191869] (1)

		Puedes instalar
		``` 
		    npm install--save sequelize
		    
		```
		
		y el conector de mysql es
		``` 
		    npm install--save mysql2
		    
		```

	* **Luis Osvaldo  Ledo Torrez** [191869] (0)

		genial pero funciona para microsoft sql server ?

	* **Luis Alfredo Locon Pe√±a** [191869] (0)

		Si, solo que se instala
		``` 
		    $ npm install --save sequelize
		    
		    //y luego 
		    
		    $ npm install --save tedious // MSSQL
		    
		```

	* **marcelobaez** [191869] (0)

		Si, sequelize soporta sql server.

	* **luis_vazquez** [191869] (1)

		para SQL Server solo necesitas npm install mssql y despu√©s lo que se muestra en la imagen
		
		![NodeSQL.jpg](https://static.platzi.com/media/user_upload/NodeSQL-77fe22b1-14eb-421f-bcb9-006fa7b030e1.jpg)

#  Introducci√≥n a protocolos y patrones de aplicaciones en tiempo real  [1480]

## 0100. C√≥mo funciona el modelo PubSub en MQTT y Web Sockets [8399](https://platzi.com/clases/1151-nodejs/8399-como-funciona-el-modelo-pubsub-en-mqtt-y-web-socke/)

### Descripci√≥n:


### Comentarios:

* **Miguel Gil Rosas** (27) [191824](https://platzi.com/comentario/191824/) 

	Jaja, buen√≠simo el v√≠deo

	* **Leonidas Esteban Gonzalez** [191824] (6)

		estoy de acuerdo

	* **Luis Antonio Schmiel Paredes** [191824] (0)

		x2

* **juand_silva** (16) [313152](https://platzi.com/comentario/313152/) 

	Entendiendo el protocolo MQTT de Internet de las cosas o IOT
	
	![personas.png](https://static.platzi.com/media/user_upload/personas-960bdd71-4064-4c4f-9855-63a27283f074.jpg)
	
	Para que dos cosas se puedan comunicar o conversar tienen que tener un protocolo, por ejemplo para que una PC pueda comunicarse con un server tiene que tener un protocolo HTTP, entonces se pens√≥ como se va a ser para que una cosa se hable con otra cosa a trav√©s de internet, pero esta cosa no tiene el poder computacional que hay en una computadora por ejemplo. Entonces se tiene que crear un protocolo peque√±o, pero al mismo tiempo que se pueda tener confianza, que los datos que se env√≠en desde una pc lleguen a otra cosa.
	
	Entonces fue creado MQTT o MQ TELEMETRY TRANSPORT desde los a√±os 70 IBM ya tenia un servidor MQ que era servidor de mensajer√≠a, ya pensando en eso ya a finales de los a√±os 90 ya pensando en enviar datos de telemetr√≠a algo con sensores, crearon la versi√≥n peque√±a.
	
	MQ TELEMETRY TRANSPORT es un protocolo liviano de mensajer√≠a PUB/SUB PUBLISH/SUBSCRIBE creado por IBM y ARCON (EUROTECH), es un est√°ndar de c√≥digo abierto m√°s usado.
	
	La mejor manera de trabajar:
	
	Donde la red es costosa, tiene poco ancho de banda o no es confiable o cuando se ejecuta en un dispositivo embebido con recursos de memoria o procesador limitados.
	
	Ahora es el protocolo m√°s usado para que los dispositivos se puedan comunicar con otros dispositivos e intercambiar datos.
	
	Ideal para utilizar con redes m√≥viles, se utiliza muy pocos recursos, por esto es muy ideal para utilizar clientes de MQTT con ARDUINO, porque el consumo de recursos es muy peque√±o.
	
	Secuencia del protocolo MQTT:
	
	![mqtt.png](https://static.platzi.com/media/user_upload/mqtt-763d463f-1bc2-447a-ad2f-0f92994ebeaf.jpg)
	
	Se tiene un BROKER como MOSCA que es un servidor que recopila los datos de los PUBLISHERS (que son los objetos que se comunican) le transmiten determinados datos a los SUBSCRIBERS.
	
	MQTT: ¬øc√≥mo funciona?
	
	MQTT es un servicio de publicaci√≥n/suscripci√≥n TCP/IP sencillo y sumamente ligero. Se basa en el principio cliente/servidor.
	
	El servidor, llamado BROKER, recopila los datos que los PUBLISHERS (los objetos comunicantes) le transmiten. Determinados datos recopilados por el BROKER se enviar√°n a determinados PUBLISHERS que previamente as√≠ se lo hayan solicitado al BROKER.
	
	El principio de intercambio se parece mucho al de Twitter. Los PUBLISHERS env√≠an los mensajes a un canal llamado TOPIC. Los SUBSCRIBERS (suscriptores) pueden leer esos mensajes. Los TOPICS (o canales de informaci√≥n) pueden estar distribuidos jer√°rquicamente de forma que se puedan seleccionar exactamente las informaciones que se desean.
	
	Los mensajes enviados por los objetos comunicantes pueden ser de todo tipo pero no pueden superar los 256 Mb.
	
	Ejemplo
	
	El TOPIC ¬´casa/sal√≥n/temperatura¬ª comunicar√° la temperatura del sal√≥n si se suscribe un objeto conectado (el sensor de temperatura presente en el sal√≥n publicar√° peri√≥dicamente en ese TOPIC la temperatura registrada).
	
	Si un PUBLISHER se suscribe al TOPIC ¬´casa/sal√≥n/#¬ª, recibir√° todos los datos del sal√≥n (por ejemplo, luminosidad, humedad, temperatura‚Ä¶).
	
	Si se suscribe al TOPIC ¬´casa/#¬ª, recibir√° todos los datos de los sensores de la casa.
	
	![mqtt2.png](https://static.platzi.com/media/user_upload/mqtt2-3d9cee47-8637-4a3a-8cd1-83340e8373b4.jpg)
	
	Los clientes establecen una conexi√≥n TCP con el BROKER. Los clientes B y C se suscriben al TOPIC temperatura.
	
	![mqtt3.png](https://static.platzi.com/media/user_upload/mqtt3-6d97942e-6af6-4a33-a4e8-d798ec4c1b02.jpg)
	
	El cliente A publica en el TOPIC temperatura un valor de 22,5¬∞. El BROKER difunde el mensaje a todos los clientes que previamente se hayan suscrito al TOPIC ¬´temperatura¬ª.
	
	Seguridad
	
	Los datos de IoT intercambiados pueden resultar muy cr√≠ticos, por lo que es posible garantizar la seguridad de los intercambios en varios niveles:
	``` 
	    ‚Ä¢ Transporte en SSL/TLS
	    ‚Ä¢ Autenticaci√≥n mediante certificados SSL/TLS
	    ‚Ä¢ Autenticaci√≥n mediante usuario y contrase√±a
	    
	```
	
	**QoS**
	
	El MQTT lleva integrada en modo nativo la noci√≥n de QoS (Quality of Service, calidad de servicio). En efecto, el PUBLISHER tiene la posibilidad de definir la calidad de su mensaje.
	
	Hay tres niveles posibles:
	
	* Un mensaje de QoS nivel 0 **at most once** se entregar√° como mucho una vez. Eso significa que el mensaje se env√≠a sin garant√≠as de recepci√≥n (el BROKER no informa al remitente de que ha recibido el mensaje).
	
	* Un mensaje de QoS nivel 1 **at least once** se entregar√° al menos una vez. El cliente lo transmitir√° varias veces si es necesario, hasta que el BROKER le confirme que lo ha enviado a la red.
	
	
	
	
	Un mensaje de QoS nivel 2 **exactly once** ser√° obligatoriamente guardado por el emisor, que lo transmitir√° siempre que el receptor no confirme su env√≠o a la red. La principal diferencia radica en que el emisor utiliza una fase de reconocimiento m√°s sofisticada con el BROKER para evitar la duplicaci√≥n de los mensajes (m√°s lento pero m√°s seguro).

	* **Miguel Angel Espeso Alvarez** [313152] (3)

		Buen trabajo, te lo has currado de verdad‚Ä¶  
		Enhorabuena‚Ä¶

	* **Bruno Echevarria Quiroga** [313152] (1)

		Muy bueno, esta info vale oro.

	* **Iv√°n Mauricio Toro Cifuentes** [313152] (0)

		Excelente aporte.

* **Juan Jos√© Vega Quintero** (16) [205716](https://platzi.com/comentario/205716/) 

	M√°s videos explicativos as√≠

* **David Behar** (7) [977563](https://platzi.com/comentario/977563/) 

	## Pub/Sub
	
	Es un protocolo de transporte de mensajes Cliente/Servidor donde el servidor emite un mensaje basado en ciertos filtros y el cliente recibe los mensajes a los que est√° suscrito.  
	.  
	Existen 2 tipos de suscripci√≥n: **Topic-based** y **Content-based**  
	.  
	Cada vez que un mensaje es publicado ser√° recibido por el resto de dispositivos adheridos a un t√≥pico del protocolo.  
	.  
	Me recuerda mucho al patr√≥n de dise√±o [Observer](https://es.wikipedia.org/wiki/Observer_\(patr%C3%B3n_de_dise%C3%B1o\)), s√≥lo con la diferencia de que en Pub/Sub el cliente no conoce al servidor y el servidor no conoce al cliente y esta comunicaci√≥n la maneja el event bus, mientras que en Observer el cliente y servidor tienen comunicaci√≥n directa.
	
	.
	
	## [MQTT (Message Queue Telemetry Transport)](http://www.tst-sistemas.es/mqtt/)
	
	.
	
	Es un protocolo de transporte de mensajes Cliente/Servidor basado en el patr√≥n Pub/Sub, donde existen publicaciones y subscripciones a los denominados ‚Äút√≥picos‚Äù. Cada vez que un mensaje es publicado ser√° recibido por el resto de dispositivos adheridos a un t√≥pico del protocolo.
	
	.
	
	## [Web sockets](https://developer.mozilla.org/es/docs/Web/API/WebSockets_API)
	
	.
	
	Es una tecnolog√≠a avanzada que hace posible abrir una sesi√≥n de comunicaci√≥n interactiva entre el navegador del usuario y un servidor. Con esta API, puede enviar mensajes a un servidor y recibir respuestas controladas por eventos sin tener que consultar al servidor para una respuesta.
	
	.
	
	Es una tecnolog√≠a que proporciona un canal de comunicaci√≥n bidireccional y [full-duplex](https://es.wikipedia.org/wiki/Duplex_\(telecomunicaciones\)#Full-duplex) sobre un √∫nico [socket](https://es.wikipedia.org/wiki/Socket_de_Internet)[TCP](https://es.wikipedia.org/wiki/Protocolo_de_control_de_transmisi%C3%B3n). Est√° dise√±ada para ser implementada en [navegadores](https://es.wikipedia.org/wiki/Navegador_web) y [servidores web](https://es.wikipedia.org/wiki/Servidor_web), pero puede utilizarse por cualquier aplicaci√≥n cliente/servidor.

* **Oscar Barajas Tavares (Platzi)** (4) [203052](https://platzi.com/comentario/203052/) 

	Excelente explicaci√≥n üòÉ

	* **Leonidas Esteban Gonzalez** [203052] (6)

		Estos materiales son lo mejor!

* **Christian Armando Consuelo May√©n** (3) [427019](https://platzi.com/comentario/427019/) 

	El PubSub suele ser un patr√≥n de dise√±o muy interesante para el ‚Äúreal time‚Äù y sistemas de mensajer√≠as instantaneos. Tambi√©n puedes utilizar un sistema de chaching como Redis para compartir informaci√≥n entre dos tecnolog√≠as diferentes (eg, Node.js y Django con Python)

* **Diego Antonio Bocanegra Galindez** (3) [276240](https://platzi.com/comentario/276240/) 

	jaja, por un momento pens√© que estaba viendo publicidad de Youtube en Platzi. Genial el video.

	* **Bruno Echevarria Quiroga** [276240] (0)

		Pens√© exactamente lo mismo.

* **jenapi** (2) [809806](https://platzi.com/comentario/809806/) 

	REALMENTE AME LA PRESENTACI√ìN‚Ä¶ DE OTRO NIVEL ESTE CURSO!!! A√∫n siendo un poco viejo es de verdad un placer ver cursos tan bien elaborados como este.

* **Juli√°n Andr√©s Vela Salazar** (2) [453938](https://platzi.com/comentario/453938/) 

	excelente contenido motiva a aprender!

* **Ivan Robles** (1) [292228](https://platzi.com/comentario/292228/) 

	Mejor manera de explicar **Pub/Sub** no hay!! üòÄ

* **Oscar Torres** (1) [204322](https://platzi.com/comentario/204322/) 

	No he entendido a√∫n pero luce excelente el video

* **Daniela Gonzales** (1) [65953](https://platzi.com/comentario/700695/) 
Puede ser usado tmbn con kafka?

	* **Jair Israel Avil√©s Eusebio** [65953] (1)

		Asi es, existe [este](https://github.com/SOHU-Co/kafka-node) paquete para integrar un cliente de Kafka a una aplicacion NodeJS facilmente

* **Daniel .** (0) [278113](https://platzi.com/comentario/278113/) 

	ohh me emociona saber que aprender√© todo esto üòÉ

* **Hugo Mart√≠nez** (0) [273796](https://platzi.com/comentario/273796/) 

	Jejeje se la comieron con este video, excelente profe Julian este Curso empezo con buen pie y aun en el video 10 sigue asi

* **Jose Carmona** (0) [248699](https://platzi.com/comentario/248699/) 

	Este curso a medida que avanzo mejora! Excelente!

* **Alberto Hern√°ndez L√≥pez** (0) [225378](https://platzi.com/comentario/225378/) 

	Este curso supera por mucho a otros que he visto, se nota que se ha mejorado en la planeaci√≥n, eso en conjunto con el excelente Profesor que es Julian.
	
	Saludos.

* **juand_silva** (0) [225097](https://platzi.com/comentario/225097/) 

	Jajaja Excelente pens√© que @fredier era que ten√≠a derecho a presentar explicaciones as√≠.

* **Alan Cornejo** (0) [221477](https://platzi.com/comentario/221477/) 

	Definitivamente buen√≠simo video, 20 puntos‚Ä¶!!!

* **Brayan Jes√∫s Salcedo Ortegano** (0) [202511](https://platzi.com/comentario/202511/) 

	Muy bueno

	* **Leonidas Esteban Gonzalez** [202511] (0)

		‚úåÔ∏è

# Creando M√≥dulo de Base de Datos (platziverse-db) [1468]

## 0110. Estructura b√°sica de un m√≥dulo de Node.js [8326](https://platzi.com/clases/1151-nodejs/8326-estructura-basica-de-un-modulo-de-nodejs/)

### Descripci√≥n:


Para empezar con el proyecto vamos a crear un m√≥dulo de **Node.js,** con sus respectivas pruebas unitarias. El m√≥dulo de Persistencia en Bases de Datos.

Vamos a crear el directorio del proyecto y vamos a utilizar un patr√≥n de mono repo, donde tenemos un √∫nico repositorio de Git y varios proyectos adentro.

Un m√≥dulo de Node por lo general tiene un archivo que se llama package.json, que tiene la metadata del m√≥dulo. Este archivo se puede crear a mano o utilizando npm con una herramienta que nos permite crearlo autom√°ticamente.

Para empezar a implementar nuestro m√≥dulo creamos el archivo **index.js** y nos vamos a **Visual Studio Code** , donde podemos ver nuestros archivos y empezar a trabajar con ellos. Una buena pr√°ctica es crear el archivo **[README.md](http://README.md)** con instrucciones de instalaci√≥n y c√≥mo contribuir al proyecto. Recuerda que este es el archivo de documentaci√≥n de tu proyecto.

Como otra buena pr√°ctica utilizaremos **JavaScript** en modo estricto, para empezar a definir la forma b√°sica del m√≥dulo. La forma de escribir el objeto que utilizamos en el c√≥digo es de **ECMAScript 2016.**

### Links:

* [platziverse/platziverse-db at 01-estructura-basica-modulo ¬∑ platzi/platziverse ¬∑ GitHub](https://github.com/platzi/platziverse/tree/01-estructura-basica-modulo/platziverse-db)

### Comentarios:

* **Sebastian Diaz** (18) [275061](https://platzi.com/comentario/275061/) 

	Para los que no quieran estar usando el npm run lint ‚Äì --fix cada vez que tengan un error, solo coloquen en su script:
	``` 
	    "lint":"standard --fix"
	    
	```
	
	as√≠ cada vez que usen el npm run lint, el script arreglara los problemas

	* **Juli√°n Andr√©s Vela Salazar** [275061] (2)

		muy util!

	* **maximojimeno** [275061] (1)

		el chiste esta en saber que problema tenemos y luego solucionarlo lo que veo conveniente es crear otro comando como ‚Äúlint2‚Äù

* **Walter Lensinas** (6) [735641](https://platzi.com/comentario/735641/) 

	Instalar standard: `npm i --save-dev standard`
	
	configurar en el package.json nuestro script para visualizar posibles errores de escritura nuestra:
	``` 
	    scripts: { 
	    	"lint": "standard",
	    	"lint-fix": "standard --fix"
	    }
	    
	```
	
	Ejecutar en terminal `npm run lint` y corregir errores con `npm run lint-fix‚Äô

* **Ivan Robles** (5) [292253](https://platzi.com/comentario/292253/) 

	Aqui hay otros **Javascript Style Code** por si quieren utilizarlos en lugar de Standard (personalmente me gustan los punto y coma):
	
	* [AirBnB](https://github.com/airbnb/javascript)
	* [Google](https://github.com/google/eslint-config-google)
	* [Idiomatic](https://github.com/jamespamplin/eslint-config-idiomatic)
	* [jQuery](https://github.com/jquery/eslint-config-jquery)
	
	
	
	üòâ

	* **Efr√©n S√°nchez** [292253] (2)

		El de AirBnB est√° super completo y soporta Babel ‚ò∫ . Pero no veo que tenga el flag `--fix`. Lo tiene?

* **Jos√© Iv√°n Sandoya** (4) [220903](https://platzi.com/comentario/220903/) 

	Pregunta de _beginner_ pero v√°lida:  
	Cu√°l es la diferencia entre los comandos
	``` 
	    npm i
	    
	```
	
	y
	``` 
	    npm install
	    
	```
	
	???

	* **Diego Alexander Forero Higuera (Platzi)** [220903] (14)

		npm i es un shorthand para npm install, es para escribir menos ;P

	* **Jos√© Iv√°n Sandoya** [220903] (0)

		Genial, gracias!

* **Jos√© Ricardo Romo Guti√©rrez** (3) [334185](https://platzi.com/comentario/334185/) 

	Hasta ahora todo bien, este profesor es excelente, esos peque√±os detalles como decir que `--save-dev`  
	guarda el modulo como una dependencia de desarrollo fue la clave, excelente profesor.
	``` 
	    OK
	    
	```

	* **camiladi** [334185] (1)

		igual me pareci√≥ de excelente ayuda, este profesor da siempre en el clavo, no pasando por alto ciertos conceptos que si bien para √©l ya est√°n m√°s que rallados, para nosotros que no sabemos ni donde estamos parados nos esclarece un mont√≥n. Muy de acuerdo contigo

* **Walter Lensinas** (3) [68154](https://platzi.com/comentario/735639/) 
Instalar standard: npm i --save-dev standard configurar en el package.json nuestro script para visualizar posibles errores d...

* **BryanEnid** (2) [845798](https://platzi.com/comentario/845798/) 

	‚ÄúDestructuring‚Äù viene del ECMA2015 no del ECMA2016, pienso que se confundio. ECMA2015 tambien se llama ES6, talvez por eso.

* **lotosdb** (2) [829671](https://platzi.com/comentario/829671/) 

	Sencillamente perfecta la explicaci√≥n, no quiero desmeritar pero ahora si entend√≠ cosas que ni con el curso Node basico ni con Node Escenciales hab√≠a entendido. Juli√°n es muy bueno para darse a entender

* **william garcia** (2) [376620](https://platzi.com/comentario/376620/) 

	Buenas, como soy un usuario de Windows para estar a la par con este curso me ha tocado buscar en YouTube para completar.  
	Para la terminar estoy trabajando con Cmder + ubuntu + oh my zsh.  
	mi punto es que para tratar de seguir el curso por el cambio de sistema operativo hay muchas dudas que quedan para seguir el curso.  
	Como hago para que me cargue la carpeta Platziverse-DB con el visual code

	* **silvermiguel96** [376620] (1)

		Si puedes utiliza el cmd bash que viene instalado en el git , te ayudar mucho para utilizar los comandos.

	* **emersoncardona** [376620] (0)

		yo me siento igual al trabajar en otro sistema operativo

* **deivid707** (2) [345004](https://platzi.com/comentario/345004/) 

	Buenas muchachos tengo un problema lo que pasa es que en la prueba de constante que hace el profesor julian me aparece el siguiente error
	``` 
	    davidcontre@davidcontre-VirtualBox:~/platzi/platziverselo-db$ node
	    > const setupDatabase = require('./')
	    undefined
	    >setupDatabase()
	    typeError: setupDatabase isnot a function
	    >
	    
	```
	
	A este problema alguien que me pueda ayudar

	* **Efr√©n S√°nchez** [345004] (2)

		Tienes el archivo `index.js` ? Lo llamaste as√≠? Guardaste los cambios antes de correr node en consola?

* **Javier Ignacio Caicedo Samboni** (2) [256065](https://platzi.com/comentario/256065/) 

	Buena pr√°ctica, usando lint y standar para detectar errores en la escritura de javascript

* **juand_silva** (2) [225255](https://platzi.com/comentario/225255/) 

	Qu√© plugins estar√° usando Julian en VS CODE ?

* **Irving  Acosta** (2) [219803](https://platzi.com/comentario/219803/) 

	segui todos los pasos y al final me lanza este error, por que?
	
	> setupDatabase()  
	>  TypeError: setupDatabase is not a function  
	>  at repl:1:1  
	>  at ContextifyScript.Script.runInThisContext (vm.js:50:33)  
	>  at REPLServer.defaultEval (repl.js:240:29)  
	>  at bound (domain.js:301:14)  
	>  at REPLServer.runBound [as eval] (domain.js:314:12)  
	>  at REPLServer.onLine (repl.js:441:10)  
	>  at emitOne (events.js:121:20)  
	>  at REPLServer.emit (events.js:211:7)  
	>  at REPLServer.Interface._onLine (readline.js:282:10)  
	>  at REPLServer.Interface._line (readline.js:631:8)

	* **Alberto Hern√°ndez L√≥pez** [219803] (0)

		Ya lo has podido resolver? podemos ayudarte si pones tu codigo üòÉ

	* **Victor Ramos** [219803] (0)

		lo pudiste resolver tengo el mismo problema

	* **Eduardo Ignacio Denis** [219803] (2)

		yo tuve un error parecido por poner module.export en vez de module.export **s**

	* **angel david** [219803] (1)

		Tengo el mismo error con el module.export, alguien ya logro resolverlo?

* **David Behar** (1) [977736](https://platzi.com/comentario/977736/) 

	Cu√°l ser√≠a el comando script para eslint?

* **Julian Andres Cajiao** (1) [477567](https://platzi.com/comentario/477567/) 

	cuando coloco el **async** en la funci√≥n me arroja el siguiente error.
	``` 
	    module.exports = asyncfunction (config) {
	                           ^^^^^^^^
	    
	    SyntaxError: Unexpected token function
	    
	```

	* **Walter Lensinas** [477567] (1)

		Pone todo el codigo para verlo, pero creo que estan juntas las palabras async con function.

	* **Victor Manuel** [477567] (1)

		Dale espacio entre async function.

* **Sebastian Yabiku Sifuentes** (1) [448154](https://platzi.com/comentario/448154/) 

	doctor , que tema usas en visual y en tu consola?

	* **Juli√°n Andr√©s Vela Salazar** [448154] (1)

		tengo la misma pregunta, alguien nos ayuda?

	* **Juli√°n Andr√©s Vela Salazar** [448154] (1)

		amigo la encontre es este <https://draculatheme.com/visual-studio-code/>

	* **edanfesi** [448154] (1)

		Hola chicos. Tengo entendido que el tema de zsh se llama Node.
		
		Cualquier cosa avisan üòÉ

* **Sebastian Yabiku Sifuentes** (1) [448148](https://platzi.com/comentario/448148/) 

	Doctor que tema es ese de tu consola?

* **gosunkugi** (1) [391994](https://platzi.com/comentario/391994/) 

	o_0 Jesus Cristo‚Ä¶ esto fue demasiado para mi‚Ä¶ esperando con ansias el curso b√°sico de Node √∫_u esta es b√°sicamente la primera vez que uso tanto la terminal

* **Jorge Cortes Lopez** (1) [387930](https://platzi.com/comentario/387930/) 

	al correr node const setupDatabase = require(‚Äô./‚Äô) me da indefinido

	* **Jorge Cortes Lopez** [387930] (1)

		error mio no vi bien el video

* **deivid707** (1) [374010](https://platzi.com/comentario/374010/) 

	Buenas noches me toco volver a empezar el curso y ahora me aparece el siguiente error esta vez estoy trabajando sobre windows
	``` 
	    PS C:\Users\david\platzi\platziverse\platziverse-db> npm run lint
	    npm ERR! missing script: lint
	    
	    npm ERR! A complete log of this run can be found in:
	    npm ERR!     C:\Users\david\AppData\Roaming\npm-cache\_logs\2018-09-07T00_19_32_312Z-debug.log
	    PS C:\Users\david\platzi\platziverse\platziverse-db>
	    
	```
	
	Les agradeceria si me pudieran ayudar.
	
	Gracias.

	* **deivid707** [374010] (1)

		```
		    {
		      "name": "platziverse-db",
		      "version": "1.0.0",
		      "description": "A Simple IoT platform - DB Module",
		      "main": "index.js",
		      "scripts": {
		        "lint": "standard --fix"
		      },
		      "repository": {
		        "type": "git",
		        "url": "git+https://github.com/platzi/platziverse.git"
		      },
		      "author": "David Stiven Contreras (\"davidstivencontreras@gmail.com\")",
		      "license": "MIT",
		      "bugs": {
		        "url": "https://github.com/platzi/platziverse/issues"
		      },
		      "homepage": "https://github.com/platzi/platziverse#readme",
		      "dependencies": {
		        "standard": "^12.0.1"
		      }
		    }
		    
		```

	* **Diego Alexander Forero Higuera (Platzi)** [374010] (1)

		Es muy extra√±o que no te funcione, revise tu package.json y lo ejecute en local y funciono sin problema.

	* **deivid707** [374010] (1)

		sera problema de windows o algo parecido

* **Iv√°n Mauricio Toro Cifuentes** (1) [350523](https://platzi.com/comentario/350523/) 

	Esta incre√≠ble la configuraci√≥n visual que usa Julian en VS Code.
	
	¬øPodr√≠a configurarlo igual en Ubuntu?

	* **Diego Alexander Forero Higuera (Platzi)** [350523] (4)

		No se si igual, pero si muy parecido, necesitas instalar zsh y [ohmyz.sh](http://ohmyz.sh) para poder configurar de manera m√°s sencilla el prompt de la termina y buscar el tema de colores que mas te guste para visual studio code.

* **hughoinc** (1) [339847](https://platzi.com/comentario/339847/) 

	Como se llama ese tema o plug in, me gusta como se ven las arrow functions (=>)

	* **Diego Alexander Forero Higuera (Platzi)** [339847] (1)

		Creo que es la fuente que usa que permite algo llamado ligatures, la fuente que conozco que hace eso es la Fira Code.

* **deivid707** (1) [334312](https://platzi.com/comentario/334312/) 

	Muchachos tengo un problema al ejecutar el ultimo codigo (npm run lint) desde un sistema opperativo linux y me aparece el siguiente error
	``` 
	    davidcontre@davidcontre-VirtualBox:~/Platzicof/platziverse/platziverse-db$ npm run lint
	    npm ERR! Linux 4.15.0-23-generic
	    npm ERR! argv "/usr/bin/node""/usr/bin/npm""run""lint"
	    npm ERR! node v8.10.0
	    npm ERR! npm  v3.5.2
	    
	    npm ERR! missing script: lint
	    npm ERR!
	    npm ERR! If you need help, you may report this error at:
	    npm ERR!     <https://github.com/npm/npm/issues>
	    
	    npm ERR! Please include the following file with any support request:
	    npm ERR!     /home/davidcontre/Platzicof/platziverse/platziverse-db/npm-debug.log
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [334312] (2)

		Puedes compartir tu archivo package.json, al parecer no tienes definido el script lint.

	* **deivid707** [334312] (1)

		GOLLUM23 gracias, ya solucione el problema.
		
		Thanks men !!!

	* **Diego Alexander Forero Higuera (Platzi)** [334312] (4)

		Comenta aqu√≠ como lo solucionaste con eso puedes ayudar a otros compa√±eros que pueden llegar a tener el mismo problema que tu.

	* **Enrique Manuel Jos√© Coloch Tahuico** [334312] (1)

		Como se solucion√≥ el problema ?

	* **Diego Alexander Forero Higuera (Platzi)** [334312] (1)

		@quiquecoloch creo que el problema es que en el package.json no ten√≠a definido el script de lint, si tienes el package.json compartelo para poder ayudarte.

* **dedesuy** (1) [289744](https://platzi.com/comentario/289744/) 

	Soy yo o hay cosas que me perdi.  
	Esta usando una consola que no es la tradicional.  
	Y yo ejecuto ‚Äúcode .‚Äù y no lo reconoce como comando (tengo instalado el VS Code)  
	A ver si alguien me puede ayudar.

	* **Luis Diaz Venero** [289744] (0)

		Hola, lo puedes hacer abriendo la paleta de comandos (‚áß‚åòP) y buscando ‚Äòshell command‚Äô luego le das en ‚ÄúInstall code command‚Äù y listo. Cierra el terminal, √°brelo nuevamente y ejecuta ‚Äúcode .‚Äù desde la carpeta que deseas abrir, saludos.

	* **Diego Alexander Forero Higuera (Platzi)** [289744] (1)

		La consola que usa Juli√°n es la terminal de mac, por eso funciona el `code .` en windows que creo que es el sistema que usas no existe el comando es necesario que lo ejecutes desde el menu de inicio.

	* **dedesuy** [289744] (0)

		Luis, no puedo abrir lo que llamas tu Paleta de Comandos con las teclas que me indicas, tal vez estoy haciendo algo mal. Agradezco me ayudes.

	* **dedesuy** [289744] (0)

		Luis, logre hacer lo del SHELL COMMAND pero no aparece nada al escribirlo en la terminal

	* **Miguel Angel Espeso Alvarez** [289744] (0)

		Quiz√° el problema que tuvieras, que espero hayas solucionado, es que no dejas espacio entre ‚Äúcode‚Äù y el " . ".

	* **developerxegmenta** [289744] (1)

		Tambien me sale este mismo error no me reconoce el code . lo pudiste solucionar?

	* **Miguel Angel Espeso Alvarez** [289744] (1)

		Aqui tienes dos formas de configurar Visual Studio. Estoy buscando un tutorial de un compa√±ero en la plataforma y no le encuentro, quiza sea uno de estos: <https://platzi.com/git-github/tutoriales/configura-visual-studio-code-como-editor-de-texto/>
		
		Y otra: <https://platzi.com/git-github/tutoriales/usa-tu-editor-de-texto-favorito-en-git/> Espero te ayude

* **alvaritokore** (1) [280748](https://platzi.com/comentario/280748/) 

	Cuando usamos una funcion con async, eso nos devuelve una promesa? en este caso por que no se us√≥ await?

	* **Luis Antonio Schmiel Paredes** [280748] (0)

		Es porque explica que m√°s adelante se usar√° el await‚Ä¶ pero desde ya va dejando que la funci√≥n es as√≠ncrona.

	* **Christian Armando Consuelo May√©n** [280748] (1)

		Cuando una funci√≥n se define con la palabra **async** autom√°ticamente se dice que regresa una promesa no importando si tiene un **await** adentro o no.

* **Santiago Maya** (1) [231660](https://platzi.com/comentario/231660/) 

	Julian que tema usa para vs ?

	* **Byhako** [231660] (2)

		<https://draculatheme.com/visual-studio-code/>

* **Jose Luis Campos Bautista** (1) [81640](https://platzi.com/comentario/985884/) 
¬øCual es la diferencia entre module.exports y export default ? y ¬øCuando se debe de utilizar cada una?

	* **Massimo Di Berardino** [81640] (2)

		Hola Luis, [ac√°](https://stackoverflow.com/questions/41666130/export-default-vs-module-exports-differences) hay un respuesta de stackoverflow que te puede ayudar a entender mejor la diferencia. Esta b√°sicamente es el que porque el entorno no soporta nativamente ES6 y necesitar√≠as usar babel o algo por el estilo para poder utilizarlo.

* **estevamdonnabella** (1) [61351](https://platzi.com/comentario/620637/) 
Porque normalmente en las aplicaciones IoT se utilizan las base de datos relacionales y no non relacionales?

* **william garcia** (1) [41479](https://platzi.com/comentario/376620/) 
Buenas, como soy un usuario de Windows para estar a la par con este curso me ha tocado buscar en YouTube para completar. Para la terminar...

	* **silvermiguel96** [41479] (1)

		Si puedes utiliza el cmd bash que viene instalado en el git , te ayudar mucho para utilizar los comandos.

* **Iv√°n Mauricio Toro Cifuentes** (1) [39044](https://platzi.com/comentario/350523/) 
Esta incre√≠ble la configuraci√≥n visual que usa Julian en VS Code. ¬øPodr√≠a configurarlo igual en Ubuntu?

	* **Diego Alexander Forero Higuera (Platzi)** [39044] (4)

		No se si igual, pero si muy parecido, necesitas instalar zsh y [ohmyz.sh](http://ohmyz.sh) para poder configurar de manera m√°s sencilla el prompt de la termina y buscar el tema de colores que mas te guste para visual studio code.

* **hughoinc** (1) [38031](https://platzi.com/comentario/339847/) 
Como se llama ese tema o plug in, me gusta como se ven las arrow functions (=>)

	* **Diego Alexander Forero Higuera (Platzi)** [38031] (1)

		Creo que es la fuente que usa que permite algo llamado ligatures, la fuente que conozco que hace eso es la Fira Code.

* **luism88** (0) [326420](https://platzi.com/comentario/326420/) 

	Se puede configurar Standard para que utilice tabulacion en lugar de espacios?

	* **luism88** [326420] (0)

		Me gustar√≠a configurarlo para que no me de error si uso Tab de 4.

	* **Diego Alexander Forero Higuera (Platzi)** [326420] (1)

		Hola en el archivo .eslintrc.json con las el objeto reglas definido algo as√≠
		``` 
		    {
		    	"rules": {
		    		"indent": ["error": "tab"]
		    	}
		    }
		    
		```

	* **luism88** [326420] (0)

		Busque ese archivo en la carpeta node_modules pero no lo encontr√©. Seguramente tenemos distintas versiones, yo tengo la 11.0.1.  
		Seguir√© intentado, gracias.

	* **Diego Alexander Forero Higuera (Platzi)** [326420] (2)

		Ese archivo lo creas tu en tu proyecto, no es algo que venga en standard.

* **Federico Pereira Medina** (0) [306858](https://platzi.com/comentario/306858/) 

	¬øPregunta como personalizaste tu terminal para que se vea de esa forma? soy user de MacOS.

	* **Diego Alexander Forero Higuera (Platzi)** [306858] (1)

		Usa zsh como bash e instala <http://ohmyz.sh> luego puede personalizar el tema que usas para el prompt.

	* **Federico Pereira Medina** [306858] (0)

		Gracias

* **Jos√© Rubial** (0) [295509](https://platzi.com/comentario/295509/) 

	npm no me reconoce el comando standar, instale npm i --save-dev eslint en su lugar pero no se como correr el comando eslint --init, dejo lo que me arrojo el standar
	
	npm ERR! code E404npm ERR! 404 Not Found: standar@latest
	
	npm ERR! A complete log of this run can be found in:  
	npm ERR! /home/francisco/.npm/_logs/2018-05-06T12_52_28_933Z-debug.log

	* **Diego Alexander Forero Higuera (Platzi)** [295509] (2)

		Hola, tienes un error de digitaci√≥n es `standard` con d al final por eso no te encuentra el paquete.

* **sienddo** (0) [288357](https://platzi.com/comentario/288357/) 

	Me gustar√≠a mucho saber como hago para tener un terminal as√≠!

	* **Diego Alexander Forero Higuera (Platzi)** [288357] (1)

		Hola, primero tener mac con iterm2 o linux con tilix, luego instalar zsh y <http://ohmyz.sh> y comenzar a buscar el tema o personalizar uno a tu gusto.

* **Eden Gomez Gress** (0) [282129](https://platzi.com/comentario/282129/) 

	Tampoco me funciona cuando lo corro con Node!
	``` 
	    edens-MacBook-Pro:platziverse Eden$ node
	    > const setupDatabase = require('./')
	    Error: Cannot find module'./'
	        at Function.Module._resolveFilename(module.js:555:15)
	        atFunction.Module._load(module.js:482:25)
	        atModule.require(module.js:604:17)
	        atrequire(internal/module.js:11:18)
	    > setupDatabase()
	    ReferenceError: setupDatabase isnot defined
	    >
	    
	    
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [282129] (1)

		Creo que es un problema con tu configuraci√≥n, puedes hacer un repo en github con tu c√≥digo para poder ayudarte a encontrar el problema.

	* **Eden Gomez Gress** [282129] (1)

		Gracias por tu ayuda companero, el problema que tube es que cometi varios errores tanto en el aerchivo [README.md](http://README.md). te cuento:
		
		En este cometi el error de poner ‚Äòjs‚Äô en la parte de abajo donde va escrito el codigo‚Ä¶
		``` 
		    js
		    <code> 
		    
		```
		
		(siendo que js debe ir al mismo nivel de las comillas
		``` 
		    Otroerrorquetuveesquenoestabacorrectamenteubicadoeneldirectorio( estaba en platziverse, cuando deberia estar en platziverse-db.
		    
		    edens-MacBook-Pro:platziverse-db Eden$ node
		    > const setupDatabase = require('./')
		    undefined
		    > setupDatabase()
		    Promise {
		      { Agent: {}, Metric: {} },
		      domain:
		       Domain {
		         domain: null,
		         _events:
		          { removeListener: [Function: updateExceptionCapture],
		            newListener: [Function: updateExceptionCapture],
		            error: [Function: debugDomainError] },
		         _eventsCount: 3,
		         _maxListeners: undefined,
		         members: [] } }
		    
		```

* **Eden Gomez Gress** (0) [282121](https://platzi.com/comentario/282121/) 

	Algo mas, cuando intento correr el comando `edens-MacBook-Pro:platziverse Eden$ npm run lint -- --fix` Me aparece este error
	``` 
	    npm ERR! path /Users/eden/package.json
	    npm ERR! code ENOENT
	    npm ERR! errno -2
	    npm ERR! syscall open
	    npm ERR! enoent ENOENT: no such file or directory, open '/Users/eden/package.json'
	    npm ERR! enoent This is related tonpmnot being able to find a file.
	    npm ERR! enoent
	    
	    npm ERR! A complete log ofthis run can be found in:
	    npm ERR!     /Users/eden/.npm/_logs/2018-04-06T04_19_45_605Z-debug.log
	    edens-MacBook-Pro:platziverse Eden$
	    
	    
	```
	
	A que se debe esto?

	* **Eden Gomez Gress** [282121] (0)

		Agrego a esto que en mi Visual Studio Code no puedo visualizar los iconos del tipo de archivo en el que se esta trabajando, alguna sugerencia ?? Gracias de antemano

	* **Diego Alexander Forero Higuera (Platzi)** [282121] (1)

		Asegurate que el archivo package.json existe, si no existe entonces debes ejecutar primero git init. Ademas parece que tienes ‚Äì --fix el primer grupo de ‚Äì puede estar dando problemas.

* **Eden Gomez Gress** (0) [282114](https://platzi.com/comentario/282114/) 

	Solo como observacion, al parecer cambio el comando de instalacion para el modulo `standard`
	``` 
	    npm install standard --save-dev
	    
	    
	```

* **Eden Gomez Gress** (0) [281984](https://platzi.com/comentario/281984/) 

	Aguien que me ayude y me explique porque no me deja instalar el modulo `standard`?
	``` 
	    edens-MacBook-Pro:platziverse-db Eden$ npm i--save-dev standard
	    
	    Usage: npm <command>
	    
	    where <command> is one of:
	        access, adduser, bin, bugs, c, cache, ci, completion,
	        config, ddp, dedupe, deprecate, dist-tag, docs, doctor,
	        edit, explore, get, help, help-search, i, init, install,
	        install-test, it, link, list, ln, login, logout, ls,
	        outdated, owner, pack, ping, prefix, profile, prune,
	        publish, rb, rebuild, repo, restart, root, run, run-script,
	        s, se, search, set, shrinkwrap, star, stars, start, stop, t,
	        team, test, token, tst, un, uninstall, unpublish, unstar,
	        up, update, v, version, view, whoami
	    
	    npm <command> -h     quick helpon <command>
	    npm -ldisplay full usage info
	    npm help <term>  searchforhelpon <term>
	    npm help npm     involved overview
	    
	    Specify configs in the ini-formatted file:
	        /Users/eden/.npmrc
	    or on the command line via: npm <command> --key value
	    Config info can be viewed via: npm help config
	    
	    npm@5.8.0 /usr/local/lib/node_modules/npm
	    edens-MacBook-Pro:platziverse-db Eden$ 
	    
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [281984] (2)

		el error que veo es que tiene i pegado con --save-dev.

	* **Ivan Robles** [281984] (1)

		Podr√≠as usar:
		``` 
		    npm install -D standard
		    
		```
		
		o
		``` 
		    npm i -D standard
		    
		```

* **Jordi** (0) [252886](https://platzi.com/comentario/252886/) 

	Hola,
	
	existen otros m√≥dulos de desarrollo a parte de standard? El standard me pone 2 espacios y me quita las tabulaciones, odio los espacios.

* **Jose Carmona** (0) [249369](https://platzi.com/comentario/249369/) 

	una pregunta, cuando antepongo async a una funcion me genera un error, ¬øa que se deber√°?

	* **davidtoca (Platzi)** [249369] (0)

		Que error te aparece?, puede ser tu version de nodejs, asegurate de usar la ultima version LTS

* **Julio Gutierrez** (0) [245424](https://platzi.com/comentario/245424/) 

	async ‚ÄúAyuda mejorar la experiencia con las promesas‚Äù  
	async , al ser una funci√≥n asincr√≥nica (async), que cada vez que yo la ejecute me va retornar una promesa que cuando yo la resuelva, el valor que va resolver es lo que voy a retornar.

* **Victor Gamez** (0) [241684](https://platzi.com/comentario/241684/) 

	Duque, que te has instalado para que se vea asi de chula de Terminal?

	* **John Arley Cano Salinas** [241684] (0)

		√âl usa Visual Studio Code, y permite trabajar de ese modo. En los videos anteriores explica c√≥mo.

	* **Augusto Lopez** [241684] (0)

		El ultiliza el [Node theme](https://github.com/skuridin/oh-my-zsh-node-theme) para [Oh My ZSH](http://ohmyz.sh) que es un framework desarrollado por la comunidad para gestionar la configuraci√≥n de ZSH (Z shell).

* **Manuel Andres Santizo Avila** (0) [241098](https://platzi.com/comentario/241098/) 

	Tengo otra pregunta, cuando instale standard me agrego un archivo package-lock.json que es este archivo?

	* **Diego Alexander Forero Higuera (Platzi)** [241098] (2)

		Ese es un archivo que tiene el listado dependencias instaladas en node_modules, esto permite optimizar una instalaci√≥n desde 0 o de nuevos paquetes ya que verifica que dependencias del m√≥dulo ya est√°n instaladas y las usa para no volver a descargar todo.

* **Manuel Andres Santizo Avila** (0) [241090](https://platzi.com/comentario/241090/) 

	A mi no me funcion√≥ el comando code . me dice que no encuentra el comando‚Ä¶ me hace falta alguna dependencia o instalar algo del vs code?

	* **Diego Alexander Forero Higuera (Platzi)** [241090] (1)

		Que sistema operativo usas, en linux o mac funciona as√≠, en windows debes buscar como se llama el alias del ejecutable.

	* **Manuel Andres Santizo Avila** [241090] (0)

		Estoy usando mac‚Ä¶

* **Victor Orozco** (0) [230989](https://platzi.com/comentario/230989/) 

	Buenas, el bot√≥n de descargar Todo en el tabs de Archivos env√≠a a una pagina de error.
	
	Saludos

	* **Diego Alexander Forero Higuera (Platzi)** [230989] (1)

		Gracias por el reporte, vamos a revisar.

* **Joaquin Araujo** (0) [226072](https://platzi.com/comentario/226072/) 

	¬øAlguien sabe como personalizar Oh My ZSH?  
	![Screenshot from 2017-12-05 11-05-42.png](https://static.platzi.com/media/user_upload/Screenshot%20from%202017-12-05%2011-05-42-871ccd54-d2ad-41c0-8177-7b9954a963c7.jpg)

	* **Diego Alexander Forero Higuera (Platzi)** [226072] (2)

		Lo primero es entrar en la carpeta de ohmyzsh, en la carpeta del usuario es una carpeta oculta `.oh-my-zsh` dentro de ella esta una carpeta themes, puedes hacer una copia del tema que mas te guste o se acerque a lo que quieres tener y comienzas a trabajar en el, algo a tener en cuenta es que en el archivo .zshrc debes poner el nombre del tema que quieres usar.

	* **Esnor Noel Enrique Vaca Moreno** [226072] (0)

		Para quienes usen VS Code en Windows:  
		// Command Prompt  
		"terminal.integrated.shell.windows": ‚ÄúC:\Windows\System32\cmd.exe‚Äù  
		// PowerShell  
		"terminal.integrated.shell.windows": ‚ÄúC:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe‚Äù  
		// Git Bash  
		"terminal.integrated.shell.windows": ‚ÄúC:\Program Files\Git\bin\bash.exe‚Äù  
		// Bash on Ubuntu (on Windows)  
		‚Äúterminal.integrated.shell.windows‚Äù: ‚ÄúC:\Windows\System32\bash.exe‚Äù

	* **Esnor Noel Enrique Vaca Moreno** [226072] (1)

		zsh para ubuntu: <https://gist.github.com/tsabat/1498393>

* **Jos√© Iv√°n Sandoya** (0) [219032](https://platzi.com/comentario/219032/) 

	Pregunta: dentro de **Node.js existe alguna estructura recomendada (o estandarizada) de directorios y archivos? ** Por ejemplo en un proyecto tipo Laravel, bas√°ndose en el patr√≥n MVC se organizan directorios y archivos para que su desarrollo y mantenimiento sea m√°s √°gil.

* **Oscar Barajas Tavares (Platzi)** (0) [203055](https://platzi.com/comentario/203055/) 

	¬øCual seria el tema o la configuraci√≥n que tienen para la consola con zsh?

	* **ricardocelis (Platzi)** [203055] (2)

		Cloud en oh my zsh!

	* **Oscar Barajas Tavares (Platzi)** [203055] (0)

		Gracias üòÉ

	* **ricardocelis (Platzi)** [203055] (0)

		Con gusto =)!

* **Alexander  Silvera** (0) [191590](https://platzi.com/comentario/191590/) 

	Cuando hago la prueba de la constante como hace el profe me sale un error en la l√≠nea 3 del index.js, pero ese error ya lo arregle con el fix y continua el mismo, alguien puede ayudarme a visualizar cual puede ser:
	
	PS C:\Users\Acer\desktop\Proyecto_Nodejs\platziverse-db>n  
	ode
	
	> const setupDatabase = require(‚Äô./‚Äô)  
	>  C:\Users\Acer\desktop\Proyecto_Nodejs\platziverse-db\inde  
	>  x.js:3  
	>  module.exports = async function (config) {  
	>  ^^^^^^^^  
	>  SyntaxError: Unexpected token function
	
	> 

	* **Diego Alexander Forero Higuera (Platzi)** [191590] (6)

		Revisa que est√©s usando node 8, a mi me paso porque por defecto tengo el la versi√≥n 6 LTS, con nvm me pase a la versi√≥n 8 y todo funciona üòÉ

	* **Alexander  Silvera** [191590] (0)

		Ok gracias Gollum23 era ese el problema que tenia.

	* **deivid707** [191590] (1)

		Yo tengo casi el mismo problema pero solo que me aparece que setupDatabase no es una function.
		``` 
		    davidcontre@davidcontre-VirtualBox:~/platzi/platziverselo-db$ node
		    > const setupDatabase = require('./')
		    undefined
		    >setupDatabase()
		    typeError: setupDatabase isnot a function
		    >
		    
		```
		
		A este problema alguien que me pueda ayudar

	* **Diego Alexander Forero Higuera (Platzi)** [191590] (1)

		@deividmaster Puedes compartir el c√≥digo del archivo donde configuras la base de datos, revisa que est√©s exportando el m√≥dulo.

	* **deivid707** [191590] (1)

		Mira GOLLUM23 este es el c√≥digo del archivo de la base de datos esta igual y no se cual es el problema.
		``` 
		    'use strict'
		    
		    module.exports = asyncfunction (config) {
		        const Agent = {}
		        const Metric = {}
		    
		        return {
		            Agent,
		            Metric
		        }
		    }
		    
		```

## 0120. Definici√≥n de entidades de base de datos [8327](https://platzi.com/clases/1151-nodejs/8327-definicion-de-entidades-de-base-de-datos/)

### Descripci√≥n:


Lo primero que tenemos que hacer es definir las entidades de las bases de datos que vamos a utilizar. En nuestro proyecto vamos a usar **PostgreSQL,** una base de datos relacional.

El Agente va a conectarse al servidor en tiempo real y cada cierto tiempo va a reportar una m√©trica.  
La M√©trica es cualquier valor que tiene un tipo, que va a ser almacenado en la base de datos.

### Comentarios:

* **itvboy** (43) [260819](https://platzi.com/comentario/260819/) 

	Como comentario, soy programador industrial, y a lo que aqu√≠ se refiere el maestro julian duque como ‚ÄúMetricas‚Äù en automatizaci√≥n industrial se le denomina ‚ÄúTags‚Äù. Un Tag es referente a una se√±al de campo proveniente de un sensor o que va a un actuador. Pueden ser digitales de 1 bit como prender un foco o un sensor de apertura o de nivel. Normalmente las se√±ales de estos dispositivos de campo son recolectados por un cerebro electr√≥nico llamado ‚ÄúPLC‚Äù el cual env√≠a todos estos tags a un software ‚ÄúSCADA‚Äù que a sus vez maneja visualizacion ‚ÄúHMI‚Äù y guardado en base de datos.  
	P.D. Actualmente estoy dise√±ando un software scada en la nube y que muy probablemente sea el inicio de mi propia empresa (startup) y por eso estoy estudiando nodejs. De hecho ya tengo una demo funcional, pero la pienso mejorar mucho con este curso.  
	Gracias platzi por el conocimiento que nos comparten.

	* **jpereiram** [260819] (0)

		Gracias por esa info, se agradece y √©xito con tu proyecto!!!

	* **Walter Lensinas** [260819] (0)

		Muchas gracias por aclarar! y √©xitos en el emprendimiento!

	* **juand_silva** [260819] (0)

		Conozco el software Scada, excelente para la automatizaci√≥n de dispositivos e incluso para dispositivos viejos.

	* **Kerohuixco** [260819] (1)

		T√©cnicamente no la comparte‚Ä¶ Pagaste por ella (informaci√≥n).

	* **Walter Lensinas** [260819] (1)

		Hola itvboy! pudiste realizar el sue√±o de armar la startup?

* **Ivan Robles** (14) [292339](https://platzi.com/comentario/292339/) 

	Les dejo un gr√°fico de las entidades de bases de datos **Agent** y **Metric** que se van a utilizar en Platziverse.
	
	![](https://i.imgur.com/5P4RdwQ.jpg)

* **Iv√°n Mauricio Toro Cifuentes** (7) [351029](https://platzi.com/comentario/351029/) 

	La t√©cnica de definir y manejar una base datos por medio de objetos de un lenguaje de programaci√≥n se llama [ORM (Object-Relational Mapping).](https://es.wikipedia.org/wiki/Mapeo_objeto-relacional)

* **Jos√© Tuzinkievicz** (6) [341652](https://platzi.com/comentario/341652/) 

	Ni Juli√°n ni JavaScript dejan de sorprenderme.

* **Jos√© Ricardo Romo Guti√©rrez** (4) [334240](https://platzi.com/comentario/334240/) 

	Una pregunta, cada cuando se pueden enviar las metricas a la base de datos, por ejemplo, con un robot que constantemente este escaneando el ambiente detectando las paredes de la habitacion y asi generar un grafico en 3D, tendria que enviarlas con una frecuencia muy alta.

	* **Diego Alexander Forero Higuera (Platzi)** [334240] (3)

		Depende de como crees el backend y el hardware del servidor de backend, pero no debes tener problema con enviar datos cada segundo.

* **scuevas** (0) [328679](https://platzi.com/comentario/328679/) 

	Como crear tablas de la base de datos con NodeJS

* **Jose Berna** (0) [222792](https://platzi.com/comentario/222792/) 

	¬øPor que se usa PostgreSQL y no MySQL?

	* **Diego Alexander Forero Higuera (Platzi)** [222792] (5)

		No hay ninguna raz√≥n especial, solo el profesor escogi√≥ para este proyecto en su stack usar PostgreSQL.

	* **Jose Berna** [222792] (0)

		Muchas gracias por la respuesta, tengo otra duda que me gustar√≠a resolver, ¬øEs cierto que si uso MySQL en mi c√≥digo, posteriormente tambien debo dejarlo con la misma OpenSource?

	* **mariiglesia** [222792] (3)

		MySQL es OpenSource, pero no significa que dejes tu proyecto de la misma manera. Puedes optar que Licencia usar.

* **Elias Becerra Fuentes** (0) [197515](https://platzi.com/comentario/197515/) 

	Porque se utiliza postgresql para este proyecto y no una base de datos nosql como rethinkdb que se utiliz√≥ en el proyecto de platzigram. postgresql tiene alg√∫n feature especial necesario para este proyecto ?

	* **Diego Alexander Forero Higuera (Platzi)** [197515] (19)

		Porque se tiene dos entidades que tiene una relaci√≥n y hacer esto en una base de datos nosql no es practico, cada herramienta para lo que se debe usar.

	* **Joaquin Araujo** [197515] (2)

		Elias si quieres puedes usar MySQL sin problema üòÉ

## 0130. Implementaci√≥n de modelos con sequelize [8328](https://platzi.com/clases/1151-nodejs/8328-implementacion-de-modelos-con-sequelize/)

### Descripci√≥n:


 **Sequelize** es un modelo de programaci√≥n de mapeo de _objeto-relacional_ basado en promesas, para **Node.js.**

**Dos tipos de objetos:** modelos _nativos_ de **sequelize** y _servicios._

**Singleton** es un objeto que solo tiene una instancia. Cada vez que llamemos a una funci√≥n no va a crear m√∫ltiples instancias.

### Comentarios:

* **Ivan Robles** (4) [292372](https://platzi.com/comentario/292372/) 

	Comandos de instalaci√≥n de paquetes NPM de esta clase:
	``` 
	    npm i -S sequelize pg pg-hstore
	    
	```

	* **Jos√© Tuzinkievicz** [292372] (4)

		Las opciones -S y --save son las mismas?

	* **JM160596** [292372] (2)

		Sii

	* **Ivan Robles** [292372] (3)

		Como lo dijo JM160596, Efectivamente, es la forma de acortar el --save en NPM, tambien para las dependencias de desarrollo puedes utilizar -D en lugar de --save-dev

	* **Jordi Santamar√≠a Portol√©s** [292372] (3)

		Escribir npm i y npm i -S son equivalentes, el save viene por defecto.

	* **gamador** [292372] (0)

		Para instalar dependencias puedes a√±adir
		
		* El flag -S (la letra ‚ÄúS‚Äù es en may√∫scula)
		* El flag --save (todo en min√∫scula)
		* ninguna de las dos anteriores por que este comportamiento es por defecto
		
		
		
		para instalar dependencias de desarrollo (es decir las dependencias que en el entorno de producci√≥n no deber√≠an de estar)
		
		* El flag -D (En may√∫scula)
		* El flag --save-dev
		
		
		
		para dependencias globales
		
		* El flag -g (en min√∫scula)
		* El flag --global
		
		
		
		para mas informaci√≥n <https://docs.npmjs.com/cli/install>

* **Juan Pablo Rodr√≠guez Morales** (3) [736981](https://platzi.com/comentario/736981/) 

	El concepto por el cual no se quiere exponer completamente el objeto sino solo parte de √©l por medio de m√©todos de acceso es llamado Encapsulamiento y es uno de los pilares de la Programaci√≥n Orientada a Objetos.  
	[https://es.wikipedia.org/wiki/Encapsulamiento_(inform√°tica)](https://es.wikipedia.org/wiki/Encapsulamiento_\(inform%C3%A1tica\))

	* **Walter Lensinas** [736981] (1)

		Gracias Juan Pablo! Si, es un pilar de POO que hay que tener en cuenta en cada desarrollo.

* **Iv√°n Mauricio Toro Cifuentes** (2) [351147](https://platzi.com/comentario/351147/) 

	[Singleton, patron de dise√±o](https://es.wikipedia.org/wiki/Singleton)

* **Andres.F.Delgado** (2) [340841](https://platzi.com/comentario/340841/) 

	Cuando est√° creando el agente es posible obtener el atributo string por medio de object destructuring?
	``` 
	    const { STRING } = Sequelize
	    
	```

	* **edanfesi** [340841] (1)
Si se puede :)

* **Victor Lozada** (2) [295087](https://platzi.com/comentario/295087/) 

	Para arreglar el codigo correr el siguiente comando:
	``` 
	    npm run lint -- --fix
	    
	    
	```

* **Pacool84** (1) [1070967](https://platzi.com/comentario/1070967/) 

	Es oro que el profesor explique como interpretar errores en la consola

* **Antonio Diaz de Leon** (1) [694858](https://platzi.com/comentario/694858/) 

	estuve media hora buscando un error:
	``` 
	    'use strict'
	    
	    const Sequelize = require('sequelize')
	    const setupDatabase = require('../lib/db')
	    
	    module.exports = functionsetupMetricModel (config) {
	      const sequelize = setupDatabase(config)
	    
	      return sequelize.define('metric', {
	        type: {
	          type: sequelize.STRING,
	          allowNull: false
	        },
	    
	        value: {
	          type: Sequelize.TEXT,
	          allowNull: false
	        }
	    
	      })
	    }
	    
	```
	
	tengan cuidado con las may√∫sculas y min√∫sculas

* **Sebastian Cardoso Castillo** (1) [666183](https://platzi.com/comentario/666183/) 

	Les recomiendo crear los objetos as√≠:
	``` 
	    const Sequelize = require('sequelize')
	    const setupDatabase = require('../lib/db')
	    classAgentextendsSequelize.Model{ }
	    
	    module.exports = config => {
	      const sequelize = setupDatabase(config)
	      return Agentinit({
	    	// ...
	      },
	    	{
	    		sequelize,
	    		modelName: 'agent'
	    	}
	    }
	    
	```
	
	**Al fin y al cabo sequelize.define() usa esto por debajo.**

* **Gilbertojpargas94** (1) [627777](https://platzi.com/comentario/627777/) 

	Que curso tan bueno por Dios.

* **Jordi Santamar√≠a Portol√©s** (1) [527539](https://platzi.com/comentario/527539/) 

	Alguien sabe como evitar que sequelize permita strings vacios? uso el notEmpty y el dato se inserta igual en la base de datos, estoy tratando de hacerlo de esta forma:
	``` 
	    nombre: {
	          type: DataTypes.STRING,
	          allowNull: false,
	          notEmpty: true
	        }```
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [527539] (1)

		El notEmpty debes ponerlo en el validador aqu√≠ tienes mas informaci√≥n <http://docs.sequelizejs.com/manual/tutorial/models-definition.html> en la secci√≥n de validations

* **Alejandro Sulbaran** (1) [296704](https://platzi.com/comentario/296704/) 

	Para aquellos que esten usando Vs Code y quieran ver como les va quedando el codigo sin tener que recurrir a la terminal y tipear el comando de standard pueden instalar [este componente](https://marketplace.visualstudio.com/items?itemName=chenxsan.vscode-standardjs) que les ofrece un hermoso linter para su codigo.

* **Juan Carlos  Correa Herrera** (1) [191892](https://platzi.com/comentario/191892/) 

	Excelente!
	
	¬øRecomiendan tener un m√≥dulo de DB que pueda reutilizar en N proyectos, o cada proyecto deber√≠a crear su propio m√≥dulo de DB?
	
	Por ejemplo, actualmente tengo una clase como la que se muestra en este v√≠deo, pero con MySQL. Entonces lo que hago es usarla simplemente para conectarme de acuerdo a una configuraci√≥n, pues cada proyecto requiere diferentes bases de datos e incluso puede requerir diferente hosting y credenciales.
	
	¬øEs buena pr√°ctica hacerlo de este modo? ¬øEs como se hace profesionalmente?
	
	Otra variante es que con NPM, publico privadamente ese m√≥dulo (sin que se suba a [npm.org](http://npm.org)), es decir, se guarda localmente. ¬øEsta es la opci√≥n m√°s recomendada? aiudaa

	* **Diego Alexander Forero Higuera (Platzi)** [191892] (6)

		Puedes crear tu m√≥dulo y que pueda recibir por el objeto de configuraci√≥n el motor de base de datos con el que va a trabajar y todos los datos de conexi√≥n y reutilizarlo en todos tus proyectos.
		
		En cuanto a publicarlo en npm, no veo porque dejarlo privado, puedes dejarlo p√∫blico para que todos lo puedan usar, incluso puedan contribuir y mejorarlo.

	* **Enmanuel Jarquin** [191892] (0)

		  1. La funcionalidad com√∫n la encapsulas en un √∫nico m√≥dulo y la subes a npm y que reciba la configuraci√≥n de base de datos (host, name, port, etc)
		
		  2. Las entidades las dejas de forma √∫nica por cada proyecto, si las usas en varios proyectos, puedes hacer un link con npm.
		
		
		

* **Javier Ciangarotti** (1) [65010](https://platzi.com/comentario/684783/) 
No se si lo he hecho bien, pero hace mucho tiempo configur√© sequealize en mysql. No hubo problema al crear el modelo y al empezar a ocupa...

* **Andres.F.Delgado** (1) [38134](https://platzi.com/comentario/340841/) 
Cuando est√° creando el agente es posible obtener el atributo string por medio de object destructuring? const { STRING } = Sequeliz...

	* **edanfesi** [38134] (1)
Si se puede :)

* **deivid707** (0) [345544](https://platzi.com/comentario/345544/) 

	Hola muchachos tengo problemas en el visual studio code ya que al momento de crear const en el archivo db.js me aparece el siguiente problema.
	``` 
	    'use strict'
	    
	    const Sequelize = require('sequelize')  Calculating...
	    
	```
	
	y el error es el siguiente
	``` 
	    [standard] 'Sequelize' is assigned a value but never used. (no-unused-vars)
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [345544] (1)

		Es porque no has usado Sequilize, si continuas escribiendo el archivo m√°s adelante lo usas y el error va a desaparecer.

	* **deivid707** [345544] (0)

		Aaaaa listo gracias GOLLUM23.

* **scuevas** (0) [329087](https://platzi.com/comentario/329087/) 

	Estos son los m√≥dulos de node que necesitamos instalar para hacer funcionar la base de datos de nuestra plataforma

* **Esteban Diaz Gallego** (0) [327742](https://platzi.com/comentario/327742/) 

	Como soluciono esto:
	
	Parsing error: Cannot read property ‚ÄòecmaFeatures‚Äô of undefined

	* **Diego Alexander Forero Higuera (Platzi)** [327742] (2)

		Puedes compartir el stack trace completo del error.

* **Jos√© Rubial** (0) [311415](https://platzi.com/comentario/311415/) 

	como hago para que mi vs code me muestre compactaci√≥n usando el Sequelize como al profesor ? tengo todos los plugins del pack.

	* **Diego Alexander Forero Higuera (Platzi)** [311415] (1)

		A que te refieres con compactaci√≥n?

	* **Jos√© Rubial** [311415] (0)

		perd√≥n fue el corrector, no me muestra la ayuda de los m√©todos y atributos que puedo usar de los m√≥dulos que me traigo con npm he importo al proyecto

	* **Gerlis Alvarez Cardona** [311415] (2)

		Hola **@joserubial**.
		
		En realidad no debieras hacer nada porque el mismo VS Code lo hace por si solo, es a lo que suelen llamar _intellisense_ , esto aveces no funciona tan bien cuando tienes varios procesos corriendo al mismo tiempo, ya que el necesita algo de memoria para poder funcionar bien.  
		espero te haya servido.

* **alexjimrahotmailcom** (0) [308052](https://platzi.com/comentario/308052/) 

	Parsing error: Unexpected token {
	
	Que significa este error??
	
	Saludos

	* **alexjimrahotmailcom** [308052] (0)

		```
		    'use strict'
		    
		    const Sequelize = require('sequelize')
		    const setupDatabase = require ('../lib/db')
		    ++module.exports = setupMetricModel (config) {++
		    
		        const sequelize = setupDatabase(config)
		        return sequelize.define('metric',{
		           type:{
		               type: Sequelize.STRING,
		               allowNull: false
		           },
		           value:{
		               type: Sequelize.TEXT,
		               allowNull: false
		               }
		               })
		             }```
		    
		```

	* **alexjimrahotmailcom** [308052] (0)

		module.exports marca el error que menciono

	* **alexjimrahotmailcom** [308052] (0)

		los ++ ++ yo los coloque solo para hacer referencia

	* **Diego Alexander Forero Higuera (Platzi)** [308052] (3)

		En la linea que mencionas te falta la palabra reservada function.  
		debe quedar as√≠
		``` 
		    module.exports =functionsetupMetricModel(config) {
		    
		```

	* **alexjimrahotmailcom** [308052] (0)

		Gracias GOLLUM

* **Sebastian Cardoso Castillo** (0) [286564](https://platzi.com/comentario/286564/) 

	¬øEs una buena pr√°ctica no mostrar los modelos de la base de datos? O sea incluirlos en el .gitignore

	* **Diego Alexander Forero Higuera (Platzi)** [286564] (3)

		Si usas sequelize los archivos de definici√≥n de modelos no se pueden agregar al gitignore porque si no cuando bajes en el servidor los cambios no va a poder crear el modelo o mapear los datos ya que no encuentra las definiciones de tus modelos. Si estas haciendo una aplicaci√≥n de c√≥digo abierto no hay problema, si es algo de pago por ejemplo entonces primero tu repo debe ser privado, porque el hecho de no tener el modelo no quiere decir que con el c√≥digo no puedan crear la estructura de los datos.

* **yeisoncastrillon** (0) [278767](https://platzi.com/comentario/278767/) 

	Tengo este problema
	
	npm run lint
	
	C:\Users\Desarrollo\AppMoviles\node\platziverse\platziverse-db\models\agent.js:1:1: Parsing error: Unexpected character ‚ÄòÔøΩ‚Äô

	* **Diego Alexander Forero Higuera (Platzi)** [278767] (1)

		Tienes un car√°cter raro en la linea 1 del archivo agent.js, borra la linea y vuelve a escribirla a mano, no la copies y pegues ya que puede ser la causa del car√°cter extra√±o.

* **cmayorga** (0) [272348](https://platzi.com/comentario/272348/) 

	Que extension para la terminal interna de vs code, sera la que usa Julian?

	* **Jonathan Alberto Vega Ortega** [272348] (0)

		Es la terminal que tiene instalado en el sistema Operativo.

* **viljem** (0) [265075](https://platzi.com/comentario/265075/) 

	Me sale el siguiente error cuando instalo paquetes:
	
	npm WARN ajv-keywords@3.1.0 requires a peer of ajv@^6.0.0 but none is installed. You must install peer dependencies yourself.
	
	alguien sabe que puede ser?

	* **Diego Alexander Forero Higuera (Platzi)** [265075] (2)

		Primero instala ajv `npm install ajv`

* **dvdsosa** (0) [262952](https://platzi.com/comentario/262952/) 

	Hola, he instalado el VS Code con la extensi√≥n **_VS Code for Node.js_** y no me sale el autocompletado para los diferentes tipos, como le sale a Juli√°n. Del mismo modo veo que en la parte inferior derecha, a √©l le sale el tipo de codificaci√≥n Javascript (Babel) y a m√≠ s√≥lo Javascript. Creo que el profesor tiene instalado algo m√°s para que salga ese autocompletado (.STRING, .INTEGER). Si por favor puede decir qu√© otra extensi√≥n tiene es de agradecer. Saludos

	* **Ivan Robles** [262952] (3)

		El que buscabas es la extensi√≥n [intellisense](https://marketplace.visualstudio.com/items?itemName=christian-kohler.npm-intellisense).
		
		No olvides que hay que **reiniciar** VS Code despues de instalar cualquier extensi√≥n para que funcione.

* **Manuel Andres Santizo Avila** (0) [241142](https://platzi.com/comentario/241142/) 

	En visual studio code en la parte de control de codigo fuente me sale mas de 5k pendientes porque me esta incluyendo la carpeta de node_modules, como podria solucionar esto?

	* **Diego Alexander Forero Higuera (Platzi)** [241142] (2)

		Crea un archivo llamado `.gitignore`  
		lo abres y pones `node_models` guardas y listo.

	* **Rene Ismael Barrios Rojas** [241142] (0)

		node_modules

* **juand_silva** (0) [225324](https://platzi.com/comentario/225324/) 

	[Sequelize Docs](http://docs.sequelizejs.com/)

* **Juan Jos√© Vega Quintero** (0) [205721](https://platzi.com/comentario/205721/) 

	Me podr√≠an decir que archivos incluir en el .gitignore

	* **Diego Alexander Forero Higuera (Platzi)** [205721] (2)

		En linux o mac estando en la terminal en la ra√≠z del proyecto ejecutas
		``` 
		    touch .gitignore
		    
		```
		
		Y luego poner los archivos o carpetas que quieras excluir, esto se debe hacer antes que sean agregados al repo  
		Para Windows creas un archivo gitignore.txt y luego desde la consola renombras el archivo usando ren
		``` 
		    ren gitignore.txt.gitignore
		    
		```

	* **Diego Alexander Forero Higuera (Platzi)** [205721] (1)

		Incluyes todos los archivos que no necesitan estar compartidos y todos aquellos que tengan informaci√≥n sensible como llaves de los servidores, datos de keys o tokens de aplicaciones, tambi√©n puedes o debes excluir por ejemplo la carpeta de node_modules ya que es muy pesada y no es necesario tenerla en el repo ya que con el package.json cada persona que clone el proyecto puede instalar los node modules.

	* **Juan Jos√© Vega Quintero** [205721] (0)

		Vale muchas gracias, y otra duda por qu√© el gitignore del proyecto solo tiene ssh

	* **sampol.90 (Platzi)** [205721] (0)

		Tambi√©n puedes crear un archivo `.gitignore` desde Github. Ahi le dices el tipo de proyecto (Node, rails, etc‚Ä¶) y te agrega automaticamente los tipos de archivos a ignorar.

	* **juand_silva** [205721] (0)

		Entra a <https://www.gitignore.io/> y aqui te dicen que tipo de archivos tienes deseas excluir por tipo de lenguaje, IDE, ect‚Ä¶  
		O puedes entrar el repo y ver todos los lenguajes.  
		<https://github.com/github/gitignore>

* **johnaagudelo** (0) [193990](https://platzi.com/comentario/193990/) 

	Porqu√© cuando realiza el export del modulo lo realiza con **modulo.exports** y no con ** export default** si esta trabajando con ES6. lo mismo sucede con el require en vez del import.

	* **Jose R. Torrens Acosta** [193990] (0)

		Creo que el ‚Äúimport‚Äù no es nativo en node V.8 tendria que transpilar con babel

	* **sampol.90 (Platzi)** [193990] (0)

		Hay ciertas reglas que no van a funcionar si no se est√° usando `babel-node`.  
		Si instalas el paquete, al momento de correr tu archivo del server as√≠  
		`babel-node --presets es2015,stage-3 src/server/index.js`  
		No deber√≠as tener problemas.

* **eltenis** (0) [192870](https://platzi.com/comentario/192870/) 

	Y estoy intentnado entender lo que es un singleton y ni lo he visto en el curso de fundamentos de javascritp ni en ningun otro lado‚Ä¶ entonces claro‚Ä¶se me hace super complicado de entender  
	La sintaxis que esta utilizando

	* **Leandro Casco** [192870] (5)

		Es asi, Singleton (instancia √∫nica) es un patr√≥n de dise√±o. Basicamente lo que haces es asegurarte de que para una clase solo haya UNA instancia y nada m√°s y todos se conecten a esa sola intancia en lugar de crear una nueva cada vez.
		
		![Ejemplo singleton](https://image.slidesharecdn.com/singletonpattern-130923074223-phpapp01/95/singleton-pattern-2-638.jpg?cb=1379922182)

	* **Leandro Casco** [192870] (1)

		B√°sicamente, todos los mensajes que vayan a la base de datos van a apuntar a la misma instancia.

	* **Iv√°n Sabido** [192870] (1)

		hab√≠a un curso de patrones no se si ya no existe. Existen muchos recursos y libros acerca de ello:  
		<https://scotch.io/bar-talk/4-javascript-design-patterns-you-should-know>  
		<https://www.amazon.com.mx/Learning-JavaScript-Design-Patterns-Osmani/dp/1449331815>  
		[https://www.amazon.com.mx/JavaScript-Good-Parts-Douglas-Crockford/dp/0596517742/ref=pd_sim_14_2/146-0231932-3580175?_encoding=UTF8&psc=1&refRID=RVM0M8FJBK31F2ST961K](https://www.amazon.com.mx/JavaScript-Good-Parts-Douglas-Crockford/dp/0596517742/ref=pd_sim_14_2/146-0231932-3580175?_encoding=UTF8&psc=1&refRID=RVM0M8FJBK31F2ST961K)  
		<https://addyosmani.com/resources/essentialjsdesignpatterns/book/>

* **eltenis** (0) [192861](https://platzi.com/comentario/192861/) 

	La verdad que no entiendo bien lo que Sequalize no entiendo bien‚Ä¶ veo que va muy rapido‚Ä¶explicando lo que es una base de datos ‚Ä¶ y no se bien lo que estoy haciendo‚Ä¶ üò¶

	* **Diego Alexander Forero Higuera (Platzi)** [192861] (6)

		Sequalize es un orm (Object relational mapping) lo que haces es abstraer el hacer consultas a la base de datos en SQL puro, entonces lo primero que se hace es una definici√≥n de tu modelo de datos, luego es mucho m√°s sencillo hacer consultas.

* **SKILLON** (0) [35038](https://platzi.com/discusiones/1151-nodejs/35038-por-que-podemos-utilizar-el-requiresequelize-si-nunca-instalamos-el-modulo-de-sequelize-en-este-proyecto/) 
Por que podemos utilizar el require('sequelize') si nunca instalamos el modulo de Sequelize en este proyecto?

## 0140. Implementaci√≥n de un m√≥dulo b√°sico de base de datos [8329](https://platzi.com/clases/1151-nodejs/8329-implementacion-de-un-modulo-basico-de-base-de-dato/)

### Descripci√≥n:


Vimos c√≥mo definimos los modelos en el video pasado. Ahora vamos a ver c√≥mo podemos relacionar los modelos entre si.

Primero vamos a necesitar las funciones que definimos anteriormente. Para poner a interactuar los modelos entre si debemos hacer la configuraci√≥n de la base de datos y los modelos.

### Links:

* [platziverse/platziverse-db at 03-implementacion-modulo-basico-db ¬∑ platzi/platziverse ¬∑ GitHub](https://github.com/platzi/platziverse/tree/03-implementacion-modulo-basico-db/platziverse-db)

### Comentarios:

* **Jordi Santamar√≠a Portol√©s** (5) [527550](https://platzi.com/comentario/527550/) 

	Por si os interesa, yo para crear los modelos, me baso en como lo hacen en  
	<https://github.com/sequelize/express-example/tree/master/models>
	
	Basicamente lo que hace es generar un objeto con todos los modelos de la carpeta models, junto a sequelize y Sequelize de forma automatica, con tan solo tener que definir la estructura de cada modelo y su asociacion, de modo que no tengas que hacer todo este lio de ir haciendo un setup de todo como en el video que se hace un poco lio.

	* **Walter Lensinas** [527550] (2)

		Bien! es buena la soluci√≥n. Corresponde a alg√∫n patr√≥n?

	* **David Behar** [527550] (1)

		Tengo la misma duda que wlensinas

* **Juan Carlos  Correa Herrera** (3) [191893](https://platzi.com/comentario/191893/) 

	Entonces cuando uso Await el flujo se detiene hasta que se resuelva la promesa? no contin√∫a el event loop?

	* **Javier N√∫√±ez** [191893] (4)

		No, el flujo sigue, lo que ocurre es que cuando la promesa se resuelve se termina de ejecutar el c√≥digo del await

	* **Jesus Africano** [191893] (1)

		Estudia la pila de ejecucion de JS y te quedara mas claro ese punto. Saludos.

* **Juan Pablo Azocar** (1) [531109](https://platzi.com/comentario/531109/) 

	Hola Tengo este error al correr el test
	
	TypeError {  
	message: ‚ÄòCannot read property ‚ÄòfindById‚Äô of null‚Äô,  
	}

	* **Diego Alexander Forero Higuera (Platzi)** [531109] (1)

		Puedes compartir tu c√≥digo no se como estas ejecutando el findById, el error lo que menciona es que un objeto nulo no tiene la propiedad o m√©todo findById, entonces debes tener mal definido el objeto de base de datos del cual intentas obtener el id.

* **Byhako** (1) [280290](https://platzi.com/comentario/280290/) 

	Cuando vamos a ‚Äúrequerir‚Äù las funciones que definimos, no es mejor importarlas como:
	``` 
	    import setupDatabase from'./lib/db'
	    
	```
	
	En lugar de hacerlo como:
	``` 
	    const setupDatabase = require('./lib/db')
	    
	```

	* **Ivan Robles** [280290] (14)

		En este caso la versi√≥n que se esta usando de **NodeJS** , la **LTS** aun no soporta la sintaxis de **ES6** import/export, es por eso que se usa **require** y **module.exports** , si quieres utilizar **import** y **export** , deber√°s utilizar un transpilador como Babel y un Module Bundler como Webpack para generar el c√≥digo de distribuci√≥n (en la carpeta dist).

* **Kevin Ricardo Tovar Ochoa** (1) [191527](https://platzi.com/comentario/191527/) 

	Hola Julian! esta muuuuuuy bueno tu curso pero quiero hacerte una pregunta off-topic, ¬øCual es tu config de VScode?

	* **Giovanny Betancourt** [191527] (1)

		Si no estoy mal usa el theme **Dracula**.  
		[](https://draculatheme.com/visual-studio-code/)

	* **Carlos Eduardo Lopez Bru** [191527] (0)

		Adicionando acerca de la fuente, se llama **Fira Code**

	* **juand_silva** [191527] (0)

		Y el el theme de los iconos?

	* **Iv√°n Mauricio Toro Cifuentes** [191527] (1)

		¬°Gracias!

	* **Sebastian Cardoso Castillo** [191527] (2)

		Hay que instalar la sintaxis de Babel. Por defecto VScode usa una de Javascript con colores diferentes al de Julian.

* **Juan Pablo Azocar** (1) [54533](https://platzi.com/comentario/531109/) 
Hola Tengo este error al correr el test TypeError { message: ‚ÄòCannot read property ‚ÄòfindById‚Äô of null‚Äô, }

	* **Diego Alexander Forero Higuera (Platzi)** [54533] (1)

		Puedes compartir tu c√≥digo no se como estas ejecutando el findById, el error lo que menciona es que un objeto nulo no tiene la propiedad o m√©todo findById, entonces debes tener mal definido el objeto de base de datos del cual intentas obtener el id.

* **Paul Rayden** (0) [298873](https://platzi.com/comentario/298873/) 

	Por alguna raz√≥n no funciona el link de descarga de todos los archivos, ac√° desde github:
	
	<https://codeload.github.com/platzi/platziverse/zip/03-implementacion-modulo-basico-db>

	* **Diego Alexander Forero Higuera (Platzi)** [298873] (2)

		Ya esta solucionado, gracias por reportar.

* **Eden Gomez Gress** (0) [284882](https://platzi.com/comentario/284882/) 

	Una pregunta companeros. A que se refiere el profe cuando define esta linea de codigo?
	``` 
	    const sequelize = setupDatabase(config)
	    
	    
	```
	
	No entiendo cuando se refiere a ‚Äòinstanciar el objeto sequelize‚Äô

	* **Diego Alexander Forero Higuera (Platzi)** [284882] (6)

		sequalize es el orm para trabajar con la base de datos, al crear una instancia lo que creas es un objeto con el que puedes usar los m√©todos de esa clase.
		
		Por ejemplo tienes una clase carro, que tiene atributos como el color, n√∫mero de puertas, etc. Tambi√©n tiene m√©todos como prender, arrancar, frenar, etc. Ahora vas a tener una instancia de la clase carro, esto es un carro de color rojo, con dos puertas, esta instancia es la que puedes manejar.
		
		Espero que te ayude el ejemplo.

	* **Eden Gomez Gress** [284882] (0)

		Muchas gracias companero

## 0150. Implementaci√≥n de script de inicializaci√≥n de base de datos [8331](https://platzi.com/clases/1151-nodejs/8331-implementacion-de-script-de-inicializacion-de-base/)

### Descripci√≥n:


Cuando ejecutemos el proyecto por primera vez necesitaremos tener creada la base de datos, y crear un usuario con permisos para alimentar esa base de datos.

### Links:

* [platziverse/platziverse-db at 04-implementacion-script-setup-db ¬∑ platzi/platziverse ¬∑ GitHub](https://github.com/platzi/platziverse/tree/04-implementacion-script-setup-db/platziverse-db)

### Comentarios:

* **Rodman M. Swanston C.** (37) [191515](https://platzi.com/comentario/191515/) 

	Para windows si tienen alg√∫n problema ejecutando setup intenten lo siguiente
	``` 
	    "setup": "SET DEBUG=platziverse:* && node setup.js"
	    
	```

	* **Marcelo Fontana** [191515] (10)

		Gracias por el aporte!!!  
		Me parece que esto deber√≠a estar considerado en el curso!!  
		Los usuarios de windows estmos en desventaja‚Ä¶

	* **Javier  Padr√≥n** [191515] (1)

		Gracias por el aporte, me funcion√≥ en Windows con ese codigo

	* **jlngaribaldi** [191515] (1)

		Tu muy bien, gracias por el dato!

	* **Joaquin Araujo** [191515] (14)

		Usen Linux üòÉ

	* **Carlos Enrique Gonzalez Pe√±a** [191515] (0)

		Gracias!

	* **luisrangelc** [191515] (1)

		En windows 10  
		Yo tuve que crear el rol desde pgAdmin 4. Pero pude conectarme en command prompt:  
		psql -d ‚Äúhost=localhost port=5434 user=platzi password=platzi dbname=platziverse‚Äù
		
		Tambi√©n si postgres esta instalado en un puerto diferente a 5232. Tienen que agregar port.
		
		const config = {  
		database: process.env.DB_NAME || ‚Äòplatziverse‚Äô,  
		username: process.env.DB_USER || ‚Äòplatzi‚Äô,  
		password: process.env.DB_PASS || ‚Äòplatzi‚Äô,  
		host: process.env.DB_HOST || ‚Äòlocalhost‚Äô,  
		port:‚Äò5434‚Äô,  
		dialect: ‚Äòpostgres‚Äô,  
		logging: s => debug(s),  
		setup: true  
		}

	* **luisrangelc** [191515] (2)

		Tambi√©n pueden conectarse a postgres:
		
		psql -d ‚Äúhost=localhost user=postgres password=clave_secreta dbname=postgres‚Äù
		
		o
		
		psql -d ‚Äúhost=localhost port=5434 user=postgres password=clave_secreta dbname=postgres‚Äù
		
		y ejecutar los comandos que Julian indica para crear el rol, base de datos, etc.

	* **ma_angelica_romero** [191515] (1)

		al ejecutar npm run setup, no pasa nada
		``` 
		    PS C:\platziverse\platziverse-db> npm run setup
		    
		    > platziverse-db@1.0.0 setup C:\platziverse\platziverse-db
		    > SET DEBUG=platziverse:* node setup.js
		    
		    PS C:\platziverse\platziverse-db>```
		    
		    que hago?
		    
		```

* **Cesar Mill√°n** (15) [213595](https://platzi.com/comentario/213595/) 

	A los usuarios Ubuntu con errores al lanzar el comando de **psql** esto tal vez les funcione:
	``` 
	    sudo su postgres
	    
	```
	
	y despues corren el comando de psql
	``` 
	    postgres@Computer:/home/username/Desktop/Node/project-db$  psql 
	    
	```
	
	y para salir de postgres escriben **exit**

	* **Liliana Colls** [213595] (0)

		Gracias! esto me ayud√≥

	* **Jos√© Ricardo Romo Guti√©rrez** [213595] (1)

		gracias hombre me ayudo bastante

	* **GerAlfonso** [213595] (4)

		Tambi√©n pueden utilizar:
		``` 
		    sudo -u postgres psql
		    
		```
		
		As√≠ llegamos a la consola de Postgres directamente.

	* **Navarrock33** [213595] (1)

		Gracias, me ha servido‚Ä¶

* **Victor Hugo Cortes Posada** (8) [227886](https://platzi.com/comentario/227886/) 

	En windows 10 pueden utilizar pgAdmin, que se instala al momento de bajar e instalar postgreSQL, pgAdmin permite realizar los pasos con Qery Tool.  
	Tambi√©n pueden configurar las variables de entorno para windows‚Ä¶
	
	`Panel de Control - Sistema - Configuraci√≥n avanzada del sistema`  
	Hacer clic en el bot√≥n Variables de entorno‚Ä¶ seleccionar Path y hacer clic en Editar‚Ä¶
	
	NOTA: en mi caso edite ambos path, variables de usuario y variables del sistema pegando las siguientes rutas por defecto donde se me instalo postgreSQL
	
	`C:\Program Files\PostgreSQL\10\bin`
	
	`C:\Program Files\PostgreSQL\10\lib`
	
	Para conectarme a la BD con el comando psql, por defecto se conecta con el usuario postgres, ejecute el comando as√≠:
	
	`psql postgres postgres`
	
	me pide el Password para el usuario postgres que fue el colocado al momento de instalar PostgreeSQL para Windows.
	
	Para el archivo package.json configurar el script as√≠:
	``` 
	    "setup": "SET DEBUG=platziverse:* && node setup.js"
	    
	```

	* **Andres Rodriguez Escudero** [227886] (1)

		Genial‚Ä¶ Buen aporte

	* **Rub√©n Maier Enzler** [227886] (1)

		A mi no me reconoce el comando ‚Äúpsql‚Äù y ya agregue en path lo que corresponde

	* **Juan David G√≥mez G√≥mez** [227886] (1)

		busque en el inicio de Windows SQL shell y ahi puedes ejecutar los comando sin problema

	* **Giorgio Ventura** [227886] (1)

		Gracias por el aporte! Me evitaste bucear por fullstack

* **jenapi** (5) [813258](https://platzi.com/comentario/813258/) 

	Para los usuarios de windows que anden por aqu√≠ les dejo mi experiencia.  
	Al correr :
	``` 
	    npm runsetup
	    
	```
	
	con el c√≥digo tal cual lo tiene el profesor les dar√° error.  
	hay dos rutas, usar set para crear una variable de entorno en el cmd desde el script del archivo.json:
	``` 
	    "scripts": {
	    	...
	    	"setup": "set DEBUG=platziverse:* node setup.js"
	    }
	    
	```
	
	O descargar cross-env con un:
	``` 
	    npm icross-env --save
	    
	```
	
	Cabe resaltar que esta es la mejor pr√°ctica entre las dos opciones que les traigo, ya que este es un modo de hacer que tu env sea v√°lido en todos los sistemas operativos  
	y as√≠ quedar√≠a:
	``` 
	    "scripts": {
	    	...
	    	"setup": "cross-env DEBUG=platziverse:* node setup.js"
	    }
	    
	```

	* **jmen1995** [813258] (1)

		Excelente aporte gracias!

* **Ivan Robles** (5) [292491](https://platzi.com/comentario/292491/) 

	Algunos apuntes de la clase!!
	
	Comandos de consola para crear la base de datos y el usuario:  
	Acceder al CLI de postgres
	``` 
	    $ psql postgres
	    
	```
	
	Creamos un Rol (Usuario y Contrase√±a)
	``` 
	    # CREATEROLE platzi WITH LOGIN PASSWORD'platzi‚Äô;
	    
	```
	
	Creamos la base de datos
	``` 
	    #CREATEDATABASE platziverse;
	    
	```
	
	Le damos permisos al usuario en la base de datos
	``` 
	    # GRANT ALL PRIVILEGESONDATABASE platziverse TO platzi;
	    
	```
	
	**dialect** es una propiedad de sequelize donde especificamos el **motor SQL** que estamos utilizando como MySQL, PostgreSQL, SQLite o MariaDB.
	
	**logging** con esta propiedad de sequelize podemos hacer console logs o debuging que nos retornan los mensajes de lo que ocurre en la base de datos.

* **Sergio Zapata Donado** (5) [208061](https://platzi.com/comentario/208061/) 

	¬øA alguien mas le ha salido el siguiente mensaje o error?
	``` 
	    sequelize deprecated String based operators are now deprecated. Please use Symbol based operators for better security, read more athttp://docs.sequelizejs.com/manual/tutorial/querying.html#operators node_modules/sequelize/lib/sequelize.js:236:13
	    Sucess!
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [208061] (2)

		Debes estar usando una versi√≥n m√°s reciente de sequelize donde los operadores cambiaron y debes reemplazarlo por los operadores simb√≥licos que menciona en el enlace.

	* **Andrs** [208061] (0)

		Me pasa lo mismo, no entiendo como aplicar lo de los operadores‚Ä¶

	* **Samuel Alejandro Tazzo Pe√±a** [208061] (0)

		Alguien Resolvi√≥ este error de los operadores??

	* **Jose Berna** [208061] (8)

		Agregen la siguiente linea de codigo a la configuraci√≥n del archivo setup.js:
		
		operatorsAliases: false.
		
		La configuraci√≥n quedaria de la siguiente manera:
		
		const config = {  
		database: process.env.DB_NAME  
		username: process.env.DB_USER  
		password: process.env.DB_PASS  
		host: process.env.DB_HOST  
		dialect: ‚Äòpostgres‚Äô,  
		logging: s => debug(s),  
		setup: true,  
		operatorsAliases: false  
		}

	* **juand_silva** [208061] (7)

		agrega esta l√≠nea en setup.js
		``` 
		    asyncfunctionsetup () {
		      const config = {
		        database: process.env.DB_NAME || 'platziverse',
		        username: process.env.DB_USER || 'platzi',
		        password: process.env.DB_PASS || 'platzi',
		        host: process.env.DB_HOST || 'localhost',
		        dialect: 'postgres',
		        logging: s => debug(s),
		        setup: true,
		        operatorsAliases: false
		      }
		    
		```

	* **Eduardo Rasgado Ruiz** [208061] (1)

		Recomiendo no ignorar las advertencias de seguridad. Por algo est√°n ah√≠: Lo deprecated usualmente se queda sin soporte. No soporte = vulnerabilidades.

	* **Miguel Sosa** [208061] (4)

		Perfectamente explicado en esta respuesta donde a algunos m√°s les sucedi√≥ lo mismo.
		
		<https://github.com/sequelize/sequelize/issues/8417#issuecomment-334056048>
		
		En resumen, debemos utilizar operadores del tipo simb√≥licos para evitar la inyecci√≥n de `json string based operators`
		
		En nuestro caso para este ejemplo no estamos usando operadores de ning√∫n tipo, por lo que el warning se puede ignorar, pero es bueno saberlo.
		
		Saludos!

	* **Luis Alexander Zelada Medina** [208061] (1)

		Agrega setup()

* **Jose R. Torrens Acosta** (5) [195737](https://platzi.com/comentario/195737/) 

	Para los que en windows no puedan correr esos comandos. Usen el PgAdmin de postgreSQL y con la ‚Äúquery tool‚Äù pueden hacer lo mismo que Julian.

	* **juand_silva** [195737] (0)

		O pueden setear la variable de entorno path en Windos para postgresql con la rura donde se encuentra psql.exe por lo general est√° en en la carpeta bin y luego SET-ear el path de lib.

	* **Andr√©s Fabi√°n Guerrero** [195737] (1)

		gracias

* **manuel-mendoza142** (4) [775156](https://platzi.com/comentario/775156/) 

	 **++Para los que usamos Linux - Ubuntu. ++**  
	Para poder entrar a postgres es de la siguiente forma:  
	_**sudo -u postgres psql**_

* **Ren√© Felipe Ram√≠rez Barrera** (3) [815058](https://platzi.com/comentario/815058/) 

	Para los que tengan problemas en windows con el comando **_`npm run setup`_** usen el siguiente scripts:
	
	**`"scripts": { "setup": "@powershell $env:DEBUG='platziverse:*';node setup.js" }`**

* **deivid707** (3) [433157](https://platzi.com/comentario/433157/) 

	Tengo un problema al momento de ejecutar npm run setup, y es que me da como resultado solamente el success del console.log pero no me genera las tablas.
	``` 
	    PS C:\Users\david\platzi\platziverse\platziverse-db> npm run setup
	    
	    > platziverse-db@1.0.0 setup C:\Users\david\platzi\platziverse\platziverse-db
	    >  SET DEBUG=platziverse:* && node setup.js
	    
	    Success!
	    PS C:\Users\david\platzi\platziverse\platziverse-db>
	    
	```

	* **Ren√© Felipe Ram√≠rez Barrera** [433157] (1)

		en windows prueba con `"setup": "@powershell $env:DEBUG='platziverse:*';node setup.js"`, en tu package.json

* **Luis Guti√©rrez** (3) [249840](https://platzi.com/comentario/249840/) 

	 **LINUX**
	
	Si tienen problemas a la hora de utilizar ‚Äúpsql postgres‚Äù, una posible soluci√≥n:
	``` 
	    sudo su postgres
	    
	```
	
	despu√©s
	``` 
	    psql postgres
	    
	```

	* **Mariano Villarreal** [249840] (0)

		me sirvio, gracias

	* **DARIO HERRERA GONZALEZ** [249840] (1)

		ya la iba a tirar la compu, gracias!!!

* **Marco Aurelio Elizalde Torres** (3) [225295](https://platzi.com/comentario/225295/) 

	Hola compa√±eros para los que les sale un erorr como este
	``` 
	    sequelize deprecated String based operators are now deprecated. Please use Symbol based operators for better security, read more athttp://docs.sequelizejs.com/manual/tutorial/querying.html#operators node_modules/sequelize/lib/sequelize.js:236:13
	    Sucess!
	    
	```
	
	Le agregue a la configuraci√≥n **operatorsAliases**
	``` 
	    'use strict'
	    
	    const debug = require('debug')('platziverse:db:setup')
	    const db = require('./')
	    const Sequelize = require('sequelize')
	    
	    asyncfunctionsetup () {
	      const config = {
	        database: process.env.DB_NAME || 'plaziverse',
	        username: process.env.DB_USER || 'platzi',
	        password: process.env.DB_PASS || 'platzi',
	        host: process.env.DB_HOST || 'localhost',
	        dialect: 'postgres',
	        logging: s => debug(s),
	        setup: true,
	        port: 5433,
	        operatorsAliases: Sequelize.Op
	      }
	    
	      await db(config).catch(handleFatalError)
	    
	      console.log('Success!')
	      process.exit(0)
	    }
	    
	    functionhandleFatalError (err) {
	      console.error(err.message)
	      console.error(err.stack)
	      process.exit(1)
	    }
	    
	    setup()
	    
	```

	* **juand_silva** [225295] (1)

		Yo solo agregu√© esta l√≠nea y funcion√≥:
		``` 
		    operatorsAliases:false
		    
		```

* **David Behar** (2) [977865](https://platzi.com/comentario/977865/) 

	Recuerden prender su base de datos con
	``` 
	    brew services start postgresql
	    
	```

* **matheoNieto** (2) [868034](https://platzi.com/comentario/868034/) 

	para ingresar en linux se necesita tener corriendo el servicio de posgres e ingresa con
	``` 
	    sudo su - postgres
	    
	```
	
	y luego
	``` 
	    psql```
	    
	    ya con esto ingresamos
	    
	```

* **Efr√©n S√°nchez** (2) [448250](https://platzi.com/comentario/448250/) 

	üòÖ Olvid√© el password de Postgres

* **Gerardo Nava Pereda** (2) [357461](https://platzi.com/comentario/357461/) 

	```
	    postgres=# CREATEROLE usuario WITH LOGIN PASSWORD'contrasena';
	    CREATEROLE
	    postgres=# CREATEDATABASE sandbox;
	    CREATEDATABASE
	    postgres=# GRANT ALL PRIVILEGESONDATABASE sandbox TO usuario;
	    GRANT
	    postgres=# \quit
	    
	```

* **Byhako** (2) [282736](https://platzi.com/comentario/282736/) 

	¬øHay alguna diferencia entre esto?
	``` 
	    const db = require('./index')
	    
	```
	
	y esto.
	``` 
	    import db from'./index'
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [282736] (6)

		Hacen lo mismo, pero el import es la forma de hacerlo usando ecmascript 6

* **Walter Lensinas** (2) [280113](https://platzi.com/comentario/280113/) 

	Si no te reconoce a db(config) como una funcion y falla la promesa. Aqu√≠ el error:
	``` 
	    $ npm run setup
	     
	    > platziverse-db@1.0.0 setup /platziverse/platziverse-db
	    > DEBUG=platziverse:* node setup.js
	     
	    (node:4807) UnhandledPromiseRejectionWarning: TypeError: db(...).catch isnot a function
	        atsetup(/platziverse/platziverse-db/setup.js:18:25)
	        atObject.<anonymous> (/platziverse/platziverse-db/setup.js:30:1)
	        atModule._compile(module.js:652:30)
	        atObject.Module._extensions..js(module.js:663:10)
	        atModule.load(module.js:565:32)
	        attryModuleLoad(module.js:505:12)
	        atFunction.Module._load(module.js:497:3)
	        atFunction.Module.runMain(module.js:693:10)
	        atstartup(bootstrap_node.js:188:16)
	        atbootstrap_node.js:609:3
	    (node:4807) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an asyncfunctionwithoutacatchblock, orbyrejectingapromisewhichwasnothandledwith .catch(). (rejection id: 1)
	    (node:4807) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.```
	    
	```
	
	Lo correg√≠s poniendo en el archivo **/lib/db.js** poniendo ‚Äú ** _async_** ‚Äù en la funci√≥n que exporta el modulo.
	``` 
	    module.exports = asyncfunctionsetupDatabase(config) {
	    
	```

	* **Walter Lensinas** [280113] (0)

		Me di cuenta que llega hasta al Success del console.log pero no me genera las tablas‚Ä¶ En que momento desde setup.js se llama algo del index.js? #help

	* **Walter Lensinas** [280113] (2)

		Bueno, al final fue un error mio en una de las rutas de setup en la linea
		``` 
		    const db = require('./lib/db')
		    
		```
		
		le saque el lib/db y el async en function setupDatabase de db.js.
		``` 
		    const db = require('./')
		    
		```
		
		üòÉ avanzar al siguiente video.

* **Henry Puentes Gonzalez** (1) [1037908](https://platzi.com/comentario/1037908/) 

	Si alguien tiene alg√∫n problema para ver en su consola el resultado del debug:
	
	`PS E:\Git\platziverse\plaziverse-db> node setup.js Success!`
	
	Se resuelve configurando la variable de entorno en powershell:
	
	`PS E:\Git\platziverse\plaziverse-db> $env:DEBUG = "*,-not_this"`
	
	esto habilta

* **Fer_Sanabria** (1) [1001895](https://platzi.com/comentario/1001895/) 

	pueden configurar el puerto de posgres desde el config
	
	![Selection_024.png](https://static.platzi.com/media/user_upload/Selection_024-b8cdb364-64bf-40bb-992c-79f2061fbce6.jpg)

* **marcelo azari** (1) [910155](https://platzi.com/comentario/910155/) 

	Hola soy nuevo en Nodejs, alguien podr√≠a ayudarme con este error ?  
	![Captura de pantalla 2020-01-08 a la\(s\) 16.54.03.png](https://static.platzi.com/media/user_upload/Captura%20de%20pantalla%202020-01-08%20a%20la%28s%29%2016.54.03-f62a90df-0706-4a82-9110-237831cd4c1c.jpg)

	* **Walter Lensinas** [910155] (1)

		Por favor, mostra el c√≥digo de db.js

	* **marcelo azari** [910155] (1)

		creo seguir los pasos del curso, pero no encuentro el error
		
		![2020-01-10 19_21_08-db.js - platziverse - Visual Studio Code.png](https://static.platzi.com/media/user_upload/2020-01-10%2019_21_08-db.js%20-%20platziverse%20-%20Visual%20Studio%20Code-73d4e88c-94a5-452e-bc59-9deeff4ed76d.jpg)

	* **Alfonso Navarro** [910155] (1)

		Compa√±ero no se si encontrastes el error, por mi parte hice varias modificaciones en el codigo para q me funcionara.}
		
		En el import lo realice a lo clasico
		``` 
		    const db = require('./lib/db')
		    
		```
		
		Y la funci√≥n la modifique de la sgte manera
		``` 
		    module.exports = functionsetupDatabase(config) {
		    	returnnewPromise((resolve, reject) => {
		    		if (!sequelize) {
		    			sequelize = new Sequelize(config)
		    		}
		    		resolve(sequelize)
		    	})
		    }
		    
		```
		
		De esta manera me ejecuto.

* **Alirio Alejandro Angel Arenas** (1) [900787](https://platzi.com/comentario/900787/) 

	debug no me muestra el debug en la consola no se que estoy haciendo mal.

	* **Walter Lensinas** [900787] (1)

		F√≠jate si esta bien escrito cuando declaras la variable ‚Äúconfig‚Äù en setup.js.
		
		Yo lo tenia como ‚Äúloggin‚Äù en vez de ‚Äúlogging‚Äù, un typho com√∫n y no me aparec√≠a los mensajes de debug.

* **Fernando Aldair** (1) [863042](https://platzi.com/comentario/863042/) 

	hola alguien me puede ayudar al momento de ejecutar el setup me sale esto
	``` 
	     platziverse-db@1.0.0 setup /home/mrrobot/Documents/Node/platziverse/platziverse-db
	    > DEBUG=platziverse:* nodesetup.js
	    
	    internal/modules/cjs/loader.js:800
	        throw err;
	        ^
	    
	    Error: Cannot find module './lib'
	    Require stack:
	    - /home/mrrobot/Documents/Node/platziverse/platziverse-db/index.js
	    - /home/mrrobot/Documents/Node/platziverse/platziverse-db/setup.js
	    
	```

	* **Walter Lensinas** [863042] (1)

		Hola, por favor mostra el c√≥digo del proyecto, el error es muy explicito, te esta diciendo que no encuentra el modulo './lib/
		
		F√≠jate en index.js la linea del c√≥digo donde declaras setupDatabase.
		``` 
		    const setupDatabase = require('./lib/db')
		    
		```

* **Alfonso Navarro** (1) [859624](https://platzi.com/comentario/859624/) 

	Bueno lo hice con MySql, instale `npm install --save mysql2` y si instalo perfecto‚Ä¶

* **Jhonnathan Capelo** (1) [800900](https://platzi.com/comentario/800900/) 

	alguien me puede ayudar me sale esto y nose como arreglarlo
	``` 
	     npm run setup
	    
	    > platziverse-db@1.0.0 setup /home/paul/Documents/PROYECTOS/platziverse/platziverse-db
	    > DEBUG=platziverse:* node setup.js
	    
	    internal/modules/cjs/loader.js:638
	        throw err;
	        ^
	    
	    Error: Cannot find module 'sequelize'
	        at Function.Module._resolveFilename (internal/modules/cjs/loader.js:636:15)
	        at Function.Module._load (internal/modules/cjs/loader.js:562:25)
	        at Module.require (internal/modules/cjs/loader.js:692:17)
	        at require (internal/modules/cjs/helpers.js:25:18)
	        at Object.<anonymous> (/home/paul/Documents/PROYECTOS/platziverse/platziverse-db/lib/db.js:3:19)
	        at Module._compile (internal/modules/cjs/loader.js:778:30)
	        at Object.Module._extensions..js (internal/modules/cjs/loader.js:789:10)
	        at Module.load (internal/modules/cjs/loader.js:653:32)
	        at tryModuleLoad (internal/modules/cjs/loader.js:593:12)
	        at Function.Module._load (internal/modules/cjs/loader.js:585:3)
	    npm ERR! code ELIFECYCLE
	    npm ERR! errno 1
	    npm ERR! platziverse-db@1.0.0setup: `DEBUG=platziverse:* node setup.js`
	    npm ERR! Exit status 1
	    npm ERR! 
	    npm ERR! Failed at the platziverse-db@1.0.0 setup script.
	    npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
	    
	    npm ERR! A complete log of this run can be found in:
	    npm ERR!     /home/paul/.npm/_logs/2019-10-28T05_59_55_016Z-debug.log
	    
	```

	* **edanfesi** [800900] (2)

		Hola, revisa que tengas instalado el m√≥dulo. Con un npm install deber√≠a funcionar.

	* **Jhonnathan Capelo** [800900] (1)

		ya habia hecho eso la solucion fue
		``` 
		    npm install sequelize-cli
		    npm install sequelize
		    
		```
		
		pero nose cual es la diferencia y porque hay que tener las dos instaladas

* **Jesbar** (1) [778402](https://platzi.com/comentario/778402/) 

	Para aquellos que est√©n trabajando el curso en Windows, aconsejo usar directamente el subsistema de linux para la gesti√≥n de dependencias y en caso de tener alg√∫n inconveniente con el comando de psql, basta con a√±adirlo como una variable de entorno.  
	Saludos!

* **santiagoharkes** (1) [732429](https://platzi.com/comentario/732429/) 

	Hola Gente! Estuve buceando un rato para poder solucionar el problema acerca del comando psql no encontrado en Windows (s√≠, momentaneamente estoy en Windows), y lo pude solucionar de la siguiente forma:
	
	En la instalaci√≥n de PostgreSQL viene una terminal inclu√≠da (la encuentran buscando simplemente en inicio). Abr√≠ la misma, dej√© las opciones por defecto como aparec√≠an apretando enter, al momento de colocar la contrase√±a puse la que configuramos al momento de la instalaci√≥n, y finalmente pude acceder a la base de datos por esta consola.
	
	Espero sea de ayuda!  
	Saludos

	* **Walter Lensinas** [732429] (1)

		Recomendable hacer el curso en un linux, ubuntu por ejemplo. Instalalo en una virtual machine.
		
		Gracias por el dato!

* **estevamdonnabella** (1) [619893](https://platzi.com/comentario/619893/) 

	Para los que est√°n utilizando MySQL2 como el banco de datos, muy probabelmente van a recibir un error como esto:
	
	Client does not support authentication protocol requested by server; consider upgrading MySQL client  
	SequelizeConnectionError: Client does not support authentication protocol requested by server; consider upgrading MySQL client
	
	entonces, dentro de MySQL, para definir las permisiones de usuario y la contrase√±a, utilize:
	
	alter user ‚Äòplatzi‚Äô@‚Äòlocalhost‚Äô identified with mysql_native_password by ‚Äòplatzi‚Äô;
	
	Lo importante ac√° es l√° palabra clave ‚Äúmysql_native_password‚Äù

* **Fernando Azuaje** (1) [566046](https://platzi.com/comentario/566046/) 

	Para los que utilizan ubuntu o cualquier distro basada en debian les comparto este enlace para instalar postgresql en caso de que tengan errores: [https://launchschool.com/blog/how-to-install-postgres-for-linux](url)

	* **Fernando Azuaje** [566046] (2)

		Aqui comparto la traduccion del enlace en un post que hice: [https://platzi.com/comunidad/como-instalar-postgresql-en-ubuntu-o-cualquier-distro-basada-en-debian/](url)

* **frankromero** (1) [553371](https://platzi.com/comentario/553371/) 

	Vi que hay mucha gente que no le genera las tablas, solo la base de datos. Eso es debido a que la funci√≥n de sync no tiene un await. y est√° generando el exit de setup antes de que se el sync termin√© de ejecutarse

* **kevin velasco** (1) [515391](https://platzi.com/comentario/515391/) 

	Bueno tuve miles de problemas con postgres en windows , ya que siempre me decia que mi clave de usuari era incorrecta asi se haya ingresado correctamente, bueno‚Ä¶ en fin use mysql, y funciona igual perfectamente solo tienen que instalar ‚Äúmysql2‚Äù: ‚Äú^1.6.5‚Äù,

* **andres-mauricio808** (1) [468096](https://platzi.com/comentario/468096/) 

	en caso tal de que en ubuntu les salga ‚Äúpsql: FATAL: role ‚Äúroot‚Äù does not exist‚Äù cuando ejecutan el comando ‚Äúpsql postgres‚Äù‚Ä¶ ejecuten el siguiente comando ‚Äúsudo -u postgres -i‚Äù

* **Sebastian Yabiku Sifuentes** (1) [448179](https://platzi.com/comentario/448179/) 

	Muy bueno el curso!

* **Jos√© Rubial** (1) [440988](https://platzi.com/comentario/440988/) 

	me da el siguiente problema al ejecutar npm run setup
	``` 
	    role "platzi"isnot permitted tologin
	    
	```

	* **JavierPoduje** [440988] (2)

		* Ingresa nuevamente a la terminal de posgress . En mi caso ingreso primero con el comando:
		
		
		``` 
		    sudo su postgres
		    
		```
		
		y luego con:
		``` 
		    psql
		    
		```
		
		* luego altera el ROLE que creaste agregando un LOGIN de la siguiente manera:
		
		
		``` 
		    ALTERROLE <el-nombre-de-tu-role> WITH LOGIN;
		    
		```
		
		Saludos !

* **deivid707** (1) [430808](https://platzi.com/comentario/430808/) 

	Buena tarde a todos a alguien mas les aparece el siguiente error
	``` 
	    PS C:\Users\david\platzi\platziverse\platziverse-db> npm run lint -- --fix
	    
	    > platziverse-db@1.0.0 lint C:\Users\david\platzi\platziverse\platziverse-db
	    > standard "--fix"
	    
	    standard: Use JavaScript Standard Style (https://standardjs.com)
	      C:\Users\david\platzi\platziverse\platziverse-db\index.js:8:35: 'consfig' is not defined.
	      C:\Users\david\platzi\platziverse\platziverse-db\lib\db.js:3:7: 'Sequelize' is assigned a value but never used.
	      C:\Users\david\platzi\platziverse\platziverse-db\lib\db.js:6:1: 'mosule' is not defined.
	      C:\Users\david\platzi\platziverse\platziverse-db\lib\db.js:8:21: A constructor name should not start with a lowercase letter.
	      C:\Users\david\platzi\platziverse\platziverse-db\lib\db.js:8:31: 'config' is not defined.
	    npm ERR! code ELIFECYCLE
	    npm ERR! errno 1
	    npm ERR! platziverse-db@1.0.0 lint: `standard "--fix"`
	    npm ERR! Exit status 1
	    npm ERR!
	    npm ERR! Failed at the platziverse-db@1.0.0 lint script.
	    npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
	    
	    npm ERR! A complete log of this run can be found in:
	    npm ERR!     C:\Users\david\AppData\Roaming\npm-cache\_logs\2018-11-24T02_51_37_150Z-debug.log
	    PS C:\Users\david\platzi\platziverse\platziverse-db>```
	    
	    alguien que me ayude
	    
	    
	```

	* **Walter Lensinas** [430808] (1)

		Por favor, mostra el c√≥digo para verlo. Por lo que dicen los errores, son typos (mal escritos de las variables).

* **ma_angelica_romero** (1) [395481](https://platzi.com/comentario/395481/) 

	al ejecutar npm run setup no pasa nada, me tira para volver a insertar una linea de comando:
	``` 
	    > platziverse-db@1.0.0 setup C:\platziverse\platziverse-db
	    > SET DEBUG=platziverse:* nodesetup.js
	    
	    PS C:\platziverse\platziverse-db>```
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [395481] (1)

		Prueba poner console.log dentro de setup.js para verificar que se esta llamando el archivo de forma correcta.

* **gosunkugi** (1) [392743](https://platzi.com/comentario/392743/) 

	gente‚Ä¶ estoy trabajando en el terminal de mac pero me doy cuenta que TODO absolutamente todo, cualquier proceso es super lento en mi m√°quina. ¬øEso a qu√© se debe? digamos cuando se cre√≥ el ROLE, el profe dio enter y la respuesta fue instant√°nea pero cuando yo lo hice se tomo un momentico, este tiempo no es tan relevante pero cuando instalo componentes, veo como en el ordenador del profe se toma un minutito mientras que en mi m√°quina se puede tardar hasta diez minutos. Pens√© que era el bloqueo chino que ralentizaba las descargas pero cuando hice el role me di cuenta que no necesariamente.

	* **Carlos Carvajal V√°zquez** [392743] (1)

		hace cuanto no formateas?  
		Recuerda que con el tiempo de uso de una maquina sin darnos cuenta cada ves instalamos mas y mas servicios que se ejecutan en segundo plano, quiz√° en tu caso toma demasiado proceso de computo, verifica en tu administrador de tarea todos los servicios que se ejecutan en segundo plano, puede ser eso.

* **Victor Ruiz** (1) [389887](https://platzi.com/comentario/389887/) 

	Hola, en windows tengo un detalle, si me genera la base de datos y las tablas, pero no termina el programa, para que termine le tengo que oprimir ctrl+c. Que podr√≠a ser?
	``` 
	     platziverse:db:setup Executing (default): SELECT i.relname ASname, ix.indisprimary AS primary, ix.indisunique ASunique, ix.indkey AS indkey, array_agg(a.attnum) as column_indexes, array_agg(a.attname) AS column_names, pg_get_indexdef(ix.indexrelid) AS definition FROM pg_class t, pg_class i, pg_index ix, pg_attribute a WHERE t.oid = ix.indrelid AND i.oid = ix.indexrelid AND a.attrelid = t.oidAND t.relkind = 'r'and t.relname = 'metrics'GROUPBY i.relname, ix.indexrelid,
	    ix.indisprimary, ix.indisunique, ix.indkey ORDERBY i.relname; +126ms
	    
	    
	```

* **cristian13_r** (1) [385504](https://platzi.com/comentario/385504/) 

	como puedo solucionar este error en window
	``` 
	     SET DEBUG=platziverse:* && node setup.js
	    
	    internal/modules/cjs/loader.js:583
	        throw err;
	        ^
	    
	    Error: Cannot find module 'sequelize'
	        at Function.Module._resolveFilename (internal/modules/cjs/loader.js:581:15)
	        at Function.Module._load (internal/modules/cjs/loader.js:507:25)
	        at Module.require (internal/modules/cjs/loader.js:637:17)
	        at require (internal/modules/cjs/helpers.js:20:18)
	        at Object.<anonymous> (c:\Users\Usuario-pc\Desktop\Platzi_\public\PlatziVerse\platziverse-db\lib\db.js:3:19)
	        at Module._compile (internal/modules/cjs/loader.js:689:30)
	        at Object.Module._extensions..js (internal/modules/cjs/loader.js:700:10)
	        at Module.load (internal/modules/cjs/loader.js:599:32)
	        at tryModuleLoad (internal/modules/cjs/loader.js:538:12)
	        at Function.Module._load (internal/modules/cjs/loader.js:530:3)
	    npm ERR! code ELIFECYCLE
	    npm ERR! errno 1
	    npm ERR! platziverse-db@1.0.0setup: `SET DEBUG=platziverse:* && node setup.js`
	    npm ERR! Exit status 1
	    npm ERR!
	    npm ERR! Failed at the platziverse-db@1.0.0 setup script.
	    npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
	    
	    npm ERR! A complete log of this run can be found in:
	    npm ERR!     C:\Users\Usuario-pc\AppData\Roaming\npm-cache\_logs\2018-09-21T20_07_21_711Z-debug.log
	    
	```

	* **Walter Lensinas** [385504] (1)

		Instalaste sequelize? Por favor, mostra el codigo.

* **Edwin Giovanni P√©rez** (1) [382030](https://platzi.com/comentario/382030/) 

	Hola, me podrian apoyar con este error, a lo que veo pueden los los arhivos basura de las diferentes versiones de node que no se estan utlizando, pero hasta ahora no lo he resuelto  
	![Captura de pantalla 2018-09-17 a la\(s\) 08.56.46.png](https://static.platzi.com/media/user_upload/Captura%20de%20pantalla%202018-09-17%20a%20la%28s%29%2008.56.46-12aa1ac1-7ac5-44f9-80a2-8b7b4bafa200.jpg)

	* **Diego Alexander Forero Higuera (Platzi)** [382030] (1)

		Al parecer tienes un error al momento de importar el modelo agents, revisas las rutas.

* **Iv√°n Mauricio Toro Cifuentes** (1) [376141](https://platzi.com/comentario/376141/) 

	¬øPor qu√© se indica la variable de entorno **DEBUG** en el script _setup_?
	``` 
	    "setup": "SET DEBUG=platziverse:* node setup.js"
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [376141] (1)

		Porque estas en desarrollo y este par√°metro te permite ver de forma detallada lo que hace el servicio, el DEBUG lo debes usar solo para desarrollo, en producci√≥n la configuraci√≥n es diferente y se ve en las clases finales al momento de hacer deploy.

	* **Iv√°n Mauricio Toro Cifuentes** [376141] (1)

		 **¬°Gracias!**

* **juanortiz** (1) [362124](https://platzi.com/comentario/362124/) 

	Siempre me sale este error cuando corro lint, y no se puede arreglar con npm run lint ‚Äì --fix
	``` 
	    platziverse-db\setup.js:1:1: Parsing error: Unexpected character 'ÔøΩ'
	    
	```
	
	Tengo q eliminar la clase y volver a copiarla para q no me vote error, ¬øPor que pasa esto?

	* **Diego Alexander Forero Higuera (Platzi)** [362124] (1)

		borra la primera linea de tu archivo y escribe esa linea a mano, al parecer hay un car√°cter extra√±o invisible en la primera posici√≥n del archivo y no lo puede eliminar el linter.

* **cunarciso** (1) [362007](https://platzi.com/comentario/362007/) 

	ERROR:  
	role ‚Äúplatzi‚Äù is not permitted to log in
	
	SOLUCI√ìN:  
	ALTER ROLE ‚Äúplatzi‚Äù WITH LOGIN;

	* **Jos√© Rubial** [362007] (2)

		me aparece este error psql: FATAL: Peer authentication failed for user ‚Äúplatzi‚Äù

* **Gerardo Nava Pereda** (1) [357516](https://platzi.com/comentario/357516/) 

	Me da este error:
	``` 
	    > DEBUG=sandbox:* node setup.js
	    
	    (node:16875) UnhandledPromiseRejectionWarning: TypeError: db isnot a function
	        atsetup(/home/genxpro/ReactProjects/NodeJS/setup.js:18:9)
	        atObject.<anonymous> (/home/genxpro/ReactProjects/NodeJS/setup.js:30:1)
	        atModule._compile(module.js:652:30)
	        atObject.Module._extensions..js(module.js:663:10)
	        atModule.load(module.js:565:32)
	        attryModuleLoad(module.js:505:12)
	        atFunction.Module._load(module.js:497:3)
	        atFunction.Module.runMain(module.js:693:10)
	        atstartup(bootstrap_node.js:191:16)
	        atbootstrap_node.js:612:3
	    (node:16875) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an asyncfunctionwithoutacatchblock, orbyrejectingapromisewhichwasnothandledwith .catch(). (rejection id: 1)
	    (node:16875) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.
	    
	```
	
	Este es mi setup.js
	``` 
	    'use strict'
	    
	    const debug = require('debug')('sandbox:db:setup')
	    const db = require('./')
	    
	    asyncfunctionsetup () {
	      const config = {
	        database: process.env.DB_NAME || 'sandbox',
	        username: process.env.DB_USER || 'gnppro',
	        password: process.env.DB_PASS || 'netf5grf',
	        host: process.env.DB_HOST || 'localhost',
	        dialect: 'postgres',
	        operatorsAliases: false,
	        logging: s => debug(s),
	        setup: true
	      }
	    
	      await db(config).catch(handleFatalError)
	      // console.log(db)
	      console.log('Success!')
	      process.exit(0)
	    }
	    
	    functionhandleFatalError (err) {
	      console.error(err.message)
	      console.error(err.stack)
	      process.exit(1)
	    }
	    
	    setup()
	    
	```

* **Jhojany Jose Uzategui Araujo** (1) [343498](https://platzi.com/comentario/343498/) 

	Amigos tengo el siguiente problema a ver si me pueden ayudar
	``` 
	    getaddrinfo ENOTFOUND platzi platzi:5432
	    SequelizeHostNotFoundError: getaddrinfo ENOTFOUND platzi
	    platzi:5432
	        at connection.connect.err (C:\Users\Hewllet\Videos\aaa\platziverse\platziverse-db\node_modules\sequelize\lib\dialects\postgres\connection-manager.js:119:24)
	        at Connection.connectingErrorHandler (C:\Users\Hewllet\Videos\aaa\platziverse\platziverse-db\node_modules\pg\lib\client.js:123:14)
	        at Connection.emit (events.js:182:13)
	        at Socket.reportStreamError (C:\Users\Hewllet\Videos\aaa\platziverse\platziverse-db\node_modules\pg\lib\connection.js:71:10)
	        at Socket.emit (events.js:182:13)
	        at emitErrorNT (internal/streams/destroy.js:82:8)
	        at emitErrorAndCloseNT (internal/streams/destroy.js:50:3)
	        at process._tickCallback (internal/process/next_tick.js:63:19)```
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [343498] (3)

		No esta encontrando el motor de base de datos, revisa que este iniciado el servicio y que te puedas conectar desde la terminal.

	* **Jhojany Jose Uzategui Araujo** [343498] (1)

		el servicio de postgres?

	* **Diego Alexander Forero Higuera (Platzi)** [343498] (1)

		Si, el servicio de postgres.

	* **Jhojany Jose Uzategui Araujo** [343498] (1)

		ya lo arregle el error era que en el host tenia ‚Äòplatzi‚Äô en vez de ‚Äòlocalhost‚Äô

* **camiladi** (1) [343245](https://platzi.com/comentario/343245/) 

	la verdad es que la estoy pasando mal con este error
	``` 
	    la autentificaciÔøΩn password fallÔøΩ para el usuario ÔøΩplatziÔøΩ
	    SequelizeConnectionError: la autentificaciÔøΩn password fallÔøΩ para el usuario ÔøΩplatziÔøΩ
	        at connection.connect.err (/mnt/c/Users/Ricardo/Desktop/platzi/platziverse/platziverse-db/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:128:24)
	        at Connection.connectingErrorHandler (/mnt/c/Users/Ricardo/Desktop/platzi/platziverse/platziverse-db/node_modules/pg/lib/client.js:123:14)
	        at emitOne (events.js:116:13)
	        at Connection.emit (events.js:211:7)
	        at Socket.<anonymous> (/mnt/c/Users/Ricardo/Desktop/platzi/platziverse/platziverse-db/node_modules/pg/lib/connection.js:123:12)
	        at emitOne (events.js:116:13)
	        at Socket.emit (events.js:211:7)
	        at addChunk (_stream_readable.js:263:12)
	        at readableAddChunk (_stream_readable.js:250:11)
	        at Socket.Readable.push (_stream_readable.js:208:10)
	        at TCP.onread (net.js:597:20)
	    
	```
	
	tal cual est√°.

	* **Diego Alexander Forero Higuera (Platzi)** [343245] (1)

		Asegurate de estar usando la misma clave que pusiste en la base de datos para el usuario platzi, si no tienes usuario platzi entonces usa el usuario root que es el que se crea por defecto en la base datos.

	* **camiladi** [343245] (1)

		intent√© eso mil veces üò¶ estoy ahora desistalando postgres porque ya he hecho demasiado l√≠o con un par de arcivos jajajaja ¬øme recomiendas hacer el curso de porstgres antes de seguir avanzando? porque siento que me limita mucho el no entender nada sobre el core de postgresql

	* **Diego Alexander Forero Higuera (Platzi)** [343245] (2)

		Lo que se ense√±a en esta clase al momento de crear la base de datos y usuario es lo necesario para continuar con el curso, lo que te puedo recomendar es que lo hagas nuevamente y aseg√∫rate de hacer todo paso a pasa igual como lo hace el profesor.

	* **camiladi** [343245] (1)

		bueno como siempre gollum23 ten√≠a raz√≥n lo que hice a la final fue borrar, la **base de datos** platziverse el **role** platzi y crearlos de nuevo y funcion√≥‚Ä¶ Sin mencionar que desinstal√© e instal√© postgres nuevamente‚Ä¶

* **Enova Desarrollo** (1) [335027](https://platzi.com/comentario/335027/) 

	Yo tengo el siguiente problema:  
	al ejecutar en la terminal: npm run setup
	
	me regresa lo siguiente:
	
	> DEBUG=platziverse:* node setup.js  
	>  platziverse:db:setup Executing (default): SELECT 1+1 AS result +0ms  
	>  Success!
	
	No me manda ningun error, pero si reviso la base las tablas no estan  
	alguien me puede decir que estoy haciendo mal o que me falta?

	* **Diego Alexander Forero Higuera (Platzi)** [335027] (2)

		Si ver el c√≥digo y solo la salida, esta ejecutando la query `SELECT 1 + 1 AS result` revisa que est√©s usando el archivo correcto y que por ejemplo no hagas un return antes que termine de hacer todo el proceso.

	* **Jos√© Tuzinkievicz** [335027] (2)

		A m√≠ me pas√≥ lo mismo y me di cuenta que en el index.js me falt√≥ agregar:
		``` 
		    if (config.setup) {
		        awaitsequelize.sync({ force: true })
		      }
		    
		```
		
		Espero te ayude.

* **Jes√∫s Alpino** (1) [318927](https://platzi.com/comentario/318927/) 

	Hola, tengo problemas para correr el setup si alguien me puede ayudar‚Ä¶  
	me arroja este error:
	``` 
	    > SET DEBUG=alpverse:* && node setup.js
	    
	    { database: 'alpserve',
	      username: 'root',
	      password: '',
	      setup:
	       { host: 'localhost',
	         dialect: 'mysql',
	         operatorsAliases: false,
	         pool: { max: 5, min: 0, acquire: 30000, idle: 10000 } } }
	    Dialect needs to be explicitly supplied as of v4.0.0
	    Error: Dialect needs to be explicitly supplied as of v4.0.0
	        at new Sequelize (C:\Users\jalpino\Documents\Carrera de javascript\Nodejs\alpverse\alpverse-db\node_modules\sequelize\lib\sequelize.js:181:13)
	        at Sequelize.normalizeDataType (C:\Users\jalpino\Documents\Carrera de javascript\Nodejs\alpverse\alpverse-db\node_modules\Sequelize\lib\sequelize.js:1108:45)
	        at Sequelize.normalizeAttribute (C:\Users\jalpino\Documents\Carrera de javascript\Nodejs\alpverse\alpverse-db\node_modules\Sequelize\lib\sequelize.js:1127:27)
	        at rawAttributes._.mapValues (C:\Users\jalpino\Documents\Carrera de javascript\Nodejs\alpverse\alpverse-db\node_modules\Sequelize\lib\model.js:801:34)
	        at C:\Users\jalpino\Documents\Carrera de javascript\Nodejs\alpverse\alpverse-db\node_modules\lodash\lodash.js:13400:38
	        at C:\Users\jalpino\Documents\Carrera de javascript\Nodejs\alpverse\alpverse-db\node_modules\lodash\lodash.js:4925:15
	        at baseForOwn (C:\Users\jalpino\Documents\Carrera de javascript\Nodejs\alpverse\alpverse-db\node_modules\lodash\lodash.js:3010:24)
	        at Function.mapValues (C:\Users\jalpino\Documents\Carrera de javascript\Nodejs\alpverse\alpverse-db\node_modules\lodash\lodash.js:13399:7)
	        at Function.init (C:\Users\jalpino\Documents\Carrera de javascript\Nodejs\alpverse\alpverse-db\node_modules\Sequelize\lib\model.js:799:28)
	        at Sequelize.define (C:\Users\jalpino\Documents\Carrera de javascript\Nodejs\alpverse\alpverse-db\node_modules\Sequelize\lib\sequelize.js:342:11)
	        at setupAgentModel (C:\Users\jalpino\Documents\Carrera de javascript\Nodejs\alpverse\alpverse-db\models\agent.js:5:20)
	        at module.exports (C:\Users\jalpino\Documents\Carrera de javascript\Nodejs\alpverse\alpverse-db\app.js:9:22)
	        at setup (C:\Users\jalpino\Documents\Carrera de javascript\Nodejs\alpverse\alpverse-db\setup.js:25:9)
	        at Object.<anonymous> (C:\Users\jalpino\Documents\Carrera de javascript\Nodejs\alpverse\alpverse-db\setup.js:36:1)
	        at Module._compile (module.js:643:30)
	        at Object.Module._extensions..js (module.js:654:10)
	        at Module.load (module.js:556:32)
	        at tryModuleLoad (module.js:499:12)
	        at Function.Module._load (module.js:491:3)
	        at Function.Module.runMain (module.js:684:10)
	        at startup (bootstrap_node.js:187:16)
	        at bootstrap_node.js:608:3
	    npm ERR! code ELIFECYCLE
	    npm ERR! errno 1
	    npm ERR! alpverse-db@0.0.1 setup: `SET DEBUG=alpverse:* && node setup.js`
	    npm ERR! Exit status 1
	    npm ERR!
	    npm ERR! Failed at the alpverse-db@0.0.1 setup script.
	    npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
	    
	    npm ERR! A complete log of this run can be found in:
	    npm ERR!     C:\Users\jalpino\AppData\Roaming\npm-cache\_logs\2018-06-24T03_58_31_455Z-debug.log
	    
	```
	
	cuando ejecuto:
	``` 
	    npm run setyo
	    
	    
	```
	
	mi script dice lo siguiente
	``` 
	    "scripts": {
	        "setup": "SET DEBUG=alpverse:* && node setup.js",
	        "lint": "standard"
	      },
	    
	```
	
	setup.js;
	``` 
	    'use strict'
	    
	    const debug = require('debug')('alpverse:db:setup')
	    const db = require('./')
	    
	    asyncfunctionsetup () {
	      let config = {
	        database:  'alpserve',
	        username: 'jalpino',
	        password: 'password',
	        setup: {
	                host: 'localhost',
	                dialect: 'mysql',
	                operatorsAliases: false,
	                pool: {
	                    max: 5,
	                    min: 0,
	                    acquire: 30000,
	                    idle: 10000
	                }
	            }
	      }
	    
	    
	      await db(config).catch(handlerFatalError)
	    
	      console.log('Success')
	      process.exit(0)
	    }
	    
	    const handlerFatalError = (err) => {
	      console.error(err.message)
	      console.error(err.stack)
	      process.exit(1)
	    }
	    setup()
	    
	```
	
	Gracias de antemano

	* **Fabi√°n Veliz** [318927] (1)

		Hola!  
		Parece no encontrar el `dialect`. Est√° bien ese objeto de configuraci√≥n?  
		`{ host, dialect, ... }` dentro de la key `setup`?

	* **Fabi√°n Veliz** [318927] (0)

		Ah√≠ v√≠ que tuviste problemas con los par√°metros al pasarselos a `sequelize` -> <https://platzi.com/comentario/318929/>
		
		Probaste en vez de pasar param por param, ajustar el objeto `config` para que quede como lo hace el profesor?
		``` 
		    let config = {
		      database: 'alpserve',
		      username: 'jalpino',
		      password: 'password',
		      host: 'localhost',
		      dialect: 'mysql',
		      operatorsAliases: false,
		      pool: {
		        max: 5,
		        min: 0,
		        acquire: 30000,
		        idle: 10000
		      }
		    }
		    
		```
		
		Luego pasas directamente esa `config`.
		``` 
		    new Sequelize(config)
		    
		```
		
		Saludos!

* **Roberto Orlando  Marroquin Gonzalez** (1) [278128](https://platzi.com/comentario/278128/) 

	Para usuarios de UBUNTU, con problemas con el comando
	``` 
	    psql
	    
	```
	
	pueden o ya sea entrar de la siguiente forma
	``` 
	    sudo su postgres
	    
	```
	
	y luego
	``` 
	    psql
	    
	```
	
	o si gustan accesar con su usuario y no tener que estar accesando primero como postgres, necesitan crear un rol con el mismo nombre de su usuario del ordenador y asignarle permisos de LOGIN y si gustan de SUPERUSER y luego asignarle los privilegios de la base de datos que han creado.

* **Carlos Enrique Gonzalez Pe√±a** (1) [272138](https://platzi.com/comentario/272138/) 

	Alguien sabe que es este error, veo que todo dentro de agent esta escrito bien sin embargo me dice que no se reconoce el tipo de dato del campo pid
	``` 
	    Unrecognized data type for field pid
	    Error: Unrecognized data type for field pid
	        at rawAttributes._.mapValues (C:\Users\CABNLDS074\Documents\Cursos Platzi\Node\platziverse-db\node_modules\sequelize\lib\model.js:803:15)
	        at C:\Users\CABNLDS074\Documents\Cursos Platzi\Node\platziverse-db\node_modules\lodash\lodash.js:13392:38
	        at C:\Users\CABNLDS074\Documents\Cursos Platzi\Node\platziverse-db\node_modules\lodash\lodash.js:4917:15
	        at baseForOwn (C:\Users\CABNLDS074\Documents\Cursos Platzi\Node\platziverse-db\node_modules\lodash\lodash.js:3002:24)
	        at Function.mapValues (C:\Users\CABNLDS074\Documents\Cursos Platzi\Node\platziverse-db\node_modules\lodash\lodash.js:13391:7)
	        at Function.init (C:\Users\CABNLDS074\Documents\Cursos Platzi\Node\platziverse-db\node_modules\sequelize\lib\model.js:798:28)
	        at Sequelize.define (C:\Users\CABNLDS074\Documents\Cursos Platzi\Node\platziverse-db\node_modules\sequelize\lib\sequelize.js:342:11)
	        at setupAgentModel (C:\Users\CABNLDS074\Documents\Cursos Platzi\Node\platziverse-db\models\agent.js:9:20)
	        at module.exports (C:\Users\CABNLDS074\Documents\Cursos Platzi\Node\platziverse-db\index.js:9:22)
	        at setup (C:\Users\CABNLDS074\Documents\Cursos Platzi\Node\platziverse-db\setup.js:16:9)
	        at Object.<anonymous> (C:\Users\CABNLDS074\Documents\Cursos Platzi\Node\platziverse-db\setup.js:28:1)
	        at Module._compile (module.js:660:30)
	        at Object.Module._extensions..js (module.js:671:10)
	        at Module.load (module.js:573:32)
	        at tryModuleLoad (module.js:513:12)
	        at Function.Module._load (module.js:505:3)
	        at Function.Module.runMain (module.js:701:10)
	        at startup (bootstrap_node.js:190:16)
	        at bootstrap_node.js:662:3
	    npm ERR! code ELIFECYCLE
	    npm ERR! errno 1
	    npm ERR! platziverse-db@1.0.0 setup: `SET DEBUG=platziverse:* && node setup.js`
	    npm ERR! Exit status 1
	    npm ERR!
	    npm ERR! Failed at the platziverse-db@1.0.0 setup script.
	    npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
	    
	    npm ERR! A complete log of this run can be found in:
	    npm ERR!     C:\Users\CABNLDS074\AppData\Roaming\npm-cache\_logs\2018-03-12T18_46_49_794Z-debug.log```
	    
	    Esto e slo que tengo en agent
	    
	    
	    
	```
	
	‚Äòuse strict‚Äô
	
	const Sequelize = require(‚Äòsequelize‚Äô)  
	const setupDataBase = require(‚Äô‚Ä¶/lib/db‚Äô)
	
	module.exports = function setupAgentModel (config) {  
	const sequelize = setupDataBase(config)
	
	return sequelize.define(‚Äòagent‚Äô, {  
	uudi: {  
	type: Sequelize.STRING,  
	allowNull: false  
	},  
	username: {  
	type: Sequelize.STRING,  
	allowNull: false  
	},  
	nombre: {  
	type: Sequelize.STRING,  
	allowNull: false  
	},  
	hostname: {  
	type: Sequelize.STRING,  
	allowNull: false  
	},  
	pid: {  
	type: sequelize.INTEGER,  
	allowNull: false  
	},  
	connected: {  
	type: Sequelize.BOOLEAN,  
	allowNull: false,  
	defaultValue: false  
	}  
	})  
	}
	``` 
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [272138] (3)

		Tienes un error de digitaci√≥n tienes sequelize y es Sequelize en la parte de pid.

	* **Carlos Enrique Gonzalez Pe√±a** [272138] (1)

		Dios, nunca vi ese error por mas que vi el campo de pid.  
		Muchas gracias por el apoyo @GOLLUM23 y por dedicarle tu tiempo a la comunidad para resolver problemas

* **Jordi** (1) [252900](https://platzi.com/comentario/252900/) 

	Me sale esto:
	``` 
	    sequelize deprecated String based operators are now deprecated. Please use Symbol based operators for better security, read more athttp://docs.sequelizejs.com/manual/tutorial/querying.html#operators node_modules/sequelize/lib/sequelize.js:237:13
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [252900] (2)

		Es por una actualizaci√≥n de la librer√≠a donde recomiendan por seguridad usar simbolos en lugar de operadores normales, en el enlace que menciona puedes ver como modificar el c√≥digo.

	* **Jonathan Alberto Vega Ortega** [252900] (0)

		Para solucionar este problema, se debe agregar en el object de config lo siguiente:
		
		operatorsAliases=false
		``` 
		    const config = {
		        database: process.env.DB_NAME || 'thingsdb',
		        username: process.env.DB_USER || 'platzi',
		        password: process.env.DB_PASS || 'platzi',
		        host: process.env.DB_HOST || 'localhost',
		        dialect: 'postgres',
		        operatorsAliases: false,
		        logging: s => debug(s),
		        setup: true
		      }
		    
		```

* **Kevin Lozoya Giner** (1) [234426](https://platzi.com/comentario/234426/) 

	por qu√© index.js es el archivo principal del package si el que ejecuta todo el c√≥digo es setup.js?  
	Se deber√≠a cambiar?

	* **Eduardo Rasgado Ruiz** [234426] (0)

		setup.js est√° ah√≠ para las pruebas y para comenzar a operar en un servidor.

* **Enmanuel Jarquin** (1) [228312](https://platzi.com/comentario/228312/) 

	Muchachos soy usuario de windows desde hace rato, pero para programar en serio con nodejs, y algunos casos con python, he decidido usar ubuntu, si tienen una pc con pocos recursos como para correr una maquina virtual hagan una partici√≥n e instalan ubuntu ah√≠, yo estoy trabajando as√≠, ver√°n que es mucho m√°s c√≥modo el trabajo, adem√°s que cuando investigan o leen art√≠culos en ingl√©s con nodejs, ver√°n que son pocos los art√≠culos escritos con windows, con una partici√≥n de 50GB trabajan perfectamente, sin mencionar los beneficios que trae el usar la terminal.

* **Juli√°n Sotelo** (1) [192204](https://platzi.com/comentario/192204/) 

	Tuve el problema que al ejecutar `psql postgres` en macOS, el resultado que obtuve fue `-bash: psql: command not found`. Lo anterior lo pude solucionar de la siguiente manera.
	
	  1. Detener el servicio
	
	
	``` 
	    brew services stop postgresql
	    
	```
	
	  1. Desintalar postgresql
	
	
	``` 
	    brew uninstall postgresql
	    
	```
	
	  1. Ejecutar el siguiente comando para reinstalar brew
	
	
	``` 
	    /usr/bin/ruby -e"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
	    
	```
	
	  1. Volver a instalar postgresql
	
	
	``` 
	    brew install postgresql
	    
	```
	
	Luego de ello si se ejecuta `postgres -V` nos mostrar√° la versi√≥n que tenemos instalada, y al usar `psql postgres` accederemos a la consola. Espero sea de ayuda para aquellos que lleguen a presentar el mismo problema.

* **Alexander  Silvera** (1) [191863](https://platzi.com/comentario/191863/) 

	Tengo un problema y es que no me reconoce el comando  
	psql postgres
	
	y si lo tengo instalado porque en la terminal de postgres puedo realizar los comandos correspondientes.

	* **sampol.90 (Platzi)** [191863] (0)

		Intenta conectandote a postgres con `psql postgres`

* **Erik Ochoa** (1) [191797](https://platzi.com/comentario/191797/) 

	Si tiene macOS recuerden que para correr correr postgres por medio de brew necesitan tener instalado brew services
	
	Instalar:
	``` 
	    brew tap homebrew/services
	    
	```
	
	Correr postgres
	``` 
	    brew services start postgres
	    
	```
	
	Ver servicios
	``` 
	    brew services ls
	    
	```

* **Alirio Alejandro Angel Arenas** (1) [77239](https://platzi.com/comentario/900701/) 
mi principal pregunta es porque nunca utiliza funciones flecha ??

	* **Walter Lensinas** [77239] (1)

		Son cuestiones de tu forma de desarrollo.
		``` 
		    const miFuncion = function(fafa) { }
		    
		```
		``` 
		    const miFuncion = fafa => { }
		    
		```
		
		Por mi lado, me gusta ser explicito en el c√≥digo.

* **deivid707** (1) [46388](https://platzi.com/comentario/430808/) 
Buena tarde a todos a alguien mas les aparece el siguiente error PS C:\Users\david\platzi\platziverse\platziverse-db> npm run li...

	* **Walter Lensinas** [46388] (1)

		Por favor, mostra el c√≥digo para verlo. Por lo que dicen los errores, son typos (mal escritos de las variables).

* **gosunkugi** (1) [43024](https://platzi.com/comentario/392743/) 
gente‚Ä¶ estoy trabajando en el terminal de mac pero me doy cuenta que TODO absolutamente todo, cualquier proceso es super lento en mi m√°qu...

	* **Carlos Carvajal V√°zquez** [43024] (1)

		hace cuanto no formateas?  
		Recuerda que con el tiempo de uso de una maquina sin darnos cuenta cada ves instalamos mas y mas servicios que se ejecutan en segundo plano, quiz√° en tu caso toma demasiado proceso de computo, verifica en tu administrador de tarea todos los servicios que se ejecutan en segundo plano, puede ser eso.

* **cristian13_r** (1) [42319](https://platzi.com/comentario/385504/) 
como puedo solucionar este error en window SET DEBUG=platziverse:* && node setup.js internal/modules/cjs/loader.js:583 ...

	* **Walter Lensinas** [42319] (1)

		Instalaste sequelize? Por favor, mostra el codigo.

* **Edwin Giovanni P√©rez** (1) [41980](https://platzi.com/comentario/382030/) 
Hola, me podrian apoyar con este error, a lo que veo pueden los los arhivos basura de las diferentes versiones de node que no se estan ut...

	* **Diego Alexander Forero Higuera (Platzi)** [41980] (1)

		Al parecer tienes un error al momento de importar el modelo agents, revisas las rutas.

* **juanortiz** (1) [40093](https://platzi.com/comentario/362124/) 
Siempre me sale este error cuando corro lint, y no se puede arreglar con npm run lint ‚Äì --fix platziverse-db\setup.js:1:1: Parsing ...

	* **Diego Alexander Forero Higuera (Platzi)** [40093] (1)

		borra la primera linea de tu archivo y escribe esa linea a mano, al parecer hay un car√°cter extra√±o invisible en la primera posici√≥n del archivo y no lo puede eliminar el linter.

* **Jhojany Jose Uzategui Araujo** (1) [38370](https://platzi.com/comentario/343498/) 
Amigos tengo el siguiente problema a ver si me pueden ayudar getaddrinfo ENOTFOUND platzi platzi:5432 SequelizeHostNotFoundError: g...

	* **Diego Alexander Forero Higuera (Platzi)** [38370] (3)

		No esta encontrando el motor de base de datos, revisa que este iniciado el servicio y que te puedas conectar desde la terminal.

* **Enova Desarrollo** (1) [37614](https://platzi.com/comentario/335027/) 
Yo tengo el siguiente problema: al ejecutar en la terminal: npm run setup me regresa lo siguiente: DEBUG=platziverse:* node ...

	* **Diego Alexander Forero Higuera (Platzi)** [37614] (2)

		Si ver el c√≥digo y solo la salida, esta ejecutando la query `SELECT 1 + 1 AS result` revisa que est√©s usando el archivo correcto y que por ejemplo no hagas un return antes que termine de hacer todo el proceso.

* **pedri77** (0) [351443](https://platzi.com/comentario/351443/) 

	Despu√©s de instalar Postgres en Mac al realizar el comando`$psql postgres` me dice que el comando no existe. La base de datos est√° creada pero no puedo acceder por linea de comandos. Alguna soluci√≥n?

* **Juan David Granados Figueroa** (0) [319462](https://platzi.com/comentario/319462/) 

	si utilizan windows 10, pueden utilizar el subsistema de Linux en windows y es mucho mas facil üòÉ

* **Jes√∫s Alpino** (0) [318953](https://platzi.com/comentario/318953/) 

	Listo ya solucione era el nombre de la function de setupDatabase me faltaba‚Ä¶  
	igual muchas gracias‚Ä¶ igual no se si sea un aporte pero en vez de reconstruir el objeto sequelize por cada model en vez de pasarle la config pueden pasarle el objeto sequelize que instanciaron antes e igual funciona porque, ejemplo.
	``` 
	    'use strict'
	    
	    const setupDatabase = require('./lib/db')
	    const setupAgentModel = require('./models/agent')
	    const setupMetricModel = require('./models/metric')
	    
	    module.exports = async (config) => {
	        const sequelize = setupDatabase(config)
	        const AgentModel = setupAgentModel(sequelize)
	        const MetricModel = setupMetricModel(sequelize)
	        
	        AgentModel.hasMany(MetricModel)
	        MetricModel.belongsTo(AgentModel)
	        
	        await sequelize.authenticate()
	        
	        if(config.setup){
	            await sequelize.sync({force:true}) 
	        }
	        
	        const Agent = {}
	        const Metric = {}
	    
	        return {
	            Agent,
	            Metric
	        }
	    }```
	    
	```

* **Jes√∫s Alpino** (0) [318929](https://platzi.com/comentario/318929/) 

	me falto mi archivo db.js donde coloco la configuraci√≥n como la espera el constructor de Sequelize‚Ä¶
	``` 
	    const Sequelize = require('Sequelize')
	    let sequelize = null
	    
	    module.exports = (config) => {
	      if (!sequelize) {
	         sequelize = new Sequelize(config.database, config.username, config.password, config.setup)
	      }
	      return sequelize
	    }
	    
	```

* **Sebastian Castillo** (0) [293767](https://platzi.com/comentario/293767/) 

	CONFIGURACION A TRAVES DE CONSOLA DE POSTGRES

* **Hernando Mart√≠nez** (0) [288833](https://platzi.com/comentario/288833/) 

	Hola a todos;
	
	Estoy utilizando el susbistema de Linux para Windows 10 (Ubuntu en WIndows 10).  
	Cuando quiero correr ‚Äúpsql postgres‚Äù me aparece este error:
	``` 
	    psql: could not connect to server: No such fileordirectory
	            Is the server running locally and accepting
	            connections onUnixdomainsocket"/var/run/postgresql/.s.PGSQL.5433"?
	    
	```
	
	¬øalguien sabe c√≥mo resolverlo?

	* **Diego Alexander Forero Higuera (Platzi)** [288833] (2)

		Aseg√∫rate que el servidor de Postgresql esta funcionando, no encuentra el servicio, si esta corriendo entonces intenta pararlo e instalarlo desde la terminal del subsistema de linux para que encuentre el socket.

	* **WILMER ARLEY CAMPA√ëA DIAZ** [288833] (0)

		Intenta asi:
		``` 
		    sudo-upostgrespsql-p 5432 -h 127.0.0.1  ```
		    
		```

* **Marcos Rosemberg** (0) [287755](https://platzi.com/comentario/287755/) 

	En windows 10 me da success pero no crea las tablas

* **Juan Manuel Garcia Velasquez** (0) [286380](https://platzi.com/comentario/286380/) 

	Buen d√≠a,  
	Me sale el siguiente error  
	psql: FATAL: role ‚Äúuser‚Äù does not exist

	* **Diego Alexander Forero Higuera (Platzi)** [286380] (1)

		No tienes creado un role user, debes crearlo, entra a psql con el usuario root o con el que hiciste la instalaci√≥n y ejecutas este comando.
		``` 
		    CREATE ROLEuser WHIT SUPERUSER
		    
		```
		
		<https://www.postgresql.org/docs/8.1/static/sql-createrole.html>

* **Bryam Rodriguez** (0) [285667](https://platzi.com/comentario/285667/) 

	En mi mac tuve que ejecutar `brew services start postgresql` una vez (como dice el profesor) antes de correr `psql postgres`

* **alvaritokore** (0) [275563](https://platzi.com/comentario/275563/) 

	Si para sincronizar la base se tiene que eliminar y crear con el comando
	``` 
	    awaitsequelize.sync({force: true})
	    
	```
	
	Qu√© pasa si la base de datos ya contiene tiene informaci√≥n. Y de pronto se tiene que hacer una modificaci√≥n a la base. ¬øEntonces se tiene que borrar la base y volver a crear con las tablas modificadas?
	
	¬øC√≥mo se podria actualizar la base sin tener que borrarla y crearla nuevamente?

* **Sebastian Diaz** (0) [275119](https://platzi.com/comentario/275119/) 

	en MacOx si se les complica la instalaci√≥n por brew, siempre pueden hacerlo de la manera oficial <http://postgresapp.com/>
	
	solo tienen que desinstalar postgresql de brew y seguir los pasos de la pagina

* **Sebastian Diaz** (0) [275093](https://platzi.com/comentario/275093/) 

	en MacOx si alguien tiene problema de command not found con psql:
	
	agreguen el bin al path y ya esta.
	
	en mi caso:
	
	export PATH=/usr/local/Cellar/postgresql/10.3/bin::$PATH

* **Carlos Enrique Gonzalez Pe√±a** (0) [272115](https://platzi.com/comentario/272115/) 

	Crear DB en postgres

* **andres  pascasio** (0) [271757](https://platzi.com/comentario/271757/) 

	> DEBUG=mydb:* node setup.js
	
	module.js:487  
	throw err;  
	^
	
	Error: Cannot find module 'sequelize‚Äô  
	at Function.Module._resolveFilename (module.js:485:15)  
	at Function.Module._load (module.js:437:25)  
	at Module.require (module.js:513:17)  
	at require (internal/module.js:11:18)
	
	Se me ha presentado el siguiente error, podria alguien orientarme como corregirlo, gracias

* **Jordi** (0) [261782](https://platzi.com/comentario/261782/) 

	Hola, mi usuario de postgres ha perdido su ‚Äú#‚Äù:
	``` 
	    postgres->
	    
	```

	* **davidtoca (Platzi)** [261782] (0)

		Nos das m√°s contexto? que te est√° fallando exactamente? que hiciste?, no te puedes conectar al usuario de postgres? no te funciona la consola de postgres

* **Juan Camilo V√©lez Valencia** (0) [256367](https://platzi.com/comentario/256367/) 

	 **Buen d√≠a,  
	Realizando el ejercicio con otro nombre , me sale el siguiente error:**  
	"standard: Use JavaScript Standard Style (<https://standardjs.com>)  
	C:\controllab\controllab-db\setup.js:5:16: ‚Äòsetup‚Äô is defined but never used."  
	**Alguien me puede apoyar inform√°ndome por que sucede?, gracias**

	* **Diego Alexander Forero Higuera (Platzi)** [256367] (1)

		El error te dice exactamente lo que pasa, estas declarando una variable setup pero jamas la usas, puedes compartir tu c√≥digo para ayudarte a encontrar el problema.

* **Alexander Marenco** (0) [246180](https://platzi.com/comentario/246180/) 

	Nota importante: En linux se debe de configurar el archivo de postgresql.conf y pg_hba.conf, ya que al momento de ejecutar el setup nos da un error de autentificaci√≥n Ident fall√≥ para el usuario ¬´platzi¬ª
	
	gedit /var/lib/pgsql/data/pg_hba.conf  
	Ya estando en el archivo debemos buscar la siguiente l√≠nea
	
	host all all 127.0.0.1/32 ident  
	Esta l√≠nea debe ser cambiada por  
	host all all 127.0.0.1/32 md5

* **Victor Ferreira Angel Ferreira** (0) [243417](https://platzi.com/comentario/243417/) 

	Muy buenas para todos  
	Me podr√≠an ayudar me da este error en la consola de Win10  
	PS C:\wamp64\www\angular\curso-avanzado-node\platzivers-db> psql postgres  
	psql: could not connect to server: Connection refused (0x0000274D/10061)  
	Is the server running on host ‚Äúlocalhost‚Äù (::1) and accepting  
	TCP/IP connections on port 5432?  
	could not connect to server: Connection refused (0x0000274D/10061)  
	Is the server running on host ‚Äúlocalhost‚Äù (127.0.0.1) and accepting  
	TCP/IP connections on port 5432?
	
	como puedo solucionarlo

	* **Diego Alexander Forero Higuera (Platzi)** [243417] (1)

		Revisa que tu servidor de postgres este corriendo y que los datos de usuario, contrase√±a y base de datos est√©n bien, el error es porque no se puede conectar a la base de datos.

* **Way** (0) [241155](https://platzi.com/comentario/241155/) 

	tengo este problema
	``` 
	    <> platziverse-db@1.0.0 setup C:\Users\way\Desktop\cursos\nodejs\platziverse\platziverse-db
	    > SET DEBUG=platziverse:* && node setup.js
	    
	    module.js:540
	        throw err;
	        ^
	    
	    Error: Cannot find module'../lib/db'
	        at Function.Module._resolveFilename (module.js:538:15)
	        at Function.Module._load (module.js:468:25)
	        at Module.require (module.js:587:17)
	        at require (internal/module.js:11:18)
	        at Object.<anonymous> (C:\Users\way\Desktop\cursos\nodejs\platziverse\platziverse-db\index.js:2:23)
	        at Module._compile (module.js:643:30)
	        at Object.Module._extensions..js (module.js:654:10)
	        at Module.load (module.js:556:32)
	        at tryModuleLoad (module.js:499:12)
	        at Function.Module._load (module.js:491:3)
	    npm ERR! code ELIFECYCLE
	    npm ERR! errno 1
	    npm ERR! platziverse-db@1.0.0 setup: `SET DEBUG=platziverse:* && node setup.js`
	    npm ERR! Exit status 1
	    npm ERR!
	    npm ERR! Failed at the platziverse-db@1.0.0 setup script.
	    npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
	    
	    npm ERR! A complete log of this run can be found in:
	    npm ERR!     C:\Users\way\AppData\Roaming\npm-cache\_logs\2018-01-11T19_51_51_216Z-debug.log>
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [241155] (1)

		Tienes mal la ruta de la configuraci√≥n de la db parace que tienes `../lib/db` y es `./lib/db`
		``` 
		    const setupDatabase = require('./lib/db')
		    
		```

* **Way** (0) [241140](https://platzi.com/comentario/241140/) 

	tengo este problema üòï
	``` 
	    <c> platziverse-db@1.0.0 setup C:\Users\way\Desktop\cursos\nodejs\platziverse\platziverse-db
	    > DEBUG=platziverse:* node setup.js
	    
	    "DEBUG"nose reconoce como un comando interno o externo,
	    programa o archivo por lotes ejecutable.
	    npm ERR! code ELIFECYCLE
	    npm ERR! errno 1
	    npm ERR! platziverse-db@1.0.0 setup: `DEBUG=platziverse:* node setup.js`
	    npm ERR! Exit status 1
	    npm ERR!
	    npm ERR! Failed at the platziverse-db@1.0.0 setup script.
	    npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
	    output above.
	    
	    npm ERR! A complete log of this run can be found in:                                 _25_47_269Z-debug.log
	    npm ERR!     C:\Users\waysolutions-soft\AppData\Roaming\npm-cache\_logs\2018-01-11T19_25_47_269Z-debug.log>
	    
	```

* **mafevito** (0) [229803](https://platzi.com/comentario/229803/) 

	Dejo aqu√≠ un peque√±o resumen de como usar **Postgres** en **Ubuntu**.
	
	Los repositorios por defecto de Ubuntu contienen paquetes Postgres, as√≠ que podemos instalarlo f√°cilmente utilizando el sistema de paqueter√≠a apt.
	
	Instalaci√≥n:
	``` 
	    $ sudo apt-getupdate
	    
	```
	``` 
	    $ sudo apt-get install postgresql postgresql-contrib
	    
	```
	
	Cambiando a una cuenta postgres
	``` 
	    $ sudo -i -u postgres
	    
	```
	
	Acceder a la consola de postgres
	``` 
	    $ psql
	    
	```
	
	Salir de la consola de postgres
	``` 
	    postgres=# \q
	    
	```
	
	**PD: COPIAR EL C√ìDIGO SIN EL SIMBOLO ($)**

* **Juan Andres  Cordero Arias** (0) [229406](https://platzi.com/comentario/229406/) 

	CREATE ROLE platzi WITH LOGIN PASSWORD ‚Äòplatzi‚Äô;  
	CREATE DATABASE platziverse;  
	GRANT ALL PRIVILEGES ON DATABASE platziverse TO platzi;  
	\quit

* **Juan Andres  Cordero Arias** (0) [229398](https://platzi.com/comentario/229398/) 

	Para los que estan usando W7, en la Terminal de VCode
	
	psql -h localhost -U postgres

	* **Juan Andres  Cordero Arias** [229398] (0)

		si no les reconoce el comando psql
		
		computer => properties => advanced system settings=> Environment Variables => PATH
		
		;C:\Program Files\PostgreSQL\10\bin;C:\Program Files\PostgreSQL\10\lib

* **sukomost** (0) [220252](https://platzi.com/comentario/220252/) 

	Buenas,
	
	no estiendo este require const debug = require(‚Äòdebug‚Äô)(‚Äòplatziverse:db:setup‚Äô)
	
	Como se forma el namespace??

	* **ricardocelis (Platzi)** [220252] (0)

		hola! dices que no est√°s entiendiendo la instrucci√≥n?

	* **sukomost** [220252] (0)

		Buenas Ricardo,
		
		Lo que no entiendo es el segundo parentesis de require, y como se compone el namespace que se le pasa 'platziverse:db:setup‚Äô

	* **Francisco Ochoa** [220252] (0)

		El segundo parentesis funciona igual a una funci√≥n‚Ä¶

	* **sukomost** [220252] (0)

		Gracias por responder, pero lo que no se entiende es porque enviamos platziverse:db:setup.
		
		Por si alguien le pasa, la mascara de debug se configura en el package.json.

* **gmocmm** (0) [215650](https://platzi.com/comentario/215650/) 

	Hola una duda, no entendi muy bien esta parte: DEBUG=platziverse: *  
	Que indica? üò¶

	* **Miguel Angel Gatto** [215650] (0)

		Como esto es un mono repo, va a haber muchas cosas y todas van a llamar a debug para mostrar como viene.  
		Entonces se usa como una estructura de √°rbol platziverse:db:setup. En el comando que se llama, se indica que muestre todos los errores de la app, no otros.  
		Si cambiamos a platziverse:db:setup, y da un logging en index no va a salir pq la ruta de index ser√≠a platziverse:db:index y no machea; en cambio con platziverse:* encaja todo.  
		Esto no lo prob√© pero por l√≥gica. Si alguien lo puede confirmar, gracias.

* **Yonathan Gutierrez** (0) [208932](https://platzi.com/comentario/208932/) 

	me presenta error‚Ä¶
	``` 
	    asyncfunctionsetup() {
	          ^^^^^^^^
	    
	    SyntaxError: Unexpected token function```
	    
	    alguienmepodriaayudar?
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [208932] (2)

		Revisa que est√©s usando la √∫ltima versi√≥n de node o el preset de babel ya que async es soportado en node 8 pero no en node 6.

	* **sampol.90 (Platzi)** [208932] (1)

		Te recomiendo usar [NVM](https://github.com/creationix/nvm) para manejar multiples versiones de Node sin afectar otros proyectos üòÉ

	* **Sergio Vargas** [208932] (1)

		Espacio despues del async, me paso igual, usar`nvm use 8`

* **Ezequiel Pablo Galata** (0) [206283](https://platzi.com/comentario/206283/) 

	Tengo este error‚Ä¶ Usando Ubuntu.
	
	Error: Cannot find module 'lib/db‚Äô  
	at Function.Module._resolveFilename (module.js:527:15)  
	at Function.Module._load (module.js:476:23)  
	at Module.require (module.js:568:17)  
	at require (internal/module.js:11:18)  
	at Object.<anonymous> (/media/WorkSpace/platzi/platzi-node/platziverse-db/index.js:3:23)  
	at Module._compile (module.js:624:30)  
	at Object.Module._extensions‚Ä¶js (module.js:635:10)  
	at Module.load (module.js:545:32)  
	at tryModuleLoad (module.js:508:12)  
	at Function.Module._load (module.js:500:3)
	
	el archivo esxiste y no hay errores de tipeo.

	* **Diego Alexander Forero Higuera (Platzi)** [206283] (1)

		Revisa que tengas la ruta bien en el archivo que estas intentando llamar a lib/db

	* **Ezequiel Pablo Galata** [206283] (0)

		Gracias por la respuesta!  
		Si, las rutas estan bien escritas, ademas probe cambiando los nombres del archivo y la carpeta pero siempre lo mismo‚Ä¶
		
		Si comento la linea en index, me dice lo mismo con la carpeta de models.
		
		Es un error de module.js de node_modules, segun creo‚Ä¶ A seguir investigando un poco mas üòÉ

	* **Ezequiel Pablo Galata** [206283] (2)

		Corregido, anoto por si alguien le pasa.  
		Al requerir un archivo del mismo proyecto, es decir que no pertenece a un modulo en node_modules,  
		le agregue un ‚Äú./‚Äù al comienzo del parametro del require.  
		Es decir:  
		const name = require(‚Äô./folder/file‚Äô)  
		y listo para usar!

	* **Walter Lensinas** [206283] (0)

		Gracias, me pasaba lo mismo, le agregue a la linea el path y avanzo, ahora tengo otro bug‚Ä¶ pero es un avance.
		``` 
		    const db = require('./lib/db')
		    
		```

* **Juan Jos√© Vega Quintero** (0) [205785](https://platzi.com/comentario/205785/) 

	Alguien sabe como solucionar este error
	
	ERROR: permission denied to create role

	* **Diego Alexander Forero Higuera (Platzi)** [205785] (1)

		El usuario con el que estas intentando crear el role en la base de datos no tiene permisos, debes hacerlo como usuario root.

	* **Juan Jos√© Vega Quintero** [205785] (0)

		En windows ya intente corriendo la terminal como administrador y nada, habr√° otra forma

	* **Diego Alexander Forero Higuera (Platzi)** [205785] (1)

		El problema no es de windows, es del usuario con el que estas intentando crear el role en postgresql, tienes que usar el usuario root de postgresql para poder hacer esa tarea.

* **eltenis** (0) [192910](https://platzi.com/comentario/192910/) 

	Hola me pasa en Succes pero no me sale todo el debug que le sale a Julian no veo mi error Gracias
	``` 
	    <
	    > plaziverse-db@1.0.0 setup /Users/CARLOS/Documents/programacion/platziverse/platziverse-db
	    > DEBUG=platziverse:* node setup.js
	    
	    Succes
	    MacBook-Air-de-CARLOS:platziverse-db CARLOS$>
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [192910] (1)

		Verifica que se crearan las tablas, el debug puede ser por una configuraci√≥n que tenga Juli√°n, desde que las tablas est√©n creadas todo esta ok

	* **eltenis** [192910] (0)

		Com verifico que las tablas estan creadas??? no se como funciona posgresql Gracias‚Ä¶

	* **Lucas  Hick** [192910] (0)

		Hola tengo un problema similar, en el que la funci√≥n pasa como success pero no muestra todo el debug y me dice que los operadores basados en ‚Äòstrings‚Äô est√°n obsoletos, lo pudieron resolver o tienen idea como actualizarlo? o en que me recomiendan interiorizarme para entender que sucede‚Ä¶ no entiendo si es un problema de postgres, de sequelize o debug‚Ä¶

	* **Lucas  Hick** [192910] (0)

		```
		    ‚ô¶  clioplatf-db [master] ‚ö° npm runsetup
		    
		    > clioplatf-db@1.0.0setup /home/lucas/clioplatf/clioplatf-db
		    > DEBUG=clioplatf:* node setup.js
		    
		    sequelize deprecated String based operators are now deprecated. Please use Symbol based operators for better security, read more at http://docs.sequelizejs.com/manual/tutorial/querying.html#operators node_modules/sequelize/lib/sequelize.js:242:13
		    success!
		    
		    
		```

* **ahiezerrivas** (0) [192260](https://platzi.com/comentario/192260/) 

	una ayudita con este error por fa

* **ahiezerrivas** (0) [192259](https://platzi.com/comentario/192259/) 

	```
	    standard: Use JavaScript Standard Style (https://standardjs.com)
	      C:\Users\asamu\Desktop\platziverse\platziverse-db\index.js:17:26: Expected consistent spacing
	    npm ERR! code ELIFECYCLE
	    npm ERR! errno 1
	    npm ERR! platziverse-db@1.0.0lint: `standard`
	    npm ERR! Exit status 1
	    npm ERR!
	    npm ERR! Failed at the platziverse-db@1.0.0 lint script.
	    npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
	    
	    npm ERR! A complete log of this run can be found in:
	    npm ERR!     C:\Users\asamu\AppData\Roaming\npm-cache\_logs\2017-09-05T02_06_57_482Z-debug.log
	    
	    
	    
	    
	```
	
	<code>
	``` 
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [192259] (1)

		Al parecer hay un error con los espacios en el archivo index.js en la linea 17, en la columna (caracter) 26, revisa tu c√≥digo puede que tengas un espacio separando el `(` y el primer car√°cter o al final con el √∫ltimo car√°cter y el `)`

* **Ernesto Palafox** (0) [191757](https://platzi.com/comentario/191757/) 

	```
	    psql postgres
	    CREATEROLE platzi WITH LOGIN PASSWORD'platzi';
	    CREATEDATABASE platziverse;
	    GRAN ALL PRIVILEGES ON platziverse TO platzi;
	    GRANT ALL PRIVILEGESONDATABASE platziverse TO platzi;
	    
	```

* **rodrigo-edgardo-armenta-santia** (0) [82034](https://platzi.com/comentario/995829/) 
Hola, tengo un problema con el modulo debug. El c√≥digo corre correctamente, pero solo me muestra el √∫ltimo mensaje: Succes!, es ...

	* **Erik Ochoa** [82034] (1)

		Hola! no veo el c√≥digo anexado ü§î¬øpodr√≠as enviarnos el link?

* **Jes√∫s Alpino** (0) [36126](https://platzi.com/comentario/318929/) 
me falto mi archivo db.js donde coloco la configuraci√≥n como la espera el constructor de Sequelize‚Ä¶ const Sequelize = require('Sequeli

## 0160. Creando una advertencia sobre el borrado de base de datos [8332](https://platzi.com/clases/1151-nodejs/8332-creando-una-advertencia-sobre-el-borrado-de-base-d/)

### Descripci√≥n:


Despu√©s de haber creado el _script_ , cada vez que lo ejecutamos vamos a borrar la base de datos. Como esto puede ser peligroso vamos a preguntarle al usuario si est√° seguro de esto. Vamos a crear un _prompt_ que haga una confirmaci√≥n de ejecuci√≥n del script de inicializaci√≥n.

Cuando hay un error, como por ejemplo pasar mal la contrase√±a, no deber√≠a permitirnos avanzar con el script. Hay una parte de la configuraci√≥n de **PostgreSQL** en la que por defecto tiene unos par√°metros _trust_ , que permiten autenticaci√≥n sin password. Es importante que tengas en cuenta esto y hagas el ajuste.

### Links:

* [platziverse/platziverse-db at 05-confirmacion-setup-db ¬∑ platzi/platziverse ¬∑ GitHub](https://github.com/platzi/platziverse/tree/05-confirmacion-setup-db/platziverse-db)

### Comentarios:

* **inquiridor** (11) [270075](https://platzi.com/comentario/270075/) 

	 **Para usuarios Debian**
	
	* Archivo ph_hba.conf: **/etc/postgresql/your.installed.version/main/pg_hba.conf**
	
	* Cambiar todo lo que diga peer o md5, a passowrd. Para ver todos los m√©todos de autenticaci√≥n como trust, password, peer, md5 ‚Ä¶ : [all-auth-methods](https://www.postgresql.org/docs/9.1/static/auth-methods.html)
	
	* Comando de reinicio de postgres: **sudo service postgresql restart**
	
	
	

	* **Lucas  Hick** [270075] (0)

		gracias!

	* **Pablo Cesar Cardozo Chile** [270075] (0)

		que significa peer y md5?

	* **Byhako** [270075] (1)

		Muchas gracias por compartir.

	* **Navarrock33** [270075] (1)

		Gracias estoy en Ubuntu 18.04 y tambi√©n lo encontr√© all√≠

* **Victor Hugo Roman Ruiz** (7) [306787](https://platzi.com/comentario/306787/) 

	Para asignar valor a la variable de entorno DB_PASS en windows cmd, ojo en power shell es diferente:  
	SET DB_PASS=‚Äòfoo‚Äô && npm run setup

	* **luisrangelc** [306787] (3)

		Si se colocan comillas y un espacio a la derecha el valor en DB_PASS no es el valor que uno espera que se asigne.  
		La forma correcta de escribirlo en windows seg√∫n como VickHellenG menciona es:
		
		SET DB_PASS=foo&& npm run setup

	* **luisrangelc** [306787] (2)

		al hacerlo con espacios y comillas config quedar√≠a as√≠:
		``` 
		    { database: 'platziverse',
		      username: 'platzi',
		      password: '\'foo\' ',
		      host: 'localhost',
		      port: '5434',
		      dialect: 'postgres',
		      logging: [Function: logging],
		      setup: true }
		    
		```
		
		y para que quede:
		``` 
		    { database: 'platziverse',
		      username: 'platzi',
		      password: 'platzi',
		      host: 'localhost',
		      port: '5434',
		      dialect: 'postgres',
		      logging: [Function: logging],
		      setup: true }
		    
		```
		
		se tiene que invocar:
		
		SET DB_PASS=platzi&& npm run setup

	* **Andres Rodriguez Escudero** [306787] (1)

		Me pas√≥ que si pasas el comando:  
		`SET DB_PASS=platzi&& npm run setup`  
		Quiere decir que es como si se hiciera.  
		`SET DB_PASS=platzi&& SET DEBUG=platziverse:* && node setup.js` y a√∫n as√≠ salia error. Tuve que agregarlo en el script _setup_ para que quedara as√≠:  
		`SET DB_PASS=foo DEBUG=platziverse:* && node setup.js`

* **C√©sar Garcia** (3) [346954](https://platzi.com/comentario/346954/) 

	Para aquellos que est√°n utilizando windows y no les reconoce el valor de la variable de ambiente, utilizar el siguiente comando:
	
	$env:DB_PASS=‚Äòfoo‚Äô ; npm run setup

* **Teofilo Rosales Gama** (3) [298477](https://platzi.com/comentario/298477/) 

	 **Para usuario Ubuntu**
	
	* En visual la terminal usar sudo -i (para root)  
	-escribir cd /etc/postgresql/9.5/main/
	* ls
	* nano pg_hba.conf
	
	
	
	Editan desde la terminal(es lo que me funciono a mi)  
	en el numero escriben la version de postgresq que utilizan , para saber su version de postgresq hacer esto en terminal :
	
	* sudo su - postgres
	* constrase√±a de la pc  
	-psql --version  
	-exit(para salir)
	
	

* **juand_silva** (3) [226968](https://platzi.com/comentario/226968/) 

	En windows el archivo pg_hba.conf est√° en la ruta `C:\Program Files\PostgreSQL\10\data`

	* **luisrangelc** [226968] (1)

		C:\PostgreSQL\data\pg10

* **Ren√© Felipe Ram√≠rez Barrera** (2) [816853](https://platzi.com/comentario/816853/) 

	para los que tengan problemas con el comando en cmd prueben con este:
	``` 
	    set DB_PASS='foo'; npm runsetup
	    
	```

* **Jose Vinicio Flores Arias** (2) [319958](https://platzi.com/comentario/319958/) 

	**Para usuarios de Redhat o Derivados**  
	El archivo `pg_hba.conf` se encuentra en:
	``` 
	    /var/lib/pgsql/data/pg_hba.conf
	    
	```
	
	Dejo aqui una guia: [<< Link >>](https://linuxgx.blogspot.com/2017/11/postgresql-es-un-poderoso-sistema-de.html)

* **Alejandro Sulbaran** (2) [297082](https://platzi.com/comentario/297082/) 

	Una pregunta: ¬øpuedo hacer mas modular mi codigo? me refiero a separar muchas cosas de la funcion del setup y colocarlas como callbacks o algo por el estilo? es que vengo ya desde hace un tiempo con otros Frameworks de otros lenguajes donde me gustaba separar mi codigo para que quedara totalmente legible a los ojos de otro programador (ejemplo: Laravel en PHP)

	* **Diego Alexander Forero Higuera (Platzi)** [297082] (2)

		Si lo puedes hacer m√°s modular, simplemente extraes las partes que quieres modularizar y crear los m√≥dulos para ello, recuerda que el ideal de hacer un m√≥dulo es reutilizarlo, por lo tanto si haces un m√≥dulo solo para separar c√≥digo no va a ser muy √∫til.

* **Deyvis Neyser Valdez Gavilan** (1) [786953](https://platzi.com/comentario/786953/) 

	Para los que est√©n en win10, pueden abrir la terminal de ‚ÄòNode.js command prompt‚Äô y ejecutar lo siguiente:
	``` 
	    set DB_PASS='foo' && npm runsetup
	    
	```

* **Nicolas Diaz** (1) [531691](https://platzi.com/comentario/531691/) 

	Tengo un problema,  
	En Mac modifiqu√© el archivo pg_hba.conf cambiando los trust por password  
	![](https://ibb.co/k0WvGwM)
	
	Reinici√© el servicio de postgresql tal como lo indica Julian, pero al ejecutar psql -U platzi platziverse NO me exige la password.
	
	Que puede ser?

	* **Diego Alexander Forero Higuera (Platzi)** [531691] (1)

		Modificaste password en los tres lineas, local, 127.0.0.1/32 y ::1/128 ? puedes compartir el archivo o las lineas que modificaste del pg_hba.conf?

* **Iv√°n Mauricio Toro Cifuentes** (1) [376122](https://platzi.com/comentario/376122/) 

	Alguien puede ayudarme con el esta advertencia que me aparece una vez ejecuto `npm run setup`:
	``` 
	    sequelize deprecated String based operators are now deprecated. Please use Symbol based operators for better security, read m
	    ore at http://docs.sequelizejs.com/manual/tutorial/querying.html#operators node_modules/sequelize/lib/sequelize.js:242:13
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [376122] (1)

		Es una advertencia que indica que en futuras versiones de sequelize no se permitir√°n operadores basados en string y que debes usar s√≠mbolos, de momento no vas a tener problema y tu c√≥digo va a funcionar sin problema. Si vas al enlace te muestra como se deben hacer las consultas usando s√≠mbolos.

	* **Iv√°n Mauricio Toro Cifuentes** [376122] (1)

		 **Gracias otra vez.**

* **Victor Riveros** (1) [374368](https://platzi.com/comentario/374368/) 

	Manejar la consola desde visual studio code es lo mas practico que se le pudo ocurrir a los que desarrollaron la herramienta üòÑ

* **Rub√©n Maier Enzler** (1) [373721](https://platzi.com/comentario/373721/) 

	No me funciona el comando **DB_PASS=‚Äòfoo‚Äô npm run setup** en Windows 10 con terminal powershell. Y si coloco **SET DB_PASS=‚Äòfoo‚Äô && npm run setup** tampoco funciona porque dice que el token **& &** no es un separador valido **¬øComo debe ser el comando?**

	* **Juan David G√≥mez G√≥mez** [373721] (1)

		SET DB_PASS=‚Äòfoo‚Äô npm run setup

	* **Ren√© Felipe Ram√≠rez Barrera** [373721] (2)

		```
		    set DB_PASS='foo'; npm runsetup
		    
		```

	* **Rub√©n Maier Enzler** [373721] (1)

		pasaron a√±os, evidentemente ya lo solucione, pero gracias! jajajaja

* **Jos√© Ricardo Romo Guti√©rrez** (1) [336007](https://platzi.com/comentario/336007/) 

	me sale este error al intentar instalar  
	Llevo bastante rato ahi, he concedido todos los permisos a las carpetas y nada  
	estoy en ubuntu 18.
	``` 
	    platziverse-db git:(master) npm install inquirer --save
	    npm WARN checkPermissions Missing write accessto /media/mrromo/RICARDO STORE/Ricardo/Multimedia/Proyectos/WebDeveloper/NodeJS/PlatziVerse/platziverse-db/node_modules/chardet
	    npm WARN checkPermissions Missing write accessto /media/mrromo/RICARDO STORE/Ricardo/Multimedia/Proyectos/WebDeveloper/NodeJS/PlatziVerse/platziverse-db/node_modules/external-editor
	    npm WARN checkPermissions Missing write accessto /media/mrromo/RICARDO STORE/Ricardo/Multimedia/Proyectos/WebDeveloper/NodeJS/PlatziVerse/platziverse-db/node_modules/inquirer
	    npm WARN checkPermissions Missing write accessto /media/mrromo/RICARDO STORE/Ricardo/Multimedia/Proyectos/WebDeveloper/NodeJS/PlatziVerse/platziverse-db/node_modules
	    npm WARN checkPermissions Missing write accessto /media/mrromo/RICARDO STORE/Ricardo/Multimedia/Proyectos/WebDeveloper/NodeJS/PlatziVerse/platziverse-db/node_modules/eslint
	    npm ERR! path /media/mrromo/RICARDO STORE/Ricardo/Multimedia/Proyectos/WebDeveloper/NodeJS/PlatziVerse/platziverse-db/node_modules/chardet
	    npm ERR! code EROFS
	    npm ERR! errno -30
	    npm ERR! syscall access
	    npm ERR! rofs EROFS: read-onlyfilesystem, access'/media/mrromo/RICARDO STORE/Ricardo/Multimedia/Proyectos/WebDeveloper/NodeJS/PlatziVerse/platziverse-db/node_modules/chardet'
	    npm ERR! rofs Often virtualized file systems, or other file systems
	    npm ERR! rofs that don't support symlinks, give this error.
	    
	    npm ERR! A complete log of this run can be found in:
	    npm ERR!     /home/mrromo/.npm/_logs/2018-07-20T00_54_16_925Z-debug.log
	    
	```

	* **Jos√© Ricardo Romo Guti√©rrez** [336007] (1)

		sale lo mismo si instalo con chalk o sin este

	* **Jos√© Ricardo Romo Guti√©rrez** [336007] (1)

		ya lo solucione, como mi proyecto estaba en un disco NTFS Ubuntu lo montaba como solo lectura y no podia encontrar los permisos, me toco pasarlo a una carpeta en ubuntu.

* **reydev** (1) [285187](https://platzi.com/comentario/285187/) 

	Tengo un problema con el await prompt no espera por la respuesta en la terminal, muestra la pregunta pero inmediatamente me da un error
	
	![](https://imgur.com/xb9If3D)

	* **reydev** [285187] (4)

		nvm, ya resolvi.

* **ignacioaredez** (1) [225128](https://platzi.com/comentario/225128/) 

	Tengo un problema modifique el archivo en ubuntu en el directorio correspondiente pero sigue ejecutando el run setup aunque el password sea incorrecto.

	* **ignacioaredez** [225128] (1)

		Hahaha ya lo tengo el habia escrito una parte mal del codigo en setup todo funciona bien gracias

* **Nicolas Diaz** (1) [54574](https://platzi.com/comentario/531691/) 
Tengo un problema, En Mac modifiqu√© el archivo pg_hba.conf cambiando los trust por password Reinici√© el servicio de postgresql tal como ...

	* **Diego Alexander Forero Higuera (Platzi)** [54574] (1)

		Modificaste password en los tres lineas, local, 127.0.0.1/32 y ::1/128 ? puedes compartir el archivo o las lineas que modificaste del pg_hba.conf?

* **Rub√©n Maier Enzler** (1) [41218](https://platzi.com/comentario/373721/) 
No me funciona el comando DB_PASS=‚Äòfoo‚Äô npm run setup en Windows 10 con terminal powershell. Y si coloco SET DB_...

	* **Juan David G√≥mez G√≥mez** [41218] (1)

		SET DB_PASS=‚Äòfoo‚Äô npm run setup

* **Jos√© Ricardo Romo Guti√©rrez** (1) [37713](https://platzi.com/comentario/336007/) 
me sale este error al intentar instalar Llevo bastante rato ahi, he concedido todos los permisos a las carpetas y nada estoy en ubuntu 18...

	* **Jos√© Ricardo Romo Guti√©rrez** [37713] (1)

		sale lo mismo si instalo con chalk o sin este

* **Victor Roman Garcia Flores** (0) [315597](https://platzi.com/comentario/315597/) 

	Buenos dias, no puedo descargar los archivos, favor de revisar el fallo

	* **Diego Alexander Forero Higuera (Platzi)** [315597] (1)

		Ya esta solucionado, gracias por el reporte.

	* **Jose Osses Plaza** [315597] (0)
A mi no me deja reproducir el video

* **Paul Rayden** (0) [303114](https://platzi.com/comentario/303114/) 

	hay pero que f√°cil me la hiciste! üòÑ ‚ù§Ô∏è

* **Teofilo Rosales Gama** (0) [298539](https://platzi.com/comentario/298539/) 

	Ahora me sale este error  
	![sds.png](https://static.platzi.com/media/user_upload/sds-b102f16a-63ff-4c08-8d26-0909892e44c4.jpg)

	* **Teofilo Rosales Gama** [298539] (0)

		lo volvi el archivo a su estado original pero no cambia

	* **Diego Alexander Forero Higuera (Platzi)** [298539] (1)

		Revisa que el servidor de la base de datos esta funcionando, el error es porque no se logra conectar.

* **dedesuy** (0) [296066](https://platzi.com/comentario/296066/) 

	Tengo un problema en esta parte, al iniciar el NPM RUN SETUP me da un error en DB me dice que no es un funci√≥n.
	``` 
	    node:35931) UnhandledPromiseRejectionWarning:TypeError: db is not a function
	        at setup (/Users/mac-es/Proyectos/SAPI/sapi-db/setup.js:28:12)```
	    
	    La Linea 28 de mi c√≥digo es esta:
	    
	    
	```
	
	await db(config).catch(HandleFatalError)```
	
	Lo mejor del caso es que no se va al HandleFatalError, me lo muestra como un error de Node y no usa la funci√≥n CATCH
	
	Me he fijado en la estructura de mis archivos INDEX.js que es al que se refiere DB y a su vez a /lib/db.js que se usa como referencia de INDEX.
	
	Gracias por la ayuda desde ya.

	* **dedesuy** [296066] (0)

		Mi index.js
		``` 
		    'use strict'
		    const setupDataBase = require('./lib/db')
		    const setupClienteModel = require('./models/cliente')
		    const setupEmpresaModel = require('./models/empresa')
		    const setupPlanModel = require('./models/plan')
		    
		    module.export = asyncfunction (config) {
		      const sequelize = setupDataBase(config)
		      const Empresas = setupEmpresaModel(config)
		      const Clientes = setupClienteModel(config)
		      const Plan = setupPlanModel(config)
		    
		      await sequelize.authenticate()
		    
		      if (config.setup){
		        await sequelize.sync({force: true})
		      }
		      return {
		        Empresas,
		        Clientes,
		        Plan
		      };
		    }
		    
		```

	* **dedesuy** [296066] (0)

		Mi /lib/db.js
		``` 
		    'use strict'
		    
		    const Sequelize = require('sequelize')
		    let sequelize = null
		    
		    module.exports = functionsetupDataBase (config) {
		      if (!sequelize) {
		        sequelize = new Sequelize(config)
		      }
		      return sequelize
		    }
		    
		```

	* **Diego Alexander Forero Higuera (Platzi)** [296066] (1)

		Puedes compartir el archivo setup.js, para revisar y poder ayudarte.

	* **dedesuy** [296066] (0)

		Adjunto lo solicitado, agradezco la ayuda
		``` 
		    'use strict'
		    
		    
		    const debug = require('debug')('sapi:db:setup')
		    const chalk = require('chalk')
		    const inquirer = require('inquirer')
		    const db = require('./index')
		    
		    const prompt = inquirer.createPromptModule()
		    
		    
		    asyncfunctionsetup() {
		        const pregunta = await prompt([
		            {
		                type: 'confirm',
		                name: 'setup',
		                message: "Esto destruir√° la base de datos, est√° seguro?"
		            }
		        ])
		        if (!pregunta.setup){
		            returnconsole.log("Se termin√≥ el proceso sin hacer nada")
		        }
		        const config ={
		            database: process.env.DB_NAME || 'sapi',
		            username: process.env.DB_USER || 'dedesuy',
		            password: process.env.DB_PASS || 'U',
		            host: process.env.DB_HOST || 'localhost',
		            dialect: 'postgres',
		            logging: s => debug(s),
		            setup: true
		        }
		         await db(config).catch(HandleFatalError)
		         console.log('Exito!')
		         process.exit(0)
		    }
		    functionHandleFatalError(e){
		        console.error(`${chalk.red('Error en Setup: ')}${chalk.yellow(e.message)}`)
		        console.error(`${chalk.red('Error en Setup: ')}${chalk.yellow(e.stack)}`)
		        process.exit(1)
		    
		    
		    }
		    setup()```
		    
		```

	* **dedesuy** [296066] (1)

		Ya lo encontr√©, en INDEX dice module.export y debe decir module.exports
		
		Saludos y gracias.

* **Jordi** (0) [255667](https://platzi.com/comentario/255667/) 

	Hola, he hecho esto:
	
	<h1>sudo su postgres</h1> <h1>psql</h1> <h1>CREATE ROLE platzi WITH LOGIN PASSWORD ‚Äòplatzi‚Äô;</h1> <h1>CREATE DATABASE platziverse;</h1> <h1>GRANT ALL PRIVILEGES platziverse TO platzi;</h1>
	
	Si hago un select me da error, como hago para poder hacer selects y ver las tablas de la DB de platziverse? Puede que sea algo as√≠ platziverse.agents? Gracias.  
	![Captura.PNG](https://static.platzi.com/media/user_upload/Captura-bbb6630e-f125-4693-91f2-82cb9e95320d.jpg)

	* **Diego Alexander Forero Higuera (Platzi)** [255667] (2)

		Primero tienes que seleccionar la base de datos con este comando
		``` 
		    \c platziverse;
		    
		```
		
		Una vez estas conectado a la base de datos ya puede hacer queries.
		
		Ten en cuenta que platziverse es una base de datos no una tabla, por lo tanto no puedes hacer queries, haces queries sobre las tablas, por ejemplo `select * from agents` cuando ya esta conectado a esa base de datos.

	* **Deyvis Neyser Valdez Gavilan** [255667] (1)

		Hola, y para ingresar como usuario platzi como ser√≠a el command?

	* **Diego Alexander Forero Higuera (Platzi)** [255667] (1)

		Hola @Deyvisnvg para entrar con el usuario platzi ser√≠a algo como  
		`psql -U platzi -W`  
		Esto va a conectarte al postgresql en local y te va a pedir la contrase√±a si la base de datos no esta en tu local o por ejemplo si usas docker debes usar este comando  
		`psql -h <ip remota> -U platzi -W`  
		donde <ip remota> es la ip del contenedor de docker o servidor remoto de postgresql.

	* **Deyvis Neyser Valdez Gavilan** [255667] (1)

		Gracias gollum23

* **Andres Leonardo Arevalo** (0) [244154](https://platzi.com/comentario/244154/) 

	Creaci√≥n de prompt para usar inquirer

* **Carlos Garcia Castellanos** (0) [237309](https://platzi.com/comentario/237309/) 

	Al intentar ejecurtar "DB_PASS=‚Äòfoo‚Äô npm run setup‚Äô me manda el siguiente mensaje en la consola, alguien sabe como solucionar ‚ÄúDB_PASS no se reconoce como un comando interno o externo‚Äù ??? ‚Ä¶ estoy en windows 10

	* **Carlos Garcia Castellanos** [237309] (0)

		Logro hacerlo funcionar eliminado el valor de ‚Äòplatzi‚Äô del atributo password del objeto config, pero creo que esta no es la mejor practica.
		
		Alguien sabe de alguna soluci√≥n mejor?

	* **oobie92** [237309] (0)

		Prueba de esta manera ‚ÄúDB_PASS=‚Äòfoo‚Äô && npm run setup‚Äù

* **juand_silva** (0) [226972](https://platzi.com/comentario/226972/) 

	Yo ten√≠a la variable seteada como `127.0.0.1/32 md5`, pero igual me pidi√≥ el password no s√© que signifique `md5` pero funciona igual.

	* **Driggz_** [226972] (1)

		Significa que el password va encriptado, solo con ‚Äúpassword‚Äù se envia como texto plano

* **Enrique Alexis Lopez Araujo** (0) [214803](https://platzi.com/comentario/214803/) 

	Es lo mejor que he aprendido en este video inquire y chalk ufff!!!

* **Juan Carlos  Correa Herrera** (0) [193705](https://platzi.com/comentario/193705/) 

	Me encanta inquirer üòÑ

* **eltenis** (0) [193175](https://platzi.com/comentario/193175/) 

	Hola no puedo utilizar el comando ! code pg_hba.conf me dice command not found
	
	Gracias!!

	* **Enzo Aliatis** [193175] (0)

		Tienes que instalar el path de code en mac es (‚áß‚åòP)  
		Shell Command: Install ‚Äòcode‚Äô command in PATH command.  
		aqui la Doc por si usas otro SO  
		<https://code.visualstudio.com/docs/setup/mac>

	* **dedesuy** [193175] (0)

		Yo tengo instalado el SHELL y no abre tampoco, no se si es u n error de VS Code

* **Hector Jose Flores Colmenarez** (0) [192456](https://platzi.com/comentario/192456/) 

	Alguien tiene problemas con el Await ? Estoy intentando ejecutar el `npm run setup` y el await no espera nada, sino que sigue de largo y evalua el prompt sin esperar la respuesta

	* **Javier Martin Gutierrez** [192456] (2)

		Tuve problemas al principio porque estaba usando la version 6 de node, pero con la version 8 va bien

	* **Hector Jose Flores Colmenarez** [192456] (0)

		Muchas gracias Javier, tienes razon, no me di cuenta y el nvm estaba usando la version de system que es la 6 y no la 8 que instale usando nvm.
		
		saludos!

	* **Enrique Alexis Lopez Araujo** [192456] (0)

		He estado usando n para el managment de las versiones de node y es muy util para estar cambiando de environment [https://github.com/tj/n](url)
		
		Saludos!

	* **sukomost** [192456] (0)

		A mi me pasa lo mismo,
		
		ejecuto y no espera al await :  
		__****
		
		> npm run setup
		
		> platziverse-db@1.0.0 setup /Users/Casa/Documents/Web/platziverse/platziverse-db  
		>  DEBUG=platziverse:* node setup.js
		
		? This will destroy your database, are you sure? (Y/n) Nothing happened üòÉ_  
		Aqui se queda esperando a una respuesta, pulso Y:  
		_? This will destroy your database, are you sure? (Y/n) Y_  
		pulso intro:  
		_? This will destroy your database, are you sure? Yes  
		y no hace nada_
		
		version de node 8.3.0
		
		alguna idea??

	* **jhojangarcia** [192456] (0)

		Este problema que no espera el await me suced√≠a porque descargue inquirer un directorio antes de platziverse-db, una vez hice el npm i --save inquirer dentro de la carpeta que era dejo de sacar el error.

## 0170. Introducci√≥n a pruebas unitarias con Ava.js [8333](https://platzi.com/clases/1151-nodejs/8333-introduccion-a-pruebas-unitarias-con-avajs/)

### Descripci√≥n:


 **Ava.js** es un test runner que permite definir cada uno de los tests de nuestra app y soporta **ECMAScript 2016.**

### Links:

* [platziverse/platziverse-db at 05-confirmacion-setup-db ¬∑ platzi/platziverse ¬∑ GitHub](https://github.com/platzi/platziverse/tree/05-confirmacion-setup-db/platziverse-db)

### Comentarios:

* **Joaquin Araujo** (23) [229191](https://platzi.com/comentario/229191/) 

	Bueno aqu√≠ les dejo un regal√≥n, la [documentaci√≥n de AVA en espa√±ol](https://github.com/avajs/ava-docs/blob/master/es_ES/readme.md) espero se lo disfruten tanto como yo (que no domino tan bien el Ingl√©s hasta ahora)

	* **Iv√°n Mauricio Toro Cifuentes** [229191] (1)

		 **¬°Gracias!**

* **Omar del Real** (14) [832256](https://platzi.com/comentario/832256/) 

	Para los que les fallan los tests por que no les encuentra la carpeta, ponedlo de la siguiente manera ya que ava por defecto busca la carpeta llamada tests.
	``` 
	    "test": "DEBUG=platziverse:* ava --verbose",
	    
	```

	* **matheoNieto** [832256] (2)

		genial! gracias

* **Celso Vicente Mercado Hurtado** (7) [622678](https://platzi.com/comentario/622678/) 

	DEBUG=platziverse:* ava tests/* --verbose

	* **Katherine Serrano Romero** [622678] (2)

		Excelente aporte, pues me soluciono el problema

* **Nestor Ali  Ospina Plaza** (5) [742255](https://platzi.com/comentario/742255/) 

	Es complejo trabajar o guiarse cuando no se especifica como aplicar algunas funciones en Win10 (en mi caso) y todo el desarrollo se basa en un solo SO, entorpece un poco el progreso en el curso ya que toca averiguar puntos b√°sicos que pueden ser compartidos ya que la gracia del desarrollo esta en crear o realizar cosas diferentes pero comando que pueden publicarse, no se esta haciendo  
	En mi caso sale el error de ‚ÄúPlease install sqlite3 package manually‚Äù en SQLite y realice varios intentos y este no funciono.  
	Espero este curso (que lo inicie con bastante inter√©s ya que estoy en un proyecto IoT implementando varios lenguajes para mostrar y analizar informaci√≥n) y los siguientes puedan mejorarlos con ese simple detalle de compartir las funciones o comandos en otros SO‚Äôs sea win o linux o el mismo Mac cuando se desarrolle en otro SO.  
	Esta no es una queja contra Julian ni mucho menos, Julian es un Lord y hace mucho sigo todo lo q hace pero si lo dejo como una observaci√≥n para platzi mejorar en el esquema de estudio que emplea y se estipule con los profesores esa alternativa.  
	No se si continuar el curso ya que no puedo resolver este problema y en lo personal me desmotiva ya q no vale la pena continuar si no puedo resolver esta prueba

	* **Walter Lensinas** [742255] (1)

		Hola Nestor, como te fue con el curso y el proyecto que estabas realizando?

* **Juan Jos√© Vega Quintero** (5) [205860](https://platzi.com/comentario/205860/) 

	Si alguien tiene problemas pruebe con
	``` 
	    "test": "SET DEBUG=platziverse:* && ava tests/ --verbose"```
	    
	```

	* **Victor Hugo Roman Ruiz** [205860] (0)

		como lo resolvieron?

	* **luisrangelc** [205860] (2)

		‚Äútest‚Äù: ‚ÄúSET DEBUG=platziverse:* && ava tests/ --verbose‚Äù
		
		esto funciona bien en Windows 10

	* **Juan Jos√© Vega Quintero** [205860] (1)

		Gracias @luisrangelc

* **Nestor Ali  Ospina Plaza** (3) [742009](https://platzi.com/comentario/742009/) 

	En Win10 para poder ejecutar el test deb√≠ especificar el archivo asi
	``` 
	    "test": "SET DEBUG=platziverse:* && ava tests/agent-tests.js --verbose"
	    
	```
	``` 
	    > SET DEBUG=platziverse:* && ava tests/agent-tests.js --verbose
	    
	      ‚àö MAke it pass
	    
	      1 test passed
	    
	    
	```

	* **Alfonso Navarro** [742009] (1)

		Caballero muchas gracias por este aporte, me sirvi√≥‚Ä¶

* **Byron Mesias Cueva Cabrera** (2) [981348](https://platzi.com/comentario/981348/) 

	A mi me corrio con el script
	``` 
	    "DEBUG=platziverse:* ava tests/*-tests.js --verbose",
	    
	```

* **waldoaraque** (2) [969978](https://platzi.com/comentario/969978/) 

	ava me estaba dando problemas, la librer√≠a tiene errores, as√≠ que mejor decid√≠ emplear **Jest.** ‚Ä¶ aqu√≠ les dejo el c√≥digo:
	``` 
	    'use strict'
	    
	    const config = {
	      logging: function () {}
	    }
	    let db = null
	    
	    it('testing work setupDB', async () => {
	      const setupDB = require('../')
	      db = await setupDB(config) 
	    })
	    
	    it('Agent service should exist', () => {
	      expect(db.Agent).toBeTruthy()
	    })```
	    
	    :)
	```

* **waldoaraque** (2) [969715](https://platzi.com/comentario/969715/) 

	Pens√© que usar√≠a Jest

* **Diego Ivan Padilla Bernal** (2) [615945](https://platzi.com/comentario/615945/) 

	Para los que siguen este curso y tiene problemas al ejecutar el test de prueba, es quiz√° porque cambio la forma en ejecutar tests se arregla con un *:
	
	`DEBUG=platziverse:* ava tests/* --verbose`

	* **DARIO HERRERA GONZALEZ** [615945] (1)

		gracias funciona!

* **Alimoralesmio** (2) [388370](https://platzi.com/comentario/388370/) 

	Al realizar el primer test me sale lo siguiente:
	
	√ó Couldn‚Äôt find any files to test
	
	0 tests passed  
	1 uncaught exception
	
	npm ERR! Test failed. See above for more details.
	
	Alguien con el mismo problema ?

	* **edanfesi** [388370] (1)

		Lo que ocurre es que en cuando corres el comando, el busca los archivos en el directorio que le indicaste en el script y si no consigue ninguno te arrojar√° ese error.
		
		Revisa que est√©s apuntando al directorio correcto üòÉ

* **Jos√© Tuzinkievicz** (2) [343796](https://platzi.com/comentario/343796/) 

	No termino de entender qu√© significa
	``` 
	    SET DEBUG=platziverse:*
	    
	```
	
	el resto, fant√°stico.

	* **Misael Zurdo** [343796] (4)

		Lo que hace es que dentro del programa la variable DEBUG sea igual a ‚Äúplatziverse:*‚Äù cuando llamas a variable de entorno.  
		Y lo que haces de decir que muentro todos los log que tenga que ver con platziverse, podria utilizar platziverse:db y solo muentra los log que tengan la etiqueta platziverse:db.

	* **Misael Zurdo** [343796] (1)

		muestra*

* **Alfonso Navarro** (1) [1047806](https://platzi.com/comentario/1047806/) 

	Bueno este curso lo hice hace 6 meses me estanque aqu√≠, no entend√≠a nada, realice el curso de nodeJs con Carlos Hernandez q es mas b√°sico y ahora puedo entender mejor esta clase‚Ä¶  
	[](https://platzi.com/clases/1689-backend-js/)

* **DavidMG01** (1) [1003590](https://platzi.com/comentario/1003590/) 

	Estoy utilizando GitBash, corro el test as√≠:
	
	`"test": "set DEBUG=TesBoard:* & ava tests/*-tests.js --verbose",`
	
	y me arroja el sig. error:
	
	`(node:7828) UnhandledPromiseRejectionWarning: C:‚Ä¶\TesBoard-db\node_modules\ava\lib\node-arguments.js:9  
	} catch {  
	^
	
	(node:7828) UnhandledPromiseRejectionWarning: Unhandled promise rejection. This error originated either by throwing inside of an async function without a catch block, or by rejecting a promise which was not handled with .catch(). (rejection id: 1)  
	(node:7828) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.  
	`
	
	Que me recomiendan??

	* **Fer_Sanabria** [1003590] (1)

		Tengo el mismo l√≠o si encuentro la soluci√≥n te la comparto

	* **Fer_Sanabria** [1003590] (2)

		la cuesti√≥n es tan sencilla como cambiar a una version de node superior a la 10

* **Sebastian** (1) [761448](https://platzi.com/comentario/761448/) 

	![](![problema.png](https://static.platzi.com/media/user_upload/problema-e02d0dd9-dde9-405a-8205-339439cac763.jpg)

	* **Luis Donaldo Lopez Gil** [761448] (2)

		```
		    DEBUG=platziverse:* ava tests/* --verbose```
		    
		```

	* **Giorgio Ventura** [761448] (2)

		despu√©s de ‚Äútests/‚Äù agrega * de tal forma que quede que la siguiente manera ‚Äútests/*‚Äù

* **Juan Pablo Rodr√≠guez Morales** (1) [737052](https://platzi.com/comentario/737052/) 

	¬øNo podr√≠a hacerse destructuring del objeto config y reemplazar directamente los elementos que queremos?, para ahorrarnos usar la dependencia defaults

	* **edanfesi** [737052] (1)

		Si, se podr√≠a hacer.
		
		Tendr√≠as que hacer destructuring del default y luego del objeto que le est√©s pasando. Al final de cuenta lo que hace el m√≥dulo de defaults es iterar por cada propiedad del defaults y ver si esta existe en el options.

* **CrifQui** (1) [653839](https://platzi.com/comentario/653839/) 

	Creo que existe un problema en windows al querer ejecutar los tests porque no encuentra los archivos para pruebas con ava tests/*

* **Gilbertojpargas94** (1) [631391](https://platzi.com/comentario/631391/) 

	Por que defino let config = { logging: function() {}}. Ya no le habia dicho a config que sino le digo su valor tome los por defaults.?

	* **Diego Alexander Forero Higuera (Platzi)** [631391] (1)

		Aqu√≠ solo esta sobreescribiendo el valor de la propiedad logging, puedes ponerlo tambi√©n en el defaults y as√≠ no es necesario definirlo, pero esto te permite para algunos test ponder el valor de loggin en el valor que se necesite para determinado test.

* **estevamdonnabella** (1) [619950](https://platzi.com/comentario/619950/) 

	para mi funcion√≥ utilizando:
	
	‚Äútest‚Äù: ‚ÄúDEBUG=platziverse:* ava tests/agent-tests.js --verbose‚Äù

	* **Gilbertojpargas94** [619950] (4)

		Con:  
		‚Äútest‚Äù: ‚ÄúDEBUG=platziverse:* ava tests/* --verbose‚Äù tambien sirve.

	* **edanfesi** [619950] (1)

		Con esto solo correr√≠as un solo archivo de test, en este caso agent-test.js. Lo que dice el compa√±ero @Gilbertojpargas94 te permitir√° correr todos los archivos de prueba.

* **Rub√©n Maier Enzler** (1) [388078](https://platzi.com/comentario/388078/) 
Que ser√≠a una base de datos en memoria? O sea a que te refer√≠s con que este en memoria? Por otro lado, como devuelve el agente si no se crearon las tablas en sqlite?

	* **camiladi** [388078] (1)

		Una base de datos en memoria se refiere a que guarda y lee los archivos directamente del discoduro, por lo que no tendr√≠amos que levantar un server, ni configurar nada, SQLite es lo que llaman serverles.
		
		Y en cuanto a tu duda con respecto a la tablas de Agent y Metric‚Ä¶ Es una de las virtudes de Sequileze, utilizas una sola sintaxis y luego puedes decidir que enigine de base de datos quieres usar,

* **jesusmurf** (1) [366253](https://platzi.com/comentario/366253/) 

	Alguien sabe como se llama el theme de Visual Studio Code que utiliza en las clases? üòä

	* **Victor Riveros** [366253] (2)

		dracula theme y el de iconos es material icon

* **Diego Andres Imbus Guzman** (1) [364920](https://platzi.com/comentario/364920/) 

	al correr npm test el test no pasa y me genera el siguiente error:  
	Rejected promise returned by test. Reason:
	
	TypeError {  
	message: ‚ÄòdataType.types[dialect] is not iterable‚Äô,  
	}  
	alguien me podr√≠a ayudar? gracias

	* **Diego Alexander Forero Higuera (Platzi)** [364920] (1)

		Revisa que esta llegando den dataType.types, al parecer esta llegando un string y otro tipo de dato que no es iterable.

* **Sebastian Cardoso Castillo** (1) [307924](https://platzi.com/comentario/307924/) 

	Ava corre los tests de manera asincrona. Cuando tengo los tests en varios archivos es un problema porque si hay entidades que dependan de otras las pruebas no pasan. Lo tuve que solucionar poniendo todas las pruebas en un solo archivo. Y tengo mas de 20 entidades que se relacionan entre s√≠. ¬øHay alguna forma para correr archivos en serie? ¬øO tengo que que escribir tests atomicos que no dependan de otros tests como dice la documentacion de ava?

* **Eden Gomez Gress** (1) [285445](https://platzi.com/comentario/285445/) 

	Saludos companeros. Cuando corro el test, al parecer todo sale bien, solo tengo una duda. Cual es el significado del mensaje que de manda al final?
	``` 
	    edens-MacBook-Pro:platziverse-db Eden$ npm test
	    
	    > platziverse-db@1.0.0 test /Users/eden/Desktop/platzi/node/platziverse/platziverse-db
	    > DEBUG=platziverse:* ava tests/ --verbose
	    
	    
	    Fri, 13 Apr 2018 02:45:18 GMT sequelize deprecated String based operators are now deprecated. Please use Symbol based operators for better security, readmore at http://docs.sequelizejs.com/manual/tutorial/querying.html#operators at node_modules/sequelize/lib/sequelize.js:242:13
	      ‚úî Agent
	    
	      1 test passed
	    
	    edens-MacBook-Pro:platziverse-db Eden$
	    
	```

	* **Adrian Serna** [285445] (1)

		Es una advertencia de des-uso por seguridad, lo que hice fue agregar los siguiente.  
		![sequalize.PNG](https://static.platzi.com/media/user_upload/sequalize-78b05672-521a-4238-9a9c-66389891fdcd.jpg)  
		[Aqu√≠ la referencia de Stackoverflow](https://stackoverflow.com/questions/46608382/sequelize-deprecated-error-message?rq=1&utm_medium=organic&utm_source=google_rich_qa&utm_campaign=google_rich_qa)

	* **Adrian Serna** [285445] (1)

		Lo agregu√© en el index.js, por los defaults, pero puedes agregarlo en el objeto de configuraci√≥n donde te quede mejor! üòÑ

	* **JhonatanRua** [285445] (3)

		Esto se necesitar√° siempre que necesites las instancia de `sequelize` yo lo he agregado en el archivo `lib/db.js`
		``` 
		    'use strict'
		    
		    const Sequelize = require('sequelize')
		    const Op = Sequelize.Op
		    
		    let sequelize = null
		    
		    module.exports = functionsetupDatabase (config) {
		      if (!sequelize) {
		        config.operatorsAliases = Op
		        sequelize = new Sequelize(config)
		      }
		    
		      return sequelize
		    }
		    
		```

	* **juand_silva** [285445] (0)

		@JhontanRua Donde esta la documentaci√≥n de la soluci√≥n.

	* **Gerlis Alvarez Cardona** [285445] (1)

		aqu√≠ est√° la documentaci√≥n de los **Operators** en **Sequelize**  
		<http://docs.sequelizejs.com/manual/tutorial/querying.html#operators>

* **Byhako** (1) [283856](https://platzi.com/comentario/283856/) 

	¬øPor que al cambiar
	``` 
	    const Sequelize = require('sequelize')
	    
	```
	
	por
	``` 
	    import Sequelize from'sequelize'
	    
	```
	
	el test me saca el siguiente error?
	``` 
	    Rejectedpromisereturnedbytest. Reason:
	    
	      SyntaxError {
	        message: 'Unexpected token import',
	      }
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [283856] (3)

		dependiendo de la versi√≥n de node que est√©s usando debes usar babel para que sea valido usar import ya que es una caracter√≠stica nueva de JavaScript.

	* **Ivan Robles** [283856] (3)

		Me parece que la versi√≥n estable **10** de **NodeJS** ya soporta **imports** , podr√≠as probar a ver que tal.
		
		Y si no, tendras que configurar **babel** para usar Imports.

	* **juand_silva** [283856] (1)

		@elSharmaz entonces ya NODEjs soporta el 100% de las caracter√≠sticas de **ES2016** ? y ya no va m√°s **babel**?

	* **Ivan Robles** [283856] (2)

		@juand_silva Yo creo que siempre vamos a tener que usar babel ya que por lo regular siempre vamos a querer utilizar lo que se venga en las futuras versiones de EcmaScript.
		
		Aunque en las futuras versiones de NodeJS soporten las caracteristicas de ES2016 no van a soportar ES2017, 2018 o 2019.
		
		Tampoco s√© a que nivel de complejidad vas a utilizar require, hay cosas muy especificas que **import** no puede hacer que **require** si (como extentions, cach√© y mas).
		
		Aqui unos links al respecto:  
		<https://nodejs.org/api/esm.html>  
		<https://nodejs.org/api/modules.html>  
		<https://medium.freecodecamp.org/requiring-modules-in-node-js-everything-you-need-to-know-e7fbd119be8>

* **Javier  Padr√≥n** (1) [208690](https://platzi.com/comentario/208690/) 

	Para windows este es el archivo package.json con cambios en los scripts que me funciono para poder correr las pruebas
	``` 
	    {
	      "name": "curso-node",
	      "version": "1.0.0",
	      "description": "Simple IOT Platform  - DB Node",
	      "main": "index.js",
	      "scripts": {
	        "setup": "SET DEBUG=platziverse:* && node setup.js",
	        "test": "SET DEBUG=platziverse:* && ava tests/ --verbose",
	        "lint": "standard"
	      },
	      "repository": {
	        "type": "git",
	        "url": "git+https://github.com/javierelipadron/curso-node.git"
	      },
	      "author": "Javier Padron / Platzi",
	      "license": "MIT",
	      "bugs": {
	        "url": "https://github.com/javierelipadron/curso-node/issues"
	      },
	      "homepage": "https://github.com/javierelipadron/curso-node#readme",
	      "devDependencies": {
	        "ava": "^0.23.0",
	        "sqlite3": "^3.1.13",
	        "standard": "^10.0.3"
	      },
	      "dependencies": {
	        "chalk": "^2.3.0",
	        "debug": "^3.1.0",
	        "defaults": "^1.0.3",
	        "inquirer": "^3.3.0",
	        "pg": "^7.3.0",
	        "pg-hstore": "^2.3.2",
	        "sequelize": "^4.19.0"
	      }
	    }
	    
	    
	```

* **Jos√© Rodr√≠guez** (1) [203460](https://platzi.com/comentario/203460/) 

	Alguien tiene este error al ejecutar el test:
	
	Rejected promise returned by test. Reason:
	
	SyntaxError {  
	message: ‚ÄòUnexpected token function‚Äô,  
	}

	* **Joel Barr√≥n Hern√°ndez** [203460] (0)

		Hola Jos√© tengo el mismo error, pudiste solucionarlo?

	* **Enrique Alexis Lopez Araujo** [203460] (0)

		Podemos ayudarte mostrando el codigo que estas escribiendo?

	* **Ivan Robles** [203460] (1)

		Muy probablemente les falt√≥ escribir **async** en la declaraci√≥n de **function** o en el cuerpo de la funci√≥n no escribieron **await**.

* **charl-barrera** (1) [69955](https://platzi.com/comentario/766782/) 
por que defaults no lo configura en el mismo archivo de test?

* **jesusmurf** (1) [40524](https://platzi.com/comentario/366253/) 
Alguien sabe como se llama el theme de Visual Studio Code que utiliza en las clases? üòä

	* **Victor Riveros** [40524] (2)

		dracula theme y el de iconos es material icon

* **Diego Andres Imbus Guzman** (1) [40403](https://platzi.com/comentario/364920/) 
al correr npm test el test no pasa y me genera el siguiente error: Rejected promise returned by test. Reason: TypeError { message: ‚ÄòdataT...

	* **Diego Alexander Forero Higuera (Platzi)** [40403] (1)

		Revisa que esta llegando den dataType.types, al parecer esta llegando un string y otro tipo de dato que no es iterable.

* **Carlos Enrique Gonzalez Pe√±a** (0) [317492](https://platzi.com/comentario/317492/) 

	Definiendo Test Besico para verificar que AVA este funcionando adecuadamente

* **Jos√© Rubial** (0) [311791](https://platzi.com/comentario/311791/) 

	en donde puedo consultar la forma de escribir scripts ? por ejemplo que es --verbose, es parte del uso de la terminal o de la documentaci√≥n de npm?

	* **Diego Alexander Forero Higuera (Platzi)** [311791] (1)

		Eso son par√°metros o banderas que se le pasan a los comandos y depende de cada m√≥dulo por ejemplo los de AVA los encuentras aqu√≠ <https://www.npmjs.com/package/ava#cli> puedes ver todas las opciones al ejecutar ava, lo mismo con los dem√°s paquetes.

* **alvaritokore** (0) [275581](https://platzi.com/comentario/275581/) 

	no entend√≠ muy bien cu√°l es el proposito de
	``` 
	    let config = {
	    	loggin: function () {}
	    }
	    
	```
	
	¬øPara qu√© poner el atributo loggin a una function vacia ?

	* **Ivan Robles** [275581] (2)

		Me parece que su funci√≥n es desactivar el logging en los test de la configuraci√≥n.
		
		La propiedad **logging** de sequelize utiliza por default **console.log** y en este proyecto lo seteamos con **debug**.
		
		Tambien me parece que hubiera funcionado de la siguiente manera seg√∫n la documentaci√≥n de sequelize:
		``` 
		    // disable logging
		      logging: false,
		    
		```

* **Jordi** (0) [252912](https://platzi.com/comentario/252912/) 

	Como coloco el s√≠mbolo en mi ubuntu bash?
	
	![Captura.PNG](https://static.platzi.com/media/user_upload/Captura-257da789-cc6d-4544-a185-c64678df277b.jpg) ![Captura.PNG](https://static.platzi.com/media/user_upload/Captura-38927e6f-2f1e-4274-aa3f-d035b12d92d6.jpg)

	* **Diego Alexander Forero Higuera (Platzi)** [252912] (1)

		Tienes que cambiar de bash, instalar zsh y <http://ohmyz.sh> con esto es m√°s sencillo modificar el prompt de la consola, puedes revisar luego un tema que quieras y simplemente copiar el unicode el simbolo dentro de ese tema y lo puedes ver en el prompt.

	* **marianotella** [252912] (0)

		Por si no pudiste te dejo este [link](https://medium.com/@ozzievee/configuring-vs-code-integrated-terminal-to-use-oh-my-zsh-f545de1545c1)

* **Miguel Angel Gatto** (0) [250738](https://platzi.com/comentario/250738/) 

	No me queda claro el uso de defaults, ya que yo pondr√≠a espec√≠ficamente una config para test en el AGENT-TEST.  
	A menos que para no repetirla en los futuros test la pongamos en el index general, pero yo tampoco lo hubiera hecho, habr√≠a creado en el directorio tests un archivo espec√≠fico.  
	Ahora si lo voy a usar en m√°s cosas o tiene algo m√°s a futuro pensado veremos.  
	Escucho opiniones.

	* **charlie_if** [250738] (0)

		Aunque sea redundante define propiedades por defecto, lo interesante es que hay configuraciones como ‚Äòpool‚Äô que van a ser v√°lidos para cualquier instancia, sea test o no.
		
		Y en caso de hacer tests se usa sqlite porque no se definir√° una conexi√≥n espec√≠fica a la db, en c√≥digo defaults hace algo como:
		``` 
		    let a = { db_name: 'holap' }
		    let defaults = { db_name: 'platzi', db_user: 'platzi', foo: 1 }
		    
		    for (var i in a) {
		    	defaults[i] = a[i]
		    }
		    
		    defaults
		    { db_name: 'holap', db_user: 'platzi', foo: 1 }
		    
		```

	* **charlie_if** [250738] (0)

		B√°sicamente la ventaja es que escribes la configuraci√≥n una vez, para tests o para la app, simplemente si te hace falta algo lo pasas despu√©s.
		
		No es que tengas que hacerlo as√≠, pero es una opci√≥n bastante reutilizable.

* **juand_silva** (0) [227015](https://platzi.com/comentario/227015/) 

	Que buena explicaci√≥n en el 5:34 la importancia de no hacer pruebas con la BD real si no utilizar una BD de pruebas.

* **Jos√© Iv√°n Sandoya** (0) [219667](https://platzi.com/comentario/219667/) 

	Hola, estoy teniendo este error al ejecutar ‚Äúnpm test‚Äù
	``` 
	    Cannot find module './lib/cli'
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [219667] (1)

		Puedes compartir el package.json para ver que comando esta ejecutando test.

	* **Jos√© Iv√°n Sandoya** [219667] (0)

		Gracias, ya lo pude resolver!. Por error hab√≠a guardado mi c√≥digo en mi fichero local de Dropbox y le√≠ en foros afines que proyectos Node experimentan problemas al estar alojados dentro de ficheros Dropbox. Finalmente volv√≠ a setear el proyecto en un fichero propio de mi m√°quina y funcion√≥ todo perfecto üëçüèª

* **FabioR** (0) [193851](https://platzi.com/comentario/193851/) 

	sequelize soporta oracle???

	* **AyKaren** [193851] (1)

		No se puede por defecto, pero te comparto un repo donde hay soporte para ello <https://github.com/adeo-proxideco/sequelize-oracle> üòâ

* **Enzo Aliatis** (0) [193356](https://platzi.com/comentario/193356/) 

	No me quedo muy claro el proposito de defaults, es decir se que me va a poner los valores por defecto, pero cual ser√≠a la diferencia con este ejemplo
	``` 
	    let config = {
	      ejemplo: VARIABLE_DE_ENTORNO || 'VALOR_POR_DEFECTO'
	    }
	    
	```

	* **Juan Carlos  Correa Herrera** [193356] (2)

		Lo que entend√≠ es que defaults recibe dos par√°metros: el primero es el objeto de configuraci√≥n y el segundo es otro objeto de javascript cuyas propiedades si no existen en el objeto de configuraci√≥n, entonces se las agregar√°. Y esto es s√≥lo para las pruebas.

	* **Sebastian Cardoso Castillo** [193356] (0)

		Me hice la misma pregunta. Cual es el sentido de defaults si en el test le puedo pasar el parametro de configuracion.

	* **Ivan Robles** [193356] (1)

		Este es el codigo de defaults y de hecho es basicamente lo que estan diciendo xD
		
		[default](https://github.com/tmpvar/defaults/blob/master/index.js)
		``` 
		    var clone = require('clone');
		    
		    module.exports = function(options, defaults) {
		      options = options || {};
		    
		      Object.keys(defaults).forEach(function(key) {
		        if (typeof options[key] === 'undefined') {
		          options[key] = clone(defaults[key]);
		        }
		      });
		    
		      return options;
		    };
		    
		```

	* **camiladi** [193356] (2)

		m√°s que nada es para ense√±ar a usar la herramienta, imag√≠nense que se pusiera a escribir cada c√≥digo de cada m√≥dulo que crey√©ramos que ‚Äúno vale la pena instalar‚Äù adem√°s de lo mucho que se alargar√≠a el curso, en si ser√≠a como reinventar la rueda, ellos dejan para otros cursos lo que es la l√≥gica de programaci√≥n, ya que existen demasiadas formas de hacer lo mismo, ya eso depender√° de las capacidades de cada quien.

* **Javier Martin Gutierrez** (0) [192716](https://platzi.com/comentario/192716/) 

	Estoy repasando todo el codigo y lo tengo bien, pero el test a sqlite no me pasa y pone este error:
	
	Rejected promise returned by test. Reason:
	
	Error {  
	message: ‚ÄòPlease install sqlite3 package manually‚Äô,  
	}
	
	No se si tengo que crear algun dato dentro de Sqlite

	* **Nicol√°s Mej√≠a Correa** [192716] (0)

		Arregl√© el problema instalando sqlite3 como devDependencie: npm i sqlite3 -D

	* **Sci4Tech** [192716] (0)

		a mi me da el mismo error. Uso windows y he instalado sqlite3 como hace el profesor, ademas de en C:/sqlite3 a√±adiendolo posteriormente a las variables de entorno. si llamo a sqlite3 entro dentro, pero cuando corro el npm test recibo el error
		
		* ‚ÄòPlease install sqlite3 manually‚Äô
		
		
		
		¬øPor que pasa esto?

	* **Sci4Tech** [192716] (1)

		He conseguido solucionarlo desinstalando la version que tenia de node(9.2.0) y reinstando la versi√≥n anterior (8.9.1), e instalando todas las librerias de nuevo:
		
		npm i --save-dev standard  
		npm i sequelize pg pg-hstore --save  
		npm i inquirer chalk --save  
		npm install --save-dev ava  
		npm i --save defaults  
		npm i sqlite3 --save-dev

	* **Edward Steven Ramos Palacios** [192716] (0)

		Si usas nvm, para el manejo de versiones de node, instala y usa la version 8.9. Luego si podr√°s instalar sqlite3 sin problema.

* **Rodman M. Swanston C.** (0) [191750](https://platzi.com/comentario/191750/) 

	Si tienen alg√∫n problema con la instalaci√≥n de sqlite3 en Windows, les dejo mi soluci√≥n.
	
	  1. Instala la ultima versi√≥n de npm
	
	
	``` 
	    npm install npm@latest -g
	    
	```
	
	  1. Instalar Python 2.7 y node-gyp
	
	
	``` 
	    npm install --global --production windows-build-tools
	    
	    npm install --global node-gyp
	    
	```
	
	Una vez instalado aseg√∫rate de que python esta en el directorio correcto
	
	C:\Users\TUUSUARIOAQUI.windows-build-tools\python27\python.exe
	
	  1. (user) environment variable  
	setx PYTHON ‚Äú%USERPROFILE%.windows-build-tools\python27\python.exe‚Äù
	
	
	
	[Referencia](https://stackoverflow.com/questions/15126050/running-python-on-windows-for-node-js-dependencies)

	* **Rodman M. Swanston C.** [191750] (0)

		olvide algo, luego deben reiniciar su terminal e instalar sqlite3 nuevamente

## 0180. Introducci√≥n a code coverage con nyc [8334](https://platzi.com/clases/1151-nodejs/8334-introduccion-a-code-coverage-con-nyc/)

### Descripci√≥n:


 **Test coverage** es una t√©cnica que permite ver si los tests que hemos creado est√°n cubriendo el c√≥digo de nuestra aplicaci√≥n, y si est√°n siendo considerados en las pruebas. El resultado ser√° un porcentaje, que nos va a decir cu√°nto del c√≥digo est√° siendo abarcado.

Lo ideal es mantener el c√≥digo al 100%.

### Links:

* [platziverse/platziverse-db at 07-code-coverage-db ¬∑ platzi/platziverse ¬∑ GitHub](https://github.com/platzi/platziverse/tree/07-code-coverage-db/platziverse-db)

### Comentarios:

* **Juan Carlos Chan Tzec** (3) [261799](https://platzi.com/comentario/261799/) 

	Si de pura casualidad estan trabajando en windows y no les crea la carpeta coverage como a mi, creenla y en el string de test agreguen este parametro a nyc
	``` 
	    <code>--report-dir=coverage/</code>
	    
	```

	* **ronnyvaldivieso** [261799] (0)

		As√≠?
		``` 
		    "test": "nyc --report-dir=coverage/ ava tests/ --verbose"
		    
		```
		
		Lo puse de esta manera y no me crea nada dentro de la carpeta.

	* **Juan Carlos Chan Tzec** [261799] (0)

		Yo lo tengo as√≠:
		``` 
		    "test-nyc":"setDEBUG=platziverse:*&&nyc--reporter=lcov--report-dir=coverage/avatests/--verbose",
		    
		```

	* **Bruno Echevarria Quiroga** [261799] (0)

		Excelente!

* **carlos galvan grajales** (3) [248476](https://platzi.com/comentario/248476/) 

	Me encanta este curso hasta ahora, muchas gracias!

* **DARIO HERRERA GONZALEZ** (2) [726701](https://platzi.com/comentario/726701/) 

	tengo este problema , no se que hacer alguien me ayuda???
	
	sequelize deprecated String based operators are now deprecated. Please use Symbol based operators for better security, read more at <http://docs.sequelizejs.com/manual/tutorial/querying.html#operators> node_modules/sequelize/lib/sequelize.js:245:13  
	‚úî Agent
	
	1 test passed

	* **Walter Lensinas** [726701] (1)

		Consulta, esto donde te aparece? que estas ejecutando? por favor mostra el c√≥digo para poder ayudarte. Subilo a un repositorio en github.

* **juanortiz** (2) [364349](https://platzi.com/comentario/364349/) 

	Yo lo acabo de probar en windows y no es necesario especificar la carpeta para que genere la carpeta coverage.
	``` 
	    "test": "SET DEBUG=platziverse:* && nyc --reporter=lcov ava tests/ --verbose"
	    
	```
	
	Con eso deberia aparecer la carpeta coverage con el contenido estad√≠stico del index.html

	* **Deyvis Neyser Valdez Gavilan** [364349] (1)

		Gracias.

* **juanortiz** (2) [364310](https://platzi.com/comentario/364310/) 

	Por que no empece antes por este curso üòÑ

* **Eduardo Rasgado Ruiz** (2) [343993](https://platzi.com/comentario/343993/) 

	Si no les genera el coverage no se alarme. Cuando le ponemos al test: nyc --reporter=lcov ver√°n que en esos momentos si les va a crear la carpeta coverage. Ademas no es vital que esa carpeta se crease despu√©s de un npm test, si no queremos guardar nada de momento.

* **David Behar** (1) [978011](https://platzi.com/comentario/978011/) 

	Tengo un problema, me genera la carpeta de coverage, pero no el index.html üòï
	``` 
	    "test": "DEBUG=platziverse:* nyc --reporter=lcov ava tests/* --verbose",
	    
	```

	* **Helber Fabian Toro Palacios** [978011] (1)

		Hola David, verificaste la carpeta lcov-report dentro de coverage? corr√≠ el mismo comando y me funciono.

* **estevamdonnabella** (1) [619978](https://platzi.com/comentario/619978/) 

	Gr√°cias, Eduardo Ruiz

* **Iv√°n Mauricio Toro Cifuentes** (1) [382702](https://platzi.com/comentario/382702/) 

	NYC en NPM:
	
	* [nyc npm](https://www.npmjs.com/package/nyc).
	
	

* **Jose Enrique Marquez** (1) [280247](https://platzi.com/comentario/280247/) 

	Alguien me puede ayudar con este error
	``` 
	    yarn run v1.5.1
	    $ DEBUG=platziverse:* nyc ava tests/ --verbose
	    events.js:193
	          throw er; // Unhandled 'error' event
	          ^
	    
	    Error: spawn ava ENOENT
	    
	```
	
	Me sucede cuando agregue nyc

	* **Jose Enrique Marquez** [280247] (1)

		por alguna razon se habia da√±ado la cache de mi yarn lo que hice fue ejecutar el comando  
		`yarn cache clean`  
		luego borre la carpeta de node_modules  
		luego  
		`yarn install`  
		y listo todas las pruebas funcionaron correctamente.

	* **Sebastian Cardoso Castillo** [280247] (1)

		Cual es la raz√≥n de usar yarn y no npm?

	* **Jose Enrique Marquez** [280247] (1)

		Solo gusto personal no he enfocado en encontrar una diferencia. pero ya `npm` esta bastante parejo con `yarn`

* **Miguel Angel Gatto** (1) [250770](https://platzi.com/comentario/250770/) 

	Para completar el code coverage del ejemplo en la parte de defaults del index.js agregu√© que haga el setup‚Ä¶ Aunque no se si esto se deber√≠a testear en este test porque es como otra cosa, ¬øser√≠a probar que el sequelize hizo sus cosas bien?
	``` 
	      config = defaults(config, {
	        dialect: 'sqlite',
	        pool: {
	          max: 10,
	          min: 0,
	          idle: 10000
	        },
	        query: {
	          raw: true
	        },
	        setup: true// agregado por mi para cumplir el 100% del code coverage del test
	      })
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [250770] (4)

		sequelize es una librer√≠a que ya tiene sus test, lo que tu debes probar es que tu l√≥gica funcione, por ejemplo si en una vista tiene que guardar entonces debes verificar que se dispare la acci√≥n y validar que la informaci√≥n quede guardada, no pruebas como se guarda solo que este guardado porque es la funcionalidad.

* **oteka21** (0) [329167](https://platzi.com/comentario/329167/) 

	Estoy usando mac y no me crea el directorio coverage

	* **Diego Alexander Forero Higuera (Platzi)** [329167] (2)

		Te sale alg√∫n error en la consola? o si te corre el coverage completo? revisa la salida de la consola puede que por alguna configuraci√≥n la carpeta la este creando en otra ubicaci√≥n.

* **Alfredo Zanoni** (0) [321699](https://platzi.com/comentario/321699/) 

	Tengan cuidando en windows con los espacios, asi deberia quedar
	``` 
	    "test":"SETDEBUG=platziverse:*&&nyc--reporter=lcov--report-dir=coverageavatests/--verbose"
	    
	```

* **Victor Roman Garcia Flores** (0) [315598](https://platzi.com/comentario/315598/) 

	Buenos dias, no se puede descargar los archivos fuente, favor de revisar el fallo

	* **Diego Alexander Forero Higuera (Platzi)** [315598] (1)

		Ya puedes descargar el archivo zip.

* **Enrique Espina** (0) [304536](https://platzi.com/comentario/304536/) 

	![package_json_‚Äî_platziverse-db.png](https://static.platzi.com/media/user_upload/package_json_%E2%80%94_platziverse-db-a87381f5-d4f3-4a88-86e4-e1b6e2f91321.jpg)  
	Y no me crea la carpeta coverage

	* **Manuel Alejandro Lopera** [304536] (1)

		Al agregar `nyc --reporter=lcov` al script de `test` en el package.json y volver a ejecutar npm test se crea la carpeta coverage.

* **Gerardo Guti√©rrez** (0) [295362](https://platzi.com/comentario/295362/) 

	si usan windows  
	el script de test es el siguiente:
	``` 
	    "test":"SETDEBUG=platziverse:*&&nyc--reporter=lcov--report-dir=coverageavatests/--verbose",
	    
	```

* **Bryam Rodriguez** (0) [288330](https://platzi.com/comentario/288330/) 

	Las nuevas carpetas que genera nyc deber√≠an ser versionadas?

	* **Diego Alexander Forero Higuera (Platzi)** [288330] (1)

		No, son cosas para desarrollo √∫nicamente, est√°n por ejemplo los resultados del code coverage.

	* **Ivan Robles** [288330] (1)

		Ademas de lo que dice GOLLUM23 esas carpetas deber√≠an ser ignoradas en tus repos configurando tu archivo **.gitignore**

* **Jonathan Alberto Vega Ortega** (0) [278160](https://platzi.com/comentario/278160/) 

	¬øPodr√≠an explicar mas lo que hace nyc, o donde puedo tener mas informaci√≥n conceptual del modulo? Gracias üòâ

	* **Diego Alexander Forero Higuera (Platzi)** [278160] (2)

		nyc es un CLI (Interfaz de Linea de Comandos) para istanbul que es el paquete que ayuda para hacer code coverage.
		
		Puedes encontrar mas informaci√≥n aqu√≠ <https://github.com/istanbuljs/nyc>

* **Luis Osvaldo  Ledo Torrez** (0) [193660](https://platzi.com/comentario/193660/) 

	como puedo descargar todos los archivos me da un error

	* **Luis Osvaldo  Ledo Torrez** [193660] (0)

		cuando le doy al bot√≥n me da un error

	* **Diego Alexander Forero Higuera (Platzi)** [193660] (0)

		Gracias por el reporte, vamos a revisar y solucionar la m√°s pronto posible.

* **eltenis** (0) [193184](https://platzi.com/comentario/193184/) 

	No se pq ese error ni de donde sale‚Ä¶ ni que linea es la 491‚Ä¶
	``` 
	    <module.js:491
	        throw err;
	        ^
	    
	    Error: Cannot find module 'yargs/yargs'
	        at Function.Module._resolveFilename (module.js:489:15)
	        at Function.Module._load (module.js:439:25)
	        at Module.require (module.js:517:17)
	        at require (internal/module.js:11:18)
	        at Object.<anonymous> (/Users/CARLOS/Documents/programacion/platziverse/platziverse-db/node_modules/nyc/lib/config-util.js:6:15)
	        at Module._compile (module.js:573:30)
	        at Object.Module._extensions..js (module.js:584:10)
	        at Module.load (module.js:507:32)
	        at tryModuleLoad (module.js:470:12)
	        at Function.Module._load (module.js:462:3)
	    npm ERR! Test failed.  See above for more details.
	    MacBook-Air-de-CARLOS:platziverse-db CARLOS$>
	    
	```

	* **eltenis** [193184] (0)

		De hecho el error es cuando pongo nyc sin el nyc no tengo ningun error

	* **Ivan Robles** [193184] (1)

		Dice que no encuentra el modulo ‚Äòyargs/yargs‚Äô, checa el arbol de dependencias, o limpia (borra) **node_modules** y usa **npm install**.

* **Javier Martin Gutierrez** (0) [192749](https://platzi.com/comentario/192749/) 

	Hola, al instalar nyc recibo el siguiente error:
	
	$ npm i nyc --save-dev  
	npm ERR! path /platziverse-db/node_modules/.staging/npmlog-d5633642  
	npm ERR! code ENOENT  
	npm ERR! errno -2  
	npm ERR! syscall rename  
	npm ERR! enoent ENOENT: no such file or directory, rename ‚Äò/platziverse-db/node_modules/.staging/npmlog-d5633642‚Äô -> '/platziverse-db/node_modules/sqlite3/node_modules/node-pre-gyp/node_modules/npmlog‚Äô  
	npm ERR! enoent This is related to npm not being able to find a file.  
	npm ERR! enoent
	
	npm ERR! A complete log of this run can be found in:  
	npm ERR! .npm/_logs/2017-09-06T15_35_20_527Z-debug.log

	* **Diego Alexander Forero Higuera (Platzi)** [192749] (1)

		Puedes compartir el log completo .npm/_logs/2017-09-06T15_35_20_527Z-debug.log, a ver si hay mas informaci√≥n

	* **Javier Martin Gutierrez** [192749] (0)

		Lo he resuelto borrando el modulo de sqlite3 e instalando primero el modulo nyc y posterior el sqlite3

	* **eltenis** [192749] (0)

		MacBook-Air-de-CARLOS:platziverse-db CARLOS$ npm install --save-dev sqlite3
		
		> sqlite3@3.1.9 install /Users/CARLOS/Documents/programacion/platziverse/platziverse-db/node_modules/sqlite3  
		>  node-pre-gyp install --fallback-to-build
		
		[sqlite3] Success: ‚Äú/Users/CARLOS/Documents/programacion/platziverse/platziverse-db/node_modules/sqlite3/lib/binding/node-v57-darwin-x64/node_sqlite3.node‚Äù is installed via remote
		
		* sqlite3@3.1.9  
		removed 214 packages and updated 1 package in 18.888s  
		MacBook-Air-de-CARLOS:platziverse-db CARLOS$ npm install --save-dev nyc  
		npm ERR! path /Users/CARLOS/Documents/programacion/platziverse/platziverse-db/node_modules/.staging/npmlog-64c78b81  
		npm ERR! code ENOENT  
		npm ERR! errno -2  
		npm ERR! syscall rename  
		npm ERR! enoent ENOENT: no such file or directory, rename ‚Äò/Users/CARLOS/Documents/programacion/platziverse/platziverse-db/node_modules/.staging/npmlog-64c78b81‚Äô -> '/Users/CARLOS/Documents/programacion/platziverse/platziverse-db/node_modules/sqlite3/node_modules/node-pre-gyp/node_modules/npmlog‚Äô  
		npm ERR! enoent This is related to npm not being able to find a file.  
		npm ERR! enoent
		
		
		
		npm ERR! A complete log of this run can be found in:  
		npm ERR! /Users/CARLOS/.npm/_logs/2017-09-07T21_06_15_036Z-debug.log
		
		Lo mismo

## 0190. C√≥mo hacer Mocks y Stubs con Sinon [8335](https://platzi.com/clases/1151-nodejs/8335-como-hacer-mocks-y-stubs-con-sinon/)

### Descripci√≥n:


Vamos a crear unos servicios que van a utilizar unos modelos, y estos son los que se van a conectar a la base de datos. **Sequelize** se encarga de probar los modelos.

### Links:

* [platziverse/platziverse-db at 08-stubs-con-sinon-db ¬∑ platzi/platziverse ¬∑ GitHub](https://github.com/platzi/platziverse/tree/08-stubs-con-sinon-db/platziverse-db)

### Comentarios:

* **Rafael Torres** (32) [308110](https://platzi.com/comentario/308110/) 

	Hola Para los que ven este video a mediados del 2018, les dejo este par de ajustes segun la actualizaci√≥n en documentaci√≥n en sinon JS
	
	Crear un sandbox:
	``` 
	    sandbox = sinon.createSandbox()
	    
	```
	
	Restablecer un sandbox:
	``` 
	    sandbox && sandbox.restore()
	    
	```
	
	[Documentaci√≥n Sinon JS - Sandboxes](http://sinonjs.org/releases/v5.0.10/sandbox/)
	
	Agradezco este video va bien profundo en lo que es preparar unas pruebas unitarias.
	
	Saludos!!

	* **Pedro Rafael Jim√©nez Jij√≥n** [308110] (1)

		Gracias llegando a esta parte del curso me estaba dando problemas, esto me funciono

	* **Jos√© Tuzinkievicz** [308110] (1)

		M√°s que oportuno!

	* **Byhako** [308110] (1)

		Muchas gracias.

	* **Rafael Torres** [308110] (1)

		Excelente aporte

	* **llorente.oscar** [308110] (1)

		Gracias. Le di muchas vueltas y vi varias veces el video y no encontraba el fallo.

	* **humberto-tabilo** [308110] (1)

		Hola, hay diferencias en como se llama a la funci√≥n con el paso del tiempo al menos el code te indica como usar la funci√≥n actualizada.
		
		Buen aporte!

	* **David Behar** [308110] (1)

		Sab√≠a que no era yo, gracias buen samaritano

* **√Ålvaro Jos√© Saavedra D√≠az** (32) [228153](https://platzi.com/comentario/228153/) 

	A partir de este v√≠deo me he dado cuenta que hace un buen rato que miro el c√≥digo de Juli√°n y lo copio en mi Visual Studio Code como un papagayo sin entender nada‚Ä¶ Echo en falta quiz√°s un v√≠deo que de vez en cuando haga un repaso-resumen de las cosas que se han ido implementando.
	
	¬øQuiz√°s me he saltado un curso m√°s liviano que explique los conceptos b√°sicos de node.js antes de meterme en el curso avanzado?
	
	O quiz√°s yo soy m√°s lento que el resto, no lo descarto xD.

	* **Joaquin Araujo** [228153] (10)

		La verdad que si hace falta una clase que explique de forma general lo que se esta haciendo con ejemplos a parte del c√≥digo de la aplicaci√≥n que se hace. NO te preocupes a mi tambi√©n me cuesta entender a veces pero busco en Google y repito los v√≠deos tantas veces sea necesario hasta entender de verdad üòÉ

	* **Eddy Nelson P√©rez Decena** [228153] (3)

		Son cosas que pasan, cuando empece a estudiar en platzi me pasaba lo mismo, me fui dando cuento de lo que pasaba, as√≠ que cambie la forma de estudiar en platzi ajust√°ndola a mi forma de aprender. Te recomiendo que termines el [Curso definitivo de javaScript ](https://platzi.com/clases/javascript-pro-2016/), hay explican cosas liviana de node.js

	* **√Ålvaro Jos√© Saavedra D√≠az** [228153] (0)

		Gracias a ambos por los comentarios.

	* **Dave Ch√°varri** [228153] (15)

		Alvaro, no, no eres solo tu, yo creo realmente que Platzi tiene un problema con la manera de estructura sus clases, voy 3 cursos de programaci√≥n y en los 3 me ha pasado el mismo fen√≥meno del Papagayo que comentas y no soy un novato. Creo que el profesor es un capo, se nota que la rompe. Pero cuando ense√±as algo tienes que empezar con aquellas cosas cosas que lleven al alumno a ser minimamente competente en aquello que est√° aprendiendo. Van 19 v√≠deos y aun no hacemos ni un ‚ÄúHola mundo‚Äù, no hacemos ni un mantenimiento, y no es que hayamos invertido ese tiempo en ver teor√≠a porque solo se ha corrido a lo loco sin dar mayores explicaciones de lo que se hace, hemos invertido el tiempo en cosas que considero son importantes pero que no son inmediatas. Primero me ense√±as a como estabilizar mi proyecto, luego me ense√±as a como interactuar con la base de datos, hacemos un mantenimiento y luego podemos hacer progresi√≥n y vemos maneras m√°s sofisticadas de hacer las mismas cosas simples que ya me ense√±aste a hacer. He terminado viendo un v√≠deo de Youtube de como hacer un mantenimiento en Node.js con express que dur√≥ 45 min y al terminar siento que he aprendido m√°s que en los √∫ltimos 19 v√≠deos.
		
		Yo creo que a los amigos de Platzi les encanta llenar sus cursos de cosas sofisticadas para decir que sus cursos son super completos, lo que no est√° mal, solo que en mi opini√≥n no saben la manera correcta de introducir este conocimiento al curso. Meten estos t√≥picos en partes en donde uno debe estar aprendiendo lo b√°sico. Por mi parte dejo el curso aqu√≠ porque ya no quiero perder m√°s mi tiempo voy a otro lado a aprender lo b√°sico y luego regreso a ver este curso para aprender cosas nuevas.

	* **Miguel Angel Gatto** [228153] (7)

		En mi caso sent√≠ algo similar, y eso que ten√≠a una base de trabajo emp√≠rico (nada de estudio) en Node. Pero por lo menos lo que me resulta a mi es darle mi toque, probar las variantes que el profe no, cambiar cosas, ver como se rompe (siempre primero se rompe! je), googlear pq se rompe y arreglarlo.  
		Hacer retrospectiva de porque instalamos Sinon por ej. porque necesitamos eso. Me sirve bastante.  
		Es la regla de los 5 porque (5 whys) por video. As√≠ veo el video en 10 min y pienso otros 10, pruebo otros 20.  
		Tambi√©n lo que hago a veces es verlo entero, y tratar de escribirlo al final sin ver el video, ah√≠ te das cuenta de que conceptos te quedaron y que no.  
		Gracias por el comentario! No somos los √∫nicos! üòÉ

	* **Leonardo Cruz Vel√°squez** [228153] (2)

		Estoy de acuerdo con muchos comentarios, el profe va sumamente r√°pido y omite cosas que deber√≠a explicar. Curiosamente, aunque en otros cursos, para las cosas obvias se detienen a explicarlas mil veces, pero temas que deber√≠an detenerse a explicarlo as√≠ sea de pasadita y que uno repita el video para entender, no lo hacen. Temas a veces como los accesos directos de teclado, ya que se mueven rapid√≠simo entre pantallas, o hacen comandos que no entiendo, y que ser√≠a bueno que lo enunciaran al menos una vez para saber c√≥mo est√°n haciendo las cosas, qu√© aplicaciones tienen abiertas.  
		Tambi√©n, aunque parezca obvio, es bueno que muestren el paso a paso de como se crea el proyecto, qu√© ventanas abren (terminal/editor xx) para saber, por si no estamos tan experimentados en el tema y eso con que lo digan una sola vez es suficiente, no hay que repetir mil veces, pero al menos una en todo el curso. Me gusta que se vean temas avanzados, y no estar en los t√≠picos cursos que ense√±an todo de ceros, pero en algunos apartes no sobra una explicaci√≥n de cosas que sean complejas. Y para el compa√±ero xavarri, deber√≠as compartirnos el enlace del video de youtube para reforzar estos temas.

	* **Ivan Robles** [228153] (4)

		Amigos, al momento de tomar un curso siempre deben de tener la **documentaci√≥n** de las herramientas que se utilizan a la mano (y google). De esa manera van a poder entender que es lo que esta sucediendo. En este caso la documentaci√≥n de las librer√≠as **Sinon** (<http://sinonjs.org/releases/v4.5.0/>) y **Proxyquire** (<https://github.com/thlorenz/proxyquire>).

	* **SKILLON** [228153] (1)

		Hola Alvaro, me siento igual con este curso, creo que me falta conocimiento sobre como funciona un backend, he planteado mi inquietud al equipo de soporte y su recomendaci√≥n fue revisar el curso anterior de Node.
		
		Ya han pasado 6 meses desde tu comentario as√≠ que si tienes alguna otra sugerencia para aprender mejor, es bienvenida.

	* **Jos√© Rubial** [228153] (2)

		Me siento exactamente igual, de Node.js y como funciona, solo los primeros videos‚Ä¶ de ah√≠ en adelante solo ha sido como utilizar node y jalarte m√≥dulos a diestra y siniestra, sin explicar porque esto se hace as√≠, o tan siquiera como node act√∫a en todo esto‚Ä¶ el curso deber√≠a pasar de llamarse ‚Äúcurso avanzado de node.js‚Äù a ‚ÄúProyecto avanzado con node.js‚Äù

	* **juand_silva** [228153] (8)

		De acuerdo con todos los comentarios, yo al principio me sent√≠a igual, buscaba metodolog√≠as que me ayudaran, no solo aprender si no lo m√°s importante. **Entender**. Sent√≠a mucha frustraci√≥n porque no lograba retener nada de lo que explicaban. Al tiempo la respuesta la encontr√© en la metodolog√≠a Agile **Scrum** aplic√°ndola de la siguiente manera.
		
		  1. **Tomar Sprints de 4 o 5 v√≠deos m√°ximo** (solo escuchar y codear) tomando nota y subrayando especialmente lo que no se ha entendido.
		
		
		* Revisar las notas y buscar en la web los temas que no se entendieron, en mi caso, la mayor√≠a era la utilizaci√≥n de las librer√≠as de NPM en NODE.
		* Hacer feedback (volver a ver) de los v√≠deos o temas que no se entendieron.  
		- **hacer un mapa mental** de los m√≥dulos del proyecto para que no te enredes con lo que llevas y lo que viene. (esta funci√≥n para que se necesita, porque se requiere este m√≥dulo, que hace as√≠ y no de otra forma, por qu√©, por qu√©‚Ä¶)  
		- **Autoevaluaci√≥n de lo aprendido:** tratar de replicar lo que que aprendiste sin ver el v√≠deo o haciendo peque√±o proyecto con lo que no entendiste.
		
		
		  1. Saca 10 o 15 minutos antes de iniciar a estudiar para repasar lo que aprendiste del sprint anterior.
		
		  2. **Autoevaluaci√≥n semanal:** revisa todo lo que aprendiste en una semana y trata de conectarlo todo, es decir, hacer un mapa mental general de lo que va en el proyecto hasta ese momento.
		
		  3. Si deseas aprender y volverte un experto, puedes revisar el v√≠deos al mes a una velocidad de 2x si quieres, leer por aparte temas relacionados con el curso o replicar el proyecto del curso con tus propios m√©todos para codear.
		
		
		
		
		**Nota:** al principio duele especialmente al tratar de entender y autoevualuarse pero con el paso de algunos d√≠as entiendes m√°s f√°cil todo y no te toma mucho tiempo entender.

	* **SKILLON** [228153] (4)

		Encontre esto en Youtube, yes lo que me hacia falta para entender Node jajaja  
		<https://www.youtube.com/watch?v=TlB_eWDSMt4>  
		Espero les sirva
		
		=)

	* **Jos√© Rubial** [228153] (0)

		Me gusta la metodolog√≠a que propone juand_silva no solo la pienso aplicar de ahora en adelante para nuevos cursos, sino que retroceder√© al principio de este, y la comenzare a usar.

	* **Bruno Echevarria Quiroga** [228153] (1)

		Bueno, pues a mi me ha funcionado copiar el c√≥digo que viene anexado para luego prestar suma atenci√≥n a todo lo que hace Juli√°n, as√≠ anoto las cosas mas importantes y no pierdo tiempo en escribir y escuchar, que no esta mal, pero que en mi caso no funciona muy bien, prefiero prestar mucha atenci√≥n y rescatar lo m√°s importante de su v√≠deo y lo que me parece innecesario trato de adelantarlo para no sentir que pierdo el tiempo. Esto me ha funcionado y no quiere decir que para todos este bien, pero para m√≠ es excelente.

	* **Iv√°n Sabido** [228153] (2)

		Yo creo que deber√≠an empezar con los cursos de fundamentos de javascript antes de comenzar con el de nodejs avanzado, quiz√°s el de fundamentos de base de datos y luego el de postgresql, igual pueden leer blogs y libros para entender aun m√°s o encontrar cosas que quiz√°s no se hayan visto en esos cursos. El curso de nodejs avanzado da por entendido que ya se tiene esa base, en mi caso a mi me gusta el curso, entiendo bastante de JS y postgresql, manejo de ORM, etc. Lo que estoy aprendiendo es que nuevas herramientas o quiz√°s algunas que no conoc√≠a se pueden implementar para mejorar el desarrollo con Nodejs. Pero de nuevo, es un curso avanzado que si no tienes las bases pues se sentir√°n perdidos.

	* **Misael Zurdo** [228153] (3)

		Creo que lo paso es que el curso de nodejs basico quedo desactualizado capaz un dia este un nuevo curso de node basico que deberia estar antes de este.

	* **Facundo Espinosa** [228153] (1)

		No es culpa del profesor si ustedes particularmente no entienden lo que se esta dando. Si no entienden muchos conceptos de los que ven aca tienen que acompa√±arlos con investigaci√≥n, no sirve de nada que solo copien y peguen codigo, traten de entender que pasa, cambien algunas cosas del codigo, vean que para, tiren comentarios por todos lados explicando que es lo que hace, abran la documentacion de las dependencias mirenlas un poco, y si siguen sintiendo que no entienden, sera por que tendran que tomar cursos mas basicos de js y nodeJs y programacion en general para asi poder entender los conceptos de una manera mas rapida. Pero dejen de culpar al profesor y a platzi por que no les dan todo en la mano, va en ustedes tambien entender que si no estan aprendiendo es por que les falta algun conocimiento previo o acompa√±ar con mucha investigacion.

	* **Andr√©s D√≠az** [228153] (0)

		Este es el curso avanzado de Node. Hay 2 cursos que son los fundamentos para poder comprender lo que se hace ac√°. Yo, luego de ver los previos, comprendo y puedo seguir el ritmo de este curso. Es m√°s, esperaba que fuera asi; ya que hay bastante contenido avanzado por ver y si se hace demasiado detallado el curso ser√≠a interminable

	* **Gustavo Ram√≠rez Apache** [228153] (1)

		La cuesti√≥n con este curso es que si es avanzado, si no vienen con un conocimiento m√°s solido se los va a comer el curso, la primer vez que vi este curso por encima no entendi nada, ya ha pasado algunos meses y lo decidi ver de nuevo y la cosa cambia totalmente.

* **Phantom45** (27) [612068](https://platzi.com/comentario/612068/) 

	en las versiones recientes de sinon no se usa
	``` 
	    sinon.sandbox.create()
	    sinon.sandbox.restore()
	    
	```
	
	esto se convierte a
	``` 
	    sinon.createSandbox()
	    sinon.resetHistory()
	    
	```

	* **Jorge Alexander Salcedo Alvarez** [612068] (0)

		excelente muchas gracias

	* **Walter Lensinas** [612068] (1)

		Gracias genio! justo enganche la documentaci√≥n, luego volv√≠ y vi tu comentario!
		
		Tante gratzie!

	* **Katherine Serrano Romero** [612068] (1)

		Muy Bien, Excelente aporte

	* **matheoNieto** [612068] (1)

		estuve revisando y tambien funciona el restore, en la version actual se usa sandbox.restore() sin el sinon

	* **Fredy Ricardo Cort√©s Ram√≠rez** [612068] (1)

		Muchas gracias amigo, justo en el momento necesario.

* **juan Hernandez** (12) [295788](https://platzi.com/comentario/295788/) 

	Hola, me aparecia error en sinon.sandbox.restore().  
	error sinon.sandbox.restore() is not a function.
	
	Resuelto de la siguiente forma
	
	sandbox.restore()
	
	Adjunto enlace para consulta:
	
	<http://sinonjs.org/releases/v2.0.0/sandbox/>

	* **Luis Antonio Schmiel Paredes** [295788] (1)

		Hey muchas gracias, justo pase por el mismo problema. creo que se actualizo la librer√≠a. Buen aporte!

	* **Sebastian Cardoso Castillo** [295788] (4)

		A mi me paso lo mismo, es por una actualizaci√≥n de sinon. Otra aclaraci√≥n **sandbox.create() is deprecated**. En la nueva versi√≥n se usa **sinon.createSandbox()**

	* **juand_silva** [295788] (1)

		@sebaveg muchas gracias me sirvi√≥

	* **Jos√© Ricardo Romo Guti√©rrez** [295788] (1)

		gracias hijo¬°¬°¬° jajajaja lo deje hace 4 dias por no encontrar la solucion. Gracias

* **Byron Mesias Cueva Cabrera** (6) [981350](https://platzi.com/comentario/981350/) 

	Para versiones actuales de sinon me toco realizar los siguientes cambios:
	``` 
	    letsanbox = null
	    
	    test.beforeEach(async () => {
	      sanbox = sinon.createSandbox()
	      AgentStub = {
	        hasMany:sanbox.spy()
	      }
	      ...
	    })
	    
	    test.afterEach(() => {
	      sanbox && sanbox.restore()
	    })
	    
	```

* **Ivan Robles** (5) [292687](https://platzi.com/comentario/292687/) 

	Algunas definiciones de la clase:
	
	* **Stub** , objeto que es similar en su funcionalidad al objeto original (nuestro modelo), pero que la respuesta y los argumentos de entrada est√°n previamente especificados con una librer√≠a o estrategia. Objetos falsos que se van a comportar de manera similar a los objetos reales.
	
	* **Spy** es una funci√≥n espec√≠fica que permite hacer preguntas como: ¬øCuantas veces fue llamada una funci√≥n?, ¬øcon que argumentos?, es muy √∫til a la hora de hacer pruebas.
	
	* **Sandbox** ambiente especifico de sinon que va a funcionar para un caso particular (no de manera global). Cuando se termine de ejecutar la prueba se reinicia el sandbox.
	
	
	

* **alvaritokore** (4) [275603](https://platzi.com/comentario/275603/) 

	Me gustar√≠a una clase bonus s√≥lo sobre testing. tengo que ver el video varias veces para darle sentido al serial, beforeEach afterEach, sandbox, proxyquire y sinon

* **luisbarboza** (4) [252139](https://platzi.com/comentario/252139/) 

	Instalate un paquetico por NPM

	* **Gustavo Gonzalez** [252139] (0)

		üòÇ

* **mateog** (3) [340833](https://platzi.com/comentario/340833/) 

	para que el test pase sin errores es necesario cambiar:
	``` 
	    test.afterEach(t => {
	      sandbox && sinon.sandbox.restore()
	    })
	    
	```
	
	por
	``` 
	    test.afterEach(t => {
	      sandbox && sandbox.restore()
	    })
	    
	```
	
	y tambien:
	``` 
	    test.beforeEach(async () => {
	      sandbox = sinon.sandbox.create()
	      AgentStub = {
	        hasMany: sandbox.spy()
	      }
	    
	```
	
	por
	``` 
	    test.beforeEach(async () => {
	      sandbox = sinon.createSandbox()
	      AgentStub = {
	        hasMany: sandbox.spy()
	      }
	    
	```

	* **Hernando Mart√≠nez** [340833] (1)

		gracias!!

	* **DARIO HERRERA GONZALEZ** [340833] (1)

		capo!

	* **Luis Donaldo Lopez Gil** [340833] (1)

		gracias!

* **Manuel Andres Santizo Avila** (3) [243095](https://platzi.com/comentario/243095/) 

	Otra definici√≥n de STUBS: ‚Äúen el contexto del testeo del software, un trozo de c√≥digo usado como sustituto de alguna otra funcionalidad. Un stub puede simular el comportamiento de c√≥digo existente (tal como un procedimiento en una m√°quina remota) o ser el sustituto temporal para un c√≥digo a√∫n no desarrollado‚Äù
	
	Y comparto el link del sitio de [SINONjs](http://sinonjs.org/releases/v2.3.0/stubs/) en el que se encuentra un poco m√°s de documentaci√≥n sobre el tema.

* **RoyalLegalSolutions** (2) [559156](https://platzi.com/comentario/559156/) 

	demasiada informaci√≥n en muy poco tiempo. me frustre üòû

	* **Diego Alexander Forero Higuera (Platzi)** [559156] (3)

		No te preocupes es normal, en ten cuenta que puedes ver esta y las dem√°s clases tantas veces como necesites, lo importante es que entiendas los conceptos para poderlos aplicar.

* **camiladi** (2) [346398](https://platzi.com/comentario/346398/) 

	Creo que el msj que pasamos al m√©todo t.true() deber√≠a ser negando. Es decir que el AgentModel.hasMany **no** fue llamado.
	``` 
	    test.serial('Setup' , () => {
	      t.true(AgentStub.hasMany.called , "AgentModel.hasMany wasn't executed")
	       t.true(AgentStub.hasMany.calledWith(MetricStub), 'Argument should be the model')
	       t.true(MetricStub.belongsTo.called, `MetricModel.belongsTo wasn't executed`)
	       t.true(MetricStub.belongsTo.calledWith(AgentStub), 'Argument should be the model')
	    })
	    
	```
	
	Ya que este se imprime solo cuando AgentStub.hasMany.called retorna el valor **false**

* **John David G√≥mez Huertas** (2) [339747](https://platzi.com/comentario/339747/) 

	creo que ser√≠a genial y muy √∫til tener cursos de s√≥lo pruebas unitarias‚Ä¶ ese tema me hace sentir muy muy muy perdido üò¶

	* **eyesidmorenov** [339747] (1)

		Totalmente de Acuerdo. Tener un curso especializado en pruebas o dejar el tema de pruebas para el final y realizar la linea base de la Arquitectura como enfoque principal. A no ser que el objetivo en mente de Julian sea ense√±ar a programar realizando los test desde el principio. Sin embargo el tema de pruebas requiere un tratamiento aparte.

* **Andres Leonardo Arevalo** (2) [244214](https://platzi.com/comentario/244214/) 

	Instalaci√≥n de sinon

	* **Byhako** [244214] (2)

		npm install -D sinon

* **Lele Lester** (1) [749732](https://platzi.com/comentario/749732/) 

	Me parece interesante compartir esto que esta en la documentacion de AVA
	``` 
	    Mocha requires you touse implicit globals like describe and it with the default interface (which most people use). It'snot very opinionated and executes tests serially without process isolation, making it slow.
	    
	```

* **ivanruiz__** (1) [582646](https://platzi.com/comentario/582646/) 

	Estoy intentando conseguir hacer los ‚Äústubs‚Äù con Jest y no consigo hacerlos funcionar
	
	Les dejo el codigo sin los stubs por si alguien sabe como implementarlo, Gracias!
	``` 
	    import setupDatabase from '..';
	    
	    const config = {
	      logging() {},
	    };
	    
	    let db = null;
	    
	    beforeEach(async () => {
	      db = await setupDatabase(config);
	    });
	    
	    describe('Agent', () => {
	      test('Agent service should exist', () => {
	        expect(db.Agent).toBeTruthy();
	      });
	    
	      test('Setup', () => {
	        // expect(MetricStub.belongsTo).toHaveBeenCalled();
	        // expect(Agent).toHaveBeenCalled();
	      });
	    });
	    
	```

* **Jordi Santamar√≠a Portol√©s** (1) [571585](https://platzi.com/comentario/571585/) 

	Usamos los stubs para garantizar que se hacen llamadas a las funciones adecuadas, abstraiendo asi las llamadas de sequelize, las cuales como son de una libreria externa ya testeada no debemos preocuparnos por testearla.

* **Supershuttle** (1) [404428](https://platzi.com/comentario/404428/) 

	Como serian las pruebas para la liberia **request-promise-native** usando sinon.?
	
	Este seria mi implementacion pero no esta funcionando correctamente
	
	const request = require(‚Äòrequest-promise-native‚Äô)  
	let resolveStub = sandbox.stub(request, ‚ÄòRequest‚Äô).withArgs(options).resolves(data)
	
	Donde ‚Äúoptions‚Äù son los datos del conexion a la API y ‚Äúdata‚Äù es el resultado esperado.

* **Josu√© Isaac Fuentes L√≥pez** (1) [374611](https://platzi.com/comentario/374611/) 

	Quise probar los stubs en un proyecto diferente y cuando hago el test me aparece el siguiente error
	``` 
	    TypeError {
	        message: 'Cannot readproperty\'belongsTo\' of undefined',
	      }```
	    aca esta el codigo:
	    https://github.com/chaqui/backendLibreria/blob/master/backendLibreria-db/tests/TC_Persona-tests.js
	    
	```

	* **Lele Lester** [374611] (1)

		Sube el resto del c√≥digo as√≠ podemos verlo.  
		El objeto sobre el cual est√°s llamando `belongsTo` no est√° definido. Lo est√°s llamando correctamente?

* **Josu√© Isaac Fuentes L√≥pez** (1) [373849](https://platzi.com/comentario/373849/) 

	¬øa todos los imports del modelo en index se le deben de crear un stub?

	* **Lele Lester** [373849] (1)

		Si, por cada `model` que tengas definido en tu index deber√≠as crear un stub.

* **Jhojany Jose Uzategui Araujo** (1) [348006](https://platzi.com/comentario/348006/) 

	Estoy teniendo problemas con proxyquire, tengo la dependencia instalada pero al correr el test me sigue diciendo que proxyquire no esta definido, ya he desinstalado y vuelto a instalar proxyquire y no se que hacer
	``` 
	    "dependencies": {
	        "chalk": "^2.4.1",
	        "debug": "^3.1.0",
	        "defaults": "^1.0.3",
	        "inquirer": "^6.0.0",
	        "pg": "^7.4.3",
	        "pg-hstore": "^2.3.2",
	        "sequelize": "^4.38.0"
	      }
	    }
	    
	```
	``` 
	    'use strict'
	    
	    const test = require('ava')
	    const proxyquire = require('proxyquire')
	    
	    let config = {
	      logging: function () {}
	    }
	    
	    let MetricStub = {
	      belongsTo: function () {}
	    }
	    
	    let AgentStub = null
	    let db = null
	    
	    test.beforeEach(async () => {
	      AgentStub = {
	        hasMany: function () {}
	      }
	    
	      const setupDatabase = proxyquire('../', {
	        './models/agent': () => AgentStub,
	        './models/metric': () => MetricStub
	      })
	    
	      db = await setupDatabase(config)
	    })
	    
	    test('Agent', t => {
	      t.truthy(db.Agent, 'Agent service should exist')
	    })
	    
	```
	``` 
	    C:\Users\Hewllet\Videos\aaa\platziverse\platziverse-db>npm run lint
	    
	    > platziverse-db@1.0.0 lint C:\Users\Hewllet\Videos\aaa\platziverse\platziverse-db
	    > standard
	    
	    standard: Use JavaScript Standard Style (https://standardjs.com)
	      C:\Users\Hewllet\Videos\aaa\platziverse\platziverse-db\tests\agent-tests.js:21:25: 'proxyquire' is not defined.
	    
	```

	* **Jhojany Jose Uzategui Araujo** [348006] (1)

		```
		    "devDependencies": {
		        "ava": "^0.25.0",
		        "install": "^0.12.1",
		        "npm": "^6.3.0",
		        "nyc": "^12.0.2",
		        "proxyquire": "^1.8.0",
		        "sinon": "^6.1.4",
		        "sqlite3": "^4.0.2",
		        "standard": "^11.0.1"
		      },
		    
		```

	* **Walter Lensinas** [348006] (1)

		Borra la carpeta node_modules y ejecuta `npm install`

* **Jairo  casta√±eda** (1) [347345](https://platzi.com/comentario/347345/) 

	el contenido esta muy interesante y se nota que el lo comenta desde la experiencia por eso aveces uno como que se queda por que como no lo ha hecho o no ha hecho las malas practicas no sabe el por que de algunas razones , sin embargo leer la documentaci√≥n de lo que usa es una buena opci√≥n

* **camiladi** (1) [346308](https://platzi.com/comentario/346308/) 

	Me qued√≥ una duda con respecto a cual es la funci√≥n del **sandbox** , lo √∫nico que entend√≠ es que es una forma de depurar mis stub, para que sean ‚Äúlimpiados‚Äù cada vez que se realice mi test. Pero estuve haciendo unas pruebas, remov√≠ todo lo que era sandbox e incluso quit√© mi hooks **.afterEach()**
	``` 
	    test.beforeEach(async () => {
	        /*sandbox = sinon.createSandbox()*/
	        AgentStub = {
	            hasMany: sinon.spy()
	        }
	        const setupDatabase = proxyquire('../', {
	            './models/agent': () => AgentStub,
	            './models/metric': () => MetricStub
	        })
	        db = await setupDatabase(config)
	    })
	    
	    test('Agent' , t => {
	        t.truthy(db.Agent , 'Agent should exist')
	    }) 
	    
	    test.serial('Setup', t => {
	        t.true(AgentStub.hasMany.called, `AgentModel.hasMany wasn't executed`)
	        t.true(AgentStub.hasMany.calledWith(MetricStub), 'Argument should be the model')
	        t.true(MetricStub.belongsTo.called, `MetricModel.belongsTo wasn't executed`)
	        t.true(MetricStub.belongsTo.calledWith(AgentStub), 'Argument should be the model')
	    })
	    
	    /*test.afterEach(async () => {
	               sandbox && sinon.resetHistory()
	    }) */ 
	    
	```
	
	realic√© la primera prueba, y todo sucedi√≥ okay, como deb√≠a ser, pero ahora hice lo siguiente.
	``` 
	    // AgentModel.hasMany(MetricModel)
	      MetricModel.belongsTo(AgentModel)
	    
	```
	
	Como se supone que el sinon est√° ya ‚Äúllamado‚Äù deber√≠a recordar el test anterior ¬øo no? Resulta que al realizar el prueba, me marc√≥ que el **has many** no fue llamado. Entonces me hace creer que el sandbox no cumple ninguna funci√≥n y me confunde todo esto.
	
	Tambi√©n investigu√© que mi objeto sinon a partir de la versi√≥n 5.0, ya es un sandbox por defecto, pero recuerda que nunca hice el reset de este, ya que coment√© el afterEach()

	* **edanfesi** [346308] (1)

		Tienes que verlo como una caja en la que metes cosas. Cuando haces el beforeEach le est√°n indicando que cosas (los stubs) necesitas. Luego, en el afterEach lo que haces es que est√°s ‚Äúlimpiando la caja‚Äù para que cuando se llame otra vez el beforeEach puedas meter stubs nuevos.
		
		¬øPor qu√© debemos hacerlo? Lo tenemos que hacer es porque de esta forma no llevamos el tracking de todos los stubs que hemos creados. Solamente estamos pendiente de los que necesitamos en el momento.

* **Jhojany Jose Uzategui Araujo** (1) [345978](https://platzi.com/comentario/345978/) 

	no se que error tengo este es mi codigo:
	``` 
	    'use strict'
	    
	    const test = require('ava')
	    const proxyquire = require('proxyquire')
	    
	    let config = {
	      logging: function () {}
	    }
	    
	    let MetricStub = {
	      belongsTo: function () {}
	    }
	    
	    let AgentStub = null
	    let db = null
	    
	    test.beforeEach(async () => {
	      AgentStub = {
	        hasMany: function () {}
	      }
	    
	      const setupDatabase = proxyquire('../', {
	        './models/agent': () => AgentStub,
	        './models/metric': () => MetricStub
	      })
	    
	      db = await setupDatabase(config)
	    })
	    
	    test('Agent', t => {
	      t.truthy(db.Agent, 'Agent service should exist')
	    })
	    
	```
	
	y me sigue diciendo que proxyquire no esta definido:
	``` 
	     C:\Users\Hewllet\Videos\aaa\platziverse\platziverse-db\tests\agent-tests.js:21:25: 'proxyquire' is not defined.
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [345978] (1)

		Instalaste proxyquire como dependencia de desarrollo?

	* **Jhojany Jose Uzategui Araujo** [345978] (1)
Si esta instalado con la versi√≥n m√°s reciente

	* **edanfesi** [345978] (1)

		borra el node_modules y vuelvelo a instalar

* **Jos√© Tuzinkievicz** (1) [345463](https://platzi.com/comentario/345463/) 

	VSCode en Windows 10, al lado de la l√≠nea
	``` 
	    const sinon = require('sinon')
	    
	```
	
	muestra ‚Äú677.4k (gzipped: 235k)‚Äù en rojo, me imagino que debe ser una advertencia sobre el tama√±o de la librer√≠a, es problem√°tico eso?

* **Rafael Larco Buchelli** (1) [333586](https://platzi.com/comentario/333586/) 

	el npm test me bota que la prueba no paso, a qu√© se debe?
	
	* ‚ÄòsetupAgentModel is not a function‚Äô
	
	

	* **Diego Alexander Forero Higuera (Platzi)** [333586] (1)

		Puedes compartir tu c√≥digo en github para ayudarte a revisar?.

* **√Ålvaro Mart√≠nez Fern√°ndez** (1) [331051](https://platzi.com/comentario/331051/) 

	Por si ayuda! <https://solidgeargroup.com/tests-unitarios-en-javascript-sinon?lang=es>

* **Ezequiel Wernicke** (1) [294423](https://platzi.com/comentario/294423/) 

	Error diciendo, sinon.sandbox.restore is not a function, en vez cambie esa linea a lo siguiente.
	``` 
	    test.afterEach(() => {
	      sandbox && sandbox.restore() // Eqv: if (sandbox) sinon.sandbox.restore();
	    })
	    
	```

* **Alexis M√©ndez** (1) [292827](https://platzi.com/comentario/292827/) 

	Le pone mucho color el profe con las pruebas, y los alumnos m√°s se enredan

* **Jonathan P√©rez Rodr√≠guez** (1) [285249](https://platzi.com/comentario/285249/) 

	que significa &&?
	``` 
	    sandbox && sinon.sandbox.restore()
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [285249] (4)

		Es el operador l√≥gico AND lo que seria `sandbox y sinon.sandbox.restore()`

	* **Bryam Rodriguez** [285249] (2)

		Ejecuta sinon.sandbox.restore si es que sandbox existe (no es undefined)

	* **Sebastian Cardoso Castillo** [285249] (1)

		Si sandbox no existe (undifined) tiene un valor false en la l√≥gica y no importa lo que esta despu√©s del && porque todo va a ser falso por lo tanto eso que esta despues del operador l√≥gico no se va a ejecutar.

	* **Ivan Robles** [285249] (1)

		Es lo mismo que si usaras esta linea:
		``` 
		    if (sandbox) sinon.sandbox.restore();
		    
		```

* **Supershuttle** (1) [44122](https://platzi.com/comentario/404428/) 
Como serian las pruebas para la liberia request-promise-native usando sinon.? Este seria mi implementacion pero no esta...

* **Josu√© Isaac Fuentes L√≥pez** (1) [41240](https://platzi.com/comentario/373849/) 
¬øa todos los imports del modelo en index se le deben de crear un stub?

	* **Lele Lester** [41240] (1)

		Si, por cada `model` que tengas definido en tu index deber√≠as crear un stub.

* **Jhojany Jose Uzategui Araujo** (1) [38798](https://platzi.com/comentario/348006/) 
Estoy teniendo problemas con proxyquire, tengo la dependencia instalada pero al correr el test me sigue diciendo que proxyquire no esta d...

	* **Jhojany Jose Uzategui Araujo** [38798] (1)

		```
		    "devDependencies": {
		        "ava": "^0.25.0",
		        "install": "^0.12.1",
		        "npm": "^6.3.0",
		        "nyc": "^12.0.2",
		        "proxyquire": "^1.8.0",
		        "sinon": "^6.1.4",
		        "sqlite3": "^4.0.2",
		        "standard": "^11.0.1"
		      },
		    
		```

* **Jhojany Jose Uzategui Araujo** (1) [38610](https://platzi.com/comentario/345978/) 
no se que error tengo este es mi codigo: 'use strict' const test = require('ava') const proxyquire = require('proxyquire') let co...

	* **Diego Alexander Forero Higuera (Platzi)** [38610] (1)

		Instalaste proxyquire como dependencia de desarrollo?

* **Rafael Larco Buchelli** (1) [37461](https://platzi.com/comentario/333586/) 
el npm test me bota que la prueba no paso, a qu√© se debe? ‚ÄòsetupAgentModel is not a function‚Äô 

	* **Diego Alexander Forero Higuera (Platzi)** [37461] (1)

		Puedes compartir tu c√≥digo en github para ayudarte a revisar?.

* **Kevin  Castillo Mora** (1) [36692](https://platzi.com/comentario/324847/) 
Buenas, que alternativas tengo a proxyquiere si estoy usando modules de ES6 (import, export) ??

* **Kevin  Castillo Mora** (0) [324847](https://platzi.com/comentario/324847/) 

	Buenas, que alternativas tengo a proxyquiere si estoy usando modules de ES6 (import, export) ??

* **leonardoespinosa25** (0) [311991](https://platzi.com/comentario/311991/) 

	Tener en cuenta cambiar **sinon.sandbox.create()** por **sinon.createSandbox()** ya que sandbox.create() ahora es obsoleto
	``` 
	    test.beforeEach(async () => {
	      sandbox = sinon.createSandbox()
	    ....
	    
	```

* **Esteban Contreras** (0) [302538](https://platzi.com/comentario/302538/) 

	Hay algo fundamental que aun no se entiende, el concepto de ‚Äúuni-test‚Äù. Cualquiera que realmente quiera entender porque se hace mocking y stub primero tiene que entender este concepto.

* **Diego Cruz** (0) [299089](https://platzi.com/comentario/299089/) 

	Tambien pueden cambiar el  
	`sandbox= sinon.sandbox.create()``  
	por
	``` 
	    ``sandbox= sinon.createSandbox()
	    
	```

* **Liliana Colls** (0) [290004](https://platzi.com/comentario/290004/) 

	Para los que no estamos muy familiarizados con la parte de pruebas, les recomiendo este enlace  
	[](https://www.genbetadev.com/javascript/desmitificando-los-dobles-de-test-mocks-stubs-and-friends)  
	Me ayud√≥ a entender un poco que son exactamente los Stubs y Mocks y as√≠ pude ver porque el profe hacia las cosas en el c√≥digo!

	* **Juan Galdames** [290004] (0)

		Cual enlace?

	* **Sebastian Cardoso Castillo** [290004] (0)

		Cual enlace?

	* **Liliana Colls** [290004] (1)

		<https://www.genbetadev.com/javascript/desmitificando-los-dobles-de-test-mocks-stubs-and-friends>
		
		<https://blog.pragmatists.com/test-doubles-fakes-mocks-and-stubs-1a7491dfa3da>

* **Jonathan P√©rez Rodr√≠guez** (0) [286723](https://platzi.com/comentario/286723/) 

	Si sientes que estas perdido apartir de este video es porque probablemente lo estes, yo tambien me sent√≠ asi. Lo que hice para dejar de sentirme asi fue regresar al c√≥digo y cambiar l√≠neas para hacer fallar el test, comentar cada paso que se est√° haciendo en los tests y en los otro m√≥dulos, volver a ver los videos, tomar√° tiempo pero vale la pena.

* **Jonathan P√©rez Rodr√≠guez** (0) [285467](https://platzi.com/comentario/285467/) 

	Creo que de estos temas de testeo podria salir un curso completo que creo debe ser obligatorio en la carrera de js

	* **Bruno Echevarria Quiroga** [285467] (0)

		Pienso lo mismo.

* **alvaritokore** (0) [275597](https://platzi.com/comentario/275597/) 

	Creo que nos tardamos m√°s en realizar pruebas que en implementar el m√≥dulo. Pero sin duda hacer pruebas hace que escribas mejor c√≥digo.

* **Carlos Godoy** (0) [257116](https://platzi.com/comentario/257116/) 

	En caso de querer hacer el stub pero ES6 sin usar proxyquire, es posible realizar de alguna forma tal stub, ya que al crear el stub de AgentModel el test no reconoce el metodo findById.  
	Alguna gu√≠a al respecto? se agradece de antemano

* **Jordi** (0) [252950](https://platzi.com/comentario/252950/) 

	Hola, el test.beforeEach(async () => { ‚Ä¶ Podr√≠amos quitarle lo de async? No parece que tenga que ser asyncrono necesariamente, no? En el afterEach no hemos puesto que sea asyncrona

* **juand_silva** (0) [227203](https://platzi.com/comentario/227203/) 

	No entend√≠ la diferencia entre las aserciones true y thuty en AVA

	* **Diego Alexander Forero Higuera (Platzi)** [227203] (3)

		true, espera como valor de respuesta `true` mientras que truthy valida que exista algo que no sea falso, null, undefined, etc.

* **jsteven** (0) [214446](https://platzi.com/comentario/214446/) 

	Wow, cada vez me sorprendo mas en Platzi, este curso est√° a un nivel profesional

	* **Nicole Chapaval (Platzi)** [214446] (0)

		Este curso lo pensamos con Juli√°n para que pudieran ver todas las posibilidades que existen con Node.js. Me alegra mucho saber que te ha gustado üòÉ

* **Iv√°n Arenas** (0) [197293](https://platzi.com/comentario/197293/) 

	Apartir de la instalacion del modulo de sqlite3 estoy teniendo problemas con la instalacion de los modulos, esto a que se debe?
	
	saludos

	* **Iv√°n Arenas** [197293] (0)

		platziverse-db$ npm i proxyquire --save-dev  
		npm WARN platziverse-db@1.0.0 No repository field.npm ERR! path /home/iarenas/Documents/cursos/nodejs/platziverse/platziverse-db/node_modules/.staging/npmlog-c48569df  
		npm ERR! code ENOENT  
		npm ERR! errno -2  
		npm ERR! syscall renamenpm ERR! enoent ENOENT: no such file or directory, rename ‚Äò/home/iarenas/Documents/cursos/nodejs/platziverse/platziverse-db/node_modules/.staging/npmlog-c48569df‚Äô -> '/home/iarenas/Documents/cursos/nodejs/platziverse/platziverse-db/node_modules/sqlite3/node_modules/node-pre-gyp/node_modules/npmlog‚Äô  
		npm ERR! enoent This is related to npm not being able to find a file.  
		npm ERR! enoent
		
		npm ERR! A complete log of this run can be found in:  
		npm ERR! /home/iarenas/.npm/_logs/2017-09-25T03_31_23_674Z-debug.log  
		iarenas@IAMLtop:~/Documents/cursos/nodejs/platziverse/platziverse-db$
		``` 
		    <code>
		    
		```

	* **Jose Enrique Marquez** [197293] (0)

		Hola iban yo tambien pase por lo mismo, solo que yo no utilice npm si no yarn lo que hice fue borre la carpeta node_modules y limpie cache de yarn para luego hacer un install de todo por completo y listo me funciono todo a la perfecci√≥n, espero te funcione.

* **Juan Carlos  Correa Herrera** (0) [193714](https://platzi.com/comentario/193714/) 

	Me sali√≥ error al querer instalar sinon. La soluci√≥n la encontr√© en [stackoverflow](https://stackoverflow.com/questions/45557788/npm-err-code-eperm).
	
	S√≥lo tienes que borrar el archivo package-lock.json e intentar de nuevo instalar sinon.

* **Leandro Casco** (0) [191806](https://platzi.com/comentario/191806/) 

	Buenas, tengo un par de dudas:
	
	  1. No termino de entender cual es la diferencia del objeto sandbox con respecto al m√©todo spy de sinon y porque tengo que generar un stub del modelo Agent por cada test y no hago lo mismo con el de Metric.
	  2. ¬øNo puedo definir el objeto sandbox por fuera del beforeEach? Si de todas formas lo estoy reiniciando cada vez que finaliza cada test.
	  3. No me termina de cerrar que hace la siguiente linea de c√≥digo:
	
	
	
	> sandbox && sinon.sandbox.restore()
	
	Perd√≥n por tantas preguntas, esta muy bueno el curso.
	
	¬°Muchas gracias!

	* **Edgar Valdez Moises** [191806] (0)

		Mismas preguntas que el compa√±ero

	* **Iv√°n Sabido** [191806] (2)

		<https://semaphoreci.com/community/tutorials/best-practices-for-spies-stubs-and-mocks-in-sinon-js>

	* **Iv√°n Sabido** [191806] (1)

		  1. sandbox te permite restaurar en cuanto porque generar un stub por cada test tampoco entiendo muy bien. (<http://sinonjs.org/releases/v1.17.7/sandbox/>)
		
		  2. tengo la misma duda
		
		  3. La linea especifica que si sandbox existe (diferente de null), realiza la siguiente instruccion que es restaurar el sandbox, si sandbox es null no intenta restaurarlo
		
		
		

	* **Edgar Herrera** [191806] (6)

		_1._ **Spy** te permite verificar cuantas veces fue llamada una funci√≥n. En este caso BelongsTo. ¬øPor qu√© queremos verificarla? Para saber si todo esta bien entre la conexi√≥n de nuestras M√©tricas y su contenedor (Agent). Entonces como nosotros estamos creando Stubs de Agent cada que corremos un test tendremos m√∫ltiples llamados de esa funci√≥n y nosotros s√≥lo queremos verificar que se ha llamado 1 sola vez a nuestra funci√≥n de Agent (hasMany). Eso te permite hacer **Sandbox.** **Reiniciar** los valores de cuanta veces fue llamado esa funci√≥n.
		
		Por **ejemplo** tenemos el stub de Agent cada que hacemos un test. Por lo cual al hacerle Spy ya verificamos una vez si fue o llamada o no. Paramos el test. Hacemos otro y ya tendremos 2 verificaciones de esa misma funci√≥n. Y solo necesitamos 1, tener varias nos podr√≠a confundir. Entonces para eso utilizamos Sandbox. Reincia el valor. (0 ->1 = 1 -> 0).
		
		**¬øPor qu√© generar un stub del AgentModel cada que hacemos un test? ¬øPor qu√© el de MetricModel no?**  
		Porque si te fijas en el index.js, el AgentModel contiene dentro las m√©tricas y las m√©tricas pertenecen al AgentModel, a su vez el AgentModel tiene varios m√©todos por dentro.  
		Entonces queremos asegurarnos que cada que hagamos un test. Todo se encuentre excelente con Agent.
		
		_2._ Lo **prob√©** escribiendo la l√≠nea por fuera. Y me funcion√≥.
		
		_3_. **sandbox && sinon.sandbox.restore()** Sirve para restaurar el Spy() de Agent.
		
		Esa fue la conclusi√≥n a la que llegu√©. Saludos. üòÉ

	* **Kevin Lozoya Giner** [191806] (0)

		  1. Yo lo puse de esta manera y funcion√≥. Seg√∫n c√≥mo lo explica yo lo entiendo de esta manera
		
		
		``` 
		    if (sandbox) {
		    sandbox = sinon.sandbox.restore()
		    }
		    
		```

* **marcelobaez** (0) [191740](https://platzi.com/comentario/191740/) 

	Dejo asentado que hay un posible problema entre sqlite 3.1.9 y la instalacion de sinon

	* **Jonathan Jim√©nez** [191740] (1)

		Buenas Kalimbamgb,
		
		Prueba a instalarlo mediante yarn, con este gestor de paquetes no me ha dado ning√∫n problema mientras que con npm s√≠, te dejo el enlace donde te explican como instalar yarn y sus formas de uso.  
		<https://yarnpkg.com/lang/en/>
		
		saludos,

	* **marcelobaez** [191740] (0)

		Muchas gracias jona! definitivamente en el dia de ayer tuve muchos errores con npm. Me recomendaron otro gestor de paquetes, asi que tu solucion me viene de 10

	* **Erik Ochoa** [191740] (0)

		yo tambi√©n tuve problemas, tuve que borrar todos los node_modules y package-lock.json, hacer npm install pero sin sqlite3 en el package.json luego instalar sqlite3‚Ä¶ weird.

	* **Hector Jose Flores Colmenarez** [191740] (0)

		Yo no tuve problemas instalando sinon, solo tuve que eliminar el package-lock.json e intentar volver a instalar y me funciono bien.

	* **Javier Martin Gutierrez** [191740] (0)

		Yo simplemente borrando el modulo de sqlite3 y borrando la linea del package.json y reinstalando sqlite3 de nuevo, asi me funciona

	* **eltenis** [191740] (0)

		Yo tengo los mismos problemasss que puedo hacer??? Gracias!!

## 0200. Creaci√≥n de fixtures y definici√≥n b√°sica del servicio de Agent [8336](https://platzi.com/clases/1151-nodejs/8336-creacion-de-fixtures-y-definicion-basica-del-servi/)

### Descripci√≥n:


Antes de implementar las funciones del servicio Agent vamos a definir los fixtures.

### Links:

* [platziverse/platziverse-db at 09-fixtures-servicio-agent-basico ¬∑ platzi/platziverse ¬∑ GitHub](https://github.com/platzi/platziverse/tree/09-fixtures-servicio-agent-basico/platziverse-db)

### Comentarios:

* **Alejandro Sulbaran** (24) [297780](https://platzi.com/comentario/297780/) 

	Una peque√±a recomendaci√≥n: s√© que estamos implementando apenas todo el test del microservicio que estamos creando, pero estoy viendo que muchos pierden el hilo del curso y lo abandonan al no saber exactamente por donde o porque estamos haciendo esto, yo no tengo problemas en entender por qu√© se est√° realizando todo esto ya que vengo de otro framework que usa TDD as√≠ que es b√°sicamente lo mismo, aunque ser√≠a genial que hicieran un video previo a toda la creaci√≥n de estos test, donde expliquen con un diagrama (as√≠ como explicaron la aplicaci√≥n de platziverse en general) como se har√° toda la implementaci√≥n de estos test a nuestro microservicio, en mi m√°s humilde opini√≥n creo que ser√≠a lo m√°s justo para que las personas dejen de abandonar el curso y entiendan que estamos haciendo

	* **Rub√©n Maier Enzler** [297780] (1)

		Me siento super identificado, siempre he desarrollado y nunca he hecho tests, por lo tanto todos los temas que se est√°n tocando hasta ahora en el curso me resultan chino b√°sico, y no culpa de lo que propiamente seria el curso que es ‚Äúnodejs‚Äù sino mas bien por la necesidad de previamente saber como se hace un test, que herramientas o artilugios hay, etc. Para m√≠, deber√≠an haber implementado todo el sistema sin tests yendo al grano con lo que propiamente ser√≠a nodejs, y agregar un modulo a lo ultimo como un plus de como implementar tests en todo el sistema.

	* **Alejandro Villegas Carvajal** [297780] (1)

		hasta ahora me ha tocado mirar varias veces el mapa de la arquitectura del proyecto, creo que muchas dudas se solucionan cuando se corra el proyecto.

	* **Rub√©n Maier Enzler** [297780] (2)

		Puede ser que se solucionen las dudas reci√©n al final, pero no deber√≠a ser as√≠, implica gastar tiempo y recursos en tener que hacer una retrospectiva del curso y los puntos anteriores no entendidos y volver atr√°s‚Ä¶ Cosa que en realidad la educaci√≥n deber√≠a ser un proceso mas como cualquier otro, donde no queden grises de por medio y se llegue al resultado final de una manera incremental (incluyendo dudas)

	* **fabialvarado** [297780] (2)
L√°stima el conocimiento que tiene el profesor, lastima porque sinceramente este curso pierde el inter√©s oor parte del estudiante.

	* **Francisco Due√±as** [297780] (1)

		entonces es mejor hacer los cursos de testing que hay en platzi antes de comenzar con este?

* **camiladi** (6) [345671](https://platzi.com/comentario/345671/) 

	La verdad no me hab√≠a topado con la necesidad de implementar nunca pruebas unitarias a nuestro c√≥digo, y lo cierto es que me pareci√≥ genial, estoy descubriendo todo un nuevo mundo, de hecho me gustar√≠a que pudieran hacer un curso m√°s enfocado‚Ä¶ Me cuesta un tanto absorber todo este extenso conocimiento, el cual en serio quisiera poder educarme mucho m√°s. Ojal√° alguien del equipo pueda ver esto y tomarlo en cuenta.

* **skorpion** (4) [747475](https://platzi.com/comentario/747475/) 

	No es necesario hacer shift luego del filter para obtener el primer elemento, mas cuando se sabe que solo hay un elemento en ese array como en este caso que se esta buscando por id.
	
	JS tiene una funcion que se llama find() la cual retorna el primer elemento que sea verdadero, y ademas deja de buscar cuando encuentra dicho elemento, lo cual es mucho mas eficiente que usar filter + shift. Quedaria asi con find
	``` 
	    byUuid: uuid => agents.find(agent => agent.uuid === uuid),
	    byId: id => agents.find(agent => agent.id === id )
	    
	```

* **Jordi Santamar√≠a Portol√©s** (4) [528528](https://platzi.com/comentario/528528/) 

	Para crear un nuevo objeto con nueva referencia, hay formas mucho mas faciles con ECMASCRIPT 5 que el Object.asign
	
	Puedes simplemente hacer {‚Ä¶agent, id: 2, uuid: ‚Äòyyy-yyy-yyw‚Äô, connectedD: false, username: ‚Äòtest‚Äô}  
	Con ‚Ä¶agent, estas heredando todas sus propiedades y se sobrescriben con lo k pongas a continuacion.

* **alvaritokore** (4) [280824](https://platzi.com/comentario/280824/) 

	se podr√≠a utiliza el spread operator en vez de Object.asign?
	``` 
	    const ={ ...agent, pid:1, uuid:'yyy-yyy-yyyw', connected:false }
	    
	```

	* **Bryam Rodriguez** [280824] (2)

		Claro que s√≠, tambi√©n sirve para clonar. Solo ten cuidado si usas babel: <http://www.bambielli.com/til/2017-01-29-spread-operator-deep-copy/>

* **Lele Lester** (3) [752987](https://platzi.com/comentario/752987/) 

	Podemos hacer la funci√≥n extend como un arrow function single line, me parece util compartirlo.
	``` 
	    const extend = (obj, values) => Object.assign({}, obj, { ...values });
	    
	```
	
	El arrow retorna el object assign con el spread de los valores que queremos modificar.
	
	Hay que definir la funcion _antes_ de usarla dentro del array de agents, porque al no usar _function_ js no hace hoisting.

	* **deveeup** [752987] (1)

		En caso que decidan declararla como arrow function, recuerden que deben hacerlo antes del array, de l o contrar√≠o les dar√° error‚Ä¶

* **Phantom45** (3) [612212](https://platzi.com/comentario/612212/) 

	Para los que tengan el error
	
	‚úñ Internal error  
	Error: Cannot apply enhancement-only precompilation, possible bad usage:
	
	La forma de solucionarlo es la siguiente:
	
	intalar @babel/register ( npm i -D @babel/register )
	
	seguido de esto modificamos el package.json
	
	para que quede de la siguiente forma:
	``` 
	    "scripts": {
	        "lint": "standard",
	        "setup": "DEBUG=sens:* node setup.js",
	        "test": "DEBUG=sens:* nyc --reporter=lcov ava"
	      },
	      "ava": {
	        "files": [
	            "tests/**-tests.js"
	          ],
	          "require": [
	            "@babel/register"
	          ]
	        },
	    
	```

	* **uninorteplatziparatodos** [612212] (1)

		Me funcion√≥ amigo, podr√≠as explicarme por qu√©? Te lo agradecer√≠a enormemente

	* **Juan Agu** [612212] (2)

		Me funciono solo poniendo al script de test la expresion de los archivos que busca ava:
		``` 
		    "scripts": {
		        "lint": "standard",
		        "setup": "DEBUG=iotverse:* node setup",
		        "test": "DEBUG=iotverse:* nyc --reporter=lcov ava tests/**-tests.js --verbose"
		      },
		    
		```

* **GerAlfonso** (3) [351615](https://platzi.com/comentario/351615/) 

	Esta seria la versi√≥n de la funci√≥n de extend con spread operator:
	``` 
	    functionextend(obj, values){  
	      return { ...obj, ...values };
	    }
	    
	```

* **Edisson Mata** (3) [321100](https://platzi.com/comentario/321100/) 

	Yo me he perdido totalmente con el curso. He aprendido mucho, pero siento que puedo aprender m√°s, y es que el curso es pesado aunque ya sepas usar Node.js. Pienso que es genial que esten mostrando como un experto en el √°rea use m√©todos y arquitecturas que son confusas de comprender por medios convencionales, pero tambi√©n pienso que este curso le falto m√°s detallar en el ¬øPor qu√©? El curso te dice qu√© hacer, pero no te dice por qu√© hacer las cosas, eso creo que es una falla grave.

* **Pablo Mendez** (3) [193718](https://platzi.com/comentario/193718/) 

	para que filtre solo los agentes que estan conectados (connected) deben modificar el c√≥digo de la siguiente forma:
	``` 
	    connected: agents.filter(a => a.connected == true)
	    
	```

	* **Enzo Aliatis** [193718] (7)

		Con el
		``` 
		    agents.filter(a => a.connected)
		    
		```
		
		es suficiente ya que es redundante preguntar si es == true

	* **Pablo Mendez** [193718] (0)

		Tenes raz√≥n! Es mas, en el c√≥digo lo puse como vos lo escribiste jajaja

	* **henrytabimagiraldo** [193718] (0)

		la propiedad connected ya es un valor booleano, no hace falta a√±adir la operaci√≥n l√≥gica

* **Ernesto Palafox** (3) [193349](https://platzi.com/comentario/193349/) 

	Fixtures - Set de datos falsos o de prueba

* **Jose Luis Campos Bautista** (1) [986621](https://platzi.com/comentario/986621/) 

	El m√©todo **assign **se utiliza para copiar los valores de todas las propiedades enumerables de uno o m√°s objetos fuente a un objeto destino,

* **eduardo110298** (1) [706571](https://platzi.com/comentario/706571/) 

	No entiendo la importancia de las pruebas. Se ve interesante, pero no entiendo para qu√© tenemos que programar pruebas. No se supone que si el c√≥digo est√° malo, revienta y ya?. Nos damos cuenta porque no hace lo que deber√≠a y durante el desarrollo procedemos a rastrear para resolver el problema. Estamos probando el c√≥digo que nosotros escribimos, no las librer√≠as (este concepto lo entiendo) pero ha sido un tiempo importante el que ha pasado solo montando las pruebas. Sin embargo esta pr√°ctica es usada y he escuchado que hay departamentos de pruebas en empresas grandes, entonces al parecer es muy importante; necesito entender la importancia de esto!

	* **Juan Pablo Rodr√≠guez Morales** [706571] (2)

		Las pruebas automatizadas son importantes por varias razones, la primera es que muchas veces cuando una sola persona se enfrasca en escribir c√≥digo, se familiariza con el mismo y no ve errores en la l√≥gica, los tests ayudan con esto. Adem√°s, las pruebas se aseguran no solamente de que la funcionalidad principal est√© bien sino que no tenga efectos colaterales (a veces una actualizaci√≥n en la base de datos puede que se ejecute bien pero da√±e otros registros, por ejemplo). Finalmente, las pruebas te pueden ayudar a escribir c√≥digo incluso m√°s r√°pido, t√©cnicas como TDD te ayudan a definir los requerimientos primero y luego seguir con la l√≥gica que satisfaga dichos requerimientos.

	* **William Calder√≥n Castillo** [706571] (2)

		Eduardo, cuando tienes pruebas de todo t√∫ c√≥digo y realizas un peque√±o cambio, solo corres npm test y vas a saber en muy poco tiempo si ese peque√±ito cambio que hiciste afect√≥ a la aplicaci√≥n ENTERA. y no vas a estar buscando los errores en vivo. Te vas a ahorrar mucho tiempo teniendo pruebas de cada peque√±a parte de t√∫ c√≥digo. Yo tambi√©n me demor√© un poco en entender hasta que estuve en un trabajo real. Adem√°s si ya sabes o cu√°nto sepas de Continous Integration y Continous Delivery vas a saber que para que un c√≥digo nuevo sea implementado en producci√≥n, ese c√≥digo nuevo debe tener pruebas y estas pruebas deben pasar antes de hacer deploy a la rama master o a la rama en la que tu proyecto est√° en producci√≥n.

* **CrifQui** (1) [654776](https://platzi.com/comentario/654776/) 

	No entiendo mucho esto de las pruebas!

	* **William Calder√≥n Castillo** [654776] (1)

		Crif, cu√©ntanos m√°s que es lo que no entiendes para poderte colaborar. No importa si la pregunta parece ‚Äútonta‚Äù

* **Byhako** (1) [475098](https://platzi.com/comentario/475098/) 

	Ya me siento super perdido. üò¶

	* **William Calder√≥n Castillo** [475098] (1)

		pregunta sin miedo!

* **Luis Avila** (1) [377069](https://platzi.com/comentario/377069/) 

	Para entender un poco m√°s el concepto es bueno hacer unos cuantos logs con el fin de saber qu√© es lo que estamos obteniendo a veces, por ejemplo:
	``` 
	    test('Agent', t => {
	    console.log(db.Agent)
	      t.truthy(db.Agent, 'Agent service should exist')
	    })````
	    
	    
	```

* **albertodsosa** (1) [318748](https://platzi.com/comentario/318748/) 

	Una libreria buena para generar datos fake es [casual](https://www.npmjs.com/package/casual)

* **Jonathan P√©rez Rodr√≠guez** (1) [285939](https://platzi.com/comentario/285939/) 

	Como s√© cuando un test tiene que ser asincrono?

	* **Ivan Robles** [285939] (4)

		Por ejemplo, cuando testeas que cierta propiedad, variable funci√≥n u objeto existe o cumple con ciertos parametros no necesitas hacer el test as√≠ncrono.
		
		En el caso del **findById** , lo que estariamos haciendo es una petici√≥n con **HTTP** de tipo **GET** por medio del **API** , estas peticiones son **as√≠ncronas** ya que esperan que se resuelva una **promesa** y mientras se resuelve no se debe bloquear la pila de ejecuci√≥n.

* **diegoruizruiz** (1) [274803](https://platzi.com/comentario/274803/) 

	```
	    'use strict'
	    
	    const agent = {
	      id: 1,
	      uuid: 'yyy-yyy-yyy',
	      name: 'fixture',
	      username: 'platzi',
	      hostname: 'test-host',
	      pid: 0,
	      connected: true,
	      createdAt: newDate(),
	      updatedAt: newDate()
	    }
	    
	    const agents = [
	      agent,
	      extend(agent, { id: 2, uuid: 'yyy-yyy-yyw', connected: false, username: 'test' }),
	      extend(agent, { id: 3, uuid: 'yyy-yyy-yyx' }),
	      extend(agent, { id: 4, uuid: 'yyy-yyy-yyz', username: 'test' })
	    ]
	    
	    functionextend (obj, values) {
	      const clone = Object.assign({}, obj)
	      returnObject.assign(clone, values)
	    }
	    
	    module.exports = {
	      single: agent,
	      all: agents,
	      connected: agents.filter(a => a.connected),
	      platzi: agents.filter(a => a.username === 'platzi'),
	      byUuid: id => agents.filter(a => a.uuid === id).shift(),
	      byId: id => agents.filter(a => a.id === id).shift()
	    }
	    
	```
	
	agentFixtures.byId(1)
	
	> undefined

	* **Carlos Enrique Gonzalez Pe√±a** [274803] (0)

		Y los dem√°s si te funcionan, por ejemplo el
		``` 
		    agentFixtures.single
		    
		```
		
		??

* **Manuel Andres Santizo Avila** (1) [243548](https://platzi.com/comentario/243548/) 

	Porque en el archivo de agent-tests.js la funcion se que envia en el Agent#findById es async?

	* **Diego Alexander Forero Higuera (Platzi)** [243548] (2)

		Se necesita por la funcionalidad de findById que sea un llamado as√≠ncrono.

	* **Miguel Angel Gatto** [243548] (4)

		porque se supone que vas a irlo a buscar a otro lado fuera de tu c√≥digo (servicio externo, base de datos, archivo plano), entonces no podes bloquear la pila de ejecuci√≥n de Node esperando la vuelta. Simplemente me imagino en el pr√≥ximo video se implemente todo y ah√≠ sea mas claro.

* **ValfarDeveloper** (0) [326402](https://platzi.com/comentario/326402/) 

	Buscando un buen m√≥dulo para generar informaci√≥n falsa me top√© con este [](https://github.com/marak/Faker.js/)

	* **ValfarDeveloper** [326402] (0)

		<https://github.com/marak/Faker.js/>

* **Victor Roman Garcia Flores** (0) [315599](https://platzi.com/comentario/315599/) 

	Buenos dias, no se puede descargar los archivos , favor de revisar el fallo

	* **Diego Alexander Forero Higuera (Platzi)** [315599] (1)

		Solucionado, gracias por informar del problema.

## 0210. Implementaci√≥n de findbyId y pruebas en el servicio Agent [8337](https://platzi.com/clases/1151-nodejs/8337-implementacion-de-findbyid-y-pruebas-en-el-servici/)

### Descripci√≥n:


### Links:

* [platziverse/platziverse-db at 10-implementacion-findById-agent ¬∑ platzi/platziverse ¬∑ GitHub](https://github.com/platzi/platziverse/tree/10-implementacion-findById-agent/platziverse-db)

### Comentarios:

* **Ezequiel Pablo Galata** (6) [239757](https://platzi.com/comentario/239757/) 

	Si entiendo bien, estaria, algo asi como pisando la funcion del modelo de agente y diciendo que cuando se llame desde el test retorne un objeto definido en un fixture‚Ä¶  
	Ahora, de que sirve decirle que compare el fixture en si con el stub? si no entiendo bien son lo mismo, siempre van a ser iguales‚Ä¶
	
	Todo esto de sobre escribir el modelo y los sandbox y stub, no estoy cachando muy bien‚Ä¶

	* **dedesuy** [239757] (0)

		Somos dos

	* **Ivan Robles** [239757] (4)

		Hola, recuerden que con **proxyquire** , estamos obteniendo los modelos y con base a ellos creando los **stubs** osea que estamos de alguna manera ‚Äúpisando‚Äù el modelo.
		
		Lo que se esta comparando es el Stub de **db.Agent.findById** vs **agentFixture.byId** , que bien si podrian ser diferentes por alg√∫n typo o mala implementaci√≥n (o por azares del destino).
		
		Como es un test, no estamos llamando a la base de datos real por eso que se resuelve la promesa con los **fixtures** obteniendo los datos de los mocks. Pero eso es solo para obtener el resultado de findById, no afecta la comparaci√≥n entre funciones.

	* **Liliana Colls** [239757] (0)

		Entiendo lo de **proxyquire** y los **stubs** (creo)  
		Pero en la linea de
		``` 
		    AgentStub.findById.withArgs(id).returns(Promise.resolve(agentFixtures.findById(id)))
		    
		```
		
		Estoy diciendo que al llamar a este metodo retorne el valor de agentFixtures, no?
		
		Y si luego comparo
		``` 
		    t,deepEqual  (agent, agentFixtures.byId(id)) 
		    
		```
		
		No estar√≠a comparado contra dos objetos iguales?.. ya que Agent para las pruebas se sobrescribe con el valor de AgentStub!
		
		Aun no me queda claro.

	* **Sebastian Cardoso Castillo** [239757] (0)

		Sigo sin entender el prop√≥sito de este test. Siempre va a comprar con el mismo. Creo que tendr√≠a mas sentido guardar el agentFixture con el single que se creo y despu√©s pedir ese objeto con el id del single.  
		Algo as√≠, lo intent√© hacer pero no pude:
		``` 
		    db.Agent.createAgent(single)
		    let agent = await db.Agent.findById(single.id)
		    
		```
		
		De esta manera si estar√≠a testeando que la consulta se hace correctamente.

	* **camiladi** [239757] (3)

		Lo que sucede es que est√°n creyendo que vamos a comparar valores en el test, y es lo menos que queremos hacer ya que no es la finalidad del mismo, el objetivo es que las funciones de servicio de Agent sean correctamente ejecutadas. Estaremos **suponiendo** que en _./lib/agent_ se hizo una b√∫squeda real en la base de datos, ya que no queremos hacer esto le pasamos nuestro **AgentFixtures.byId(id)** de lo contrario, s√≠ tendr√≠amos que hacer la b√∫squeda, y cerciorarnos que ese fixtures sea igual a alg√∫n registro real de Agent, pero recordemos que no nos interesa comparar valores, solo verificar que **.findById** se llamo, se llam√≥ una vez, y se llam√≥ con el id correcto.
		
		Hay que recordar que los fixtures son una abstracci√≥n de nuestra tabla de Agent, para poder trabajar de una forma m√°s c√≥moda y menos compleja.
		
		Podemos hacer lo mismo de la forma tradicional, creando la base datos, mandarle valores de prueba y ver si todo va sucediendo okay, pero recordad que eso requiere tiempo adem√°s de ser ineficiente.
		
		_Cualquier correcci√≥n es bienvenida, reci√©n estoy viendo estos cursos y me ha costado la verdad bastante asimilar todo esto de los test, igual espero que pueda ser de ayuda, para intentar esclarecer este tema a los que les ha costado esta parte tanto como mi._

	* **Fernando Azuaje** [239757] (1)

		Creo que lo que esta probando es si en realidad el servicio de agente funciona como deseamos que funcione y que no tienen ningun bug que nos devulve datos erroneos

* **Jordi Santamar√≠a Portol√©s** (2) [528542](https://platzi.com/comentario/528542/) 

	Nose yo entiendo que estamos comprobando que realmente el metodo findById devuelva AgentModel.findById con el id pasado por parametro, pero ese test no es como muy inutil? para que tendrias que definir la funcion para empezar si sequelize ya la tiene xd, nose me gustaria a parte de aprender a hacer testing, a saber identificar que partes de mi desarollo deberia testear.

	* **Gilbertojpargas94** [528542] (3)

		Lo que pasa es que esta programando con TDD, es por eso que lo hace asi.

	* **William Calder√≥n Castillo** [528542] (2)

		Jordi, la funci√≥n podr√≠a hacer m√°s cosas aparte de hacer lo que t√∫ dices (realmente parece innecesario el findbyid si ya exist√≠a en el modelo). Pero m√≠ralo como un ejemplo muy b√°sico de tdd

* **Luis Castillo** (2) [351149](https://platzi.com/comentario/351149/) 

	Parece mas un curso de test que otra cosa‚Ä¶ y no entiendo por que creamos m√©todos falsos y nunca creamos los verdaderos‚Ä¶

	* **Eduardo Rasgado Ruiz** [351149] (5)

		Hermano, tener la habilidad de implementaci√≥n de pruebas unitarias y en node.js te va a posicionar como un desarrollador valioso para el mercado actual. Muchos empleadores en el extranjero valoran a los desarrolladores que traen un patr√≥n de desarrollo visto a lo largo del curso, es el llamado Test Driven Development.
		
		Todo lo que este curso brinda y se con pr√°ctica seguramente que va a serle una puerta a nuevos caminos a quien lo aproveche.  
		Un saludo compa√±ero!

	* **Eduardo Rasgado Ruiz** [351149] (2)

		Los m√©todos falsos son m√©todos que van a correr en una prueba unitaria espec√≠fica luego de haber hecho una modificaci√≥n al software de la empresa, esto permite comparar el resultado deseado(que obtenemos en la prueba o m√©todo falso como le llamas) con el resultado que ahora tu software est√° entregando con la modificaci√≥n ivolucrada.
		
		Esto para que sirve? En una empresa el software ya es substancia, muchos m√≥dulos, lineas de c√≥digo, un cambio podr√≠a afectar otras partes de tu c√≥digo. El testing manual llevado a cabo por muchas personas, costoso y lento pas√≥ a ser sustituido por las pruebas unitarias. As√≠ dada una modificaci√≥n del software se hacen las pruebas correspondientes de forma r√°pida y barata. En partes donde un testing manual no llegar√≠a.
		
		Bah! Que aburrido! La agencia de software donde he trabajado no hace esas cosas, donde lo voy a ocupar?.. Bueno, aqu√≠ es donde se separan a los programadores por sueldos. lo mismo con las compan√≠a o startups.

* **David Behar** (1) [979637](https://platzi.com/comentario/979637/) 

	Estoy corriendo los tests y fallan, me parece que ya no funciona el sandbox.stub()
	``` 
	      AgentStub.findById=sandbox.stub()
	    
	```
	
	¬øCu√°l ser√≠a el equivalente de la nueva API de sinon?

	* **ferontv_** [979637] (1)

		Lo que cambiar√≠a ser√≠a el valor de sandbox. Ser√≠a `sandbox = sinon.createSandbox()`. Con eso deber√≠a de funcionar correctamente

* **csbeltran** (1) [483048](https://platzi.com/comentario/483048/) 

	Estoy teniedo inconvenientes con la sintaxis, pues al tomar el curso alrededor de un a√±o despu√©s de publicado el curso, actualizan la sintaxis y quedo perdido, desde el video #15 me salen puros errores y deprecated. Pero asi es esta realidad, de estar constantemente revisando las documentaciones.

	* **Gustavo Ram√≠rez Apache** [483048] (1)

		lo estoy tomando un ems despues de esto y no tengo ningu problema

	* **Sepalacio** [483048] (2)

		Tienes que cerciorarte de que version instalas en cada dependencia del proyecto, por ejemplo si instalas en este momento sinon sin ninguna version especifica te va a instalar la ultima version estable. mientras que en el proyecto cuando se grabo se utiliza la version ‚Äúsinon‚Äù: ‚Äú^3.1.0‚Äù. SI no quieres tener problemas verifica cada version de las dependencias del curso e instalas esas mismas, asi no deberias de tener este tipo de problemas. Saludos.

* **Rub√©n Maier Enzler** (1) [392731](https://platzi.com/comentario/392731/) 

	que diferencia tiene le metodo sandbox.spy y sandbox.stub?

	* **Juan David G√≥mez G√≥mez** [392731] (3)

		spy te permite verificar si algo pasa en la prueba, stub te permite definir como se realiza algo en la prueba.

	* **oscar torres g√≥mez** [392731] (1)

		Importante para la integraci√≥n continua, mayormente no se usa en un proyecto convencional, sirve para proyectos con proyecci√≥n, buenas pr√°cticas y automatizaci√≥n en devops c√≥mo el ci. Hay otro curso b√°sico d nodejs, Suerte

* **Carlos A Sanchez** (1) [300644](https://platzi.com/comentario/300644/) 

	Excelente skill Julian, y excelente pedagogia

* **jolivieri** (1) [260432](https://platzi.com/comentario/260432/) 

	Hola, al ejecutar los test se muestra en la consola la siguiente salida:
	``` 
	    Executing (default): SELECT1+1ASresult
	      ‚úî Setup
	    Executing (default): SELECT1+1ASresult
	      ‚úî Agent#findById
	    Executing (default): SELECT1+1ASresult
	      ‚úî Agent
	    
	```
	
	como se puede hacer para eliminar `Executing (default): SELECT 1+1 AS result`
	
	Gracias

	* **Diego Alexander Forero Higuera (Platzi)** [260432] (2)

		Puedes compartir el c√≥digo de tus test para ver que puede estar pasando.

	* **jolivieri** [260432] (1)

		Hola Gollum23.
		
		Estoy siguiendo el curso y el c√≥digo es el mismo de Julian, ya en este momento he avanzado hasta el v√≠deo 22 y el c√≥digo tambi√©n.
		
		Ah√≠ agrego el c√≥digo.
		
		Muchas gracias por tu tiempo
		``` 
		    'use strict'
		    
		    const test = require('ava')
		    const sinon = require('sinon')
		    const proxyquire = require('proxyquire')
		    
		    const agentFixtures = require('./fixtures/agent')
		    
		    let config = {
		      loggin: function () {}
		    }
		    
		    let MetricStub = {
		      belongsTo: sinon.spy()
		    }
		    
		    let single = Object.assign({}, agentFixtures.single)
		    let id = 1
		    let uuid = 'yyy-yyy-yyy'
		    let AgentStub = null
		    let db = null
		    let sandbox = null
		    
		    let uuidArgs = {
		      where: {
		        uuid: uuid
		      }
		    }
		    
		    test.beforeEach(async t => {
		      sandbox = sinon.sandbox.create()
		    
		      AgentStub = {
		        hasMany: sandbox.spy()
		      }
		    
		      // Model findOne Stub
		      AgentStub.findOne = sandbox.stub()
		      AgentStub.findOne.withArgs(uuidArgs).returns(Promise.resolve(agentFixtures.byUuid(uuid)))
		    
		      // Model findByID Stub
		      AgentStub.findById = sandbox.stub()
		      AgentStub.findById.withArgs(id).returns(Promise.resolve(agentFixtures.byId(id)))
		    
		      // Model update Stub
		      AgentStub.update = sandbox.stub()
		      AgentStub.update.withArgs(single, uuidArgs).returns(Promise.resolve(single))
		    
		      const setupDatabase = proxyquire('../', {
		        './models/angent': () => AgentStub,
		        './models/metric': () => MetricStub
		      })
		      db = await setupDatabase(config)
		    })
		    
		    test.afterEach(() => {
		      sandbox && sinon.sandbox.restore()
		    })
		    
		    test('Agent', t => {
		      t.truthy(db.Agent, 'Agent service should exist')
		    })
		    
		    test.serial('Setup', t => {
		      t.true(AgentStub.hasMany.called, 'AgentModel.hastMany was executed')
		      t.true(AgentStub.hasMany.calledWith(MetricStub), 'Argument should be the MetricModel')
		    
		      t.true(MetricStub.belongsTo.called, 'MetricModel.belongsTo was executed')
		      t.true(MetricStub.belongsTo.calledWith(AgentStub), 'Argument should be the AgentModel')
		    })
		    
		    test.serial('Agent#findById', async t => {
		      let agent = await db.Agent.findById(id)
		    
		      t.true(AgentStub.findById.called, 'findById should be called on model')
		      t.true(AgentStub.findById.calledOnce, 'findById should be called once')
		      t.true(AgentStub.findById.calledWith(id), 'findByID should be called with spicified id')
		    
		      t.deepEqual(agent, agentFixtures.byId(id), 'should be the same')
		    })
		    
		    test.serial('Agent#createOrUpdate - exists', async t => {
		      let agent = await db.Agent.createOrUpdate(single)
		    
		      t.deepEqual(agent, single, 'agent should be the same')
		    })
		    
		```

* **luism88** (0) [332667](https://platzi.com/comentario/332667/) 

	Hola, ¬øbajo que criterio se llega a declarar variables o par√°metros con may√∫sculas? Por ejemplo en agent-test.js tenemos una declaraci√≥n **let AgentStub = null** , seguido de **let db = null** entre otras. Supongo que es por el tipo, no lo se.  
	En mi caso siempre utilizo declaraci√≥n de variables con la convenci√≥n ‚ÄúLower Camel Case‚Äù.  
	Saludos.-

	* **Diego Alexander Forero Higuera (Platzi)** [332667] (1)

		En JavaScript por convenci√≥n todas las variables se escriben en lower camel case, y cuando una variable almacena una clase esta tiene la letra inicial may√∫scula para identificar que es un clase y se puede instanciar.

	* **luism88** [332667] (1)

		No estoy de acuerdo con eso. En cualquier lenguaje POO una clase es una definici√≥n de un ‚Äúmodelo‚Äù, por lo tanto no puede estar contenida en una variable, pero si obviamente, una instancia de la misma.  
		No estoy diciendo con esto que ECMAScript 6 sea un lenguaje POO.

	* **Diego Alexander Forero Higuera (Platzi)** [332667] (1)

		Por la forma en que trabaja JavaScript al hacer el import de un archivo lo almacenas en una variable para poder trabajar con el, por eso es la forma de usarlo as√≠.

	* **luism88** [332667] (1)

		Voy a aclarar un poco mas, para que hablemos de lo mismo.  
		Pongo de ejemplo un bloque de codigo del archivo agent-test.js:
		``` 
		    'use strict'
		    
		    const test = require('ava')
		    const sinon = require('sinon')
		    const proxyquire = require('proxyquire')
		    const agentFixtures = require('./fixtures/agent')
		    
		    let config = {
		      logging: function () {}
		    
		    }
		    
		    let MetricStub = {
		      belongsTo : sinon.spy()
		    }
		    
		    let single = Object.assign({},agentFixtures.single)
		    let id = 1
		    let uuid = 'yyy-yyy-yyy'
		    let AgentStub = null
		    let db = null
		    let sandbox = null
		    let uuidArgs = {
		      where:{
		        uuid:uuid
		      }
		    }
		    /*
		    etc...
		    */
		    
		```
		
		1 - Fijate que los **imports** que me dec√≠s, seria la parte de los **requires** que est√°n declarados como constantes y en min√∫sculas.  
		2 - MetricStub y AgentStub estan declaradas en may√∫sculas y las demas variables no.  
		Lo que observo es que no hay diferencias entre **MetricStub** , **AgentStub** y las dem√°s variables como por ejemplo, **single** , **db** , ****config**** , etc. Todas son variables que contienen una instancia.
		
		De ah√≠ viene la duda del criterio.  
		Saludos.-

	* **camiladi** [332667] (1)

		f√≠jate que solo usa upper camel case cuando crea variables de los modelos, en el archivo index.js AgentModel, MetricModel, en agent-test.js cre√≥ sus hom√≥logos, AgentStub y MetricStub.

	* **luism88** [332667] (1)

		Claro, al parecer es por el tipo.

* **alvaritokore** (0) [280833](https://platzi.com/comentario/280833/) 

	Cu√°l es la diferencia entre sandbox.spy() y sandbox.stub() ?

	* **Diego Alexander Forero Higuera (Platzi)** [280833] (1)

		spy te permite verificar si algo pasa en la prueba, stub te permite definir como se realiza algo en la prueba.

* **henrytabimagiraldo** (0) [226064](https://platzi.com/comentario/226064/) 

	a mi no me quiere resolver el beforeEach y me dice lo siguiente
	``` 
	    Rejectedpromisereturnedbytest. Reason:
	    
	      SyntaxError {
	        message: 'Unexpected token function',
	      }
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [226064] (1)

		Tienes un error de sintaxis, puedes poner el traceback completo para ayudarte a detectar el problema.

	* **Ezequiel Pablo Galata** [226064] (0)

		La version de npm/node?

	* **henrytabimagiraldo** [226064] (0)

		Estaba declarando mal la funci√≥n‚Ä¶ se puede decir que era un typo

* **Yonathan Gutierrez** (0) [210199](https://platzi.com/comentario/210199/) 

	me bota este error
	``` 
	    TypeError {
	        message: 'AgentStub.findById.withArgs(...).return is not a function',```
	    
	```

	* **alesanabriav (Platzi)** [210199] (1)

		Revisa que el objeto stub exista o que no haya ning√∫n error en el nombre. Normalmente es eso.

	* **SandroMartinez** [210199] (1)

		Es probable que en tu archivo platziverse-db/tests/fixtures/agent.js en la parte de module.exports tengas la funci√≥n findById declarada con otro nombre; a m√≠ me pas√≥ lo mismo porque la ten√≠a declarada como byId en vez de findById, saludos.

	* **Yonathan Gutierrez** [210199] (0)

		si eso fue un error de tipo, solucionado gracias.

## 0220. Implementaci√≥n de createOrUpdate [8395](https://platzi.com/clases/1151-nodejs/8395-implementacion-de-createorupda-7/)

### Descripci√≥n:


### Links:

* [platziverse/platziverse-db at 11-implementacion-createOrUpdate-agent ¬∑ platzi/platziverse ¬∑ GitHub](https://github.com/platzi/platziverse/tree/11-implementacion-createOrUpdate-agent/platziverse-db)

### Comentarios:

* **marcelobaez** (4) [192433](https://platzi.com/comentario/192433/) 

	Una pregunta: si no implement√≥ la funci√≥n create en el stub, como pasa el test? al invocar el test recibo el mensaje de error ‚ÄúAgentModel.create is not a function‚Äù

	* **marcelobaez** [192433] (4)

		Me respondo solo: el uuid que esta hardcoded mas arriba, debe coincidir con un agente definido previamente en nuestro objeto falso.

	* **Alberto Hern√°ndez L√≥pez** [192433] (0)

		As√≠ es, solo prueba la parte de actualizaci√≥n y no la de creaci√≥n, por lo que no es necesario (para este test) realizar un Stub para create.
		
		üòÑ

	* **Jordi** [192433] (0)

		Me pasa lo mismo y en mi caso coincide, como puedo colocar flags en el c√≥digo de pruebas y ver que valor tiene una variable en un momento dado?

	* **Adonis Perez Perez Farias** [192433] (1)

		justo me habia quedado en ese detalle y luego de repasar mi codigo varias veces me pude topar con que en el servicio de agente habia colodado en el objeto cond lo que era uuid lo habia puesto Uuid y el test no me pasaba porque me salia precisamente ese error de AgentModel.create is not a function.

* **jenapi** (3) [820202](https://platzi.com/comentario/820202/) 

	Al principio me costaba un poco entender esto de TDD y se me hac√≠a tedioso, ahora lo estoy disfrutando

* **waldoaraque** (2) [983094](https://platzi.com/comentario/983094/) 

	Considero que debieron explicar antes de empezar a programar, que iban a hacerlo de forma TDD (Testing Driven Development)‚Ä¶ Y preparar un poco con algo m√°s sencillo, la librer√≠a Ava me da un problema y es error de c√≥digo en la librer√≠a, implementando Jest no es igual, cambia todo.

	* **DavidMG01** [983094] (1)

		A mi tambi√©n me dio error ava y ya no estoy ejecutando mi c√≥digo, s√≥lo estoy copy&paste‚Ä¶ deber√≠a haber un curso TDD con Jest‚Ä¶

* **zaggattoz** (2) [649481](https://platzi.com/comentario/649481/) 

	Error al descargar archivos de clase

	* **Diego Alexander Forero Higuera (Platzi)** [649481] (1)

		Solucionado. Gracias por el reporte.

* **David Montoya Perez** (2) [603147](https://platzi.com/comentario/603147/) 

	Actualmente, Sequelize tiene un metodo llamado `upsert`, que hace lo mismo que el`create or update` de este video. Solo es que se le defina a Sequelize cual es el campo o los campos unicos del modelo.
	
	<http://docs.sequelizejs.com/class/lib/model.js~Model.html#static-method-upsert>

* **Jordi Santamar√≠a Portol√©s** (2) [528628](https://platzi.com/comentario/528628/) 

	Sequelize ya te devuelve el agente al hacer AgentModel.update, deberias simplemente devolver el updated, para que vas a hacer otro findOne o devolver el existente antes de actualizarse.

* **Joaquin Araujo** (2) [228469](https://platzi.com/comentario/228469/) 

	Tengo una pregunta tonta (disculpen) ¬øes recomandable usar ORMs o es mejor usar SQL?

	* **sampol.90 (Platzi)** [228469] (5)

		A mi parecer es mejor usar un ORM, puedes crear modelos, migraciones, etc‚Ä¶  
		Otra ventaja de los ORM‚Äôs es que te facilitan much√≠simo hacer los queries.

	* **Joaquin Araujo** [228469] (0)

		Gracias por tu comentario, a mi parecer tambi√©n opino lo mismo que t√∫ üòÉ

	* **Alejandro Villegas Carvajal** [228469] (2)

		no son excluyentes, puedes elegir cual usar dependiendo del caso, por ejemplo si tu DB es muy grande y tiene muchos JOIN, hacer el query a pelo te puede ayudar un monton en performance del app.

* **Jos√© Ricardo Romo Guti√©rrez** (1) [341298](https://platzi.com/comentario/341298/) 

	Hola, necesito ayuda con este error
	``` 
	    ‚ûú  platziverse-db git:(master) ‚úó npm test
	    
	    > platziverse-db@1.0.0 test /home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-db
	    > DEBUG=platziverse:* nyc --reporter=lcov ava tests/ --verbose
	    
	    
	    /home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-db/tests/fixtures/agent.js:1
	    (function (exports, require, module, __filename, __dirname) { 'use strict';var cov_2niaj76bad=function(){var path="/home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-db/tests/fixtures/agent.js",hash="e04c3a6915b2c92b3f0724d3b98a9441e81c0aa6",Function=function(){}.constructor,global=new Function('return this')(),gcv="__coverage__",coverageData={path:"/home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-db/tests/fixtures/agent.js",statementMap:{"0":{start:{line:3,column:14},end:{line:13,column:1}},"1":{start:{line:15,column:15},end:{line:20,column:1}},"2":{start:{line:23,column:16},end:{line:23,column:38}},"3":{start:{line:24,column:2},end:{line:24,column:37}},"4":{start:{line:27,column:22},end:{line:27,column:27}},"5":{start:{line:28,column:19},end:{line:28,column:25}},"6":{start:{line:29,column:25},end:{line:29,column:56}},"7":{start:{line:29,column:44},end:{line:29,column:55}},"8":{start:{line:30,column:22},end:{line:
	    
	    SyntaxError: Unexpected token export
	        at new Script (vm.js:74:7)
	        at createScript (vm.js:246:10)
	        at runInThisContext (vm.js:298:10)
	        at Object.vm.runInThisContext (/home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-db/node_modules/nyc/node_modules/istanbul-lib-hook/lib/hook.js:142:16)
	        at Module._compile (internal/modules/cjs/loader.js:657:28)
	        at Module.replacementCompile (/home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-db/node_modules/nyc/node_modules/append-transform/index.js:58:13)
	        at module.exports (/home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-db/node_modules/nyc/node_modules/default-require-extensions/js.js:8:9)
	        at /home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-db/node_modules/nyc/node_modules/append-transform/index.js:62:4
	        at extensions.(anonymous function) (/home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-db/node_modules/require-precompiled/index.js:16:3)
	        at /home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-db/node_modules/nyc/node_modules/append-transform/index.js:62:4
	        at require.extensions.(anonymous function) (/home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-db/node_modules/ava/lib/process-adapter.js:100:4)
	        at Object.<anonymous> (/home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-db/node_modules/nyc/node_modules/append-transform/index.js:62:4)
	        at Module.load (internal/modules/cjs/loader.js:599:32)
	        at tryModuleLoad (internal/modules/cjs/loader.js:538:12)
	        at Function.Module._load (internal/modules/cjs/loader.js:530:3)
	        at Module.require (internal/modules/cjs/loader.js:637:17)
	      ‚úñ tests/agent-tests.js exited with a non-zero exit code:1
	    
	      0 tests passed
	      1 uncaught exception
	    
	    npm ERR! Test failed.  See above for more details.
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [341298] (1)

		Tienes un error de digitaci√≥n o sintaxis, puedes compartir tu c√≥digo para ayudarte, creo que el error puede estar en los fixtures.

	* **Jos√© Ricardo Romo Guti√©rrez** [341298] (1)

		este es mi repo

	* **Jos√© Ricardo Romo Guti√©rrez** [341298] (1)

		<https://github.com/MrRomo/platziverse>

	* **Diego Alexander Forero Higuera (Platzi)** [341298] (1)

		Lo que veo en el fixture el profesor exporta as√≠
		``` 
		    module.exports = {
		      single: agent,
		      all: agents,
		      connected: agents.filter(a => a.connected),
		      platzi: agents.filter(a => a.username === 'platzi'),
		      byUuid: id => agents.filter(a => a.uuid === id).shift(),
		      byId: id => agents.filter(a => a.id === id).shift()
		    }
		    
		```
		
		No un export de cada cosa.

* **Ezequiel Pablo Galata** (1) [240577](https://platzi.com/comentario/240577/) 

	Alguno le muestra esta advertencia de sequelize cuando corren los test?:  
	‚Äúsequelize deprecated String based operators are now deprecated. Please use Symbol based operators for better security, read more at ‚Ä¶‚Äù

	* **Diego Alexander Forero Higuera (Platzi)** [240577] (1)

		Si, la librer√≠a se actualizo y va a deprecar los strings, se deben usar ahora s√≠mbolos para evitar problemas de SQL injection.

	* **Jordi** [240577] (0)

		Podeis poner un ejemplo de que simbolo o expresi√≥n utilizar en la declaraci√≥n de un string?
		``` 
		    uuid: {
		         type: Sequelize.STRING,
		         allowNull: false
		       },
		    
		```

	* **Fabi√°n Veliz** [240577] (1)

		Hola, en este [Link](https://github.com/sequelize/sequelize/issues/8417) podes encontrar todos los detalles del issue.
		
		En resumen, desapareci√≥ el warning despu√©s de hacer los siguientes cambios:
		
		  1. En el **index.js** importar `sequelize`:
		
		
		``` 
		    const Sequelize = require('sequelize')
		    
		```
		
		  1. En la parte del **module.exports** definir `Op` y actualizar el objeto `config`:
		
		
		``` 
		    const Op = Sequelize.Op
		    
		      config = defaults(config, {
		        operatorsAliases: Op, // use Sequelize.Op
		        dialect: 'sqlite',
		        pool: {
		          max: 10,
		          min: 0,
		          idle: 10000,
		        },
		        query: {
		          raw: true,
		        }
		      })
		    
		```
		
		Eso es todo üòÑ

	* **Ivan Robles** [240577] (3)

		Gracias Fab√≠an, pensaba dejarlo as√≠ ya que es un warning y sigue funcionando, pero al final si lo modifiqu√©, utilic√© la asignaci√≥n por destructuring en lugar de usar:  
		**const Op = Sequelize.Op;**
		
		Lo escrib√≠ as√≠:
		``` 
		    const { Op } = Sequelize;
		    
		```

* **Jos√© Ricardo Romo Guti√©rrez** (1) [38170](https://platzi.com/comentario/341298/) 
Hola, necesito ayuda con este error ‚ûú platziverse-db git:(master) ‚úó npm test > platziverse-db@1.0.0 test /home/mrromo/Document...

	* **Diego Alexander Forero Higuera (Platzi)** [38170] (1)

		Tienes un error de digitaci√≥n o sintaxis, puedes compartir tu c√≥digo para ayudarte, creo que el error puede estar en los fixtures.

* **WILMER ARLEY CAMPA√ëA DIAZ** (0) [302292](https://platzi.com/comentario/302292/) 

	Si alguien tiene el siguiente error:
	``` 
	    SyntaxError {
	        message: 'await is only valid in async function',
	      }
	    
	```
	
	Se resuelve colocando el async en:
	``` 
	    module.exports = functionsetupAgent(AgentModel) {
	        asyncfunctioncreateOrUpdate (agent) {
	            const cond = {
	                where: {
	                    uuid: agent.uuid
	                }
	            }
	    
	```
	
	En el modulo de agent.js que se tiene en la carpeta lib

* **Sebastian Cardoso Castillo** (0) [302097](https://platzi.com/comentario/302097/) 

	¬øLa propiedad _findOrCreate_ de Sequelize funciona para sqlite? ¬øLa funcion de spread para esa propiedad esta depreciada?

* **Gabriel Trabanco Llano** (0) [276537](https://platzi.com/comentario/276537/) 

	Incluso copiando y pegando el c√≥digo, solo me hace 2 de los 3 test definidos. Un poco extra√±o, ¬øno?

* **Miguel Angel Gatto** (0) [256154](https://platzi.com/comentario/256154/) 

	Una duda que me surgi√≥, porque en agent-tests usamos defaults para copiar los valores que no est√°n, y en el agentFixtures utilizamos esta funci√≥n, no terminan haciendo lo mismo?
	``` 
	    functionexpand(obj, modif) {
	      const clone = Object.assign({}, obj)
	      returnObject.assign(clone, modif)
	    }
	    
	```

	* **Fabi√°n Veliz** [256154] (1)

		Buenas! Parecen hacer lo mismo, pero no. `defaults` s√≥lo agrega o escribe las propiedades que no est√°n definidas.  
		Si reemplazamos `expand` por `defaults` obtendriamos un **objeto igual** al **agent** porque las props que intentamos sobreescribir: `id`, `uuid`, etc. ya est√°n definidas.  
		Espero se entienda, saludos üòÑ

## 0230. Revisi√≥n del servicio Agent [8338](https://platzi.com/clases/1151-nodejs/8338-revision-del-servicio-agent/)

### Descripci√≥n:


Ya aprendimos a implementar pruebas unitarias. Ahora haremos la revisi√≥n de las funciones que implementamos para entender c√≥mo se cre√≥ el servicio completo.

Para implementar las pruebas de las funciones se definen unos argumentos que se reutilizan para trabajar con nuestros _stubs_ , y creamos unas nuevas tambi√©n.

### Links:

* [platziverse/platziverse-db at 12-revision-servicio-agent ¬∑ platzi/platziverse ¬∑ GitHub](https://github.com/platzi/platziverse/tree/12-revision-servicio-agent/platziverse-db)

### Comentarios:

* **Jos√© Iv√°n Sandoya** (2) [222314](https://platzi.com/comentario/222314/) 

	Consulta: por qu√© la funci√≥n **_createOrUpdate_** , a diferencia de las dem√°s funciones del servicio en **agent.js** es as√≠ncrona (y por qu√© las dem√°s no lo son?).

	* **Edwin Valencia** [222314] (8)

		Hola Ivan porque el m√©todo findOne dentro del servicio agent.js devuelve una promesa, entonces se usa async-await para **resolverla** y devolver el valor sin necesidad de hacer .then(function(data) { / Aqu√≠ se accede a la informaci√≥n o a la data que devuelve la promesa */ }) y con eso se puede hacer el if y validar si el agente existe

	* **Jos√© Iv√°n Sandoya** [222314] (0)

		Genial! muchas gracias Edwin por tu respuesta!

* **Angel Hernandez** (1) [873115](https://platzi.com/comentario/873115/) 

	Creo que en este momento el codigo se pone mucho mas tedioso a que si fuera con procedimientos almacenados

* **Deyvis Neyser Valdez Gavilan** (1) [809901](https://platzi.com/comentario/809901/) 
	
	![23. Test realizado con exito.PNG](https://static.platzi.com/media/user_upload/23.%20Test%20realizado%20con%20exito-a9c3ba7f-6c62-4aae-b81a-6f0fbd18a7c5.jpg)

* **Jose Vinicio Flores Arias** (1) [259956](https://platzi.com/comentario/259956/) 

	Alguien sabe por que no se me actualiza el code coverage no me salen todos mis test alguna sugerencia ?

* **cguzman** (1) [205864](https://platzi.com/comentario/205864/) 

	Buen d√≠a, en este punto me surgi√≥ una inquietud muy grande que a√∫n no resuelvo, espero hacerme entender y que alguien pueda explicarme:
	
	Cuando implementamos el Hook beforeEach () que se supone se ejecuta antes de cada prueba, definimos el comportamiento del m√©todo; `AgentStub.findOne = sandbox.stub() AgentStub.findOne.withArgs(uuidArgs).returns(Promise.resolve(agentFixtures.byUuid(uuid)))`
	
	donde se envia como par√°metro el `uuid:yyy-yyy-yyy` y se condiciona el m√©todo para devolver el objeto resultante de la b√∫squeda de agent.fixtures.ByUuid(uuid) cuando coincida su uuid.
	
	Hasta all√≠ todo Esta bien ‚Ä¶
	
	Cuando se implement√≥ el test a continuaci√≥n,
	
	`test.serial(‚ÄòAgent.createOrUpdate When Agent Dont Exist‚Äô, async (t) => {  
	let agent = await db.Agent.createOrUpdate(newAgent)  
	t.true(AgentStub.findOne.called, ‚ÄòfindOne should be called on model‚Äô)  
	t.true(AgentStub.findOne.calledOnce, ‚ÄòfindOne should be called once‚Äô)  
	t.true(AgentStub.findOne.calledWith({  
	where: { uuid: newAgent.uuid }  
	}), ‚ÄòfindOne should be called with uuid args‚Äô)  
	t.true(AgentStub.create.called, ‚Äòcreate should be called on model‚Äô)  
	t.true(AgentStub.create.calledOnce, ‚Äòcreate should be called once‚Äô)  
	t.true(AgentStub.create.calledWith(newAgent), ‚Äòcreate should be called with specified args‚Äô)
	
	t.deepEqual(agent, newAgent, ‚Äòagent should be the same‚Äô)  
	})  
	`
	
	no se supone que cuando se llame el m√©todo findOne(), al tener predefinida una condici√≥n y su respectiva respuesta deber√≠a entrar en el condicional:  
	`if (existingAgent) { const updated = await AgentModel.updated(agent, cond) // Early Return! return updated ? AgentModel.findOne(cond) : existingAgent }`
	
	Y finalmente salir antes de ejecutar el m√©todo cr√©ate?.. Acaso de no es necesario definir un comportamiento diferente para el m√©todo findOne cuando se desee un Agente nuevo ?
	
	Noto que los test pasan, pero no entiendo el porque si el flujo del c√≥digo deber√≠a ser diferente (Deber√≠a es mi posici√≥n subjetiva, debo estar herrado en el concepto)‚Ä¶
	
	Si alguien logr√≥ comprenderlo agradezco de antemano su colaboraci√≥n.

	* **Jonathan Jim√©nez** [205864] (1)

		Buenas Cguzman,
		
		si te das cuenta, cuando realizas el test, le estas diciendo que el uuid que quieres buscar es el que se encuentra en el newAgent, el cual es diferente a cualquier uuid que tenemos en los mocks, por lo que al hacer el findOne, este no encuentra ninguna coincidencia, sin embargo, lo que el test prueba es que findOne se llame con los argumentos de newAgent, los cuales son correctos
		``` 
		    t.true(AgentStub.findOne.calledWith({
		        where: { uuid: newAgent.uuid }
		      }), 'findOne should be called with uuid args')
		    
		```
		
		en cuanto al flujo del c√≥digo, al no encontrar ese dato en el mock, existingAgent es ‚Äúfalse‚Äù por lo que no entra en ese condicional, por lo que puede llegar a ejecutar el m√©todo create.
		
		espero haber resuelto tu duda.
		
		saludos,

	* **Jordi** [205864] (0)

		Quieres decir que deber√≠a de ser as√≠?
		``` 
		    let newAgentUuidArgs = {
		    	where: {
		    		uuid: newAgent.uuid
		    	}
		    }
		    
		    test.beforeEach(async () => {
		    
		    AgentStub.findOne = sandbox.stub()
		    	AgentStub.findOne.withArgs(uuidArgs).returns(Promise.resolve(agentFixtures.findByUuid(uuid)))
		    	AgentStub.findOne.withArgs(newAgentUuidArgs).returns(Promise.resolve(agentFixtures.findByUuid(newAgent.uuid)))
		    
		```

	* **Jordi** [205864] (0)

		Ya lo entend√≠, si no colocas ningun m√©todo retorna undefined como resultado, antes coloc√°bamos el return de la promesa porque sin √©l no pod√≠a entrar en el if, tampoco pueden usar el m√©todo toJson sin la promesa.

* **Wilmer Javier Garz√≥n Cabezas** (0) [258323](https://platzi.com/comentario/258323/) 

	Buenas noches, actualmente ando enfrenatdo a este error, y las funciones estan tomando lo que retorna la de agent.js ![](![Captura de pantalla 2018-02-13 a la\(s\) 6.53.27 p. m. \(2\).png](https://static.platzi.com/media/user_upload/Captura%20de%20pantalla%202018-02-13%20a%20la%28s%29%206.53.27%20p.%20m.%20%282%29-15e9b8ae-0dcb-45a2-b596-418dfc34a0b8.jpg)

	* **Diego Alexander Forero Higuera (Platzi)** [258323] (1)

		Es necesario ver el c√≥digo para poder ayudarte, as√≠ es muy dif√≠cil.
		
		Si puedes compartir de preferencia un repo en github te podemos ayudar de una mejor manera.

* **Manuel Andres Santizo Avila** (0) [245091](https://platzi.com/comentario/245091/) 

	Porque ahora ya no me sale en esa carpeta la etiqueta de [master] en la terminal? alguna idea o posible causa?

	* **Diego Alexander Forero Higuera (Platzi)** [245091] (1)

		Te salia antes? estas en la carpeta correcta? borraste la carpeta `.git`?

	* **Manuel Andres Santizo Avila** [245091] (0)

		en la carpeta raiz del repositorio si esta en el .git pero antes me salia en las subcarpetas, ahora no‚Ä¶

* **Edgar Valdez Moises** (0) [199102](https://platzi.com/comentario/199102/) 

	Se podr√≠a separar los args de los queries para reutilizarlos tanto para las pruebas como para los servicios ?  
	O esto ir√≠a en contra de la filosof√≠a de node ?

## 0240. Implementaci√≥n del servicio Metric [8339](https://platzi.com/clases/1151-nodejs/8339-implementacion-del-servicio-metric/)

### Descripci√≥n:


El servicio **Agent** lo que hace es reportar unas m√©tricas cada cierto tiempo. Para implementar el servicio **Metric** vamos a necesitar tres funciones as√≠ncronas:

**\- create:** Que va a recibir dos par√°metros: el ID del agente y la m√©trica.  
**\- findByAgentUuis:** En el que vamos a hacer una consulta que va a buscar todas las m√©tricas cuyo AgentId es igual al  
**\- findByTypeAgentUuid:** Que va a buscar por tipo de m√©trica y por AgentId.

## Reto #1:

¬øC√≥mo implementar√≠as las pruebas de Metric? Comparte tu soluci√≥n en el sistema de discusiones o haz un pull request al repositorio del proyecto.

### Links:

* [platziverse/platziverse-db at 13-implementacion-servicio-metric ¬∑ platzi/platziverse ¬∑ GitHub](https://github.com/platzi/platziverse/tree/13-implementacion-servicio-metric/platziverse-db)

### Comentarios:

* **Rodman M. Swanston C.** (5) [191840](https://platzi.com/comentario/191840/) 

	Desafi√≥ listo.
	
	[Repo](https://github.com/RodSwanston/platziverse/tree/13-implementacion-servicio-metric/platziverse-db)
	
	[Pull Request](https://github.com/platzi/platziverse/pull/1)

	* **Miguel Angel Gatto** [191840] (0)

		Gracias por el repo, la verdad estaba trabado en como incluir los args del join el model de AgentStub. Y no sab√≠a ni como escribirlo para buscarlo en google, me frustr√≥ bastante.  
		Tuve que ver tu c√≥digo y sacarlo de ah√≠.  
		Saludos

	* **luisrangelc** [191840] (1)

		Gracias Rodman_sw
		
		comparto:
		
		[Repo](https://github.com/lrangelc/platziverse/tree/master/platziverse-db)

	* **luisrangelc** [191840] (1)

		Soy mas de la vieja escuela. Utilizo semistandard que utiliza standard pero agrega ; y utilizando sequelize tengo cuando creo las tablas:  
		underscored: true,  
		freezeTableName: true,
		
		con esto crea la tabla en singular.
		
		[Repo](https://github.com/lrangelc/platziverse/tree/master/platziverse-db)

* **DavidMG01** (2) [1006039](https://platzi.com/comentario/1006039/) 

	En el return de findByAgentUuid y findByTypeAgentUuid deber√≠a haber un await‚Ä¶ no?..
	
	`async function findByAgentUuid (uuid) { return await MetricModel.findAll({...`

* **Byron Mesias Cueva Cabrera** (2) [982444](https://platzi.com/comentario/982444/) 

	Reto cumplido, [aca el c√≥digo](https://github.com/byron7cueva/backend-javascript/tree/master/node-avanzado/platziverse-db)  
	![reto.png](https://static.platzi.com/media/user_upload/reto-d8fab7d3-d31f-4782-823d-adc5ab9c1089.jpg)

* **Omar del Real** (2) [846286](https://platzi.com/comentario/846286/) 

	En fixtures en vez de usar la funci√≥n extend podemos hacerlo de la siguiente manera tambien, usando spread syntax:
	``` 
	    const agents = [
	      agent,
	      { ...agent, id: 2, uuid: 'yyy-yyy-yyw', connected: false, username: 'test' },
	      { ...agent, id: 3, uuid: 'yyy-yyy-yyx' },
	      { ...agent, id: 4, uuid: 'yyy-yyy-yyz', username: 'test' }
	    ]
	    
	```
	
	Un saludo üòâ

* **Gerardo Guti√©rrez** (2) [295489](https://platzi.com/comentario/295489/) 

	Aqui mi respuesta, la verdad me tomo mucho tiempo entener como hacerlo, pero con la ayuda de los demas pude lograrlo.
	
	[git](https://github.com/gerzang/platziverse/tree/master/platziverse-db)

* **David Behar** (1) [981643](https://platzi.com/comentario/981643/) 

	## Ac√° el c√≥digom con comentarios
	``` 
	    asyncfunctionfindByTypeAgentUuid (type, uuid) {
	      return MetricModel.findAll({
	        attributes: [ 'id', 'type', 'value', 'createdAt' ], // Los atributos que se van a regresar en el SELECT -->id, type, value, createdAt<-- FROM table
	        where: { // SELECT xxxx FROM yyyy WHERE -->type = type<--
	          type
	        },
	        limit: 20,
	        order: [[ 'createdAt', 'DESC' ]],
	        include: [{ // Join
	          attributes: [],
	          model: AgentModel,
	          where: {
	            uuid
	          }
	        }],
	        raw: true// return in JSON
	      })
	    }
	    
	```

* **David Behar** (1) [981604](https://platzi.com/comentario/981604/) 

	## ¬ø Por qu√© prefiri√≥ hacer
	``` 
	    Object.assign(metric, {agentId: agent.id})
	    
	```
	
	Env√©s de
	``` 
	    metric.agentId = agent.id
	    
	```
	
	## Si la segunda se entiende mejor y es menos c√≥digo?

* **Deyvis Neyser Valdez Gavilan** (1) [817015](https://platzi.com/comentario/817015/) 

	Esta es mi implementaci√≥n del servicios de M√©tricas, con fe!  
	[GitHub](https://github.com/deyvisnvg/platziverse/tree/master/platziverse-db/tests)

* **GerAlfonso** (1) [355544](https://platzi.com/comentario/355544/) 

	Reto completado:  
	[Repo](https://github.com/geralfonso/platziverse/tree/master/platziverse-db/tests)

* **Enzo Aliatis** (1) [194808](https://platzi.com/comentario/194808/) 

	Desaf√≠o listo fuertemente guiado por Rodman_sw, muchas gracias
	
	[GitRepo](https://github.com/EnzoAliatis/Platziverse/tree/master/platziverse-db/tests)
	
	principales diferencias en los fixtures/metric

	* **Enzo Aliatis** [194808] (1)

		fixtures/metrics
		``` 
		    module.exports = {
		      single: metric,
		      all: metrics,
		      byAgentUuid: uuid => metrics.filter(a => a.agentId === uuid),
		      byTypeAgentUuid: (type, uuid) => metrics.filter(a => a.type === type).filter(a => a.Agentid === uuid).sort(function (a, b) {
		        returnnew Date(b.date) - new Date(a.date)
		      })
		    }```
		    
		```

	* **jsteven** [194808] (0)

		Lo √∫nico es que byAgentUuid solo debe retornar los tipos y byTypeAgentUuid debe retornar los atributos puntuales.  
		Esto fue lo que yo hice:
		``` 
		    byAgentUuid: uuid => metrics.filter(a => a.agent['uuid'] === uuid).map(b => b.type).filter((v, i, a) => a.indexOf(v) === i),
		      byTypeAgentUuid: (type, uuid) => metrics.filter(a => a.type === type && a.agent['uuid'] === uuid)
		                          .map(b => {
		                            const m = {
		                              id: b.id,
		                              type: b.type,
		                              value: b.value,
		                              createdAt: b.createdAt
		                            }
		                            return m
		                          }).sort((a,b) => {
		                            returnnewDate(b.date) - newDate(a.date);
		                          })
		    
		    
		```

* **Jose Berna** (0) [302318](https://platzi.com/comentario/302318/) 
	
	![Captura de pantalla 2018-05-20 a la\(s\) 5.04.12 p. m..png](https://static.platzi.com/media/user_upload/Captura%20de%20pantalla%202018-05-20%20a%20la%28s%29%205.04.12%20p.%20m.-1b8bd5a5-dcef-48a4-9d71-886bc8a2aab1.jpg)
	
	me pueden colaborar con este error?

	* **Diego Alexander Forero Higuera (Platzi)** [302318] (1)

		Comparte tu c√≥digo por favor, sin ver tu c√≥digo es dif√≠cil saber el problema exacto.

	* **Jose Berna** [302318] (0)

		<https://github.com/EslavaDev/EslavaDeverse/tree/master/EslavaDeverse-db/tests>

* **Jose Berna** (0) [302273](https://platzi.com/comentario/302273/) 

	como seria si necesito hacer diversos joins?

* **Jonathan P√©rez Rodr√≠guez** (0) [288144](https://platzi.com/comentario/288144/) 

	Aqu√≠ est√° mi soluci√≥n al reto, la verdad le sufr√≠ un poco.  
	[Solucion](https://github.com/6Jonathan6/platziverse/tree/master/platziverse-db/tests)

* **Jonathan P√©rez Rodr√≠guez** (0) [288142](https://platzi.com/comentario/288142/) 

	Por qu√© apesar de que findByTypeAgentUuid es una funcion asincocrona hacemos un return en vez de await de la funcion findByTypeAgentUuid que hasta donde tengo entendido retorna una promesa?
	
	ya le cambie el return por await y no funciona pero me gustaria saber porque pasa esto.
	``` 
	    asyncfunctionfindByTypeAgentUuid (type, uuid) {
	        return MetricModel.findAll({
	          attributes: ['id', 'type', 'value', 'createdAt'],
	          where: {
	            type
	          },
	          limit: 20,
	          order: [['createdAt', 'DESC']],
	          include: [{
	            attributes: ['uuid'],
	            model: AgentModel,
	            where: {
	              uuid
	            },
	            raw: true
	          }]
	        })
	      }```
	    
	```

* **chepix10** (0) [275520](https://platzi.com/comentario/275520/) 

	Saludos a todos y buena suerte en el desafio. Les dejo mi implementaci√≥n por ac√°:
	
	[GitHub](https://github.com/chepix10/platziverse/tree/implementacion-servicio-metric/platiziverse-db/tests)

* **Jose Vinicio Flores Arias** (0) [259971](https://platzi.com/comentario/259971/) 

	Y es aqui donde me doy cuenta que necesito saber mas de Node üò¶ buena suerte chicos y gracias a los que ya lo hicieron ‚ù§Ô∏è

	* **Walter Lensinas** [259971] (0)

		No es un tema de node, estos son temas de pruebas usando avajs y sinon.

* **Manuel Andres Santizo Avila** (0) [245133](https://platzi.com/comentario/245133/) 

	Una pregunta, el createdAt y updatedAt no se encuentra en nuestros modelos, donde es que se van a almacenar? creo que estoy algo perdido ahi‚Ä¶

	* **Diego Alexander Forero Higuera (Platzi)** [245133] (2)

		sequelize agrega esos campos por defecto a cualquier modelo que crees usando sequelize.

* **Jesus Africano** (0) [224781](https://platzi.com/comentario/224781/) 

	Completado! üòÑ
	
	[Repo](https://github.com/elafrikano/platziverse/tree/5adbdf68e28b2c8afe12d02e7f4369f363a7cd56)

* **jsteven** (0) [214665](https://platzi.com/comentario/214665/) 

	Aqu√≠ est√° mi soluci√≥n, los fixtures solo devuelven lo que se requiere:  
	[Repositorio](https://github.com/stevenyepes/platziverse/tree/master/platziverse-db/tests)

* **Dobleve Tres** (0) [200540](https://platzi.com/comentario/200540/) 

	Complete !  
	<https://github.com/mrTater/platziverse/tree/master/platziverse-db/tests>
	``` 
	    <code>
	    
	```

## 0250. Realizando un ejemplo con el m√≥dulo de base de datos [8340](https://platzi.com/clases/1151-nodejs/8340-realizando-un-ejemplo-con-el-modulo-de-base-de-dat/)

### Descripci√≥n:


Ahora vamos a crear un _script_ con el modelo que hicimos para interactuar directamente con la base de datos.

### Links:

* [platziverse/platziverse-db at 14-ejemplo-modulo-db ¬∑ platzi/platziverse ¬∑ GitHub](https://github.com/platzi/platziverse/tree/14-ejemplo-modulo-db/platziverse-db)

### Comentarios:

* **Antonio Espinoza Reyes** (3) [618516](https://platzi.com/comentario/618516/) 

	Julian puedes generar un ejemplo de como seria con un Delete?

* **ivanruiz__** (1) [583579](https://platzi.com/comentario/583579/) 

	No funciona la descarda de recursos ni en este video ni en el anterior.

	* **sampol.90 (Platzi)** [583579] (1)

		Desde que dispositivo est√°s tratando de descargarlos ?

	* **Diego Alexander Forero Higuera (Platzi)** [583579] (1)

		Hola es un enlace al repositorio de GitHub y puedes descargarlo desde all√≠ sin problema.

* **Fernando Azuaje** (1) [569729](https://platzi.com/comentario/569729/) 

	la columna agentId en metrics no me esta guardando el ID de agent a alguien mas le pasa?

	* **Fernando Azuaje** [569729] (1)

		me habia comido un await en la implementacion de lo servicios üòÉ

* **Andres.F.Delgado** (1) [351674](https://platzi.com/comentario/351674/) 

	Hola comunidad, estoy teniendo un problema, quiero usar el mismo modulo de base de datos en una api con graphql, pero cuando importo la librer√≠a y le paso la configuraci√≥n se borra la base de datos, cada vez que reinicio el servidor se borra la base de datos, estoy importando el archivo db/index.js
	``` 
	    const fixtures = require('./fixtures')
	    const config = require('../config-db')()
	    const db = require('../db')
	    
	    let User, Project
	    
	    db(config).then(dbInstance => {
	      User = dbInstance.User
	      Project = dbInstance.Project
	    })
	    
	    
	    const resolvers = {
	      Query: {
	        users: () => fixtures.users,
	        user: (_, args) => fixtures.getUserByEmail(args.email),
	        projects: () => fixtures.projects,
	        project: (_, args) => fixtures.getProjectByid(args.id)
	      },
	      Mutation: {
	        userCreate: (_, args) => User.create(args.user)
	      }
	    }
	    
	    module.exports = resolvers
	    
	```

	* **Andres.F.Delgado** [351674] (1)

		Estoy usando nodemon, y este es mi servidor.
		``` 
		    const express = require('express')
		    const { ApolloServer } = require('apollo-server-express')
		    const schema = require('./schema')
		    const app = express()
		    const PORT = 3000
		    
		    const server = new ApolloServer({ schema })
		    
		    server.applyMiddleware({ app })
		    
		    app.listen({ port: PORT }, () =>
		      console.log(`üöÄ Server ready at http://localhost:${PORT}${server.graphqlPath}`)
		    )
		    
		    
		```

	* **Andres.F.Delgado** [351674] (1)

		este es mi index.
		``` 
		    'use strict'
		    
		    const dbInstance = require('./lib/db')
		    
		    const setupUserModel = require('./models/user')
		    const setupProjectModel = require('./models/project')
		    
		    const setupUser = require('./lib/user')
		    const setupProject = require('./lib/project')
		    
		    module.exports = asyncfunction (config) {
		    
		      const sequelize = dbInstance(config)
		      const UserModel = setupUserModel(config)
		      const ProjectModel = setupProjectModel(config)
		    
		      UserModel.hasMany(ProjectModel)
		      ProjectModel.belongsTo(UserModel)
		    
		      await sequelize.authenticate()
		    
		      if (config.setup) {
		        await sequelize.sync({ force: true })
		      }
		    
		      const User = setupUser(UserModel)
		      const Project = {}
		    
		      return {
		        User,
		        Project
		      }
		    }
		    
		```

	* **Andres.F.Delgado** [351674] (1)

		Tengo entendido que cada vez que se ejecuta index se borra la base de datos igual que en el script de setup.
		
		Les agradecer√≠a mucho si pudieran ayudarme.

	* **Diego Alexander Forero Higuera (Platzi)** [351674] (1)

		revisa que en el objeto de configuraci√≥n del setup pongas setup a false una vez creas la base de datos por primera vez.

* **ignacioaredez** (1) [227910](https://platzi.com/comentario/227910/) 

	Tengo una duda porque al crear los agentes si bien me los imprime dos veces los impreme dos veces con el id: 1

	* **alesanabriav (Platzi)** [227910] (0)

		Hola Ignacio, las bases de datos si el ID es el primary key no va a guardar y te arroja un error de duplicado, nos podr√≠as mostrar el c√≥digo, as√≠ te podemos ayudar mejor.

	* **Luis Daniel Becerra Avellaneda** [227910] (0)

		Me pasa lo mismo, lo has podido solucionar?

	* **ignacioaredez** [227910] (0)

		No lo recuerdo la verdad pero quiero realizar el curso de neuivo desde 0 asi qeu cuando llege a esta parte te aviso. Un saludo

* **Fernando Azuaje** (1) [57859](https://platzi.com/comentario/569729/) 
la columna agentId en metrics no me esta guardando el ID de agent a alguien mas le pasa?

	* **Fernando Azuaje** [57859] (1)

		me habia comido un await en la implementacion de lo servicios üòÉ

* **Sebastian Cardoso Castillo** (0) [302128](https://platzi.com/comentario/302128/) 

	¬øC√≥mo puedo nombrar a una m√≥dulo donde guardo los datos que se crean autom√°ticamente cuando hago el setup de la base de datos? ¬øEs buena pr√°ctica usar otra copia de la base de datos para testeo? ¬øUsar√≠a postgres o sqlite?

	* **Diego Alexander Forero Higuera (Platzi)** [302128] (3)

		Por lo general se llaman fixture, es una buena practica trabajar con el entorno lo m√°s parecido a producci√≥n, por ejemplo usar el mismo motor de base de datos ya que hay caracter√≠sticas de algunos motores de bases de datos que no est√°n disponibles en otros, por lo tanto si tu aplicaci√≥n en producci√≥n va a correr con postgres usa la misma base de datos en desarrollo.

* **Diego Antonio Bocanegra Galindez** (0) [279408](https://platzi.com/comentario/279408/) 

	Tengo este error  
	Executing (default): SELECT 1+1 AS result  
	Executing (default): SELECT ‚Äúid‚Äù, ‚Äúuuid‚Äù, ‚Äúusername‚Äù, ‚Äúname‚Äù, ‚Äúhostname‚Äù, ‚Äúpid‚Äù, ‚Äúconnected‚Äù, ‚ÄúcreatedAt‚Äù, ‚ÄúupdatedAt‚Äù FROM ‚Äúagents‚Äù AS ‚Äúagent‚Äù WHERE ‚Äúagent‚Äù.‚Äúuuid‚Äù = ‚Äòyyy‚Äô LIMIT 1;  
	column ‚Äúconnected‚Äù does not exist  
	SequelizeDatabaseError: column ‚Äúconnected‚Äù does not exist  
	at Query.formatError (/home/hades/Git/Platziverse/platziverse-db/node_modules/sequelize/lib/dialects/postgres/query.js:363:16)

	* **Diego Antonio Bocanegra Galindez** [279408] (1)

		Lo solucione corriendo el comando:
		``` 
		    npm runsetup
		    
		```

	* **Navarrock33** [279408] (1)

		hola, tengo un error parecido, solo que en vez de ‚Äúconected‚Äù decia ‚Äúagents‚Äù, al igual que tu ejecute el comando npm run setup, pero ahora me aparece: permiso denegado a la tabla agents

* **Jordi** (0) [253487](https://platzi.com/comentario/253487/) 

	¬øC√≥mo sabe la join que debe de realizarse con el AgentId y el id?
	``` 
	    Executing (default): SELECT"metric"."type"FROM"metrics"AS"metric"INNERJOIN"agents"AS"agent"ON"metric"."agentId" = "agent"."id"AND"agent"."uuid" = 'yyy'GROUPBY"type";
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [253487] (1)

		los par√°metros que est√°n luego del `ON` son los que se comparan o igualan para saber que registros traer en este caso que el agentId de la tabla metric sea igual al id de la tabla agent

	* **Jordi** [253487] (0)

		Sisi, me refiero en el c√≥digo de javascript como enlaza esos par√°metros.

* **Manuel Andres Santizo Avila** (0) [250657](https://platzi.com/comentario/250657/) 

	Una pregunta, en la ultima parte estoy obteniendo este error al utilizar
	``` 
	    const metricsByType = await Metric.findByTypeAgentUuid('memory',agent.uuid).catch(handleFatalError)
	    
	```
	
	Obtengo este error:
	``` 
	    Executing (default): SELECT "Metric"."id", "Metric"."type", "Metric"."value", "Metric"."createdAt", "Agent"."id" AS "Agent.id", "Agent"."uuid" AS "Agent.uuid", "Agent"."username" AS "Agent.username", "Agent"."name" AS "Agent.name", "Agent"."hostname" AS "Agent.hostname", "Agent"."pid" AS "Agent.pid", "Agent"."connected" AS "Agent.connected", "Agent"."createdAt" AS "Agent.createdAt", "Agent"."updatedAt" AS "Agent.updatedAt" FROM "Metrics" AS "Metric" INNER JOIN "Agents" AS "Agent" ON "Metric"."AgentId" = "Agent"."id" AND "Agent"."uuid" = 'yyy-yyy-yyr' WHERE "Metric"."type" = 'memory' ORDER BY "Metric"."createdAt" DESC LIMIT 20;
	    result.get is not a function
	    TypeError: result.get is not a function
	        at Model._findSeparate.results.reduce (/Users/Manu/Desktop/Platzi/NodeJsAvanzado/platziverse/platziverse-db/node_modules/sequelize/lib/model.js:1650:39)
	        at Array.reduce (<anonymous>)
	        at Promise.map.include (/Users/Manu/Desktop/Platzi/NodeJsAvanzado/platziverse/platziverse-db/node_modules/sequelize/lib/model.js:1649:19)
	        at tryCatcher (/Users/Manu/Desktop/Platzi/NodeJsAvanzado/platziverse/platziverse-db/node_modules/bluebird/js/release/util.js:16:23)
	        at MappingPromiseArray._promiseFulfilled (/Users/Manu/Desktop/Platzi/NodeJsAvanzado/platziverse/platziverse-db/node_modules/bluebird/js/release/map.js:61:38)
	        at MappingPromiseArray.PromiseArray._iterate (/Users/Manu/Desktop/Platzi/NodeJsAvanzado/platziverse/platziverse-db/node_modules/bluebird/js/release/promise_array.js:114:31)
	        at MappingPromiseArray.init (/Users/Manu/Desktop/Platzi/NodeJsAvanzado/platziverse/platziverse-db/node_modules/bluebird/js/release/promise_array.js:78:10)
	        at MappingPromiseArray._asyncInit (/Users/Manu/Desktop/Platzi/NodeJsAvanzado/platziverse/platziverse-db/node_modules/bluebird/js/release/map.js:30:10)
	        at Async._drainQueue (/Users/Manu/Desktop/Platzi/NodeJsAvanzado/platziverse/platziverse-db/node_modules/bluebird/js/release/async.js:138:12)
	        at Async._drainQueues (/Users/Manu/Desktop/Platzi/NodeJsAvanzado/platziverse/platziverse-db/node_modules/bluebird/js/release/async.js:143:10)
	        at Immediate.Async.drainQueues (/Users/Manu/Desktop/Platzi/NodeJsAvanzado/platziverse/platziverse-db/node_modules/bluebird/js/release/async.js:17:14)
	        at runCallback (timers.js:789:20)
	        at tryOnImmediate (timers.js:751:5)
	        at processImmediate [as _immediateCallback] (timers.js:722:5)
	    ``
	    alguna idea? 
	    Agradezo la ayuda de antemano
	```

	* **Diego Alexander Forero Higuera (Platzi)** [250657] (2)

		Puedes compartir tu c√≥digo donde implementas findByTypeAgentUuid

	* **griecovillamizar** [250657] (1)

		tienes q poner raw true eso es

* **John Anhuaman Centeno AC** (0) [195386](https://platzi.com/comentario/195386/) 

	Al ejecutar el script del ejemplo me reporta el este error:  
	read ECONNRESET  
	SequelizeConnectionError: read ECONNRESET

	* **Diego Alexander Forero Higuera (Platzi)** [195386] (2)

		Puedes compartir el stack trace completo del error, por lo general en el stack dice cual es el origen del error.

	* **John Anhuaman Centeno AC** [195386] (0)

		```
		    read ECONNRESET
		    SequelizeConnectionError: read ECONNRESET
		        at connection.connect.err (C:\z_John\nodejs\platziverse\platziverse-db\node_modules\sequelize\lib\dialects\postgres\connection-manage
		    r.js:107:24)
		        at Connection.connectingErrorHandler (C:\z_John\nodejs\platziverse\platziverse-db\node_modules\pg\lib\client.js:123:14)
		        at emitOne (events.js:115:13)
		        at Connection.emit (events.js:210:7)
		        at Socket.<anonymous> (C:\z_John\nodejs\platziverse\platziverse-db\node_modules\pg\lib\connection.js:71:10)
		        at emitOne (events.js:115:13)
		        at Socket.emit (events.js:210:7)
		        at emitErrorNT (internal/streams/destroy.js:64:8)
		        at _combinedTickCallback (internal/process/next_tick.js:138:11)
		        at process._tickCallback (internal/process/next_tick.js:180:9)```
		    
		```

	* **John Anhuaman Centeno AC** [195386] (1)

		Reinstal√© postgres y se solucion√≥ el problema

* **Nicol√°s Mej√≠a Correa** (0) [193996](https://platzi.com/comentario/193996/) 

	Al tratar de ejecutar `node example` me sale este error: ‚ÄòSequelizeDatabaseError: column ‚Äúuuid‚Äù does not exist‚Äô

	* **Diego Alexander Forero Higuera (Platzi)** [193996] (2)

		No se ha creado la columna uuid, revisa que tu base de datos tenga todas las columnas y que este correctamente configurada.

## 0260. Reto C√≥mo modificar el script de inicializaci√≥n de la base de datos [8341](https://platzi.com/clases/1151-nodejs/8341-reto-como-modificar-el-script-de-inicializacion-de/)

### Descripci√≥n:


Nosotros creamos un _script_ de la configuraci√≥n de la base de datos. Este _script_ lo vamos a querer ejecutar de forma automatizada. M√°s adelante cuando estemos haciendo _deploy_ ese _script_ no lo va a ejecutar un humano.

## Reto #2:

Modificar el script de creaci√≥n de base de datos para que evite el prompt de confirmaci√≥n pas√°ndole un flag `--yes` al script.

### Comentarios:

* **Enzo Aliatis** (10) [194967](https://platzi.com/comentario/194967/) 

	```
	    if (process.argv.pop() !== '--y') {
	        const answer = await prompt([
	          {
	            type: 'confirm',
	            name: 'setup',
	            message: 'This will destroy your database, are you sure?'
	          }
	        ])
	        if (!answer.setup) {
	          returnconsole.log(`${chalk.blue('Nothing happend :)')}`)
	        }
	      }```
	    
	```

	* **danhergir** [194967] (1)

		Podr√≠a explicarme la primer linea de su c√≥digo. Por favor

	* **Jonathan P√©rez Rodr√≠guez** [194967] (2)

		Me base en tu c√≥digo para que funcionara con --yes y -y
		``` 
		    if(process.argv.indexOf(yFlag) === -1 && process.argv.indexOf(yesFlag) === -1){
		        // Preguntamos
		        const answer = await prompt([
		          {
		            type: 'confirm',
		            name: 'setup',
		            message: 'This will destroy your database,are you sure?'
		      
		          }
		        ]).catch(handleFatalError)
		      
		        if (!answer.setup) {
		          returnconsole.log('Nonthing happend')
		        }
		      }```
		    
		```

* **Joaquin Araujo** (5) [228712](https://platzi.com/comentario/228712/) 

	**Process Argv en NodeJS:**  
	Guarda un Array con todos los parametros enviados al momento de ejecutar el script.js con NodeJS.
	
	  1. `process.argv` Imprime un arreglo.
	  2. `process.argv[x]` Imprime el valor de una posici√≥n del Array.
	
	
	
	En el caso del fragmento del c√≥digo n√∫mero uno; con el m√©todo forEach se procede a recorrer el objeto de tipo Array e imprimer el respectivo valor de cada indice.
	
	En el caso del fragmento del c√≥digo n√∫mero dos simplemente se determina si al ejecutar el script se pas√≥ el par√°metro `--yes`: Validando el valor de cada indice.
	``` 
	    // Fragmento del c√≥digo n√∫mero uno:
	    process.argv.forEach((parametro, index) => {
	      console.log(`[${index}] ${parametro}`)
	    
	      // Fragmento del c√≥digo n√∫mero dos:
	      if (process.argv[index] == '--yes') {
	        console.log(`El par√°metro "${parametro}" se encontr√≥ en el indice [${index}]`)
	      }
	    })
	    
	```
	
	Teniendo en cuenta esto, aqu√≠ les dejo c√≥digo de **mi reto cumplido** :
	``` 
	    // Automatizaci√≥n del Script de creaci√≥n de la Database
	      let flag = false
	    
	      process.argv.forEach(e => {
	        if (e === '--yes') {
	          flag = true
	        }
	      })
	    
	      if (flag === false) {
	        // Pregunta en la consola
	        const answer = await prompt([
	          {
	            type: 'confirm',
	            name: 'setup',
	            message: 'This will destroy your database, are you sure?'
	          }
	        ])
	    
	        // Si la respuesta es falsa (es negativa), no pasa nada
	        // Si la respuesta es verdadera (es positia), re-crea la DB
	        if (!answer.setup) {
	          returnconsole.log('Nothing happended :)')
	        }
	      }
	    
	```
	
	Muchas gracias por leer, espero que este aporte les ayude a entender este reto, de todas maneras [aqu√≠](https://nodejs.org/docs/latest-v8.x/api/process.html#process_process_argv) puedes leer m√°s sobre este tema.

	* **carlos galvan grajales** [228712] (0)

		Me gusto tu forma de hacerlo con el foreach, muchas gracias por montarlo!.

	* **Joaquin Araujo** [228712] (0)

		`forEach` es hermoso ‚ù§Ô∏è

	* **Luis Antonio Schmiel Paredes** [228712] (2)

		Muy bueno, en el caso de la sig condicional:
		``` 
		    if (flag === false)
		    
		```
		
		puedes usar:
		``` 
		    if(!flag)
		    
		```
		
		ya que la variable flag es de tipo booleano.

	* **Joaquin Araujo** [228712] (1)

		Tienes raz√≥n!

* **charlie_if** (3) [447279](https://platzi.com/comentario/447279/) 

	Una versi√≥n con el m√≥dulo ‚Äòcommand-line-args‚Äô.
	``` 
	    'use strict'
	    
	    const db = require('./')
	    const conf = require('../../conf/conf.json')
	    const chalk = require('chalk')
	    const debug = require('debug')('project:db:setup')
	    const inquirer = require('inquirer')
	    const cmdArgs = require('command-line-args')
	    const optionDefinitions = [
	      { name: 'yes', alias: 'y', type: Boolean },
	    ]
	    const parsedArgv = cmdArgs(optionDefinitions)
	    
	    asyncfunctionsetup () {
	    	if ( ! parsedArgv.yes ) {
	    		const answer = await inquirer.prompt([
	    			{
	    				'type': 'confirm',
	    				'name': 'setup',
	    				'message': 'This will be destroy the actual database, are you sure?',
	    			},
	    		])
	    
	    		if ( ! answer.setup ) {
	    			console.log('Nothing happened :)')
	    			process.exit(0)
	    		}
	    	}
	    
	    	const db_conf = {
	    		setup: true,
	    		logging: debug
	    	}
	    
	    	await db(db_conf)
	    
	    	console.log(`DATABASE SETUP ${chalk.green('SUCCESSFUL!')}`)
	    	process.exit(0)
	    }
	    
	    setup()```
	    
	```

* **Byron Mesias Cueva Cabrera** (2) [983059](https://platzi.com/comentario/983059/) 

	Reto resuelto:
	``` 
	    const commander = require('commander')
	    
	    commander.option('-y, --yes', 'Acept the question and continue')
	    commander.parse(process.argv)
	    
	    const prompt = inquirer.createPromptModule()
	    
	    asyncfunctionsetup () {
	      if (!commander.yes) {
	    
	        const answere = await prompt([
	          {
	            type: 'confirm',
	            name: 'setup',
	            message: 'This will destroy your database, are you sure?'
	          }
	        ])
	      
	        if (!answere.setup) {
	          returnconsole.log('Nothing happened!')
	        }
	      }
	    ...
	    }
	    
	```

* **Mauricio Ruiz Diaz** (2) [647027](https://platzi.com/comentario/647027/) 

	Opt√© por algo bien sencillo
	``` 
	    if (process.argv.indexOf('-y') == -1) {
	        const answer = await prompt([
	          {
	            type: 'confirm',
	            name: 'setup',
	            message: 'This will destroy your database, are you sure?'
	          }
	        ])
	    
	        if (!answer.setup) {
	          returnconsole.log('Nothing happened! :)')
	        }
	      }
	    
	```

* **Nicol√°s E. Rozo Espinosa** (2) [566100](https://platzi.com/comentario/566100/) 

	Implemente la Libreria Yargs, para manejar los Par√°metros
	``` 
	    const argv = require('yargs').boolean('y').argv
	    
	```
	
	Y cree una condici√≥n para ejecutar el Promt o no:
	``` 
	    const ops = argv.y
	      if (!ops) {
	        const answer = await prompt({
	          type: 'confirm',
	          name: 'setup',
	          massage: 'This will destroy your DataBase, Are you Sure?'
	        })
	        if (!answer.setup || ops) {
	          returnconsole.log('Nothing happened :)')
	        }
	      }  
	    
	```
	
	Lanzamos el comando setup:
	``` 
	    npm run setup -- -y
	    
	```

* **Juan Camilo Angel Fandi√±o** (2) [501675](https://platzi.com/comentario/501675/) 

	```
	    const forceDestroy = process.argv.indexOf('--force') >= 0
	    
	      if( ! forceDestroy ) {
	        const answer = await prompt([
	          {
	            type: 'confirm',
	            name: 'setup',
	            message: 'This will destroy your database, are you sure?'
	          }
	        ])
	    
	        if (!answer.setup) {
	          returnconsole.log('Nothing happened!!')
	        }
	      }
	    
	```

* **Fabi√°n Veliz** (2) [292269](https://platzi.com/comentario/292269/) 

	Buenas, dejo como resolv√≠ el reto:
	``` 
	    asyncfunctionsetup() {
	      const byPass = process.argv.indexOf('yes') !== -1
	      
	      if (!byPass) {
	        const prompt = inquirer.createPromptModule()
	        const answer = await prompt([
	          {
	            type: 'confirm',
	            name: 'setup',
	            message: 'Are you sure to destroy the database?'
	          }
	        ])
	      
	        if (!answer.setup) {
	          returnconsole.log('Nothing happend.')
	        }
	      }
	      // ...
	    }
	    
	```
	
	Se corre de la siguiente forma `npm run setup -- yes`.  
	Saludos!

	* **Luis Antonio Schmiel Paredes** [292269] (1)

		Muy buena forma de buscar el yes, gran aporte !

* **eemartinez97** (1) [884615](https://platzi.com/comentario/884615/) 
	
	![Capture.PNG](https://static.platzi.com/media/user_upload/Capture-4dc24ffb-c662-45a3-848e-e374b1697486.jpg)

* **William Calder√≥n Castillo** (1) [846260](https://platzi.com/comentario/846260/) 

	Soluci√≥n utilizando process.argv
	``` 
	    'use strict'
	    
	    const debug = require('debug')('platziverse:db:setup')
	    const inquirer = require('inquirer')
	    const chalk = require('chalk')
	    const db = require('./')
	    
	    const prompt = inquirer.createPromptModule()
	    
	    asyncfunctionsetup () {
	    
	      const arg = process.argv.slice(2)
	    
	      if (arg[0] === '--yes') {
	        console.log('Yes from args - Continuing')
	      } else {
	        const answer = await prompt([
	          {
	            type: 'confirm',
	            name: 'setup',
	            message: 'This will destroy db, are you sure?'
	          }
	        ])
	    
	        if (!answer.setup) {
	          returnconsole.log('Nothing happened :)')
	        }
	      }
	    
	      const config = {
	        database: process.env.DB_NAME || 'platziverse',
	        username: process.env.DB_USER || 'platzi',
	        password: process.env.DB_PASS || 'platzi',
	        host: process.env.DB_HOST || 'localhost',
	        dialect: 'postgres',
	        setup: true,
	        logging: s => debug(s)
	      }
	    
	      await db(config).catch(handleFatalError)
	    
	      console.log('Success!')
	      process.exit(0)
	    }
	    
	    functionhandleFatalError (err) {
	      console.error(err.message)
	      console.error(err.stack)
	      process.exit(1)
	    }
	    
	    setup()
	    
	    
	```

* **Juan David G√≥mez G√≥mez** (1) [397797](https://platzi.com/comentario/397797/) 

	```
	    'use strict'
	    
	    const debug = require('debug')('platziverse:db:setup')
	    const inquirer = require('inquirer')
	    const chalk = require('chalk')
	    const db = require('./')
	    
	    const prompt = inquirer.createPromptModule()
	    
	    asyncfunctionsetup() {
	      console.log(`${chalk.blue(process.argv.indexOf('-y') !== -1)} `);
	      if (process.argv.indexOf('-y') !== -1) {
	        /*const answer = await prompt([
	          {
	            type: 'confirm',
	            name: 'setup',
	            message: 'This will destroy your database, are you sure?'
	          }
	        ])*/
	        const config = {
	          database: process.env.DB_NAME || 'platziverse',
	          username: process.env.DB_USER || 'platzi',
	          password: process.env.DB_PASS || 'platzi',
	          host: process.env.DB_HOST || 'localhost',
	          dialect: 'postgres',
	          logging: s => debug(s),
	          setup: true
	        }
	    
	        await db(config).catch(handleFatalError)
	    
	        console.log('Success!')
	        process.exit(0)
	      } else {
	        returnconsole.log('Nothing happened :)')
	      }
	    }
	    
	    functionhandleFatalError(err) {
	      console.error(`${chalk.red('[fatal error]')}${err.message}`)
	      console.error(err.stack)
	      process.exit(1)
	    }
	    
	    setup()```
	    
	```

* **Sergio Mesa Londo√±o** (1) [386815](https://platzi.com/comentario/386815/) 

	```
	        let arg = false;
	        process.argv.forEach((args) => {
	            if(args == '--y')
	             arg = true;
	        })
	    
	        if(!arg)
	           return
	    
	```

* **jasobrino** (1) [366882](https://platzi.com/comentario/366882/) 

	Al final he implementado la soluci√≥n utilizando el paquete args-parser:
	``` 
	    const args = require("args-parser")(process.argv)
	    
	    asyncfunctionsetup () {
	    
	      if( !args.y && !args.yes) {
	        const answer = await prompt([{
	          type: 'confirm',
	          name: 'setup',
	          message: 'Esto destruir√° la base de datos, seguro?'
	        }])
	      
	        if (!answer.setup) {
	          returnconsole.log('Nothing happened :)')
	        }
	      }
	    
	      const config = {
	    
	    
	```

* **Andr√©s Felipe Mart√≠nez Salazar** (1) [365100](https://platzi.com/comentario/365100/) 

	Mi soluci√≥n:
	``` 
	    asyncfunctionsetup () {
	      const fileIndex = process.argv.indexOf(__filename)
	      let flag = true
	      if (process.argv[fileIndex+1] == '--yes' || process.argv[fileIndex+1] == '-y' ){
	        flag = false
	      }
	      if (flag){
	        const answer = await prompt([
	          {
	            type: 'confirm',
	            name: 'setup',
	            message: 'This will destroy your database, are you sure?'
	          }
	        ])
	        if (!answer.setup) {
	          returnconsole.log('Nothing happened :)')
	        }
	      }
	      //...
	    }
	    
	```

* **GerAlfonso** (1) [355626](https://platzi.com/comentario/355626/) 

	Mi soluci√≥n del reto:
	``` 
	    asyncfunctionsetup() {
	    
	      switch (process.argv[2]) {
	        case'yes':
	          {
	            configDatabase();
	            break;
	          }
	        default:
	          {
	            const answer = await prompt([{
	              type: 'confirm',
	              name: 'setup',
	              message: 'This will destroy your database, are you sure?'
	            }]);
	    
	            if (!answer.setup) {
	              returnconsole.log('Nothing happend :)');
	            }
	            configDatabase();
	          }
	      }
	    
	      asyncfunctionconfigDatabase() {
	        const config = {
	          database: process.env.DB_NAME || 'platziverse',
	          username: process.env.DB_USER || 'platzi',
	          password: process.env.DB_PASS || 'platzi',
	          host: process.env.DB_HOST || 'localhost',
	          dialect: 'postgres',
	          logging: s => debug(s),
	          setup: true
	        };
	    
	        await db(config).catch(handleFatalError);
	        console.log('Success!');
	        process.exit(0);
	      }
	    }
	    
	```

* **Luis Castillo** (1) [351384](https://platzi.com/comentario/351384/) 

	Por lo que veo todos hicieron un script si no pones el flag no haga nada pero si lo pones ya te pregunta, lo que Julian Duque dijo era que fuera opcional.
	``` 
	    const config = {
	      database: process.env.DB_NAME || 'platziverse',
	      username: process.env.DB_USER || 'luis',
	      password: process.env.DB_PASS || 'jimyluis',
	      host: process.env.DB_HOST || 'localhost',
	      dialect: 'postgres',
	      logging: s => debug(s),
	      setup: true
	    }
	    
	    asyncfunctionsetup () {
	      const flags = process.argv.indexOf('yes') === -1 && process.argv.indexOf('simon') === -1
	    
	      if (!flags) {
	        createDB(config)
	      } else {
	        const answer = await prompt([
	          {
	            type: 'confirm',
	            name: 'setup',
	            message: 'This will destroy your database, are you sure?'
	          }
	        ])
	        if (!answer.setup) {
	          returnconsole.log('Nothing happened :) ')
	        }
	        createDB(config)
	      }
	    
	    }
	    
	    asyncfunctioncreateDB (config) {
	      await db(config).catch(handleFatalError)
	      console.log('Success!')
	      process.exit(0)
	    }
	    
	```

* **chepix10** (1) [275820](https://platzi.com/comentario/275820/) 

	Que tal todos, les dejo mi implementaci√≥n utilizando [minimist](https://www.npmjs.com/package/minimist):
	
	[Repositorio](https://github.com/chepix10/platziverse/blob/inicializacion-base-datos/platiziverse-db/setup.js)

* **inquiridor** (1) [272848](https://platzi.com/comentario/272848/) 

	Con **filter**
	``` 
	    const yesFlag = process.argv.filter(flag => {
	      return (flag.toLowerCase()) === '--y' || (flag.toLowerCase() === '--yes')
	    })[0]
	    
	    if (!yesFlag) {
	      const answer = await prompt([
	        {
	          type: 'confirm',
	          name: 'setup',
	          message: 'This will destroy your database, are you sure?'
	        }
	      ])
	      
	      if (!answer.setup) {
	        returnconsole.log('Nothing happened :)')
	      }
	    }
	    
	    // rest of setup.js code
	    
	    }
	    
	```

* **Mario Campbell** (1) [244990](https://platzi.com/comentario/244990/) 

	LISTO:
	``` 
	    asyncfunctionsetup () {
	      const flags = process.argv[2]
	    
	      if (flags !== '--yes') {
	        const awnser = await prompt([{
	          type: 'confirm',
	          name: 'setup',
	          message: 'This will destroy your database, are you sure?'
	        }])
	    
	        if (!awnser.setup) {
	          returnconsole.log('Nothing Happend!')
	        }
	      }
	    
	```

	* **Miguel Angel Gatto** [244990] (1)

		yo lo hice tomando el par√°metro igual pero sin crear una constante porque me pareci√≥ redundante‚Ä¶
		``` 
		    if (process.argv[2] !== '--yes') {
		    
		```

* **Eddy Nelson P√©rez Decena** (1) [232055](https://platzi.com/comentario/232055/) 

	Esta es mi soluci√≥n!!
	``` 
	    'use strict'
	    
	    const db = require('./')
	    const debug = require('debug')('platziverse:db:setup')
	    const chalk = require('chalk')
	    
	    asyncfunctionsetup () {
	      const value = process.argv.filter(arg => arg === '-y' || arg === '--yes')[0]
	    
	      if (value === '-y' || value === '--yes') {
	        const config = {
	          database: process.env.DB_NAME || 'platziverse',
	          username: process.env.DB_USER || 'platzi',
	          password: process.env.DB_PASS || 'platzi',
	          host: process.env.DB_HOST || 'localhost',
	          dialect: process.env.DB_USAGE || 'postgres',
	          setup: true,
	          logging: m => debug(m)
	        }
	    
	        await db(config).catch(handleFatalError)
	    
	        console.log('Success!')
	        process.exit(0)
	      } else {
	        console.log(chalk.green(`La base de datos esta a salvo`))
	      }
	    }
	    
	    setup()
	    
	    functionhandleFatalError (err) {
	      console.error(chalk.red(err.message))
	      console.error(chalk.red(err.stack))
	      process.exit(1)
	    }
	    
	```

* **Jose Berna** (0) [302336](https://platzi.com/comentario/302336/) 
	
	![Captura de pantalla 2018-05-20 a la\(s\) 5.45.24 p. m..png](https://static.platzi.com/media/user_upload/Captura%20de%20pantalla%202018-05-20%20a%20la%28s%29%205.45.24%20p.%20m.-6541a17f-4e1e-4b7b-a2f5-0824e44beb28.jpg)

* **Alejandro Sulbaran** (0) [300840](https://platzi.com/comentario/300840/) 

	Hay un paquete que nos ayuda a abstraer mas esa l√≥gica, exactamente es [este](https://github.com/yargs/yargs)
	
	en cuanto termine de implementarlo les paso el codigo

	* **Alejandro Sulbaran** [300840] (0)

		Exactamente resolv√≠ as√≠:  
		instalando el paquete y luego importandolo de la siguiente manera
		``` 
		    ///
		    const argv = require('yargs').argv
		    ////
		     if (!argv.y) {
		        const answer = await prompt([
		          {
		            type: 'confirm',
		            name: 'setup',
		            message: 'This will destroy your databsae, are you sure?'
		          }
		        ])
		        if (!answer.setup) {
		          returnconsole.log('Nothing happened :)')
		        }
		      }
		    ///
		    
		    
		```
		
		de esta manera puedo colocar en la terminal
		``` 
		    nodesetup.js --y 
		    
		```
		
		o
		``` 
		    nodesetup.js -y
		    
		```
		
		y el script se va ejecutar tal como queremos para el reto

* **Sebastian Cardoso Castillo** (0) [292344](https://platzi.com/comentario/292344/) 

	No entiendo por que voy a querer ejecutar el script de manera automatizada si el setup lo ejecutamos solo la primera vez

	* **Diego Alexander Forero Higuera (Platzi)** [292344] (1)

		Si llega un nuevo integrante al equipo de trabajo el tener ese script le va a permitir tener el entorno configurado de manera r√°pida, tambi√©n piensa si tu cambias de equipo el tener este script te ahorra unos cuantos pasos que tendr√≠as que hacer de forma manual.

* **Juan Carlos Chan Tzec** (0) [262507](https://platzi.com/comentario/262507/) 

	```
	    const recreate = process.argv.find(e => e.toLowerCase() == '--yes' || e.toLocaleLowerCase() == 'y')
	    
	      if (!recreate) {
	        const promptUser = await prompt([{
	          type: 'confirm',
	          name: 'setup',
	          message: 'this will destroy your databse, are you sure?'
	        }])
	      
	        if (!promptUser.setup) {
	          returnconsole.log('Nothing happened :)')
	        }
	      }```
	    
	```

* **Jordi** (0) [253517](https://platzi.com/comentario/253517/) 

	// Funciona, que opinan? Como lo mejorar√≠an? (Quiz√°s cambiar√≠an el IF, sorpr√©ndanme, gracias.
	``` 
	    if(process.argv[2] != '--yes'){
	       const anwser = await prompt([{
	         type: 'confirm',
	         name: 'setup',
	         message: 'This will destroy your DB, are you sure?'
	       }])
	       if (!anwser.setup) returnconsole.log('Nothing happened!')
	     }
	    
	```

* **brapastor** (0) [243626](https://platzi.com/comentario/243626/) 

	Vi muchas soluciones interesantes, pero quiero aportar otra solucion con el paquete yargs  
	`npm i yargs -D`
	``` 
	    ...
	    const argv = require('yargs').argv
	    const prompt = inquirer.createPromptModule()
	    
	    
	    asyncfunctionsetup() {
	      if (!argv.yes) {
	        const answer = await prompt([
	          {
	            type: 'confirm',
	            name: 'setup',
	            message: 'this will destroy your database, are you sure?'
	          }
	        ])
	    
	        if (!answer.setup) {
	          returnconsole.log('Nothing happened :)')
	        }
	      }
	    ...
	    
	```
	
	y en la terminal  
	npm run setup ‚Äì --yes

* **ignacioaredez** (0) [228045](https://platzi.com/comentario/228045/) 

	Tengo dificultades con este reto, una pregunta a priori muy simple este codigo suplante el anterior codigo en el archivo setup.js ??? o debemos crearlo aparte (imagino que si que lo suplanta pero no lo se )

* **Contrerasjf** (0) [221098](https://platzi.com/comentario/221098/) 

	```
	    if(process.argv.pop() !== '-y'){
	        const answer = await prompt([
	          {
	            type: 'confirm',
	            name: 'setup',
	            message: 'This will destroy your database, are you sure?'
	          }
	        ])
	      
	        if (!answer.setup) {
	          returnconsole.log('Nothing happened :)')
	        }
	       }
	    
	    
	```

* **gmocmm** (0) [216981](https://platzi.com/comentario/216981/) 

	```
	    if (process.argv.indexOf('-y') === -1){ }
	    
	```

* **Jonathan Jim√©nez** (0) [210422](https://platzi.com/comentario/210422/) 

	```
	    if(process.argv[2] != '--y') {
	        const answer = await prompt({
	          type: 'confirm',
	          name: 'setup',
	          message: 'This will destroy your database, are you sure?'
	        })
	    
	        if (!answer.setup) {
	          returnconsole.log('Nothing happend :)')
	        }
	      }
	    
	```

* **cguzman** (0) [208081](https://platzi.com/comentario/208081/) 

	```
	    let autoConfig=false;
	    if(process.argv[2]){
	      if(process.argv[2].slice(2)=='auto'){
	        autoConfig = true
	      }
	    }
	    
	    async function setup () {
	    
	      if(!autoConfig){
	        const answer = await prompt([
	          {
	            type: 'confirm',
	            name: 'setup',
	            message: 'Este comando destruir√° completamente su base de datos, \n \n ¬øEsta usted seguro?'
	          }
	        ])
	        if (!answer.setup) {
	          return console.log('\nNose realizaron cambios ensu base de datos!')
	        }    
	        await db(config).catch(handleFatalError)
	        console.log('\n \n \n Proceso Completado Correctamente')
	        process.exit(0)
	      }
	      else{
	        await db(config).catch(handleFatalError)
	        console.log('\n \n \n Proceso Completado Correctamente')
	        process.exit(0)
	      }
	    }
	    
	```

* **Dobleve Tres** (0) [200575](https://platzi.com/comentario/200575/) 

	```
	    let args = process.argv.filter(a => a.indexOf('--') != -1 || a.indexOf('-') )
	    
	      if (args.findIndex('--yes') == -1 || args.findIndex('-y') == -1) {
	     .....
	    }
	    
	```

* **Javier N√∫√±ez** (0) [193572](https://platzi.com/comentario/193572/) 

	Soluciones sencilla:
	``` 
	    asyncfunctionsetup () {
	      const force = process.argv.slice(2).pop()
	      if (force !== '-y') {
	        const answer = await prompt([
	          {
	            type: 'confirm',
	            name: 'setup',
	            message: 'This will destroy your database, are you sure?'
	          }
	        ])
	      
	        if (!answer.setup) {
	          returnconsole.log('Nothing happpen :)')
	        }
	      } 
	    ...
	    
	```
	
	Otra opci√≥n es usar <https://www.npmjs.com/package/nodejs-argv>

# Construyendo un servidor en tiempo real para Internet de las Cosas con Mosca/MQT [1469]

## 0270. Definici√≥n de un Broker de Mensajer√≠a [8342](https://platzi.com/clases/1151-nodejs/8342-definicion-de-un-broker-de-mensajeria/)

### Descripci√≥n:


Platziverse MQTT va a ser el servidor encargado de recibir los mensajes de los agentes de monitoreo y re-distribu√≠rlos a los agentes que estar√°n ‚Äúescuchando‚Äù o a la espera de esos mensajes.

Un ‚Äúmessage broker‚Äù es decir un intermediario que se encargar√° de recibir un mensaje y redistribu√≠rlo para esto nosotros vamos a implementar el protocolo MQTT para que realice esta funci√≥n en nuestro servidor por las ventajas que este ofrece al estar optimizado para aplicaciones de IoT este protocolo ‚Äúm√°quina a m√°quina‚Äù utiliza un ancho de banda muy bajo y puede funcionar con conexiones m√≥viles y situaciones de ese estilo d√≥nde el ancho de banda es limitado en muchas ocaciones y el consumo de datos debe ser lo m√°s bajo posible.

### Comentarios:

* **Alberto Pedron** (4) [226740](https://platzi.com/comentario/226740/) 

	Iba a preguntar que por que no usaron RabbitMQ pero desde que vi el logo de mosca qued√© 100% convencido.

	* **Jordi** [226740] (0)

		Ese logo me alegr√≥ el d√≠a

* **Cesar Tacuri** (2) [193684](https://platzi.com/comentario/193684/) 

	Julian una consulta porque Redis y no MongoDB ? qu√© factor determino el uso de dicho motor en este proyecto.

	* **Diego Alexander Forero Higuera (Platzi)** [193684] (11)

		Redis es una base de datos no relacional de llave valor, enfocada en este tipo de cosas mientras que mongo es una base de datos no relacional enfocada en documentos, esa es la raz√≥n por la cual se usa redis o rabbitmq para el manejo de colas de mensajes.

* **Israel Montalvo** (1) [71138](https://platzi.com/comentario/790587/) 
Saludos, Tengo una duda, puedo usar este servidor mosca para entregar notificaciones a smartphones que tengan Android?, Que tan factible ...

	* **jenapi** [71138] (1)

		En s√≠ no es tan factible, pero para eso tienes el API. El API crea un servicio que puede entregar informaci√≥n a lo que tu quieras, una app, web y para dispositivos, as√≠ si podr√≠as notificar m√©tricas en un agente.

* **Miguel Angel Gatto** (0) [262644](https://platzi.com/comentario/262644/) 

	Vengo de usar Mosca contra MongoDB en otro proyecto y me encant√≥. Esperemos Redis est√© a la alturo o lo supere!

	* **francorreasosa** [262644] (1)

		Mosca no es un reemplazo a Redis, o viceversa. Sino que Mosca usa Redis (o Rabbit) para funcionar.

## 0280. Definici√≥n de los tipos de mensajes [8343](https://platzi.com/clases/1151-nodejs/8343-definicion-de-los-tipos-de-mensajes/)

### Descripci√≥n:


Antes de empezar con la implementaci√≥n de nuestro servidor de MQTT debemos definir el tipo de mensajes que vamos a utilizar.

Crearemos un archivo readme en nuestra carpeta ‚Äúplatziverse-mqtt.‚Äù

Vamos a utilizar un eventoopara cuando el usuario se conecte para esto utilizamos ‚Äúagent/connected‚Äù adem√°s utilizaremos ‚Äúagent/disconnected‚Äù para cuando el agente se deconecte y por √∫ltimo un evento para cuando nos env√≠en un mensaje ‚Äúagent/message‚Äù.

### Links:

* [GitHub - platzi/platziverse at 15-definicion-tipo-mensajes-mqtt](https://github.com/platzi/platziverse/tree/15-definicion-tipo-mensajes-mqtt)

### Comentarios:

* **Sebastian Cardoso Castillo** (7) [302150](https://platzi.com/comentario/302150/) 

	Yo recomiendo mirar estos cursos muchas veces. Hace mas de un mes que vengo repitiendo las clases y de a poco fui integrando los conceptos.

* **eyesidmorenov** (2) [61598](https://platzi.com/comentario/624369/) 
Alguien puede explicar si este tema de MQTT que relaci√≥n, semejanza o diferencia tiene con Socket IO. Y aprovecho para consultar que rela...

* **Luis Antonio Schmiel Paredes** (1) [296099](https://platzi.com/comentario/296099/) 

	Les recomiendo que si no entienden mucho por que se hace este modulo vean el video en el que se explica la estructura del proyecto.

* **Victor Roman Garcia Flores** (0) [315604](https://platzi.com/comentario/315604/) 

	No puedo bajar los archivos base, favor de revisar el fallo

	* **Diego Alexander Forero Higuera (Platzi)** [315604] (1)

		Ya quedo el enlace funcionado.

## 0290. Implementaci√≥n del servidor MQTT [8344](https://platzi.com/clases/1151-nodejs/8344-implementacion-del-servidor-mqtt/)

### Descripci√≥n:


Vamos a comenzar con la implementaci√≥n de nuestro servidor de MQTT.

Por defecto el puerto donde va a correr el servidor MQTT es el 8083.

### Links:

* [GitHub - platzi/platziverse at 16-implementacion-servidor-mqtt](https://github.com/platzi/platziverse/tree/16-implementacion-servidor-mqtt)

### Comentarios:

* **Joaquin Araujo** (13) [229576](https://platzi.com/comentario/229576/) 

	**Para las personas que tienen problema con la conexi√≥n de Redis, aqu√≠ les dejo la soluci√≥n:**
	
	El error ocurre porque no se puede establecer la conexi√≥n con `redis-server` en caso de:
	
	**1.** **(En caso de no teenrlo instalado)** Comienza con instalarlo [aqu√≠](https://redis.io/topics/quickstart) tienes una gu√≠a de como hacerlo, es sencillo **(en Linux)** , sin embargo te dejar√© los comandos que debes ejecutar para instalarlo a continuaci√≥n:
	
	* Descargar el paquete de Redis que contiene: redis-server, redis-cli, entre otros paquetes importantes.
	
	
	``` 
	    wget http://download.redis.io/redis-stable.tar.gz
	    
	```
	
	* Descomprimir el archivo `.tar.gz`:
	
	
	``` 
	    tar xvzf redis-stable.tar.gz
	    
	```
	
	Si quieres saber m√°s sobre los comandos de Lunix te recomiendo leer el [resumen del curso de CLI](https://joaquinaraujo.github.io/cli/) y el [resumen de Administraci√≥n de Servidores Linux](https://joaquinaraujo.github.io/platzi_administracion-linux/) de Platzi o en el mejor de los casos realizar los respectivos cursos.
	
	* Entrar a la carpeta que acabamos de descomprimir:
	
	
	``` 
	    cd redis-stable
	    
	```
	
	* Instalar Redis:
	
	
	``` 
	    make
	    
	```
	
	¬°Listo! ¬°Ya tienes Redis en tu computadora!
	
	**2.** **(En caso de tener instalado)** Luego de eso simplemente inicias el servicio con `redis-server` y listo, ‚Äúen teoria no debes de tener ningun problema‚Äù, el unico inconveniente ser√° que la terminal quedar√° bloqueado corriendo el servicio, oprime `CTRL + C` para tenerlo, entonces para evitar esto hay que correrlo en el **background** , esto se hace agregango `&` seguido del `redis-server`, quedando as√≠:
	``` 
	    redis-server &
	    
	```
	
	¬°Listo! ¬°Ya tienes el Redis corriendo!

	* **anhy_s** [229576] (0)

		Excelente! me sirvi√≥ el √∫ltimo comando para correr mi redis-server en Linux

	* **Joaquin Araujo** [229576] (1)

		Eso me alegra mucho Anahi üòÉ

	* **Lucas  Hick** [229576] (0)

		capo! gracias!!

	* **Sebastian Cardoso Castillo** [229576] (1)

		sudo apt install redis-server

	* **Jos√© Ricardo Romo Guti√©rrez** [229576] (1)

		genial muchas gracias compa√±ero

	* **Rub√©n Soler Giner** [229576] (1)

		Por si alguien quiere instalarlo como servicio de ubuntu encontr√© esta guia que a mi me funciono muy bien: [Guia instalar y configurar Redis en Ubuntu](https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-redis-on-ubuntu-16-04)

	* **luisrangelc** [229576] (1)

		Para windows 10 recomiendo seguir estas instrucciones:
		
		[redis windows 10](https://medium.com/@furkanpur/installation-redis-on-windows-10-13fbb055be7c)

	* **llorente.oscar** [229576] (1)

		Gracias!

	* **Alberto Gonz√°lez** [229576] (1)

		¬°Funcion√≥ a la perfecci√≥n!  
		¬°¬°¬°Muchas gracias!!!

* **Supershuttle** (2) [383704](https://platzi.com/comentario/383704/) 

	Tengo error al instalar la libreria mqtt, alguien podria apoyarme
	``` 
	    marcos@Marcos:/var/www/code/platSS/platSS-mqtt$ npm i
	    
	    > zmq@2.15.3 install /var/www/code/platSS/platSS-mqtt/node_modules/zmq> node-gyp rebuild
	    
	    gyp WARN download NVM_NODEJS_ORG_MIRROR is deprecated and will be removed in node-gyp v4, please use NODEJS_ORG_MIRROR
	    gyp WARN download NVM_NODEJS_ORG_MIRROR is deprecated and will be removed in node-gyp v4, please use NODEJS_ORG_MIRROR
	    gyp WARN download NVM_NODEJS_ORG_MIRROR is deprecated and will be removed in node-gyp v4, please use NODEJS_ORG_MIRROR
	    make: se ingresa al directorio ¬´/var/www/code/platSS/platSS-mqtt/node_modules/zmq/build¬ª  CXX(target) Release/obj.target/zmq/binding.o
	    ../binding.cc:28:17: fatal error: zmq.h: No existe el archivo o el directorio #include <zmq.h>
	                     ^
	    compilation terminated.
	    make: *** [Release/obj.target/zmq/binding.o] Error 1make: se sale del directorio ¬´/var/www/code/platSS/platSS-mqtt/node_modules/zmq/build¬ª
	    gyp ERR! build error
	    gyp ERR! stack Error: `make` failed with exit code:2
	    gyp ERR! stack     at ChildProcess.onExit (/home/marcos/.nvm/versions/node/v8.3.0/lib/node_modules/npm/node_modules/node-gyp/lib/build.js:258:23)
	    gyp ERR! stack     at emitTwo (events.js:125:13)
	    gyp ERR! stack     at ChildProcess.emit (events.js:213:7)
	    gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:200:12)
	    gyp ERR! System Linux 3.19.0-80-generic
	    gyp ERR! command "/home/marcos/.nvm/versions/node/v8.3.0/bin/node""/home/marcos/.nvm/versions/node/v8.3.0/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js"
	    "rebuild"
	    gyp ERR! cwd /var/www/code/platSS/platSS-mqtt/node_modules/zmq
	    gyp ERR! node -v v8.3.0
	    gyp ERR! node-gyp -v v3.6.2
	    gyp ERR! not ok
	    npm WARN optional SKIPPING OPTIONAL DEPENDENCY: fsevents@1.2.4 (node_modules/fsevents):
	    npm WARN notsup SKIPPING OPTIONAL DEPENDENCY: Unsupported platform for fsevents@1.2.4: wanted {"os":"darwin","arch":"any"} (current: {"os":"linux","arch":"x64"})
	    npm WARN optional SKIPPING OPTIONAL DEPENDENCY: zmq@2.15.3 (node_modules/zmq):
	    npm WARN optional SKIPPING OPTIONAL DEPENDENCY: zmq@2.15.3install: `node-gyp rebuild`
	    npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exit status 1
	    
	    added 69 packages in6.351s
	    marcos@Marcos:/var/www/code/platSS/platSS-mqtt$
	    
	```

* **Victor Hugo Cortes Posada** (2) [228543](https://platzi.com/comentario/228543/) 

	Para windows, los que no le funciona bien, tener presente que start.dev se debe escribir as√≠:
	``` 
	    "start-dev": "SET DEBUG=platziverse:* && nodemon server.js"
	    
	```

* **josdanind** (1) [920202](https://platzi.com/comentario/920202/) 

	Para mejorar la est√©tica de los mensajes por consola, les recomiendo el m√≥dulo log-symbols que permite imprimir por consola simbolos como el check.

* **estevamdonnabella** (1) [620942](https://platzi.com/comentario/620942/) 

	En la escritura de este mensaje, la versi√≥n m√°s nueva de Redis es 5.0.5 y para instalar en Mac, utilize la linea de comando:
	
	brew install redis
	
	Tambi√©n es neces√°rio a√±adir lo seguiente en package.json:
	
	‚Äústart-dev‚Äù: ‚Äú **redis-server** & DEBUG=platziverse:* nodemon server.js‚Äù

* **kevin velasco** (1) [517329](https://platzi.com/comentario/517329/) 

	Hola para los que usamos windows, aca les dejo un v√≠deo para instalar y correr el server de redis con windows.
	
	[https://www.youtube.com/watch?v=o3a9dSxOykU&t=203s](https://www.youtube.com/watch?v=o3a9dSxOykU&t=203s)
	
	Espero que les sirva Saludos!!

* **Oqueber Diazar Navarro Perez** (1) [360515](https://platzi.com/comentario/360515/) 

	 **Ubuntu**
	``` 
	    "start-dev": "redis-server & DEBUG=platziverse:* nodemon server.js"
	    
	    
	```

* **Pedro Rafael Jim√©nez Jij√≥n** (1) [335105](https://platzi.com/comentario/335105/) 

	en ubuntu solo corri redis con el siguiente comando
	``` 
	    redis-server
	    
	```
	
	pueden encontrar como instalar redis, en el siguiente  
	[enlace](https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-redis-on-ubuntu-16-04)

* **Juan Carlos Chan Tzec** (1) [262686](https://platzi.com/comentario/262686/) 

	para los que estan en windows y quieren hacer esto con mongo, pueden recurrir a la siguiente opcion
	``` 
	    const mongo = require('mongo')
	    
	    const backend = {
	      type: 'mongo',
	      url: 'mongodb://admin:admin@localhost:27017/platziverse-mqtt?authSource=admin',
	      mongo,
	      return_buffers: true
	    }```
	    
	    obviamente en vez de instalar redis en el npm instalarian mongo
	    
	```

* **Karla** (1) [71346](https://platzi.com/comentario/794889/) 
Hola, consulta porque cuando instalo el mosca me da este error : found 9 vulnerabilities (2 low, 1 moderate, 6 high)

	* **Erik Ochoa** [71346] (1)

		Si eso te aparece en el log de NPM es porque son ‚Äúerrores‚Äù de alguna dependencia. Lo que puedes hacer es correr un `npm fix` para intentar solucionar estos errores.

* **Andres Leonardo Arevalo** (0) [244711](https://platzi.com/comentario/244711/) 

	Implementaci√≥n del servidor MQTT con Mosca

* **Javier Martin Gutierrez** (0) [206341](https://platzi.com/comentario/206341/) 

	A mi me esta sucediendo el mismo Error.  
	Tengo un linux (Ubuntu) y cuando ejecuto el servidor de mqtt me aparece el siguiente error:
	
	[ioredis] Unhandled error event: Error: connect ECONNREFUSED 127.0.0.1:6379  
	at Object._errnoException (util.js:1041:11)  
	at _exceptionWithHostPort (util.js:1064:20)  
	at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1153:14)
	
	Alguien ha tenido el mismo error ?

	* **Javier Martin Gutierrez** [206341] (0)

		El problema lo tengo con redis, si lo elimino funciona bien, alguien sabe porque ?

	* **Diego Alexander Forero Higuera (Platzi)** [206341] (1)

		Revisa que el servidor de redis este funcionando, en esta discusi√≥n <https://platzi.com/discussions/amigos-alguien-por-favor-me-podria-ayudar-con-este-error-ioredis-unhandled-error-event-error-connect-econnrefused-1270016379-a/> un estudiante respondi√≥ como puedes verificar que tu servidor de redis esta corriendo.

* **Juan Jos√© Vega Quintero** (0) [205947](https://platzi.com/comentario/205947/) 

	Por qu√© a Julian no le pide el author, cuando configura npm

	* **Diego Alexander Forero Higuera (Platzi)** [205947] (1)

		Puede ser la versi√≥n de npm, pero eso no es algo que afecte la funcionalidad del proyecto.

	* **Joaquin Araujo** [205947] (0)

		Pens√© que solo yo hab√≠a notado eso pero creo que es porque el `npm login`

* **Cesar Tacuri** (0) [193719](https://platzi.com/comentario/193719/) 

	Tengo el siguiente error al correr el archivo server.js como puedo solucionarlo?
	
	[ioredis] Unhandled error event: Error: connect ECONNREFUSED 127.0.0.1:6379  
	at Object._errnoException (util.js:1041:11)  
	at _exceptionWithHostPort (util.js:1064:20)  
	at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1153:14)

	* **Diego Alexander Forero Higuera (Platzi)** [193719] (1)

		El error al parecer no esta prendido redis o no esta aceptando conexiones.

	* **Juan Jos√© Vega Quintero** [193719] (0)

		Alguien pudo solucionarlo

	* **Andrs** [193719] (0)

		Tengo el mismo error, como lo podemos solucionar?

	* **Andrs** [193719] (1)

		Resuelto, supongo que este error nos sale a los usuarios de Windows, me toco instalar el msi de redis para que me pudiese funcionar aqu√≠ les dejo el link para que no boten vapor con estos inconvenientes y contin√∫en con lo sabroso! üòÑ <https://github.com/MicrosoftArchive/redis/releases>

	* **henrydelahoz** [193719] (0)

		El servicio de Redis no se ejecuta en tu maquina, correr redis-server, te va a servir para levantar el servicio.

	* **brapastor** [193719] (1)

		en mac con brew se correr redis
		``` 
		    brew services start redis
		    
		```

	* **Manuel Andres Santizo Avila** [193719] (0)

		Yo encontre estas soluciones que me funcionaron:
		
		  1. Podes utilizar `redis-server &` para inicializar redis y pueda empezar a recibir peticiones. y utilizar `redis-server stop` para detenerlo o si estas usando MAC `redis-cli shutdown` para detenerlo.
		
		  2. En el caso que estes utilizando brew utilizar `brew services start redis` para iniciarlo y `brew services stop redis` para detenerlo.
		
		
		
		
		Espero sea de ayuda.

	* **Jordi** [193719] (0)

		Me funcion√≥ en la ubuntu bash haciendo lo que dice andrsaraveug:
		
		  1. <https://github.com/MicrosoftArchive/redis/releases>
		  2. Instala: Redis-x64-3.2.100.msi
		  3. Enjoy:
		
		
		``` 
		    [nodemon] 1.14.12
		    [nodemon]torestartatanytime, enter `rs`
		    [nodemon]watching: *.*
		    [nodemon]starting `nodeserver.js`
		    [platziverse-mqtt]serverisrunning
		    
		```

	* **Pedro Rafael Jim√©nez Jij√≥n** [193719] (1)

		en ubuntu solo corri redis con el siguiente comando
		``` 
		    redis-server
		    
		```
		
		pueden encontrar como instalar redis, en el siguiente  
		[enlace](https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-redis-on-ubuntu-16-04)

## 0300. C√≥mo recibir mensajes [8345](https://platzi.com/clases/1151-nodejs/8345-como-recibir-mensajes/)

### Descripci√≥n:


Ya tenemos implementado el servidor, pero hasta ahora no sabemos c√≥mo recibir mensajes, ya sea cuando un cliente se conecta, o cuando hay un mensaje.

### Links:

* [GitHub - platzi/platziverse at 17-como-recibir-mensajes](https://github.com/platzi/platziverse/tree/17-como-recibir-mensajes)

### Comentarios:

* **henrydelahoz** (6) [220586](https://platzi.com/comentario/220586/) 

	mqtt pub -t ‚Äòagent/message‚Äô -h localhost -m ‚Äò{‚Äúhello‚Äù;‚Äúplatziverse‚Äù}‚Äô

* **David Behar** (1) [982032](https://platzi.com/comentario/982032/) 

	El github de la clase no corre:
	``` 
	    [ioredis]Unhandlederrorevent: Error: connectECONNREFUSED 127.0.0.1:6379
	        atTCPConnectWrap.afterConnect[as oncomplete] (net.js:1126:14)
	    
	```

	* **ogtjocker** [982032] (1)

		me da el mismo error, alguien ya lo soluciono?

* **jenapi** (1) [828334](https://platzi.com/comentario/828334/) 

	Mi mensage de mqtt no corre. lo tengo instalado, corro solo mqtt y corre pero si le doy publish no lo acepta. Se queda como en espera y no hace m√°s nada (tengo tres consolas abiertas, una con redis-server, otra con npm start-dev y otra con el comando mqtt pub ‚Ä¶)

	* **jenapi** [828334] (1)

		Me estoy volviendo loco‚Ä¶ Us√© el subsistema linux en windows y nada (as√≠ que ESTA vez el problema no es windows) alguien que me diga qu√© puede ser. el mensaje mqtt pub ‚Ä¶ no se termina de mandar todo lo dem√°s funciona.

	* **Deyvis Neyser Valdez Gavilan** [828334] (1)

		Com√©ntanos cual es c√≥digo que estas aplicando para publicar los mensajes por mqtt, del mismo modo el c√≥digo de tu servidor mosca, puede que tengas errores que no lo hayas notado y as√≠ poder ayudarte.  
		Saludos.

	* **jenapi** [828334] (1)

		Vale
		``` 
		    mqtt pub -t 'agent/message' -h localhost -m '{"hello" : "platziverse"}'
		    
		```
		
		ese es el mensaje que envio.
		``` 
		    'use strict';
		    
		    const debug = require('debug')('node:mqtt');
		    const mosca = require('mosca');
		    const redis = require('redis');
		    const chalk = require('chalk');
		    
		    const backend = {
		    	type: 'redis',
		    	redis,
		    	return_buffers: true,
		    };
		    
		    const settings = {
		    	port: 6379,
		    	backend,
		    };
		    
		    const server = new mosca.Server(settings);
		    
		    server.on('clientConnected', (client) => {
		    	debug(`Client Connected: ${client.id}`);
		    });
		    
		    server.on('clientDisconnected', (client) => {
		    	debug(`Client Disconnected: ${client.id}`);
		    });
		    
		    server.on('published', (packet, client) => {
		    	debug(`Received: ${packet.topic}`);
		    	debug(`Payload: ${packet.payload}`);
		    });
		    
		    server.on('ready', () => {
		    	console.log(`${chalk.green('[platziverse-mqtt]')} server is running`);
		    });
		    
		    server.on('error', handleFatalError);
		    
		    functionhandleFatalError(err) {
		    	console.error(`${chalk.red('[fatal error]')}${err.message}`);
		    	console.error(err.stack);
		    	process.exit(1);
		    }
		    
		    process.on('uncaughtException', handleFatalError);
		    process.on('unhandledRejection', handleFatalError);
		    
		```
		
		este es mi codigo server.js

	* **Deyvis Neyser Valdez Gavilan** [828334] (2)

		Hola jenapi,  
		Seg√∫n tu c√≥digo puedo comentarte lo siguiente:
		
		  1. El puerto por defecto por el que va ha correr el servidor mqtt ser√≠a:
		
		
		``` 
		    const settings = {
		    	port: 1883
		    }
		    
		```
		
		  1. Para que te lleguen los mensajes exactos ponerlos siempre en comillas:
		
		
		``` 
		    mqtt pub -t "agent/message" -h localhost -m"{"hello" : "platziverse"}"
		    
		```
		
		Espero te sea de ayuda.  
		Saludos!

	* **jenapi** [828334] (2)

		Hey si fue de mucha ayuda Gracias. Lo unico que me causa problemas ahora es el cliente de mqtt, pero puse una funcion que me publique un mensaje en el server.on(‚Äòready‚Äô) y funciona perfecto

	* **Deyvis Neyser Valdez Gavilan** [828334] (2)

		Excelente jenapi, sigue as√≠ y nunca pares de aprender.  
		Saludos.

* **Deyvis Neyser Valdez Gavilan** (1) [788822](https://platzi.com/comentario/788822/) 

	Es posible enviar mensajes desde un sensor - ArduinoUNO y recibirlos desde este servidor mqtt - mosca?, alguien lo ha intentado?, si alguien podr√≠a orientarme porfa!.  
	Gracias.  
	Saludos.

* **Misael Zurdo** (1) [348199](https://platzi.com/comentario/348199/) 

	Muy interesante el curso me agrada todos los peque√±os detalles que da en cada video.

* **Jos√© Ricardo Romo Guti√©rrez** (1) [344083](https://platzi.com/comentario/344083/) 

	ya pude correr el servidor, pero no me recibe mensajes, abro una consola y pungo esto.
	``` 
	    mqtt pub -t 'agent/message' -h localhost -m '{"hello" : "platziverse"}'
	    
	```
	
	pero se queda como en espera.
	
	estoy en ubuntu

	* **JuanJoMh** [344083] (2)

		Tenes dos consolas abiertas? Una corriendo el servidor y en otra consola nueva le pones ese comando.  
		En la primera consola, donde tenes corriendo el servidor es donde se muestra el mensaje.
		
		Ese comando que pusiste esta bien, debe ser alg√∫n otro problema

	* **Jos√© Ricardo Romo Guti√©rrez** [344083] (1)

		Si, no tenia implementado las funciones de conexion, desconexion y publicacion. Gracias üòÑ jeejej fue error mio, no se por que paso eso, tal vez algun error que cometi al hacer un commit y quedo una version anterior donde no estaba ese fragmento de codigo

* **Cristian Alberto Rend√≥n Mart√≠nez** (1) [330778](https://platzi.com/comentario/330778/) 

	 **Problemas de puerto y dem√°s.**  
	Yo tuve problemas al ocupar el client de MQTT, primero en Mac OS o en linux, es importante ejectuar el comando, con permisos de super usuario, con la finalidad de que no tenga problemas.
	``` 
	    sudo npm install -g mqtt
	    
	```
	
	Por otra parte, al inciar el servidor al parecer mi puerto estaba siendo ocupado por algun otro proceso, en Mac OS puedes visualizar esta informacion con el comando PS o TOP.
	
	Hay que verificar que no haya otro proceso de nodemon corriendo a la par,  
	porque este puede estar ocupando el puerto que necesitamos.
	
	Si detectamos alg√∫n proceso que pueda estar dandonos problemas, podemos cerrarlo con el comando PID y escribiendo su PID correspondiente, (el PID lo obtenemos con el comando de arriba).
	``` 
	    kill -9 PID
	    
	```
	
	Despu√©s de todo esto deberia funcionar. Suerte a todos üòÉ

	* **Katherine Serrano Romero** [330778] (1)

		Gracias

* **Andres Leonardo Arevalo** (1) [244719](https://platzi.com/comentario/244719/) 

	Instalaci√≥n de cliente MQTT para probar server

* **Deyvis Neyser Valdez Gavilan** (1) [71056](https://platzi.com/comentario/788831/) 
Es posible enviar mensajes desde un sensor - ArduinoUNO y recibirlos desde este servidor mqtt - mosca?, alguien lo ha intentado?, si algu...

* **eyesidmorenov** (1) [61600](https://platzi.com/comentario/624395/) 
Que explicaci√≥n habr√≠a de utilizar Express y Socket IO. con respecto a MQTT que utiliza un servidor Mosca. El servidor Mosca es especiali...

* **Jos√© Ricardo Romo Guti√©rrez** (1) [38441](https://platzi.com/comentario/344083/) 
ya pude correr el servidor, pero no me recibe mensajes, abro una consola y pungo esto. mqtt pub -t 'agent/message' -h localhost -m ...

	* **JuanJoMh** [38441] (2)

		Tenes dos consolas abiertas? Una corriendo el servidor y en otra consola nueva le pones ese comando.  
		En la primera consola, donde tenes corriendo el servidor es donde se muestra el mensaje.
		
		Ese comando que pusiste esta bien, debe ser alg√∫n otro problema

* **Hugo Mart√≠nez** (0) [275395](https://platzi.com/comentario/275395/) 

	Me lanza este error al ejecutar
	``` 
	    npm run start-dev
	    
	    CPANAXMAC:platziverse-mqtt CPANAXMAC$ npm run start-dev
	    > platziverses-mqtt@1.0.0 start-dev /Users/CPANAXMAC/Documents/Hugo/Curso de Node.js/platziverse/platziverse-mqtt> DEBUG=platziverses:* nodemon server.js
	    [nodemon] 1.17.2
	    [nodemon] to restart at any time, enter `rs`[nodemon] watching: *.*
	    [nodemon] starting `node server.js`{"pid":12601,"hostname":"CPANAXMAC.local","name":"mosca","level":50,"time":1521648348672,"msg":"Error starting Mosca Server","v":1}
	    [fatal error] listen EADDRINUSE :::1883Error: listen EADDRINUSE :::1883
	        at Object._errnoException (util.js:1022:11)    at _exceptionWithHostPort (util.js:1044:20)
	        at Server.setupListenHandle [as _listen2] (net.js:1367:14)    at listenInCluster (net.js:1408:12)
	        at Server.listen (net.js:1492:7)    at /Users/CPANAXMAC/Documents/Hugo/Curso de Node.js/platziverse/platziverse-mqtt/node_modules/mosca/lib/server.js:225:16
	        at makeCall (/Users/CPANAXMAC/Documents/Hugo/Curso de Node.js/platziverse/platziverse-mqtt/node_modules/fastseries/series.js:119:7)
	        at NoResultsHolder.release (/Users/CPANAXMAC/Documents/Hugo/Curso de Node.js/platziverse/platziverse-mqtt/node_modules/fastseries/series.js:67:9)
	        at series (/Users/CPANAXMAC/Documents/Hugo/Curso de Node.js/platziverse/platziverse-mqtt/node_modules/fastseries/series.js:39:14)
	        at Object.eachSeries (/Users/CPANAXMAC/Documents/Hugo/Curso de Node.js/platziverse/platziverse-mqtt/node_modules/steed/steed.js:47:5)    at Server.steed.series.logInfo (/Users/CPANAXMAC/Documents/Hugo/Curso de Node.js/platziverse/platziverse-mqtt/node_modules/mosca/lib/server.js:211:13)    at makeCall (/Users/CPANAXMAC/Documents/Hugo/Curso de Node.js/platziverse/platziverse-mqtt/node_modules/fastseries/series.js:117:7)
	        at ResultsHolder.release (/Users/CPANAXMAC/Documents/Hugo/Curso de Node.js/platziverse/platziverse-mqtt/node_modules/fastseries/series.js:96:9)    at Server.steed.series.steed.eachSeries.fallback (/Users/CPANAXMAC/Documents/Hugo/Curso de Node.js/platziverse/platziverse-mqtt/node_modules/mosca/lib/server.js:204:9)
	        at makeCall (/Users/CPANAXMAC/Documents/Hugo/Curso de Node.js/platziverse/platziverse-mqtt/node_modules/fastseries/series.js:117:7)
	        at ResultsHolder.release (/Users/CPANAXMAC/Documents/Hugo/Curso de Node.js/platziverse/platziverse-mqtt/node_modules/fastseries/series.js:96:9)
	        at RedisAscoltatore.<anonymous> (/Users/CPANAXMAC/Documents/Hugo/Curso de Node.js/platziverse/platziverse-mqtt/node_modules/ascoltatori/lib/ascoltatori.js:93:9)    at Object.onceWrapper (events.js:313:30)
	        at emitNone (events.js:111:20)    at RedisAscoltatore.emit (events.js:208:7)
	        at RedisAscoltatore.updateReady [as _updateReady] (/Users/CPANAXMAC/Documents/Hugo/Curso de Node.js/platziverse/platziverse-mqtt/node_modules/ascoltatori/lib/redis_ascoltatore.js:144:10)    at Redis.<anonymous> (/Users/CPANAXMAC/Documents/Hugo/Curso de Node.js/platziverse/platziverse-mqtt/node_modules/ascoltatori/lib/redis_ascoltatore.js:88:12)
	    [nodemon] app crashed - waiting for file changes before starting...
	    
	```
	
	Ayudaaa por favor

	* **Luis Antonio Schmiel Paredes** [275395] (0)

		Hola hugomartinez29, el error ocurre porque el puerto 1883 esta siendo usado por alguna otra aplicaci√≥n. trata de cambiar de puerto por el 1884 o por el 6379

* **Wilmer Javier Garz√≥n Cabezas** (0) [258784](https://platzi.com/comentario/258784/) 

	A algunos le arrojara error de permisos(es mi caso), solo es que corran el comando de instalacion de mqtt como super usuarios es decir con el sudo antes.

* **Andres Leonardo Arevalo** (0) [244726](https://platzi.com/comentario/244726/) 

	Manejo de errores

* **brapastor** (0) [244038](https://platzi.com/comentario/244038/) 

	id que el servidor mqtt nos autogenera 

* **Jose Berna** (0) [229106](https://platzi.com/comentario/229106/) 

	Hola, trate de usar el mqtt pero al ejecutar el comando:  
	`npx mqtt pub -t 'agent/message' -h localhost -m '{"hello" : "platziverse"}`
	
	√≥
	
	`mqtt pub -t 'agent/message' -h localhost -m '{"hello" : "platziverse"}`
	
	Se crea una nueva linea en terminal que no muestra nada y no avanza de ahi, por otro lado, el terminal donde esta corriendo el servidor tampoco presenta cambios.

	* **jhojangarcia** [229106] (0)

		Hola! Revisa que la linea del namespace del debug este bien escrita, es decir que diga ‚Äúplatziverse:mqtt‚Äù, me sucedi√≥ que tenia mal escrito esto y por eso no mostraba nada en la consola.

* **Jos√© Iv√°n Sandoya** (0) [228662](https://platzi.com/comentario/228662/) 

	#help hola, al ejecutar el comando mqtt para probar el env√≠o de mensajes obtuve
	``` 
	    bash:mqtt: command not found
	    
	```
	
	Saben qu√© puede estar ocurriendo?

	* **Jos√© Iv√°n Sandoya** [228662] (0)

		Lo pude resolver, agregando **_npx_** antes de ejecutar todo el comando, es decir:
		``` 
		    npx mqtt pub -t 'agent/message' -h localhost -m '{"hello" : "platziverse"}'
		    
		```

	* **Joaquin Araujo** [228662] (0)

		¬øLo instalaste de forma global con `npm install -g mqtt`?

	* **Jos√© Iv√°n Sandoya** [228662] (0)

		Hola Joaqu√≠n, si.

	* **Joaquin Araujo** [228662] (0)

		¬øY no te funcion√≥ con `mqtt ...`? Que raro‚Ä¶ yo uso Linux y me funcion√≥ sin problemas

## 0310. C√≥mo integrar el servidor MQTT con la base de datos [8346](https://platzi.com/clases/1151-nodejs/8346-como-integrar-el-servidor-mqtt-con-la-base-de-dato/)

### Descripci√≥n:


Hay muchas formas de publicar nuestro m√≥dulo. En este caso vamos a referenciarlo como un m√≥dulo local.

## Reto #3:

¬øVes un patr√≥n aqu√≠? - El m√≥dulo de configuraci√≥n se reutiliza del script de configuraci√≥n de la base de datos, puedes volverlo un m√≥dulo standalone? c√≥mo lo llamar√≠as?

### Links:

* [GitHub - platzi/platziverse at 18-integrar-platziverse-db-mqtt](https://github.com/platzi/platziverse/tree/18-integrar-platziverse-db-mqtt)

### Comentarios:

* **Joaquin Araujo** (11) [229772](https://platzi.com/comentario/229772/) 

	**[Reto 3] ¬øComo lo complet√©?**
	
	En el m√≥dulo de **platziverse-db** cre√© un archivo con el nombre `config-db.js` y dentro de el export√© una **function** con un par√°metro que por defecto est√° `true`, esto con el fin de cuando se ejecut√© el test de `npm run setup` recree la Database o simplemente la cree.
	
	* **platziverse-/config-db.js** Configuraci√≥n de la Base de Datos.
	
	
	``` 
	    const debug = require('debug')('platziverse:db:setup')
	    
	    // Objeto de configuraci√≥n de la Base de Datos
	    module.exports = function (init = true) {
	      return {
	        database: process.env.DB_NAME || 'platziverse', /* Nombre de la DB  */
	        username: process.env.DB_USER || 'platzi',      /* Usuario          */
	        password: process.env.DB_PASS || 'platzi',      /* Contrase√±a       */
	        local: process.env.DB_HOST || 'localhost',      /* Direcci√≥n IP     */
	        dialect: 'postgres', /* Nombre del gestor de DBs a usar en el proyecto */
	        logging: s => debug(s),
	        setup: init /* Restauraci√≥n de la Database */
	      }
	    }
	    
	```
	
	Requer√≠ la funci√≥n en `setup.js` sin pasarle ning√∫n parametro ya que por defecto esta establecido que **setup: true**.
	
	* **platziverse-db/setup.js** Test de NPM que crea la DB o la recrea (en caso de que ya exista).
	
	
	``` 
	    constconfig = require('./config-db')()
	    
	```
	
	Por √∫ltimo en el m√≥dulo de **platziverse-mqtt** en el archivo `server.js` requer√≠ el archivo de configuraci√≥n y le pas√© como argumento `false` porque no quiero que se recree la base de datos, por ende **setup: false**.
	
	* **platziverse-mqtt/server.js**
	
	
	``` 
	    const config = require('../platziverse-db/config-db')(false)
	    
	```

	* **mateog** [229772] (1)

		gracias por el aporte, mas o menos as√≠ la tenia en mente pero no sabia como implementarla

* **chepix10** (5) [276405](https://platzi.com/comentario/276405/) 

	No estoy seguro s√≠ el problema solo ser√° conmigo, pero al momento de instalar el paquete local no lo logr√© hacer como lo hizo Juli√°n. Tuve que eliminarlo del package.json y correr lo siguiente en la consola:
	``` 
	    npm install -S ../platziverse-db
	    
	```
	
	Estoy utilizando la versi√≥n de npm 5.7.1 y de node 9.9.0 por si a alguien m√°s le puede llegar a servir. Tambi√©n intent√© eliminando la carpeta node_modules e instalando todos los paquetes, pero no funcion√≥ üòï, solo corriendo el comando que les dej√©.
	
	Saludos

	* **Miguel Angel Gatto** [276405] (0)

		A mi me acaba de pasar igual que a vos. Gracias por el dato! Solucionado. Ahora tengo otros errores pero eso me lo encuentra.

	* **Luis Antonio Schmiel Paredes** [276405] (0)

		Buen aporte, me paso lo mismo.

* **Enzo Aliatis** (4) [195141](https://platzi.com/comentario/195141/) 

	Reto #3 con una carpeta config en la ra√≠z que exporte una funci√≥n
	``` 
	    module.exports = functionconfig (configExtra) {
	      const config = {
	        database: process.env.DB_NAME || 'platziverse',
	        username: process.env.DB_USER || 'platzi',
	        password: process.env.DB_PASS || 'platzi',
	        hostname: process.env.DB_HOST || 'localhost',
	        dialect: 'postgres',
	        loggin: s => debug(s),
	        setup: true
	      }
	      
	      functionextend (obj, values) {
	        const clone = Object.assign({}, obj)
	        returnObject.assign(clone, values)
	      }
	    
	      if (configExtra) {
	        return extend(config, configExtra)
	      }
	    
	      return config
	    }
	    
	    
	    
	    ejemplo :
	      const conf = require('../config')
	      const config = conf()
	    
	      await db(config).catch(handleFatalError)
	    
	```

	* **Enzo Aliatis** [195141] (0)

		para el server la conf ser√≠a:
		``` 
		    constconfig = conf({setup: false})
		    
		```

* **JUAN SILVA** (1) [899436](https://platzi.com/comentario/899436/) 

	se puede usar con el m√≥dulo dotenv un llamado a los datos de configuraci√≥n y ponerlos en la raiz como un archivo oculto con la extensi√≥n .env

* **Omar Flores Grimontt** (1) [524202](https://platzi.com/comentario/524202/) 

	Reto:
	
	Cree un nuevo m√≥dulo en la carpeta raiz al cual llam√© platziverse-utils
	
	![Screenshot from 2019-03-01 06-20-34.png](https://static.platzi.com/media/user_upload/Screenshot%20from%202019-03-01%2006-20-34-9878cde5-f15e-4eb4-84d5-9751a0a4d55e.jpg)
	
	En √©l tengo tengo todas las variables, o m√©todos que se necesiten utilizar en diversos m√≥dulos del proyecto, como config y handleFatalError (hasta ahora s√≥lo esos dos jaja).
	
	En request-utils exporto un objeto con un par√°metro handleFatalError, que es una funci√≥n que recibe un error.
	
	![Screenshot from 2019-03-01 06-24-19.png](https://static.platzi.com/media/user_upload/Screenshot%20from%202019-03-01%2006-24-19-3146bdc3-ea48-4b33-a8cf-f4190ec0ee14.jpg)
	
	Y en db-utils exporto otro objeto con un par√°metro config, que tambi√©n es una funci√≥n que recibe setup y logging
	
	![Screenshot from 2019-03-01 06-25-59.png](https://static.platzi.com/media/user_upload/Screenshot%20from%202019-03-01%2006-25-59-5b6025f7-3a7c-4635-aec7-1600fe65b2b7.jpg)
	
	En index.js exporto otro objeto con cada uno de los objetos anteriores de esta manera.
	
	![Screenshot from 2019-03-01 06-27-48.png](https://static.platzi.com/media/user_upload/Screenshot%20from%202019-03-01%2006-27-48-8e2e38d9-fa2c-42eb-8f86-908cdc9f35f6.jpg)
	
	Para luego, despu√©s de linkear el m√≥dulo en los m√≥dulos que sea necesario, usarlo de la siguiente manera.
	
	![Screenshot from 2019-03-01 06-29-59.png](https://static.platzi.com/media/user_upload/Screenshot%20from%202019-03-01%2006-29-59-c92fc99e-0009-4a04-9a63-aba944693b03.jpg) ![Screenshot from 2019-03-01 06-33-20.png](https://static.platzi.com/media/user_upload/Screenshot%20from%202019-03-01%2006-33-20-65b7c3bf-8c1b-44b7-bccc-96a77c416352.jpg)

* **JusethAg** (1) [302129](https://platzi.com/comentario/302129/) 

	Con el objetivo de que las configuraciones no dependan de ning√∫n m√≥dulo, decid√≠ crear un m√≥dulo llamado: **platziverse-utils** , donde pretendo agregar las diversas configuraciones que se vengan, adem√°s de agregar otras utilier√≠as como el manejador de excepciones que comienza a repetirse.
	
	Comparto el entry-point del m√≥dulo:
	``` 
	    'use strict'
	    
	    var dbConfig = require('./configs/db-config')
	    var handleException = require('./handlers/exception')
	    
	    const utils = {
	      configs: {
	        db: dbConfig
	      },
	      handlers: {
	        exception: handleException
	      }
	    }
	    
	    module.exports = utils
	    
	```
	
	Sin embargo, no me agrada del todo la forma en que se accede a cada utiler√≠a, ¬øAlguna sugerencia?
	
	Eg:
	``` 
	    const platziverseUtils = require('platziverse-utils')
	    const handleException = platziverseUtils['handlers']['exception']
	    
	```

	* **JusethAg** [302129] (0)

		√ì en su defecto, se podr√≠a acceder de la siguiente forma
		``` 
		    const { configs, handlers } = require('platziverse-utils')
		    const handleException = handlers['exception']
		    
		```
		
		Pero me sigue pareciendo poco pr√°ctico.

* **Julian Oswaldo Florez Reyes** (1) [253718](https://platzi.com/comentario/253718/) 

	Al momento de instalar npm surge el siguiente error. Me pueden ayudar.
	``` 
	    /bin/sh: pkg-config: command not found
	    gyp: Callto'pkg-config libzmq --libs' returned exitstatus127whilein binding.gyp. while trying toload binding.gyp
	    gyp ERR! configure error
	    gyp ERR! stack Error: `gyp`failedwithexit code: 1
	    gyp ERR! stack     at ChildProcess.onCpExit (/usr/local/lib/node_modules/npm/node_modules/node-gyp/lib/configure.js:336:16)
	    gyp ERR! stack     at emitTwo (events.js:126:13)
	    gyp ERR! stack     at ChildProcess.emit (events.js:214:7)
	    gyp ERR! stack     at Process.ChildProcess._handle.onexit (internal/child_process.js:198:12)
	    gyp ERR! System Darwin 17.4.0
	    gyp ERR! command "/usr/local/bin/node""/usr/local/lib/node_modules/npm/node_modules/node-gyp/bin/node-gyp.js""rebuild"
	    gyp ERR! cwd /Users/JulianFlorez/minka/platziverse/platziverse-mqtt/node_modules/zmq
	    gyp ERR! node -v v8.9.4
	    gyp ERR! node-gyp -v v3.6.2
	    gyp ERR! not ok
	    npm WARN optional SKIPPING OPTIONAL DEPENDENCY: zmq@2.15.3 (node_modules/zmq):
	    npm WARN optional SKIPPING OPTIONAL DEPENDENCY: zmq@2.15.3install: `node-gyp rebuild`
	    npm WARN optional SKIPPING OPTIONAL DEPENDENCY: Exitstatus1
	    
	    up todatein15.265s
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [253718] (2)

		prueba instalando con brew el paquete pkg-config
		``` 
		    brew install pkg-config
		    
		```

* **Dobleve Tres** (1) [201285](https://platzi.com/comentario/201285/) 

	hice un nuevo modulo completo donde exporta un objeto con distintas configuraciones en este caso solo la de la DB, para poder reutilizar en un futuro
	``` 
	    'use strict'
	    const dbConfig = require('./lib/config-db.js')
	    
	    module.exports=  {
	      dbConfig
	    }
	    
	    
	```

* **Jordi** (0) [255612](https://platzi.com/comentario/255612/) 

	Me salta un error con db, alguna idea de porque?
	
	![Captura.PNG](https://static.platzi.com/media/user_upload/Captura-b6aa0842-171f-4d38-adfa-690e8781916d.jpg)

	* **Diego Alexander Forero Higuera (Platzi)** [255612] (2)

		Creo que tu problema es que no estas llamando la funci√≥n de manera asincrona y si pones es await  
		tu tienes:
		``` 
		    server.on('ready', () => {
		    	const services = await db(config).catch(handleFatalError)
		    	Agent = services.Agent
		    	Metric = services.Metric
		    	console.log(`${chalk.green('[platziverse-mqtt]')} server is running`)
		    })
		    
		```
		
		y debe ser
		``` 
		    server.on('ready', async () => {
		      const services = await db(config).catch(handleFatalError)
		    
		      Agent = services.Agent
		      Metric = services.Metric
		    
		      console.log(`${chalk.green('[platziverse-mqtt]')} server is running`)
		    })
		    
		```

	* **Jordi** [255612] (0)

		Vale, correcto, gracias!

* **Jordi** (0) [255610](https://platzi.com/comentario/255610/) 

	Cuando hago npm install se destruye todo:
	
	![Captura.PNG](https://static.platzi.com/media/user_upload/Captura-98ee3c80-bb36-4b58-981f-cf40ab8c38e8.jpg)
	
	Package.json
	``` 
	    {
	      "name": "platziverse-mqtt",
	      "version": "1.0.0",
	      "private": true,
	      "description": "A Simple IoT Platform - MQTT Server",
	      "main": "server.js",
	      "scripts": {
	        "lint": "standard",
	        "start-dev": "DEBUG=platziverse:* nodemon server.js",
	        "start": "NODE_ENV=production node server.js"
	      },
	      "keywords": [],
	      "author": "",
	      "license": "MIT",
	      "devDependencies": {
	        "nodemon": "^1.14.12",
	        "standard": "^10.0.3"
	      },
	      "dependencies": {
	        "chalk": "^2.3.0",
	        "debug": "^3.1.0",
	        "mosca": "^2.7.0",
	        "mqtt": "^2.15.2",
	        "platziverse-db": "file:../platziverse-db",
	        "redis": "^2.8.0"
	      }
	    }
	    
	```

	* **Jordi** [255610] (0)

		C√≥digo de server.js
		``` 
		    'use strict'
		    
		    const debug = require('debug')('platziverse:mqtt')
		    const mosca = require('mosca')
		    const redis = require('redis')
		    const chalk = require('chalk')
		    const db = require('platziverse-db')
		    const config = require('../platziverse-db/config-db')(false)
		    
		    const backend = {
		    	type: 'redis',
		    	redis,
		    	return_buffers: true
		    }
		    
		    const settings = {
		    	port: 1883,
		    	backend
		    }
		    
		    const server = new mosca.Server(settings)
		    
		    let Agent, Metric
		    
		    server.on('ready', () => {
		    	const services = await db(config).catch(handleFatalError)
		    	Agent = services.Agent
		    	Metric = services.Metric
		    	console.log(`${chalk.green('[platziverse-mqtt]')} server is running`)
		    })
		    
		    server.on('error', handleFatalError)
		    
		    server.on('clientConnected', client => {
		    	debug(`Client Connected: ${client.id}`)
		    })
		    
		    server.on('clientDisconnected', client => {
		    	debug(`Client Disconnected ${client.id}`)
		    })
		    
		    server.on('published', (packet, client) => {
		    	debug(`Received: ${packet.topic}`)
		    	debug(`Payload: ${packet.payload}`)
		    })
		    
		    
		    functionhandleFatalError(err) {
		    	console.error(`${chalk.red('[Fatal error]')}${err.message}`)
		    	console.error(err.stack)
		    	process.exit(1)
		    }
		    
		    process.on('uncaughtException', handleFatalError)
		    process.on('unhandledRejection', handleFatalError)
		    
		```

	* **Jordi** [255610] (0)

		He borrado la carpeta modules y la he reinstalado, me ha funcionado:
		
		npm -rf node_modules && npm install

* **Mario Campbell** (0) [245037](https://platzi.com/comentario/245037/) 

	Listo el Reto #3
	
	<https://bitbucket.org/kmpbell31/platziverse/commits/630a77370395cc2586862f7cad880cb03e772c45>
	
	Quedo atento de comentarios, gracias

* **Jorge D√≠az Hern√°ndez** (0) [202165](https://platzi.com/comentario/202165/) 

	Al correr mi proyecto me aparece el siguiente mensaje de error en la terminal:
	
	C:\Users\jorge.d\Documents\curso_node\platziverse\platziverse-mqtt>node server.js  
	[ioredis] Unhandled error event: Error: connect ECONNREFUSED 127.0.0.1:6379  
	at Object._errnoException (util.js:1019:11)  
	at _exceptionWithHostPort (util.js:1041:20)  
	at TCPConnectWrap.afterConnect [as oncomplete] (net.js:1175:14)
	
	Ya intent√© de todo y busqu√© mucho en internet, pero a√∫n no puedo solucionarlo ‚Ä¶ Ayuda por favor!

	* **Diego Alexander Forero Higuera (Platzi)** [202165] (1)

		Al parecer no se puede conectar el el servidor de MQTT revisa que este levantado el servidor y que todo este correctamente configurado.
		
		Puedes compartir el c√≥digo para ver si hay alg√∫n error.

* **Nicol√°s Mej√≠a Correa** (0) [194110](https://platzi.com/comentario/194110/) 

	Que ventaja tiene importar el m√≥dulo `platziverse-db` desde el package.json a importar el m√≥dulo con `require()`?

	* **Diego Alexander Forero Higuera (Platzi)** [194110] (1)

		Para usarlo en el package.json debe estar registrado en npm e instalarse como una dependencia de proyecto y no como el proyecto como tal.

## 0320. C√≥mo almacenar la informaci√≥n del agente y reportar el agente conectado [8347](https://platzi.com/clases/1151-nodejs/8347-como-almacenar-la-informacion-del-agente-y-reporta/)

### Descripci√≥n:


Para implementar la persistencia de los mensajes en la base de datos necesitamos tener una referencia de todos los agentes que tenemos conectados. Tenemos que crear un mapa de **JavaScript.**  
Cada vez que un cliente se conecte vamos a capturar el **ID** y la informaci√≥n del agente. Por ahora no conocemos la informaci√≥n porque no hemos recibido el primer mensaje, as√≠ que m√°s adelante le vamos a setear la informaci√≥n.

Despu√©s vamos a empezar a trabajar con los mensajes que publican en nuestro servidor. Para eso vamos a optener el topic y hacer un switch.  
El **switch** es una estructura de control de **JS** que permite ejecutar un c√≥digo.

### Links:

* [GitHub - platzi/platziverse at 19-como-almacenar-agente](https://github.com/platzi/platziverse/tree/19-como-almacenar-agente)

### Comentarios:

* **Alejandro Sulbaran** (9) [302761](https://platzi.com/comentario/302761/) 

	Para aquellos que no entiendan porque se tiene usar
	``` 
	    if (payload instanceOf Buffer)
	    
	```
	
	les recomiendo leer [este genial articulo ](https://medium.freecodecamp.org/do-you-want-a-better-understanding-of-buffer-in-node-js-check-this-out-2e29de2968e8) el cual explica muy bien como funciona esta instancia y sus diferentes usos

	* **Oscar Barajas Tavares (Platzi)** [302761] (0)

		¬°Gracias! @ersulba muy buen aporte.

* **JusethAg** (2) [302272](https://platzi.com/comentario/302272/) 

	Dado que listener **published** comienza a crecer en cu√°nto a complejidad ciclom√°tica, decid√≠ separarlo, con el objetivo de facilitar el testing y no hacer tan complejo y cargado ese m√©todo.  
	Comparto el c√≥digo, cualquier sugerencia es bienvenida.
	``` 
	    server.on(`published`, async (packet, client) => {
	      debug(`Received: ${packet.topic}`)
	    
	      switch (packet.topic) {
	        caseAGENT_CONNECTED_TOPIC:
	        caseAGENT_DISCONNECTE_TOPIC:
	          debug(`Payload: ${packet.payload}`)
	          break
	        caseAGENT_MESSAGE_TOPIC:
	          debug(`Payload: ${packet.payload}`)
	          await onAgentMessagePublished(packet.payload)
	          break
	      }
	    })
	    
	    asyncfunctiononAgentMessagePublished(binaryPayload) {
	      const payload = parsePayload(binaryPayload)
	    
	      if (payload) {
	        payload.agent.connected = true
	    
	        const agent = await saveAgentConnected(payload)
	    
	        if (!clients.get(client.id)) {
	          clients.set(client.id, agent)
	          notifyAgentConnected(agent)
	        }
	      }
	    }
	    
	    asyncfunctionsaveAgentConnected(payload) {
	      let agent
	      try {
	        agent = await Agent.createOrUpdate(payload.agent)
	      } catch (error) {
	        return handleError(error)
	      }
	    
	      debug(`Agent ${agent.uuid} saved`)
	      return agent
	    }
	    
	    functionnotifyAgentConnected(agentData) {
	      server.publish({
	        topic: AGENT_CONNECTED_TOPIC,
	        payload: JSON.stringify({
	          uuid: agentData.uuid,
	          name: agentData.name,
	          hostname: agentData.hostname,
	          pid: agentData.pid,
	          connected: agentData.connected
	        })
	      })
	    }
	    
	```

* **Juan  Sanchez** (2) [224644](https://platzi.com/comentario/224644/) 

	Por que se usa Map?  
	No termino de entender eso

	* **Diego Alexander Forero Higuera (Platzi)** [224644] (4)

		Map es un objeto que itera sobre sus elementos en el orden que son insertados y devuelve un objeto de llave valor para cada iteraci√≥n.
		
		Puedes ver mas informaci√≥n aqu√≠ <https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Map>

* **Deyvis Neyser Valdez Gavilan** (1) [832999](https://platzi.com/comentario/832999/) 

	Hola amigos!, alguien sabe a que se debe este error:  
	![cmd.PNG](https://static.platzi.com/media/user_upload/cmd-02724767-7aed-4d7b-8c78-7c020cad54b9.jpg)
	
	Este es mi c√≥digo:
	``` 
	    'use strict'
	    
	    const debug = require('debug')('platziverse:mqtt')
	    const mosca = require('mosca')
	    // const redis = require('redis')
	    const mongo = require('mongoose')
	    const chalk = require('chalk')
	    const db = require('platziverse-db')
	    const { configuration } = require('platziverse-utils')
	    const { parsePayload } = require('./utils')
	    
	    // const backend = {
	    //   type: 'redis',
	    //   redis,
	    //   return_buffers: true
	    // }
	    const backend = {
	      type: 'mongoose',
	      url: 'mongodb+srv://db_user_platzinodejs:baEsdbcl2zC0k0Nd@cluster0-seudv.mongodb.net/test2?retryWrites=true&w=majority',
	      // redis,
	      mongo,
	      return_buffers: true
	    }
	    
	    const settings = {
	      port: 1883,
	      backend
	    }
	    
	    const config = configuration(false) // El setup es falso //Revisar el m√≥dulo platziverse-utils
	    
	    const server = new mosca.Server(settings)
	    const clients = newMap() // El objeto Map almacena pares clave/valor. Cualquier valor (tanto objetos como valores primitivos) pueden ser usados como clave o valor.
	    
	    let Agent, Metric
	    
	    server.on('clientConnected', client => {
	      debug(`Client Connected: ${client.id}`)
	      clients.set(client.id, null)
	    })
	    
	    server.on('clientDisconnected', async client => {
	      debug(`Client Disconnected: ${client.id}`)
	      const agent = clients.get(client.id)
	    
	      if (agent) {
	        agent.connected = false// Mark agent as disconnected (Marcar agente como desconectado)
	      }
	    
	      try {
	        await Agent.createOrUpdate(agent)
	      } catch (e) {
	        return handleError(e)
	      }
	    
	      clients.delete(client.id)
	    
	      server.publish({
	        topic: 'agent/disconnected',
	        payload: JSON.stringify({
	          agent: {
	            uuid: agent.uuid
	          }
	        })
	      })
	    
	      debug(`Clent (${client.id}) associated to Agent (${agent.uuid}) marked as disconnected`)
	    })
	    
	    server.on('published', async (packet, client) => {
	      debug(`Received: ${packet.topic}`) // 'topic' viene siendo el tipo de mensaje en este caso ser√≠a agent/connected, agent/disconnected
	    
	      switch (packet.topic) {
	        case'agent/connected':
	        case'agent/disconnected':
	          debug(`Payload: ${packet.payload}`)
	          break
	        case'agent/message':
	          debug(`Payload: ${packet.payload}`)
	    
	          const payload = parsePayload(packet.payload)
	    
	          if (payload) {
	            payload.agent.connected = true
	    
	            let agent
	            try {
	              agent = await Agent.createOrUpdate(payload.agent)
	            } catch (e) { // Si llega un agente con mala informaci√≥n entonces me retorna un error
	              return handleError(e)
	            }
	    
	            debug(`Agent ${agent.uuid} saved`)
	    
	            // Notify Agent is connected
	            if (!clients.get(client.id)) { // Vamos hacer un broadcast o notificar a todos los clientes que esten conectados en este evento o broker que un agente se conect√≥
	              clients.set(client.id, agent)
	              server.publish({
	                topic: 'agent/connected',
	                payload: JSON.stringify({
	                  agent: {
	                    uuid: agent.uuid,
	                    name: agent.name,
	                    username: agent.username,
	                    hostname: agent.hostname,
	                    pid: agent.pid,
	                    connected: agent.connected
	                  }
	                })
	              })
	            }
	    
	            // Store Metrics
	            for (const metric of payload.metrics) { // Me permite iterar sobre un arreglo y obtener cada uno de los objetos de ese arreglo
	              let m // Dentro del for vamos hacer operaciones de async await para almacenar las metricas, es importante utilizar el forof que soporta el async await
	    
	              try {
	                m = await Metric.create(agent.uuid, metric)
	              } catch (error) {
	                return handleError
	              }
	              debug(`Metric ${m.id} save on agent ${agent.uuid}`)
	            }
	          }
	          break
	      }
	    
	      // Esa informacion que va ser enviada va ha venir en el payload
	    })
	    
	    server.on('ready', async () => {
	      const services = await db(config).catch(handleFatalError) // Cuando el servidor esta listo yo instancio mi Base de Datos
	    
	      Agent = services.Agent
	      Metric = services.Metric
	    
	      console.log(`${chalk.green('[platziverse-mqtt]')} server is running`)
	      // console.log("Activo")
	    })
	    
	    server.on('error', handleFatalError)
	    
	    process.on('uncaughtException', handleFatalError)
	    process.on('unhandledRejection', handleFatalError)
	    
	    functionhandleFatalError (err) {
	      console.error(`${chalk.red('[fatal error]')}${err.message}`) // Imprimimos el mensaje de error
	      console.error(err.stack) // Imprimimos el tipo de error que esta ocurriendo
	      process.exit(1) // Matamos el proceso retornando un c√≥digo 1, que es un c√≥digo de error
	    }
	    
	    functionhandleError (err) {
	      console.error(`${chalk.red('[error]')}${err.message}`) // Imprimimos el mensaje de error
	      console.error(err.stack) // Imprimimos el tipo de error que esta ocurriendo
	      // process.exit(1) // Matamos el proceso retornando un c√≥digo 1, que es un c√≥digo de error
	    }
	    
	```
	
	.  
	Saludos!

	* **jenapi** [832999] (1)

		Saludos, no puedo ver en que linea dice que se produce el error. Puedes decirme que linea es?? (tambien pasa la linea que es en tu code para poder ayudarte)

	* **Deyvis Neyser Valdez Gavilan** [832999] (1)

		Claro amigo,
		
		![unexpected lexica.PNG](https://static.platzi.com/media/user_upload/unexpected%20lexica-fbd74f38-32a9-41b6-bd35-c9e2911f72fa.jpg)

	* **jenapi** [832999] (1)

		Seg√∫n parece es un error dentro del modulo de parsePayload. trata de revisarlo. [https://stackoverflow.com/questions/50752987/eslint-no-case-declaration-unexpected-lexical-declaration-in-case-block](url) este link es una pregunta en stack overflow que lo explica mejor (est√° en ingles ).

* **Leandro Casco** (1) [192278](https://platzi.com/comentario/192278/) 

	Una pregunta, ya que el unico caso que nos interesa es _‚Äòagent/message‚Äô_ , en lugar de usar un **switch** no ser√≠a m√°s eficiente usar un **if**?

	* **Diego Alexander Forero Higuera (Platzi)** [192278] (3)

		En este caso se usa el switch ya que los eventos de `agent/connected` y `agent/disconnected` nos interesa controlarlos en modo de debug, posiblemente m√°s adelante hagamos algo con esos dos casos.
		
		Puedes usar if si prefieres y no enviar el debug en los primeros casos y solo concentrarte en el `agent/message`

	* **Jesus Sandrea** [192278] (4)

		Seg√∫n @freddier en el curso de programaci√≥n b√°sica switch es del diablo! üòÉ

	* **Joaquin Araujo** [192278] (0)

		Eso es contradecirse‚Ä¶

	* **niwdeplus11** [192278] (1)

		se podr√≠a utilizar un if pero estar√≠as limitando los topicos del servidor de mqtt a uno solo, en el switch puedes utilizar tantos topicos como quieras, la idea de un software es dejarlo adaptado al crecimiento del mismo

* **Fernando Salazar** (0) [322099](https://platzi.com/comentario/322099/) 

	No soy el mas habilidoso en cuantos a Buffers en nodejs pero no pudo haber hecho algo algo asi con ese metodo de la clase Buffer y obviarse el bloque try catch? saluditos.
	``` 
	    	if (payload instanceof Buffer)
	    		payload = payload.toJSON().data
	    
	```

* **Miguel Angel Gatto** (0) [294776](https://platzi.com/comentario/294776/) 

	Una pregunta, cuando hago el server.publish, defino un nuevo JSON agent y le paso uno por uno los datos‚Ä¶ dado que el agent que viene desde la base salvado tiene los mismos datos, no puedo simplemente devolver el agent sin definir uno a uno los campos?

* **joseffffffff** (0) [270119](https://platzi.com/comentario/270119/) 

	En el if que se hace en el minuto 6:10 estamos verificando que despu√©s de parsear, no ha habido el error y nos devuelva ‚Äò{}‚Äô, verdad? Pero hacer un ‚Äòif ({})‚Äô da true‚Ä¶, no es as√≠?

* **Jordi** (0) [255621](https://platzi.com/comentario/255621/) 

	Esto es lo mismo?
	
	  1. 
	
	``` 
	    functionparsePayload(payload) {
	    	if (payload instanceof Buffer) {
	    		payload = payload.toString('utf8')
	    	}
	    
	    	try {
	    		payload = JSON.parse(payload)
	    	} catch (e) {
	    		payload = {}
	    	}
	    
	    	return payload
	    }
	    
	    module.exports = {
	    	parsePayload
	    }
	    
	```
	
	  1. 
	
	``` 
	    module.exports = functionparsePayload(payload) {
	    	if (payload instanceof Buffer) {
	    		payload = payload.toString('utf8')
	    	}
	    
	    	try {
	    		payload = JSON.parse(payload)
	    	} catch (e) {
	    		payload = {}
	    	}
	    
	    	return {
	    		parsePayload : payload
	    	}
	    }
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [255621] (1)

		Si, solo cambias donde se hace el export, pero funciona igual, me gusta la primera forma porque es la m√°s est√°ndar y se lee mejor.

	* **Antoni Pierres Portocarrero Bustamante** [255621] (1)

		La primera forma te permite exportar m√°s funciones en un objeto, la segunda solo exportas la funci√≥n que le asignas. üòÉ

* **Jose Vidal** (0) [213020](https://platzi.com/comentario/213020/) 

	Los archivos no se pueden descargar‚Ä¶

	* **AyKaren** [213020] (0)

		He revisado y los he podido descargar, te aparece alg√∫n error al intentar o simplemente no te lo permite?

* **Fernando Salazar** (0) [36436](https://platzi.com/comentario/322099/) 
No soy el mas habilidoso en cuantos a Buffers en nodejs pero no pudo haber hecho algo algo asi con ese metodo de la clase Buffer y obviarse

## 0330. C√≥mo almacenar la informaci√≥n de las m√©tricas [8348](https://platzi.com/clases/1151-nodejs/8348-como-almacenar-la-informacion-de-las-metricas/)

### Descripci√≥n:


Despu√©s de notificar que el agente se conect√≥ exitosamente vamos a almacenar las m√©tricas. Para esto, recordemos que estamos recibiendo un arreglo que contiene las m√©tricas, y vamos a iterar sobre ese arreglo, para obtener cada uno de los objetos que contiene.

¬øC√≥mo identificar cuando alguien se desconecta?

Tenemos un evento que se llama **clientDisconnected.** Ah√≠ vamos a obtener un agente del mapa. Cuando el cliente se desconecta vamos a ver si tenemos un agente, si lo tenemos lo podemos marcar como desconectado y almacenarlo en la base de datos.

### Links:

* [GitHub - platzi/platziverse at 20-como-almacenar-metricas](https://github.com/platzi/platziverse/tree/20-como-almacenar-metricas)

### Comentarios:

* **Marco D'Agostini** (2) [958604](https://platzi.com/comentario/958604/) 

	Con `foreach` tambien se puede usar `await`
	``` 
	    payload.metrics.foreach(async () => {
	        ...
	        await ...
	        ...
	    })
	    
	```

	* **gorydev** [958604] (2)

		NO, la funcion forEach no se puede usar con async/await ya que en su implementaci√≥n esta no le hace await al callback que recibe como parametro y se ejecuta inmediatamente:
		``` 
		    Array.prototype.forEach = function (callback) {
		      for (let i = 0; i < this.length; i++) {
		        callback(this[i], i, this);
		      }
		    }
		    
		```

* **JUAN SILVA** (2) [907287](https://platzi.com/comentario/907287/) 

	mqtt pub -t ‚Äòagent/message‚Äô -m ‚Äòhello‚Äô

* **jenapi** (1) [834151](https://platzi.com/comentario/834151/) 

	A quien no le muestre el mensaje en el debug, prueben hacer un publish en el server.on(‚Äòready‚Äô)

* **henrytabimagiraldo** (1) [226973](https://platzi.com/comentario/226973/) 

	El servidor me imprime constatmente lo siguiente:
	``` 
	    [ioredis]Unhandlederrorevent: Error: connectECONNREFUSED 127.0.0.1:6379
	        atObject.exports._errnoException (util.js:1026:11)
	        atexports._exceptionWithHostPort (util.js:1049:20)
	        atTCPConnectWrap.afterConnect[as oncomplete] (net.js:1136:14)
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [226973] (1)

		No se puede conectar con redis, revisa que redis este levantado y recibiendo conexiones.

	* **David Behar** [226973] (1)

		Genial, me sirvi√≥ tu respuesta Gollum

* **juand_silva** (0) [228824](https://platzi.com/comentario/228824/) 

	No me muestra el payload despues de que se modific√≥ elk evento published, ya he revisado el c√≥digo y no me da. Tampoco sale el mensaje de fatal error.  
	Que podr√° ser‚Ä¶
	
	[NotPayload](https://i.imgur.com/lDNqKxF.png)

	* **Diego Alexander Forero Higuera (Platzi)** [228824] (2)

		Tienes un console.log() que muestre el payload en el flujo de ejecuci√≥n del servidor?, sin ver c√≥digo no se que pueda estar pasando y si no sale error debe ser algo en una validaci√≥n que hace que no entre y se ejecute el c√≥digo.

	* **juand_silva** [228824] (0)

		Gracias @GOLLUM23 por la respuesta
		
		Este es el c√≥digo del server.js
		``` 
		    'use strict'
		    
		    const debug = require('debug')('platziverse:mqtt')
		    const mosca = require('mosca')
		    const redis = require('redis')
		    const chalk = require('chalk')
		    const db = require('platziverse-db')
		    
		    const { parsePayload } = require('./utils')
		    
		    const backend = {
		      type: 'redis',
		      redis,
		      return_buffers: true
		    }
		    
		    const settings = {
		      port: 1883,
		      backend
		    }
		    
		    const config = {
		      database: process.env.DB_NAME || 'platziverse',
		      username: process.env.DB_USER || 'platzi',
		      password: process.env.DB_PASS || 'platzi',
		      host: process.env.DB_HOST || 'localhost',
		      dialect: 'postgres',
		      logging: s => debug(s),
		    }
		    
		    const server = new mosca.Server(settings)
		    const clients = newMap()
		    
		    let Agent, Metric
		    
		    server.on('clientConnected', client => {
		      debug(`Client Connected: ${client.id}`)
		      clients.set(client.id, null)
		    })
		    
		    server.on('clientDisconnected', client => {
		      debug(`Client Disconnected: ${client.id}`)
		    })
		    
		    server.on('published', async (packet, client) => {
		      debug(`Received: ${packet.topic}`)
		    
		      switch (packet.topic) {
		        case'agent/connected':
		        case'agent/disconnected':
		          debug(`Payload: ${packet.payload}`)
		          break
		        case'agent/message':
		          debug(`Payload: ${packet.payload}`)
		    
		          const payload = parsePayload(packet.payload)
		    
		          if (payload) {
		            payload.agent.connected = true
		    
		            let agent
		            try {
		              agent = await Agent.createOrUpdate(payload.agent)
		            } catch (e) {
		              return handleError(e)
		            }
		            debug(`Agent ${agent.uuid} saved`)
		    
		            // Notify Agent is Connected
		            if (!clients.get(client.id)) {
		              clients.set(client.id, agent)
		              server.publish({
		                topic: 'agent/connected',
		                payload: JSON.stringify({
		                  agent: {
		                    uuid: agent.uuid,
		                    name: agent.name,
		                    hostname: agent.hostname,
		                    pid: agent.pid,
		                    connected: agent.connected
		                  }
		                })
		              })
		            }
		    
		            // Store Metrics
		            for (let metric of payload.metrics) {
		              let m
		    
		              try {
		                m = await Metric.create(agent.uuid, metric)
		              } catch (e) {
		                return handleError(e)
		              }
		    
		              debug(`Metric ${m.id} saved on agent ${agent.uuid}`)
		            }
		          }
		          break
		      }
		    })
		    
		    server.on('ready', async () => {
		      const services = await db(config).catch(handleFatalError)
		    
		      Agent = services.Agent
		      Metric = services.Metric
		    
		      console.log(`${chalk.green('[platziverse-mqtt]')} server is running`)
		    })
		    
		    server.on('error', handleFatalError)
		    
		    functionhandleFatalError (err) {
		      console.error(`${chalk.red('[fatal error]')}${err.message}`)
		      console.error(err.stack)
		      process.exit(1)
		    }
		    
		    functionhandleError (err) {
		      console.error(`${chalk.red('[error]')}${err.message}`)
		      console.error(err.stack)
		    }
		    
		    process.on('uncaughtException', handleFatalError)
		    process.on('unhandledRejection', handleFatalError)
		    
		```
		
		este es el c√≥digo utils.js
		``` 
		    'use strict'
		    
		    functionparsePayload (payload) {
		      if (payload instanceof Buffer) {
		        payload = payload.toString('utf8')
		      }
		    
		      try {
		        payload = JSON.parse(payload)
		      } catch (e) {
		        payload = {}
		      }
		    
		      return payload
		    }
		    
		    module.exports = {
		      parsePayload
		    }
		    
		```
		
		Este c√≥digo anterior sin la estructura de control switch en el evento published funciona y muestra el payload:
		``` 
		    'use strict'
		    
		    const debug = require('debug')('project:mqtt')
		    const mosca = require('mosca')
		    const redis = require('redis')
		    const chalk = require('chalk')
		    
		    const backend = {
		      type: 'redis',
		      redis,
		      return_buffers: true
		    }
		    
		    const settings = {
		      port: 1883,
		      backend
		    }
		    
		    const server = new mosca.Server(settings)
		    
		    server.on('clientConnected', client => {
		      debug(`Client Connected: ${client.id}`)
		    })
		    
		    server.on('clientDisconnected', client => {
		      debug(`Client Disconnected: ${client.id}`)
		    })
		    
		    server.on('published', (packet, client) => {
		      debug(`Received: ${packet.topic}`)
		      debug(`Payload: ${packet.payload}`)
		    })
		    
		    server.on('ready', () => {
		      console.log(`${chalk.green('[platziverse-mqtt]')} server is running`)
		    })
		    
		    server.on('error', handleFatalError)
		    
		    functionhandleFatalError () {
		      console.error(`${chalk.red('[fatal error]')}${err.message}`)
		      console.error(err.stack)
		      process.exit(1)
		    }
		    
		    process.on('uncaughtException', handleFatalError)
		    process.on('unhandledRejection', handleFatalError)
		    
		```
		
		Gracias!

	* **juand_silva** [228824] (0)

		En el repositorio de Mosca dicen no usar funciones as√≠ncronas con event emitter, es un modelo incorrecto para la interacci√≥n.
		
		Como resolver esto?

	* **carlos galvan grajales** [228824] (2)

		Me paso que en el switch no entraba en el caso de ‚Äòagent/message‚Äô y encontre que se debe de poner asi:
		``` 
		    case"'agent/message'":
		    
		```
		
		Con comillas dobles encerrando a las comillas simples ya que en la consola con debug aparece:  
		packet.topic: 'agent/message‚Äô  
		y ‚Äòagent/message‚Äô es diferente de agent/message que ponemos en la comparacion del switch

## 0340. Probando el servidor MQTT (Ejemplo con mqtt client) [8349](https://platzi.com/clases/1151-nodejs/8349-probando-el-servidor-mqtt-ejemplo-con-mqtt-client/)

### Descripci√≥n:


Ahora vamos a probar que efectivamente nuestra informaci√≥n se est√© guardando en la base de datos. El **servidor MQTT** es el encargo de enviar el **agentConnected** y **agentDisconnected.** Vamos a enviar un **agentMessage** y el mensaje que vamos a enviar ser√° un objeto **JSON** con la informaci√≥n del agente y la informaci√≥n de las m√©tricas. Un objeto y un arreglo, respectivamente.

## Reto #4:

Actualmente las m√©tricas se almacenan en serie en la base de datos, refactorizar para que se almacenen en paralelo.

### Comentarios:

* **Diego Antonio Bocanegra Galindez** (9) [280606](https://platzi.com/comentario/280606/) 

	El comando de la consola es:
	``` 
	    mqtt pub -t 'agent/message' -m '{"agent": {"uuid": "yyy", "name": "platzi", "username": "platzi", "pid": 10, "hostname": "platzibogota"}, "metrics": [{"type": "memory", "value": "1001"}, {"type": "temp", "value": "33"}]}'
	    
	```

	* **Antonio Diaz de Leon** [280606] (1)

		me funciono perfecto en ubuntu

* **JusethAg** (6) [311166](https://platzi.com/comentario/311166/) 

	Mi soluci√≥n:
	``` 
	    const saveMetricsPromises = payload.metrics.map(async (metric) => {
	        let createdMetric
	        try {
	          createdMetric = await Metric.create(savedAgent.uuid, metric)
	        } catch (error) {
	          return handleError
	        }
	        debug(`Metric ${createdMetric.id} saved on agent ${savedAgent.uuid}`)
	      })
	    
	      try {
	        await Promise.all(saveMetricsPromises)
	      } catch (error) {
	        return handleError(error)
	      }
	    
	```
	
	La forma de comprobar que se est√° ejecutando en paralelo es mandando un nombre de atributo de las m√©tricas mal (types) y corroborar que las dem√°s m√©tricas si fueron guardadas. Ejemplo:
	``` 
	    mqtt pub -t 'agent/message'  -m '{
	            "agent": {
	                    "uuid": "QWER",
	                    "name": "Test",
	                    "username": "test",
	                    "pid": 123,
	                    "hostname": "qa"
	            },
	            "metrics": [{
	                    "types": "memory",
	                    "value": "1024"
	            }, {
	                    "type": "temp",
	                    "value": "34"
	            },
	            {
	                    "type": "asdf",
	                    "value": "34"
	            }]
	    }'
	    
	```

	* **JusethAg** [311166] (3)

		Recomiendo el siguiente art√≠culo, el cu√°l me fue de apoyo: <http://thecodebarbarian.com/common-async-await-design-patterns-in-node.js.html>

	* **mateog** [311166] (1)

		gracias JusethAg por el art√≠culo, y por compartir tu soluci√≥n, me fue de mucha ayuda. se nota que ac√° no s√≥lo se aprende de los profesores

	* **Way** [311166] (1)

		Buena soluci√≥n. Gracias

* **Jes√∫s Alpino** (4) [328664](https://platzi.com/comentario/328664/) 

	Hola, espero esto sea un aporte‚Ä¶  
	en windows para enviar por consola el json bien formado deben colocarlo de la siguiente manera:
	``` 
	    mqtt pub -t agent/message -m {\"agent\":{\"uuid\":\"yyy\",\"name\":\"test\",\"username\":\"platzi\",\"pid\":10,\"hostname\":\"alp-pc\"},\"metrics\":[{\"type\":\"memoria\",\"value\":\"1001\"},{\"type\":\"temp\",\"value\":\"22\"}]}```
	    
	    noten que no coloco las comillas simples al iniciar el mensaje y uso un scape para cada comilla doble del json. Esta es la unica  manera que logre hacer funcionar el mqtt client y guardara el agent y las metricas
	```

	* **Juan David G√≥mez G√≥mez** [328664] (1)

		super excelente aporte, jajaja yo hacia sino revisar mi codigo creyendo que algo andaba mal

	* **Rub√©n Maier Enzler** [328664] (1)

		te amo viejo, lo estoy probando al curso en todos los sistemas operativos y con windows no podia hacerlo andar!

	* **Sebastian** [328664] (1)

		Como ejecuto ese comando?

	* **Rub√©n Maier Enzler** [328664] (1)

		@jaggervland, ejecutalo tal y como est√°:
		``` 
		    mqtt pub -t agent/message -m {\"agent\":{\"uuid\":\"yyy\",\"name\":\"test\",\"username\":\"platzi\",\"pid\":10,\"hostname\":\"alp-pc\"},\"metrics\":[{\"type\":\"memoria\",\"value\":\"1001\"},{\"type\":\"temp\",\"value\":\"22\"}]}
		    
		```
		
		¬øestas en windows? ¬øte tira alg√∫n error en particular?

* **Joaquin Araujo** (4) [231180](https://platzi.com/comentario/231180/) 

	 **Aqu√≠ les comparto un documento JSON con el cual pueden ejecutar una prueba al servidor MQTT:**
	``` 
	    {
	    	"agent": {
	    		"uuid": "xxx",
	    		"name": "Joaquin Araujo",
	    		"username": "joaquinaraujojs",
	    		"pid": 123,
	    		"hostname": "platziMaracaibo"
	    	},
	    	"metrics": [{
	    		"type": "memory",
	    		"value": "1024"
	    	}, {
	    		"type": "temp",
	    		"value": "34"
	    	}]
	    }
	    
	```
	
	Pueden modificar como deseen el documento JSON y aqu√≠ les comparto esta [herramienta](https://jsonlint.com/) que les ayuda a validar sus objetos JSON con el fin de evitar errores üòÉ

	* **Molleapaza Palomino Johnny** [231180] (0)

		lograste almacenar en la base de datos?

	* **Joaquin Araujo** [231180] (0)

		Si, claro, aqu√≠ tienes mi c√≥digo por si surge alguna duda <https://github.com/JoaquinAraujo/platziverse>

* **Leandro Casco** (4) [192303](https://platzi.com/comentario/192303/) 

	No se si es la mejor soluci√≥n, pero funciona. Escucho sugerencias y correcciones:
	``` 
	    // Store Metrics
	            const queries = []
	            
	            payload.metrics.forEach(metric => {
	                    queries.push(Metric.create(agent.uuid, metric)))
	            }
	            
	            Promise.all(queries).then(values => {
	              debug('Records saved:', values)
	            }).catch(e => { 
	              return handleError(e) 
	            })
	    
	```

	* **santiagosemhan** [192303] (1)

		Tengo una duda al respecto y es si las promesas se van ejecutando cuando se crean? En este caso no se ejecutar√≠an al guardadlas en el arreglo?
		
		Saludos

	* **Leandro Casco** [192303] (2)

		Seg√∫n entiendo, lo que pasa es lo siguiente:  
		Las promesas dentro del array se ejecutan, efectivamente, al guardarlas en el array pero nosotros tenemos que tomar el valor que resuelven ya que al ser as√≠ncronas nuestro c√≥digo se sigue ejecutando. Con el Promise.all lo que hacemos es esperar a que todas nos retornen el valor prometido.

	* **Edgar Valdez Moises** [192303] (0)

		Me gusta la soluci√≥n, mi √∫nica duda es la sgte:
		``` 
		    queries.push(Metric.create(agent.uuid, metric)))
		    
		```
		
		No estar√≠a bloqueando el hilo de ejecuci√≥n ??  
		Puesto que estas ejecutando el create y el push.
		
		O al ejecutar Promises.all estos ya pasan en la cola de ejecuci√≥n ???

	* **Dobleve Tres** [192303] (2)

		Creo que es mejor trabajarlas como promesas individuales y no como un conjunto de promesas ya que si te falla una falla la cola entera y es preferible perder una que el listado entero.
		``` 
		    for (let i=0; i < payload.metrics.length: i++) {
		    	Metric.create(agent.uuid, payload.metrics[i]).then( 
		    	function(res) {
		    		debug(`Metric ${res.id} saved on agent ${agent.uuid}`)
		    	}). catch(
		    		function (e) { return handlerError(e)} 
		    	)
		    }
		    
		```

	* **Isabel  Mu√±oz** [192303] (7)

		Aprovechando el m√©todo map que ya crea el nuevo array prodr√≠amos simplificar as√≠:
		``` 
		    // Store Metrics
		    try {
		       awaitPromise.all(payload.metrics.map(metric => Metric.create(agent.uuid, metric)))
		    } catch (err) {
		       return handleError(err)
		    }
		    
		```

	* **Adrian Serna** [192303] (0)

		@doblevetres Si mal no estoy, est√°s haciendo lo mismo que julian‚Ä¶ solo que sin async await

* **Frackend** (2) [606626](https://platzi.com/comentario/606626/) 

	```
	    asyncfunctionstoreMetrics({ uuid }, { metrics }) {
	      Promise.all(
	        metrics.map(async metric => {
	          await Metric.create(uuid, metric)
	            .then(metric => debug(`Metric ${metric.id} saved on agent ${uuid}`))
	            .catch(err => handleError(err));
	        })
	      );
	    
	    
	```

* **ramsses corona** (2) [576093](https://platzi.com/comentario/576093/) 

	Solution:
	``` 
	    awaitPromise.all(payload.metrics.map(metric => {
	              return Metric.create(agent.uuid, metric).then(metric => debug(`metric ${metric.id}, agent ${agent.uuid}`) )
	            })).catch(handleError)
	    
	```

* **Misael Zurdo** (2) [348468](https://platzi.com/comentario/348468/) 

	Esta fue mi manera de hacerlo paralelo  
	Primero cree la funci√≥n saveMetric donde atrapo el error entonces el fallo de guardar una m√©trica no molesta a las demas.
	``` 
	    function saveMetric (agent, metric) {
	      return Metric.create(agent.uuid, metric)
	        .then((m) => {
	          debug(`Metric ${m.id} saved on agent ${agent.uuid}`)
	          return m;
	        })
	        .catch(handleError)
	    }
	    
	```
	
	Luego genero un array de promesas que se van ejecutando, al final ejecuto un promise.all que en verdad no es necesario al menos que quieras esperar que todas terminen de guardarse y hacer algo al final.  
	(como mostrar un mensaje)
	``` 
	    console.log(payloadParse.metrics, typeof payloadParse.metrics)
	            const promises = []
	    
	            for (let metric of payloadParse.metrics) {
	              promises.push(saveMetric(agent, metric))
	            }
	            awaitPromise.all(promises)
	    
	```

	* **luisrangelc** [348468] (1)

		```
		    const promises = [];
		    
		            for (let metric of payload.metrics) {
		              promises.push(saveMetric(agent, metric));
		            }
		    
		```

* **Jose Luis Campos Bautista** (1) [988300](https://platzi.com/comentario/988300/) 

	Comparto del reto:
	``` 
	    // Store metrics
	            let result
	            try {
	              const promises = payload.metrics.map(m => Metric.create(agent.uuid, m))
	              result = awaitPromise.all(promises)
	            } catch (error) {
	              handleFatalError(error)
	            }
	            
	            result.map( r => {
	              debug(`Metric ${r.id} save on agent ${agent.id}`)
	            })
	    
	```

* **Byron Mesias Cueva Cabrera** (1) [983535](https://platzi.com/comentario/983535/) 

	Reto solucionado:
	``` 
	    const saveMetricPromise = []
	            for (const metric of payload.metrics) {
	              saveMetricPromise.push(
	                newPromise((resolve, reject) => {
	                  Metric.create(agent.uuid, metric)
	                  .then(m => {
	                    debug(`Metric ${m.id} saved on agent ${agent.uuid}`)
	                    resolve(m)
	                  })
	                  .catch(reject)
	                })
	              )
	            }
	            awaitPromise.all(saveMetricPromise)
	            debug('Termino de almacenar todas las metricas')
	    
	```

* **jenapi** (1) [835252](https://platzi.com/comentario/835252/) 

	Aqui dejo un modulo que se encarga de hacer la prueba con mqtt
	``` 
	    'use strict';
	    
	    const mqtt = require('mqtt');
	    const client = mqtt.connect([{ host: `localhost`, port: 1883 }]);
	    
	    client.on('connect', function() {
	    	try {
	    		client.publish(
	    			'agent/message',
	    			JSON.stringify({
	    				agent: {
	    					username: 'foo',
	    					name: 'foo',
	    					uuid: 'yyy',
	    					pid: '10',
	    					hostname: 'foo',
	    				},
	    				metrics: [
	    					{ type: 'memmory', value: 1001 },
	    					{ type: 'temp', value: '33' },
	    				],
	    			}),
	    		);
	    		console.log('heheh');
	    	} catch (err) {
	    		console.log(err);
	    		console.log('whoops there is something wrong');
	    	}
	    });
	    
	```

* **Deyvis Neyser Valdez Gavilan** (1) [834835](https://platzi.com/comentario/834835/) 

	Mi soluci√≥n del c√≥digo:
	``` 
	    let m
	            let promesas = payload.metrics.map(m => saveMetrics(agent.uuid, m))
	            try {
	              m = await Promise.all(promesas)
	            } catch (e) {
	              return handleError(e)
	            }
	    
	            for (let i = 0; i < m.length; i++) {
	              debug(`${chalk.bgMagenta(`Metric ${m[i].id} save on agent ${agent.uuid}`)}`)
	            }
	    
	    
	    function saveMetrics(uuid, m) {
	      return new Promise(async (resolve, reject) => {
	        if (!uuid || !m) {
	          reject("Data invalida")
	          returnfalse;
	        }
	    
	        constresult = await Metric.create(uuid, m)
	        resolve(result)
	      }) 
	    }
	    
	    
	```

* **asolorzano** (1) [525674](https://platzi.com/comentario/525674/) 

	Mi soluci√≥n con Async/Await:
	``` 
	    payload.metrics.map(async (metric) => await Metric.create(agent.uuid, metric));
	    
	    
	```

	* **charl-barrera** [525674] (1)

		En teoria esta soluci√≥n es la misma que la del for each, porque en la primera iteraci√≥n del map, espera a que se resuelva la promesa para seguir con la segunda iteraci√≥n del mismo map.

* **GerAlfonso** (1) [358303](https://platzi.com/comentario/358303/) 

	Para solucionar este reto utilizo Promise.all y un generador. Adicionalmente utilizo una funcion saveMetric para gurdar en la base de datos de manera as√≠ncrona.
	``` 
	    server.on('published', async (packet, client) => {
	      
	      ...
	      asyncfunctionsaveMetric(Metric, uuid, metric) {
	        returnawait Metric.create(uuid, metric);
	      }
	      function* metricsToStore(metrics, Metric, agent) {
	        for (let metric of metrics) {
	          try {
	            yield saveMetric(Metric, agent.uuid, metric);
	          } catch (e) {
	            yield handleError(e);
	          }
	        }
	      }
	    
	      switch (packet.topic) {
	        ...    
	    
	            // Store Metrics
	            Promise.all(metricsToStore(payload.metrics, Metric, agent)).then(res =>
	              res.map(m => debug(`Metric ${m.id} saved on agent ${agent.uuid}`))
	            );
	          ...      
	      }
	    });
	    
	```

* **Jessica Tatiana Camacho** (1) [340813](https://platzi.com/comentario/340813/) 

	en lugar de for of, usar promise.all() y dejr el try catch para verificar un error en caso de que ocurra

* **Gabriel Trabanco Llano** (1) [285559](https://platzi.com/comentario/285559/) 

	```
	        payload.metrics.map(async (metric) => {
	                    let m
	                    
	                    try {
	                        m = await Metric.create(agent.uuid, metric)
	                    } catch (e) {
	                        return handleError(e)
	                    }
	    
	                    debug(`Metric ${m.id} saved`)
	                })
	    
	```

* **Jose R. Torrens Acosta** (1) [275653](https://platzi.com/comentario/275653/) 

	Lo que tienen el problema de que no le guarda en la BD de una, es porque viene de cuando se hace el utils.js, no se agrega el return en la codificacion en caliente, Julian lo pone asi
	``` 
	    try {
	        payload = JSON.parse(payload)
	      } catch (e) {
	        payload = null
	      }
	    
	```
	
	y deberia estar asi
	``` 
	    try {
	        return payload = JSON.parse(payload)
	      } catch (e) {
	        return payload = null
	      }```
	    
	```

* **Jordi** (1) [255883](https://platzi.com/comentario/255883/) 

	he tenido que poner esto para que funcionaran los selects:
	``` 
	    psql -h localhost -U platzi platziverse
	    
	```

* **Juan Andres  Cordero Arias** (1) [230371](https://platzi.com/comentario/230371/) 

	Veo que todo corre bien lo √∫nico es que no me guarda en BDs? Alguno le paso esto?

	* **Diego Alexander Forero Higuera (Platzi)** [230371] (1)

		Revisa si al momento de guardar hay alg√∫n error en el servidor o en la consola del navegador, si tienes alg√∫n error en alguna de esas dos partes es la causa para que no guarde, puede ser un error de digitaci√≥n en la url que usas para guardar, es lo que se me ocurre sin ver el c√≥digo.

	* **Juan Andres  Cordero Arias** [230371] (0)

		Es como si el JSON que le estoy pasando esta mal formado.  
		El problema que tengo ahorita es  
		const payload = parsePayload(packet.payload)  
		Me esta retornado NULL

	* **Juan Andres  Cordero Arias** [230371] (1)

		mqtt pub -t ‚Äòagent/message‚Äô -h localhost -m  
		‚Äô{  
		‚Äúagent‚Äù:{‚Äúuuid‚Äù:‚Äúyyy‚Äù,‚Äúusername‚Äù:‚Äúplatzi‚Äù,  
		‚Äúpid‚Äù:10,‚Äúhostname‚Äù:‚Äúlocalhost‚Äù},  
		‚Äúmetrics‚Äù:[{‚Äútype‚Äù:‚Äúmemory‚Äù,‚Äúvalue‚Äù:‚Äú1001‚Äù},  
		{‚Äútype‚Äù:‚Äútemp‚Äù,‚Äúvalue‚Äù:‚Äú33‚Äù}]  
		}‚Äô

	* **Juan Andres  Cordero Arias** [230371] (0)

		Hise un test colocando el codigo directamente en el metodo y si me funsiono
		
		parsePayload(‚Äô{‚Äúagent‚Äù:{‚Äúuuid‚Äù:‚Äúyyy‚Äù,‚Äúusername‚Äù:‚Äúplatzi‚Äù,‚Äúname‚Äù:‚Äúplatzi‚Äù,‚Äúpid‚Äù:10,‚Äúhostname‚Äù:‚Äúlocalhost‚Äù},‚Äúmetrics‚Äù:[{‚Äútype‚Äù:‚Äúmemory‚Äù,‚Äúvalue‚Äù:‚Äú1001‚Äù},{‚Äútype‚Äù:‚Äútemp‚Äù,‚Äúvalue‚Äù:‚Äú33‚Äù}]}‚Äô)

	* **Carlos Rivas** [230371] (0)

		Me temo que te pasa lo mismo que a mi. La √∫nica forma de que me pueda funcionar es que el comando est√© as√≠:
		``` 
		    mqtt pub -t "agent/message" -m {\"agent\":{\"uuid\":\"xxxw\",\"name\":\"Joaquin\",\"username\":\"joaquinaraujojs\",\"pid\":123,\"hostname\":\"platziMaracaibo\"},\"metrics\":[{\"type\":\"memory\",\"value\":\"1024\"},{\"type\":\"temp\",\"value\":\"34\"}]}
		    
		```
		
		Si alguien sabe como poder evitar esto le estar√≠a eternamente agradecido.

	* **Juan Carlos Mendoza Rodr√≠guez** [230371] (0)

		@carlosjr no es necesario escapar las comillas dobles, el payload debe estar todo entre comillas simples
		``` 
		    mqtt pub -t 'agent/message' -h 'localhost' -m '{ "agent": { "uuid": "yyy", "name": "jcmr", "username": "jcmr", "pid": 123, "hostname": "lpt-pc" }, "metrics": [{ "type": "memory", "value": "1024" }, { "type": "temp", "value": "34" }] }'
		    
		```

* **Alexander Velasquez** (0) [306351](https://platzi.com/comentario/306351/) 

	Por si alguien le arroja este error a la hora de lanzar el servidor:
	
	[nodemon] 1.17.3  
	[nodemon] to restart at any time, enter `rs`  
	[nodemon] watching: _._  
	[nodemon] starting `node server.js`  
	[nodemon] Internal watch failed: watch /home/sistemas/Documentos/Cursos/NodeJs/platziverse/platziverse-mqtt ENOSPC
	
	ejecutar el siguiente comando:
	
	echo fs.inotify.max_user_watches=524288 | sudo tee -a /etc/sysctl.conf && sudo sysctl -p

	* **Alexander Velasquez** [306351] (0)

		ENOSPC

* **Jonathan P√©rez Rodr√≠guez** (0) [290444](https://platzi.com/comentario/290444/) 

	Aqu√≠ esta mi solucion
	``` 
	    let promises = []
	            payload.metrics.forEach(metric => {
	                promises.push(Metric.create(agent.uuid,metric))
	            });
	              try {
	               m = awaitPromise.all(promises)
	              } catch (e) {
	                return handleError(e)
	              }```
	    
	```

* **Juan Carlos Mendoza Rodr√≠guez** (0) [259992](https://platzi.com/comentario/259992/) 

	Mi soluci√≥n al reto: quitar el await al momento llamar a Metric.create y cambiar el for of por forEach y manejar la promesa que retorna el create directamente. El c√≥digo es el siguiente
	``` 
	            payload.metrics.forEach(metric => {
	              let m
	    
	                m = Metric.create(agent.uuid, metric).then(res => {
	                  debug(`Metric ${JSON.stringify(res.id)} saved`)
	                }).catch(err => {
	                  handleError(err)
	                })
	    
	              debug(`Metric ${m.id} saved on agent ${agent.uuid}`)
	            })
	    
	```
	
	Forc√© un error en 10 metricas y se almacenaron 9 correctamente

	* **Manuel Andres Santizo Avila** [259992] (1)

		Interesante soluci√≥n y estoy deacuerdo, mi unica sugerencia talvez (me corriges si estoy mal) pero el ultimo debug donde indicas que la metrica se ha guardado tambien deberia ir dentro de la funcion del then para que indiques que fue almacenada hasta que efectivamente esto se haya realizado‚Ä¶

	* **Juan Carlos Mendoza Rodr√≠guez** [259992] (0)

		Tienes raz√≥n, Gracias por la acotaci√≥n

* **carlos galvan grajales** (0) [256162](https://platzi.com/comentario/256162/) 

	Mi soluci√≥n a la tarea (soy todo o√≠do a comentarios, dudas, etc):
	``` 
	    for (let metric of payload.metrics) {
	      await saveMetrics(metric, agent)
	    }
	    
	```
	
	y creo la funci√≥n:
	``` 
	    asyncfunctionsaveMetrics (metric, agent) {
	      let m
	      try {
	        m = await Metric.create(agent.uuid, metric)
	      } catch (err) {
	        return handleError(err)
	      }
	      debug(`Metric ${m.id} saved on agent ${agent.uuid}`)
	    }
	    
	```

* **carlos galvan grajales** (0) [256038](https://platzi.com/comentario/256038/) 

	El formato para acceder a la base de datos desde consola es:  
	psql <dbname> <username>

* **Molleapaza Palomino Johnny** (0) [255854](https://platzi.com/comentario/255854/) 

	en mi consola se muestra el payload pero no se guarda en la bd
	``` 
	    smelproverse:mqtt Client Connected: mqttjs_f3ec83ba +5s
	      smelproverse:mqtt Client Disconnected: mqttjs_f3ec83ba +13ms
	      smelproverse:mqtt Received: $SYS/agdv~oQ/new/clients +12ms
	      smelproverse:mqtt Received: agent/message +3ms
	      smelproverse:mqtt Payload: {agent:{uuid:yyy,name:test,username:smelproverse,pid:123,hostname:smelprolima},metrics:[{type:memory,value:1024},{type:temp,value:34}]} +1ms
	      smelproverse:mqtt Received: $SYS/agdv~oQ/disconnect/clients +2ms
	    
	    
	```

	* **Manuel Andres Santizo Avila** [255854] (0)

		A m√≠ me sucedia lo mismo pero era porque tenia un error en el json que enviaba en consola entonces como no iba correcto fallaba en el JSON.parse y simplemente mostraba el mensaje debug pero nunca almacenaba. Revisa bien que tengas todas las comillas en el JSON que envias al mqtt server, o aqu√≠ te comparto el que utilic√©:
		
		mqtt pub -t ‚Äòagent/message‚Äô -m ‚Äò{‚Äúagent‚Äù: {‚Äúuuid‚Äù: ‚Äúyyx‚Äù, ‚Äúname‚Äù: ‚Äútest‚Äù, ‚Äúusername‚Äù: ‚Äúplatzi‚Äù, ‚Äúpid‚Äù: 10, ‚Äúhostname‚Äù: ‚Äúplatzi‚Äù }, ‚Äúmetrics‚Äù: [{‚Äútype‚Äù: ‚Äúmemory‚Äù, ‚Äúvalue‚Äù: ‚Äú1001‚Äù}, {‚Äútype‚Äù: ‚Äútemp‚Äù, ‚Äúvalue‚Äù: ‚Äú33‚Äù}]}‚Äô

* **carlos galvan grajales** (0) [255789](https://platzi.com/comentario/255789/) 

	Hola, tengo un problema, al crear por consola la publicaci√≥n con el cliente mqtt no me lee espacios el servidor mosca (en packet.payload obtengo el mensaje hasta que se encuentra un espacio en el string, desde el espacio en adelante me borra el mensaje) ni tampoco me lee las comillas dobles, pongo comillas dobles y en packet.payload(sin dejarle espacios) recibo el string del mensaje pero sin las comillas dobles y esto genera conflicto al querer usar JSON.parse, por favor ayuda.
	
	yo estoy mandando por consola:
	``` 
	    mqtt pub -t agent/message -m '{"agent":{"uuid":"yyy","name":"test","username":"platzi","pid":10,"hostname":"platzibogota"},"metric":[{"type":"memory","value":"1001"},{"type":"temp","value":"33"}]}'
	    
	```
	
	y recibo por packet.payload:
	``` 
	    ‚Äò{agent:{uuid:yyy,name:test,username:platzi,pid:10,hostname:platzibogota},metric:[{type:memory,value:1001},{type:temp,value:33}]}‚Äô
	    
	```

	* **carlos galvan grajales** [255789] (1)

		Para esto envie la publicacion de la siguiente manera:
		``` 
		    mqtt pub -t agent/message -m "{ 'agent': {'uuid':'yyy', 'name':'test', 'username':'platzi', 'pid':10, 'hostname':'platzibogota'},'metric':[{'type':'memory', 'value':'1001'},{'type':'temp', 'value':'33'}]}"
		    
		```
		
		y en utils antes de convertir el resultado a json puse:
		``` 
		    payload = payload.split("'").join('"')
		    
		```
		
		y quedo solucionado de manera f√°cil y r√°pida pero aun no entiendo por que me pasaba eso‚Ä¶ y al profesor Julian no.

* **Jordi** (0) [255626](https://platzi.com/comentario/255626/) 

	Veo que si no coloco el hostname me deja guardarlo igualmente pero que si pongo null entonces me lo rechaza, no deber√≠a de saltarme alg√∫n error?
	
	Esto da error
	``` 
	    mqtt pub -t 'agent/message' -m '{"agent": {"uuid": "yyy", "name": "platzi", "username": "platzi", "pid": 10, "hostname": null}, "metrics": [{"type": "memory", "value": "1024"}, {"type": "temp", "value": "33"}] }'
	    
	```
	
	Pero esto no :S
	``` 
	    mqtt pub -t 'agent/message' -m '{"agent": {"uuid": "yyy", "name": "platzi", "username": "platzi", "pid": 10}, "metrics": [{"type": "memory", "value": "1024"}, {"type": "temp", "value": "33"}] }'
	    
	```
	
	C√≥digo del modelo agent
	``` 
	    'use strict'
	    
	    const Sequelize = require('sequelize')
	    const setupDatabase = require('../lib/db')
	    
	    module.exports = functionsetupAgentModel (config) {
	      const sequelize = setupDatabase(config)
	    
	      // Tabla agent con las columnas y el tipo de variable
	      return sequelize.define('agent', {
	        uuid: {
	          type: Sequelize.STRING,
	          allowNull: false
	        },
	        username: {
	          type: Sequelize.STRING,
	          allowNull: false
	        },
	        name: {
	          type: Sequelize.STRING,
	          allowNull: false
	        },
	        hostname: {
	          type: Sequelize.STRING,
	          allowNull: false
	        },
	        pid: {
	          type: Sequelize.INTEGER,
	          allowNull: false
	        },
	        connected: {
	          type: Sequelize.BOOLEAN,
	          allowNull: false,
	          defaultValue: false
	        }
	      })
	    }
	    
	```

* **Julian Oswaldo Florez Reyes** (0) [254135](https://platzi.com/comentario/254135/) 

	Tengo el siguiente error al envier el mensaje.
	
	`platziverse:mqtt Executing (default): SELECT 1+1 AS result +0ms [platziverse-mqtt] server is running platziverse:mqtt Client Connected: mqttjs_f4c0797f +9s platziverse:mqtt Received: $SYS/6M7vMJE/new/clients +4ms platziverse:mqtt Client Disconnected: mqttjs_f4c0797f +6ms platziverse:mqtt Received: agent/message +2ms platziverse:mqtt Payload: {"agent": { "uuid": "yyy", "name": "test", "username": "platzi", "pid": 10, "hostname": "platziBucarama" }, "metrics": { "type": "memory", "value": "1001"}} +0ms platziverse:mqtt Received: $SYS/6M7vMJE/disconnect/clients +4ms platziverse:mqtt Executing (default): SELECT "id", "uuid", "username", "name", "hostname", "pid", "connected", "createdAt", "updatedAt" FROM "agents" AS "agent" WHERE "agent"."uuid" = 'yyy' LIMIT 1; +11ms platziverse:mqtt Executing (default): UPDATE "agents" SET "uuid"='yyy',"name"='test',"username"='platzi',"pid"=10,"hostname"='platziBucarama',"connected"=true,"updatedAt"='2018-02-06 21:18:31.630 +00:00' WHERE "uuid" = 'yyy' +46ms platziverse:mqtt Executing (default): SELECT "id", "uuid", "username", "name", "hostname", "pid", "connected", "createdAt", "updatedAt" FROM "agents" AS "agent" WHERE "agent"."uuid" = 'yyy' LIMIT 1; +13ms platziverse:mqtt Agent yyy saved +3ms [fatal error] payload.metrics is not iterable TypeError: payload.metrics is not iterable at Server.server.on (/Users/JulianFlorez/minka/platziverse/platziverse-mqtt/server.js:110:36) at <anonymous> [nodemon] app crashed - waiting for file changes before starting...`
	
	Este es el c√≥digo de Almacenamiento server.js:110:36
	``` 
	    // Store Metrics
	            for (let metric of payload.metrics) {
	              let m
	    
	              try {
	                m = await Metric.create(agent.uuid, metric)
	              } catch (e) {
	                return handleError(e)
	              }
	    
	              debug(`Metric ${m.id} saved on agent ${agent.uuid}`)
	            }```
	    
	    
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [254135] (1)

		El error es porque payload.metrics no es un array, por lo tanto no se puede iterar, revisa con un console.log que esta llegando en payload.metrics antes de hacer el for.

	* **Julian Oswaldo Florez Reyes** [254135] (0)

		Esto es lo que esta llegando
		``` 
		    { agent:
		       { uuid: 'yyy',
		         name: 'test',
		         username: 'platzi',
		         pid: 10,
		         hostname: 'platziBucara',
		         connected: true },
		      metrics: { type: 'memory', value: '1001' } }
		    [fatal error] payload.metrics is not iterable
		    TypeError: payload.metrics is not iterable
		        at Server.server.on (/Users/JulianFlorez/minka/platziverse/platziverse-mqtt/server.js:112:36)
		        at <anonymous>
		    [nodemon] app crashed - waiting for file changes before starting...
		    
		```

* **Jesus Africano** (0) [225649](https://platzi.com/comentario/225649/) 

	Soluci√≥n veo que funciona, igual el que vea algo mal comente üòÉ
	``` 
	    const metrics = payload.metrics.map(async metric => {
	              let m
	              
	              try {
	                m = await Metric.create(agent.uuid, metric)
	              } catch (e) {
	                return handleError(e)
	              }
	    
	              debug(`Metric ${m.id} saved on agent ${agent.uuid}`)
	            })
	    
	            const result = awaitPromise.all(metrics)
	```

# Construyendo el agente de monitoreo (platziverse-agent)				 [1470]

## 0350. C√≥mo implementar un custom EventEmitter usando ES6 classes [8350](https://platzi.com/clases/1151-nodejs/8350-como-implementar-un-custom-eventemitter-usando-es6/)

### Descripci√≥n:


El **agent** va a ser el encargado de notificar al servidor cada una de las m√©tricas que vamos a definir, y va a ser el m√≥dulo que vamos a utilizar para recibir la informaci√≥n, o para suscribirnos a los mensajes que est√°n enviando todos los que est√°n conectados a la aplicaci√≥n.

Este m√≥dulo lo vamos a desarrollar como un **EventEmitter.** En esta clase vamos a aprender c√≥mo crear uno personalizado, utilizando **ES6.**

El m√≥dulo de **Node** que nos permite crear **EventEmitters** est√° dentro del paquete events, que viene en el core de **Node** , as√≠ que no hay que instalar nada m√°s. Para esto vamos a crear una clase que vamos a extender del **EventEmitter,** y luego la vamos a exportar. Cuando vayamos a utilizar el m√≥dulo podemos exportar esta clase. El constructor de la clase va a recibir opciones, que inicialmente vamos a obviar. Lo √∫ltimo ser√° llamar al constructor de la clase de **EventEmitter.**

### Links:

* [GitHub - platzi/platziverse at 21-implementar-custom-eventemitter](https://github.com/platzi/platziverse/tree/21-implementar-custom-eventemitter)

### Comentarios:

* **MAURICIO DANNIEL DOMINGUEZ ZAPATA** (0) [271818](https://platzi.com/comentario/271818/) 

	Alguien podr√≠a tener un enlace, explicaci√≥n, blog, sobre todo esto y sus significados, siento que me hace falta mas parte como de cultura general de que es todo esto. Mil veces en espa√±ol, siento que necesito m√°s entender el significado particular de cada cosa???

	* **Matias Niz** [271818] (0)

		Hola Daniel te recomiendo mirar el curso de fundamentos de javascript, o en este momento integrado en el curso definitivo de javascript, dicho curso quitara todas tus dudas de lo que se vio aca.

	* **MAURICIO DANNIEL DOMINGUEZ ZAPATA** [271818] (0)

		no, creo que entonces no expliqu√© bien mi pregunta.

	* **Juan David G√≥mez G√≥mez** [271818] (1)

		EventEmitter es la clase que permite emitir y suscribir funciones o callbacks al ser disparados eventos en nuestros objetos.

## 0360. Definiendo un timer de ejecuci√≥n continua (setInterval) [8351](https://platzi.com/clases/1151-nodejs/8351-definiendo-un-timer-de-ejecucion-continua-setinter/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 22-implementar-timer-setInterval](https://github.com/platzi/platziverse/tree/22-implementar-timer-setInterval)

### Comentarios:

* **jenapi** (1) [835486](https://platzi.com/comentario/835486/) 

	Esto es una tarea peri√≥dica. Podr√≠a ser √∫til celery para ejecutar estas tareas.

* **Victor Roman Garcia Flores** (0) [315613](https://platzi.com/comentario/315613/) 

	No se pueden descargar los archivos, favor de revisar el fallo

	* **Diego Alexander Forero Higuera (Platzi)** [315613] (2)

		Ya esta funcionando el enlace.

* **brapastor** (0) [247697](https://platzi.com/comentario/247697/) 

	Empezando a probar el agent

* **Andres Leonardo Arevalo** (0) [244922](https://platzi.com/comentario/244922/) 

	Pruebas al emitter

## 0370. Implementaci√≥n del cliente MQTT [8352](https://platzi.com/clases/1151-nodejs/8352-implementacion-del-cliente-mqtt/)

### Descripci√≥n:


El agente se va a conectar al cliente **MQTT** para publicar m√©tricas y para recibir informaci√≥n.

## Reto #5:

¬øVes un patr√≥n aqu√≠? - El m√≥dulo de utilidades se re utiliza del proyecto platziverse-mqtt ¬øPuedes volverlo un m√≥dulo standalone? ¬øC√≥mo lo llamar√≠as?

### Links:

* [GitHub - platzi/platziverse at 23-implementar-cliente-mqtt](https://github.com/platzi/platziverse/tree/23-implementar-cliente-mqtt)

### Comentarios:

* **Juan Carlos Mendoza Rodr√≠guez** (6) [260651](https://platzi.com/comentario/260651/) 

	Para este caso en mi opini√≥n es m√°s adecuado crear un m√≥dulo llamado platziverse-utils y realizar el mismo procedimiento que se realiz√≥ con el m√≥dulo platziverse-db en el packge.json de platziverse-mqtt ya que utils puede ser una librer√≠a general para todo el proyecto platziverse en general

* **Joaquin Araujo** (3) [230132](https://platzi.com/comentario/230132/) 

	* **Reto 5:** Lo m√°s sencillo del mundo.
	
	
	``` 
	    const { parsePayload } = require('../platziverse-mqtt/utils')
	    
	```
	
	* **switch:** Es del diablo.
	
	
	
	Es todo, concluyo‚Ä¶

* **Deyvis Neyser Valdez Gavilan** (2) [837612](https://platzi.com/comentario/837612/) 

	Reto #5:  
	Modulo implementado platziverse-utils:
	
	![modulo platziverse-utils.png](https://static.platzi.com/media/user_upload/modulo%20platziverse-utils-4bc6327a-d34d-4a56-8282-e30d6c43b4ca.jpg) ![modulo platziverse-utils2.png](https://static.platzi.com/media/user_upload/modulo%20platziverse-utils2-bd2b66a8-d18f-44a8-881e-6012958d1595.jpg)

* **Iv√°n Felipe Velastegu√≠ Jaramillo** (1) [717976](https://platzi.com/comentario/717976/) 

	\------------------------------------------- EN RESUMEN -----------------------------------------
	
	Utilizamos la librer√≠a mqtt para crear un cliente mqtt.  
	En este caso el agente platziverse ser√° un cliente mqtt.
	
	Suscribimos al agente a los topics de
	
	![1.png](https://static.platzi.com/media/user_upload/1-28debcc3-cd89-430a-9338-23f605503a7a.jpg)
	
	El cliente mqtt reacciona a 3 eventos  
	** connect  
	message  
	error**
	
	Cuando se conecta creamos un nuevo uuid para el agente y emitimos el evento local de conectado
	
	![2.png](https://static.platzi.com/media/user_upload/2-d9889141-957d-449f-9912-033d828a55e8.jpg)
	
	Cuando el cliente recibe un mensaje del servidor, si el topic es  
	** agent/connected  
	agent/disconnected  
	agent/message**
	
	Verificamos que el mensaje que llega tiene un cuerpo (payload), tiene un agente y el uuid del agente que env√≠a este mensaje es distinto al actual. (OSEA EL MENSAJE ES DE OTRO AGENTE).
	
	ENTONCES CUANDO EL MENSAJE ES DE OTRO AGENTE, SE HACE BROADCAST Y SE RE-EMITE EL EVENTO LOCALMENTE!
	
	[3.png](https://static.platzi.com/media/user_upload/3-5b680e47-bc50-4444-a485-35fda95990ca.jpg)

	* **Iv√°n Felipe Velastegu√≠ Jaramillo** [717976] (1)
![3.png](https://static.platzi.com/media/user_upload/3-76905f2b-1746-423d-b461-efaa4a004677.jpg)

* **camiladi** (1) [488229](https://platzi.com/comentario/488229/) 

	Cuando escribo
	``` 
	    this.emit("connected", this._agentId)
	    
	```
	
	¬øa que evento hace referencia este disparador?
	
	Tengo la sospecha que es al evento que tenemos en nuestro broker platziverse-mqtt/server.js
	``` 
	    server.on('clientConnected', client => {
	        debug(`Client Connected: ${client.id}`)
	        clients.set(client.id, null)
	    })
	    
	```
	
	Pero no estoy muy seguro ya que se supone que este se dispara con ‚ÄúclientCoonected‚Äù, tengo mis dudas.

	* **alesanabriav (Platzi)** [488229] (1)

		El evento debe tener el mismo nombre tanto en emit y en on.
		``` 
		    this.emit("clientConnected", this._agentId)
		    
		```

* **Rub√©n Maier Enzler** (1) [470913](https://platzi.com/comentario/470913/) 

	Che algo que confunde y mucho es que llames ‚Äúcliente mqtt‚Äù al ‚Äúservidor mqtt‚Äù‚Ä¶ O no estoy entendiendo nada. Desde mi punto de vista el modulo platziverse-agent es el cliente y platziverse-mqtt es el servidor, por lo tanto el servidor abre un canal de escucha, y son los clientes (agentes) los que se conectan para comunicar sus m√©tricas, y a su vez, el servidor le transmite a cada uno de los agentes las m√©tricas e informaci√≥n general de otros agentes (clientes) [comunicaci√≥n bidireccional]

* **crloshro** (1) [453461](https://platzi.com/comentario/453461/) 

	Aun no he entendido cual es la finalidad del agente de monitoreo de platziverse-agent, alguno me podria aclarar la duda??

	* **Rub√©n Maier Enzler** [453461] (2)

		Seg√∫n lo que entiendo, un agente es un sistema de computo que esta censando algo, por ejemplo, si tenemos un sistema IoT que controle las cosas del hogar lo mas com√∫n seria tener un sensor de gas, otro de agua, otro ponele en el patio que monitore la temperatura, etc‚Ä¶ Bueno cada uno de estos modulos que censan cosas distintas vendr√≠an a ser un agente distinto, la cuesti√≥n es que el modulo de ‚Äúplatziverse-agent‚Äù vendr√≠a a simular 1 modulo de esto, y si ejecuto este modulo ‚Äúplatziverse-agent‚Äù en varias terminales lo que estar√≠a haciendo es simular X cantidad de m√≥dulos con distinta configuraci√≥n de monitoreo y que todo esto se comunique con una especie de ‚Äúservidor central‚Äù que funcionaria de ‚Äúmiddleware‚Äù y que en este caso ser√≠an los modulos de platziverse-db junto a platziverse-mqtt

* **Juan David G√≥mez G√≥mez** (1) [398422](https://platzi.com/comentario/398422/) 

	nuevo modulo platziverse-utils y en este meter y exportar todos los archivos y funciones comunes que tenemos hasta ahora y que seguir√°n saliendo e importarlas cuando las necesitemos desde all√≠.

* **chepix10** (1) [304438](https://platzi.com/comentario/304438/) 

	Les dejo mi branch con el reto del m√≥dulo utils:
	
	[Branch](https://github.com/chepix10/platziverse/tree/implementacion-modulo-utils)

* **camiladi** (1) [51172](https://platzi.com/comentario/488229/) 
Cuando escribo this.emit("connected", this._agentId) ¬øa que evento hace referencia este disparador? Tengo la sospecha que e...

	* **alesanabriav (Platzi)** [51172] (1)

		El evento debe tener el mismo nombre tanto en emit y en on.
		``` 
		    this.emit("clientConnected", this._agentId)
		    
		```

* **crloshro** (1) [48334](https://platzi.com/comentario/453461/) 
Aun no he entendido cual es la finalidad del agente de monitoreo de platziverse-agent, alguno me podria aclarar la duda??

	* **Rub√©n Maier Enzler** [48334] (2)

		Seg√∫n lo que entiendo, un agente es un sistema de computo que esta censando algo, por ejemplo, si tenemos un sistema IoT que controle las cosas del hogar lo mas com√∫n seria tener un sensor de gas, otro de agua, otro ponele en el patio que monitore la temperatura, etc‚Ä¶ Bueno cada uno de estos modulos que censan cosas distintas vendr√≠an a ser un agente distinto, la cuesti√≥n es que el modulo de ‚Äúplatziverse-agent‚Äù vendr√≠a a simular 1 modulo de esto, y si ejecuto este modulo ‚Äúplatziverse-agent‚Äù en varias terminales lo que estar√≠a haciendo es simular X cantidad de m√≥dulos con distinta configuraci√≥n de monitoreo y que todo esto se comunique con una especie de ‚Äúservidor central‚Äù que funcionaria de ‚Äúmiddleware‚Äù y que en este caso ser√≠an los modulos de platziverse-db junto a platziverse-mqtt

* **Victor Roman Garcia Flores** (0) [315619](https://platzi.com/comentario/315619/) 

	No se pueden descargar los archivos, favor de revisar el fallo

	* **Diego Alexander Forero Higuera (Platzi)** [315619] (1)

		Enlace funcionando.

* **MAURICIO DANNIEL DOMINGUEZ ZAPATA** (0) [273426](https://platzi.com/comentario/273426/) 

	Como podr√≠a hacer si yo no cuento con un cliente MQTT sino un WS de Java???

## 0380. Implementaci√≥n de m√©tricas personalizadas [8353](https://platzi.com/clases/1151-nodejs/8353-implementacion-de-metricas-personalizadas/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 24-implementar-custom-metrics](https://github.com/platzi/platziverse/tree/24-implementar-custom-metrics)

### Comentarios:

* **Sebastian Yabiku Sifuentes** (4) [454331](https://platzi.com/comentario/454331/) 

	lavada de dientes y pa dentro

	* **Way** [454331] (3)

		Juagadita con agua!!!

* **Jos√© Rodr√≠guez** (4) [204242](https://platzi.com/comentario/204242/) 

	Saludos, esta clase tiene una parte sin edici√≥n.

	* **davidtoca (Platzi)** [204242] (0)

		gracias por reportarlo, ya lo vamos a revisar

	* **Felipe Acosta** [204242] (4)

		Jajaja, esta exactamente en el minuto 7:41

	* **Jose R. Torrens Acosta** [204242] (2)

		A la fecha no lo han arreglado. 22/03/2018

	* **Fabi√°n Veliz** [204242] (0)

		A√∫n est√° sin edici√≥n muchachos.

	* **Freddy C√≥rdova Arana** [204242] (1)

		Solo son 5 segundos, casi ni se nota.

	* **Juan David G√≥mez G√≥mez** [204242] (2)

		y se quedo sin edici√≥n jajaja 10/10/2018

	* **Rub√©n Maier Enzler** [204242] (2)

		ya estamos en 2019 y sigue as√≠ jajaja

	* **Jorge Szwako** [204242] (2)

		updating ‚Ä¶ 21/03/2019 ‚Ä¶ sin edicion.

	* **Danniel Sequera** [204242] (2)

		1 de Abril de 2019. Aun sin edici√≥n jajajaja

	* **flavioaandres** [204242] (2)

		Julio y sigue as√≠ JAJJAJA

	* **Juan Carrillo** [204242] (1)

		11/11/2019 sigue sin arreglo üòÉ

	* **Facundo Nicol√°s Garc√≠a Martoni** [204242] (1)

		¬°Listo Jos√©! Perd√≥n la demora, todo est√° funcionando al 100% ahora, nada de bugs üòâ

* **Jorman Ortega** (2) [719376](https://platzi.com/comentario/719376/) 

	El error de edici√≥n en el min **7:41** fue reportado hace 2 a√±os y aun sigue presente :v jaja

	* **Facundo Nicol√°s Garc√≠a Martoni** [719376] (1)

		¬°Hola Jorman! Perd√≥n la tardanza, ese error ya se fue, no volver√° a molestarnos m√°s üêû

* **Alfredo Zanoni** (2) [331150](https://platzi.com/comentario/331150/) 

	jajajajaja lo mejor de ultimas clases‚Ä¶agent y metrics dos palabras q voy a odiar terriblemente‚Ä¶van 20 videos q venimos dando vuelta con eso‚Ä¶

	* **Alfredo Zanoni** [331150] (1)

		en realizacion al minito 7:41 que esta editado

	* **Deyvis Neyser Valdez Gavilan** [331150] (1)

		26/11/2019 a√∫n sin edici√≥n.

	* **Facundo Nicol√°s Garc√≠a Martoni** [331150] (1)

		¬°Gente! Todo solucionado, no hay error üòÑ

## 0390. Probar agent (ejemplo) [8354](https://platzi.com/clases/1151-nodejs/8354-probar-agent-ejemplo/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 25-implementar-ejemplo-agent](https://github.com/platzi/platziverse/tree/25-implementar-ejemplo-agent)

### Comentarios:

* **Luis Antonio Schmiel Paredes** (3) [296640](https://platzi.com/comentario/296640/) 

	Pase por un error en el que me sal√≠a NULL al momento de ejecutar ‚Äúecamples/index.js‚Äù ‚Ä¶ resulta que yo no estaba usando el puerto 1883 que mosca usa por defecto.  
	Si les pasa algo parecido la forma de arreglarlo es usando ese mismo puerto en la constante de opciones en ‚Äúplatziverse-agent/index.js‚Äù (en host)
	``` 
	    const options = {
	      name: 'untitled',
	      username: 'platzi',
	      interval: 5000,
	      mqtt: {
	        host: 'mqtt://localhost:1887'
	      }
	    }
	    
	```

	* **Juan David G√≥mez G√≥mez** [296640] (1)

		que buen aporte

* **DavidMG01** (1) [1020635](https://platzi.com/comentario/1020635/) 

	Me dice que el callback(null, Math.random()) no es una funci√≥n‚Ä¶

* **crloshro** (1) [453501](https://platzi.com/comentario/453501/) 

	No entiendo cual es la finalidad del platziverse-agent, alquien me podria porfavor aclarar la duda??

	* **Rub√©n Maier Enzler** [453501] (5)

		Seg√∫n lo que entiendo, un agente es un sistema de computo que esta censando algo, por ejemplo, si tenemos un sistema IoT que controle las cosas del hogar lo mas com√∫n seria tener un sensor de gas, otro de agua, otro ponele en el patio que monitore la temperatura, etc‚Ä¶ Bueno cada uno de estos modulos que censan cosas distintas vendr√≠an a ser un agente distinto, la cuesti√≥n es que el modulo de ‚Äúplatziverse-agent‚Äù vendr√≠a a simular 1 modulo de esto, y si ejecuto este modulo ‚Äúplatziverse-agent‚Äù en varias terminales lo que estar√≠a haciendo es simular X cantidad de m√≥dulos con distinta configuraci√≥n de monitoreo y que todo esto se comunique con una especie de ‚Äúservidor central‚Äù que funcionaria de ‚Äúmiddleware‚Äù y que en este caso ser√≠an los modulos de platziverse-db junto a platziverse-mqtt

* **Victor Roman Garcia Flores** (1) [315622](https://platzi.com/comentario/315622/) 

	No se pueden descargar los archivos fuente, favor de revisar el fallo

	* **Diego Alexander Forero Higuera (Platzi)** [315622] (1)

		Corregido el enlace. Gracias

* **crloshro** (1) [48337](https://platzi.com/comentario/453501/) 
No entiendo cual es la finalidad del platziverse-agent, alquien me podria porfavor aclarar la duda??

	* **Rub√©n Maier Enzler** [48337] (5)

		Seg√∫n lo que entiendo, un agente es un sistema de computo que esta censando algo, por ejemplo, si tenemos un sistema IoT que controle las cosas del hogar lo mas com√∫n seria tener un sensor de gas, otro de agua, otro ponele en el patio que monitore la temperatura, etc‚Ä¶ Bueno cada uno de estos modulos que censan cosas distintas vendr√≠an a ser un agente distinto, la cuesti√≥n es que el modulo de ‚Äúplatziverse-agent‚Äù vendr√≠a a simular 1 modulo de esto, y si ejecuto este modulo ‚Äúplatziverse-agent‚Äù en varias terminales lo que estar√≠a haciendo es simular X cantidad de m√≥dulos con distinta configuraci√≥n de monitoreo y que todo esto se comunique con una especie de ‚Äúservidor central‚Äù que funcionaria de ‚Äúmiddleware‚Äù y que en este caso ser√≠an los modulos de platziverse-db junto a platziverse-mqtt

* **Manuel Andres Santizo Avila** (0) [269686](https://platzi.com/comentario/269686/) 

	Tengo un problema, si me funcion√≥ pero tengo el resultado que guarda metricas undefiend para el agente‚Ä¶ alguna pista por donde podria estar el problema? !
	``` 
	    platziverse:mqtt Metric undefined saved on agent 5177dbfa-cce2-49f1-9e30-7dd2337f5bc9 +2ms
	      platziverse:mqtt Metric undefined saved on agent 5177dbfa-cce2-49f1-9e30-7dd2337f5bc9 +0ms
	      platziverse:mqtt Metric undefined saved on agent 5177dbfa-cce2-49f1-9e30-7dd2337f5bc9 +1ms
	    
	```

	* **inquiridor** [269686] (0)

		Podr√≠as revisar las tablas Agent y Metric de la base de datos?  
		Has comparado tu c√≥digo con lo que est√° en ‚ÄúArchivos‚Äù?

	* **Manuel Andres Santizo Avila** [269686] (0)

		Al final cuando hice el reto use promesas y no recibia el parametro de metrica mostrarlo, si lo almacenaba en base pero no lo mostraba‚Ä¶ ese era el problema.

* **Juan Carlos Mendoza Rodr√≠guez** (0) [261214](https://platzi.com/comentario/261214/) 

	Una pregunta, para este caso como se puede implementar test unitarios para realizar las pruebas respectivas a los eventos y poder evaluar el modulo?
	
	Se que las funciones propias se evaluar√≠an utilizando stubs, pero como se har√≠a con los eventos. Esto incluso servic√≠a para probar el modulo anterior

* **Wilmer Javier Garz√≥n Cabezas** (0) [259651](https://platzi.com/comentario/259651/) 

	Buenas tardes, tengo un problema, al iniciar el servidor de MQTT me arroja un error relacionado a las DB.
	``` 
	    MacBook-Pro-de-CM:platziverse-mqtt wcabezas$ npm run start-dev
	    
	    > platziverse-mqtt@1.0.0start-dev /Users/wcabezas/Documents/Platzi/PlatziVerse Nodejs/platziverse-mqtt
	    > DEBUG=platziverse:* nodemon server.js
	    
	    [nodemon] 1.14.12
	    [nodemon] to restart atanytime, enter `rs`
	    [nodemon] watching: *.*
	    [nodemon] starting`node server.js`
	    sequelize deprecated String based operators arenow deprecated. Please use Symbol based operators for better security, read more athttp://docs.sequelizejs.com/manual/tutorial/querying.html#operators ../platziverse-db/node_modules/sequelize/lib/sequelize.js:242:13
	    [fatal error] connect ECONNREFUSED 127.0.0.1:5432
	    SequelizeConnectionRefusedError: connect ECONNREFUSED 127.0.0.1:5432
	        atconnection.connect.err (/Users/wcabezas/Documents/Platzi/PlatziVerse Nodejs/platziverse-db/node_modules/sequelize/lib/dialects/postgres/connection-manager.js:116:24)
	        atConnection.connectingErrorHandler (/Users/wcabezas/Documents/Platzi/PlatziVerse Nodejs/platziverse-db/node_modules/pg/lib/client.js:123:14)
	        atConnection.emit (events.js:160:13)
	        at Socket.reportStreamError (/Users/wcabezas/Documents/Platzi/PlatziVerse Nodejs/platziverse-db/node_modules/pg/lib/connection.js:71:10)
	        at Socket.emit (events.js:160:13)
	        at emitErrorNT (internal/streams/destroy.js:64:8)
	        at process._tickCallback (internal/process/next_tick.js:152:19)
	    [nodemon] app crashed - waiting forfile changes beforestarting...
	    
	```
	
	Alguien podria ayudarme?

	* **Diego Alexander Forero Higuera (Platzi)** [259651] (1)

		Revisa que el servidor de MQTT este prendido, porque lo que inicias aqu√≠ es el servicio no el servidor de base de datos.

	* **Manuel Andres Santizo Avila** [259651] (0)

		Tienes arriba los servicios de redis y de postgres? puede que te este fallando por que no esta realizando la conexion con postgres‚Ä¶ si estas usando homebrew puedes usar
		``` 
		    brew services stop postgres
		    
		    brew services start postgres
		    
		    
		```
		
		y lo mismo para Redis si el problema persiste.

* **Julian Oswaldo Florez Reyes** (0) [257381](https://platzi.com/comentario/257381/) 

	Tengo el siguiente error, al ejecutar el ejemplo.
	``` 
	    MacBook-Pro:platziverse-agent JulianFlorez$ node examples/index.js
	    d3a6864b-6fc6-41bf-9c7e-a98fbade1289
	    (node:1692) UnhandledPromiseRejectionWarning: Unhandled promise rejection (rejection id: 1): ReferenceError: message is not defined
	    (node:1692) [DEP0018] DeprecationWarning: Unhandled promise rejections are deprecated. In the future, promise rejections that are not handled will terminate the Node.js process with a non-zero exit code.
	    (node:1692) UnhandledPromiseRejectionWarning: Unhandled promise rejection (rejection id: 2): ReferenceError: message is not defined
	    (node:1692) UnhandledPromiseRejectionWarning: Unhandled promise rejection (rejection id: 3): ReferenceError: message is not defined
	    (node:1692) UnhandledPromiseRejectionWarning: Unhandled promise rejection (rejection id: 4): ReferenceError: message is not defined
	    d3a6864b-6fc6-41bf-9c7e-a98fbade1289
	    
	```
	
	¬øAlguien me puede ayudar?

	* **Diego Alexander Forero Higuera (Platzi)** [257381] (1)

		Qu√© versi√≥n de node estas usando?

	* **John J Chaverra** [257381] (0)

		let metrics la declare fuera del if y con eso basto

# Construyendo una API REST con Express (platziverse-api)				 [1471]

## 0400. Implementaci√≥n de un servidor b√°sico con express [8355](https://platzi.com/clases/1151-nodejs/8355-implementacion-de-un-servidor-basico-con-express/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 26-implementar-servidor-express](https://github.com/platzi/platziverse/tree/26-implementar-servidor-express)

### Comentarios:

* **Gerardo Nava Pereda** (4) [358025](https://platzi.com/comentario/358025/) 

	Ahora podemos incluir las dependencias as√≠:
	``` 
	    import http from'http'
	    import chalk from'chalk'
	    import express from'express'
	    
	```

	* **David Behar** [358025] (1)

		Parece que no, no funcionan con esta sintaxis de m√≥dulos es6

	* **Gerardo Nava Pereda** [358025] (2)

		Es experimental, tienes que habilitarlo ‚Ä¶ pero, lo recomendable es hacerlo con require

	* **Gerardo Nava Pereda** [358025] (2)

		[ECMAScript Modules](https://nodejs.org/api/esm.html#esm_ecmascript_modules)
		``` 
		    Files ending in.mjs
		    
		```

* **William Cuervo** (4) [318951](https://platzi.com/comentario/318951/) 

	Si se usa Windows, el script start-dev es:  
	‚Äústart-dev‚Äù: ‚Äúset DEBUG=platziverse:* & nodemon server.js‚Äù
	
	mientras que en Linux o macOS  
	‚Äústart-dev‚Äù: ‚ÄúDEBUG=platziverse:* nodemon server.js‚Äù

* **sukomost** (4) [235977](https://platzi.com/comentario/235977/) 

	Express atiende peticiones http. Porque requiere el modulo http y no utiliza el de express

	* **JuanJoMh** [235977] (1)

		Porque utiliza directamente el de node, asi se depende menos de express

* **Jordi** (1) [278810](https://platzi.com/comentario/278810/) 

	Existe alguna alternativa a standard que se evalue con tabulaciones? Odio los espacios‚Ä¶

	* **Diego Alexander Forero Higuera (Platzi)** [278810] (1)

		Puedes probar <https://github.com/standard/eslint-config-standard> y personalizar la configuraci√≥n.

	* **luisrangelc** [278810] (1)

		semistandard

* **Andres Leonardo Arevalo** (1) [244994](https://platzi.com/comentario/244994/) 

	Instalaci√≥n de express y debug

* **Victor Roman Garcia Flores** (0) [315624](https://platzi.com/comentario/315624/) 

	No se pueden descargar los archivos fuente, favor de revisar el fallo

	* **Diego Alexander Forero Higuera (Platzi)** [315624] (1)

		Ya esta corregido el enlace.

## 0410. Definici√≥n de rutas del API [8356](https://platzi.com/clases/1151-nodejs/8356-definicion-de-rutas-del-api/)

### Descripci√≥n:


### Comentarios:

* **Gabriel Maximowicz** (3) [324184](https://platzi.com/comentario/324184/) 

	[Postman](https://www.getpostman.com/) es mi favorita para probar las llamadas a las api‚Äôs

	* **Diego Alexander Forero Higuera (Platzi)** [324184] (8)

		A mi me gusta mucho insomnia -> <https://insomnia.rest/>

* **Fernando Azuaje** (2) [578663](https://platzi.com/comentario/578663/) 

	Me encanto el uso de httpie

* **Andres Leonardo Arevalo** (2) [244997](https://platzi.com/comentario/244997/) 

	Explicaci√≥n de middleware

* **Enzo Aliatis** (2) [195981](https://platzi.com/comentario/195981/) 

	el modulo
	``` 
	    const http = require('http')
	    
	```
	
	reemplaza al body-parser o no tiene nada que ver?  
	otra duda,  
	¬øCual ser√≠a la diferencia entre usar debug y usar console.log?

	* **Edgar Valdez Moises** [195981] (5)

		Con respecto a debug y console.log la diferencia est√° en que debug solo imprime en consola si la variable de entorno DEBUG=* est√° seteada.  
		Es por esto que Julian usa como uno de sus scripts a:  
		‚Äústart-dev‚Äù: ‚ÄúDEBUG=platziverse:* nodemon server.js‚Äù

	* **Felipe Acosta** [195981] (0)

		tengo la misma duda acerca de lo del modulo http y body-parser

	* **Carlos Enrique Gonzalez Pe√±a** [195981] (2)

		Yo se que ya paso casi un a√±o de estas preguntas, pero por si alguien mas tiene dudas con el `body-parser` y el `http` espero les ayude.  
		[body-parser](https://github.com/expressjs/body-parser) es un **middleware** y el prop√≥sito de este es que revisa todo lo que venga en el body a trav√©s de un POST y lo transforma al tipo de datos que tu quieres, en su documentaci√≥n vemos que lo podemos transformar en JSON, RAW, TEXT, etc.  
		En cambio el http lo usamos para crear un servidor, **por defecto express** nos puede crear un servidor sin la necesidad de usar el `createServer` del `http` y esto lo logramos solamente usando el `app.listen`  
		As√≠ quedar√≠a.
		``` 
		    constapp = express();
		    app.listen(port, () => console.log(`Server started on port ${port}`))
		    
		    
		```
		
		De esta forma **nos ahorramos** el tener que usar el http y la finalidad principal de hacerlo de esta manera es por si llegas a reutilizar tu http para varias instancias diferentes tu servidor, por ejemplo con un websockets
		``` 
		    var express = require('express');
		    var app     = express();
		    var server  = require('http').createServer(app);
		    var io      = require('socket.io').listen(server);
		    
		    server.listen(1234);
		    
		```
		
		Sin embrago esto tambi√©n se puede lograr de otras maneras.
		
		En este caso expressjs **antes** dentro de sus dependencias usaba el body-parser por default hasta que lo separaron en proyectos diferentes.  
		As√≠ que **recomiendo** usar body-parser para pegar todo lo que venga como JSON y **recomiendo quitar** el HTTP y el createServer y dejar que express haga su trabajo.  
		O copien mi c√≥digo jaja
		``` 
		    'use strict'
		    
		    const chalk = require('chalk')
		    const express = require('express')
		    const bodyparser =require('body-parser')
		    
		    const port = process.env.PORT || 3000
		    const app = express()
		    //BodyParser Middelware
		    app.use(bodyparser.json());
		    
		    app.listen(port, () => {
		        console.log(`${chalk.green('[proeci api]')} server listening on port ${port}`)
		    })
		    
		```

	* **Carlos Enrique Gonzalez Pe√±a** [195981] (2)

		Olvide poner lo del API
		``` 
		    'use strict'
		    
		    const chalk = require('chalk')
		    const express = require('express')
		    const bodyparser =require('body-parser')
		    
		    const api = require('./api')
		    
		    const port = process.env.PORT || 3000
		    const app = express()
		    //BodyParser Middelware
		    app.use(bodyparser.json());
		    
		    app.use('/api',api)
		    
		    app.listen(port, () => {
		        console.log(`${chalk.green('[proeci api]')} server listening on port ${port}`)
		    })
		    
		```

* **David Rosero Calle** (2) [43187](https://platzi.com/comentario/394517/) 
Hola Julian tengo una pregunta existencial. ¬øEs posible traer dato de un form en html a el archivo api.js y digamos ejecutar un query a u...

	* **Oscar Barajas Tavares (Platzi)** [43187] (2)

		Puedes utilizar FormData para hacer esto:
		
		<https://developer.mozilla.org/es/docs/Web/Guide/Usando_Objetos_FormData>

* **Alejandro Sulbaran** (1) [312714](https://platzi.com/comentario/312714/) 

	Normalmente para el desarrollo de API uso mucho esta [herramienta ](https://www.getpostman.com) con una interfaz gr√°fica muy intuitiva y perfecta para documentar

* **Jos√© Iv√°n Sandoya** (1) [232899](https://platzi.com/comentario/232899/) 

	Hola! una pregunta: cu√°l es el criterio para determinar en qu√© archivo js se utiliza **_debug_** con su respectivo namespace? Concretamente, por ejemplo, por qu√© se lo utiliz√≥ en api.js y no en server.js ??  
	Gracias.

	* **Fabi√°n Veliz** [232899] (2)

		Hola! La idea es que el `debug` este en el **scope** de la funcionalidad o **archivo** que queres debuggear. Si los separas bien, va a ser mucho m√°s f√°cil entender que est√° pasando en la consola, ya que podes tener muchos `debuggers`.
		
		Ejemplos:
		
		* Ver que `uuid` se est√° enviando a la ruta `/metrics/:uuid`.  
		Definimos el debug con su respectivo namespace (platziverse:api:routes). En este caso solo verificamos una ruta, pero podemos llegar a inspeccionar varias y todos los logs van a quedar ordenados y digamos que asociados a este namespace.
		* Si tuvieramos un m√≥dulo de autenticaci√≥n y quisieramos inspeccionar que usuario ingres√≥ y cu√°l se registr√≥, definimos el debug como (platziverse:auth) y todo lo relacionado a autenticaci√≥n va quedando bien ordenado y de nuevo, asociado al namespace correspondiente.
		
		
		
		Y as√≠ vamos separando cada cosa.  
		Espero haber contestado tu pregunta üòÉ

	* **Jos√© Iv√°n Sandoya** [232899] (1)

		Genial, muchas gracias @fabianvelizok por tu respuesta!

* **Joaquin Araujo** (1) [231648](https://platzi.com/comentario/231648/) 

	Si estan en Ubuntu (o cualquier distribuci√≥n derivada de Debian) pueden instalar [HTTPie](https://httpie.org/) con el comando:
	``` 
	    sudo apt-get install httpie
	    
	```
	
	¬°Y listo! A continuaci√≥n les dejo una captura para que vean que funciona perfectamente en Ubuntu  
	![Screenshot from 2017-12-19 11-09-35.png](https://static.platzi.com/media/user_upload/Screenshot%20from%202017-12-19%2011-09-35-1c3d5880-22ed-4732-96f8-dc6f564d9689.jpg)

	* **luisrangelc** [231648] (1)

		para instalar en windows.
		
		Escribir en el command prompt:
		
		easy_install httpie
		
		Y con esto pueden revisar si esta bien instalado:
		
		http [httpie.org](http://httpie.org)

* **David Rosero Calle** (0) [394517](https://platzi.com/comentario/394517/) 

	Hola Julian tengo una pregunta existencial.
	
	¬øEs posible traer dato de un form en html a el archivo api.js y digamos ejecutar un query a una base de datos utilizando este dato, osea hacer un document.getElementById(‚Äòelemento x‚Äô) y que me traiga esa info para utilizarla luego?

	* **Oscar Barajas Tavares (Platzi)** [394517] (2)

		Puedes utilizar FormData para hacer esto:
		
		<https://developer.mozilla.org/es/docs/Web/Guide/Usando_Objetos_FormData>

	* **camiladi** [394517] (1)

		Creo que con FormData lo que haces es enviar informaci√≥n adicional en el body de la petici√≥n HTTP. en tal caso env√≠as el _id_ del elemento, pero en el server no vas a poder hacer gran cosas con eso.
		
		No hay que mezclar JavaScript que corre del lado del cliente (Browser) con Node que corre en tu pc directamente. Aqu√≠ con _express_ y el m√≥dulo de _http_ creamos un server (el cual es una aplicaci√≥n) que no tiene nada que ver con el browser.
		
		As√≠ que no hay mucho que hacer si de acceder al DOM se trata.
		
		Si acaso inyectar HTML con Server side render.

* **Joaquin Araujo** (0) [231612](https://platzi.com/comentario/231612/) 

	Una duda ¬øpor qu√© Julian no sigue el patr√≥n que usan en la [documentaci√≥n de express.js](http://expressjs.com/en/guide/routing.html)?

* **Jos√© Rodr√≠guez** (0) [204263](https://platzi.com/comentario/204263/) 

	Saludos, con el m√≥dulo de Router se puede definir cualquier tipo de de petici√≥n Http?

	* **alesanabriav (Platzi)** [204263] (0)

		Hola jose, si cualquier tipo se puede.

	* **Jos√© Rodr√≠guez** [204263] (1)

		Excelente, vengo de Laravel estoy acostumbrado a ver routas de tipos resource a las que se relacionan con un controlador, esto es posible realizar con Express? Alguien conoce alguna documentaci√≥n acerca de esto?

	* **John J Chaverra** [204263] (0)

		si se puede utilizando controlodar en express

## 0420. Implementaci√≥n de manejo de errores con express [8357](https://platzi.com/clases/1151-nodejs/8357-implementacion-de-manejo-de-errores-con-express/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 27-implementar-error-handling-express](https://github.com/platzi/platziverse/tree/27-implementar-error-handling-express)

### Comentarios:

* **henrydelahoz** (8) [223074](https://platzi.com/comentario/223074/) 

	 **MODULO PARA MANEJO DE ERRORES PROPIOS DE PLATZIVERSE**
	``` 
	    'use strict'
	    
	    classAgentNotFoundErrorextendsError{
	      constructor (givenUuid, ...params) {
	        super(...params)
	    
	        this.givenUuid = givenUuid
	        this.code = 404
	    
	        if (Error.captureStackTrace) {
	          Error.captureStackTrace(this, AgentNotFoundError)
	        }
	    
	        this.message = `AgentwithUUID ${givenUuid} not found in DataBase`
	      }
	      }
	      classMetricsNotFoundErrorextendsError{
	        constructor (givenUuid,type, ...params) {
	    
	          super(...params)
	      
	          this.givenUuid = givenUuid
	          this.type = type||null
	          this.code = 404
	      
	          if (Error.captureStackTrace) {
	            Error.captureStackTrace(this, AgentNotFoundError)
	          }
	    
	          this.message = (type)? `MetricsofAgentwithUUID${givenUuid} and type${type} notfoundinDataBase` :`AgentwithUUID ${givenUuid} not Found in DataBase`
	        }
	        }
	    classNotAuthorizedErrorextendsError{
	      constructor (...params) {
	       super(...params)
	    
	        this.code = 401
	        
	        if (Error.captureStackTrace) {
	          Error.captureStackTrace(this, AgentNotFoundError)
	        }
	    
	        this.message = `This user is not authorized to access the requested content`
	      }
	      }
	    
	    classNotAuthenticatedErrorextendsError{
	      constructor (givenUuid, ...params) {
	        super(...params)
	    
	        this.givenUuid = givenUuid
	        this.code = 401
	    
	        if (Error.captureStackTrace) {
	          Error.captureStackTrace(this, AgentNotFoundError)
	        }
	    
	        this.message = `User is not authenticated`
	      }
	      }
	    
	    module.exports = {AgentNotFoundError, NotAuthenticatedError, NotAuthorizedError, MetricsNotFoundError}
	    
	```

	* **Alberto Pedron** [223074] (2)

		Tambi√©n tenemos este package [es6-error](https://www.npmjs.com/package/es6-error) para no hacer manualmente el captureStackTrace

	* **mateog** [223074] (2)

		hay un error en la parte de error de autorizaci√≥n, ya que el error code correcto es 403, y gracias por compartir tu c√≥digo, me fue de mucha ayuda

	* **luisrangelc** [223074] (2)

		```
		    'use strict';
		    
		    classAgentNotFoundErrorextendsError{
		      constructor (givenUuid, ...params) {
		        super(...params);
		    
		        this.givenUuid = givenUuid;
		        this.code = 404;
		    
		        if (Error.captureStackTrace) {
		          Error.captureStackTrace(this, AgentNotFoundError);
		        }
		    
		        this.message = `AgentwithUUID ${givenUuid} not found in DataBase`;
		      }
		    }
		    classMetricsNotFoundErrorextendsError{
		      constructor (givenUuid, type, ...params) {
		        super(...params);
		    
		        this.givenUuid = givenUuid;
		        this.type = type||null;
		        this.code = 404;
		    
		        if (Error.captureStackTrace) {
		          Error.captureStackTrace(this, MetricsNotFoundError);
		        }
		    
		        this.message = (type) ? `MetricsofAgentwithUUID${givenUuid} and type${type} notfoundinDataBase` : `AgentwithUUID ${givenUuid} not Found in DataBase`;
		      }
		    }
		    classNotAuthorizedErrorextendsError{
		      constructor (...params) {
		        super(...params);
		    
		        this.code = 403;
		    
		        if (Error.captureStackTrace) {
		          Error.captureStackTrace(this, NotAuthorizedError);
		        }
		    
		        this.message = `This user is not authorized to access the requested content`;
		      }
		    }
		    
		    classNotAuthenticatedErrorextendsError{
		      constructor (givenUuid, ...params) {
		        super(...params);
		    
		        this.givenUuid = givenUuid;
		        this.code = 401;
		    
		        if (Error.captureStackTrace) {
		          Error.captureStackTrace(this, NotAuthenticatedError);
		        }
		    
		        this.message = `User is not authenticated`;
		      }
		    }
		    
		    module.exports = {AgentNotFoundError, NotAuthenticatedError, NotAuthorizedError, MetricsNotFoundError};
		    
		    
		```

	* **Manuel Andres Santizo Avila** [223074] (2)

		Una consulta, que hace la funci√∫n ¬¥¬¥¬¥super()¬¥¬¥¬¥ ?

	* **luisrangelc** [223074] (2)

		La palabra clave super es usada para acceder y llamar funciones de el padre de un objeto.
		
		Las expresiones super.prop y super[expr] son v√°lidas en cualquier definici√≥n de m√©todo tanto para clases como para objetos literales.

* **Brayhan Villalba** (2) [655468](https://platzi.com/comentario/655468/) 

	No me queda claro que es la funcion next, osea seg√∫n entiendo llama al siguente middleware, pero que pasa si defino otro app.use(), antes del middleware de manejo de errores?

	* **Juan Agu** [655468] (2)

		<http://expressjs.com/en/guide/error-handling.html>

	* **David Behar** [655468] (2)

		Next es la manera de emitir errores en express, cuando tu l√≥gica dice que existe un error, emites ccon el next(new Error(‚Äòerror‚Äô)) un error que lo llamas como gustes, estos errores los manejar√° express como tu lo hayas programado.  
		.  
		Para el ejemplo espec√≠fico estamos emitiendo un error global que express cachar√°, como tiene el mensaje not found caer√° en el siguiente bloque:
		``` 
		    if (err.message.match(/not found/)) {
		        returnres.status(404).send({ error: err.message })
		      }
		    
		```

* **Rub√©n Maier Enzler** (1) [473823](https://platzi.com/comentario/473823/) 

	A la hora de intentar chequear con el id ‚Äúyyyz‚Äù invalido, me tira un error de "Cannot read property ‚Äòmatch‚Äô of underfined. Por lo que averig√ºe a muchos les pasa y lo solucionan borrando el package-lock y el node_modules para luego ejecutar npm install. Pero en mi caso no estar√≠a funcionando ¬øque deber√≠a hacer?

	* **Rub√©n Maier Enzler** [473823] (1)

		ya est√°, use ‚Äúmensaje‚Äù en ves de ‚Äúmessage‚Äù en el ‚Äúerr.propiedad‚Äù y ejecutaba un mach con un undefined, lo comento por si le llega a pasar a alguien m√°s. El error estaba en que match no es polim√≥rfico del todo y no sabe tratar aquello que es de car√°cter no definido, por lo tanto el debuger lo reconoce como error en la sintaxis.

* **chepix10** (1) [304857](https://platzi.com/comentario/304857/) 

	Les dejo mi branch con la implementaci√≥n del reto de los errores hechos a la medida:
	
	[branch](https://github.com/chepix10/platziverse/tree/implementacion-custom-errors)

* **Joaquin Araujo** (1) [231687](https://platzi.com/comentario/231687/) 

	¬øPara que sirve agregar `{ }` al momento de declarar una const?
	``` 
	    const { uuid } = req.params
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [231687] (4)

		B√°sicamente extrae la variable uuid del objeto req.params.
		
		Es una nueva funcionalidad de EcmaScript 6 y se llama desestructuraci√≥n te dejo el enlace de la documentaci√≥n <https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment>

	* **Joaquin Araujo** [231687] (0)

		Gracias Diego, estar√© leyendo el articulo, ten√≠a una idea err√≥nea, pens√© que era que se creaba un objeto con la propiedad `{ uuid: uuid }`

	* **Marcelo carranza** [231687] (1)

		 **const { uuid } = req.params** es igual a **const uuid = req.params.uuid**. Se llama destructuring

	* **Joaquin Araujo** [231687] (0)

		Gracias Marcelo üòÉ

* **Rub√©n Maier Enzler** (1) [49945](https://platzi.com/comentario/473823/) 
A la hora de intentar chequear con el id ‚Äúyyyz‚Äù invalido, me tira un error de "Cannot read property ‚Äòmatch‚Äô of underfined. Por lo qu...

	* **Rub√©n Maier Enzler** [49945] (1)

		ya est√°, use ‚Äúmensaje‚Äù en ves de ‚Äúmessage‚Äù en el ‚Äúerr.propiedad‚Äù y ejecutaba un mach con un undefined, lo comento por si le llega a pasar a alguien m√°s. El error estaba en que match no es polim√≥rfico del todo y no sabe tratar aquello que es de car√°cter no definido, por lo tanto el debuger lo reconoce como error en la sintaxis.

* **Victor Roman Garcia Flores** (0) [315626](https://platzi.com/comentario/315626/) 

	No se pueden descargar los archivos fuente, favor de revisar el fallo

	* **Diego Alexander Forero Higuera (Platzi)** [315626] (1)

		Corregido y funcionando.

* **Sebastian Cardoso Castillo** (0) [289401](https://platzi.com/comentario/289401/) 

	1:38 hay un error en la secuencia del video

## 0430. Pruebas b√°sicas de Integraci√≥n con Ava y supertest [8358](https://platzi.com/clases/1151-nodejs/8358-pruebas-basicas-de-integracion-con-ava-y-supertest/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 28-implementar-pruebas-supertest](https://github.com/platzi/platziverse/tree/28-implementar-pruebas-supertest)

### Comentarios:

* **Jos√© Rodr√≠guez** (9) [204669](https://platzi.com/comentario/204669/) 

	Dejo por ac√° la documentaci√≥n de supertest: <https://github.com/visionmedia/supertest>

* **Antonio Diaz de Leon** (2) [710486](https://platzi.com/comentario/710486/) 

	les comparto parte de la documentaci√≥n de ava para que puedan personalizar sus tests
	
	<https://github.com/avajs/ava/blob/master/docs/03-assertions.md>

* **luisrangelc** (1) [380807](https://platzi.com/comentario/380807/) 

	en Windows:
	``` 
	    "test": "SET DEBUG=platziverse:* && ava tests/ --verbose"
	    
	```

* **luisrangelc** (1) [380801](https://platzi.com/comentario/380801/) 

	en windows:
	``` 
	    "test": "set DEBUG=platziverse:* ava tests/ --verbose"
	    
	```

## 0440. Integraci√≥n con el m√≥dulo de base de datos [8359](https://platzi.com/clases/1151-nodejs/8359-integracion-con-el-modulo-de-base-de-datos/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 29-integrar-modulo-db-api](https://github.com/platzi/platziverse/tree/29-integrar-modulo-db-api)

### Comentarios:

* **Jose R. Torrens Acosta** (7) [277424](https://platzi.com/comentario/277424/) 

	Al dia de hoy pueden usarlo asi:
	``` 
	    api.use('*', async (req, res, next) => {
	      if(!services) {
	        services = await db(config)
	      }
	    })
	    
	```

* **JuanJoMh** (6) [347546](https://platzi.com/comentario/347546/) 

	Para hacer el enlace simb√≥lico no me funcion√≥ como lo hace el profe.
	
	Lo hice con el siguiente comando.
	``` 
	    npm install -S ../platziverse-db
	    
	```

* **Juan Carlos  Correa Herrera** (4) [205107](https://platzi.com/comentario/205107/) 

	Julian excelente ense√±ando :3

* **Sebastian Cardoso Castillo** (3) [306798](https://platzi.com/comentario/306798/) 

	Cuando escriban el nombre del modulo con el file en las dependencias tiene que llamarse igual que la propiedad ‚Äúname‚Äù del package.json del modulo que estan llamando.

* **Geordano Polanco Rodr√≠guez** (2) [430531](https://platzi.com/comentario/430531/) 

	No me queda claro, el singleton de conexi√≥n a base de datos.
	
	Ahora te funciona bien porque tiene todas las rutas en el mismo archivo api.js
	
	Y si las rutas est√°n en otro directorio? ¬øComo puedo hacerlo?

* **RichBarusta** (1) [695902](https://platzi.com/comentario/695902/) 

	No ser√≠a mejor refactorizar como una function y pasarle par√°metros a la instancia de api.js, donde uno sea la instancia de db, algo as√≠ como un dependency injection manual.

* **eyesidmorenov** (1) [624478](https://platzi.com/comentario/624478/) 

	Que sucede cuanto tengo una base de datos que maneja 200 modelos , debo construir igual numero de servicios. Mi pregunta es si debo referencias todo eso en el api en la forma como lo hico Julian estableciendo la variable let services. Eso seria una locura , por donde enfocar la soluci√≥n ?

* **dedesuy** (1) [305864](https://platzi.com/comentario/305864/) 

	Es posible que a la hora de implementar tu Dependencia FILE en la versi√≥n nueva de NPM actualmente en la 6.0.1, a pesar que a la hora de hacer NPM I para que haga su referencia no de error, pero a la hora de correr el API te diga que no conoce a la Dependencia, a mi me paso intentando hacer que la dependencia de la DB se uniera a la API.  
	Bueno, si esto te da error, intenta con esto:
	``` 
	    sudo npm link ../ruta-db --save
	    
	    
	```
	
	El SUDO es para que tengas permiso de Admin, ya que se necesitan copiar archivos.  
	El Link es para obligar a NPM a generar una referencia.  
	Una vez que termines te dar√° el OK ya quedar√°n unidos tus proyectos.
	
	Saludos.

* **eyesidmorenov** (1) [61603](https://platzi.com/comentario/624482/) 
Que sucede cuanto tengo una base de datos que maneja 200 modelos , debo construir igual numero de servicios. Mi pregunta es si debo refer...

* **Geordano Polanco Rodr√≠guez** (1) [46369](https://platzi.com/comentario/430531/) 
No me queda claro, el singleton de conexi√≥n a base de datos. Ahora te funciona bien porque tiene todas las rutas en el mismo archivo api....

* **Victor Roman Garcia Flores** (0) [315627](https://platzi.com/comentario/315627/) 

	No se pueden descargar los archivos fuente, favor de revisar el fallo

	* **Diego Alexander Forero Higuera (Platzi)** [315627] (1)

		Solucionado, gracias.

## 0450. Implementaci√≥n de ruta del API [8360](https://platzi.com/clases/1151-nodejs/8360-implementacion-de-ruta-del-api/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 30-implementar-rutas-api-con-db](https://github.com/platzi/platziverse/tree/30-implementar-rutas-api-con-db)

### Comentarios:

* **Jose Vinicio Flores Arias** (1) [368124](https://platzi.com/comentario/368124/) 

	Una pregunta, Que es lo que hace la funcion next o donde se la declara como como funciona?

	* **Diego Alexander Forero Higuera (Platzi)** [368124] (5)

		Los middleware en express reciben tres par√°metros que son el request, el response y next, lo que hace next es pasar el response al siguiente middleware para que siga el proceso de la petici√≥n hecha a la url o endpoint. Te dejo el enlace de la documentaci√≥n oficial <https://expressjs.com/en/guide/using-middleware.html>

* **Blue Bibamgroup** (1) [278058](https://platzi.com/comentario/278058/) 

	estoy teniendo este error cuando ejecuto http <http://localhost:3000/api/agents>  
	"SQLITE_ERROR: no such table: agents"

	* **Eric Alexander Saucedo** [278058] (1)

		Pudiste solucionarlo? Estoy teniendo el mismo mensaje!!

	* **Luis Antonio Schmiel Paredes** [278058] (0)

		Intenten correr el setup de la base de datos nuevamente‚Ä¶

	* **Jose Berna** [278058] (0)

		hola, necesito poder implementar la BD en diferentes rutas en diferentes separado por archivos en la api, como deber√≠a hacerlo?

	* **luisrangelc** [278058] (1)

		da este error porque en api.js debe definirno de la siguiente forma:
		``` 
		    services = await db(config.db);
		    
		```

* **Victor Roman Garcia Flores** (0) [315629](https://platzi.com/comentario/315629/) 

	No se pueden descargar los archivos fuente, favor de revisar el fallo

	* **Diego Alexander Forero Higuera (Platzi)** [315629] (1)

		Gracias por reportarlo, ya esta corregido el enlace.

* **Jose Berna** (0) [34721](https://platzi.com/discusiones/1151-nodejs/34721-hola-necesito-poder-implementar-la-bd-en-diferentes-rutas-en-diferentes-separado-por-archivos-en-la-api-como-deberia-hacerlo/) 
hola, necesito poder implementar la BD en diferentes rutas en diferentes separado por archivos en la api, como deber√≠a hacerlo?

## 0460. Pruebas de Integraci√≥n con Ava, Supertest y Sinon [8361](https://platzi.com/clases/1151-nodejs/8361-pruebas-de-integracion-con-ava-supertest-y-sinon/)

### Descripci√≥n:


¬øVes un patr√≥n aqu√≠? - El m√≥dulo de fixtures se reusa del proyecto platziverse-db ¬øPuedes volverlo un m√≥dulo standalone? ¬øC√≥mo lo llamar√≠as? / ¬øPuedes terminar de implementar el resto de pruebas del API?

### Links:

* [GitHub - platzi/platziverse at 31-implementar-pruebas-sinon-supertest](https://github.com/platzi/platziverse/tree/31-implementar-pruebas-sinon-supertest)

### Comentarios:

* **Pedro Rafael Jim√©nez Jij√≥n** (8) [347782](https://platzi.com/comentario/347782/) 

	algunas funciones de sinon han quedado obsoletas puntualmente cambie las siguientes lineas
	``` 
	     sandbox = sinon.createSandbox()
	      sandbox && sinon.restore()
	    
	```

	* **Rub√©n Maier Enzler** [347782] (2)

		Extactamente! dejo la documentaci√≥n por si las moscas  
		<https://sinonjs.org/releases/v7.2.2/sandbox/>

* **henrydelahoz** (3) [223979](https://platzi.com/comentario/223979/) 

	```
	    'use strict'
	    
	    const test = require('ava')
	    const request = require('supertest')
	    const sinon = require('sinon')
	    const proxyquire = require('proxyquire')
	    
	    const agentFixtures = require('./fixtures/agent')
	    const metricFixtures = require('./fixtures/metric')
	    
	    let sandbox = null
	    let server = null
	    let dbStub = null
	    let AgentStub = {}
	    let MetricStub = {}
	    const uuid = 'yyy-yyy-yyy'
	    const wrongUuid = 'xxx-yyy-yyy'
	    const type = 'RFID'
	    
	    test.beforeEach(async () => {
	      sandbox = sinon.sandbox.create()
	    
	      dbStub = sandbox.stub()
	      dbStub.returns(Promise.resolve({
	        Agent: AgentStub,
	        Metric: MetricStub
	      }))
	    
	      AgentStub.findConnected = sandbox.stub()
	      AgentStub.findConnected.returns(Promise.resolve(agentFixtures.connected))
	    
	      AgentStub.findByUuid = sandbox.stub()
	      AgentStub.findByUuid.withArgs(uuid).returns(Promise.resolve(agentFixtures.byUuid(uuid)))
	      AgentStub.findByUuid.withArgs(wrongUuid).returns(Promise.resolve(null))
	    
	      MetricStub.findByAgentUuid = sandbox.stub()
	      MetricStub.findByAgentUuid.withArgs(uuid).returns(Promise.resolve(metricFixtures.byAgentUuid(uuid)))
	      MetricStub.findByAgentUuid.withArgs(wrongUuid).returns(Promise.resolve(null))
	    
	      MetricStub.findByTypeAgentUuid = sandbox.stub()
	      MetricStub.findByTypeAgentUuid.withArgs(type, uuid).returns(Promise.resolve(metricFixtures.byTypeAgentUuid(uuid, type)))
	      MetricStub.findByTypeAgentUuid.withArgs(type, wrongUuid).returns(Promise.resolve(null))
	    
	      const api = proxyquire('../api', {
	        'platziverse-db': dbStub
	      })
	    
	      server = proxyquire('../server', {
	        './api': api
	      })
	    })
	    
	    test.afterEach(() => {
	      sandbox && sinon.sandbox.restore()
	    })
	    
	    test.serial.cb('testing /api/agents', t => {
	      request(server)
	          .get('/api/agents')
	          .expect(200)
	          .expect('Content-Type', /json/)
	          .end((err, res) => {
	            t.falsy(err, 'should not return an error')
	            let body = JSON.stringify(res.body)
	            let expected = JSON.stringify(agentFixtures.connected)
	            t.deepEqual(body, expected, 'response body should be the expected')
	            t.end() // only work with callbacks cb()
	          })
	    }) // utilizamos callbacks porque supertest no trabaja con async await sino con callbacks unicamente
	    
	    test.serial.cb('testing /api/agent/:uuid', t => {
	      request(server)
	          .get(`/api/agent/${uuid}`)
	          .expect(200)
	          .expect('Content-Type', /json/)
	          .end((err, res) => {
	            t.falsy(err, 'should not return an error')
	            let body = JSON.stringify(res.body)
	            let expected = JSON.stringify(agentFixtures.byUuid(uuid))
	            t.deepEqual(body, expected, 'response body should be the expected')
	            t.end() // only work with callbacks cb()
	          })
	    })
	    
	    test.serial.cb('testing /api/agent/:uuid - not found', t => {
	      request(server)
	          .get(`/api/agent/${wrongUuid}`)
	          .expect(404)
	          .expect('Content-Type', /json/)
	          .end((err, res) => {
	            if (err) {
	              console.log(err)
	            }
	            t.truthy(res.body.error, 'should return an error')
	            t.regex(res.body.error, /not found/, 'Error should contains not found')
	            t.end() // only work with callbacks cb()
	          })
	    })
	    
	    test.serial.cb('testing /api/metrics/:uuid', t => {
	      request(server)
	          .get(`/api/metrics/${uuid}`)
	          .expect(200)
	          .expect('Content-Type', /json/)
	          .end((err, res) => {
	            t.falsy(err, 'should not return an error')
	            let body = JSON.stringify(res.body)
	            let expected = JSON.stringify(metricFixtures.byAgentUuid(uuid))
	            t.deepEqual(body, expected, 'response body should be the expected')
	            t.end() // only work with callbacks cb()
	          })
	    })
	    
	    test.serial.cb('testing /api/metrics/:uuid - not found', t => {
	      request(server)
	          .get(`/api/metrics/${wrongUuid}`)
	          .expect(404)
	          .expect('Content-Type', /json/)
	          .end((err, res) => {
	            if (err) {
	              console.log(err)
	            }
	            t.truthy(res.body.error, 'should return an error')
	            t.regex(res.body.error, /not found/, 'Error should contains not found')
	            t.end() // only work with callbacks cb()
	          })
	    })
	    
	    test.serial.cb('testing /api/metrics/:uuid/:type', t => {
	      request(server)
	          .get(`/api/metrics/${uuid}/${type}`)
	          .expect(200)
	          .expect('Content-Type', /json/)
	          .end((err, res) => {
	            t.falsy(err, 'should not return an error')
	            let body = JSON.stringify(res.body)
	            let expected = JSON.stringify(metricFixtures.byTypeAgentUuid(uuid, type))
	            t.deepEqual(body, expected, 'response body should be the expected')
	            t.end() // only work with callbacks cb()
	          })
	    })
	    
	    test.serial.cb('testing /api/metrics/:uuid/:type - not found', t => {
	      request(server)
	          .get(`/api/metrics/${wrongUuid}/${type}`)
	          .expect(404)
	          .expect('Content-Type', /json/)
	          .end((err, res) => {
	            if (err) {
	              console.log(err)
	            }
	            t.truthy(res.body.error, 'should return an error')
	            t.regex(res.body.error, /not found/, 'Error should contains not found')
	            t.end() // only work with callbacks cb()
	          })
	    })
	    
	```

	* **luisrangelc** [223979] (1)

		```
		    'use strict';
		    
		    const test = require('ava');
		    const request = require('supertest');
		    const sinon = require('sinon');
		    const proxyquire = require('proxyquire');
		    
		    const agentFixtures = require('./fixtures/agent');
		    const metricFixtures = require('./fixtures/metric');
		    
		    let sandbox = null;
		    let server = null;
		    let dbStub = null;
		    let AgentStub = {};
		    let MetricStub = {};
		    const uuid = 'yyy-yyy-yyy';
		    const wrongUuid = 'xxx-yyy-yyy';
		    const type = 'CPU';
		    
		    test.beforeEach(async () => {
		      sandbox = sinon.createSandbox();
		    
		      dbStub = sandbox.stub();
		      dbStub.returns(Promise.resolve({
		        Agent: AgentStub,
		        Metric: MetricStub
		      }));
		    
		      AgentStub.findConnected = sandbox.stub();
		      AgentStub.findConnected.returns(Promise.resolve(agentFixtures.connected));
		    
		      AgentStub.findByUuid = sandbox.stub();
		      AgentStub.findByUuid.withArgs(uuid).returns(Promise.resolve(agentFixtures.byUuid(uuid)));
		      AgentStub.findByUuid.withArgs(wrongUuid).returns(Promise.resolve(null));
		    
		      MetricStub.findByAgentUuid = sandbox.stub();
		      MetricStub.findByAgentUuid.withArgs(uuid).returns(Promise.resolve(metricFixtures.findByAgentUuid(uuid)));
		      MetricStub.findByAgentUuid.withArgs(wrongUuid).returns(Promise.resolve(null));
		    
		      MetricStub.findByTypeAgentUuid = sandbox.stub();
		      MetricStub.findByTypeAgentUuid.withArgs(type, uuid).returns(Promise.resolve(metricFixtures.findByTypeAgentUuid(type, uuid)));
		      MetricStub.findByTypeAgentUuid.withArgs(type, wrongUuid).returns(Promise.resolve(null));
		    
		      const api = proxyquire('../api', {
		        'platziverse-db': dbStub
		      });
		    
		      server = proxyquire('../server', {
		        './api': api
		      });
		    });
		    
		    test.afterEach(async () => {
		      sandbox && sinon.restore();
		    });
		    
		    test.serial.cb('/api/agents', t => {
		      request(server)
		        .get('/api/agents')
		        .expect(200)
		        .expect('Content-Type', /json/)
		        .end((err, res) => {
		          t.falsy(err, 'should not return an error');
		          let body = JSON.stringify(res.body);
		          let expected = JSON.stringify(agentFixtures.connected);
		          t.deepEqual(body, expected, 'response body should be the expected');
		          t.end();
		        });
		    });
		    
		    test.serial.cb('/api/agent/:uuid', t => {
		      request(server)
		        .get(`/api/agent/${uuid}`)
		        .expect(200)
		        .expect('Content-Type', /json/)
		        .end((err, res) => {
		          t.falsy(err, 'should not return an error');
		          let body = JSON.stringify(res.body);
		          let expected = JSON.stringify(agentFixtures.byUuid(uuid));
		          t.deepEqual(body, expected, 'response body should be the expected');
		          t.end();
		        });
		    });
		    
		    test.serial.cb('/api/agent/:uuid - not found', t => {
		      request(server)
		        .get(`/api/agent/${wrongUuid}`)
		        .expect(404)
		        .expect('Content-Type', /json/)
		        .end((err, res) => {
		          if (err) {
		            console.log(err);
		          }
		          t.truthy(res.body.error, 'should return an error');
		          t.regex(res.body.error, /not found/, 'Error should contains not found');
		          t.end();
		        });
		    });
		    
		    test.serial.cb('/api/metrics/:uuid', t => {
		      request(server)
		        .get(`/api/metrics/${uuid}`)
		        .expect(200)
		        .expect('Content-Type', /json/)
		        .end((err, res) => {
		          t.falsy(err, 'should not return an error');
		          let body = JSON.stringify(res.body);
		          let expected = JSON.stringify(metricFixtures.findByAgentUuid(uuid));
		          t.deepEqual(body, expected, 'response body should be the expected');
		          t.end();
		        });
		    });
		    
		    test.serial.cb('/api/metrics/:uuid - not found', t => {
		      request(server)
		        .get(`/api/metrics/${wrongUuid}`)
		        .expect(404)
		        .expect('Content-Type', /json/)
		        .end((err, res) => {
		          if (err) {
		            console.log(err);
		          }
		          t.truthy(res.body.error, 'should return an error');
		          t.regex(res.body.error, /not found/, 'Error should contains not found');
		          t.end();
		        });
		    });
		    
		    test.serial.cb('/api/metrics/:uuid/:type', t => {
		      request(server)
		        .get(`/api/metrics/${uuid}/${type}`)
		        .expect(200)
		        .expect('Content-Type', /json/)
		        .end((err, res) => {
		          t.falsy(err, 'should not return an error');
		          let body = JSON.stringify(res.body);
		          let expected = JSON.stringify(metricFixtures.findByTypeAgentUuid(type, uuid));
		          t.deepEqual(body, expected, 'response body should be the expected');
		          t.end();
		        });
		    });
		    
		    test.serial.cb('/api/metrics/:uuid/:type - not found', t => {
		      request(server)
		        .get(`/api/metrics/${wrongUuid}/${type}`)
		        .expect(404)
		        .expect('Content-Type', /json/)
		        .end((err, res) => {
		          if (err) {
		            console.log(err);
		          }
		          t.truthy(res.body.error, 'should return an error');
		          t.regex(res.body.error, /not found/, 'Error should contains not found');
		          t.end();
		        });
		    });
		    
		    
		```

* **Juan David G√≥mez G√≥mez** (2) [398679](https://platzi.com/comentario/398679/) 

	```
	    'use strict'
	    
	    const test = require('ava')
	    const request = require('supertest')
	    const sinon = require('sinon')
	    const proxyquire = require('proxyquire')
	    
	    const agentFixtures = require('./fixtures/agent')
	    const metricFixtures = require('./fixtures/metric')
	    
	    let sandbox = null
	    let server = null
	    let dbStub = null
	    let AgentStub = {}
	    let MetricStub = {}
	    
	    const uuid = 'yyy-yyy-yyy'
	    const wrongUuid = 'xxx-yyy-yyy'
	    const type = 'CPU'
	    
	    test.beforeEach(async () => {
	        sandbox = sinon.createSandbox()
	    
	        dbStub = sandbox.stub()
	        dbStub.returns(Promise.resolve({
	            Agent: AgentStub,
	            Metric: MetricStub
	        }))
	    
	        AgentStub.findConnected = sandbox.stub()
	        AgentStub.findConnected.returns(Promise.resolve(agentFixtures.connected))
	    
	        AgentStub.findByUuid = sandbox.stub();
	        AgentStub.findByUuid.withArgs(uuid).returns(Promise.resolve(agentFixtures.byUuid(uuid)));
	        AgentStub.findByUuid.withArgs(wrongUuid).returns(Promise.resolve(null));
	    
	        MetricStub.findByAgentUuid = sandbox.stub();
	        MetricStub.findByAgentUuid.withArgs(uuid).returns(Promise.resolve(metricFixtures.findByAgentUuid(uuid)));
	        MetricStub.findByAgentUuid.withArgs(wrongUuid).returns(Promise.resolve(null));
	    
	        MetricStub.findByTypeAgentUuid = sandbox.stub();
	        MetricStub.findByTypeAgentUuid.withArgs(type, uuid).returns(Promise.resolve(metricFixtures.findByTypeAgentUuid(type, uuid)));
	        MetricStub.findByTypeAgentUuid.withArgs(type, wrongUuid).returns(Promise.resolve(null));
	    
	        const api = proxyquire('../api', {
	            'platziverse-db': dbStub
	        })
	    
	        server = proxyquire('../server', {
	            './api': api
	        })
	    })
	    
	    test.afterEach(() => {
	        sandbox && sinon.restore()
	    })
	    
	    test.serial.cb('/api/agents', t => {
	        request(server)
	            .get('/api/agents')
	            .expect(200)
	            .expect('Content-Type', /json/)
	            .end((err, res) => {
	                t.falsy(err, 'should not return an error')
	                let body = JSON.stringify(res.body)
	                let expected = JSON.stringify(agentFixtures.connected)
	                t.deepEqual(body, expected, 'response body should be the expected')
	                t.end()
	            })
	    })
	    
	    test.serial.cb('/api/agent/:uuid', t => {
	        request(server)
	            .get(`/api/agent/${uuid}`)
	            .expect(200)
	            .expect('Content-Type', /json/)
	            .end((err, res) => {
	                t.falsy(err, 'should not return an error');
	                let body = JSON.stringify(res.body);
	                let expected = JSON.stringify(agentFixtures.byUuid(uuid));
	                t.deepEqual(body, expected, 'response body should be the expected');
	                t.end();
	            });
	    });
	    
	    test.serial.cb('/api/agent/:uuid - not found', t => {
	        request(server)
	            .get(`/api/agent/${wrongUuid}`)
	            .expect(404)
	            .expect('Content-Type', /json/)
	            .end((err, res) => {
	                if (err) {
	                    console.log(err);
	                }
	                t.truthy(res.body.error, 'should return an error');
	                t.regex(res.body.error, /not found/, 'Error should contains not found');
	                t.end();
	            });
	    });
	    
	    test.serial.cb('/api/metrics/:uuid', t => {
	        request(server)
	            .get(`/api/metrics/${uuid}`)
	            .expect(200)
	            .expect('Content-Type', /json/)
	            .end((err, res) => {
	                t.falsy(err, 'should not return an error');
	                let body = JSON.stringify(res.body);
	                let expected = JSON.stringify(metricFixtures.findByAgentUuid(uuid));
	                t.deepEqual(body, expected, 'response body should be the expected');
	                t.end();
	            });
	    });
	    
	    test.serial.cb('/api/metrics/:uuid - not found', t => {
	        request(server)
	            .get(`/api/metrics/${wrongUuid}`)
	            .expect(404)
	            .expect('Content-Type', /json/)
	            .end((err, res) => {
	                if (err) {
	                    console.log(err);
	                }
	                t.truthy(res.body.error, 'should return an error');
	                t.regex(res.body.error, /not found/, 'Error should contains not found');
	                t.end();
	            });
	    });
	    
	    test.serial.cb('/api/metrics/:uuid/:type', t => {
	        request(server)
	            .get(`/api/metrics/${uuid}/${type}`)
	            .expect(200)
	            .expect('Content-Type', /json/)
	            .end((err, res) => {
	                t.falsy(err, 'should not return an error');
	                let body = JSON.stringify(res.body);
	                let expected = JSON.stringify(metricFixtures.findByTypeAgentUuid(type, uuid));
	                t.deepEqual(body, expected, 'response body should be the expected');
	                t.end();
	            });
	    });
	    
	    test.serial.cb('/api/metrics/:uuid/:type - not found', t => {
	        request(server)
	            .get(`/api/metrics/${wrongUuid}/${type}`)
	            .expect(404)
	            .expect('Content-Type', /json/)
	            .end((err, res) => {
	                if (err) {
	                    console.log(err);
	                }
	                t.truthy(res.body.error, 'should return an error');
	                t.regex(res.body.error, /not found/, 'Error should contains not found');
	                t.end();
	            });
	    });```
	    
	```

* **Byron Mesias Cueva Cabrera** (1) [984735](https://platzi.com/comentario/984735/) 

	Reto resuelto [aqu√≠ el c√≥digo](https://github.com/byron7cueva/backend-javascript/blob/master/node-avanzado/platziverse-api/tests/api-tests.js)
	
	![reto.png](https://static.platzi.com/media/user_upload/reto-2fffe6e8-7031-4d98-9fe9-dbe855d9bb08.jpg)

* **Jessica Tatiana Camacho** (1) [345287](https://platzi.com/comentario/345287/) 

	hay un problemilla de edici√≥n al final del video. Pantalla con imagen congelada y Julian hablando de fondo

* **cguzman** (1) [211791](https://platzi.com/comentario/211791/) 

	Comparto el repositorio con los tests: Me gustar√≠a que alguien que ya lo haya hecho pueda compartir si hay alguna mejor forma de hacer o buena practica que implementar.  
	[](https://github.com/calguzman/expressiot-api)
	
	Saludos

	* **cguzman** [211791] (1)

		No sali√≥ la URL
		
		<https://github.com/calguzman/expressiot-api>

* **Victor Roman Garcia Flores** (0) [315632](https://platzi.com/comentario/315632/) 

	No se pueden descargar los archivos fuente, favor de revisar el fallo

	* **Diego Alexander Forero Higuera (Platzi)** [315632] (2)

		Ya quedo solucionado el problema con el enlace.

* **chepix10** (0) [305660](https://platzi.com/comentario/305660/) 

	Les dejo mi soluci√≥n al reto:
	
	[Branch](https://github.com/chepix10/platziverse/tree/implementacion-tests-api/platziverse-api/tests)

	* **Rub√©n Maier Enzler** [305660] (1)

		Te falto el otro desafio, convert√≠ la carpeta fixtures en un modulo de npm cosa de poder exportarlo como dependencia local al igual que se hizo con platziverse-db

* **Erikson Murrugarra** (0) [235730](https://platzi.com/comentario/235730/) 

	Tengo una duda, si se estan creando Stubs para testear las rutas no serian Pruebas Unitarias? Cual es la diferencia entre Tests unitarios y Tests de Integracion?

	* **davidtoca (Platzi)** [235730] (3)

		si las pruebas se aplicaran directamente sobre Agente, serian pruebas unitarias, pero como prueban la funcionalidad, sin tener en cuenta como esta implementada, es una prueba de Integracion. Las pruebas unitarias testean la unidad minima de nuestra aplicacion, mientras que las pruebas de Integracion prueban que el sistema se comporte correctamente, que cada componente se integre como un todo y que las funcionalidades se comporten correctamente

* **Jesus Africano** (0) [228125](https://platzi.com/comentario/228125/) 

	Desafi√≥:
	
	[Repo](https://github.com/elafrikano/platziverse/tree/43c3063a4d4a06b9e037c4587eef615d7b62bd3a)

# Asegurando nuestra API REST con JWT				 [1472]

## 0470. Definici√≥n de JWT [8362](https://platzi.com/clases/1151-nodejs/8362-definicion-de-jwt/)

### Descripci√≥n:


## Reto:

* ¬øC√≥mo asegurar el resto de rutas del API?
* ¬øC√≥mo har√°n para probar los dos casos, √©ste y el reto anterior?



### Links:

* [JSON Web Tokens - jwt.io](https://jwt.io/)

### Comentarios:

* **WILMER H. MU√ëOZ GOMEZ** (9) [193723](https://platzi.com/comentario/193723/) 

	Hay queser muy cuidadosos al momento de implementar JWT, es muy seguro pero una mala implementaci√≥n puede causar algo de fuga de datos de tu API  
	[Para tener en cuenta](https://www.chosenplaintext.ca/2015/03/31/jwt-algorithm-confusion.html)

* **Andres Leonardo Arevalo** (3) [245050](https://platzi.com/comentario/245050/) 

	Uso del Buffer de nodeJS para cambiar de utf8 a base64.

* **David Behar** (2) [985907](https://platzi.com/comentario/985907/) 

	Vean el curso de [autenticaci√≥n con Passport JS](https://platzi.com/clases/passport/) es buen√≠simo para entender mejor los [JWT](https://jwt.io/), lo mejor es que es dado por [Guillermo Rodas](https://twitter.com/glrodasz) que trabaja para [Auth 0,](https://auth0.com/) los que mantienen la tecnolog√≠a de Json Web Token ,
	
	¬°√âchenle un vistazo!

* **Luis Antonio Schmiel Paredes** (1) [298612](https://platzi.com/comentario/298612/) 

	para convertir el token a string en node uso:
	``` 
	    Buffer.from(unToken, 'base64').toString()
	    
	```

## 0480. Asegurando nuestra API con express-jwt [8363](https://platzi.com/clases/1151-nodejs/8363-asegurando-nuestra-api-con-express-jwt/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 32-implement-jwt-auth-y-pruebas](https://github.com/platzi/platziverse/tree/32-implement-jwt-auth-y-pruebas)

### Comentarios:

* **GerAlfonso** (4) [372166](https://platzi.com/comentario/372166/) 

	Para parsear la informaci√≥n tambi√©n se puede utilizar httpie:
	``` 
	    httphttp://localhost:3000/api/agents 'Authorization: Bearer <token>'
	    
	```

	* **luisrangelc** [372166] (3)

		```
		    http://localhost:3000/api/agents "Authorization: Bearer <token>"
		    
		```

	* **luisrangelc** [372166] (3)

		```
		    httphttp://localhost:3000/api/agents "Authorization: Bearer <token>"
		    
		```

* **Joaquin Araujo** (3) [232776](https://platzi.com/comentario/232776/) 

	Que genial es JWT, este curso cada vez me gusta m√°s!

* **Juan Pablo Rodr√≠guez Morales** (1) [769619](https://platzi.com/comentario/769619/) 

	¬øEse 500 no deber√≠a ser un 401 porque no hay token de autorizaci√≥n?

* **GerAlfonso** (1) [372164](https://platzi.com/comentario/372164/) 

	Para parsear la informaci√≥n tambi√©n se puede utilizar httpie: > http http://localhost:3000/api/agents 'Authorization: Bearer <token>'

* **Andres Leonardo Arevalo** (1) [245084](https://platzi.com/comentario/245084/) 

	Parsear informaci√≥n JSON con jq, brew install jq

	* **miguelcostero** [245084] (1)

		Also, para instalar en archlinux:
		``` 
		    sudo pacman -S jq
		    
		```

* **Jesus Sandrea** (1) [211433](https://platzi.com/comentario/211433/) 

	Tengo una duda, como se crea la llave secreta?

	* **Diego Alexander Forero Higuera (Platzi)** [211433] (3)

		La llave la pones tu al momento de hacer la firma puedes verificar desde el minuto 1:18 aproximadamente donde se define el m√©todo `sign` donde recibe por par√°metro un secret, este secret para el caso es `platzi` pero puede ser lo que tu quieres, puede ser un c√≥digo mas largo como un password y con esto queda firmado, para verificarlo puedes usar el jwt debugger de la pagina de <https://jwt.io>

* **Edgar Valdez Moises** (1) [201293](https://platzi.com/comentario/201293/) 

	Podr√≠an poner el script de curl que Julian puso en consola, puesto que no se vi√≥

	* **Diego Alexander Forero Higuera (Platzi)** [201293] (8)

		`curl -v http://localhost:3000/api/agents`  
		`curl -v -H 'Authorization: Bearer <token>' http://localhost:3000/api/agents`  
		`curl -v -H 'Authorization: Bearer <token>' http://localhost:3000/api/agents | jq`

	* **Edgar Valdez Moises** [201293] (0)

		Gracias por el retorno

* **Victor Roman Garcia Flores** (0) [315633](https://platzi.com/comentario/315633/) 

	No se pueden descargar los archivos fuente, favor de revisar el fallo

	* **Diego Alexander Forero Higuera (Platzi)** [315633] (1)

		Solucionado. Gracias por el reporte.

* **Mauricio Serna Fl√≥rez** (0) [207964](https://platzi.com/comentario/207964/) 

	C√≥mo podr√≠a implementar JWT para muchos usuarios, no entiendo bien lo de la clave secreta, aqu√≠ la implementamos quemada, pero como ser√≠a ya en un entorno real? Gracias. O siempre es la misma clave para todos los tokens?

	* **Diego Alexander Forero Higuera (Platzi)** [207964] (2)

		Debes crear una llave privada que usas para firmar todos tus JWT, tienes que tener esa llave privada asegurada y que est√©s seguro que no se publique por accidente.

	* **Mauricio Serna Fl√≥rez** [207964] (0)

		Listo, gracias. Pero es la misma llave privada para todos los token que se generen?, lo unico que va a cambiar para cada usuario es el payload ? Gracias de nuevo.

	* **Diego Alexander Forero Higuera (Platzi)** [207964] (1)

		Si, lo √∫nico que cambia es el payload

## 0490. Modificando las pruebas de integracion [8364](https://platzi.com/clases/1151-nodejs/8364-modificando-las-pruebas-de-integracion/)

### Descripci√≥n:


### Comentarios:

* **Jesus Africano** (6) [228208](https://platzi.com/comentario/228208/) 

	Reto!  
	[Repo](https://github.com/elafrikano/platziverse/tree/56d87bd7af2e2e2ada3260b951db3a92c3a8b0d2)

* **Gabriel Maximowicz** (4) [325063](https://platzi.com/comentario/325063/) 

	Es muy bueno ver el proceso completo del desarrollo, como le van saltando los mismos tipos de errores que a nosotros y como los va resolviendo, muy bueno, de los mejores cursos que hice hasta ahora. Julian un groso.

	* **Gabriel Maximowicz** [325063] (0)

		Lo digo porque me ha pasada en repetidas ocasiones el error de la asignacion de una promesa como un valor üòÑ

* **alexyepez** (2) [501875](https://platzi.com/comentario/501875/) 

	Recomendaciones de seguridad para Express
	
	[express advanced security](https://expressjs.com/es/advanced/best-practice-security.html)

* **Juan David G√≥mez G√≥mez** (2) [398735](https://platzi.com/comentario/398735/) 

	En el archivo server.js de nuestro platziverse-api
	``` 
	    // Express Error Handler
	    app.use((err, req, res, next) => {
	      debug(`Error: ${err.message}`)
	    
	      if (err.message.match(/notfound/)) {
	        return res.status(404).send({ error: err.message })
	      }
	      // manejar el error de autorizacion
	      if (err.name === 'UnauthorizedError') {
	        return res.status(401).send({ error: err.message })
	      }
	    
	      res.status(500).send({ error: err.message })
	    })```
	    
	```

* **Juan Pablo Rodr√≠guez Morales** (1) [769629](https://platzi.com/comentario/769629/) 

	Una pregunta, veo que creas el token pero no vi bien en qu√© linea exactamente lo env√≠as al auth para que lo use?

	* **rodrigo-edgardo-armenta-santia** [769629] (2)

		Minuto 2:30, l√≠nea 50

* **GerAlfonso** (1) [372125](https://platzi.com/comentario/372125/) 

	Reto completado!  
	[Mi repo](https://github.com/geralfonso/platziverse/tree/master/platziverse-api)

* **Daniel Puerta** (0) [315226](https://platzi.com/comentario/315226/) 

	Para poder hacer el manejo del error cuando un token es invalido y que no arroje un error 500 por defecto debe compararse por el nombre del error en el middleware de manejo de errores:
	``` 
	    app.use((err, req, res, next) => {
	      debug('Error message!')
	      if(err.name === 'UnauthorizedError') {
	        let error= new errors.NotAuthorized()
	        return res.status(error.code).send({error: {name: error.name, message: error.message}})
	      }
	      res.status(err.code).send({error: {name: err.name, message: err.message}})
	    })
	    
	```

* **henrydelahoz** (0) [224676](https://platzi.com/comentario/224676/) 

	```
	    test.serial.cb('testing /api/agents - no token', t => {
	      request(server)
	          .get('/api/agents')
	          .expect(401)
	          .expect('Content-Type', /json/)
	          .end((err, res) => {
	            if (err) { console.log(`Error in Test ${err.message}`) }
	            t.is(res.statusCode, 401, 'Error must be Unauthorized User')
	            t.end() // only work with callbacks cb()
	          })
	    })
	    
	    
	```

## 0500. Implementando permisos con express-jwt-permissions [8365](https://platzi.com/clases/1151-nodejs/8365-implementando-permisos-con-express-jwt-permissions/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 33-implementar-permisos-jwt](https://github.com/platzi/platziverse/tree/33-implementar-permisos-jwt)

### Comentarios:

* **Joaquin Araujo** (18) [232788](https://platzi.com/comentario/232788/) 

	Es bastante molesto que el c√≥digo se oculte tras el profesor. Aqu√≠ les dejo el fragmento de c√≥digo:
	``` 
	    , auth(config.auth), guard.check(['metrics:read']),
	    
	```

	* **Joaquin Araujo** [232788] (7)

		Algo muy importante, recuerden pasarle en el **payload** los permisos:
		``` 
		    auth.sign({'username': 'platzi', 'permissions': [ 'metrics:read' ]}, 'platzi', console.log)
		    
		    
		```

	* **Jessica Tatiana Camacho** [232788] (4)

		totalmente de acuerdo, osea, pudiendo mover la cara del profesor a un espacio que no se est√° usando deciden dejarlo ahi por pereza.

* **Miguel Matos** (1) [365582](https://platzi.com/comentario/365582/) 

	Suerte que ofrecen los archivos a trav√©s del github, porque en este caso, y a casi un a√±o de que sali√≥ este curso, me sali√≥ un error 404 al querer bajar los archivos comprimidos.

	* **Diego Alexander Forero Higuera (Platzi)** [365582] (1)

		Cual archivo te dio 404? para solucionarlo y que todo funcione de la manera correcta.

	* **Miguel Matos** [365582] (1)

		El que indican con el bot√≥n ‚Äúdescargar todo‚Äù [el enlace actual es este.](https://platzi.com/clases/nodejs/concepto/asegurando-nuestra-api-rest-con-jwt/implementando-permisos-con-express-jwt-permissions/material/undefined?t=1535548925232) Pero capaz es porque la l√≥gica con la que lo crearon no lo detecta.

	* **Diego Alexander Forero Higuera (Platzi)** [365582] (3)

		Ya esta funcional el enlace, gracias por el reporte.

# Creando un Dashboard Web en tiempo real con WebSockets (platziverse-web)				 [1473]

## 0510. Implementaci√≥n de un servidor web est√°tico con express [8366](https://platzi.com/clases/1151-nodejs/8366-implementacion-de-un-servidor-web-estatico-con-exp/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 34-implementar-servidor-estatico-express](https://github.com/platzi/platziverse/tree/34-implementar-servidor-estatico-express)

### Comentarios:

* **Danniel Sequera** (1) [603675](https://platzi.com/comentario/603675/) 

	Scripts del package.json en windows:
	``` 
	    "start": "SET NODE_ENV=production && node server.js",
	    "start-dev": "SET DEBUG=platziverse:* && nodemon server.js"
	    
	```

* **niwdeplus11** (1) [64740](https://platzi.com/comentario/681139/) 
if (!module.parent)

* **niwdeplus11** (1) [64739](https://platzi.com/comentario/681136/) 
hola estoy viendo que julian al copiar las funciones de error del archivo server del API, noto que est√°n encerrado en un if (!module.pare...

* **eyesidmorenov** (1) [61605](https://platzi.com/comentario/624503/) 
Que diferencias ventajas o desventajas tiene usar console.log vs Debug‚Ä¶ ??

* **eyesidmorenov** (1) [61604](https://platzi.com/comentario/624502/) 
Que relaci√≥n o diferencias existen en el manejo de socket io con MQTT. Cuando usar una o cuando usar la otra‚Ä¶

* **Fernando Salazar** (0) [324943](https://platzi.com/comentario/324943/) 

	Hay un error al descargar los archivos del proyecto, Solucionenlo por favor. Saludos. üòÉ

	* **Diego Alexander Forero Higuera (Platzi)** [324943] (1)

		Solucionado.

* **henrydelahoz** (0) [224692](https://platzi.com/comentario/224692/) 

	No entiendo porque importar http si express internamente hace un wrapper de http a la hora de levantar el servidor. Puede alguien explicarme a que se debe que Julian requiere explicitamente el mod http ??
	
	Gracias

	* **Diego Alexander Forero Higuera (Platzi)** [224692] (2)

		En mi opini√≥n, es porque el modulo http es m√°s sencillo de configurar, si te das cuenta con solo poner el archivo index.html funciono, no tuvo que definir una ruta para el get para que funcionara, si usara solo express tiene que configurar cada ruta para que responda.
		
		No soy experto en JavaScript, Node y Express pero es lo que entend√≠.

	* **henrydelahoz** [224692] (8)

		Gracias Diego por tu respuesta, sin embargo creo que vale la pena aclarar lo siguiente.
		
		  1. El hecho de que haya sido f√°cil publicar el servidor de est√°ticos (index.html) unicamente utilizando el middleware de Express sin definir ninguna ruta, es precisamente gracias a que est√° usando dicho framework, un desarrollador puede sencillamente levantar un servidor de express as√≠
		
		
		``` 
		    varexpress = require('express');
		    var app = express();
		    app.use(express.static(path.join(__dirname, 'public')))
		    app.listen(3000);
		    
		```
		
		en el snippet anterior no se usa explicitamente el m√≥dulo http ya que Expressjs internamente se encarga de levantarlo, dentro de la funcion listen.
		
		  1. La raz√≥n por la que se levana el servidor a trav√©s del m√≥dulo http es porque [socket.io](http://socket.io) necesita que se le pase como parametro la instancia del servidor, de la siguiente manera
		
		
		``` 
		    const io = socketio(server)
		    
		    
		```
		
		debido a que el servidor http no es accesible desde el objeto app de Express Js entonces el servidor se levanta directamente con http y ExpressJs pasa a ser el handler, de esa forma la instancia del servidor est√° a la mano por as√≠ decirlo, y se le puede pasar a [socket.io](http://socket.io) para que pueda implementar el comportamiento real time en nuestra aplicaci√≥n.

	* **Daniel Puerta** [224692] (0)

		Pero en ese caso no ser√≠a solo para [socket.io](http://socket.io), ya para hacer las pruebas con supertest necesitamos el servidor http

## 0520. Integrando socket.io con express [8367](https://platzi.com/clases/1151-nodejs/8367-integrando-socketio-con-expre-8/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 35-integrar-socketio-express](https://github.com/platzi/platziverse/tree/35-integrar-socketio-express)

### Comentarios:

* **Joaquin Araujo** (8) [237954](https://platzi.com/comentario/237954/) 

	 **[Socket.io](http://Socket.io)** permite la comunicaci√≥n de forma bidireccional entre el Cliente y el Servidor.
	
	![](http://coenraets.org/blog/wp-content/uploads/2012/10/socketiodiagram.jpg)

* **nachoogoomez** (3) [449468](https://platzi.com/comentario/449468/) 

	Hola a todos! Como supongo que muchos os est√°is adentrando en el mundo de los websockets por primera vez aqu√≠ va una ayuda que en el futuro agradecer√©is:
	
	La tecnolog√≠a de websockets (un canal full-duplex entre el cliente y el servidor) tiene dos formas de implementarse dentro de la librer√≠a [socket.io](http://socket.io) :
	
	  1. Usando polling: Consiste en hacer sucesivas peticiones HTTP(S) desde el cliente al servidor para dar ‚Äúla sensaci√≥n‚Äù de tener un canal full duplex pero en realidad son muchas peticiones HTTP.
	  2. Usando el protocolo websockets que con el tiempo ya ha sido estandarizado como para ser usando en producci√≥n sin preocuparse. En este protocolo ya los websockets son de verdad, no hay peticiones HTTP para mantener viva la conexi√≥n e incluso poder enviar un mensaje desde el servidor al cliente siendo el servidor el emisor original del mensaje y no el que responde a una petici√≥n.
	
	
	
	Bueno ahora que ya tenemos claros estos conceptos aqu√≠ os presento un gran problema que tendr√©is con la librer√≠a de [Socket.io](http://Socket.io). Esta librer√≠a viene a ser como el jQuery de los websockets. Antes cuando hab√≠a que hacer checks para ver si el navegador era compatible con protocolo websockets era √∫til ya que de no ser as√≠ internamente [Socket.io](http://Socket.io) usar√≠a el protocolo de polling.
	
	Y tu dir√°s‚Ä¶ eso esta cool. ¬øD√≥nde esta el problema? El problema esta en la dificultad para configurar correctamente [Socket.io](http://Socket.io) cuando lo estas integrando con un proyecto React Native.
	
	Despu√©s de pasar d√≠as configurando [Socket.io](http://Socket.io) para que usara el protocolo websockets (el que debe ser usado en React Native para aplicaciones m√≥viles) y comprobando desde lo navegadores que funcionaba correctamente y ver que en movil no funcionaba llego a la siguiente conclusi√≥n.
	
	En Android hay problemas para usar websockets con [Socket.io](http://Socket.io) ya que si se escoge el protocolo polling internamente [Socket.io](http://Socket.io) usar√° setTimeout/setInterval para establecer el intervalo de peticiones y Android empieza a escupir Warnings como un campe√≥n. Para esto hay una libreria llamada socket.io-cliente que es una version standalone (portable) del cliente de [socket.io](http://socket.io) pero me ha sido imposible implementarlo correctamente y que me funcionara bien entre servidores-navegadores-ios-android.
	
	En cuanto he usado la libreria n√°tiva de websockets (ws) todo ha ido de maravillas y ni navegador ni m√≥viles han dado ni un solo problema.
	
	**Usa la librer√≠a nativa de websockets si no necesitas al 100% usar[Socket.io](http://Socket.io)**
	
	Y si no tener gesti√≥n de eventos te preocupa, despreoc√∫pate ya! Aqu√≠ tienes una librer√≠a que he hecho para gestionar los eventos desde websockets nativos.
	
	<https://github.com/icastillejogomez/ws-events>
	
	¬øNo es genial?

	* **David Behar** [449468] (1)

		¬°Que genial comentario! Gracias

* **rodrigo-edgardo-armenta-santia** (2) [1030251](https://platzi.com/comentario/1030251/) 

	soy el √∫nico que se pregunta por qu√© el video se ve con un degradado blanco del lado derecho?

* **zaggattoz** (1) [649561](https://platzi.com/comentario/649561/) 

	error al descargar todos los archivos, tedioso descargar uno por uno y organizarlos

	* **Diego Alexander Forero Higuera (Platzi)** [649561] (3)

		Solucionado üòÉ

* **Bruno Diaz** (1) [464224](https://platzi.com/comentario/464224/) 

	Hola a todos, una pregunta al hacer un chat con socket io me ocurre el problema de que cuando mando una tilde no hace el render del mensaje.  
	Saludos

	* **Juan Camilo Angel Fandi√±o** [464224] (1)

		Para verificar el problema habr√≠a que revisar el c√≥digo, pero una opci√≥n ser√≠a enviar la informaci√≥n desde el cliente en base64:
		``` 
		    Buffer.from("√°√©√≠√≥√∫").toString('base64')
		    
		```
		
		Y luego en el servidor:
		``` 
		    Buffer.from("w6HDqcOtw7PDug==", 'base64').toString('ascii')
		    
		```
		
		Esto es un hack pero no es la soluci√≥n, debes tener problemas con encoding, asegurate de manejar utf-8.

* **ennma5** (1) [453701](https://platzi.com/comentario/453701/) 

	Implementar Socket.io con express

* **eyesidmorenov** (1) [61607](https://platzi.com/comentario/624533/) 
Si la aplicaci√≥n web va por el puerto 8080 y la api va por otro puerto como es que en lo que explica Juan no fue necesario que desde la a...

* **Bruno Diaz** (1) [49218](https://platzi.com/comentario/464224/) 
Hola a todos, una pregunta al hacer un chat con socket io me ocurre el problema de que cuando mando una tilde no hace el render del mensa...

## 0530. Integrando agente de monitoreo con socket.io [8368](https://platzi.com/clases/1151-nodejs/8368-integrando-agente-de-monitoreo-con-socketio/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 36-integrar-agent-socketio](https://github.com/platzi/platziverse/tree/36-integrar-agent-socketio)

### Comentarios:

* **niwdeplus11** (1) [687924](https://platzi.com/comentario/687924/) 

	mismo error del amigo Anah√≠ Zentella la funci√≥n de callbackMetric devuelve el error; callback is not a function  
	solo sucede con la funcion de callback las otras dos funcionan bien  
	quien puede decir por que sucede gracias‚Ä¶

* **gmocmm** (1) [251694](https://platzi.com/comentario/251694/) 

	Tengo una enorme duda con la funcion pipe que se implemento, no entiendo que es lo que hace, alguien por favor me pudiera explicar?
	``` 
	    function pipe (source, target) {
	      if (!source.emit || !target.emit) {
	        throw TypeError(`Please pass EventEmitter's as argument`)
	      }
	      
	      const emit = source._emit = source.emit
	    
	      source.emit = function () {
	        emit.apply(source, arguments)
	        target.emit.apply(target, arguments)
	        returnsource
	      }
	    }
	    
	    module.exports = {
	      pipe
	    }
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [251694] (2)

		Lo que hace pipe es recibir una fuente y un destino para el paso de los mensajes, esto permite no tener que escribir una definici√≥n por cada evento que hace el agente (source) para pasarlo a [socket.io](http://socket.io)
		
		Es algo confuso al principio, puedes ver el video cuantas veces necesites hasta entender bien que es lo que hace esta funci√≥n.

	* **gmocmm** [251694] (0)

		Por ejemplo en esta linea que hace?
		``` 
		    const emit = source._emit = source.emit
		    
		```

	* **Wilmer Maldonado** [251694] (0)

		En la constante emit se obtiene el m√©todo original emit ya que este sera sobreescrito en el source.  
		En el source sera sobreescrito para que al momento que se invoque pueda pasarle los mismo argumentos tanto al m√©todo emit del target como al emit original.  
		Esto por que en la clase PlatziverseAgent en diversos momento se invoca a this.emit(topic, payload) entonces lo sobreescribimos para obtener esos argumentos y pasarlo mediante el m√©todo apply al contexto de target y de la constante emit y sean emitidos inmediatamente. Arguments es un objeto de javascript que recibe todos los argumentos de la funci√≥n

	* **Rub√©n Maier Enzler** [251694] (1)

		no entiendo la diferencia entre source._emit y source.emit

* **Andres Leonardo Arevalo** (1) [245249](https://platzi.com/comentario/245249/) 

	Levantar servidor mqtt y agente de monitoreo

* **rodrigo-edgardo-armenta-santia** (1) [83607](https://platzi.com/comentario/1030607/) 
pueden generar algo que explique de manera m√°s detallada el pipe? No comprendo bien c√≥mo funciona y creo que no soy el √∫nico. Gracias!

	* **Erik Ochoa** [83607] (1)

		Puedes verlo como un proceso que tiene una `entrada->transformaci√≥n->salida` con los ‚Äúpipes‚Äù conectas la salida de un proceso con la entrada de otro y as√≠ compones funcionalidades complejas a partir de peque√±os fragmentos simples.

* **eyesidmorenov** (1) [61608](https://platzi.com/comentario/624542/) 
Mi estimado Julian muy enredado la exposici√≥n de la arquitectura. Primero hay que entender que relaci√≥n o diferencia hay entre Socket Io...

	* **Ren√© Sanchez** [61608] (1)

		Hay veces donde investigar el paquete individualmente te orienta mas que el que te ense√±a, hay puntos que no se aclaran si no se busca a profundidad el como usarlo y que situaciones serian viables.
		
		En base a mi experiencia y aprendizaje constante he comprendido mas con los que me ense√±an e luego ir mas all√° de lo que aprendo de ell@s.
		
		Por ejemplo ultimamente estoy aprendiendo mas a fondo nodejs usando platzi y udemy(no hay que limitarse en ningun aspecto), a medida que voy comprendiendo y aplicando en proyectos actuales en la startup.
		
		Leer la documentacion me ha servido para comprender mas y alimenta mi curiosidad para encontrar e definirla en su uso, ver proyectos que hacen las personas con esas librerias o desarrollos con el uso implicado de ello en ciertas partes de funcionalidad ayuda bastante.

* **anhy_s** (0) [260617](https://platzi.com/comentario/260617/) 

	Tengo un detalle al correr los ejemplos:  
	callbackMetric me da undefined  
	y me devuelve el siguiente error:  
	`  
	{ agent:  
	{ uuid: ‚Äòf2626b2b-988c-4dbb-a087-b6c215303dd6‚Äô,  
	username: ‚Äòanahi‚Äô,  
	name: ‚Äòmyapp‚Äô,  
	hostname: ‚Äòanahi-Inspiron-7348‚Äô,  
	pid: 4689 },  
	metrics:  
	[ { type: ‚Äòrss‚Äô, value: 62205952 },  
	{ type: ‚ÄòpromiseMetric‚Äô, value: 0.611098298001205 },  
	{ type: ‚ÄòcallbackMetric‚Äô, value: undefined } ],  
	timestamp: 1518979420759 }  
	/home/anahi/Documents/Git/Curso Avanzado Node/platziverse-agent/examples/index.js:18  
	callback(null, Math.random())  
	^
	
	TypeError: callback is not a function  
	at Timeout.setTimeout [as _onTimeout] (/home/anahi/Documents/Git/Curso Avanzado Node/platziverse-agent/examples/index.js:18:5)  
	at ontimeout (timers.js:478:11)  
	at tryOnTimeout (timers.js:302:5)  
	at Timer.listOnTimeout (timers.js:262:5)  
	`  
	ya estuve comparando si tenia alg√∫n error de typo pero no encuentro el detalle.

	* **anhy_s** [260617] (0)

		Mi repo [<https://github.com/anahiza/Curso-Avanzado-NodeJS>]

## 0540. Implementaci√≥n de rutas proxy con la API [8369](https://platzi.com/clases/1151-nodejs/8369-implementacion-de-rutas-proxy-con-la-a-9/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 37-implementar-proxy-api](https://github.com/platzi/platziverse/tree/37-implementar-proxy-api)

### Comentarios:

* **Erikson Murrugarra** (5) [259226](https://platzi.com/comentario/259226/) 

	Hola Profe Julian Sabe donde puedo encontrar material para prepararme para la certificacion oficial de Node.js Foundation?

* **Danniel Sequera** (2) [603825](https://platzi.com/comentario/603825/) 

	No puedo escribir c√≥digo sin punto y coma jajajaja no es lo mismo sin √©l üòÇüòÇ

* **lizardojara** (1) [876625](https://platzi.com/comentario/876625/) 

	Vuelvan a agregar el bot√≥n para descargar todos los archivos por favor, descargar archivo por archivo es muy tedioso, gracias.

* **zaggattoz** (1) [649564](https://platzi.com/comentario/649564/) 

	error al descargar todos los archivos, tedioso descargar uno por uno y organizarlos

	* **Diego Alexander Forero Higuera (Platzi)** [649564] (2)

		Solucionado üòÉ

* **Rub√©n Maier Enzler** (1) [482321](https://platzi.com/comentario/482321/) 

	Pero si yo hago una solicitud a la rutas del proxy de platziverse-web y este hace una consulta a las rutas de la api platziverse-api ¬øporque aseguras que protegemos las apiKey? ¬øNo quedar√≠a expuesta en fin la ruta del servidor de api? ¬øque serian las apiKey? porque en definitiva el token default definido en platziverse-web se podr√≠a reutilizar para hacer peticiones al api con autorizaci√≥n cambiando el payload una vez conocido‚Ä¶ ¬øo me equivoco?

* **Andres Leonardo Arevalo** (1) [245268](https://platzi.com/comentario/245268/) 

	Flujo de funcionamiento de la implementaci√≥n del proxy

* **Eleana Torres Ortiz** (1) [195310](https://platzi.com/comentario/195310/) 

	Como pudiera hacer un proxy como este pero que el apiKey pueda variar dependiendo del usuario y no tener que almacenar en el client el apiKey despu√©s que el usuario hace login?

	* **Francisco Cerdas** [195310] (3)

		Hola, no s√© si entend√≠ bien tu pregunta, pero una soluci√≥n es que luego de haga login, se guarde en el localStorage del browser que esta usando el usuario el token y luego pasarlo en el request al proxy, el proxy lo lee como parametro y lo puede utilizar.

	* **Jordi** [195310] (0)

		base de datos con mongodb por ejemplo

	* **Juan Agu** [195310] (1)

		El localStorage es una buena soluci√≥n cdo estas desarrollando, deberias reemplazar el storage al momento de pasar a produccion.  
		Una bd en MongoDB u otra db nosql es buena opci√≥n, pero mejor seria una Cache DB como redis por ejemplo, ya que tiene las caracteristicas para este tipo de operaciones donde necesitas info especifica con una alta tasa de solicitudes en poco tiempo. De este modo implementamos algunas soluciones en una de las empresas donde trabaje y funcionaba muy bien. Saludos

## 0550. Presentaci√≥n de nuestro cliente frontend en Vue.js [8370](https://platzi.com/clases/1151-nodejs/8370-presentacion-de-nuestro-cliente-frontend-en-vuejs/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 38-presentacion-frontend-vue](https://github.com/platzi/platziverse/tree/38-presentacion-frontend-vue)

### Comentarios:

* **henrydelahoz** (9) [225040](https://platzi.com/comentario/225040/) 

	Si al correr el ejemplo, en la console obtienes un error con el m√©todo Line.Extend, entonces intenta esta nueva sintaxis del m√≥dule vue-chartjs
	``` 
	    'use strict'
	    
	    const { Line, mixins } = require('vue-chartjs')
	    const { reactiveProp } = mixins
	    
	    module.exports = {
	      extends: Line,
	      props: ['options'],
	      mixins: [ reactiveProp ],
	      mounted () {
	        // Overwriting base render method with actual data.
	        this.renderChart(this.chartData, this.options)
	      }
	    }
	    
	```
	
	Espero que les sea √∫til.
	
	Saludos

	* **Joaquin Araujo** [225040] (3)

		Muchas gracias por tu aporte, me sirvi√≥ para solucionar el problema. Tengo que aprender Vue.js

	* **alejandro2396** [225040] (1)

		Si lo cambio dentro de public/bundle.js, al volver a correr el modulo se borra.

* **Byron Mesias Cueva Cabrera** (3) [985613](https://platzi.com/comentario/985613/) 

	Por si les dio problemas al integrar el [cliente aqui les dejo mi repo](https://github.com/byron7cueva/backend-javascript/tree/master/node-avanzado/platziverse-web) con los cambios de versiones y c√≥digo para que funcione. Revicen el package.json y client/line-chart.js, esos me toco cambiar

* **Sandra Milena Rair√°n Pinilla** (2) [690464](https://platzi.com/comentario/690464/) 

	Hola!! Si les esta saliendo este error lo solucione colocando en el package.json la misma version, es decir as√≠:  
	‚Äúvue-template-compiler‚Äù: ‚Äú2.4.2‚Äù,  
	‚Äúvue‚Äù: ‚Äú2.4.2‚Äù.
	``` 
	    ERROR
	    This may cause things to work incorrectly. Make sure to use the same versionforboth.
	    If you areusing vue-loader@>=10.0, simply update vue-template-compiler.
	    If you areusing vue-loader@<10.0or vueify, re-installing vue-loader/vueify should bump vue-template-compiler to the latest.
	    
	```

* **alexyepez** (2) [504468](https://platzi.com/comentario/504468/) 

	dentro de client/ falta app.vue, este es el c√≥digo
	``` 
	    <template>
	        <div>
	            <agent
	                    v-for="agent in agents"
	                    :uuid="agent.uuid"
	                    :key="agent.uuid">
	            </agent>
	            <pv-if="error">{{error}}</p>
	        </div>
	    </template>
	    
	    <style>
	        body {
	            font-family: Arial;
	            background: #f8f8f8;
	            margin: 0;
	        }
	    </style>
	    
	    <script>
	      module.exports = {
	        data () {
	          return {
	            agents: [],
	            error: null
	          }
	        },
	        mounted () {
	          this.initialize()
	        },
	        methods: {
	          initialize () {
	          }
	        }
	      }
	    </script>
	    
	```

* **FrcGustavo** (1) [1020068](https://platzi.com/comentario/1020068/) 

	Hola al parecer me sale un erro y no entiendo por que  
	Repo: <https://github.com/FranciscoGustavo/netofings>
	
	![Problem.JPG](https://static.platzi.com/media/user_upload/Problem-de2e8575-e5b1-41a8-a6cd-7aff0f34983b.jpg)

* **Juan Agu** (1) [663792](https://platzi.com/comentario/663792/) 

	Probablemente, al estar el curso muuuuuy desactualizado (lo que es un poco molesto), se tenga algunos errores al querer buildear el front.  
	Particularmente, al buildear luego de instalar con dependencias de desarrollo babel y demas yerbas, me salia este error cuando ingresaba al server
	``` 
	    Uncaught TypeError: Line.extend is notafunction
	    
	```
	
	Esto se debe a como se debe exportar el modulo del archivo line-chart. La forma correcta seria la siguiente
	``` 
	    'use strict'
	    
	    const { Line, mixins } = require('vue-chartjs')
	    const { reactiveProp } = mixins
	    
	    module.exports = {
	      extends: Line,
	      mixins: [reactiveProp],
	      props: ['options'],
	      mounted() {
	        this.renderChart(this.chartData, this.options)
	      }
	    }  
	    
	```
	
	De este modo desaparece el error de tipo

* **Jos√© Ricardo Romo Guti√©rrez** (1) [344997](https://platzi.com/comentario/344997/) 

	Hola tengo un problema al correro el servidor:
	``` 
	      platziverse-web git:(master) ‚úó npm run start-dev
	    
	    > platziverse-web@1.0.0 prestart-dev /home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-web
	    > npm run build
	    
	    
	    > platziverse-web@1.0.0 build /home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-web
	    > browserify -t babelify -t vueify client/app.js -o public/bundle.js
	    
	    Error: Cannot find module 'chart.js' from '/home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-web/node_modules/vue-chartjs/dist'
	        at /home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-web/node_modules/browser-resolve/node_modules/resolve/lib/async.js:46:17
	        at process (/home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-web/node_modules/browser-resolve/node_modules/resolve/lib/async.js:173:43)
	        at ondir (/home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-web/node_modules/browser-resolve/node_modules/resolve/lib/async.js:188:17)
	        at load (/home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-web/node_modules/browser-resolve/node_modules/resolve/lib/async.js:69:43)
	        at onex (/home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-web/node_modules/browser-resolve/node_modules/resolve/lib/async.js:92:31)
	        at /home/mrromo/Documentos/NodeJS/PlatziVerse/platziverse-web/node_modules/browser-resolve/node_modules/resolve/lib/async.js:22:47
	        at FSReqWrap.oncomplete (fs.js:158:21)
	    npm ERR! code ELIFECYCLE
	    npm ERR! errno 1
	    npm ERR! platziverse-web@1.0.0build:`browserify -t babelify -t vueify client/app.js -o public/bundle.js`
	    npm ERR! Exit status 1
	    npm ERR!
	    npm ERR! Failed at the platziverse-web@1.0.0 build script.
	    npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
	    
	    npm ERR! A complete log of this run can be found in:
	    npm ERR!     /home/mrromo/.npm/_logs/2018-08-01T03_07_10_012Z-debug.log
	    npm ERR! code ELIFECYCLE
	    npm ERR! errno 1
	    npm ERR! platziverse-web@1.0.0 prestart-dev:`npm run build`
	    npm ERR! Exit status 1
	    npm ERR!
	    npm ERR! Failed at the platziverse-web@1.0.0 prestart-dev script.
	    npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
	    
	    npm ERR! A complete log of this run can be found in:
	    npm ERR!     /home/mrromo/.npm/_logs/2018-08-01T03_07_10_096Z-debug.log
	    
	```
	
	este es mi package.json
	``` 
	    {
	      "name": "platziverse-web",
	      "version": "1.0.0",
	      "description": "A simple IoT Platform - WEB Dashboard",
	      "main": "server.js",
	      "scripts": {
	        "start": "NODE_ENV=production node server.js",
	        "prestart": "npm run build",
	        "start-dev": "DEBUG=platziverse:* nodemon server.js",
	        "prestart-dev": "npm run build",
	        "build": "browserify -t babelify -t vueify client/app.js -o public/bundle.js",
	        "lint": "standard"
	      },
	      "repository": {
	        "type": "git",
	        "url": "git+https://github.com/MrRomo/platziverse.git"
	      },
	      "author": "Ricardo <jricardoromo21@gmail.com> (https://twitter.com/JRicardo_Romo)",
	      "license": "MIT",
	      "bugs": {
	        "url": "https://github.com/MrRomo/platziverse/issues"
	      },
	      "homepage": "https://github.com/MrRomo/platziverse#readme",
	      "browserify": {
	        "transform": [
	          [
	            "babelify",
	            {
	              "presets": [
	                "es2015"
	              ]
	            }
	          ]
	        ]
	      },
	      "devDependencies": {
	        "babel-core": "^6.26.3",
	        "babel-plugin-transform-runtime": "^6.23.0",
	        "babel-preset-es2015": "^6.24.1",
	        "babelify": "^7.3.0",
	        "browserify": "^14.4.0",
	        "nodemon": "^1.18.3",
	        "standard": "^11.0.1",
	        "vueify": "^9.4.1"
	      },
	      "dependencies": {
	        "chalk": "^2.4.1",
	        "debug": "^3.1.0",
	        "express": "^4.16.3",
	        "platziverse-agent": "file:../platziverse-agent",
	        "request": "^2.87.0",
	        "request-promise-native": "^1.0.5",
	        "socket.io": "^2.1.1",
	        "vue": "^2.4.2",
	        "vue-chartjs": "^2.8.1"
	      }
	    }
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [344997] (2)

		Te falta instalar chart.js  
		`npm install chart.js --save`

* **LUISFER24** (1) [332570](https://platzi.com/comentario/332570/) 

	que alternativa podriamos usar si elegimos react?

	* **Diego Alexander Forero Higuera (Platzi)** [332570] (1)

		Alternativa a qu√©, no es clara tu pregunta.

	* **Fabi√°n Veliz** [332570] (1)

		[React](https://reactjs.org/) y [Angular](https://angular.io/) son alternativas a [Vue](https://vuejs.org/), la librer√≠a que se us√≥ en el curso para desarrollar el cliente, si es eso a lo que te refer√≠as Luis.  
		Saludos!

	* **LUISFER24** [332570] (1)

		me referia a que en el curso utilizan vue chat y queria saber si existia alguna libreria para react que nos ayudara con el tema de generar las graficas. Busque y enconte varias soluciones, aqui les dejo una lista <http://voidcanvas.com/top-10-react-graph-chart-libraries-with-demo/>

* **Luis Antonio Schmiel Paredes** (1) [299041](https://platzi.com/comentario/299041/) 

	Tengo una duda, como sabe npm que debe correr el script de prestar-dev antes de start-dev? si en ninguna parte se especifica eso‚Ä¶

	* **Diego Alexander Forero Higuera (Platzi)** [299041] (2)

		Es algo propio de npm puedes leer un poco m√°s aqu√≠ <https://docs.npmjs.com/misc/scripts> b√°sicamente el comando npm start ejecuta prestart, start y poststart de forma autom√°tica.

	* **Luis Antonio Schmiel Paredes** [299041] (0)

		Muchas gracias ! esta super interesante todo ese tema.

* **Jesbar** (1) [72876](https://platzi.com/comentario/824574/) 
Hola, alguno sabe como deber√≠an definirse los scripts implementados en package.json utilizando windows?

	* **Gabriel De Andrade** [72876] (3)

		Hola! Deber√≠a ser igual que en otras plataformas. Comentanos si tienes problemas a la hora de definirlos üòÑ

* **Jos√© Ricardo Romo Guti√©rrez** (1) [38523](https://platzi.com/comentario/344997/) 
Hola tengo un problema al correro el servidor: platziverse-web git:(master) ‚úó npm run start-dev > platziverse-web@1.0.0 pres...

	* **Diego Alexander Forero Higuera (Platzi)** [38523] (2)

		Te falta instalar chart.js  
		`npm install chart.js --save`

* **LUISFER24** (1) [37378](https://platzi.com/comentario/332570/) 
que alternativa podriamos usar si elegimos react?

	* **Diego Alexander Forero Higuera (Platzi)** [37378] (1)

		Alternativa a qu√©, no es clara tu pregunta.

* **Luis Antonio Schmiel Paredes** (0) [299083](https://platzi.com/comentario/299083/) 

	Estaba experimentando un error raro‚Ä¶ que dice:
	``` 
	    SyntaxError: platzi/.babelrc: Error while parsing JSON - Unexpected EOFatline1 column 2ofthe JSON5 data. Still toread: ""while parsing file
	    
	```
	
	es porque ese archivo .babelrc estaba en uno de los directorios padres en mi proyecto‚Ä¶ despu√©s de leer en stackoverflow un buen rato entend√≠ que tenia que borrarlo y se arreglo mi problema. Lo dejo aqu√≠ por si le sucede a alguien m√°s.

	* **Diego Alexander Forero Higuera (Platzi)** [299083] (1)

		El problema es porque tienes un car√°cter raro en tu archivo .babelrc para algunas configuraciones de babel este archivo es necesario.

* **Julian Oswaldo Florez Reyes** (0) [261433](https://platzi.com/comentario/261433/) 

	Chicos tengo este error al iniciar el servidor
	``` 
	    MacBook-Pro:platziverse-web JulianFlorez$ npm run start-dev
	    
	    > platziverse-web@1.0.0 prestart-dev /Users/JulianFlorez/minka/platziverse/platziverse-web
	    > npm run build
	    
	    
	    > platziverse-web@1.0.0 build /Users/JulianFlorez/minka/platziverse/platziverse-web
	    > browserify -t babelify -t vueify client/app.js -o public/bundle.js
	    
	    module.js:540
	        throw err;
	        ^
	    
	    Error: Cannot find module'babel-core'
	        at Function.Module._resolveFilename (module.js:538:15)
	        at Function.Module._load (module.js:468:25)
	        at Module.require (module.js:587:17)
	        at require (internal/module.js:11:18)
	        at Object.<anonymous> (/Users/JulianFlorez/minka/platziverse/platziverse-web/node_modules/babelify/index.js:2:14)
	        at Module._compile (module.js:643:30)
	        at Object.Module._extensions..js (module.js:654:10)
	        at Module.load (module.js:556:32)
	        at tryModuleLoad (module.js:499:12)
	        at Function.Module._load (module.js:491:3)
	    npm ERR! code ELIFECYCLE
	    npm ERR! errno 1
	    npm ERR! platziverse-web@1.0.0 build: `browserify -t babelify -t vueify client/app.js -o public/bundle.js`
	    npm ERR! Exit status 1
	    npm ERR!
	    npm ERR! Failed at the platziverse-web@1.0.0 build script.
	    npm ERR! This is probably not a problem withnpm. There is likely additional logging output above.
	    
	    npm ERR! A complete log ofthis run can be found in:
	    npm ERR!     /Users/JulianFlorez/.npm/_logs/2018-02-20T00_08_52_687Z-debug.log
	    npm ERR! code ELIFECYCLE
	    npm ERR! errno 1
	    npm ERR! platziverse-web@1.0.0 prestart-dev: `npm run build`
	    npm ERR! Exit status 1
	    npm ERR!
	    npm ERR! Failed at the platziverse-web@1.0.0 prestart-dev script.
	    npm ERR! This is probably not a problem withnpm. There is likely additional logging output above.
	    
	    npm ERR! A complete log ofthis run can be found in:
	    npm ERR!     /Users/JulianFlorez/.npm/_logs/2018-02-20T00_08_52_727Z-debug.log
	    
	```
	
	Este es mi package.json
	``` 
	    {
	      "name": "platziverse-web",
	      "version": "1.0.0",
	      "description": "A simple IoT Platform - Web Dashboard",
	      "main": "server.js",
	      "scripts": {
	        "start": "NODE_ENV=production node server.js",
	        "prestart": "npm run build",
	        "start-dev": "DEBUG=platziverse:* nodemon server.js",
	        "prestart-dev": "npm run build",
	        "build": "browserify -t babelify -t vueify client/app.js -o public/bundle.js",
	        "lint": "standard"
	      },
	      "repository": {
	        "type": "git",
	        "url": "git+https://github.com/platzi/platziverse.git"
	      },
	      "author": "Julian Florez",
	      "license": "MIT",
	      "bugs": {
	        "url": "https://github.com/platzi/platziverse/issues"
	      },
	      "homepage": "https://github.com/platzi/platziverse#readme",
	      "browserify": {
	        "transform": [
	          [
	            "babelify",
	            {
	              "presets": [
	                "es2015"
	              ]
	            }
	          ]
	        ]
	      },
	      "devDependencies": {
	        "babel-plugin-transform-runtime": "^6.23.0",
	        "babel-preset-es2015": "^6.24.1",
	        "babelify": "^8.0.0",
	        "browserify": "^16.1.0",
	        "nodemon": "^1.14.12",
	        "standard": "^10.0.3",
	        "vueify": "^9.4.1"
	      },
	      "dependencies": {
	        "chalk": "^2.3.1",
	        "chart.js": "^2.7.1",
	        "debug": "^3.1.0",
	        "express": "^4.16.2",
	        "express-asyncify": "^1.0.0",
	        "platziverse-agent": "file:../platziverse-agent",
	        "request": "^2.83.0",
	        "request-promise-native": "^1.0.5",
	        "socket.io": "^2.0.4",
	        "vue": "^2.5.13",
	        "vue-chartjs": "^3.2.1"
	      }
	    }
	    
	    
	```
	
	Gracias de antemano.

	* **Diego Alexander Forero Higuera (Platzi)** [261433] (2)

		Te falta instalar babel-core
		``` 
		    npm install -D babel-core
		    
		```

## 0560. Integraci√≥n del cliente frontend con API (Metric) [8371](https://platzi.com/clases/1151-nodejs/8371-integracion-del-cliente-frontend-con-api-metric/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 39-integrar-component-metrica-api](https://github.com/platzi/platziverse/tree/39-integrar-component-metrica-api)

### Comentarios:

* **leonardcad** (2) [948142](https://platzi.com/comentario/948142/) 

	Agradezco la colaboraci√≥n si actualizan los archivos para poderlos descargar.  
	Gracias

* **Misael Zurdo** (2) [356595](https://platzi.com/comentario/356595/) 

	En utils cree una objeto con funciones para reducir codigo  
	este caso le agregue get pero podr√≠a ir post o put ademas, el token si es siempre el mismo no hace falta mandarlo siempre por parametro
	``` 
	    const request = {
	      get: (url, apiToken) => {
	        const options = {
	          method: 'GET',
	          url,
	          headers: {
	            'Authorization': `Bearer ${apiToken}`
	          },
	          json: true
	        }
	        return requestPromise(options)
	      }
	    }
	    
	```
	
	Despues podrias utilizar
	``` 
	    const { uuid } = req.params
	      const url = `${endpoint}/api/metrics/${uuid}`
	      letresult
	      try {
	        result = await request.get(url, apiToken)
	      } catch (e) {
	        return next(e)
	      }
	      res.send(result)
	    
	```

* **alejandro2396** (2) [60611](https://platzi.com/comentario/608184/) 
Cuando ejecuto la merica me dice: ‚ÄúMetric is not defined‚Äù, que puede ser?

* **eyesidmorenov** (1) [624611](https://platzi.com/comentario/624611/) 

	En el proyecto web coloca Julian el puerto 8080 del proyecto web no coloca el llamado al puerto del servidor que es 3000‚Ä¶ Le funciona ???

	* **Juan Agu** [624611] (1)

		El puerto 3000 es el de la api, el 8080 es el del proxy. O sea, llama al proxy, y el proxy hace el llamado a la api.

* **Andres Leonardo Arevalo** (1) [245273](https://platzi.com/comentario/245273/) 

	Generar colores aleatorios con random-material-color

* **eyesidmorenov** (1) [61611](https://platzi.com/comentario/624606/) 
Julian como es el manejo cuando la informaci√≥n la recibe el Front End directamente desde la API via Socket IO. Es decir que no la devuel...

## 0570. Integraci√≥n del cliente frontend con socket.io (Metric) [8372](https://platzi.com/clases/1151-nodejs/8372-integracion-del-cliente-frontend-con-socketio-metr/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 40-integrart-componente-metrica-socketio](https://github.com/platzi/platziverse/tree/40-integrart-componente-metrica-socketio)

### Comentarios:

* **Jos√© Ricardo Romo Guti√©rrez** (1) [345845](https://platzi.com/comentario/345845/) 

	tengo un error en el cliente, el servidor mqtt, la API el agente y el servidor web funcionan bien. Pero me sale este error en el navegador.
	``` 
	    Uncaught TypeError: Line.extend is not a function
	        at Object.4.vue-chartjs (bundle.js:117)
	        at o (bundle.js:1)
	        at bundle.js:1
	        at bundle.js:133
	        at Object.5../line-chart (bundle.js:227)
	        at o (bundle.js:1)
	        at bundle.js:1
	        at Object.2../agent.vue (bundle.js:54)
	        at o (bundle.js:1)
	        at r (bundle.js:1)
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [345845] (3)

		Esto te puede servir <https://stackoverflow.com/a/47080720>, la librer√≠a cambio la forma de implementar algunas cosas en versiones recientes.

* **Jos√© Rodr√≠guez** (1) [205504](https://platzi.com/comentario/205504/) 

	Saludos, el filtro aplicado para agentes no deber√≠a realizarse del lado del servidor?

## 0580. Integraci√≥n del cliente frontend con API (Agent) [8373](https://platzi.com/clases/1151-nodejs/8373-integracion-del-cliente-frontend-con-api-agent/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 41-integrar-componente-agent-api](https://github.com/platzi/platziverse/tree/41-integrar-componente-agent-api)

### Comentarios:

* **Jose R. Torrens Acosta** (3) [279254](https://platzi.com/comentario/279254/) 

	Como convenci√≥n los components de VUE se definen de la siguiente forma: Template, Script, Style.
	
	Los componentes del dashboard no est√°n as√≠, no es gran cosa, pero siempre es bueno seguir las convenciones.

* **eyesidmorenov** (1) [61614](https://platzi.com/comentario/624622/) 
Julian donde queda el uso del proxy esperaba que hicieras el llamado desde la aplicaci√≥n web o desde el browser y se conectara al Api. ...

## 0590. Integraci√≥n del cliente frontend con socket.io (Agent) [8374](https://platzi.com/clases/1151-nodejs/8374-integracion-del-cliente-frontend-con-socketio-agen/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 42-integrar-componente-agent-socketio](https://github.com/platzi/platziverse/tree/42-integrar-componente-agent-socketio)

### Comentarios:

* **Jos√© Ricardo Romo Guti√©rrez** (1) [350941](https://platzi.com/comentario/350941/) 

	Hola, me pueden ayudar con este error, no he podido encontrar una solucion. Cuando abro la pagina sale esto en la consola de chrome y no muestra las graficas:
	``` 
	    "devDependencies": {
	        "standard": "^10.0.3"
	      },
	      "dependencies": {
	        "blessed": "^0.1.81",
	        "blessed-contrib": "^4.7.5",
	        "moment": "^2.18.1",
	        "platziverse-agent": "file:../platziverse-agent"
	      }
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [350941] (1)

		Sin ver tu c√≥digo es dif√≠cil entender que pasa, puedes compartir tu c√≥digo y capturas de pantalla de como se ve el navegador.

* **Sci4Tech** (1) [233952](https://platzi.com/comentario/233952/) 

	Estoy probando este m√≥dulo en una maquina Windows y en una Raspberry Pi. Los m√≥dulos MQTT y API est√°n corriendo en Raspberry. Lanzo un par de preguntas a ver si a alguien le ocurre lo siguiente y como lo ha solucionado:
	
	  1. Lanzo el servidor WEB en Windows. Cuando me conecto desde el navegador todo va perfecto‚Ä¶ pero si se desconecta el agente sigue marcando ‚Äúconnected: true‚Äù ¬øPor qu√©?
	
	  2. Si lanzo el servidor WEB en Raspberry Pi, cuando cargo la web solo se ve el logo ‚Äúplatziverse‚Äù pero no aparecen los agentes. ¬øPor qu√©?
	
	
	
	
	PD: El package.json en windows usa la linea ‚ÄúSET DEBUG= [‚Ä¶] && nodemon [‚Ä¶]‚Äù Para Raspberry ser√≠a ‚ÄúDEBUG= [‚Ä¶] nodemon [‚Ä¶]‚Äù

	* **Diego Alexander Forero Higuera (Platzi)** [233952] (2)

		En la consola del navegador sale alg√∫n error cuando corres el servidor web desde Rasperry Pi, probablemente haya una ruta mal, por ejemplo la ip del socket y no lo encuentra y por esto no muestra nada.
		
		En cuanto al estado del Agent revisa la forma en como verificas la conexi√≥n al socket.

	* **Sci4Tech** [233952] (0)

		Muchas gracias GOLUM23. Ya he conseguido solucionar el problema 1) modificando las direcciones tanto en el hichero config.js como en bundle.js (lineas 494-496).
		
		En cuanto al estado del Agent, me imagino que el error debe estar en el m√≥dulo MQTT pero no consigo encontrar el problema - ¬øl√≠neas 41-68? He intentado cambiar en la linea 45 el if(agent) por if(!agent) pero sigue comportandose igual‚Ä¶ ¬øalguna pista?
		
		Muchas gracias

	* **Sci4Tech** [233952] (3)

		Ya encontr√© el problema‚Ä¶ habia escrito en las lineas 36 y 41 ‚Äúconnented‚Äù en lugar de ‚Äúconnected‚Äù.
		
		Ahora todo funciona perfectamente.
		
		Muchas gracias!

* **Sci4Tech** (1) [233909](https://platzi.com/comentario/233909/) 

	Falta el fichero app.vue en los archivos. Gracias!

	* **davidtoca (Platzi)** [233909] (0)

		Gracias por reportarlo, lo vamos a revisar

* **Jos√© Ricardo Romo Guti√©rrez** (1) [39082](https://platzi.com/comentario/350941/) 
Hola, me pueden ayudar con este error, no he podido encontrar una solucion. Cuando abro la pagina sale esto en la consola de chrome y no ...

	* **Diego Alexander Forero Higuera (Platzi)** [39082] (1)

		Sin ver tu c√≥digo es dif√≠cil entender que pasa, puedes compartir tu c√≥digo y capturas de pantalla de como se ve el navegador.

# Creando un Dashboard para la terminal en tiempo real con Blessed (platziverse-cl) [1474]

## 0600. Implementaci√≥n de un CLI B√°sico con Node [8375](https://platzi.com/clases/1151-nodejs/8375-implementacion-de-un-cli-basico-con-node/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 43-implementar-cli-basico](https://github.com/platzi/platziverse/tree/43-implementar-cli-basico)

### Comentarios:

* **Joaquin Araujo** (14) [239570](https://platzi.com/comentario/239570/) 

	Para los valientes que llegaron hasta ac√° y aun no saben el porque a Julian cuando hace `npm init` no le pide su nombre (author) es porque el ya estableci√≥ esa configuraci√≥n antes en NPM, ahora te explico como hacerlo, funciona muy similar a git:
	
	* Establece tu nombre y apellido con:
	
	
	``` 
	    npm set init.author.name"Joaquin Araujo"
	    
	```
	
	* Establece tu correo con:
	
	
	``` 
	    npm set init.author.email"joaquinaraujojs@gmail.com"
	    
	```
	
	* Establece tu usuario de Twitter (opcional) con:
	
	
	``` 
	    npm set init.author.url"https://twitter.com/JoaquinAraujoJS"
	    
	```
	
	* Inicia sesion en NMP (opcional) con:
	
	
	``` 
	    npm login
	    
	```

	* **Allinson Mota** [239570] (0)

		```
		    npm config set init.author.name"Allinson Mota"--global
		    
		```

	* **Efr√©n S√°nchez** [239570] (1)

		```
		    npm set init-author-name="Your Name"
		    
		```
		``` 
		    npm set init-author-url="http://yoursite.com"
		    
		```

* **Andres Leonardo Arevalo** (2) [245377](https://platzi.com/comentario/245377/) 

	Explicaci√≥n de #!/usr/bin/env node

* **carlos galvan grajales** (1) [419285](https://platzi.com/comentario/419285/) 

	Hola, para correr el archivo .js de manera binaria en windows como se hace? solo me funciona el comando
	``` 
	    nodearchivo.js
	    
	```
	
	mas no me funciona el
	``` 
	    ./archivo.js
	    
	```

	* **carlos galvan grajales** [419285] (1)

		para los que se pregunten‚Ä¶ el comando para correr un archivo en el cmd es asi:
		``` 
		    .\archivo.js
		    
		```
		
		pero el lector es wsh (windows script host) que no lee javascript por lo que cuando se pone:
		``` 
		    console.log('hola mundo')
		    
		```
		
		tirara un error como ‚Äúconsole is not defined‚Äù, para imprimir se debe poner en el lenguaje JScript:
		``` 
		    WSH.Echo("Hello world");
		    WSH.Quit();
		    
		```
		
		que es uno de los lenguajes que maneja [WSH](https://en.wikipedia.org/wiki/Windows_Script_Host).
		
		en windows al parecer toca siempre correrlo con el:
		``` 
		    nodearchivo.js
		    
		```

	* **carlos galvan grajales** [419285] (1)

		Si me equivoco o tienen algo que agregar lo agradesco mucho.

## 0610. Introducci√≥n a Blessed  Blessed Contrib [8376](https://platzi.com/clases/1151-nodejs/8376-introduccion-a-blessed-blessed-contrib/)

### Descripci√≥n:


### Links:

* [GitHub - chjj/blessed: A high-level terminal interface library for node.js.](https://github.com/chjj/blessed)

### Comentarios:

* **Luis Antonio Schmiel Paredes** (3) [299712](https://platzi.com/comentario/299712/) 

	aqu√≠ esta el enlace a blessed:  
	<https://github.com/chjj/blessed>

* **Jose Vinicio Flores Arias** (2) [375489](https://platzi.com/comentario/375489/) 

	Esto se pone muy emocionante ‚ù§Ô∏è

## 0620. Implementaci√≥n del layout b√°sico con Blessed Contrib [8377](https://platzi.com/clases/1151-nodejs/8377-implementacion-del-layout-basico-con-blessed-contr/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 44-implementar-layout-blessed](https://github.com/platzi/platziverse/tree/44-implementar-layout-blessed)

### Comentarios:

* **Joaquin Araujo** (11) [239253](https://platzi.com/comentario/239253/) 

	Cuando amas JavaScript y te sorprendes con lo que puedes hacer con el en esta clase üòÉ

	* **Luis Antonio Schmiel Paredes** [239253] (0)

		esto sin duda es otro nivel.

* **Juan David G√≥mez G√≥mez** (1) [399706](https://platzi.com/comentario/399706/) 

	Excelente el aporte del curso con este tipo de temas!

* **Carlos Enrique Gonzalez Pe√±a** (1) [313968](https://platzi.com/comentario/313968/) 

	Este curso esta incre√≠ble, te sorprende todas las cosas que puedes hacer con JS, pero esta extremadamente complejo, hay que dedicarle tiempo para entender cada concepto y al final es muy satisfactorio

* **carlos galvan grajales** (1) [273077](https://platzi.com/comentario/273077/) 

	Muchas gracias por este curso esta genial!

* **Steven Anaya** (1) [263722](https://platzi.com/comentario/263722/) 

	Wow, incre√≠ble el alcance de JS.

* **juand_silva** (0) [318605](https://platzi.com/comentario/318605/) 

	Cada d√≠a sorprende lo que se puede hacer con JavaScript üòÆ

## 0630. Integraci√≥n con el agente de monitoreo 1 [8378](https://platzi.com/clases/1151-nodejs/8378-integracion-con-el-agente-de-monitoreo-1/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 45-implementar-agent-connected-cli](https://github.com/platzi/platziverse/tree/45-implementar-agent-connected-cli)

### Comentarios:

* **Juan David G√≥mez G√≥mez** (3) [399709](https://platzi.com/comentario/399709/) 

	tenia inconvenientes al momento de ejecutar los ejemplos, hay que tener en cuenta los otros m√≥dulos que se deben correr para que funcione todo, para este ejemplo tambi√©n hay que correr el modulo mqtt con npm run start-dev

## 0640. Integraci√≥n con el agente de monitoreo 2 [8379](https://platzi.com/clases/1151-nodejs/8379-integracion-con-el-agente-de-monitoreo-2/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 46-implementar-agent-message-cli](https://github.com/platzi/platziverse/tree/46-implementar-agent-message-cli)

### Comentarios:

## 0650. Integraci√≥n con el agente de monitoreo 3 [8380](https://platzi.com/clases/1151-nodejs/8380-integracion-con-el-agente-de-monitoreo-3/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 47-implementar-graficas-cli](https://github.com/platzi/platziverse/tree/47-implementar-graficas-cli)

### Comentarios:

* **Jessica Tatiana Camacho** (5) [350969](https://platzi.com/comentario/350969/) 

	el curso est√° genial, me encanta todo lo que he aprendido; pero deberian mejorar la edicion de los videos y mover la pantalla del profesor a un espacio en el que no impida ver que es lo que est√° escribiendo. Si bien los archivos est√°n en el curso, ser√≠a espectacular si uno no tuviese ue remitirse a ellos solo porque no pudo ver una parte

* **rominabarrosw3** (2) [352545](https://platzi.com/comentario/352545/) 

	Me volvi literalmente loca con este video. Que noble que es javascript üòÉ

* **Andres Leonardo Arevalo** (2) [245416](https://platzi.com/comentario/245416/) 

	Incre√≠ble, creo que estoy enamorado de Javascript jeje

* **leonardcad** (1) [948248](https://platzi.com/comentario/948248/) 

	Esta increible üòÑ

* **juand_silva** (0) [318843](https://platzi.com/comentario/318843/) 

	Incre√≠ble curso y las cosas que se pueden hacer con JavaScript de una forma simple.

# Depurando Aplicaciones Node.js				 [1475]

## 0660. Utilizando longjohn para mejores stacktraces [8381](https://platzi.com/clases/1151-nodejs/8381-utilizando-longjohn-para-mejores-stacktraces/)

### Descripci√≥n:


### Comentarios:

* **Jonathan Jim√©nez** (4) [214347](https://platzi.com/comentario/214347/) 

	Soluci√≥n reto:
	
	a√±adir el siguiente condicional al requerimiento de longjohn:
	``` 
	    if (process.env.NODE_ENV !== "production") {
	      require('longjohn')
	    }
	    
	```

	* **Joaquin Araujo** [214347] (2)

		Me gusto tu forma de completar el reto, pero creo que se podr√≠a mejorar as√≠:
		``` 
		    if (process.env.NODE_ENV !== 'production') require('longjohn')
		    
		```

	* **Jonathan Jim√©nez** [214347] (0)

		Cierto, JoaquinAraujoJS, al poder solventarse en una sola l√≠nea podemos usar tu sintaxis que lo hace m√°s legible!!

	* **Jose R. Torrens Acosta** [214347] (1)

		Sin embargo si usan alg√∫n linter la primera opci√≥n es la recomendable, porque siempre marcara que los condicionales deben tener unas llaves luego de los (), pudieran setear esa rule en off, pero no es recomendable.

	* **Carlos Enrique Gonzalez Pe√±a** [214347] (1)

		Y si usamos el ternary? seg√∫n tengo entendido el complexity es mejor usando ternary
		``` 
		    (process.env.NODE_ENV !== "production" ? requiere('longjohn') : false)
		    
		```

	* **axisc i** [214347] (0)

		Esta soluci√≥n va orientada a usar lo que ya tenemos:
		``` 
		    if (process.env.DEBUG) require('longjohn')
		    
		```
		
		Ya que en este punto el modulo ‚Äúplatziverse-db‚Äù no utiliza la variable ‚ÄúNODE_ENV‚Äù

	* **David Behar** [214347] (1)

		Creo que la opci√≥n m√°s legible y de una l√≠nea ser√≠a con el `&&` que nos dice que s√≥lo lo ejecutes `if true`.
		``` 
		    ( process.env.NODE_ENV !== "production"&& requiere('longjohn') )
		    
		```

* **Iv√°n Felipe Velastegu√≠ Jaramillo** (1) [727789](https://platzi.com/comentario/727789/) 

	Si se encuentran en windows el script del terminal en cmd ser√≠a  
	**set DB_HOST=foo && npm run setup**  
	O para los que usamos el terminal de Git Bash en Windows o incluido en VSCode  
	**export DB_HOST=foo && npm run setup **

	* **Iv√°n Felipe Velastegu√≠ Jaramillo** [727789] (1)

		 **export DB_HOST=foo && npm run setup**

* **Carlos Enrique Gonzalez Pe√±a** (0) [313974](https://platzi.com/comentario/313974/) 

	Aqu√≠ esta la documentaci√≥n de [longjohn](https://github.com/mattinsler/longjohn) aunque no es muy completa

* **Joaquin Araujo** (0) [239414](https://platzi.com/comentario/239414/) 

	 **Tengo un problema,** ejecuto `DB_HOST=foo npm run setup` y Node no lee la variable de entorno sino que toma el valor `'local'`

	* **Diego Alexander Forero Higuera (Platzi)** [239414] (1)

		Si intentas ejecutar  
		`DB_HOST=foo DEBUG=platziverse:* node setup.js`  
		Te funciona o tambi√©n toma la conexi√≥n local?

	* **Joaquin Araujo** [239414] (0)

		A partir del archivo `package.json` si funciona pero directamente en la terminal no

## 0670. Depurando en Desarrollo con node --inspect [8382](https://platzi.com/clases/1151-nodejs/8382-depurando-en-desarrollo-con-node-inspect/)

### Descripci√≥n:


### Comentarios:

* **Pedro Rafael Jim√©nez Jij√≥n** (3) [352838](https://platzi.com/comentario/352838/) 

	¬øfuncionar√≠a con chromium?

	* **Diego Alexander Forero Higuera (Platzi)** [352838] (2)

		No deber√≠a tener problema, el problema que se puede presentar es m√°s a nivel de reproducci√≥n de videos por ejemplo ya que chromium no tiene los codecs instalados como si lo tiene chrome, el motor de JavaScript es igual para los dos navegadores.

* **Rub√©n Maier Enzler** (2) [526816](https://platzi.com/comentario/526816/) 

	hay alg√∫n curso sobre debug? creo que podr√≠a ser tranquilamente una unidad aparte, usaste vocabulario t√©cnico que tuve que investigar por mi cuenta y encima el ejemplo con el que trabajas no es el mejor para explicar el tema, estas explicando algo ‚Äúque podr√≠a ser √∫til para casos en los que las cosas salen mal‚Äù con ejemplos donde esta todo bien

	* **David Behar** [526816] (1)

		No, pero est√°n grabando un curso de c√≥mo utilizar las chrome developers tools de manera adecuada con De Granda

* **juand_silva** (2) [318887](https://platzi.com/comentario/318887/) 

	Esta clase deber√≠a tener un m√≥dulo aparte con una aplicaci√≥n real, especialmente el concepto de MEMORY LEAKS, de verdad que muchas veces los DevOps optimizan colocando m√°s memoria al servidor y con est√° herramienta uno puede saber desde el mismo c√≥digo, que funciones est√°n causando el memory leaks y optimizar nuestro c√≥digo antes de producci√≥n.

* **juand_silva** (2) [318869](https://platzi.com/comentario/318869/) 

	Para abrir el inspect de Chrome con: `about:inspect`  
	Ya s√© para optimizar servidores en NODE.JS.  
	JavaScript no dej√≥ de sorprenderme.

* **Pedro Rafael Jim√©nez Jij√≥n** (1) [39256](https://platzi.com/comentario/352838/) 
¬øfuncionar√≠a con chromium?

	* **Diego Alexander Forero Higuera (Platzi)** [39256] (2)

		No deber√≠a tener problema, el problema que se puede presentar es m√°s a nivel de reproducci√≥n de videos por ejemplo ya que chromium no tiene los codecs instalados como si lo tiene chrome, el motor de JavaScript es igual para los dos navegadores.

## 0680. Depurando en Desarrollo con Visual Studio Code [8383](https://platzi.com/clases/1151-nodejs/8383-depurando-en-desarrollo-con-visual-studio-code/)

### Descripci√≥n:


### Comentarios:

* **Joaquin Araujo** (4) [239427](https://platzi.com/comentario/239427/) 

	No se recomienda hacer depuraciones de este tipo en producci√≥n porque esto tiene riesgo de seguridad.

	* **Diego Alexander Forero Higuera (Platzi)** [239427] (4)

		No solo de seguridad, tambi√©n afecta el rendimiento de la aplicaci√≥n ya que tiene que pasar por el debugger.

* **juand_silva** (2) [36121](https://platzi.com/comentario/318891/) 
Que es closures?

	* **davidtoca (Platzi)** [36121] (1)

		Puedes ver este material donde se habla del tema: <https://platzi.com/clases/fundamentos-javascript/concepto/conocimientos-intermedios/entiende-los-closures-de-javascript/material/>

* **Carlos Enrique Gonzalez Pe√±a** (1) [313985](https://platzi.com/comentario/313985/) 

	Aqui esta la documentaci√≥n completa sobre como depurar en node con [VSCode](https://code.visualstudio.com/docs/nodejs/nodejs-debugging)  
	Esta muy completa pero solo esta en ingles

* **juand_silva** (0) [318891](https://platzi.com/comentario/318891/) 

	Que es closures?

	* **davidtoca (Platzi)** [318891] (1)

		Puedes ver este material donde se habla del tema: <https://platzi.com/clases/fundamentos-javascript/concepto/conocimientos-intermedios/entiende-los-closures-de-javascript/material/>

	* **noemk2** [318891] (3)

		para mi, son las funciones dentro de otra funcion que recuerdan las variables ya declaradas

# Preparando nuestra aplicaci√≥n para producci√≥n				 [1476]

## 0690. Preparando Proyecto para Producci√≥n 1 [8384](https://platzi.com/clases/1151-nodejs/8384-preparando-proyecto-para-produccion/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 48-preparar-produccion-1](https://github.com/platzi/platziverse/tree/48-preparar-produccion-1)

### Comentarios:

* **Juan David G√≥mez G√≥mez** (2) [399768](https://platzi.com/comentario/399768/) 

	el v√≠deo tiene problemas en la edici√≥n, repite lo de la validaci√≥n del reto en la parte bd.

	* **Daniel Acero** [399768] (2)

		el video en el server B est√° ok

## 0700. Preparando Proyecto para Producci√≥n 2 [8385](https://platzi.com/clases/1151-nodejs/8385-preparando-proyecto-para-produccion-parte-2/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 49-preparar-produccion-2](https://github.com/platzi/platziverse/tree/49-preparar-produccion-2)

### Comentarios:

* **nikosantis** (2) [885549](https://platzi.com/comentario/885549/) 

	Para quienes lleguen aqu√≠ antes que actualicen este curso y no les est√© funcionando el ‚Äúbuild‚Äù, les dejo mis dependencias que funcionaron ok en mac:
	``` 
	    "devDependencies": {
	        "babel-core": "^6.26.3",
	        "babel-plugin-transform-runtime": "^6.23.0",
	        "babel-preset-es2015": "^6.24.1",
	        "babel-preset-stage-3": "^6.24.1",
	        "babelify": "^7.3.0",
	        "browserify": "^16.5.0",
	        "envify": "^4.1.0",
	        "nodemon": "^2.0.2",
	        "standard": "^14.3.1",
	        "uglify-js": "github:mishoo/UglifyJS2#harmony",
	        "vueify": "^9.4.1"
	      },
	      "dependencies": {
	        "chalk": "^3.0.0",
	        "chart.js": "^2.6.0",
	        "debug": "^4.1.1",
	        "express": "^4.17.1",
	        "express-asyncify": "^1.0.0",
	        "moment": "^2.24.0",
	        "nikoverse-agent": "file:../nikoverse-agent",
	        "random-material-color": "^1.0.5",
	        "request": "^2.88.0",
	        "request-promise-native": "^1.0.8",
	        "socket.io": "^2.3.0",
	        "socket.io-client": "^2.3.0",
	        "vue": "^2.6.11",
	        "vue-chartjs": "^2.8.7"
	      }
	    
	```
	
	Lo dem√°s est√° igual que el profe.  
	saludos

	* **nikosantis** [885549] (1)

		Cost√≥ un mont√≥n igual jaja

* **Navarrock33** (1) [685470](https://platzi.com/comentario/685470/) 

	Compas, si les da error al momento de hacer el build es porque la version de babelifi debe ser especificamente la version 8.0.0; para instalarla deben desinstalar primero la version que tengan y luego instalar la 8 con los siguientes comandos:
	
	npm uninstall babelify --save-dev  
	npm install bebelify@8 --save-dev
	
	Recuerden crear el archivo .babelrc

	* **nikosantis** [685470] (1)

		npm i babelify@8.0.0

* **Rub√©n Maier Enzler** (1) [527099](https://platzi.com/comentario/527099/) 

	error‚Ä¶ como se soluciona?
	``` 
	    Parse error at 0:5,0
	    const chalk = require('chalk')
	    ^
	    ERROR: Unexpected token: keyword (const)
	        at JS_Parse_Error.get (eval at <anonymous> (/Users/ruben/git/platziverse/platziverse-web/node_modules/uglify-js/tools/node.js:20:1), <anonymous>:71:23)
	        at fatal (/Users/ruben/git/platziverse/platziverse-web/node_modules/uglify-js/bin/uglifyjs:291:53)
	        at run (/Users/ruben/git/platziverse/platziverse-web/node_modules/uglify-js/bin/uglifyjs:235:9)
	        at Socket.<anonymous> (/Users/ruben/git/platziverse/platziverse-web/node_modules/uglify-js/bin/uglifyjs:168:9)
	        at Socket.emit (events.js:187:15)
	        at endReadableNT (_stream_readable.js:1094:12)
	        at process._tickCallback (internal/process/next_tick.js:63:19)
	    npm ERR! code ELIFECYCLE
	    npm ERR! errno 1
	    npm ERR! platziverse-web@1.0.0build: `NODE_ENV=production browserify -g envify -t babelify -t vueify client/app.js | uglifyjs -c -m -o public/bundle.js`
	    npm ERR! Exit status 1
	    npm ERR! 
	    npm ERR! Failed at the platziverse-web@1.0.0 build script.
	    npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
	    
	    npm ERR! A complete log of this run can be found in:
	    npm ERR!     /Users/ruben/.npm/_logs/2019-03-05T01_47_46_199Z-debug.log
	    
	```

	* **Rub√©n Maier Enzler** [527099] (1)

		Saque el unglify y anda todo bien, es esa mierda la que rompe todo ¬øesta desactualizada o qu√© esta pasando? investigue pero todos buscan librer√≠as alternativas en ves de buscarle el problema a esta y solucionarlo.

	* **Way** [527099] (1)

		Me paso lo mismo, hice lo que dec√≠a en este link y me funciono:  
		<https://stackoverflow.com/questions/42375468/uglify-syntaxerror-unexpected-token-punc>
		
		Adem√°s instale ‚Äúbabelify‚Äù: ‚Äú^7.3.0‚Äù, porque la version que me instalaba era la 10 y me sacaba un error con otra libreria que tocaba instalar: @bable/core.

* **alexyepez** (1) [519690](https://platzi.com/comentario/519690/) 

	Instalaci√≥n de Ansible
	
	[ubuntu 18.04](https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-ansible-on-ubuntu-18-04)

* **llorente.oscar** (1) [507905](https://platzi.com/comentario/507905/) 

	Cuando hago el build
	``` 
	    > platziverse-web@1.0.0 build /home/ollorente/Documentos/PLATZI/platziverse/platziverse-web
	    > NODE_ENV=production browserify -g envify -t babelify -t vueify client/app.js | uglifyjs -c -m -o public/bundle.js
	    
	    Parse error at 0:51156,0
	    const v4 = '(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])(?:\\.(?:25[0-5]
	    ^
	    ERROR: Unexpected token: keyword (const)
	        at JS_Parse_Error.get (eval at <anonymous> (/home/ollorente/Documentos/PLATZI/platziverse/platziverse-web/node_modules/uglify-js/tools/node.js:20:1), <anonymous>:71:23)
	        at fatal (/home/ollorente/Documentos/PLATZI/platziverse/platziverse-web/node_modules/uglify-js/bin/uglifyjs:291:53)
	        at run (/home/ollorente/Documentos/PLATZI/platziverse/platziverse-web/node_modules/uglify-js/bin/uglifyjs:235:9)
	        at Socket.<anonymous> (/home/ollorente/Documentos/PLATZI/platziverse/platziverse-web/node_modules/uglify-js/bin/uglifyjs:168:9)
	        at Socket.emit (events.js:187:15)
	        at endReadableNT (_stream_readable.js:1094:12)
	        at process._tickCallback (internal/process/next_tick.js:63:19)
	    npm ERR! code ELIFECYCLE
	    npm ERR! errno 1
	    npm ERR! platziverse-web@1.0.0 build: `NODE_ENV=production browserify -g envify -t babelify -t vueify client/app.js | uglifyjs -c -m -o public/bundle.js`
	    npm ERR! Exit status 1
	    npm ERR!
	    npm ERR! Failed at the platziverse-web@1.0.0 build script.
	    npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
	    
	    npm ERR! A complete log of this run can be found in:
	    npm ERR!     /home/ollorente/.npm/_logs/2019-02-11T21_58_19_091Z-debug.log
	    
	```
	
	Aqu√≠ se estall√≥ el c√≥digo‚Ä¶  
	No se que pas√≥.

	* **Erik Ochoa** [507905] (1)

		Parece ser un error con la dependencia **uglify** yo revisar√≠a /home/ollorente/.npm/_logs/2019-02-11T21_58_19_091Z-debug.log para ver si hay m√°s info.
		
		Creo este curso tiene tiempo que fue publicado, verifica bien que estes usando las mismas versiones en el package.json.

* **Rub√©n Maier Enzler** (1) [54224](https://platzi.com/comentario/527099/) 
error‚Ä¶ como se soluciona? Parse error at 0:5,0 const chalk = require('chalk') ^ ERROR: Unexpected token: keyword (const) at JS_...

	* **Rub√©n Maier Enzler** [54224] (1)

		Saque el unglify y anda todo bien, es esa mierda la que rompe todo ¬øesta desactualizada o qu√© esta pasando? investigue pero todos buscan librer√≠as alternativas en ves de buscarle el problema a esta y solucionarlo.

* **llorente.oscar** (1) [52625](https://platzi.com/comentario/507905/) 
Cuando hago el build > platziverse-web@1.0.0 build /home/ollorente/Documentos/PLATZI/platziverse/platziverse-web > NODE_ENV=p...

	* **Erik Ochoa** [52625] (1)

		Parece ser un error con la dependencia **uglify** yo revisar√≠a /home/ollorente/.npm/_logs/2019-02-11T21_58_19_091Z-debug.log para ver si hay m√°s info.
		
		Creo este curso tiene tiempo que fue publicado, verifica bien que estes usando las mismas versiones en el package.json.

## 0710. Creaci√≥n de scripts para despliegue con Ansible [8386](https://platzi.com/clases/1151-nodejs/8386-creacion-de-scripts-para-despliegue-con-ansible/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 50-crear-role-ansible-database](https://github.com/platzi/platziverse/tree/50-crear-role-ansible-database)

### Comentarios:

* **inquiridor** (6) [274802](https://platzi.com/comentario/274802/) 

	 **\- postgresql:**  
	sudo ansible-galaxy install ANXS.postgresql
	
	**\- redis:**  
	sudo ansible-galaxy install geerlingguy.redis
	
	**\- NGINX:**  
	sudo ansible-galaxy install jdauphant.nginx

* **axisc i** (3) [355563](https://platzi.com/comentario/355563/) 

	chulada de video ‚ù§Ô∏è

* **Andres Leonardo Arevalo** (1) [245941](https://platzi.com/comentario/245941/) 

	Instalaci√≥n y explicaci√≥n de nginx

## 0720. Probando el database rol con Vagrant [8387](https://platzi.com/clases/1151-nodejs/8387-probando-el-database-rol-con-vagrant/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 51-probar-role-database](https://github.com/platzi/platziverse/tree/51-probar-role-database)

### Comentarios:

* **Andres Leonardo Arevalo** (1) [1052900](https://platzi.com/comentario/1052900/) 

	Yo solucione el error de la siguiente manera:
	
	Agregar las siguientes lineas al archivo Vagrantfile:
	
	config.vm.box = "ubuntu/xenial64"  
	config.vm.network ‚Äúforwarded_port‚Äù, guest: 22, host:2222, id: ‚Äússh‚Äù, auto_correct: true  
	config.ssh.username = "vagrant"  
	config.ssh.password = ‚Äúvagrant‚Äù
	
	* No ingresar con vagrant ssh sino con:
	
	
	
	ssh [vagrant@127.0.0.1](mailto:vagrant@127.0.0.1) -p 2222  
	Password: vagrant
	
	Realizar los pasos respectivos de copiar y pegar la llave p√∫blica y asegurarse que solo se encuentre esa llave publica dentro del archivo de .ssh/authorized_keys
	
	Por √∫ltimo vagrant reload

* **Fernando Azuaje** (1) [595173](https://platzi.com/comentario/595173/) 

	Hola quizas esta respuesta es un poco tarde pero es el momento en el que estoy haciendo el curso, logre solucionar el error:
	``` 
	    root@127.0.0.1: Permission denied (publickey).
	    
	```
	
	de la siguiente forma en el servidor en la ruta: etc/ssh, hay un archivo sshd_config y debemos cambiar dos lineas (eso me funciono a mi) del valor que tengan a ‚Äúyes‚Äù:
	``` 
	    PermitRootLoginyes
	    
	```
	
	y
	``` 
	    PasswordAuthenticationyes
	    
	```
	
	luego de guardar los cambios hay que resetear el servicio con
	``` 
	    sudo service ssh restart
	    
	```
	
	ya con esto les pedira la llave privada para entrar y al colocarla funcionara.
	
	Espero que les sea de ayuda

	* **Deyvis Neyser Valdez Gavilan** [595173] (1)

		Hola, hize los cambios pero ahora me pide password, sabes a que se debe?
		
		![deploy.PNG](https://static.platzi.com/media/user_upload/deploy-c6ca94a9-ab5c-4fb3-ac3e-3946bc8d7e56.jpg)

	* **Deyvis Neyser Valdez Gavilan** [595173] (1)

		Bendita soluci√≥n, mi error fue que no copie por completo mi llave publica a authorised_keys, Gracias si funcion√≥ tu m√©todo.

	* **Vissstors** [595173] (1)

		@Deyvisnvg pudiste resolver el problema de que te pidiese password?

	* **Vissstors** [595173] (1)

		Ahora s√≠ funcion√≥, dejo soluci√≥n para el que le sirva: cuando genere el mismo que te solicita una password para root, debes entrar usando vagrant ssh y la password que te solicitar√° ser√°: ‚Äúvagrant‚Äù. Dentro de vagrant@ubuntu-xenial dale una contrase√±a a root usando
		``` 
		    sudo passwd
		    
		```
		
		luego, esa ser√° la contrase√±a para ingresar con
		``` 
		    ssh root@127.0.0.1 -p2222 -i ssh/test 
		    
		```
		
		o
		``` 
		    ssh root@127.0.0.1 -p2222 -i ssh/deploy 
		    
		```
		
		segun como hayas creado la clave ssh en tu terminal.

* **Andres Leonardo Arevalo** (1) [246352](https://platzi.com/comentario/246352/) 

	Soluci√≥n a error REMOTE HOST IDENTIFICATION HAS CHANGED

* **Andres Leonardo Arevalo** (1) [245963](https://platzi.com/comentario/245963/) 

	Explicaci√≥n general de Vgrant

* **omarmus** (0) [294206](https://platzi.com/comentario/294206/) 

	¬øAlgui√©n sabe como configuro ANXS.postgresql para que no me salga este error? Me crea correctamente la bd pero cuando hago ‚Äúpsql -U user db‚Äù me sale ese error o que task hay que crear para solucionar este problema.
	``` 
	    perl: warning: Setting locale failed.
	    perl: warning: Please check that your locale settings:
	            LANGUAGE = (unset),
	            LC_ALL = (unset),
	            LC_MONETARY = "es_BO.UTF-8",
	            LC_NUMERIC = "es_BO.UTF-8",
	            LC_MEASUREMENT = "es_BO.UTF-8",
	            LC_CTYPE = "en_US.UTF-8",
	            LC_TIME = "es_BO.UTF-8",
	            LANG = "en_US.UTF-8"
	        are supported and installed on your system.
	    perl: warning: Falling back toa fallback locale ("en_US.UTF-8").
	    
	```

	* **omarmus** [294206] (0)

		Lo solucion√© agregando este task a deploy/roles/database/tasks/main.yml as√≠:
		``` 
		    ---
		    - name: /etc/locale.gen
		      lineinfile:
		        dest: /etc/locale.gen
		        regexp: "{{ item.regexp }}"
		        line: "{{ item.line }}"
		        state: "{{ item.state }}"
		      with_items:
		        - { regexp: '^#? ?de_DE ISO-8859-1', line: 'de_DE ISO-8859-1', state: present }
		        - { regexp: '^#? ?de_DE.UTF-8 UTF-8', line: 'de_DE.UTF-8 UTF-8', state: present }
		        - { regexp: '^#? ?de_DE@euro ISO-8859-15', line: 'de_DE@euro ISO-8859-15', state: present }
		        - { regexp: '^#? ?en_GB ISO-8859-1', line: 'en_GB ISO-8859-1', state: present }
		        - { regexp: '^#? ?en_GB.ISO-8859-15 ISO-8859-15', line: 'en_GB.ISO-8859-15 ISO-8859-15', state: present }
		        - { regexp: '^#? ?en_GB.UTF-8 UTF-8', line: 'en_GB.UTF-8 UTF-8', state: present }
		        - { regexp: '^#? ?en_US ISO-8859-1', line: 'en_US ISO-8859-1', state: present }
		        - { regexp: '^#? ?en_US.ISO-8859-15 ISO-8859-15', line: 'en_US.ISO-8859-15 ISO-8859-15', state: present }
		        - { regexp: '^#? ?en_US.UTF-8 UTF-8', line: 'en_US.UTF-8 UTF-8', state: present }
		      notify:
		        - rebuild locales database
		    - name: Restarting PostgresSQL
		      service:
		        name=postgresql
		        state=reloaded
		    
		```

* **inquiridor** (0) [274873](https://platzi.com/comentario/274873/) 

	DEBIAN USERS!
	
	I come from future ‚Ä¶ instal VirtualBox from here!, NOT from Oracle
	
	<https://wiki.debian.org/VirtualBox>

* **Eddy Nelson P√©rez Decena** (0) [258765](https://platzi.com/comentario/258765/) 

	Tengo un problema al escribir√ë
	``` 
	    $ vagrant ssh
	    
	```
	
	Esto este el es mensaje:
	``` 
	    vagrant@127.0.0.1: Permission denied (publickey).
	    
	```
	
	Estoy desde windows.

	* **Diego Alexander Forero Higuera (Platzi)** [258765] (1)

		Ese no es un problema por la letra √±, el problema es que no tienes configurada la llave ssh en el servidor de vagrant

	* **inquiridor** [258765] (1)

		a mi me sale ese mismo error üò¶ e hice todo seg√∫n el video u.u:
		
		desde la carpeta ssh de platziverse-deploy ejecuto: ssh [root@127.0.0.1](mailto:root@127.0.0.1) -p 2222 -i deploy
		
		**en mi m√°quina local:**
		
		dentro de la carpeta ssh cree las llaves deploy y deploy.pub
		
		**en la maquina virtual:**
		
		fui hasta la ruta /root/.ssh/ y a√±ad√≠ en authorized_keys la llave deploy.pub

	* **mateog** [258765] (1)

		7 meses y nadie da soluci√≥n a esto üòï, yo tambien tengo el mismo problema

	* **Diego Alexander Forero Higuera (Platzi)** [258765] (1)

		@mateog estamos aqu√≠ para ayudar, puedes enviar captura de pantalla del error y que sistema operativo usas?

	* **mateog** [258765] (1)

		tengo exactamente el mismo error cuando ejecuto **vagrant ssh** en la consola siempre devuelve:  
		[vagrant@127.0.0.1](mailto:vagrant@127.0.0.1): Permission denied (publickey).  
		supongo que es algo en la configuracion de ssh en cuanto a los archivos ssh_config o sshd_config o no se, la verdad no se mucho del tema

	* **Diego Alexander Forero Higuera (Platzi)** [258765] (1)

		Ya tienes generada tu llave ssh y copiaste el contenido de la llave p√∫blica en el archivo authorized_keys dentro de la maquina de vagrant?
		
		Encontr√© esto es un issue de vagrant <https://github.com/hashicorp/vagrant/issues/9831> dan un par de soluciones, prueba para ver si funcionan.

	* **mateog** [258765] (1)

		logr√© entrar a la maquina con vagrant reinstalando todo, ahora el  
		problema es cuando intento acceder con el comando:
		``` 
		    $ ssh root@127.0.0.1 -p2222 -i ssh/deploy
		    
		```
		
		nuevamente aparece el error:
		``` 
		    root@127.0.0.1: Permission denied (publickey).
		    
		```
		
		ya copi√© la llave ssh al archivo authorized_keys dentro de la maquina en vagrant y aun asi no funciona, he leido en otros lugares que tambien puede ser por los permisos de lectura pero tampoco funciona

	* **sebaspernett** [258765] (4)

		Me sucedi√≥ el mismo error. lo que hice fue volver a generar las llaves(publica y privada) de la siguiente forma:
		``` 
		    ssh-keygen -t rsa -C"test" 
		    
		```
		
		el ultimo par√°metro pase un string sin espacios y funciono.
		
		espero que les sirva, y si alguien sabe la raz√≥n de esto me gustar√≠a saber cual es.

	* **kevin velasco** [258765] (1)

		Bueno tengo el mismo problema, y es ubuntu porque e probado conectando mi maquina de windows y me a funcionado pero cuando conecto desde mi ubuntu da este mismo error.
		
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  
		@ WARNING: UNPROTECTED PRIVATE KEY FILE! @  
		@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@  
		Permissions 0555 for ‚Äòdeploy‚Äô are too open.  
		It is required that your private key files are NOT accessible by others.  
		This private key will be ignored.  
		Load key ‚Äúdeploy‚Äù: bad permissions  
		[root@127.0.0.1](mailto:root@127.0.0.1): Permission denied (publickey).

	* **Juan Camilo Angel Fandi√±o** [258765] (1)

		Me funcion√≥ la soluci√≥n de @sebaspernett, generar la llave sin espacios en el comentario:
		``` 
		    ssh-keygen -t rsa -C"test"
		    
		```

	* **Fernando Azuaje** [258765] (2)

		Hola quizas esta resuesta es un poco tarde pero es el momento en el que estoy haciendo el curso, logre solucionar ese error de la siguiente forma en el servidor en la ruta: etc/ssh, hay un archivo sshd_config y debemos cambiar dos lineas (eso me funciono a mi) del valor que tengan a ‚Äúyes‚Äù:
		``` 
		    PermitRootLoginyes
		    
		```
		
		y
		``` 
		    PasswordAuthenticationyes
		    
		```
		
		luego de guardar los cambios hay que resetear el servicio con
		``` 
		    sudo service ssh restart
		    
		```
		
		ya con esto les pedira la llave privada para entrar y al colocarla funcionara.
		
		Espero que les sea de ayuda

* **Sci4Tech** (0) [235306](https://platzi.com/comentario/235306/) 

	Ten un problema para logearme con con el ssh;
	
	cuando escribo
	
	`ssh root@127.0.0.1 -p 2222 -i ssh/deploy`
	
	me sigue pidiendo la pass
	
	`root@127.0.0.1 password:`
	
	le pasa a alguien mas?  
	Gracias

	* **Diego Alexander Forero Higuera (Platzi)** [235306] (1)

		En la configuraci√≥n del servicio ssh en tu servidor que se encuentra en `/etc/ssh/sshd_config`
		
		Buscas la parte donde dice `PasswordAuthentication` la descomentas y pones no, luego reinicias el servicio con `sudo service ssh restart`

	* **Sci4Tech** [235306] (0)

		perfecto. gracias!

* **Sci4Tech** (0) [234286](https://platzi.com/comentario/234286/) 

	¬øExiste alguna alternativa a Vagrant para Raspberry Pi? Muchas gracias

	* **Diego Alexander Forero Higuera (Platzi)** [234286] (3)

		Puedes usar docker, es m√°s liviano que vagrant.

	* **Sci4Tech** [234286] (0)

		Gracias GOLLUM23. ¬øDonde puedo encontrar informaci√≥n sobre como hacer lo mismo que Julian usando Docker? Muchas gracias

* **henrytabimagiraldo** (0) [232294](https://platzi.com/comentario/232294/) 

	Cuando corro ansible me muestra el siguiente warning
	``` 
	    [DEPRECATION WARNING]: The useof'include'for tasks has been deprecated. Use'import_tasks'forstatic inclusions 
	    or'include_tasks'for dynamic inclusions. This feature will be removed in a future release. Deprecation warnings 
	    can be disabled by setting deprecation_warnings=Falsein ansible.cfg.
	    [DEPRECATION WARNING]: includeis kept for backwards compatibility but usageis discouraged. The module 
	    documentation details page may explain more about this rationale.. This feature will be removed in a future release.
	     Deprecation warnings can be disabled by setting deprecation_warnings=Falsein ansible.cfg.
	    
	```
	
	En este caso cual de las nuevas directivas deber√≠a usar?

* **Edgar Valdez Moises** (0) [201475](https://platzi.com/comentario/201475/) 

	vagrant es lo mismo que docker ?

	* **alesanabriav (Platzi)** [201475] (0)

		Hola Edgar es totalmente diferente vagrant es un manager de maquinas virtuales a diferencia de docker que es un contenedor con el kernel de linux al cual le puedes instalar cualquier sabor de linux y sobre el las apps que necesites. el concepto en general es mas o menos parecido. La diferencia es que uno virtualiza, √≥sea que crea su propio sistema aparte y docker contenedores que usan los recursos de la maquina sobre el cual esta montado y se pueden tener varios a la ves conectados entre si.

	* **Edgar Valdez Moises** [201475] (0)

		Gracias por el retorno.  
		Entonces Ansible tampoco es parecido a docker ?  
		Estoy un poco confundido

	* **Jesus Sandrea** [201475] (1)

		Como yo lo veo, Vagrant simula el entorno de produccion usando Linux y Docker se maneja con contenedores. Por favor corrijan-me si estoy equivocado

	* **Alberto Pedron** [201475] (0)

		Vagrant: es para facilitar la administracion de **maquinas virtuales**  
		Ansible: es para orquestaci√≥n **ejecutar comandos para instalar cosas, mover, copiar etc adentro de una m√°quina**  
		Docker: es un sistema de contenedores ya es un poco mas complejo de explicar una forma sencilla pero erroneo ser√≠a como **maquinas virtuales super livianas**

	* **Edgar Valdez Moises** [201475] (0)

		Excelente respuesta, Gracias  
		Al diferenciar entre contenedor y maquina virtual me qued√≥ bastante m√°s claro

	* **henrytabimagiraldo** [201475] (0)

		con vagrant simulas entornos de producci√≥n usando maquinas virtuales que vendrian siendo ‚Äúigual‚Äù a las instancias que crear en servicio como ec2 de AWS o las de digital ocena. con docker lo que hacer es crear contenedores que se ejecutan sobre la misma maquina pero separando los entornos.  
		En cierta medida comparten la funci√≥n de diferenciar los entornos, asegurandose de no tener el problema de ‚Äúpero en mi computador funciona‚Äù. sin embargo, podr√≠as incluso usar Docker dentro de una maquina virtual montada con vagrant.

	* **henrytabimagiraldo** [201475] (0)

		‚Ä¶de hecho las versiones de docker de mac y windows funcionan sobre maquinas virtuales

	* **Edgar Valdez Moises** [201475] (0)

		Excelente explicaci√≥n @henrytabimagiraldo. Gracias por compartir tus conocimientos. Ahora a probar

## 0730. Creando scripts del rol de platziverse db y mqtt (script de automatizaci√≥n .yml) [8388](https://platzi.com/clases/1151-nodejs/8388-creando-scripts-del-rol-de-platziverse-db-y-mqtt-s/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 52-roles-platziverse-db-mqtt](https://github.com/platzi/platziverse/tree/52-roles-platziverse-db-mqtt)

### Comentarios:

* **Andres Leonardo Arevalo** (3) [246422](https://platzi.com/comentario/246422/) 

	Me apareci√≥ el siguiente error, fue como si la maquina virtual se apagara (supongo), y ejecute: y para solucionarlo ejecute:
	
	vagrant reload  
	vagrant up &  
	vagrant ssh
	
	![Captura de pantalla 2018-01-23 a la\(s\) 5.34.40 p. m..png](https://static.platzi.com/media/user_upload/Captura%20de%20pantalla%202018-01-23%20a%20la%28s%29%205.34.40%20p.%20m.-1448cc46-ebd8-4f26-a42f-5d6fc3578914.jpg)

	* **Diego Alexander Forero Higuera (Platzi)** [246422] (1)

		Por la imagen parece que la maquina virtual no esta recibiendo conexiones ü§î

	* **Andres Leonardo Arevalo** [246422] (1)

		Gracias Gollum23 por responder, lo que hice para solucionar los inconvenienes fue ejecutar los comandos de reload y up

* **eemartinez97** (2) [908317](https://platzi.com/comentario/908317/) 

	Para los que tienen este error:  
	![2.PNG](https://static.platzi.com/media/user_upload/2-a3ebbf9b-6d26-491d-8591-72d05c2a14bb.jpg)
	
	esta es la soluci√≥n, estuve buscando y buscando, al leer la documentaci√≥n descubr√≠ que si usas una versi√≥n de postgresql >= 10, es obligatorio setear esta variable en ‚Äúyes‚Äù
	
	![Capture.PNG](https://static.platzi.com/media/user_upload/Capture-51799337-f777-41fe-9594-3fd0d6b9ae37.jpg)

	* **Katherine Serrano Romero** [908317] (1)

		muchas gracias por el aporte!!!

* **alejagalo** (1) [639561](https://platzi.com/comentario/639561/) 

	alguien sabe como solucionar este error  
	![2019-07-05_21-03.png](https://static.platzi.com/media/user_upload/2019-07-05_21-03-28d32e2a-a141-4297-ac8e-c10f24b84c28.jpg)

	* **Diego Alexander Forero Higuera (Platzi)** [639561] (1)

		El error al parecer es porque no esta correctamente configurada la conexi√≥n a la base de datos.

* **sergioamartinez3990** (1) [334389](https://platzi.com/comentario/334389/) 

	¬ø Por que no usar pm2 ?

	* **Diego Alexander Forero Higuera (Platzi)** [334389] (4)

		Para el curso se ense√±a a hacer todo de una forma manual, pm2 es interesante para el control de los procesos que ejecuta node.

* **juand_silva** (0) [319370](https://platzi.com/comentario/319370/) 

	Pause el v√≠deo en min 18:13 para buscar cual era mi error cuando corr√≠a los scripts y estuve un buen rato buscando internet el porqu√© de mi error, para darme cuenta que la soluci√≥n estaba d√©spues del min 18:13 xD. Pero aprend√≠ bastante de los scripts en Systemd en ansible, es lo √∫nico bueno de los bugs. üòÇ

	* **Juan David G√≥mez G√≥mez** [319370] (1)

		jajajaja a mi me ha pasado varias veces ya

* **henrytabimagiraldo** (0) [236872](https://platzi.com/comentario/236872/) 

	me aparece esto‚Ä¶ alguna idea?
	``` 
	    PLAY [backend-*] ***************************************************************************************************
	    
	    TASK [Install Python 2] ********************************************************************************************
	    fatal: [backend-local]: UNREACHABLE! => {"changed": false, "msg": "Failed to connect to the host via ssh: ssh: connect to host 127.0.0.1 port 2222: Connection refused\r\n", "unreachable": true}
	    	to retry, use: --limit @/home/buho/dev/devtek/platziverse/platziverse-deploy/backend.retry
	    
	    PLAY RECAP *********************************************************************************************************
	    backend-local              : ok=0    changed=0    unreachable=1    failed=0   
	    
	```

	* **Diego Alexander Forero Higuera (Platzi)** [236872] (1)

		No se puede conectar al localhost en el puerto 2222, revisa que tengas las configuraciones de los servicios de manera correcta y los puertos bien, probablemente el servicio que corre en el puerto 2222 se cayo y por esto no responde.

	* **henrytabimagiraldo** [236872] (0)

		me apareci√≥ eso al ejecutar el playbook porque me faltaba hacer
		``` 
		    vagrant up
		    
		```

## 0740. Terminando los scripts faltantes [8389](https://platzi.com/clases/1151-nodejs/8389-terminando-los-scripts-faltantes/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 53-finalizar-scripts-deploy](https://github.com/platzi/platziverse/tree/53-finalizar-scripts-deploy)

### Comentarios:

* **Sci4Tech** (3) [235537](https://platzi.com/comentario/235537/) 

	Hola,
	
	a partir del minuto 7:27 no se ve el monitor con las instrucciones que ejecuta Julian‚Ä¶
	
	Saludos

* **Hernando Mart√≠nez** (1) [392328](https://platzi.com/comentario/392328/) 

	Hola,
	
	nginx me regresa un error 502 Bad Gateway. En el log de nginx me aparece el error:
	``` 
	    connect() failed (111: Connection refused) while connecting to upstream ...  request: "GET / HTTP/1.1", upstream: "http://127.0.0.1:8080/"
	    
	```
	
	espero me puedan ayudar

* **Joel Barr√≥n Hern√°ndez** (0) [289261](https://platzi.com/comentario/289261/) 

	¬øHola alguien sabe por que cuando se utiliza https no funciona el mqtt ni los web sockets?  
	¬øHay que hacer configuraci√≥n adicional?

	* **Diego Alexander Forero Higuera (Platzi)** [289261] (3)

		Tienes que tener instalados los certificados ya que https necesita un certificado ssl para realizar el proceso, en local por lo general todo se prueba sobre http.

## 0750. Creaci√≥n de servidores en DigitalOcean [8390](https://platzi.com/clases/1151-nodejs/8390-creacion-de-servidores-en-digitalocean/)

### Descripci√≥n:


### Comentarios:

* **Jos√© Ricardo Romo Guti√©rrez** (1) [353640](https://platzi.com/comentario/353640/) 

	En que otro proveedor puedo desplegar la aplicacion, ya que no cuento con tarjeta de credito para usar digital ocean

	* **Diego Alexander Forero Higuera (Platzi)** [353640] (2)

		Puedes crear una maquina virtual en local usando virtualbox, instalas ubuntu server y puedes simular todo el proceso.

	* **Misael Zurdo** [353640] (1)

		Yo pude generar una cuenta en google cloud utilizando una tarjeta prepaga ahi te dan de manera gratis una maquina de 600 de ram y un procesador para test debe ser suficiente.

	* **Jos√© Ricardo Romo Guti√©rrez** [353640] (1)

		ya no dejan crear cuentas con tarjetas prepagadas. üòï üò¶

# Desplegando nuestra aplicaci√≥n a producci√≥n				 [1477]

## 0760. Ejecutando los Scripts de Despliegue [8391](https://platzi.com/clases/1151-nodejs/8391-ejecutando-los-scripts-de-despliegue/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 54-deploy-a-produccion](https://github.com/platzi/platziverse/tree/54-deploy-a-produccion)

### Comentarios:

* **Joaquin Araujo** (4) [239584](https://platzi.com/comentario/239584/) 

	Un poco duro es curso pero fue muy bueno, me gusto mucho, ahora a poner en practica lo aprendido üòÉ

* **aquicreamos** (1) [595182](https://platzi.com/comentario/595182/) 

	no es mejor montar todo con Docker ?

	* **Diego Alexander Forero Higuera (Platzi)** [595182] (1)

		Docker es una muy buena soluci√≥n pero no es una soluci√≥n que se deba usar en todo y para todo, el profesor explica aqu√≠ como hacer el despliegue en un servidor vps que es lo que se hace en la mayor√≠a de los casos, cuando se usa docker es mejor usar sistemas como kubernetes o docker swarm para orquestar varios contenedores de manera sencilla y administrar los deploys de manera sencilla. Se puede usar docker-compose para esto tambi√©n pero solo te permite correr un contenedor por cada servicio y estos contenedores tienen capacidades limitadas y no aprovechan el 100% de la maquina.

* **Raul Novelo** (1) [352164](https://platzi.com/comentario/352164/) 

	Una alternativa a vagrant puede ser docker?

	* **Diego Alexander Forero Higuera (Platzi)** [352164] (2)

		Vagrant monta como tal una maquina virtual es muy usado para simular los entornos de producci√≥n al momento del despliegue, por otro lado tenemos a docker que es un sistema de contenedores que permiten tener un sistema por lo general linux con lo m√≠nimo necesario para trabajar dependiendo de lo que necesites. Si bien los dos se basan en la virtualizaci√≥n debes definir que es lo que necesitas para usar uno u otro.

* **henrytabimagiraldo** (1) [244500](https://platzi.com/comentario/244500/) 

	En caso que despu√©s de ejecutar el playbook se realicen cambios en el c√≥digo, simplemente se puede volver a ejecutar ansible-playbook o hay que hacer algo m√°s?

* **Raul Novelo** (1) [39203](https://platzi.com/comentario/352164/) 
Una alternativa a vagrant puede ser docker?

	* **Diego Alexander Forero Higuera (Platzi)** [39203] (2)

		Vagrant monta como tal una maquina virtual es muy usado para simular los entornos de producci√≥n al momento del despliegue, por otro lado tenemos a docker que es un sistema de contenedores que permiten tener un sistema por lo general linux con lo m√≠nimo necesario para trabajar dependiendo de lo que necesites. Si bien los dos se basan en la virtualizaci√≥n debes definir que es lo que necesitas para usar uno u otro.

## 0770. Utilizando Aplicaci√≥n en Producci√≥n y cierre del curso [8392](https://platzi.com/clases/1151-nodejs/8392-utilizando-aplicacion-en-produccion-y-cierre-del-c/)

### Descripci√≥n:


### Links:

* [GitHub - platzi/platziverse at 55-ejemplo-aplicacion-produccion](https://github.com/platzi/platziverse/tree/55-ejemplo-aplicacion-produccion)

### Comentarios:

* **Andres Leonardo Arevalo** (6) [246557](https://platzi.com/comentario/246557/) 

	Incre√≠ble este curso, que nivel de profesionalismo tan alto.

* **Joaquin Araujo** (3) [239591](https://platzi.com/comentario/239591/) 

	Mi proyecto personal sera un blog para compartir art√≠culos t√©cnicos de JavaScript üòÉ
	
	Si lees este comentario quiz√°s ya este disponible el [Blog](https://joaquinaraujojs.co.ve/blog/).

* **Juan David G√≥mez G√≥mez** (2) [399922](https://platzi.com/comentario/399922/) 

	muy buenas herramientas, el curso fue mas de lo que esperaba

* **Jos√© Ricardo Romo Guti√©rrez** (2) [353654](https://platzi.com/comentario/353654/) 

	Este curso me supera, en mi nivel actual de NodeJS, me soprende bastante todo lo que se puede hacer, aqu√≠ se necesitan una cantidad de conocimientos sobre base de datos, javascript, devOps, voy a probar modificarla porque es una aplicaci√≥n muy potente, todo lo que se puede hacer. Gracias por todo Julian, sos un grande.

* **Pedro Rafael Jim√©nez Jij√≥n** (2) [353433](https://platzi.com/comentario/353433/) 

	Incre√≠ble el curso gracias al profesor Juli√°n Duque por todo el conocimiento

* **saidmlx** (2) [350393](https://platzi.com/comentario/350393/) 

	Un curso bastante completo sufr√≠ con cada uno de los conceptos nuevos, pero ahora es cuesti√≥n de practica

* **Tony Garcia** (2) [342533](https://platzi.com/comentario/342533/) 

	excelente curso!

* **zucchinidev** (2) [240544](https://platzi.com/comentario/240544/) 

	Excelente curso!! Estoy muy agradecido por el esfuerzo realizado al introducir conceptos de nivel alto-avanzados y no quedarse solamente en algo superficial. Un placer realizar este curso!!

* **Jos√© Rodr√≠guez** (2) [205726](https://platzi.com/comentario/205726/) 

	No quiero que se termine el curso :c

* **Andres Leonardo Arevalo** (1) [1054359](https://platzi.com/comentario/1054359/) 

	Al momento de desplegarlo en digitalOcean, tuve que habilitar el puerto 1883 del servidor MQTT en la terminal de la siguiente manera
	``` 
	    sudo ufw allow 1883
	    
	```

* **Andres Leonardo Arevalo** (1) [1053764](https://platzi.com/comentario/1053764/) 

	Me volv√≠ a ver el curso dos a√±os despu√©s y que pasada, ojal√° Julian haga un nuevo curso en 2020.

* **wfranco007** (1) [817567](https://platzi.com/comentario/817567/) 
Una nota de curso... muchos tips para aplicar. Gracias Julian, muy buen tutor y experto.

* **Iv√°n Felipe Velastegu√≠ Jaramillo** (1) [733282](https://platzi.com/comentario/733282/) 

	No me quiero ir Sr. Duque. Excelente curso! Una locura todo lo que se aprendi√≥ y practic√≥. De largo el mejor curso que he tomado hasta ahora. Fue larga la ruta de aprendizaje desde terminal y linea de comandos hasta esto, pero vali√≥ totalmente la pena!!

* **Luis Paredes** (1) [619119](https://platzi.com/comentario/619119/) 

	Grande !

* **Fernando Azuaje** (1) [595754](https://platzi.com/comentario/595754/) 

	Muchas gracias profesor, esto fue increible!

* **Juan Camilo Angel Fandi√±o** (1) [537460](https://platzi.com/comentario/537460/) 

	Sensei!

* **Eithel Josue Meza Prada** (1) [436468](https://platzi.com/comentario/436468/) 
Si i

* **Jahdiel Vargas** (1) [407352](https://platzi.com/comentario/407352/) 

	Empezare a crear mi proyecto en Node.js, ahora voy por React

* **Jos√© Ricardo Romo Guti√©rrez** (1) [359022](https://platzi.com/comentario/359022/) 

	Podrian ayudarme con este error, ya pude desplegar la aplicacion, pero me sale este error en el navegador
	``` 
	    Failed to load resource:net::ERR_CONNECTION_REFUSED
	    
	```
	
	la pagina es <http://robotica.ricardoromo.co/>  
	y mi repo es <https://github.com/MrRomo/platziverse>
	
	muchas gracias, ya solo me faltaria esto para terminar el curso y empezar a modificarla

	* **Diego Alexander Forero Higuera (Platzi)** [359022] (2)

		Creo que el problema es que tienes configuradas rutas como localhost y el puerto 8080, revisa la configuraci√≥n de las rutas.

	* **Jos√© Ricardo Romo Guti√©rrez** [359022] (1)

		-si aqui estoy viendo en el config.js de platziverse-web,
		``` 
		    'use strict'
		    
		    module.exports = {
		      endpoint: process.env.API_ENDPOINT || 'http://localhost:3000',
		      serverHost: process.env.SERVER_HOST || 'http://localhost:8080',
		      mqttHost: process.env.MQTT_HOST || 'mqtt://localhost',
		    
		```
		
		podria ser eso?. si es asi, tengo que apuntar a las rutas definidas para los distintos servidores?

	* **Diego Alexander Forero Higuera (Platzi)** [359022] (2)

		Tienes que definir en el archivo .env los diferentes endpoints para que se conecte, el problema es ese que no encuentra el servidor.

* **Luis Antonio Schmiel Paredes** (1) [299835](https://platzi.com/comentario/299835/) 

	Todo un reto fue este curso. muy bueno. ahora a por React JS

* **Eddy Nelson P√©rez Decena** (1) [259342](https://platzi.com/comentario/259342/) 

	Muy buen curso, totalmente ser un desarrollador node.js es mas de lo que yo pensaba

* **David Pineda** (1) [210859](https://platzi.com/comentario/210859/) 

	Como siempre Julian que gran Maestro, Excelente Curso, Muchas Gracias.

* **Jos√© Ricardo Romo Guti√©rrez** (1) [39831](https://platzi.com/comentario/359022/) 
Podrian ayudarme con este error, ya pude desplegar la aplicacion, pero me sale este error en el navegador Failed to load resource: ...

	* **Diego Alexander Forero Higuera (Platzi)** [39831] (2)

		Creo que el problema es que tienes configuradas rutas como localhost y el puerto 8080, revisa la configuraci√≥n de las rutas.

* **juand_silva** (0) [319713](https://platzi.com/comentario/319713/) 

	Este curso me puso a prueba de todos los conocimientos de NODE. Incre√≠ble las cosas que se pueden hacer con NODE!

* **Steven Anaya** (0) [269243](https://platzi.com/comentario/269243/) 

	Wow, sinceramente es un curso asombroso, aprend√≠ un mont√≥n. Gracias Julian, eres un grande. Pronto estar√© comentando mi proyecto de marca personal que realizare full JS frontend-backend.

* **Eddy Nelson P√©rez Decena** (0) [259344](https://platzi.com/comentario/259344/) 

	totalmente, ahora hay que poner en practica

* **Nicol√°s Mej√≠a Correa** (0) [194663](https://platzi.com/comentario/194663/) 

	Excelente curso.

# Bonus: Utilizando platziverse-agent en BeagleBone Black y Raspberry PI [1478]

## 0780. Implementaci√≥n platziverse-agent con Johnny-Five [8394](https://platzi.com/clases/1151-nodejs/8394-implementacion-platziverse-agent-con-johnny-five/)

### Descripci√≥n:


### Comentarios:

* **Wilson Fabian P√©rez Sucuzha√±ay** (4) [191751](https://platzi.com/comentario/191751/) 

	este v√≠deo me sale como borrado

	* **Diego Alexander Forero Higuera (Platzi)** [191751] (1)

		Gracias por el reporte, revisamos y lo solucionamos.

	* **Guillermo Lopez** [191751] (2)

		Aun no funciona, esta resuelto o lo estan resolviendo?

	* **AyKaren** [191751] (0)

		Ya est√° disponible el v√≠deo, muchas gracias por reportarnos üòâ

* **Eddy Nelson P√©rez Decena** (3) [210979](https://platzi.com/comentario/210979/) 

	esta parte del curso no esta en github

	* **juand_silva** [210979] (0)

		<https://github.com/julianduque/beaglebone-io>

* **Lucas  Hick** (2) [273987](https://platzi.com/comentario/273987/) 

	Much√≠simas gracias Julian! Estoy muy contento con este curso, soy arquitecto, no ‚Äòfrontend‚Äô ni ‚Äòbackend‚Äô sino de edificios, aunque √∫ltimamente cada vez mas cerca de la tecnolog√≠a gracias a platzi! Realmente me apasiona todo lo que tenga que ver con IoT y eh encontrado aqu√≠ un nivel que supero mis expectativas. Espero poder devolver todo el valor que brindan de alg√∫n modo, es mi prop√≥sito trabajar en ello! Gracias, de verdad!

* **DavidMG01** (1) [1070748](https://platzi.com/comentario/1070748/) 

	Muchas gracias Julian!! Literal me volaste la cabeza con este curso!! Mucho √©xito en todos los proyectos que realices!!

* **leonardcad** (1) [948461](https://platzi.com/comentario/948461/) 

	Estuvo increible el curso,muchas gracias Julian, ahora solo queda practicar y tomar cada uno de los conceptos.

* **Kerohuixco** (1) [674986](https://platzi.com/comentario/674986/) 

	Increible curso‚Ä¶

* **danielpinaudl** (1) [545553](https://platzi.com/comentario/545553/) 

	hola, consulta el harware que es rasperry o que modelo es, y con rasperry se puede colocar un sendor de humedad o cualquier sensor y enviarlo a un servidor con node js para verlo desde internet?. para esto necesitaria un rasperry con tarjeta wifi para que envie los datos por internet? y donde podria comprar algo asi, si me pueden responder porfavor

	* **wfranco007** [545553] (1)
Si se puede... con raspberry pin o arduino (existen m√°s tarjetas)

* **Juan David G√≥mez G√≥mez** (1) [399927](https://platzi.com/comentario/399927/) 

	Nada como ver todo funcionando con elementos de la vida real, excelente todo

* **Tony Garcia** (1) [342541](https://platzi.com/comentario/342541/) 

	Excelente pana! muy bueno

* **Andres Leonardo Arevalo** (1) [246626](https://platzi.com/comentario/246626/) 

	Definitivamente excelente curso

* **Andrs** (0) [219072](https://platzi.com/comentario/219072/) 

	¬øDonde puedo encontrar los instructivos para instalar node.js en dispositivos Arm?

	* **Diego Alexander Forero Higuera (Platzi)** [219072] (1)

		Dependiendo de tu versi√≥n de ARM lo descargas en la pagina oficial te dejo un ejemplo con la versi√≥n ARM6
		``` 
		    cd ~
		    wget https://nodejs.org/dist/v6.2.1/node-v6.2.1-linux-armv6l.tar.gz
		    tar -xzf node-v6.2.1-linux-armv6l.tar.gz
		    node-v6.2.1-linux-armv6l/bin/node-v
		    
		```
		
		Simplemente cambias <https://nodejs.org/dist/v6.2.1/node-v6.2.1-linux-armv6l.tar.gz> por la url que esta en la secci√≥n de descargas de node <https://nodejs.org/en/download/>

	* **Andrs** [219072] (0)

		GOLLUM23 tengo un arduino MEGA, no hay instructivos para hacerlo?, no tengo el contexto suficiente para instalarlo, lo descargo y como lo instalo?, debo instalar el firmata en arduino y despues instalar node?, la verdad hay muy poca documentaci√≥n en internet, o como puedo buscar instructivos sobre esto, he tenido muchos problemas con este curso desarrollando desde windows pero ya todo solucionado, solo me falta este paso para lograr lo que necesito‚Ä¶

	* **marcelobaez** [219072] (0)

		No podes instalar NodeJS directamente en un Arduino, ya que no tenes el entorno necesario para que NodeJS pueda funcionar. Si podes instalar en una raspberry para poder controlarlo via puerto serial mediante alguna libreria como Johnny Five

	* **Misael Zurdo** [219072] (1)

		Si quer√©s probar utilizando un arduino, pones instalar todo en tu pc y enchufar el arduino. el sistema se ejecuta en tu pc donde si puede correr nodejs pero se conecta al arduino para acceder a los sensores.

* **Guillermo Llancaqueo Valenzuela** (0) [211365](https://platzi.com/comentario/211365/) 

	Grande don Juli√°n Duque

* **Alejandro Vel√°squez Molina** (0) [205171](https://platzi.com/comentario/205171/) 

	Alguien ha probado con Arduino?

	* **Daniel Ramirez** [205171] (1)

		Lograste utilizar en arduino?

