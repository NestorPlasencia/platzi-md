[Curso de API REST 1638](https://platzi.com/cursos/api-rest)

# Comprender los objetivos y pre-requisitos del curso [4327]

## 0010. Introducci√≥n y bienvenida [21612](https://platzi.com/clases/1638-api-rest/21612-introduccion-y-bienvenida/)

### Descripci√≥n:


¬°Bienvenido al curso de API REST! En este curso tu profesor Mauro Chojrin, desarrollador desde 1997 y l√≠der de equipos, te ense√±ar√° c√≥mo conectar tus aplicaciones con las de otras personas.

Durante el curso utilizaremos el lenguaje PHP, pero no te preocupes pues todo lo que aprendas puede ser aplicado a cualquier lenguaje que utilices.

### Comentarios:

* **Jhon Alexander Romero Gonzaga** (3) [902016](https://platzi.com/comentario/902016/) 

	Vengo a este curso ya que me tope con muchos problemas, sin bases no hay avanze üòÉ

* **Miguel Angel Marquez Munoz** (3) [84595](https://platzi.com/comentario/1054117/) 
En pocas palabras ¬øCu√°l es la diferencia entre REST y REST FULL

	* **Emmanuel Garc√≠a** [84595] (2)

		REST es una arquitectura para aplicaciones en redes (Representational State Transfer). RESTful por otro lado, son programas (a modo de web service o API), basados en REST. Muchas veces se usan ambos terminos como sinonimos. (comentario de otro usuario)

* **CristianCamiloMora** (3) [82981](https://platzi.com/comentario/1016979/) 
Que tan bueno es Aprender Api Rest para aplicarlo a un ambiente laboral ??

	* **Gabriel De Andrade (Platzi)** [82981] (2)

		Es bastante importante, hoy la mayor√≠a de las APIs en internet utilizan REST, aprender a estructurarlas, crearlas y consumirlas es sumamente importante üòÑ

* **Diego Andres Imbus Guzman** (2) [688252](https://platzi.com/comentario/688252/) 

	Un profesor re bueno, detesto php pero el profesor es de los mejores

* **csrarias** (2) [673015](https://platzi.com/comentario/673015/) 

	con entusiasmo para progresar en mis conocimientos

* **ehnbytes** (1) [985971](https://platzi.com/comentario/985971/) 

	Iniciando el curso de API Rest!!

* **jmacalupur** (1) [983179](https://platzi.com/comentario/983179/) 

	Al fin aprender√© sobre Api Rest. Vamos por ello!

* **Carlos.V** (1) [939460](https://platzi.com/comentario/939460/) 

	Veamos! üòÉ

* **Rafael Carrillo** (1) [922867](https://platzi.com/comentario/922867/) 

	genial esto es lo que necesito para darle m√°s performence a mis aplicaciones en PHP

* **FizIrvin** (1) [806867](https://platzi.com/comentario/806867/) 

	curso fundamental!

* **luis_vazquez** (1) [787691](https://platzi.com/comentario/787691/) 

	listo üòâ

* **Gtiseira** (1) [776635](https://platzi.com/comentario/776635/) 

	Con ganas de poder sacarle toda la partida a este curso. Estoy casi finalizando la carrera de Fundamentos de programacion, asi que vamos con todo!
	
	Saludos Mauro!

* **EdU_ClaSsic** (1) [776550](https://platzi.com/comentario/776550/) 

	vamos con todo!

* **Sergio Alejandro Trejo Cuxim** (1) [739466](https://platzi.com/comentario/739466/) 

	Excelente curso para quienes inician con REST, en base a mi experiencia emplear PHP servir√° de mucho, ya que se encuentra pr√°cticamente en cualquier plan de Hosting.

* **EDGAR ROMERO BULA** (1) [715963](https://platzi.com/comentario/715963/) 

	emocionado con empezar este curso , espero llenar mis expectativas

* **Christian David S√°nchez** (1) [698851](https://platzi.com/comentario/698851/) 

	Emocionado con este curso. El profe Mauro es muy buen catedr√°tico.  
	A seguir aprendiendo.

* **Andres Roberto Coello Goyes** (1) [686222](https://platzi.com/comentario/686222/) 

	<https://platzi.com/comentario/682505/>
	
	ayuda con esto profe‚Ä¶

* **Juan Antonio Gonz√°lez** (1) [685019](https://platzi.com/comentario/685019/) 
Qu√© cantidad de Argentin@s hay en los cursos... Me emociona mucho!... Todo los cursos tienen excelente profesores y la mezcla de culturas hace que sean cursos excelentes. Felicitaciones a todos los profesores.

* **Sebastian Cardoso Castillo** (1) [678411](https://platzi.com/comentario/678411/) 
Estaba esperando este curso.

* **Christian David S√°nchez** (1) [676398](https://platzi.com/comentario/676398/) 

	Uff este curso esta fenomenal. Estoy llevando otro curso con el prof. Mauro y son super nice sus catedras.

* **Angel Ponce** (1) [675827](https://platzi.com/comentario/675827/) 

	Sumamente emocionado por empezar este curso

* **juand_silva** (1) [675130](https://platzi.com/comentario/675130/) 

	Comencemos!

* **ulises garcia garcha** (1) [674397](https://platzi.com/comentario/674397/) 

	Enhorabuena

* **Tomipe** (1) [674313](https://platzi.com/comentario/674313/) 

	Excelente!!!

* **Fabio Andres Arango Grajales** (1) [674218](https://platzi.com/comentario/674218/) 

	Vamos a sacarle le jugo a este curso

* **Syddar Bujato** (1) [673388](https://platzi.com/comentario/673388/) 

	Excelente

* **Walter Jesus Santiago Gonzalez** (1) [673358](https://platzi.com/comentario/673358/) 

	Buen d√≠a,
	
	Comencemos!

* **garbull** (1) [673177](https://platzi.com/comentario/673177/) 

	estaba esperando este curso desde hace tiempo

* **nicolas-morillo** (1) [673094](https://platzi.com/comentario/673094/) 

	Esperaba con ansias este curso. Listo para seguir aprendiendo

* **valentiina_27** (0) [1051233](https://platzi.com/comentario/1051233/) 

	se va a incluir js???

	* **Gabriel De Andrade (Platzi)** [1051233] (1)

		En este curso se utilizar√° PHP, pero lo que aprendas ac√° te servir√° en cualquier lenguaje y si ya sabes programar no deber√≠as tener problemas üòÑ

	* **valentiina_27** [1051233] (1)

		Ohh que buena sugerencia a darle con toda gracias Gabriel üòÉ

## 0020. Qu√© es una API y para qu√© sirve [21613](https://platzi.com/clases/1638-api-rest/21613-que-es-una-api-y-para-que-sirve/)

### Descripci√≥n:


En esta clase el profesor Mauro Chojrin nos explica qu√© es una API y para qu√© sirve.

API son las siglas de Aplication Programming Interface, en espa√±ol Interfaz de Programaci√≥n de Aplicaciones. Se trata de un conjunto de reglas que va a definir c√≥mo se comunican dos aplicaciones entre s√≠.

### Comentarios:

* **Enrique Felix Garcia Stave** (5) [1008223](https://platzi.com/comentario/1008223/) 

	 **Apuntes:**  
	API: Application Programming Interface (En espa√±ol, interfaz de programaci√≥n de aplicaciones), se trata de reglas que definen como interact√∫an dos aplicaciones y es un concepto que existe hace tiempo en el mundo de la programaci√≥n.

* **platzerito02112019 platzerito02112019** (5) [676127](https://platzi.com/comentario/676127/) 

	Buenas a mi no me funciono el comando del pdf me salio un error:![Screenshot_31.png](https://static.platzi.com/media/user_upload/Screenshot_31-1b6688e5-ca15-4554-8d47-09652de866c3.jpg)  
	pero me fuy a la pagina üò¶<https://chocolatey.org/install>) y copie este codigo:
	``` 
	    @"%SystemRoot%\System32\WindowsPowerShell\v1.0\powershell.exe" -NoProfile -InputFormat None -ExecutionPolicy Bypass -Command "iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))" && SET "PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin" 
	    
	```
	
	y todo bien ‚Ä¶ saludos

	* **ThAlan** [676127] (1)

		Copie el comando que pusiste y todo funciono bien, gracias üòÉ.

	* **Emerson Cede√±o Salazar** [676127] (2)

		me pas√≥ igual, proced√≠ seg√∫n recomendado y todo bien! üëå, compar√© el comando del sitio vs el del pdf proporcionado, y lo que pasa es que en el PDF hay un par de espacios en blanco entre par√°metros que est√°n haciendo falta por lo cual la ejecuci√≥n del comando falla.

* **alanfermin** (3) [926569](https://platzi.com/comentario/926569/) 
API: Application Programming Interface o Programaci√≥n de Interface de Aplicacionea

* **asanchez2091** (3) [862420](https://platzi.com/comentario/862420/) 
Me sent√≠ como que hahaha php y no python xD pero bueno hay que aprender de todo un poco

	* **F√©lix Andersson** [862420] (7)

		Y que hay de malo con que sea en php

* **Hugo Rodriguez** (3) [673274](https://platzi.com/comentario/673274/) 

	Hola comunidad, a mi no me funcion√≥ la instalaci√≥n desde CMD me dec√≠a que hab√≠a un error en el caracter 3, sin embargo, en la p√°gina de Chocolatey viene otro comando para ejecutar en Windows PowerShell (igual como admin) y con ese no tuve problemas.
	
	<https://chocolatey.org/install>  
	//  
	Set-ExecutionPolicy Bypass -Scope Process -Force; iex ((New-Object System.Net.WebClient).DownloadString(‚Äò<https://chocolatey.org/install.ps1>‚Äô))  
	//
	
	El resto de la gu√≠a me funcion√≥ perfectamente.
	
	SO. windows 10

	* **Cristhian Cordova** [673274] (1)

		Muchas gracias por el aporte.

	* **jarios017** [673274] (1)

		Se presento el mismo error inicial. Con la soluci√≥n planteado funciono correctamente.

	* **joserosas** [673274] (1)

		Muchas gracias por el aporte, me sirvi√≥ de mucho!!!

	* **Joan Federico Marin Ruiz** [673274] (1)

		no me funciona para windows 7.

	* **Joan Federico Marin Ruiz** [673274] (1)

		‚ÄúSet-ExecutionPolicy‚Äù no se reconoce como un comando interno o externo,  
		programa o archivo por lotes ejecutable.  
		me sale este error.

* **ehnbytes** (2) [988810](https://platzi.com/comentario/988810/) 

	API son las siglas de Application Programming Interface.

* **Jonathan Uriel Jim√©nez Soveranes** (2) [852364](https://platzi.com/comentario/852364/) 

	Para instalar (deben ejecutar powershell como administrador)  
	<https://chocolatey.org/install>

* **JulioCardenasR** (2) [695783](https://platzi.com/comentario/695783/) 

	En ubuntu 18.04LTS  
	curl ok  
	jq ok  
	atom editor ok  
	chrome browser ok

* **Joan Federico Marin Ruiz** (2) [75994](https://platzi.com/comentario/879583/) 
buenas tardes, me podrian colaborar. ‚ÄúSet-ExecutionPolicy‚Äù no se reconoce como un comando interno o externo, programa o archivo por lotes...

	* **Jhon Alexander Romero Gonzaga** [75994] (1)

		El Set-ExecutionPolicy esta incorrecto es -ExecutionPolicy
		``` 
		    @"%SystemRoot%\System32\WindowsPowerShell\v1.0\powershell.exe" -NoProfile -InputFormat None -ExecutionPolicy Bypass -Command "iex ((New-Object System.Net.WebClient).DownloadString('https://chocolatey.org/install.ps1'))" && SET "PATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin" 
		    
		```

* **asanchez2091** (2) [74997](https://platzi.com/comentario/862422/) 
Platzi tiene curso de api resto pero con casos de uso dirigidos a Python?

	* **Diego Alexander Forero Higuera (Platzi)** [74997] (3)

		En este momento no hay un curso dedicado solo a la creaci√≥n de api rest con python, pero tomando este curso aprendes los conceptos de un API que luego puedes aplicar f√°cilmente a python, para python existe django y django rest framework que te ayuda a crear un api realmente f√°cil.

* **Blas Rodriguez934** (1) [1116185](https://platzi.com/comentario/1116185/) 

	perfecto

* **Roberto Guerra Jimenez** (1) [1102432](https://platzi.com/comentario/1102432/) 

	Una API (Application Programing Interface) se utiliza para definir las reglas con las cuales dos aplicaciones interactuaran entre sin definiendo que tipo de respuestas se enviaran y se recibir√°n.

* **Iv√°n Acosta** (1) [1086843](https://platzi.com/comentario/1086843/) 

	Excelente.!

* **Didier20** (1) [1004442](https://platzi.com/comentario/1004442/) 

	Cool!

* **ehuacachi** (1) [992879](https://platzi.com/comentario/992879/) 

	llegu√© a este curso interesante, por el curso de Java.  
	A continuar‚Ä¶!!

* **Carlos.V** (1) [939462](https://platzi.com/comentario/939462/) 

	üòÆ Genial!

* **luis_vazquez** (1) [787725](https://platzi.com/comentario/787725/) 

	Entendido

* **Ricardo Lugo Recillas** (1) [766097](https://platzi.com/comentario/766097/) 

	Api = Aplication, Programming Interface , interfas de programacion de aplicaciones.

* **kikega** (1) [728134](https://platzi.com/comentario/728134/) 

	En Fedora dnf install curl jq  
	Perfecto!

* **Christian David S√°nchez** (1) [698874](https://platzi.com/comentario/698874/) 

	Que interesante!

* **Pablo Ochoa** (1) [674802](https://platzi.com/comentario/674802/) 

	Muy interesante

* **Syddar Bujato** (1) [674114](https://platzi.com/comentario/674114/) 

	Excelente

* **Edgar Mogollon** (1) [673674](https://platzi.com/comentario/673674/) 

	A por ello!

* **Walter Jesus Santiago Gonzalez** (1) [673380](https://platzi.com/comentario/673380/) 

	Buen d√≠a,
	
	<https://chocolatey.org/install>
	
	@"%SystemRoot%\System32\WindowsPowerShell\v1.0\powershell.exe" -NoProfile -InputFormat None -ExecutionPolicy Bypass -Command ‚Äúiex ((New-Object System.Net.WebClient).DownloadString(‚Äò<https://chocolatey.org/install.ps1>‚Äô))‚Äù && SET ‚ÄúPATH=%PATH%;%ALLUSERSPROFILE%\chocolatey\bin‚Äù

	* **David Eliezer Orantes Gonz√°lez** [673380] (1)
Hola, cu√°l es tu problema?

* **freddymm** (1) [82885](https://platzi.com/comentario/1014678/) 
Disculpen que es NAO.SH? si es que se escribe asi, soy nuevo en esto y nunca habia escuchado hablar de eso

	* **Leonardo Hern√°ndez** [82885] (1)

		Hola, [NAO.SH](http://NAO.SH) se refiere a un script de configuraci√≥n para el servidor en Linux. Para comprender el paso que di√≥ aqu√≠ el profesor, √©l mismo recomienda tomar otro curso de Platzi que se llama Deploy con Now.hs.

* **FizIrvin** (1) [71939](https://platzi.com/comentario/806877/) 
¬øcu√°l es el int√©rprete de PHP?

	* **Gabriel De Andrade (Platzi)** [71939] (1)

		Cuando instalas PHP en tu dispositivo se instala el int√©rprete de PHP. ac√° tienes una gu√≠a de la documentaci√≥n oficial de PHP para instalarlo en diferentes sistemas operativos.  
		
		
		* [Debian/Ubuntu](https://www.php.net/manual/en/install.unix.debian.php)
		
		* [macOS](https://www.php.net/manual/en/install.unix.debian.php)
		
		* [Windows](https://www.php.net/manual/en/install.windows.php)  
		  
		Si tienes alg√∫n sistema que no aparezca all√≠ no dudes en responder en esta conversaci√≥n y estar√© pendiente üòÑ
		
		
		

* **ju2ank** (1) [64335](https://platzi.com/comentario/674317/) 
No he podido abrir el presente v√≠deo. Aparece una im√°gen de un documento y un mensaje ‚ÄúSe ha restablecido la conexi√≥n‚Äù.

	* **Santiago Bernal** [64335] (1)

		Puede ser un tema del navegador, si est√°s usando Chrome, prueba con el modo inc√≥gnito o con otro navegador.

# Conocer los conceptos principales de REST [4326]

## 0030. Qu√© es y c√≥mo funciona el protocolo HTTP [21614](https://platzi.com/clases/1638-api-rest/21614-que-es-y-como-funciona-el-protocolo-http/)

### Descripci√≥n:


HTTP son las siglas de Hypertext Transfer Protocol o protocolo de transferencia de hipertexto, es el conjunto de reglas en las que se van a comunicar dos entidades, en este caso dos computadoras.

As√≠ como nosotros nos comunicamos en espa√±ol gracias a poder mover las cuerdas vocales, producir y escuchar sonidos, las computadoras se pueden comunicar a trav√©s de HTTP gracias al modelo de TCP/IP.

### Links:

* [protocolo http](http://neo.lcc.uma.es/evirtual/cdd/tutorial/aplicacion/http.html)

* [IBM Knowledge Center](https://www.ibm.com/support/knowledgecenter/es/ssw_aix_72/com.ibm.aix.networkcomm/tcpip_protocols.htm)

* [https://www.digival.es/blog/que-son-las-dns-y-para-que-sirven/](https://www.digival.es/blog/que-son-las-dns-y-para-que-sirven/)

### Comentarios:

* **alvearsm** (13) [675702](https://platzi.com/comentario/675702/) 

	Minuto 5:28  
	**El archivo /dev/null** ( en sistemas operativos tipo Unix)
	
	/dev/null es un archivo especial que recibe la informaci√≤n que se redirige hacia el , pero no la almacena.  
	solo la muestra en terminal y luego la borra o descarta, por eso es llamado Cubo Basura, agujero negro, pozo sin fondo.
	
	![](https://www.google.com.co/url?sa=i&source=images&cd=&ved=2ahUKEwjInuaf0unjAhWEjFkKHeuyCC4QjRx6BAgBEAU&url=https%3A%2F%2Fwww.hackplayers.com%2F2016%2F04%2Fequivalente-devnull-en-windows.html&psig=AOvVaw0slSZmLQWykjeKmtnyIwcW&ust=1565022731436251)

* **Gerardo Nava Pereda** (10) [679459](https://platzi.com/comentario/679459/) 

	## Petici√≥n HTTP en Terminal
	``` 
	    curl https://platzi.com
	    
	```
	
	## S√≥lo Encabezados
	``` 
	    curl https://platzi.com -v 
	    
	```
	
	## Redirecci√≥n de Salida
	``` 
	    curl https://platzi.com -v > /dev/null
	    
	```

	* **Christian David S√°nchez** [679459] (2)

		GRACIAS POR EL APORTE!

	* **carlossanchez27** [679459] (2)

		Gracias!, Me ayud√≥ bastante.

* **freddymm** (4) [1014768](https://platzi.com/comentario/1014768/) 

	MIN 5:26  
	el profesor envia la info que arroja el comando a un archivo que acepta la informacion pero no la guarda por eso lo llaman agujero negro pero si estas usando windows puedes sustituir el **-[ /dev/null ]-** por **nul** que es la equivalencia en los sistemas operativos de la ventanita.  
	.  
	el comando quedaria asi: **curl -v<https://platzi.com> > nul**

* **Ricardo Lugo Recillas** (4) [766146](https://platzi.com/comentario/766146/) 

	Api = Aplication, Programming Interface , interfas de programacion de aplicaciones.
	
	que es http = protocolo de comunicacio que por sus siglas en ingles Hypertext Transfer Protocol O PROTOCOLO DE TRANFERENCIA DE HIPER TEXTO
	
	PETICIONES EN TERMINAL  
	curl <https://platzi.com>  
	se recibe todo el html del sitio
	
	Solo encabezados  
	curl -v <https://platzi.com>  
	verificamos los encabezados que se intercambian
	
	Redireccion de salida  
	curl -v <https://platzi.com> /dev/null
	
	los que inicias con el signo mayor son los que se envian los que inicia con menor son los que regresa

* **FizIrvin** (3) [806882](https://platzi.com/comentario/806882/) 

	HTTP es ah√≠ donde inicia todo.

* **Jose Daniel Barr√≠a Reyes** (3) [674005](https://platzi.com/comentario/674005/) 

	HTTP (Hypertext Transfer Protocol) : protocolo de comunicacion entre aplicaciones. basado en el intercambio de texto
	
	Protocolo: conjunto de reglas en las que se van a comunicar dos entidades, en este caso dos computadoras
	
	El modelo TCP/IP nos permite esta comunicacion entre computadoras
	
	Como funciona el protocolo:  
	1.El cliente envia una peticion,se transmite por internet  
	2.El servidor recibe la peticion y genera una respuesta, la envia  
	3.El cliente recibe la respuesta (y si estamos en el navegador interpreta lo recibido )
	
	Se utilizo el comando curl :
	``` 
	    curl  https://platzi.com
	    
	```
	
	y recibimos todo el html del sitio, luego usamos el comando -v y la redireccion
	``` 
	    -v  ver los encabezados
	    utilizamos redireccion (>) para no observar todo el html
	    
	```

	* **Christian David S√°nchez** [674005] (1)

		Buen resumen alero! gracias

* **Royer Guerrero Pinilla** (2) [1108367](https://platzi.com/comentario/1108367/) 

	HTTP no son mas que unas sencillas reglas que le dice a las aplicaciones como compartir informaci√≥n(datos)

* **Jhon Alexander Romero Gonzaga** (2) [903181](https://platzi.com/comentario/903181/) 

	No sabia que se podia hacer eso en la terminal con el comando curl.

* **Jery Rafael Ram√≠rez Teo** (2) [819400](https://platzi.com/comentario/819400/) 

	Protocolo:conjunto de reglas que definen como se har√° la comunicaci√≥n entre dos entidades.

* **Roberto Guerra Jimenez** (1) [1102450](https://platzi.com/comentario/1102450/) 

	HTTP (HyperText Transfer Protocol) es el medio por el cual se transmiten los mensajes que salen de una computadora hasta un servidor y viceversa.

* **Nacxit** (1) [1010661](https://platzi.com/comentario/1010661/) 

	Api: Application Programing Interface,  
	HTTP(HyperText Tranfer Protocolo),

* **Enrique Felix Garcia Stave** (1) [1008257](https://platzi.com/comentario/1008257/) 

	 **Apuntes:**  
	REST se apoya fuertemente en HTTP  
	HTTP: HyperText Transfer Protocol (o sus siglas en espa√±ol, Protocolo de Transferencia de Hipertexto).  
	Hipertexto: Un texto que hace referencia a otros textos para permitir crear, agregar, enlazar y compartir informaci√≥n de diversas fuentes por medio de hiperv√≠nculos (o enlaces).

* **Roberto Espinosa** (1) [987237](https://platzi.com/comentario/987237/) 

	Por favor me pueden indicar donde encuentro el texto para instalar las herramientas para este curso?

	* **Gabriel De Andrade (Platzi)** [987237] (1)

		Te recomiendo el [Curso de Prework](https://platzi.com/clases/prework/) üòÑ

	* **H√©ctor Tello** [987237] (1)

		En el video anterior, en la secci√≥n de archivos y enlaces.

* **jmacalupur** (1) [983229](https://platzi.com/comentario/983229/) 

	curl <https://platzi.com>  
	hace que traigas el sitio desde la linea de comando
	
	curl -v <https://platzi.com> > /dev/null  
	hace que traigas solo el encabezado, no el html

* **Rafael Carrillo** (1) [922891](https://platzi.com/comentario/922891/) 

	si la terminal es una herramienta poderosa, yo pensaba que curl solo servia para conectarse a actualizar repositorios

* **Christian David S√°nchez** (1) [698928](https://platzi.com/comentario/698928/) 

	API: La interfaz de programaci√≥n de aplicaciones, conocida tambi√©n por la sigla API, en ingl√©s, application programming interface, es un conjunto de subrutinas, funciones y procedimientos que ofrece cierta biblioteca para ser utilizado por otro software como una capa de abstracci√≥n.

* **deveeup** (1) [676715](https://platzi.com/comentario/676715/) 

	HTTP (Hypertext Transfer Protocol / Protocolo de transferencia de hypertextos).
	
	Protocolo: Conjunto de reglas que definen como se har√° la comunicaci√≥n entre dos entidades.  
	Hypertexto: Se trata de un texto que contiene referencia a otros textos.

* **platzerito02112019 platzerito02112019** (1) [674399](https://platzi.com/comentario/674399/) 

	üòÆ Me ha estallado la cabeza Tio ‚Ä¶ esto es Hermoso

* **Edgar Mogollon** (1) [674155](https://platzi.com/comentario/674155/) 

	Super!

* **Syddar Bujato** (1) [674123](https://platzi.com/comentario/674123/) 

	Buen curso

* **FizIrvin** (1) [71940](https://platzi.com/comentario/806888/) 
ya hay un curso fundamental sobre Redes, ¬øse extender√° a una carrera de redes?

	* **Kevin Javier Morales (Platzi)** [71940] (1)

		Es posible, qu√© te gustar√≠a ver en una carrera de redes?

## 0040. ¬øQu√© significa REST y ¬øqu√© es una API RESTful [21611](https://platzi.com/clases/1638-api-rest/21611-que-significa-rest-y-que-es-una-api-restful/)

### Descripci√≥n:


REST es un acr√≥nimo de Representational State Transfer o transferencia de estado representacional, le agrega una capa muy delgada de complejidad y abstracci√≥n a HTTP. Mientras que HTTP es transferencia de archivos, REST se basa en la **transferencia de recursos**.

Una API RESTful es una API dise√±ada con los conceptos de REST:

* Recurso: todo dentro de una API RESTful debe ser un recurso.
* URI: los recursos en REST siempre se manipulan a partir de la URI, identificadores universales de recursos.
* Acci√≥n: todas las peticiones a tu API RESTful deben estar asociadas a uno de los verbos de HTTP: GET para obtener un recurso, POST para escribir un recurso, PUT para modificar un recurso y DELETE para borrarlo.



REST es muy √∫til cuando:

* Las interacciones son simples.
* Los recursos de tu hardware son limitados.



No conviene cuando las interacciones son muy complejas.

### Links:

* [Simple Object Access Protocol - Wikipedia, la enciclopedia libre](https://es.wikipedia.org/wiki/Simple_Object_Access_Protocol)

### Comentarios:

* **john jairo lopez ramirez** (9) [715800](https://platzi.com/comentario/715800/) 

	En este video explican de una forma bastante suave y did√°ctica que es una API RESTful.
	
	<https://www.youtube.com/watch?v=u2Ms34GE14U>

	* **Manuel  Alfonso Illidge ramirez** [715800] (4)

		no entren a ese enlace es de EDTeam la empresa que le ha hechado Dami er a platzi en sus videos y el fundador es un envidioso

	* **Maria Paula Rodriguez Escobar** [715800] (17)

		Muy bueno el v√≠deo.
		
		**Respuesta a Manuellillidge**  
		La informaci√≥n y el aprendizaje no tiene ‚Äòbandos‚Äô. Cualquiera puede usar √©ste v√≠deo como recurso si aporta a su formaci√≥n acad√©mica.

	* **Eduardo Kiriakos Piazza** [715800] (2)

		Excelente recurso! Recomendad√≠simo! Gracias por compartir.

	* **David Santiago Gonz√°lez Ramos** [715800] (1)

		Excelente aporte!! Explica de una forma super sencilla los conceptos

* **luis_vazquez** (7) [793017](https://platzi.com/comentario/793017/) 

	REST permite mandar json, xml, binarios (im√°genes, documentos), text, etc. en cambio con SOAP que solo permite la transmisi√≥n de datos en formato XML, json es mucho mas liviano y rapido en su procesamiento dado que es interpretado de forma natural por javascript.
	
	REST como SOAP son bastante capaces de atender grandes vol√∫menes de informaci√≥n, yo creo hay que analizar que es m√°s conveniente para uno, tanto en tiempo de desarrollo, tecnolog√≠as y sobre que dispositivos o tipos de APP se van a consumir, SOAP se utiliza mas en aplicaciones financieras.

* **iridian** (7) [712835](https://platzi.com/comentario/712835/) 

	 **Una petici√≥n REST completa se basa en:**
	
	-URL(Dominio, protocolo)  
	-verbo HTTP (GET, PUT, POST, DELETE)
	
	**¬øCu√°ndo conviene usar REST?**
	
	-Interacciones simples (agregar recursos, quitarlos, modificarlos)  
	-Recursos limitados
	
	**¬øCu√°ndo NO conviene usar REST?**
	
	-cuando las interacciones son m√°s complejas, ejemplo cu√°ndo necesitamos que el servidor aporte m√°s l√≥gica.

* **jmacalupur** (6) [983280](https://platzi.com/comentario/983280/) 
	
	![IMG_384A6B2D3496-1.jpg](https://static.platzi.com/media/user_upload/IMG_384A6B2D3496-1-9b143701-5983-4d9f-9811-0539d5e9145a.jpg)

	* **Kevin Naranjo** [983280] (1)

		üòÉ

* **Carlos Andres Casta√±eda Osorio** (6) [692302](https://platzi.com/comentario/692302/) 

	Algunas Siglas vistas hasta ahora en el curso:
	
	* REST ( Representational State Transfer)
	* HTTP: HyperText Transfer Protocol
	* URI: Uniform Resource Identifier
	* URL: Uniform Resource Locator
	
	

	* **Christian David S√°nchez** [692302] (1)

		excelente aporte!

* **Enrique Felix Garcia Stave** (4) [1008300](https://platzi.com/comentario/1008300/) 

	 **Apuntes:**  
	Representational State Transfer (o Transferencia de estado representacional), es una capa agregada a HTTP y se basa en el intercambio de recursos, asi como HTTP se basa en el intercambio de archivos.  
	Una API RESTful, es una API dise√±ada en base a los conceptos de REST.  
	**Recursos**  
	URIs (URI Universal Resources Identifiers), es decir, el recurso sobre el que queremos realizar la acci√≥n.  
	Acci√≥n
	
	**Peticion REST**  
	URL (Dominio, Protocolo, etc.)  
	Verbo HTTP (GET, PUT, POST, DELETE)
	
	RESTful conviene usarse cuando se hacen peticiones simples, cuando los recursos son limitados

* **Enrique Felix Garcia Stave** (3) [1025565](https://platzi.com/comentario/1025565/) 

	 **Diferencias entre REST y RESTfu** l  
	REST es una arquitectura para aplicaciones en redes (REpresentational State Transfer). RESTful por otro lado, son programas (a modo de web service o API), basados en REST. Muchas veces se usan ambos terminos como sinonimos.

* **Ricardo Lugo Recillas** (3) [766173](https://platzi.com/comentario/766173/) 

	REST es un acronimo de representational state transfer ( transferencia de estado representacional )
	
	APIRESTFUL = ap√≠ creado en base a los conceptos de REST
	
	una peticion se basa en URL que es la url de la peticion y en verbos http que son (get,post,put,delete)

* **Jose Daniel Barr√≠a Reyes** (3) [674016](https://platzi.com/comentario/674016/) 

	Caracter√≠sticas
	
	* Las interacciones son simples.
	* Los recursos de tu hardware son limitados.
	* No conviene cuando las interacciones son muy complejas.
	
	
	
	Como esta compuesta una peticion REST:
	
	* URL
	* verbo (get, post, delete, put )
	
	
	
	Cuando conviene **REST**
	
	* interacciones simples
	* recursos son limitados  
	Cuando **NO** conviene
	* interacciones son complejas
	* Requerimos mas l√≥gica  
	Ejemplo: validaci√≥n de un documento
	
	

	* **ramonogajardo** [674016] (2)

		Cuando no conviene ? y que podemos usar para crear una api sino es via REST o REST FULL hay mas alternativas

	* **ThAlan** [674016] (2)

		Compa√±ero ramonogajardo, una REST API conviene cuando se hacen interacciones simples como lo seria un CRUD donde solo creamos, editamos, obtenemos y eliminamos un objeto.  
		No conviene cuando, como escribi√≥ danijazzero, requerimos m√°s l√≥gica departe del servidor.
		
		En cuanto a una alternativa para crear una API que no sea REST o RESTful existe GraphQl, que es muy usado y una muy buena alternativa.  
		<https://graphql.org/>
		
		Te recomiendo aprender ambas (REST, GraphQl) para que tengas un contexto mucho m√°s amplio de las capacidades de ambas y decidas cuando usar cada una.

	* **ramonogajardo** [674016] (1)

		ThAlan cuando se refiere requerimos m√°s l√≥gica departe del servidor. no debemos usar REST o RESTFULL, entonces que hacemos ? nos vamos microsoft y creamos un SOAP? no vamos con GraphQL que no tiene mucho tiempo en el mercado?

* **Felipe Acosta** (2) [946797](https://platzi.com/comentario/946797/) 

	Que es mejor curl o wget ?

	* **Gabriel De Andrade (Platzi)** [946797] (4)

		Hola! Uno no es mejor que otro, curl est√° m√°s enfocado a ser una herramienta que no solo descargue sino que sea capaz de transferir datos a trav√©s de diferentes protocolos, esto implica que puede hacer muchas cosas m√°s all√° de descargar, como enviar y recibir datos por FTP, aparte curl permite construir aplicaciones debido a que est√° basado en la librer√≠a libcurl.  
		  
		wget por otra parte es una herramienta de la terminal centrada a la descargas, esto le permite hacer por ejemplo descargas en paralelo a diferencia de curl pero tambi√©n implica de que s√≥lo puede usar los verbos http POST y GET.  
		  
		[cURL vs Wget](https://www.maketecheasier.com/curl-vs-wget/)

* **Emerson Cede√±o Salazar** (2) [711494](https://platzi.com/comentario/711494/) 

	conceptualmente hablando, decir ‚ÄúAPI **REST** ‚Äù y ‚ÄúAPI **RESTful** ‚Äù es lo mismo?, uno est√° mejor dicho que el otro?

	* **freddymm** [711494] (2)

		utilizamos API RESTful cuando nos referimos a una arquitectura API REST pero aplicadas a servicios WEB

* **gustavoalbertorestrepopelae** (2) [682257](https://platzi.com/comentario/682257/) 

	Saludos,  
	Con respecto a esta observaci√≥n de servicios REST. ‚ÄúNo conviene cuando las interacciones son muy complejas.‚Äù La pregunta es:  
	** ¬øQue tecnolog√≠a utilizar cuando las interacciones son complejas, y claro se cuenta con infraestructura hardware para soportar esas interacciones?**  
	Gracias, quedo atento.

	* **ramonogajardo** [682257] (1)

		yo estoy esperando la misma respuesta de parte de profesor

	* **Nanbu** [682257] (1)

		Imagino que GraphQL.

* **juand_silva** (2) [675585](https://platzi.com/comentario/675585/) 

	HTTP se basa en el intercambio de **archivos** y  
	REST se basa en el intercambio de **recursos**
	
	**archivos** : imagenes, archivos .*  
	**recursos** : son datos, con los cuales se puede interactuar o consumir haciendo operaciones CRUD en la BD por medio de los m√©todos HTTP (GET, POST, PUT, DELETE). Todos los recursos tienen un identificador √∫nico llamado URI

	* **Daniel Meza** [675585] (1)

		Excelente complemento a la informaci√≥n con los ejemplos.  
		Gracias

* **Anthony Guzman Lopez** (2) [74307](https://platzi.com/comentario/850398/) 
Buen d√≠a, siempre he tenido una duda y me confunde bastante. Cual es la diferencia entre webservices y API Rest? Gracias,

	* **Erik Ochoa (Platzi)** [74307] (1)

		Para mi un **Web Service** o [Servicio Web](https://es.wikipedia.org/wiki/Servicio_web) es un servidor que pueden intercambiar datos con un cliente por medio de **requests** en un formato que ambos entienden. Estos pueden ser XML, SOAP, WSDL, REST etc.
		
		Una **API REST** es un tipo de Web Service que usa el protocolo HTTP para proporcionar una API (Application Programming Interface) que cumple con las reglas de la arquitectura [REST](https://es.wikipedia.org/wiki/Transferencia_de_Estado_Representacional) usando los ‚Äúverbos‚Äù POST, GET, PUT, DELETE, PATCH etc.

* **FizIrvin** (2) [71943](https://platzi.com/comentario/806952/) 
¬øhay un curso de SOAP?

	* **Israel Yance** [71943] (1)

		Dif√≠cil que haya uno, aunque ¬øpor qu√© no?.  
		Quiz√° porque SOAP no es lo m√°s moderno ni es f√°cil de implementar, y ahora GraphQL est√° tomando fuerza.

* **developmec** (2) [64447](https://platzi.com/comentario/676024/) 
Y por ejemplo, en qu√© tipo de caso la interacci√≥n se pone compleja ? Y supongo usar√≠amos soap ?

	* **Mauro Chojrin** [64447] (2)

		Cuando hablamos de interacciones complejas nos referimos a operaciones _compuestas_ (Operaciones que no pueden ser resueltas con un simple CRUD).
		
		Piensa en alg√∫n c√°lculo que involucre mucha l√≥gica.
		
		Siempre es posible forzar una arquitectura REST (Un ejemplo podr√≠a ser la creaci√≥n de tokens de acceso) pero existen escenarios en los que es m√°s f√°cil usar otras como SOAP.
		
		Una ventaja interesante de SOAP es el uso de WSDLs (Descripciones formales de la API que pueden ser usadas para hacer m√°s f√°ciles las validaciones)

* **ramonogajardo** (2) [64352](https://platzi.com/comentario/674573/) 
Hola, porque dos servidor normalmente uno hace todo en mismo servidor REST, es por tema de seguridad ? , osea un servidor auth y lo el d...

* **johnyauyo** (2) [64325](https://platzi.com/comentario/674207/) 
Para el caso que se indica que no conviene usar rest (validaci√≥n de documentos) ‚Ä¶ que deber√≠amos usar ?

	* **Mauro Chojrin** [64325] (3)

		En general para interacciones complejas conviene pensar en algo como SOAP

* **Didier20** (1) [1004485](https://platzi.com/comentario/1004485/) 

	Muy interesante!

* **FizIrvin** (1) [806948](https://platzi.com/comentario/806948/) 

	interacciones simples y recursos limitados, ok.

* **Christian David S√°nchez** (1) [698989](https://platzi.com/comentario/698989/) 

	Interesante conocer de manera mas profundo estos conceptos.

* **Eduardo Lujan** (1) [683792](https://platzi.com/comentario/683792/) 

	Cuales serian las alternativas a restful como el caso de validaci√≥n de archivos ?

	* **Juan Sebasti√°n Joya Rodr√≠guez** [683792] (2)

		restFull es de hecho una alternativa a SOAP, que es un modelo de comunicaci√≥n basado en XML. ¬øPuedes creear que todavia se usa? el cuento es que hay muchos bancos que tienen su APIS milenarias, y como manejan tanta informaci√≥n, prefieren que sus aplicacitvos se acoplen a protocolos viejos, que actualizar protocolos de comunicacion

* **Gerardo Nava Pereda** (1) [679462](https://platzi.com/comentario/679462/) 

	## Ejemplo: resources :photos
	
	[CRUD, Verbs, and Actions](https://guides.rubyonrails.org/routing.html#crud-verbs-and-actions)

* **Jose Rodriguez Luis** (1) [674715](https://platzi.com/comentario/674715/) 

	verbos http: get, post, put, delete

* **Juan Pablo Cely W.** (1) [77764](https://platzi.com/comentario/909392/) 
Porque afirmas que para procesos complejos rest se puede quedar chico?

	* **jlguerrerop** [77764] (1)

		Seg√∫n lo que logro entender, el profesor se refiere a que REST tiene unas operaciones limitadas (GET, POST, UPDATE, ETC) que se pueden realizar en el servidor. Ya si por l√≥gica del negocio se requiere otro tipo de operaciones que se escapa del alcance de REST, no conviene usarlo.

* **mafevito** (1) [74956](https://platzi.com/comentario/861888/) 
Hola No entiendo a que se refiere cuando dice que ‚ÄúUna API RESTful es una API dise√±ada con los conceptos de REST.‚Äù

	* **Erik Ochoa (Platzi)** [74956] (1)

		Se refiere a que cumple con la arquitectura [REST](https://es.wikipedia.org/wiki/Transferencia_de_Estado_Representacional).

* **johnyauyo** (1) [64324](https://platzi.com/comentario/674206/) 
¬øSOAP y REST, en que casos es mejor usar uno u otro ?

	* **Santiago Bernal** [64324] (6)

		Si te vas a conectar a una API de tercero, debes ver que formato soporta.  
		Si vas a exponer tu API debes tener en cuenta que con SOAP la respuesta viene en XML, mientras que una API rest trabaja con el Json.  
		Ambas son muy v√°lidas, pero si buscas en internet las APIs de las empresas principales, notar√°s que la mayor√≠a s√≥lo soportan REST, y SOAP la soportan proyectos que llevan m√°s de 10 a√±os.  
		Incluso los nuevos proyectos a parte de REST, soportan GraphQL

* **Freddy Alejandro Leal Gonzalez** (0) [75230](https://platzi.com/comentario/866324/) 
Conozco ejemplos de entidades financieras que utilizan REST para usar operaciones complejas como aperturas de cuentas, y otros servicios,...

# Aprender a consumir servicios REST [4328]

## 0050. C√≥mo realizar una petici√≥n REST e interpretar sus resultados [21615](https://platzi.com/clases/1638-api-rest/21615-como-realizar-una-peticion-rest-e-interpretar-sus-/)

### Descripci√≥n:


Utilizando el comando ‚Äòcurl‚Äô dentro de nuestra terminal podemos realizar peticiones a cualquier sitio web, por ejemplo una API como la de [xkcd](https://xkcd.com/).
``` 
    curl https://xkcd.com/info.0.json
    
```

El anterior comando nos regresa informaci√≥n del API, pero de manera poco legible. para poder verlo de manera m√°s ordenada podemos usar el siguiente comando:
``` 
    curl https://xkcd.com/info.0.json | jq
    
```

### Comentarios:

* **OscarCastaneda** (16) [856410](https://platzi.com/comentario/856410/) 

	Me estresa mucho ver el c√≥digo en php.
	
	Les dejo unas instrucciones si quieren usar Javascript
	
	  1. En una carpeta vacia ejecuta en terminal npm init --yes
	  2. Ejecuta npm i axios
	  3. En un archivo llamado index.js copia el siguiente c√≥digo
	
	
	``` 
	    const axios = require('axios')
	    
	    const url = 'https://xkcd.com/info.0.json'
	    
	    axios.get(url)
	      .then(res => console.log(res.data))
	      .catch(err => console.log(err))
	    
	```
	
	Respuesta:
	``` 
	    {
	      "month": "12",
	      "num": 2238,
	      "link": "",
	      "year": "2019",
	      "news": "",
	      "safe_title": "Flu Shot",
	      "transcript": "",
	      "alt": "\"Wait, how often are you getting bitten by snakes? And why are you boiling water?\" \"Dunno, the CDC people keep showing up with complicated questions about the 'history of the property' and 'possible curses' but I kinda tune them out. At least one of them offered me the flu shot.\"",
	      "img": "https://imgs.xkcd.com/comics/flu_shot.png",
	      "title": "Flu Shot",
	      "day": "6"
	    }
	    
	```

	* **David Santiago Gonz√°lez Ramos** [856410] (1)

		x2  
		Prefiero JS toda la vida‚úå

	* **Gtiseira** [856410] (1)

		Gracias me sirvi√≥ mucho. Quisiera aprendar mas sobre el paquete axios. Se ve muy interesante

	* **rubenpenap** [856410] (1)

		excelente aporte, ahora toca aprender axios

* **operez12** (12) [736341](https://platzi.com/comentario/736341/) 

	Ejemplo implementado en python
	``` 
	    from urllib.request import urlopen
	    import json
	    
	    base_url = "https://xkcd.com/info.0.json"
	    
	    # To convert bytes in text
	    data = urlopen(base_url).read().decode('UTF-8')
	    
	    # json.loads to decode in text
	    data_json_obj = json.loads(data)
	    
	    print(data_json_obj["img"])
	    
	```

* **luis_vazquez** (9) [793118](https://platzi.com/comentario/793118/) 

	Es interesante aprender a utilizar la herramienta aunque hay otras como postman que es mas sencillo.
	
	![pmcput.png](https://static.platzi.com/media/user_upload/pmcput-ba685fa2-3019-408c-ad89-77dd41e18ba9.jpg)

* **Christian David S√°nchez** (8) [699134](https://platzi.com/comentario/699134/) 

	Utilicen postman para realizar peticiones <https://www.getpostman.com/products>

* **Jair Israel Avil√©s Eusebio** (6) [810946](https://platzi.com/comentario/810946/) 

	Una alternativa a cUrl es [HTTPie](https://httpie.org/) el cual como valor agregado es sencillo de user, muestra los headers de la respuesta y ya aplica formato a la respuesta como lo hace **jq** sin necesidad de instalar un modulo adicional. Recomendada al 100% pues es muy usada en la industria.
	
	![Screen Shot 2019-11-04 at 4.19.26 PM.png](https://static.platzi.com/media/user_upload/Screen%20Shot%202019-11-04%20at%204.19.26%20PM-839e2a25-721d-4ca0-b4f7-00ede40bdfde.jpg)

	* **Jonathan Uriel Jim√©nez Soveranes** [810946] (1)

		Cierto, en realidad la info se muestra mejor, gracias!

* **Emilio Ian Camacho Mejia** (5) [673824](https://platzi.com/comentario/673824/) 

	Para instalar **jq** en Linux podemos utilizar:
	``` 
	    sudo snap install jq 
	    
	```
	
	o bien
	``` 
	    sudo apt-getupdate
	    sudo apt-get install jq
	    
	```

	* **Omar S√°nchez Avelar** [673824] (2)

		justo lo que necesitaba ! gracias

* **Cinthya Cabanzo** (4) [694467](https://platzi.com/comentario/694467/) 

	Para usar el comando jq en
	``` 
	    curl https://xkcd.com/info.0.json | jq
	    
	```
	
	Es necesario que instales jq
	
	<https://stedolan.github.io/jq/download/>

	* **operez12** [694467] (1)

		Gracias üòÉ

	* **operez12** [694467] (1)

		Gracias üòÉ

* **Gerald Zamora** (3) [935299](https://platzi.com/comentario/935299/) 

	En java:
	``` 
	    publicclass Main {
	        publicstaticvoid main(String[] args) {
	    			 Unirest.setTimeouts(0, 0);
	            try {
	                HttpResponse<String> stringHttpResponse = Unirest.get("https://xkcd.com/info.0.json").asString();
	                System.out.println(stringHttpResponse.getBody());
	            } catch (UnirestException e) {
	                e.printStackTrace();
	            }
	    	}
	    }
	    
	```
	
	dependencias maven:
	``` 
	    			<dependency>
	                <groupId>com.mashape.unirest</groupId>
	                <artifactId>unirest-java</artifactId>
	                <version>1.4.9</version>
	            </dependency>
	    
	```

	* **Cristhian Franco** [935299] (1)

		Muchas gracias üòÑ

* **osdn** (3) [786033](https://platzi.com/comentario/786033/) 

	Ejemplo en Go
	``` 
	    package main
	    
	    //version of get using Golang - Platzi (API REST course)
	    
	    import (
	    	"encoding/json"
	    	"fmt"
	    	"io/ioutil"
	    	"log"
	    	"net/http"
	    	"time"
	    )
	    
	    func main() {
	    	url := "https://xkcd.com/info.0.json"
	    	client := http.Client{
	    		Timeout: time.Second * 2, // Maximum of 2 secs
	    	}
	    	req, err := http.NewRequest(http.MethodGet, url, nil)
	    	if err != nil {
	    		log.Fatal(err)
	    	}
	    	req.Header.Set("User-Agent", "spacecount-tutorial")
	    
	    	res, getErr := client.Do(req)
	    	if getErr != nil {
	    		log.Fatal(getErr)
	    	}
	    	body, readErr := ioutil.ReadAll(res.Body)
	    	if readErr != nil {
	    		log.Fatal(readErr)
	    	}
	    	obj := make(map[string]interface{})
	    	jsonErr := json.Unmarshal(body, &obj)
	    	if jsonErr != nil {
	    		log.Fatal(jsonErr)
	    	}
	    
	    	//jsonData := string(body)
	    	fmt.Println(obj["img"])
	    }
	    
	    
	```

* **kikega** (3) [728411](https://platzi.com/comentario/728411/) 

	Yo utilizar√© python

* **caramirezc** (3) [711146](https://platzi.com/comentario/711146/) 

	Para instalar php en ubuntu se debe ingresar el siguiente comando:
	``` 
	    sudo apt-get install php
	    
	```
	
	y para verificar la version instalada:
	``` 
	    php -v
	    
	```

* **juand_silva** (3) [675587](https://platzi.com/comentario/675587/) 

	Pueden instalar la extenci√≥n [JSONView](https://chrome.google.com/webstore/detail/jsonview/chklaanhfefbnpoihckbnefhakgolnmc) y ver el JSON m√°s amigable y poder interactuar con el.

* **Iraida Mercedes Barreto D√≠az** (2) [1056905](https://platzi.com/comentario/1056905/) 

	Yo lo hice con python:
	``` 
	    import urllib.request
	    import json
	    
	    defmain():
	            url = 'https://xkcd.com/info.0.json'
	            response = urllib.request.urlopen(url)
	            data = json.loads(response.read())
	            print (json.dumps(data, sort_keys=True))
	    
	    if __name__ == "__main__":    main()
	    
	```
	``` 
	    python3 xkcd.py | jq
	    
	```
	
	Respuesta:
	``` 
	    {
	      "alt": "So excited to see everyone after my luxury cruise home from the World Handshake Championships!",
	      "day": "23",
	      "img": "https://imgs.xkcd.com/comics/sabotage.png",
	      "link": "",
	      "month": "3",
	      "news": "",
	      "num": 2284,
	      "safe_title": "Sabotage",
	      "title": "Sabotage",
	      "transcript": "",
	      "year": "2020"
	    }
	    
	```

	* **onyx** [1056905] (1)

		Reinventas la rueda, mal eso :p
		
		Perfectamente puedes crear este codigo bash
		``` 
		    curl -s"$1" | jq "$2" | xargs curl -s --remote-name
		    
		```
		
		y ejecutarlo desde python, el performance es bastante importante en python
		``` 
		    import subprocess assp
		    sp.call(["./code.sh", "https://xkcd.com/info.0.json", ".img"])
		    
		```
		
		Ahi puedes jugar con iteradores para hacerlo a gran escala, eso permite tambien que tu codigo sea escalable

	* **Royer Guerrero Pinilla** [1056905] (1)

		Esta es otra forma un poco mas sencilla, necesitas instalar request
		``` 
		    import requests
		    
		    r = requests.get('https://xkcd.com/info.0.json')
		    print(r.json())
		    
		```

* **jjcastiblancom** (2) [1040156](https://platzi.com/comentario/1040156/) 

	Genial, el curso pero no lo estamos aplicando en casos de la vida real ‚Ä¶ üò¶

	* **Royer Guerrero Pinilla** [1040156] (1)

		Ilustrarme un poco mas, que casos serian de la vida real?

* **jmacalupur** (2) [983349](https://platzi.com/comentario/983349/) 

	Si desean ejecutar su c√≥digo php en VS Code, usen la extensi√≥n PHP Server. √∫til para ver el resultado final en la web.

* **Carlos Andres Casta√±eda Osorio** (2) [692327](https://platzi.com/comentario/692327/) 

	Siempre es bueno conocer la documentaci√≥n, en este caso de [curl_init](https://www.php.net/manual/es/function.curl-init.php) en PHP

* **MauricioF** (2) [676740](https://platzi.com/comentario/676740/) 

	curl ya viene instalado por defecto en windows 10

* **alvearsm** (2) [675777](https://platzi.com/comentario/675777/) 

	 **INSTALAR JQ EN MacOS**
	
	Abrir una nueva Terminal y realizar los siguientes pasos:
	
	**1\. Instalar el administrador de paquetes Brew**
	
	/usr/bin/ruby -e ‚Äú$(curl -fsSL <https://raw.githubusercontent.com/Homebrew/install/master/install>)‚Äù
	
	La anterior URL est√° en la p√†gina oficial de Brew <https://brew.sh>
	
	**2\. Instalar JQ usando Brew**  
	brew install jq
	
	una vez instalado lo anterior se puede usar jq seg√πn la linea indicada en el video.  
	curl <https://xkcd.com/info.0.json> | jq

* **Israel Yance** (2) [673115](https://platzi.com/comentario/673115/) 

	Para instalar jq en mac:  
	brew install jq  
	El curl creo que ya viene instalado, pero si no lo tienen:  
	brew install curl

* **onyx** (1) [1109486](https://platzi.com/comentario/1109486/) 

	El proceso completo para descargar la imagen usando curl
	``` 
	    curl -s https://xkcd.com/info.0.json | jq ".img" | xargs curl -s --remote-name
	    
	```
	
	Aunque hubiera estado mejor si hubieran ense√±ado a hacer todo eso usando Telnet, ya que si ves como funciona a profundidad el protocolo HTTP, por dar un ejemplo

* **Royer Guerrero Pinilla** (1) [1108558](https://platzi.com/comentario/1108558/) 

	No olviden instalar jp antes de usarlo
	``` 
	    sudo apt-get install jq
	    
	```

* **Royer Guerrero Pinilla** (1) [1108507](https://platzi.com/comentario/1108507/) 

	Pensaba que una API regresaba ciertos datos obligatorios, es decir key:values del objecto json obligatorios. Pero veo que cada quien lo hace como mejor le paresca

* **Marcos Corcoba** (1) [1106329](https://platzi.com/comentario/1106329/) 

	Me da el siguiente error: ![cmd_n7N6eu2Vig.png](https://static.platzi.com/media/user_upload/cmd_n7N6eu2Vig-e4929e3b-5337-4dca-8e1a-0eb1504ec507.jpg)
	
	Alguien sabe porque?

	* **Marcos Corcoba** [1106329] (1)

		Problema resulto: Ten√≠a instalado Wamp i PHP. Me estaba cogiendo el path del php porque estaba antes el el del Wamp.

* **7edwargl** (1) [1029386](https://platzi.com/comentario/1029386/) 

	En Ruby,
	``` 
	    require'open-uri'
	    require'json'
	    
	    document = open('https://xkcd.com/info.0.json').read
	    
	    document_json = JSON.parse(document)
	    
	    puts document_json
	    puts document_json['img']
	    
	```
	
	La salida,
	``` 
	    {"month"=>"3", "num"=>2278, "link"=>"", "year"=>"2020", "news"=>"", "safe_title"=>"Scientific Briefing", "transcript"=>"", "alt"=>"\"I actually came in in the middle so I don't know which topic we're briefing on; the same slides work for like half of them.\"", "img"=>"https://imgs.xkcd.com/comics/scientific_briefing.png", "title"=>"Scientific Briefing", "day"=>"9"}
	    https://imgs.xkcd.com/comics/scientific_briefing.png
	    
	```

* **H√©ctor Tello** (1) [1010847](https://platzi.com/comentario/1010847/) 

	Si alguien est√° en ubuntu y a√∫n no tiene php instalado pueden usar este video para instalarlo: <https://www.youtube.com/watch?v=fO6kt-Cjszk>

* **Omar Orjuela Rodr√≠guez** (1) [962588](https://platzi.com/comentario/962588/) 

	Esto es en Java para obtener el campo en especifico, alguien conoce una manera m√°s corta?
	``` 
	    publicclassMain {
	            publicstaticvoidmain(String[] args) {
	                Unirest.setTimeouts(0, 0);
	                try {
	                    HttpResponse<JsonNode> stringHttpResponse = Unirest.get("https://xkcd.com/info.0.json").asJson();
	    
	                     System.out.println(stringHttpResponse.getBody().getObject().get("img"));
	                    } catch (UnirestException e) {
	                            e.printStackTrace();
	    
	                }         }
	            }
	    
	```

* **Marco Antonio Gonz√°lez Arellano** (1) [897727](https://platzi.com/comentario/897727/) 

	De las muchas herramientas que existen me gusta la extensi√≥n de VS Code, HTTP Client.
	
	![](![api-rest.png](https://static.platzi.com/media/user_upload/api-rest-2c7bfcd9-6e1c-4618-b456-1de104ba70e5.jpg)

* **Jonathan Uriel Jim√©nez Soveranes** (1) [852652](https://platzi.com/comentario/852652/) 

	Joder, no voy entendiendo bien, en especial cuando pas√≥ al m√©todo POST

	* **Juan Camilo Alvarez Jurado** [852652] (1)

		En el c√≥digo del minuto 8 del video ocurre lo siguiente
		
		* Se quiere realizar una petici√≥n REST a un servidor de un login, empleando el m√©todo (acci√≥n) POST
		* Se crea la informaci√≥n a enviar y se convierte en formato JSON
		* Se inicia una sesi√≥n de conexi√≥n con el servidor (curl_init)
		* Se configuran todas las opciones de la petici√≥n (con cada llamado a curl_setopt): 
		  * el primero configura que no se retorne directamente la respuesta (para manejarlo a mano con otro m√©todo),
		  * el segundo configura que se ignore en el retorno las cabeceras,
		  * el tercero indica que esta petici√≥n va a manejar el m√©todo (acci√≥n) POST,
		  * el cuarto indica cu√°l es el Payload de la petici√≥n, es decir, el cuerpo de informaci√≥n a enviar,
		  * el quinto configura a nivel HTTP la informaci√≥n de lo que se env√≠a (indicarle que se trata de un JSON, y de qu√© tama√±o)
		
		

* **andresalarcon** (1) [824285](https://platzi.com/comentario/824285/) 

	Como puedo ordenar la info que llega de la api en el cmd de windows, me dice que el comando jq no lo reconoce.

	* **mafevito** [824285] (1)

		Para usar el comando jq debes instalarlo primero
		
		Aqui te dejo la [documentaci√≥n](https://stedolan.github.io/jq/download/) para que puedas descargarlo

* **edwar enrique vilchez serrano** (1) [697491](https://platzi.com/comentario/697491/) 

	Aunque instal√© la herramienta jq, no me despliega el resultado esperado ayuda por favor

	* **MDCMC** [697491] (1)

		que te aparece?

	* **Jos√© B. M√©ndez Pad√≠n** [697491] (1)

		¬øHas realizado bien la redirecci√≥n ( | ) en el comando?

* **MauricioF** (1) [676831](https://platzi.com/comentario/676831/) 

	La imagen se puede ver incluyendo el tag img de html:
	``` 
	    <img src="<?php /* Template Name: curl */
	    $json = file_get_contents('https://xkcd.com/info.0.json');
	    $data = json_decode($json, true);
	    echo $data['img'].PHP_EOL;?>" alt="meme">```
	    
	```

* **MauricioF** (1) [676822](https://platzi.com/comentario/676822/) 

	Hice un intento en Wordpress, creando un archivo en php colocandole este encabezado para poderlo incluir en una p√°gina nueva:
	``` 
	    <?php/* Template Name: Nombre*/
	    echo file_get_contents('https://xkcd.com/info.0.json').PHP_EOL;
	    ?>```
	    Y funciona!
	```

	* **Alex Rodr√≠guez P** [676822] (1)

		Hey, esto se ve genial. A probar con la API que necesito y mi WP si hala igual. Buen dato!

* **MauricioF** (1) [676745](https://platzi.com/comentario/676745/) 

	Tambi√©n se puede instalar la consola de Ubuntu en Windows baj√°ndola desde la Tienda de Microsoft

* **Alexander Mateo** (1) [674125](https://platzi.com/comentario/674125/) 

	¬°Genial! üòÑ

* **Emilio Ian Camacho Mejia** (1) [673844](https://platzi.com/comentario/673844/) 

	Podria alguien ayudarme por favor, al ejecutar el script me lanza el siguiente error‚Ä¶
	``` 
	    parseerror: Invalid numeric literal at line1, column 6
	    
	```
	
	Este es mi codigo
	
	![error.png](https://static.platzi.com/media/user_upload/error-3f83795c-9a80-419f-9773-90e436d9c251.jpg)

	* **msantim** [673844] (3)

		Oye que extra√±o, copie tu codigo, ejecute y funciono sin problema üòï
		``` 
		    <?php
		    
		    $json = file_get_contents('https://xkcd.com/info.0.json');
		    
		    $data = json_decode($json,true);
		    
		    echo $data['img'].PHP_EOL;
		    
		```
		
		Si puedes subir un enlace de tu archivo, podriamos ayudarte mejor üòÑ

	* **JeanCarlosRodriguez** [673844] (3)

		Para PHP : 7.3.6
		
		cambia esta linea:
		
		$data = json_decode($json, true);  
		por  
		$data = json_decode((string) $json, true);

	* **Emilio Ian Camacho Mejia** [673844] (1)

		@jcrsoft_ve Ya hice el cambio que me indicas y aun asi me marca el mismo error üòï

	* **Hamilton Ar√©valo √Ålvarez** [673844] (5)

		Tu errror no tiene nada que ver con tu c√≥digo. El problema es cuando ejecutas el archivo en tu terminal. Para ejecutar debes usar:  
		php nombre-archivo.php  
		Estas usando seguramente algo como esto:  
		php nombre-archivo.php | jq  
		En este caso te va a generar un error:  
		parse error: Invalid numeric literal at line 1, column 6
		
		jq es una herramienta para procesar json, como en este caso no estas generando un json sino un String te produce este error

* **David A. Casas Am√©zquita** (1) [83445](https://platzi.com/comentario/1026860/) 
Que es jq cuando el profesor escribe el comando curl https://xkcd.com/info.0.json | jq Como tal su significado y en que otr...

	* **Ruben Padilla** [83445] (2)

		¬°Hola!
		
		El comando **jq** lo usa el profesor para visualizar de una manera m√°s amigable el archivo _JSON_ que llega en la petici√≥n _http_.
		
		Te comparto este art√≠culo que te brinda informaci√≥n m√°s detallada sobre su uso:
		
		* [JSON on the command line with jq](https://shapeshed.com/jq-json/#how-to-transform-data-values-within-json)
		
		
		
		Saludos!

* **carlossanchez27** (1) [78841](https://platzi.com/comentario/928450/) 
Hola, Cuando ejecuto desde el cmd de windows el comando php xkcd.php , me arroja el mensaje ‚Äúphp‚Äù no se reconoce como un comando interno ...

	* **albertodanielcastillomendoza** [78841] (1)

		Necesitas instalarle PHP a tu computadora, en youtube hay varios tutoriales sencillos de seguir

* **jarios017** (1) [72683](https://platzi.com/comentario/820539/) 
Al tratar de ejecutar desde el CMD el comando php xkcd.php me topo con el siguiente error de ejecuci√≥n: PHP Warning: file_get_contents()...

	* **Juan David Castro (Platzi)** [72683] (1)

		Para solucionar el primer error puedes seguir esta gu√≠a: <https://stackoverflow.com/questions/18643572/unable-to-find-the-wrapper-https-with-file-get-contents/43513546>.

* **FizIrvin** (1) [71944](https://platzi.com/comentario/806970/) 
¬øexisten normas para crear APIS p√∫blicas?

	* **Mois√©s Cede√±o** [71944] (2)

		¬øA qu√© te refieres con normas para crear API‚Äôs p√∫blicas?
		
		Creo que las mismas normas para crear una API privada con tokens de acceso y seguridad aplican para crear API‚Äôs p√∫blicas.
		
		La √∫nica diferencia es que al ser una API p√∫blica, el nivel de seguridad tendr√° otras caracter√≠sticas.
		
		Bueno, es lo que creo. ¬øQu√© opinas?

* **paconity** (0) [1022876](https://platzi.com/comentario/1022876/) 

	Si alguien quiere instalar php en **Mac** puede hacerlo usando [Homebrew](https://brew.sh/index_es) con el comando **brew install php** , es posible que cuando acabe les marque un error, algo relacionado con instalar Xcode CLT (command line tools) bueno ese lo pueden descargar [aqu√≠](https://developer.apple.com/download/more/), al parecer el Xcode CLT le instala a la terminal varias herramientas b√°sicas de UNIX lo cual, aparte de todo esto, creo que viene bien.

# Aprender a producir servicios REST [4329]

## 0060. Exponer datos a trav√©s de HTTP GET [21616](https://platzi.com/clases/1638-api-rest/21616-exponer-datos-a-traves-de-http-get/)

### Descripci√≥n:


### Comentarios:

* **Ezequiel Freire** (15) [678931](https://platzi.com/comentario/678931/) 

	Hola, como estan?  
	Por si tuvieron algun problema, dejo abajo el c√≥digo de ejemplo con los comandos para ejecutar en la terminal.  
	Espero que les sea de ayuda.  
	Saludos,
	``` 
	    <?php
	    // CLASE 06 - Exponer datos a traves de HTTP GET
	    
	    // Definimos los recursos disponibles
	    $allowedResourceType = [
	        'books',
	        'authors',
	        'genres',
	    ];
	    
	    // Validamos que el recurso este disponible
	    $resourceType = $_GET['resource_type'];
	    
	    if ( !in_array($resourceType, $allowedResourceType)) {
	        die;
	    }
	    
	    // Defino los recursos
	    $books = [
	        1 => [
	            'titulo' => 'Lo que el viento se llevo',
	            'id_autor' => 2,
	            'id_genero' => 2,
	        ],
	        2 => [
	            'titulo' => 'La Iliada',
	            'id_autor' => 1,
	            'id_genero' => 1,
	        ],
	        3 => [
	            'titulo' => 'La Odisea',
	            'id_autor' => 1,
	            'id_genero' => 1,
	        ],
	    ];
	    
	    // Se indica al cliente que lo que recibir√° es un json
	    header('Content-Type: application/json');
	    
	    // Generamos la respuesta asumiendo que el pedido es correcto
	    switch( strtoupper($_SERVER['REQUEST_METHOD'])) {
	        case'GET':
	            echo json_encode($books);
	            break;
	        case'POST':
	            break;
	        case'PUT':
	            break;
	        case'DELETE':
	            break;
	    }
	    
	    
	    // Inicio el servidor en la terminal 1
	    // php -S localhost:8000 server.php
	    
	    // Terminal 2 ejecutar 
	    // curl http://localhost:8000 -v
	    // curl http://localhost:8000/\?resource_type\=books
	    // curl http://localhost:8000/\?resource_type\=books | jq
	    
	```

	* **MarlaCpp** [678931] (2)

		Te anexo el comando para ver la informaci√≥n a trav√©s de los encabezados:
		``` 
		    curl http://localhost:8000/\?resource_type\=books -v > /dev/null
		    
		```
		
		y tambi√©n gracias por compartir el c√≥digo del profe.

	* **Ezequiel Freire** [678931] (2)

		Muchas gracias @MarlaCpp !!!

* **Fernando Reyes** (8) [875618](https://platzi.com/comentario/875618/) 

	El curso me parece interesante para conocer el manejo de las API Rest pero al no contar con los conocimientos PHP no puedo sacar todo el jugo al curso pero se logra transmitir la idea sin problema. Sigamos!!

* **Marco Antonio Gonz√°lez Arellano** (7) [897870](https://platzi.com/comentario/897870/) 

	Hice el ejemplo de esta clase con Python y Flask.
	
	![](![get_python.png](https://static.platzi.com/media/user_upload/get_python-1133ade2-4204-4917-b50a-97f423742664.jpg)
	
	Saludos,

	* **Royer Guerrero Pinilla** [897870] (1)

		Puedes usar flask_restful y jsonify

* **Daniel Meza** (7) [768228](https://platzi.com/comentario/768228/) 

	Curso de Buenas Pr√°cticas para Escritura de C√≥digo:  
	<https://platzi.com/clases/mejor-codigo/>

* **Anthony Guzman Lopez** (6) [850454](https://platzi.com/comentario/850454/) 

	El curso esta interesante, sin embargo lo que no me gusta es que es con PHP y al comienzo dice que no es indispensable pero cuando ya llevas 3 videos que es con codigo de PHP, te das cuenta que si es indispensable PHP, pero no estoy interesado en aprender PHP. Se deber√≠a crear un curso as√≠ para Python.  
	Gracias.

* **FizIrvin** (6) [806971](https://platzi.com/comentario/806971/) 

	¬øqu√© es m√°s recomendable? ¬øestablecer una conexi√≥n permanente con el servidor, o en cada petici√≥n, efectuar la conexi√≥n?

* **Christian David S√°nchez** (6) [763281](https://platzi.com/comentario/763281/) 

	Hasta php estoy aprendiendo en este curso üòÆ

* **Israel Yance** (6) [673826](https://platzi.com/comentario/673826/) 

	Levantar el servidor en php:  
	`$ php -S localhost:8000 server.php`  
	Realizar la consulta:  
	`$ curl http://localhost:8000 -v`  
	`$ curl http://localhost:8000?resource_type=books`

* **operez12** (3) [736465](https://platzi.com/comentario/736465/) 

	Que curiosa la sintaxis de PHP para declarar los diccionarios.

* **luisglopez7777** (2) [1113112](https://platzi.com/comentario/1113112/) 

	Mi codigo en js
	``` 
	    const express = require("express");
	    const bodyParser = require("body-parser");
	    const router = express.Router();
	     
	    var app = express();
	    app.use(bodyParser.json());
	     
	    app.use(router);
	    
	    const books = [
	        {
	            titulo : 'Lo que el viento se llevo',
	            id_autor : '2',
	            id_genero : '2'
	        },
	        {
	            titulo : 'La Iliada',
	            id_autor : '1',
	            id_genero : '1'
	        },
	        {
	            titulo : 'La Odisea',
	            id_autor : '1',
	            id_genero : '1'
	        }]
	    
	     
	    router.get("/", function(req, res) {
	      console.log(req.query);
	      console.log(req.body);
	     
	      res.json(books)
	    });
	     
	    app.listen(3000);
	     
	    console.log("La aplicacion esta escuchando en http://localhost:3000");```
	     
	    
	```

* **Enrique Felix Garcia Stave** (2) [1026181](https://platzi.com/comentario/1026181/) 

	**Apuntes: **  
	**Para los que usan IIS y tienen algunas dudas:**  
	Levantar un servidor: php -S [tudominio.local.com:8000](http://tudominio.local.com:8000) nombreArchivo.formato  
	Para hacer consulta CURL: curl <http://tudominio.local.com:80>  
	Para hacer consulta CURL con m√°s detalles: curl <http://tudominio.local.com:80> -v  
	Consecuentemente, Definimos los recursos disponibles, declarando los parametros que van a pasar por el Query string, luego validamos que el recurso est√© disponible, en caso de no estarlo podemos detener la ejecuci√≥n del script, luego de esto definimos los recursos (En la vida real, los libros estar√≠an disponibles en una DB) y finalmente validamos la respuesta asumiendo que el pedido es correcto.

* **jmacalupur** (2) [983627](https://platzi.com/comentario/983627/) 

	¬°Hasta que al fin sali√≥!.
	
	![Captura de Pantalla 2020-02-13 a la\(s\) 14.19.10.png](https://static.platzi.com/media/user_upload/Captura%20de%20Pantalla%202020-02-13%20a%20la%28s%29%2014.19.10-67708edc-c066-438f-a96f-b1901e42c975.jpg)

* **Rafael Carrillo** (2) [923285](https://platzi.com/comentario/923285/) 

	me comentaba un ing de la empresa que los primeros servicios fueron los curl despues los rest y luego los servicios soup, pero yo reo que lo que lleva de ganar en esta llevando la parada ahora son los microservici√≥s

* **David Santiago Gonz√°lez Ramos** (2) [872939](https://platzi.com/comentario/872939/) 

	Creo que se puede llevar muy bien si usan servicios como Postman o el plugin Rest Client de VS Code‚Ä¶ Es importante saber hacer las peticiones desde la consola, eso si. Pero creo que este tipo de herramientas optimizan y ayudan bastante el desarrollo de APIs

* **Valery Ibarra Iba√±ez** (2) [818342](https://platzi.com/comentario/818342/) 

	Me parece muy bueno el curso, lo √∫nico que no me gusta mucho es la combinaci√≥n del c√≥digo en ingl√©s y espa√±ol

* **juand_silva** (2) [675596](https://platzi.com/comentario/675596/) 

	Yo si dec√≠a que ten√≠a un c√≥digo PHP muy ordenado y es que da un curso de buenas pr√°cticas. Excelente.

* **EarHackerDem** (1) [1112252](https://platzi.com/comentario/1112252/) 

	A mi me daba error, no se por que pero mi consola le met√≠a los \ autom√°ticamente y as√≠ si funciono
	``` 
	    curl http://localhost:8000\?resource_type\=books  -v
	    
	```

* **Royer Guerrero Pinilla** (1) [1110944](https://platzi.com/comentario/1110944/) 

	Mi versi√≥n con Python y Flask
	``` 
	    from flask import Flask, jsonify, make_response
	    from flask_restful import Resource, Api
	    
	    app = Flask(__name__)
	    api = Api(app)
	    
	    books = [
	        {
	            'isbn': '744586',
	            'title': 'Cien a√±os de soledad',
	            'description': 'Lorem insup lol.',
	            'autor': 'Gabriel Garcia Marquez'
	        },
	        {
	            'isbn': '7894546',
	            'title': 'De animales a dioses',
	            'description': 'Lorem insup lol.',
	            'autor': 'Yuval Noah Harari'
	        }
	    ]
	    
	    classBooks(Resource):
	        defget(self):
	            return make_response(jsonify({'books': books}), 200)
	    
	    classAuthors(Resource):
	        pass
	    
	    classGeneres(Resource):
	        pass
	    
	    api.add_resource(Books, '/books')
	    api.add_resource(Authors, '/authors')
	    api.add_resource(Generes, '/generes')
	    
	    if __name__ == '__main__':
	        app.run(debug=True)
	    
	    
	```

* **Emmanuel Garc√≠a** (1) [1101705](https://platzi.com/comentario/1101705/) 

	Por si alguno le pasa que no hace match, si tienes zsh es probable que tu URL necesite (" ") si no, no funcionara.  
	![Screen Shot 2020-04-06 at 12.40.01.png](https://static.platzi.com/media/user_upload/Screen%20Shot%202020-04-06%20at%2012.40.01-ca0fd088-9005-4464-b780-c104d2c924fe.jpg)

* **Iv√°n Acosta** (1) [1095413](https://platzi.com/comentario/1095413/) 

	Que clase tan del carajo.!! Muy util

* **AnthonySQC** (1) [963268](https://platzi.com/comentario/963268/) 

	Buenas,  
	¬øpor que tras hacer ejecutar el curl, en el switch ejecuta el bloque de ‚ÄòGET‚Äô y no el de otra operaci√≥n?¬øSe toma ‚ÄòGET‚Äô por defecto?.  
	Un saludo.

	* **emmanuelpaternina** [963268] (5)

		Por defecto curl utiiliza GET si usas **-d** o **-F** curl usara POST, **-T** usara PUT.

* **Gtiseira** (1) [939617](https://platzi.com/comentario/939617/) 

	Alguien tiene este caso hecho en JS?

	* **Gtiseira** [939617] (3)

		Yo me valgo de Node con express, previamente tengo instalado nodemon (para poder realizar cambios y no tener que dar de baja al server y volverlo a subir para efectuar los cambios) body-parser para hacer lectura del body, y postman para poder ver los efectos.  
		C√≥digo:
		``` 
		    /* Traer express */
		    const express = require("express");
		    const bodyParser = require("body-parser");
		    const router = express.Router();
		     
		    varapp = express();
		    app.use(bodyParser.json());
		     
		    app.use(router);
		     
		    router.get("/", function(req, res) {
		      console.log(req.query);
		      console.log(req.body);
		     
		      res.send("Hola desde get y me actualizo con nodemon" + req.query.text);
		    });
		     
		    app.listen(3000);
		     
		    console.log("La aplicacion esta escuchando en http://localhost:3000");
		    
		    
		    
		```

	* **luisglopez7777** [939617] (1)

		Hola @Gitseria! De casualidad tienes el codigo de este curso en Node?

* **asanchez2091** (1) [900073](https://platzi.com/comentario/900073/) 

	Se que php todavia tiene bastante demanda pero admito que no tanto como antes. Aun asi vale la pena aprenderlo??

	* **Hafnio** [900073] (3)

		La demanda de otros lenguajes van creciendo tambien. Hoy en dia en casi todas las ofertas de trabajo piden conocimiento de Python y Javascript. Si te gusta la sintaxis de php te recomiendo que lo aprendas. Pero no parece que php vaya a recuparar popularidad a largo plazo. Conozco programadores cuyo trabajo a tiempo completo es solamente migrar codigo de php a Python. Hoy en dia parece Python y JS tienen un futuro prometedor, lamentablemente php no.

	* **asanchez2091** [900073] (1)

		Php no logro evolucionar =(

	* **lucas-moreno375** [900073] (1)
Los que dicen que PHP no a evolucionado es porque no saben nada de ese lenguaje. Actualmente con el servudor ngix se convierte en el segundo lenguaje interpretado mas rapido y si sabes usarlo con el motor de facebook hhvm se vuelve tan rapido como GO. La unica desventaja de PHP es con el real time, que es muy complejo hacerlo, sin embargo anunciaron que en la version 8 le van a a√±adir funcionalidades para real time y mejoraran su performance en un 15% lo que lo convertira en el lenguaje mas robusto, con mas comunidad y mayor performance que exista en el mercado para levantar backends.

* **EDGAR ROMERO BULA** (1) [716047](https://platzi.com/comentario/716047/) 

	f ($_SERVER[‚ÄòREQUEST_METHOD‚Äô] == ‚ÄòGET‚Äô)  
	{  
	if (isset($_GET[‚Äòidcliente‚Äô]))  
	{  
	//Mostrar un post  
	$sql = $dbConn->prepare(‚ÄúSELECT * FROM tblcliente where idcliente=:idcliente‚Äù);  
	$sql->bindValue(‚Äô:idcliente‚Äô, $_GET[‚Äòidcliente‚Äô]);  
	$sql->execute();  
	header(‚ÄúHTTP/1.1 200 OK‚Äù);  
	echo json_encode( $sql->fetch(PDO::FETCH_ASSOC) );  
	exit();  
	}  
	else {  
	//Mostrar lista de post  
	$sql = $dbConn->prepare(‚ÄúSELECT * FROM tblcliente‚Äù);  
	$sql->execute();  
	$sql->setFetchMode(PDO::FETCH_ASSOC);  
	header(‚ÄúHTTP/1.1 200 OK‚Äù);  
	echo json_encode( $sql->fetchAll() );  
	exit();  
	}  
	}
	
	// Crear un nuevo post  
	if ($_SERVER[‚ÄòREQUEST_METHOD‚Äô] == ‚ÄòPOST‚Äô)  
	{  
	$input = $_POST;  
	$sql = ‚ÄúINSERT INTO tblcliente  
	(identidad, nombres, email, clave)  
	VALUES  
	(:identidad, :nombres, :email, :clave)‚Äù;  
	$statement = $dbConn->prepare($sql);  
	bindAllValues($statement, $input);  
	$statement->execute();  
	$postId = $dbConn->lastInsertId();  
	if($postId)  
	{  
	$input[‚Äòidcliente‚Äô] = $postId;  
	header(‚ÄúHTTP/1.1 200 OK‚Äù);  
	echo json_encode($input);  
	exit();  
	}  
	}
	
	//Borrar  
	if ($_SERVER[‚ÄòREQUEST_METHOD‚Äô] == ‚ÄòDELETE‚Äô)  
	{  
	$identidad = $_GET[‚Äòidentidad‚Äô];  
	$statement = $dbConn->prepare(‚ÄúDELETE FROM tblcliente where identidad=:identidad‚Äù);  
	$statement->bindValue(‚Äô:identidad‚Äô, $identidad);  
	$statement->execute();  
	header(‚ÄúHTTP/1.1 200 OK‚Äù);  
	exit();  
	}
	
	//Actualizar  
	if ($_SERVER[‚ÄòREQUEST_METHOD‚Äô] == ‚ÄòPUT‚Äô)  
	{  
	$input = $_GET;  
	$postId = $input[‚Äòidcliente‚Äô];  
	$fields = getParams($input);
	``` 
	    $sql = "
	          UPDATE posts
	          SET $fields
	          WHERE idcliente='$postId'
	           ";
	    
	    $statement = $dbConn->prepare($sql);
	    bindAllValues($statement, $input);
	    
	    $statement->execute();
	    header("HTTP/1.1 200 OK");
	    exit();
	    
	```
	
	}
	
	//En caso de que ninguna de las opciones anteriores se haya ejecutado  
	header(‚ÄúHTTP/1.1 400 Bad Request‚Äù);
	
	?>

* **Jose Rodriguez Luis** (1) [675581](https://platzi.com/comentario/675581/) 

	$_SERVER[‚ÄòREQUEST_METHOD‚Äô];  
	php -S localhost:7000 exp-services.php  
	curl <http://localhost:7000?resource_type=books> -v

* **Julian Sanchez** (1) [76279](https://platzi.com/comentario/884349/) 
Al colocar ‚Äúcurl http://localhost:8000/?resource_type=books -v‚Äù me salta el err...

	* **asanchez2091** [76279] (1)

		AL parecer no encuentra nada cuando curl hace una consulta

* **FizIrvin** (1) [71998](https://platzi.com/comentario/808072/) 
dentro de los 4 verbos principales de HTTP ¬øcu√°les son las variantes de cada uno?

	* **Juan David Castro (Platzi)** [71998] (4)

		Disculpa, no entiendo muy bien tu pregunta. ¬øTe refieres a la diferencia entre los 4 m√©todos principales de HTTP?
		
		![HTTP METHODS](https://www.researchgate.net/profile/Motaz_Saad/publication/50367401/figure/tbl2/AS:650417440567297@1532083010504/HTTP-Methods-and-their-Corresponding-CRUD-Action.png)

* **JuanJGT** (1) [65588](https://platzi.com/comentario/694241/) 
Buenas noches Al momento de ejecutar: curl http://localhost:8000?resource_type=books<...

	* **Mauro Chojrin** [65588] (1)

		Hay que ver primero que nada c√≥mo inciaste tu servidor web, luego c√≥mo est√°s haciendo las inclusiones de tus archivos

* **Francisco Mellado** (1) [64570](https://platzi.com/comentario/678398/) 
hola ‚Ä¶ necesito de tu ayuda. te comento que realice la prueba con el ejercicio que pruebas en el minuto 6:00 . pero cuando levanto el ser...

	* **Mauro Chojrin** [64570] (1)

		Veo que en la respuesta que recibes hay HTML‚Ä¶ ¬øeso forma parte de tu archivo uno.php o de d√≥nde sale?

## 0070. Exponer un recurso en particular a trav√©s de HTTP GET [21617](https://platzi.com/clases/1638-api-rest/21617-exponer-un-recurso-en-particular-a-traves-de-http-/)

### Descripci√≥n:


### Comentarios:

* **SistemasCBC** (18) [674078](https://platzi.com/comentario/674078/) 

	Les dejo el codigo del Router.
	``` 
	    <?php
	    
	    $matches=[];
	    if(preg_match('/\/([^\/]+)\/([^\/]+)/',$_SERVER["REQUEST_URI"],$matches))
	    {
	        $_GET['resource_type']=$matches[1];    
	        $_GET['resource_id']=$matches[2];
	        error_log(print_r($matches,1));
	        require 'server.php';
	    }elseif(preg_match('/\/([^\/]+)\/?/',$_SERVER["REQUEST_URI"],$matches))
	    {
	        $_GET['resource_type']=$matches[1];        
	        error_log(print_r($matches,1));
	        require 'server.php';
	    }else
	    {
	        error_log('No matches');
	        http_response_code(404);
	    }
	    
	    ?>
	    
	```

* **guriffo** (6) [877533](https://platzi.com/comentario/877533/) 

	Archivo server.php
	``` 
	    <?php
	    
	    // Definimos los recursos disponibles
	    $allowedResourceType = [
	        'books',
	        'authors',
	        'genres',
	    ];
	    
	    // Validamos que el recurso este disponible
	    $resourceType = $_GET['resource_type'];
	    
	    if ( !in_array($resourceType, $allowedResourceType)) {
	        die;
	    }
	    
	    // Defino los recursos
	    $books = [
	        1 => [
	            'titulo' => 'Lo que el viento se llevo',
	            'id_autor' => 2,
	            'id_genero' => 2,
	        ],
	        2 => [
	            'titulo' => 'La Iliada',
	            'id_autor' => 1,
	            'id_genero' => 1,
	        ],
	        3 => [
	            'titulo' => 'La Odisea',
	            'id_autor' => 1,
	            'id_genero' => 1,
	        ],
	    ];
	    
	    // Se indica al cliente que lo que recibir√° es un json
	    header('Content-Type: application/json');
	    
	    // Levantamos el id del recurso buscado
	    $resourceId = array_key_exists('resource_id', $_GET) ? $_GET['resource_id']:'';
	    
	    // Generamos la respuesta asumiendo que el pedido es correcto
	    switch( strtoupper($_SERVER['REQUEST_METHOD']) ) {
	        case 'GET':
	             if ( empty( $resourceId ) ){
	                echo json_encode( $books );
	             }else{
	                if( array_key_exists( $resourceId, $books) ){
	                    echo json_encode( $books[ $resourceId ] );
	                }
	            }
	            break;
	        case 'POST':
	            break;
	        case 'PUT':
	            break;
	        case 'DELETE':
	            break;
	    }
	    
	```
	
	Consulta:
	``` 
	    $curl "http://localhost:8000?resource_type=books&resource_id=1"
	    
	```
	
	Archivo router.php
	``` 
	    <?php
	    
	    $matches=[];
	    if(preg_match('/\/([^\/]+)\/([^\/]+)/',$_SERVER["REQUEST_URI"],$matches))
	    {
	        $_GET['resource_type']=$matches[1];    
	        $_GET['resource_id']=$matches[2];
	        error_log(print_r($matches,1));
	        require 'server.php';
	    }elseif(preg_match('/\/([^\/]+)\/?/',$_SERVER["REQUEST_URI"],$matches))
	    {
	        $_GET['resource_type']=$matches[1];        
	        error_log(print_r($matches,1));
	        require 'server.php';
	    }else
	    {
	        error_log('No matches');
	        http_response_code(404);
	    }
	    
	    ?>
	    
	```
	
	Consulta:
	``` 
	    $ curl http://localhost:8000/books/1
	    
	```

* **SistemasCBC** (5) [674025](https://platzi.com/comentario/674025/) 

	para aquellos que no entendieron la linea:
	``` 
	    $resourceId=array_key_exists('resource_id',$_GET)?$_GET['resource_id']:'';
	    
	```
	
	es un operador ternario.  
	que es igual a escribir esto:
	``` 
	    if(array_key_exists(‚Äòresource_id‚Äô,$_GET))
	    {
	    $resourceId=‚Äô$_GET[‚Äòresource_id];
	    }else
	    {
	    $resourceId=‚Äô‚Äô;
	    }
	    
	    
	```

* **Christian David S√°nchez** (4) [763291](https://platzi.com/comentario/763291/) 

	La operaci√≥n del if en la misma linea se usa con el operador mas conocido como operador ternario.
	
	Ejemplo en c#:
	``` 
	    intinput = new Random().Next(-5, 5);
	    string classify;
	    
	    **If Normal**
	    if (input >= 0)
	    {
	        classify = "nonnegative";
	    }
	    else
	    {
	        classify = "negative";
	    }
	    
	    **Operador Ternario**
	    classify = (input >= 0) ? "nonnegative" : "negative";
	    
	```

* **Aar√≥n Anibal Ramirez Herrera** (4) [694785](https://platzi.com/comentario/694785/) 

	Para los que est√©n corriendo en localhost tienen que agregar mas opciones a la condicional  
	en esta parte :  
	preg_match(‚Äô//([^/]+)/([^/]+)/([^/]+)/([^/]+)/‚Äô
	
	antes del ultimo slash -> /  
	agregar: /([^/]+)  
	por cada directorio adicional que tengan

* **Carlos Andres Casta√±eda Osorio** (4) [693408](https://platzi.com/comentario/693408/) 

	Para escapar el caracter **& (Ampersand)** en el CMD de windows se utiliza el caracter **^**. Por lo que la petici√≥n completa quedar√≠a de la siguiente manera:
	``` 
	    curl http://localhost:8000?resource_type=books^&resource_id=2 | jq
	    
	```

* **Emmanuel Garc√≠a** (3) [1101853](https://platzi.com/comentario/1101853/) 

	Si tienes problemas con ‚Äújp‚Äù y estas en Mac, instala.
	``` 
	    brew install jq
	    
	```
	
	[Link](https://blog.mapillary.com/technology/2014/08/12/jq-power.html) de donde lo resolv√≠

	* **Royer Guerrero Pinilla** [1101853] (2)

		En el caso de Ubuntu/Debian üêß
		``` 
		    sudo apt-get install jq
		    
		```

* **JulioCardenasR** (3) [845061](https://platzi.com/comentario/845061/) 

	Este video es oro puro.  
	La conversion a url amigables esta hecha de manera sencilla y precisa.  
	@beco tiene un curso, aqui en platzi, de expresiones regulares muy bueno, para comprender a fondo las lineas del preg_match

* **Israel Yance** (3) [673847](https://platzi.com/comentario/673847/) 

	Consulta de un recurso en particular:  
	`$ curl "http://localhost:800?resource_type=books&resource_id=1"`
	
	Rest propone: **<http://dominio.com/book/1>**  
	`$ curl http://localhost:8000/books/1`

* **FizIrvin** (2) [808089](https://platzi.com/comentario/808089/) 

	preg_match para url amigable

* **Abrahanco** (2) [791629](https://platzi.com/comentario/791629/) 

	el micr√≥fono es muy potente‚Ä¶ me distrae como traga saliva al hablar XD

* **Ivan Mendez** (2) [768882](https://platzi.com/comentario/768882/) 

	hubiese sido bueno que hubieras dejado el codigo del Route en los marcadores
	
	Por otra parte con laravel ya configura la ruta de un CRUD para que la URL sea **[midominio.com/book/1](http://midominio.com/book/1)** con esta linea en web.php
	``` 
	    Route::resource('book','BooksController');
	    
	    
	```

* **juand_silva** (2) [675618](https://platzi.com/comentario/675618/) 

	Excelente clase ahora entiendo el porqu√© de esas urls poco amigables, que no sirven para SEO.

* **Royer Guerrero Pinilla** (1) [1111057](https://platzi.com/comentario/1111057/) 

	Versi√≥n con python
	``` 
	    from flask import Flask, jsonify, make_response
	    from flask_restful import Resource, Api, abort
	    
	    app = Flask(__name__)
	    api = Api(app)
	    
	    BOOKS = {
	        '1': {
	            'isbn': '744586',
	            'title': 'Cien a√±os de soledad',
	            'description': 'Lorem insup lol.',
	            'autor': 'Gabriel Garcia Marquez'
	        },
	        '2': {
	            'isbn': '7894546',
	            'title': 'De animales a dioses',
	            'description': 'Lorem insup lol.',
	            'autor': 'Yuval Noah Harari'
	        }
	    }
	    
	    defabort_if_book_doesnt_exits(book_id):
	        if book_id notin BOOKS:
	            abort(404, message='El libro con id {} no existe'.format(book_id))
	    
	    classBookList(Resource):
	        defget(self):
	            return jsonify({'data': BOOKS})
	    
	    classBook(Resource):
	        defget(self, book_id):
	                abort_if_book_doesnt_exits(book_id)
	                return jsonify({'data': BOOKS[book_id]})
	    
	    classAuthors(Resource):
	        pass
	    
	    classGeneres(Resource):
	        pass
	    
	    api.add_resource(BookList, '/books')
	    api.add_resource(Book, '/books/<book_id>')
	    api.add_resource(Authors, '/authors')
	    api.add_resource(Generes, '/generes')
	    
	    if __name__ == '__main__':
	        app.run(debug=True)
	    
	    
	```

	* **Daniel Boullon** [1111057] (1)

		Muy buena Royer!!! me sivi√≥ mucho tu codigo‚Ä¶ aunque le agregue unas mejoras para que se parezca mas al del ejemplo:
		``` 
		    from flask import Flask, jsonify, make_response
		    from flask_restful import Resource, Api, abort
		    
		    app = Flask(__name__)
		    api = Api(app)
		    
		    books = {
		        '1': {
		            'isbn': '744586',
		            'title': 'Cien a√±os de soledad',
		            'description': 'Lorem insup lol.',
		            'autor': 'Gabriel Garcia Marquez'
		        },
		        '2': {
		            'isbn': '7894546',
		            'title': 'De animales a dioses',
		            'description': 'Lorem insup lol.',
		            'autor': 'Yuval Noah Harari'
		        }
		    }
		    
		    defabort_if_book_doesnt_exist(book_id):
		        if book_id notin books:
		            abort(404, message='El libro con ID {} no existe'.format(book_id))
		    
		    
		    classBookList(Resource):
		        defget(self):
		            return jsonify(books)
		    
		    
		    classBook(Resource):
		        defget(self, book_id):
		            abort_if_book_doesnt_exist(book_id)
		            return make_response( jsonify(books[book_id]), 200 )
		    
		    
		    classAuthors(Resource):
		        pass
		    
		    
		    classGenres(Resource):
		        pass
		    
		    
		    api.add_resource(BookList, '/books')
		    api.add_resource(Book, '/books/<book_id>')
		    api.add_resource(Authors, '/authors')
		    api.add_resource(Genres, '/genres')
		    
		    
		    if __name__ == '__main__':
		        app.run(debug=True)
		    
		```

* **Iv√°n Acosta** (1) [1103521](https://platzi.com/comentario/1103521/) 

	Del carajo esta clase.! Es como hacer una autopsia al c√≥digo, as√≠ se aprende medicina.! Excelente.

* **Cristhian Edwin Ortiz Mercado** (1) [1072086](https://platzi.com/comentario/1072086/) 

	Buenas, algun lugar donde pueda entender mas sobre lo que hizo aca , documentacion o o video?
	``` 
	    if (preg_match('/\/([^\/]+)\/([^\/]+)/', $_SERVER["REQUEST_URI"], $matches)) {
	        $_GET['resource_type'] = $matches[1];
	        $_GET['resource_id'] = $matches[2];
	    
	        error_log( print_r($matches, 1) );
	        require 'server.php'; 
	    }elseif(preg_match('/\/([^\/]+)\/?/', $_SERVER["REQUEST_URI"], $matches)){
	        $_GET['resource_type'] = $matches[1];
	        error_log( print_R($matches, 1));
	    
	        require('server.php');
	    }else{
	    
	        error_log('No matches');
	        http_response( 404 );
	    }```
	    
	```

	* **neontigermx** [1072086] (1)

		Hay un curso de expresiones regulares aqu√≠ mismo en platzi.

* **Enrique Felix Garcia Stave** (1) [1030642](https://platzi.com/comentario/1030642/) 

	 **Apuntes:**  
	Basicamente la expresion regular evalua, si despues de la primera barra de la URL, existe cualquier conjunto de caracteres que permita una URL, y luego repite el mismo proceso en caso de que haya un par√°metro despues de una segunda barra, en caso tal de que no haya una segunda barra, solamente capturar√° lo contenido despues de la primera barra (que seria el parametro y en este caso, el parametro de books.
	
	**NOTA:** En el caso de usar IIS, debemos crear un archivo .htaccess para la reescritura de URL

* **jmacalupur** (1) [983659](https://platzi.com/comentario/983659/) 

	¬°Excelente!, ver el uso de las expresiones regulares.

* **Cristhian Franco** (1) [953767](https://platzi.com/comentario/953767/) 

	Pagina donde se ense√±a todo sobre expresiones regulares, esta en ingles:
	
	<https://www.regular-expressions.info/tutorial.html>

* **Jhon Alexander Romero Gonzaga** (1) [904947](https://platzi.com/comentario/904947/) 

	[Curso de expresinones reulares](https://platzi.com/clases/expresiones-regulares/)

* **Emerson Cede√±o Salazar** (1) [712885](https://platzi.com/comentario/712885/) 

	clase de implementaci√≥n de **URLs amigables**!, ni me pregunten c√≥mo lo hubiera hecho yo _(shame on me)_ , hubiera buscado cosas como: verificaci√≥n de `mod_rewrite` de Apache, inclusi√≥n de `.htaccess`, par de l√≠neas en este archivo, luego otras para que coincidiera con los par√°metros correspondientes con los recursos a consultar ‚Ä¶ qu√© va!, pero qu√© bueno que estamos aqu√≠ aprendiendo y actualiz√°ndonos! ü§ìüòäüòÅ

	* **oachon** [712885] (1)

		```
		    RewriteEngine On
		    
		    RewriteBase /platzi/
		    
		    RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)$ clase7.php?resource=$1&resource_id=$2
		    RewriteRule ^([a-zA-Z0-9_-]+)/([a-zA-Z0-9_-]+)/$ clase7.php?resource=$1&resource_id=$2```
		    
		```

* **Juan Sebasti√°n Joya Rodr√≠guez** (1) [684511](https://platzi.com/comentario/684511/) 

	tambien se puede (y es lo que a nosotros los novatos nos funciona mucho) if (isset($_GET['resource_id])){ $id = $_GET['resource_id'] }else{ $id = "" }

* **alvarovicentesanz** (1) [79879](https://platzi.com/comentario/948508/) 
Hola a tod@s, Tengo un problema con ‚Äòresource_id‚Äô, al hacer la petici√≥n me dice: ‚Äúresource_id‚Äù no se reconoce como un comando interno...

	* **Jeronimo_T** [79879] (1)

		Esto es debido a que no estas poniendo la petici√≥n entre **comillas** y la consola al ver el s√≠mbolo **&** piensa que vas a introducir un nuevo comando.

* **Cristian Alejandro Ortiz Solano** (1) [77695](https://platzi.com/comentario/908086/) 
Para los que estan usando sub carpetas tienen que sumar uno mas al matches <?php $matches=[]; if(preg_match('/...

	* **Cristhian Edwin Ortiz Mercado** [77695] (1)

		hola tocayo jajaja

* **David Isaac Flores Medrano** (1) [72803](https://platzi.com/comentario/822909/) 
No me esta funcionando este c√≥digo: Yo elegi el puerto 7000 curl "http:localhost:7000\?resource_type\=books\&resource_id\=1" ``...

	* **Juan David Castro (Platzi)** [72803] (2)

		Hola. Veo diferentes problemas: usas **`\`** en lugar de **`/`** y usas **`\=`** en lugar de solo **=**. Prueba cambiando lo que te digo y nos avisas si funciona. üòâ

* **Ivan Mendez** (1) [70094](https://platzi.com/comentario/768891/) 
6:43 como haces el autocompletado en la consola de linux?

	* **Alvez Gerardo** [70094] (3)

		lo hace con tabulador (tecla tab), el curso de [terminal y linea de comandos](https://platzi.com/clases/terminal/) te ayuda!

* **viljem** (1) [65172](https://platzi.com/comentario/687010/) 
cuando quiero utilizar el Router el navegador me dice que la URL no existe como si fuera una carpeta ‚Äúbooks‚Äù. 

	* **caramirezc** [65172] (2)

		hola @viljemp puede compartir la respuesta de su comando curl?

## 0080. Incorporar datos a trav√©s de HTTP POST [21618](https://platzi.com/clases/1638-api-rest/21618-incorporar-datos-a-traves-de-http-post/)

### Descripci√≥n:


### Comentarios:

* **bynico** (8) [709485](https://platzi.com/comentario/709485/) 

	Para los que usan Windows, pueden usar el la consola de Ubuntu TLS para windows, que esta disponible en la store, asi se facilitan 10 a√±os la vida y no tienen que hacer inventos raros para que funcione.
	
	pd: pasense a linux, el mundo de programador es mas bonito desde este lado jaja

	* **Christian David S√°nchez** [709485] (1)

		Gracias por la recomendaci√≥n.

	* **Ivan Mendez** [709485] (2)

		x2 tengo 8 meses usando linux, en general tengo menos problemas con el software que con windows

	* **william andres rodriguez borja** [709485] (2)

		la verdad llevo 3 a√±os el linux y hace poco pase a windows por que mi intellij web storm se comian la memoria siendo un i9 y 12 gb en ram y en windows a funcionado mejor.  
		Pero la consola de ubuntu es la consola. pero ubuntu no la siento como una distribucion de escritorio robusta.

* **Franklin Rosas** (7) [700806](https://platzi.com/comentario/700806/) 

	El problema con CMD de Windows est√° en que no soporta comillas simples, por lo tanto, debemos sustituir su uso por comillas dobles.  
	Para incluir los datos en json tenemos dos opciones:
	
	* Podemos usar el caracter de escape backslash ( \ ) antes de cada comilla dentro de los datos JSON:
	
	
	``` 
	    curl -X "POST" http://localhost:8000/books -d "{ \"titulo\":\"Nuevo Libro\",\"id_autor\": 1,\"id_genero\": 2}"
	    
	```
	
	* Tambi√©n podemos mover los datos json a un archivo de tipo .txt y cambiar el cURL para que importe los datos JSON a trav√©s de la sintaxis @filename:
	
	
	``` 
	    {
	        "Titulo": "Libro Nuevo",
	        "id_autor": 1,
	        "id_genero": 2
	    }
	    
	```
	
	Recuerda cambiar tu directorio a donde esta contenido el archivo json.txt (con el comando cd ) antes de realizar esta acci√≥n.
	``` 
	    curl -X "POST" http://localhost:8000/books -d @json.txt
	    
	```

	* **Christian David S√°nchez** [700806] (1)

		Gracias por tu aporte üòÆ

	* **JesusRR** [700806] (1)

		Gracias por la explicaci√≥n!

* **Ivan Lopez** (5) [675430](https://platzi.com/comentario/675430/) 

	Para enviar un Json por CMD de Windows, sustituimos lo que debe llegar con comillas dobles, con doble comillas dobles:
	
	curl -X ‚ÄúPOST‚Äù <http://localhost:8000/books> -d ‚Äú{‚Äù‚Äútitulo‚Äù":"‚ÄúNuevo Libro‚Äù","‚Äúid_autor‚Äù":1,"‚Äúid_genero‚Äù":2}"

	* **Juan Sebasti√°n Joya Rodr√≠guez** [675430] (1)

		Muchas gracias por tu aporte, funcion√≥ muy bien

* **MarlaCpp** (4) [958610](https://platzi.com/comentario/958610/) 

	Lo que va de la clase:
	``` 
	    <?php
	    // CLASE 06 - Exponer datos a traves de HTTP GET
	    // definimos los recursos disponibles 
	    
	    $allowedResourceTypes = [
	        'books',
	        'authors',
	        'genres'
	    ];
	    
	    $resourceType = $_GET['resource_type'];
	    
	    if( !in_array($resourceType, $allowedResourceTypes)){
	        die;
	    }
	    
	    // Defino los recursos
	    $books = [
	        1 => [
	            'titulo' => 'Lo que el viento se llevo',
	            'id_autor' => 2,
	            'id_genero' => 2,
	        ],
	        2 => [
	            'titulo' => 'La Iliada',
	            'id_autor' => 1,
	            'id_genero' => 1,
	        ],
	        3 => [
	            'titulo' => 'La Odisea',
	            'id_autor' => 1,
	            'id_genero' => 1,
	        ],
	    ];
	    
	    // Se indica al cliente que lo que recibir√° es un json
	    header('Content-Type: application/json');
	    // Levantamos el id del recurso buscado
	    $resourceId = array_key_exists('resource_id', $_GET) ? $_GET['resource_id']:'';
	    
	    // Generamos la respuesta asumiendo que el pedido es correcto y devilvemos en formafo json
	    switch( strtoupper($_SERVER['REQUEST_METHOD']) ) {
	        case 'GET':
	            // en caso de que no pidan ningun recurso
	             if ( empty( $resourceId ) ){
	                echo json_encode( $books );
	             }else{
	                 // si llegan a pedir un recurso en especifico
	                if( array_key_exists( $resourceId, $books) ){
	                    echo json_encode( $books[ $resourceId ] );
	                }
	            }
	            break;
	        case 'POST':
	            $json = file_get_contents('php://input');
	            $books[] = json_decode($json, true);
	            // echo array_keys( $books )[count($books) -1];
	            echo json_encode($books);
	            break;
	        case 'PUT':
	            break;
	        case 'DELETE':
	            break;
	    }
	    
	    
	    
	    // Inicio el servidor en la terminal 1, aqui le asignamos el puerto 8000
	    // php -S localhost:8000 server.php
	    
	    // Terminal 2 ejecutar 
	    // curl http://localhost:8000 -v
	    // curl http://localhost:8000/\?resource_type\=books
	    // curl http://localhost:8000/\?resource_type\=books | jq
	    // ver la comunicacion a trav√©s de los encabezados:
	    // $ curl http://localhost:8000/\?resource_type\=books -v > /dev/null
	    // consulta
	    //$curl "http://localhost:8000?resource_type=books&resource_id=1"
	    //curl -X 'POST' http://localhost:8000/books -d '{"titulo":"Nuevo Libro","id_autor":1,"id_genero":2}'
	    ?>
	    
	```

* **Luis Rangel Castro** (4) [774813](https://platzi.com/comentario/774813/) 

	Mac:
	``` 
	    curl -X 'POST' http://localhost:8000/books -d '{"titulo":"Nuevo Libro","id_autor":1,"id_genero":2}' | jq
	    
	```

* **Christian David S√°nchez** (3) [763337](https://platzi.com/comentario/763337/) 

	Mi primer post con php :v

	* **Freddy C√≥rdova Arana** [763337] (1)

		Estamos igual, mis primeros pasos de frontend a backend üò≠

* **Enrique Felix Garcia Stave** (2) [1032339](https://platzi.com/comentario/1032339/) 

	 **Apuntes:**  
	Para el caso de POST, debemos validar dentro de la sentencia switch en el caso de que el verbo en la petici√≥n sea POST. Debemos asumir que los datos enviados, vengan en formato JSON, tipo de datos que definir√≠amos en primera instancia al crear nuestro web service.  
	Al momento de hacer la consulta mediante CURL, usamos a diferencia de GET, el modificador X luego del curl, seguido de esto, especificamos con ‚ÄòPOST‚Äô, seguido escribimos la URL, el puerto y el identificador al que queremos agregar el elemento (en este caso books). Finalmente escribimos el modificador -d y escribimos la cadena JSON con los datos que vamos a almacenar.  
	**IMPORTANTE**  
	Para los que no les funcion√≥ con el CMD de Windows, prueben de esta manera:  
	`curl -H "Content-Type: application/json" -X POST -d "{ \"titulo\":\"Nuevo Libro\",\"id_autor\": 1,\"genero\": 2}" http://localhost:8000/books`

* **egop** (2) [1002453](https://platzi.com/comentario/1002453/) 

	Si en Windows no les funciono los aportes anteriores, aqui dejo el mio que me funciono correctamente desde una terminal de Powershell‚Ä¶
	``` 
	    $datos = "{\"titulo\": \"El nuevo libro\",\"id_autor\":\"1\",\"id_genero\":\"2\"}"	
	    
	```
	``` 
	    $resultado = Invoke-WebRequest -Method Post -Uri http://localhost:8000/books -body  $datos
	    
	```
	``` 
	    $resultado.content
	    
	```
	
	Salud2

* **Rafael Carrillo** (2) [924104](https://platzi.com/comentario/924104/) 

	Exelente y con estas bases ya estoy aprendiendo a prober los servicios en post man

* **Daniel Boullon** (1) [1117130](https://platzi.com/comentario/1117130/) 

	Sigo con el codigo en Python 3‚Ä¶ agregue POST:
	``` 
	    from flask import Flask, jsonify, make_response
	    from flask_restful import Resource, Api, abort, request
	    
	    app = Flask(__name__)
	    api = Api(app)
	    
	    books = {
	        '1': {
	            'isbn': '744586',
	            'title': 'Cien a√±os de soledad',
	            'description': 'Lorem insup lol.',
	            'autor': 'Gabriel Garcia Marquez'
	        },
	        '2': {
	            'isbn': '7894546',
	            'title': 'De animales a dioses',
	            'description': 'Lorem insup lol.',
	            'autor': 'Yuval Noah Harari'
	        }
	    }
	    
	    defabort_if_book_doesnt_exist(book_id):
	        if book_id notin books:
	            abort(404, message='El libro con ID {} no existe'.format(book_id))
	    
	    
	    classBookList(Resource):
	        defget(self):
	            return jsonify(books)
	    
	        defpost(self):
	            json = request.get_json(force=True)
	            index = len(books) + 1
	            books.update( {'{}'.format(index): json })
	            return'Libro agregado correctamente con ID: ' + str(index)
	    
	    
	    classBook(Resource):
	        defget(self, book_id):
	            abort_if_book_doesnt_exist(book_id)
	            return make_response( jsonify(books[book_id]), 200 )
	    
	    
	    classAuthors(Resource):
	        pass
	    
	    
	    classGenres(Resource):
	        pass
	    
	    
	    api.add_resource(BookList, '/books')
	    api.add_resource(Book, '/books/<book_id>')
	    api.add_resource(Authors, '/authors')
	    api.add_resource(Genres, '/genres')
	    
	    
	    if __name__ == '__main__':
	        app.run(debug=True)
	    
	```

* **A√±aqui Apolinar Morales** (1) [1114110](https://platzi.com/comentario/1114110/) 

	Me encontre que como no cambie la ruta, osea que todavia tengo que mandar la url completa especificando los parametros no me mostraba nada, me di cuenta de esto a la mitad de del ejeercicio, les cuento esto para que aprendan a debugear y asi se daran cuenta que tanto han aprendido y lo que pueden reforzar es unexcelente ejercicio para comprender un poco mas el tema que estan viendo

* **Royer Guerrero Pinilla** (1) [1111073](https://platzi.com/comentario/1111073/) 

	Quien necesita postman o insonmia cuando tiene curl üë®‚Äçüíª

* **gabriel-calero-gutierrez** (1) [974094](https://platzi.com/comentario/974094/) 

	Hasta ac√° llego, mi inter√©s son las API. Si bien se puede aprender con cualquier lenguaje de programaci√≥n, Python es mucho m√°s amigable y claro, no me interesaba PHP‚Ä¶

* **abrahamaquinoe** (1) [692828](https://platzi.com/comentario/692828/) 

	A mi me funcion√≥ de esta manera:  
	curl -X POST <http://localhost:8000/books> -d ‚Äú{ ‚Äútitulo‚Äù: ‚ÄúNuevo Libro‚Äù, ‚Äúid_autor‚Äù: 2, ‚Äúid_genero‚Äù: 4}‚Äù
	
	Tengo curl 7.55.1 (Windows) libcurl/7.55.1 WinSSL

* **Israel Yance** (1) [673876](https://platzi.com/comentario/673876/) 

	Incorporar datos a trav√©s de HTTP POST:  
	`$ curl -X 'POST' http://localhost:8000/books -d '{ "titulo": "Nuevo Libro", "id_autor": 1, "id_genero": 2 }'`  
	X ‚ÄòPOST‚Äô: se usa el modificador -X y se especifica el pedido POST
	
	* d: modificador para indicar la informaci√≥n que se va a agregar
	
	

* **nova12** (1) [74935](https://platzi.com/comentario/861486/) 
Tengo una pregunta , en un caso real, si tengo una aplicaci√≥n web y conecto mi pagina a trav√©s de ajax , lo aria con la url del archivo ...

	* **jemc300x** [74935] (1)

		si por ejemplo tienes un archivo llamado <http://tuweb.com/api.php> y este devuelve un json, f√°cilmente puedes consumirlo a trav√©s de ajax.

* **Fanor Camacho** (0) [981299](https://platzi.com/comentario/981299/) 

	Esto funciono para mi en Windows‚Ä¶
	``` 
	    curl -d '{\"title\": \"Frodo\",  \"id_author\" : \"Baggins\",\"id_gender\" : \"Thriller\" }' -H "Content-Type:application/json" -X POST http://localhost:8000/books```
	    
	```

## 0090. Modificar datos a trav√©s de HTTP PUT [21619](https://platzi.com/clases/1638-api-rest/21619-modificar-datos-a-traves-de-http-put/)

### Descripci√≥n:


Es importante recordar que el m√©todo PUT hace un reemplazo, no modificaciones puntuales. Por ello la informaci√≥n que enviemos a trav√©s de la petici√≥n debe ser completa.

### Comentarios:

* **Luis Rangel Castro** (4) [774827](https://platzi.com/comentario/774827/) 

	PATCH
	
	HTTP PUT method only allows a complete replacement of a document. A PATCH request on the other hand, is used to make changes to part of the resource at a location. That is, it PATCHES the resource ‚Äî changing its properties. It is used to make minor updates to resources and it‚Äôs not required to be idempotent.

* **MarlaCpp** (3) [958651](https://platzi.com/comentario/958651/) 

	C√≥digo de la clase, M√©todo PUT
	``` 
	    <?php
	    
	    $allowedResourceTypes = [
	        'books',
	        'authors',
	        'genres'
	    ];
	    
	    $resourceType = $_GET['resource_type'];
	    
	    if( !in_array($resourceType, $allowedResourceTypes)){
	        die;
	    }
	    
	    // Defino los recursos
	    $books = [
	        1 => [
	            'titulo' => 'Lo que el viento se llevo',
	            'id_autor' => 2,
	            'id_genero' => 2,
	        ],
	        2 => [
	            'titulo' => 'La Iliada',
	            'id_autor' => 1,
	            'id_genero' => 1,
	        ],
	        3 => [
	            'titulo' => 'La Odisea',
	            'id_autor' => 1,
	            'id_genero' => 1,
	        ],
	    ];
	    
	    // Se indica al cliente que lo que recibir√° es un json
	    header('Content-Type: application/json');
	    // Levantamos el id del recurso buscado
	    $resourceId = array_key_exists('resource_id', $_GET) ? $_GET['resource_id']:'';
	    
	    // Generamos la respuesta asumiendo que el pedido es correcto y devilvemos en formafo json
	    switch( strtoupper($_SERVER['REQUEST_METHOD']) ) {
	        case 'GET':
	            // en caso de que no pidan ningun recurso
	             if ( empty( $resourceId ) ){
	                echo json_encode( $books );
	             }else{
	                 // si llegan a pedir un recurso en especifico
	                if( array_key_exists( $resourceId, $books) ){
	                    echo json_encode( $books[ $resourceId ] );
	                }
	            }
	            break;
	        case 'POST':
	            $json = file_get_contents('php://input');
	            // transformamos el json recibido a un nuevo elemento del arreglo
	            $books[] = json_decode($json, true);
	            // emitimos hacia la salida la ultima clave del arreglo de los libros
	            // echo array_keys( $books )[count($books) -1];
	            echo json_encode($books);
	            break;
	        case 'PUT':
	            //validamos que el recurso buscado exista
	            if (!empty($resourceId) && array_key_exists($resourceId, $books)){
	                // Tomamos la entrada cruda
	                $json = file_get_contents('php://input');
	                 // transformamos el json recibido a un nuevo elemento del arreglo
	                $books[$resourceId] = json_decode($json, true);
	                // Retornamos la coleccion modificada en formato json
	                echo json_encode($books);
	            }
	            break;
	        case 'DELETE':
	            break;
	    }
	    
	    
	    
	    // Inicio el servidor en la terminal 1, aqui le asignamos el puerto 8000
	    // php -S localhost:8000 server.php
	    
	    // Terminal 2 ejecutar 
	    // curl http://localhost:8000 -v
	    // curl http://localhost:8000/\?resource_type\=books
	    // curl http://localhost:8000/\?resource_type\=books | jq
	    // ver la comunicacion a trav√©s de los encabezados:
	    // $ curl http://localhost:8000/\?resource_type\=books -v > /dev/null
	    // consulta
	    //$curl "http://localhost:8000?resource_type=books&resource_id=1"
	    // M√©todo POST
	    //curl -X 'POST' http://localhost:8000/books -d '{"titulo":"Nuevo Libro","id_autor":1,"id_genero":2}'
	    // M√©todo Put - el recurso 1 ser√° reemplazado por el libro que estoy creando
	    // $ curl -X 'PUT' http://localhost:8000/books/1 -d '{"titulo": "Nuevo Libro", "id_autor": 1, "id_genero": 2}'
	    ?>
	    
	```

* **Christian David S√°nchez** (3) [763378](https://platzi.com/comentario/763378/) 

	GET para obtener un recurso del servidor del servidor  
	POST para actualizar un recurso del servidor  
	PUT para crear un recurso del servidor  
	DELETE para eliminar un recurso del servidor

	* **william andres rodriguez borja** [763378] (5)

		te quedo cruzado post y put

	* **Christian David S√°nchez** [763378] (1)

		Upps cierto.  
		POST para crear un recurso del servidor  
		PUT para actualizar un recurso del servidor

* **Israel Yance** (3) [673892](https://platzi.com/comentario/673892/) 

	El m√©todo PUT hace reemplazos, la informaci√≥n se debe de enviar completa.  
	Petici√≥n:  
	`$ curl -X 'PUT' http://localhost:8000/books/1 -d '{"titulo": "Nuevo Libro", "id_autor": 1, "id_genero": 2}'`

* **Jhon Alexander Romero Gonzaga** (2) [907208](https://platzi.com/comentario/907208/) 

	Con un poco de lectura en el codigo, se comprende mejor.

* **Aar√≥n Anibal Ramirez Herrera** (2) [694932](https://platzi.com/comentario/694932/) 

	```
	    curl -i -X PUT-H"Content-Type: application/json" -d"{""titulo"":""EL LOBO DE WALL STREET"",""id_autor"":5,""id_genero"":6}" http://localhost/api_rest/route.php/books/1
	    
	```

* **A√±aqui Apolinar Morales** (1) [1114096](https://platzi.com/comentario/1114096/) 

	Si les sigue marcando errores o mas bien no les muestra nada les dire como consejo que empiecen a debuggear, es una excelente practica para entender lo que se esta haciendo

* **Royer Guerrero Pinilla** (1) [1113702](https://platzi.com/comentario/1113702/) 

	[Version en python ](https://github.com/royerguerrero/library-api-flask_restful)

* **Iv√°n Acosta** (1) [1105110](https://platzi.com/comentario/1105110/) 

	Excelente clase.! Haciendo una analog√≠a con CRUD en base de datos, el m√©todo PUT no permite modificar un campo, se actualiza toda el registro, es por ello que la informaci√≥n debe estar completa

* **Enrique Felix Garcia Stave** (1) [1032742](https://platzi.com/comentario/1032742/) 

	 **Apuntes:**  
	La modificaci√≥n de datos corresponder√≠a a un update en un CRUD, y tiene partes similares a las de GET y POST.  
	**Nota:** Para los que usan IIS, deben dirigirse a la herramienta de ‚Äúasignaciones de controlador‚Äù, hacer doble click en el controlador de PHP (para el caso que tengan instalados mas de 2 interpretes, seleccionen el que les aparezca en el phpinfo), dirigirse a la opci√≥n de restricciones de solicitudes, luego en la pesta√±a de los versos, seleccionar ‚Äútodos los verbos‚Äù. IIS por defecto nos presenta problemas con los verbos PUT y DELETE.

* **Luis Abraham Rosas Barajas** (1) [829880](https://platzi.com/comentario/829880/) 

	Pesimo curso, le netflix

	* **Kevin Javier Morales (Platzi)** [829880] (1)

		Por qu√© crees que es un p√©simo curso? Cu√©ntanos

	* **JulioCardenasR** [829880] (3)

		Creo que este no es un curso para principiantes.
		
		Es un curso para alguien que haya hecho el backend de servidores web.
		
		Para quien se haya estrellado leyendo parametros, pasando informacion, haciendo querys en bases de datos, codificando en json.
		
		Si uno no tiene esos prerequisitos es facil perderse.
		
		Las clases son cortas pero llenas de contenido. Me ha tocado repetir algunas varias veces.

	* **Jaime Ortiz** [829880] (1)

		Es muy recomendable hablar con los asesores de platzi para que le asignen rutas de aprendizaje y as√≠ llegar a los cursos deseados luego de haber realizado los que son prerrequisitos.

* **mariorm1106** (1) [773892](https://platzi.com/comentario/773892/) 

	Metodo put remplaza toda la informacion, no funcina como una actualizacion espesifica de un dato.

* **cesarcubillos** (1) [70887](https://platzi.com/comentario/784657/) 
¬øNo es necesario recibir el /1 al final de la URL? ¬øO c√≥mo es que la variable PHP de $resourceId se estableci√≥ con ese /1?

	* **Mois√©s Cede√±o** [70887] (1)

		S√≠, es necesario. Eso se hace en la l√≠nea 47, si estamos manejando el mismo identado.
		``` 
		    $resourceId = array_key_exists('resource_id', $_GET ) ? $_GET['resource_id'] : '';
		    
		```

* **Emerson Cede√±o Salazar** (1) [69893](https://platzi.com/comentario/765414/) 
yo supongo que para implementar actualizaciones ‚Äòparciales‚Äô habr√° que hacer una consulta previa al registro bajo modificaci√≥n, comparar v...

* **platzerito02112019 platzerito02112019** (1) [64777](https://platzi.com/comentario/681754/) 
Todo funcionaba Bien hasta que llegue al m√©todo ‚ÄòPOST‚Äô Y ‚ÄòPUT‚Äô y me salio este error: (estoy con trabajando con windows) <h1>POST...

	* **Mauro Chojrin** [64777] (1)

		El problema est√° en las comillas. Prueba con:
		
		curl -X ‚ÄòPUT‚Äô ‚Äú<http://localhost:8000/books/1>‚Äù -d ‚Äò{‚Äútitulo‚Äù: ‚ÄúNuevo Libro‚Äù, ‚Äúid_autor‚Äù: 1, ‚Äúid_genero‚Äù: 2}‚Äô

## 0100. Eliminar datos a trav√©s de HTTP DELETE [21620](https://platzi.com/clases/1638-api-rest/21620-eliminar-datos-a-traves-de-http-delete/)

### Descripci√≥n:


### Links:

* [Meet Google Drive ‚Äì One place for all your files](https://drive.google.com/open?id=1RerWOWXTFI-Zyq6_cf1NsDfvhknN4Md7)

* [Repositorio de la clase](https://www.google.com)

### Comentarios:

* **MarlaCpp** (7) [958706](https://platzi.com/comentario/958706/) 

	C√≥digo de la clase:
	``` 
	    <?php
	    
	    $allowedResourceTypes = [
	        'books',
	        'authors',
	        'genres'
	    ];
	    
	    $resourceType = $_GET['resource_type'];
	    
	    if( !in_array($resourceType, $allowedResourceTypes)){
	        die;
	    }
	    
	    //Defino los recursos
	    $books = [
	        1 => [
	            'titulo' => 'Lo que el viento se llevo',
	            'id_autor' => 2,
	            'id_genero' => 2,
	        ],
	        2 => [
	            'titulo' => 'La Iliada',
	            'id_autor' => 1,
	            'id_genero' => 1,
	        ],
	        3 => [
	            'titulo' => 'La Odisea',
	            'id_autor' => 1,
	            'id_genero' => 1,
	        ],
	    ];
	    
	    // Se indica al cliente que lo que recibir√° es un json
	    header('Content-Type: application/json');
	    // Levantamos el id del recurso buscado
	    $resourceId = array_key_exists('resource_id', $_GET) ? $_GET['resource_id']:'';
	    
	    // Generamos la respuesta asumiendo que el pedido es correcto y devilvemos en formafo json
	    switch( strtoupper($_SERVER['REQUEST_METHOD']) ) {
	        case 'GET':
	            // en caso de que no pidan ningun recurso
	             if ( empty( $resourceId ) ){
	                echo json_encode( $books );
	             }else{
	                 // si llegan a pedir un recurso en especifico
	                if( array_key_exists( $resourceId, $books) ){
	                    echo json_encode( $books[ $resourceId ] );
	                }
	            }
	            break;
	        case 'POST':
	            $json = file_get_contents('php://input');
	            // transformamos el json recibido a un nuevo elemento del arreglo
	            $books[] = json_decode($json, true);
	            // emitimos hacia la salida la ultima clave del arreglo de los libros
	            // echo array_keys( $books )[count($books) -1];
	            echo json_encode($books);
	            break;
	        case 'PUT':
	            //validamos que el recurso buscado exista
	            if (!empty($resourceId) && array_key_exists($resourceId, $books)){
	                // Tomamos la entrada cruda
	                $json = file_get_contents('php://input');
	                 // transformamos el json recibido a un nuevo elemento del arreglo
	                $books[$resourceId] = json_decode($json, true);
	                // Retornamos la coleccion modificada en formato json
	                echo json_encode($books);
	            }
	            break;
	        case 'DELETE':
	            // validamos que el recurso exista
	            if (!empty($resourceId) && array_key_exists($resourceId, $books)){
	                // Eliminamos el recurso
	                unset( $books[ $resourceId]);    
	                // Aqu√≠ verificamos que los cambios se han realizado  
	                echo json_encode($books);      
	            }
	            break;
	    }
	    
	    
	    
	    // Inicio el servidor en la terminal 1, aqui le asignamos el puerto 8000
	    // php -S localhost:8000 server.php
	    
	    // Terminal 2 ejecutar 
	    // curl http://localhost:8000 -v
	    // curl http://localhost:8000/\?resource_type\=books
	    // curl http://localhost:8000/\?resource_type\=books | jq
	    // ver la comunicacion a trav√©s de los encabezados:
	    // $ curl http://localhost:8000/\?resource_type\=books -v > /dev/null
	    // consulta
	    //$curl "http://localhost:8000?resource_type=books&resource_id=1"
	    // M√©todo POST
	    //curl -X 'POST' http://localhost:8000/books -d '{"titulo":"Nuevo Libro","id_autor":1,"id_genero":2}'
	    // M√©todo Put - el recurso 1 ser√° reemplazado por el libro que estoy creando
	    // $ curl -X 'PUT' http://localhost:8000/books/1 -d '{"titulo": "Nuevo Libro", "id_autor": 1, "id_genero": 2}'
	    // M√©todo Delete
	    // curl -X 'DELETE' http://localhost:8000/books/1
	    ?>
	    
	```

* **Israel Yance** (5) [673899](https://platzi.com/comentario/673899/) 

	Eliminar datos a trav√©s de HTTP DELETE:  
	`$ curl -X 'DELETE' http://localhost:8000/books/1`

* **Iraida Mercedes Barreto D√≠az** (3) [1094615](https://platzi.com/comentario/1094615/) 

	Yo trat√© de implementar todos los m√©todos en un API en python usando flask para poder entender co se hac√≠a eso en ese lenguaje. Es algo sencillo pero funciona. Este es el resultado:
	``` 
	    from flask import Flask
	        from flask_restful import Api, Resource, reqparse
	    
	        app = Flask(__name__)
	        api = Api(app)
	    
	        malwares = [
	            {
	                "name" : "spyfocus.js",
	                "type" : "adware",
	                "media" : "url",
	            },
	            {
	                "name" : "greencard.zip",
	                "type" : "trojan",
	                "media" : "zip",
	            },
	            {
	                "name" : "credit_card.rar",
	                "type" : "trojan",
	                "media" : "zip",
	            },    
	            {
	                "name" : "system35.dll",
	                "type" : "virus",
	                "media" : "exe",
	            },  
	            {
	                "name" : "registry_mode.bat",
	                "type" : "worm",
	                "media" : "msi",
	            }
	        ]
	    
	        classMalware(Resource):
	                defget(self, name):
	                    for malware in malwares:
	                        if (name == malware["name"]):
	                            return malware, 200
	                    return"Marlware not found", 404
	    
	                defpost(self, name):
	                    parser = reqparse.RequestParser()
	                    parser.add_argument("type")
	                    parser.add_argument("media")
	                    args = parser.parse_args()
	    
	                    for malware in malwares:
	                        if(name == malware["name"]):
	                            return"Malware with name {} already exits".format(name), 400
	                    malware = {
	                        "name" : name,
	                        "type" : args["type"],
	                        "media" : args["media"]
	                    }
	    
	                    malwares.append(malware)
	                    return malware, 201
	    
	                defput(self, name):
	                    parser = reqparse.RequestParser()
	                    parser.add_argument("type")
	                    parser.add_argument("media")
	                    args = parser.parse_args()
	    
	                    for malware in malwares:
	                        if (name==malware["name"]):
	                            malware["type"] = args["type"]
	                            malware["media"] = args["media"]
	                            return malware, 200
	    
	                    malware = {
	                        "name" : name,
	                        "type" : args["type"],
	                        "media" : args["media"]
	                    }
	            
	                    malwares.append(malware)
	                    return malware, 201
	    
	                defdelete(self, name):
	                    global malwares
	                    malwares = [malware for malware in malwares if malware["name"] != name]
	                    return"{} is deleted.".format(name), 200
	                
	        api.add_resource(Malware, "/malware/<string:name>")
	        app.run(debug = True) #enable flask to reload after a change, only develoing mode.
	    
	```

	* **Royer Guerrero Pinilla** [1094615] (1)

		Mira mi versi√≥n lo estoy haciendo un poco mas escalable y usando flask_restful  
		[API REST FLASK](https://github.com/royerguerrero/library-api-flask_restful)

	* **Royer Guerrero Pinilla** [1094615] (1)

		Puedes evitar el for por un
		``` 
		    if book_id notin BOOKS:
		            abort(404, message='El libro con id {} no existe'.format(book_id))```
		    
		```

* **mariorm1106** (3) [773898](https://platzi.com/comentario/773898/) 

	* GET optener recursos, tabnto colecciones como recursos puntulaes
	* POST crear recursos en tu servivod
	* PUT remplazo de recursos existentes por uno nuevo
	* Delete borra el recurso
	
	

* **Christian David S√°nchez** (3) [763388](https://platzi.com/comentario/763388/) 

	DELETE: Este m√©todo se utiliza para eliminar un registro existente, es similar a DELETE a la base de datos. No soporta el env√≠o del payload.

* **Iv√°n Acosta** (1) [1105138](https://platzi.com/comentario/1105138/) 

	De nuevo, con el m√©todo DELETE se borra toda la colecci√≥n del recurso.! No se puede borrar data puntual.

* **Andres Rivera** (1) [1059311](https://platzi.com/comentario/1059311/) 

	¬øpor qu√© siempre se escriben en may√∫sculas los verbos?

	* **Royer Guerrero Pinilla** [1059311] (1)

		Convenci√≥n

* **egop** (1) [1039081](https://platzi.com/comentario/1039081/) 

	en powershell de windows.
	
	curl -Method DELETE <http://localhost:8000/books/3>

* **Rafael Carrillo** (1) [926517](https://platzi.com/comentario/926517/) 

	interezante

* **Jhon Alexander Romero Gonzaga** (1) [908489](https://platzi.com/comentario/908489/) 

	este fue el menos complicado de crear üòÉ

* **Adri√°n Castillo** (1) [85094](https://platzi.com/comentario/1066082/) 
Se puede enviar archivos como por ejemplo una imagen a trav√©s de PUT a una API y en caso de poderse es recomendable hacerlo?

	* **Royer Guerrero Pinilla** [85094] (1)

		No estoy 100% seguro pero creo que la app cliente debe hacer eso y pasarle la ubicaci√≥n al backend para que la guarde

# Conocer diferentes modos de restringir el acceso a las API Rest [4330]

## 0110. Autenticaci√≥n v√≠a HTTP [21621](https://platzi.com/clases/1638-api-rest/21621-autenticacion-via-http/)

### Descripci√≥n:


La autenticaci√≥n v√≠a HTTP tiene dos problemas:

* Es poco segura: las credenciales se env√≠an en cada request anteponiendo el usuario y contrase√±a en la url, por ejemplo: `user:password@platzi.com`.
* Es ineficiente: la autenticaci√≥n se debe realizar en cada request.



### Comentarios:

* **danielvillalobos** (4) [713660](https://platzi.com/comentario/713660/) 

	Que interesante la verdad estos ejemplos complementan mas claramente la clase de Outh2 de platzi.

* **Jecsham Castillo** (2) [789946](https://platzi.com/comentario/789946/) 

	Autenticaci√≥n para servicios muy b√°sicos

* **Christian David S√°nchez** (2) [763453](https://platzi.com/comentario/763453/) 

	HTTP soporta el uso de varios mecanismos de identificaci√≥n para controlar el acceso a p√°ginas u otros resources. Estos mecanismos se basan en el uso del c√≥digo de estado 401 y el response header WWW-Authenticate.  
	Fuente: (<https://diego.com.es/autenticacion-http>)

* **Israel Yance** (2) [673994](https://platzi.com/comentario/673994/) 

	Autenticaci√≥n HTTP:  
	**user:password@URL**  
	`$ curl http://mauro:1234@localhost:8000/books`

* **Royer Guerrero Pinilla** (1) [1115232](https://platzi.com/comentario/1115232/) 

	Aqui esta la version en python
	``` 
	    from flask import make_response, request
	    
	    defauth_required(func):
	        defwrapper(self):
	            if request.authorization and request.authorization['username'] == 'royer'and request.authorization['password'] == '1234':
	                return func(self)
	            
	            return make_response('Could not verify your login!', 401, {'WWW-Autencticate': 'Basic reaml="Login Required"'})
	    
	        return wrapper
	    
	```
	
	Luego se debe importar `from common.auth import auth_required` para despues llamarlo mediante el decorador `@auth_required`  
	Ejemplo
	``` 
	    classBookList(Resource):
	        @auth_required
	        defget(self):
	            return jsonify({'data': BOOKS})
	    
	```

* **Enrique Felix Garcia Stave** (1) [1055286](https://platzi.com/comentario/1055286/) 

	**Apuntes:**  
	Debemos basarnos en algunas variables que aporta PHP, las cuales son variables globales de servidor, para autenticaci√≥n de usuario:  
	$_SERVER[‚ÄòPHP_AUTH_USER‚Äô]  
	Y para contrase√±a:  
	$_SERVER[‚ÄòPHP_AUTH_PW‚Äô]  
	Luego de una previa autenticacion, realizamos la petici√≥n en curl:  
	curl <http://user:password@URL:8000>

* **mariorm1106** (1) [773907](https://platzi.com/comentario/773907/) 

	Autenticaci√≥n or html, O: tan f√°cil como [user:password@platzi.com](mailto:user:password@platzi.com).  
	Pero no es muy segura

* **MisaMagna** (1) [730054](https://platzi.com/comentario/730054/) 

	¬øQue hay de HTTPS?

	* **Joshua Nathanael Saucedo Uriarte** [730054] (6)

		la **s** en **https** es porque la comunicaci√≥n es encriptada utilizando Transport Layer Security (TLS) o Secure Sockets Layer (SSL). Es http con una capa extra de encriptaci√≥n y eso solo es a nivel comunicacion, no a nivel de Autenticaci√≥n de usuario
		
		‚óï‚Äø‚óï

	* **Emerson Cede√±o Salazar** [730054] (3)

		no obstante, a√∫n as√≠ podr√≠a aprovecharse ( **HTTPS** ) para agregarle seguridad a este m√©todo de autenticaci√≥n mediante el uso del `CURLOPT_USERPWD` del `curl_sepopt` en PHP, ¬øcorrecto?
		
		Quedando as√≠:
		``` 
		    curl_setopt($ch, CURLOPT_USERPWD, $username . ":" . $password);
		    
		```
		
		Fuente: [stackoverflow](https://stackoverflow.com/questions/2140419/how-do-i-make-a-request-using-http-basic-authentication-with-php-curl)

* **Jose Rodriguez Luis** (1) [675601](https://platzi.com/comentario/675601/) 

	$_SERVER[‚ÄòPHP_AUTH_USER‚Äô];  
	$_SERVER[‚ÄòPHP_AUTH_PW‚Äô];  
	curl <http://user:password@localhost:7000/books>

* **HatsuDopple** (1) [64507](https://platzi.com/comentario/677160/) 
cuando intetno desarrollar una api rest en php y mi cliente es angular no se por que me genera errores de CORS

	* **Mauro Chojrin** [64507] (2)

		Prueba agregando esto a tu servidor php:
		
		`header('Access-Control-Allow-Origin: *'); header("Access-Control-Allow-Headers: Origin, X-Requested-With, Content-Type, Accept"); header('Access-Control-Allow-Methods: GET, POST, PUT, DELETE');` (Antes de enviar html o json al cliente)

## 0120. Autenticaci√≥n v√≠a HMAC [21622](https://platzi.com/clases/1638-api-rest/21622-autenticacion-via-hmac/)

### Descripci√≥n:


Para esta autenticaci√≥n necesitamos 3 elementos:

* Funci√≥n Hash: Dif√≠cil de romper, que sea conocida por el cliente y servidor.
* Clave secreta: Solamente la pueden saber el cliente y el servidor, ser√° utilizada para corroborar el hash.
* UID: El id del usuario, ser√° utilizado dentro de la funci√≥n hash junto con la clave secreta y un timestamp.



Es mucho m√°s segura que la autenticaci√≥n v√≠a HTTP, por ello la informaci√≥n que se env√≠a a trav√©s de este m√©todo no es muy sensible.

### Comentarios:

* **Franklin Rosas** (7) [708154](https://platzi.com/comentario/708154/) 

	 **¬øQue es un HASH?**  
	Una funci√≥n criptogr√°fica hash- usualmente conocida como ‚Äúhash‚Äù- es un algoritmo matem√°tico de seguridad que transforma cualquier bloque arbitrario de datos en una nueva serie de caracteres, con la caracter√≠stica particular de siempre poseer una longitud fija. Esto quiere decir que, sin importar la longitud de los datos de entrada, la longitud del valor hash de salida siempre es la misma.  
	![](https://media.kasperskydaily.com/wp-content/uploads/sites/87/2014/04/05212159/Cryptographic-Hashing-Explained.png)
	
	Para m√°s informaci√≥n sobre el tema puedes visitar este [blog de kaspersky](https://latam.kaspersky.com/blog/que-es-un-hash-y-como-funciona/2806/)

* **Walter Jesus Santiago Gonzalez** (6) [680011](https://platzi.com/comentario/680011/) 

	Script auxiliar generate_hash.php
	``` 
	    <?php
	    
	    $time = time();
	    echo "Time: $time".PHP_EOL."Hash: ".sha1($argv[1].$time.'Sh!! No se lo cuentes a nadie!');
	    
	```

* **Luis Rangel Castro** (4) [774986](https://platzi.com/comentario/774986/) 

	```
	    <?php
	    
	    /*
	    -- Autenticacion via HTTP
	    $user = array_key_exists('PHP_AUTH_USER',$_SERVER) ? $_SERVER['PHP_AUTH_USER'] : '';
	    $pwd = array_key_exists('PHP_AUTH_PW',$_SERVER) ? $_SERVER['PHP_AUTH_PW'] : '';
	    
	    if ($user !== 'mauro' || $pwd !== '1234') {
	    	die;
	    }
	    */
	    
	    // Autenticacion via HMAC
	    if (!array_key_exists('HTTP_X_HASH',$_SERVER) || !array_key_exists('HTTP_X_TIMESTAMP',$_SERVER) || !array_key_exists('HTTP_X_UID',$_SERVER)) {
	    	die;
	    }
	    
	    list($hash,$uid,$timestamp) = [
	    	$_SERVER['HTTP_X_HASH'],
	    	$_SERVER['HTTP_X_UID'],
	    	$_SERVER['HTTP_X_TIMESTAMP']
	    ];
	    
	    $secret = 'Sh!! No se lo cuentes a nadie!';
	    
	    $newHash = sha1($uid.$timestamp.$secret);
	    
	    if ($newHash !== $hash) {
	    	die;
	    }
	    
	    // Definimos los recursos disponibles
	    $allowedResourceTypes = [
	    	'books',
	    	'authors',
	    	'genres',
	    ];
	    
	    // Validamos que el recurso este disponible
	    $resourceType = $_GET['resource_type'];
	    
	    if (!in_array($resourceType,$allowedResourceTypes)) {
	    	die;
	    }
	    
	    // Defino los recursos
	    $books = [
	        1 => [
	            'titulo' => 'Lo que el viento se llevo',
	            'id_autor' => 2,
	            'id_genero' => 2,
	        ],
	        2 => [
	            'titulo' => 'La Iliada',
	            'id_autor' => 1,
	            'id_genero' => 1,
	        ],
	        3 => [
	            'titulo' => 'La Odisea',
	            'id_autor' => 1,
	            'id_genero' => 1,
	        ],
	    ];
	    
	    // Se indica al cliente que lo que recibir√° es un json
	    header('Content-Type: application/json');
	    
	    // Levantamos el id del recurso buscado
	    // utilizando un operador ternario
	    $resourceId = array_key_exists('resource_id', $_GET) ? $_GET['resource_id'] : '';
	    
	    // Generamos la respuesta asumiendo que el pedido es correcto
	    switch (strtoupper($_SERVER['REQUEST_METHOD'])) {
	    	case 'GET':
	    		if (empty($resourceId)) {
	    			echo json_encode($books);
	    		} else {
	    			if (array_key_exists($resourceId,$books)) {
	    				echo json_encode($books[$resourceId]);
	    			}
	    		}
	    		break;
	    
	    	case 'POST':
	    		$json = file_get_contents('php://input');
	    		$books[] = json_decode($json,true);
	    		//echo array_keys($books)[count($books)-1];
	    		end($books);         // move the internal pointer to the end of the array
	    		$key = key($books);  // fetches the key of the element pointed to by the internal pointer
	    		echo json_encode($books[$key]);
	     		break;
	    
	    	case 'PUT':
	    		// Validamos que el recurso buscado exista
	    		if (!empty($resourceId) && array_key_exists($resourceId,$books)) {
	    			// Tomamos la entrada curda
	    			$json = file_get_contents('php://input');
	    
	    			// Tansformamos el json recibido a un nuevo elemento
	    			$books[$resourceId] = json_decode($json,true);
	    
	    			echo json_encode($books[$resourceId]);
	    		}
	    		break;
	    
	    	case 'DELETE':
	    		// Validamos que el recurso buscado exista
	    		if (!empty($resourceId) && array_key_exists($resourceId,$books)) {
	    			unset($books[$resourceId]);
	    			echo json_encode($books);
	    		}
	    		break;
	    }
	    
	    
	    
	    // Inicio el servidor en la terminal 1
	    // php -S localhost:8000 server.php
	    
	    // Terminal 2 ejecutar 
	    // curl http://localhost:8000 -v
	    // curl http://localhost:8000/\?resource_type\=books
	    // curl http://localhost:8000/\?resource_type\=books | jq
	    
	```

* **Enrique Felix Garcia Stave** (2) [1055383](https://platzi.com/comentario/1055383/) 

	**Apuntes:**  
	Esta autenticaci√≥n es un poco m√°s segura.  
	Es un C√≥digo de autorizaci√≥n basado en hash de mensajes.  
	Un hash es una funcionalidad que encripta un texto. Se basa en un hash (encriptada) que se conoce por el cliente o servidor y luego un token de verificaci√≥n conocido por el cliente y servidor (solamente) y el UID (User ID), que corresponder√≠a a la ID del usuario que ser√° usada en la funci√≥n hash junto con la contrase√±a secreta y un timestamp.  
	El procedimiento es parecido al anterior, a diferencia que se tomaran 3 variables globales de servidor (HTTP_X_HASH, HTTP_X_TIMESTAMP, HTTP_X_UID).
	
	**curl<http://localhost:80/books> -H ‚ÄúX-HASH: hashGenerado‚Äù -H ‚ÄúX-UID: tuIdUsuario‚Äù -H ‚ÄúX-TIMESTAMP: hashGeneradoDelTimeStamp‚Äù**

* **nova12** (2) [870985](https://platzi.com/comentario/870985/) 

	Lo que entiendo es que cuando el cliente se loguea por ejemplo el servidor le asigna el hash con el que va realizar las peticiones?, si es asi para que el cliente tenga a disposicion el has para enviarlo donde se almacena , en una cooky o en donde ?

* **FizIrvin** (2) [808107](https://platzi.com/comentario/808107/) 

	HMAC basado en Hash de mensajes

* **Emerson Cede√±o Salazar** (2) [765667](https://platzi.com/comentario/765667/) 

	La implementaci√≥n por `sha1()` podr√≠a reemplazarse con el uso de `hash_hmac()` de la siguiente forma:
	
	_De manera general (a implementar tanto en El Cliente como en El Server):_
	``` 
	    $algo = 'sha1';
	    $key = 'Sh!! No se lo cuentes a nadie!';
	    
	```
	
	**Del lado de El Cliente:**
	``` 
	    // ... considerar variables generales de arriba
	    $data = time();
	    $raw_output = false;
	    
	    $hash_v2 = hash_hmac( $algo, $data, $key, $raw_output );
	    
	    echo "Time: $data" . PHP_EOL . "Hash: " . $hash_v2 . PHP_EOL;
	    
	```
	
	**Del lado de El Server:**
	``` 
	    // ... considerar variables generales de arriba, y variable $timestamp del script server.php ...
	    $data = $timestamp;
	    
	    $newHash_v2 = hash_hmac( $algo, $data, $key, $raw_output );
	    
	```

* **Christian David S√°nchez** (2) [763542](https://platzi.com/comentario/763542/) 

	HMAC es un modo de autenticaci√≥n de mensajes basado en hash. Ademas, es un mecanismo de autenticaci√≥n de mensajes mediante funciones de hash cifradas.

* **Royer Guerrero Pinilla** (1) [1116675](https://platzi.com/comentario/1116675/) 

	El timestamp es en segundos?

* **Iv√°n Acosta** (1) [1109887](https://platzi.com/comentario/1109887/) 

	Dependiendo de la sensibilidad de la data que se quiera exponer en un recurso, este m√©todo de utilizarse para consumir ese informaci√≥n. Excelente esta clase

* **neontigermx** (1) [1089398](https://platzi.com/comentario/1089398/) 

	No entendi porque el $ _SERVER la variable X-HASH aparece como HTTP_X_HASH_ con un guio bajo al final.

* **mariorm1106** (1) [773939](https://platzi.com/comentario/773939/) 

	login con HMAC  
	<http://dominio.com/metodo/> -H ‚ÄòX-HASH: tu_hash‚Äô -H ‚ÄòX-UID: tu_usuario‚Äô -H‚ÄôX-TIMESTAMP: tu_marcaDeTiempo‚Äô
	
	Pero no es el metodo mas seguro.

* **iridian** (1) [715456](https://platzi.com/comentario/715456/) 

	Me funciono con comillas dobles en windows:
	
	curl <http://localhost:8000/books> -H ‚ÄúX-HASH: ************‚Äù -H ‚ÄúX-UID: 1‚Äù -H ‚ÄúX-TIMESTAMP: *******‚Äù

* **SistemasCBC** (1) [679618](https://platzi.com/comentario/679618/) 

	No estaria entendiendo bien.  
	Para que una persona pueda consumir mi Api utilizando este metodo de autentificacion, tengo que pasarle el Hash y el Time???

	* **Juan Sebasti√°n Joya Rodr√≠guez** [679618] (2)

		Checa que, el nuevoHash se genera con el timestamp que tu le enviar desde el cliente, o sea que, en ultimas, lo que cambia es el mensaje secreto, no el timeStamp.
		
		Tu te acurdas del codigo enigma? para decodificar el mensaje habia que encontrar una ‚ÄúSemilla‚Äù, bueno, pinesa en el timeStamp como esa Semilla

* **Israel Yance** (1) [674203](https://platzi.com/comentario/674203/) 

	 **Autenticaci√≥n v√≠a HMAC**  
	M√°s segura que la autenticaci√≥n HTTP.  
	Necesita la Funci√≥n Hash, la clave secreta y el UID.  
	`$ curl http://localhost:8000/books -H 'X-HASH: ***' -H 'X-UID: 1' -H 'X-TIMESTAMP: ***'`

	* **Juan Sebasti√°n Joya Rodr√≠guez** [674203] (1)

		Checa que, el nuevoHash se genera con el timestamp que tu le enviar desde el cliente, o sea que, en ultimas, lo que cambia es el mensaje secreto, no el timeStamp.
		
		Tu te acurdas del codigo enigma? para decodificar el mensaje habia que encontrar una ‚ÄúSemilla‚Äù, bueno, pinesa en el timeStamp como esa Semilla

* **Emerson Cede√±o Salazar** (1) [69907](https://platzi.com/comentario/765674/) 
luego de leer acerca del HMAC el UID no es, conceptualmente hablando, un par√°metro necesario de este m√©todo de autenticaci√≥n, ¬øcorrecto?

* **operez12** (1) [68508](https://platzi.com/comentario/741749/) 
En este ejemplo llev√°ndolo a la realidad el mensaje que se comparte entre las dos partes seria una llave p√∫blica?

	* **Emerson Cede√±o Salazar** [68508] (1)

		‚Äúel mensaje‚Äù _(la ‚Äòpalabra secreta‚Äô, o semilla -seed)_ no necesariamente es una ‚Äúllave p√∫blica‚Äù, m√°s bien se refiere _(a como mencion√≥ el profe)_ a una cadena alfanum√©rica aleatoria que ambas partes deben conocer.

## 0130. Autenticaci√≥n v√≠a Access Tokens [21623](https://platzi.com/clases/1638-api-rest/21623-autenticacion-via-access-tokens/)

### Descripci√≥n:


Est√° forma es la m√°s compleja de todas, pero tambi√©n es la forma m√°s segura utilizada para informaci√≥n muy sensible. El servidor al que le van a hacer las consultas se va a partir en dos:

* Uno se va a encargar espec√≠ficamente de la autenticaci√≥n.
* El otro se va a encargar de desplegar los recursos de la API.



El flujo de la petici√≥n es la siguiente:

  1. Nuestro usuario hace una petici√≥n al servidor de autenticaci√≥n para pedir un token.
  2. El servidor le devuelve el token.
  3. El usuario hace una petici√≥n al servidor para pedir recursos de la API.
  4. El servidor con los recursos hace una petici√≥n al servidor de autenticaci√≥n para verificar que el token sea v√°lido.
  5. Una vez verificado el token, el servidor le devuelve los recursos al cliente.



### Links:

* [OAuth 2 Simplified ‚Ä¢ Aaron Parecki](https://aaronparecki.com/oauth-2-simplified/)

* [Curso de Autenticaci√≥n con OAuth](https://platzi.com/cursos/autenticacion-oauth/)

### Comentarios:

* **Christian David S√°nchez** (9) [763585](https://platzi.com/comentario/763585/) 

	Los tokens de acceso se utilizan en la autenticaci√≥n basada en tokens para permitir que una aplicaci√≥n acceda a una API. La aplicaci√≥n recibe un token de acceso despu√©s de que un usuario autentica y autoriza el acceso con √©xito, luego pasa el token de acceso como una credencial cuando llama a la API de destino. El token pasado informa a la API que el portador del token ha sido autorizado para acceder a la API y realizar acciones espec√≠ficas especificadas por el alcance otorgado durante la autorizaci√≥n.
	
	Fuente: <https://auth0.com/docs/tokens/access-tokens>

	* **Freddy C√≥rdova Arana** [763585] (2)

		Buena info, muchas gracias.

	* **mariorm1106** [763585] (1)

		bien por el aporte

* **albertodanielcastillomendoza** (4) [941208](https://platzi.com/comentario/941208/) 

	Si a alguno no le regresa nada, aun haciendo tal cual las cosas que indica el profesor, intenten con esto:
	
	  1. Vayan al archivo php.ini (donde lo hayan instalado) y editen esta linea quitandole el punto y coma.  
	;extension=php_curl.dll
	
	  2. Si usan ubuntu en windows, ingresen este comando:  
	sudo apt-get install php-curl
	
	
	
	
	Reinicien las terminales y luego intenten de nuevo el ejercicio. Me dicen si les funciona.

	* **Jeronimo_T** [941208] (1)

		No me funciona ninguna de las 2.  
		Podr√≠as ayudarme??

* **MisaMagna** (4) [730090](https://platzi.com/comentario/730090/) 

	¬øQue hay de los JWT?

	* **operez12** [730090] (1)
Creo que tambn cuenta como un m√©todo de esta clase.

	* **Luis Rangel Castro** [730090] (2)

		Tengo la misma duda.

	* **william andres rodriguez borja** [730090] (2)

		Lo JWT son un tipo de token Json Webs Token <https://jwt.io/> pero adicional existen diferentes tipos de tokens JWT es tal vez el mas usado pero no es el unico tipo de tokens.

* **Israel Yance** (4) [674195](https://platzi.com/comentario/674195/) 

	Pedido al servidor de autenticaci√≥n:  
	`$ curl http://localhost:8001 -X 'POST' -H 'X-Client-Id: 1' -H 'X-Secret:SuperSecreto!'`  
	Pedido al servidor de recursos:  
	`$ curl http://localhost:8000/books -H 'X-Token: ***'`

* **Rafael Carrillo** (2) [927254](https://platzi.com/comentario/927254/) 

	Me parece muy interesante como funcionan los servicios rest full esta forma de aprender el conecto es muy f√°cil aunque en este curso se deber√≠a usar post man para poder consumir los servicios que unos levanta

* **FizIrvin** (2) [808114](https://platzi.com/comentario/808114/) 

	le entend√≠ perfecto con el diagrama del flujo de trabajo

* **neontigermx** (1) [1100961](https://platzi.com/comentario/1100961/) 

	El c√≥digo que adjunta Mauro es un poco diferente al que explican en el video üòï

* **Jricardo745** (1) [1063220](https://platzi.com/comentario/1063220/) 

	Archivo con los 3 m√©todos de autenticaci√≥n y los comandos de consola:
	``` 
	    <?php
	    
	    /* Autenticacion via HTTP
	    $user = array_key_exists('PHP_AUTH_USER',$_SERVER) ? $_SERVER['PHP_AUTH_USER'] : '';
	    $pwd = array_key_exists('PHP_AUTH_PW',$_SERVER) ? $_SERVER['PHP_AUTH_PW'] : '';
	    
	    if ($user !== 'mauro' || $pwd !== '1234') {
	    	die;
	    }
	    */
	    
	    /* Autenticacion via HMAC
	    if (!array_key_exists('HTTP_X_HASH',$_SERVER) ||
	        !array_key_exists('HTTP_X_TIMESTAMP',$_SERVER) ||
	        !array_key_exists('HTTP_X_UID',$_SERVER)) {
	        die;
	    }
	    
	    list($hash, $uid, $timestamp) = [
	        $_SERVER['HTTP_X_HASH'],
	        $_SERVER['HTTP_X_UID'],
	        $_SERVER['HTTP_X_TIMESTAMP']
	    ];
	    
	    $secret = 'Sh!! No se lo cuentes a nadie!';
	    
	    $newHash = sha1($uid.$timestamp.$secret);
	    
	    if ($newHash !== $hash) {
	        die;
	    }
	    */
	    
	    /* Autenticaci√≥n via Access TOKEN
	    header( 'Content-Type: application/json' );
	    
	    if ( !array_key_exists( 'HTTP_X_TOKEN', $_SERVER ) ) {
	    
	        die;
	    }
	    
	    $url = 'https://'.$_SERVER['HTTP_HOST'].'/auth';
	    
	    $ch = curl_init( $url );
	    curl_setopt( $ch, CURLOPT_HTTPHEADER, [
	        "X-Token: {$_SERVER['HTTP_X_TOKEN']}",
	    ]);
	    curl_setopt( $ch, CURLOPT_RETURNTRANSFER, true );
	    $ret = curl_exec( $ch );
	    
	    if ( curl_errno($ch) != 0 ) {
	        die ( curl_error($ch) );
	    }
	    
	    if ( $ret !== 'true' ) {
	        http_response_code( 403 );
	        die;
	    }
	    */
	    
	    // Definimos los recursos disponibles
	    $allowedResourceTypes = [
	        'books',
	        'authors',
	        'genres',
	    ];
	    
	    // Validamos que el recurso este disponible
	    $resourceType = $_GET['resource_type'];
	    
	    if (!in_array($resourceType,$allowedResourceTypes)) {
	        die;
	    }
	    
	    // Defino los recursos
	    $books = [
	        1 => [
	            'titulo' => 'Lo que el viento se llevo',
	            'id_autor' => 2,
	            'id_genero' => 2,
	        ],
	        2 => [
	            'titulo' => 'La Iliada',
	            'id_autor' => 1,
	            'id_genero' => 1,
	        ],
	        3 => [
	            'titulo' => 'La Odisea',
	            'id_autor' => 1,
	            'id_genero' => 1,
	        ],
	    ];
	    
	    // Se indica al cliente que lo que recibir√° es un json
	    header('Content-Type: application/json');
	    
	    // Levantamos el id del recurso buscado
	    // utilizando un operador ternario
	    $resourceId = array_key_exists('resource_id', $_GET) ? $_GET['resource_id'] : '';
	    
	    // Generamos la respuesta asumiendo que el pedido es correcto
	    switch (strtoupper($_SERVER['REQUEST_METHOD'])) {
	        case 'GET':
	            if (empty($resourceId)) {
	                echo json_encode($books);
	            } else {
	                if (array_key_exists($resourceId,$books)) {
	                    echo json_encode($books[$resourceId]);
	                }
	            }
	            break;
	    
	        case 'POST':
	            $json = file_get_contents('php://input');
	            $books[] = json_decode($json,true);
	            //echo array_keys($books)[count($books)-1];
	            end($books);         // move the internal pointer to the end of the array
	            $key = key($books);  // fetches the key of the element pointed to by the internal pointer
	            echo json_encode($books[$key]);
	            break;
	    
	        case 'PUT':
	            // Validamos que el recurso buscado exista
	            if (!empty($resourceId) && array_key_exists($resourceId,$books)) {
	                // Tomamos la entrada curda
	                $json = file_get_contents('php://input');
	    
	                // Tansformamos el json recibido a un nuevo elemento
	                $books[$resourceId] = json_decode($json,true);
	    
	                echo json_encode($books[$resourceId]);
	            }
	            break;
	    
	        case 'DELETE':
	            // Validamos que el recurso buscado exista
	            if (!empty($resourceId) && array_key_exists($resourceId,$books)) {
	                unset($books[$resourceId]);
	                echo json_encode($books);
	            }
	            break;
	    }
	    
	    // Inicio el servidor en la terminal 1, aqui le asignamos el puerto 8000
	    // php -S localhost:8000 server.php
	    
	    // Terminal 2 ejecutar
	    // curl http://localhost:8000 -v
	    // curl http://localhost:8000/\?resource_type\=books
	    // curl http://localhost:8000/\?resource_type\=books | jq
	    // ver la comunicacion a trav√©s de los encabezados:
	    // $ curl http://localhost:8000/\?resource_type\=books -v > /dev/null
	    // consulta
	    //$curl "http://localhost:8000?resource_type=books&resource_id=1"
	    // M√©todo POST
	    //curl -X 'POST' http://localhost:8000/books -d '{"titulo":"Nuevo Libro","id_autor":1,"id_genero":2}'
	    // M√©todo Put - el recurso 1 ser√° reemplazado por el libro que estoy creando
	    // $ curl -X 'PUT' http://localhost:8000/books/1 -d '{"titulo": "Nuevo Libro", "id_autor": 1, "id_genero": 2}'
	    // M√©todo Delete
	    // curl -X 'DELETE' http://localhost:8000/books/1
	    // curl http://localhost:8001 -X 'POST' -H 'X-Client-Id: 1' -H 'X-Secret:SuperSecreto!'
	    // curl http://localhost:8000 -H 'X-Token: (token)'
	    
	```

* **Enrique Felix Garcia Stave** (1) [1058320](https://platzi.com/comentario/1058320/) 

	**Apuntes:**  
	Esta es la manera m√°s compleja de autenticaci√≥n para REST, lo que provee una seguridad m√°s √≥ptima para proteger informaci√≥n. Esta autenticaci√≥n requiere de dos servidores, uno para la labor de autenticaci√≥n y el otro para desplegar los recursos API.  
	curl <http://URL:8001> -X ‚ÄúPOST‚Äù -H ‚ÄúX-Client-Id: 1‚Äù -H "X-Secret: SuperSecreto!"  
	**curl<http://localhost:8000/books> -H ‚ÄòX-Token: 9281a90d6e722bf50549f53e2414058dd94c2636‚Äô**

* **freddymm** (1) [1018462](https://platzi.com/comentario/1018462/) 

	Estos tres sistemas de autentificaci√≥n en realidad pueden ser usado para cualquier servicio WEB

* **Cristian Alejandro Ortiz Solano** (1) [909672](https://platzi.com/comentario/909672/) 

	todo muy bien pero como lo puedo usar en producci√≥n no creo que el cliente valla a utilizar la consola para obtener los datos

	* **Jhon Alexander Romero Gonzaga** [909672] (1)

		Hola Alejandro!  
		  
		En este curso te da la idea y las estructuras de como armar y usar una API RESTful (Con ejemplos en la consola de comandos para ver resultados inmediatos y rapidos), cuando entres al mundo backend sabras como implementar esto, por ahora ve tranquilo que estas son las bases (Teoria) para que luego las puedas integrar a tu gusto en varias tecnologias.  
		  
		Espero y te haya ayudado

	* **Jhon Alexander Romero Gonzaga** [909672] (1)

		Y la otra parte, es que el usuario en caso que sea para la web, pulsara un boton que por dentro tenga una funcion o varias para hacer la conexion con la API, y asi el usuario tiene la interfaz amigable.

* **Jhon Alexander Romero Gonzaga** (1) [909468](https://platzi.com/comentario/909468/) 

	se puede utilizar docker si solo se cuenta con un servidor, es una de las herramientas indispensables hoy en di a y una de las mejores.

* **asanchez2091** (1) [903787](https://platzi.com/comentario/903787/) 

	Esta como complejo el diagrama de el primer minuto

* **Edgar Mogollon** (1) [697720](https://platzi.com/comentario/697720/) 

	Actuan 3 actores?

	* **caramirezc** [697720] (1)

		Hola edgar, creo que si son 3.

	* **MisaMagna** [697720] (1)

		Son 3

	* **jarios017** [697720] (2)

		Efectivamente, interactuan:
		
		  1. El Cliente
		  2. El servidor de autenticaci√≥n
		  3. El servidor de recursos
		
		

* **luis-salazar373** (1) [80084](https://platzi.com/comentario/952140/) 
Yo estoy teniendo problemas debido a que al hacer la petici√≥n de libros y enviar el X-Token que me devuelve el servidor‚Ä¶ No obtengo ningu...

* **esteban-chamba-jimenez** (1) [68681](https://platzi.com/comentario/744223/) 
Hola, me queda entendido todo, muy claro, pero tengo una pregunta tonta, y es que yo no entiendo la diferencia con una funci√≥n normal que...

	* **Rafael Pardo Rodriguez** [68681] (1)

		Cuando utilizas de forma json lo haces para traer o enviar datos de manera sencilla, lo puedes usar para guardar datos en una base de datos postgres, o en un mongo, o utilizarla con graphql

* **caramirezc** (1) [66747](https://platzi.com/comentario/712014/) 
Hola comunidad, a alguien le ha salido este error ? Call to undefined function curl_init() creo que es por mi version de php.

	* **caramirezc** [66747] (1)

		La solucion a este error es instalar el siguiente paquete:
		``` 
		    sudo apt-get install php7.0-curl
		    
		```

* **Mois√©s Cede√±o** (1) [65557](https://platzi.com/comentario/693435/) 
**¬øCu√°ntos actores intervienen en la comunicaci√≥n v√≠a Acces Tokens? ** ¬ø2 (servidor de recursos y el de autenticaci√≥n)? ¬øO 3 (usuario, se...

	* **Edgar Mogollon** [65557] (3)

		A mi parecer son 3!

# Aprender a tratar errores en la comunicaci√≥n v√≠a REST [4331]

## 0140. Manejo de errores de un servicio REST [21624](https://platzi.com/clases/1638-api-rest/21624-manejo-de-errores-de-un-servicio-rest/)

### Descripci√≥n:


De momento nuestra API no nos indica que haya ocurrido un error, solamente nos regresa un c√≥digo 200 de HTTP que significa que la petici√≥n se realiz√≥ sin problemas.

Para mejorar nuestra API a√±adiremos respuestas con los c√≥digos HTTP m√°s comunes:

* 400 Bad Request: indica que el servidor no puede o no procesa la petici√≥n debido a algo que es percibido como un error del cliente
* 404 Not Found: el servidor no encuentra el recurso solicitado.
* 500 Internal Server Error: la petici√≥n no pudo procesarse por un error del servidor.



### Links:

* [HTTP Status Codes](https://www.restapitutorial.com/httpstatuscodes.html)

### Comentarios:

* **Jair Israel Avil√©s Eusebio** (13) [825988](https://platzi.com/comentario/825988/) 

	Uno de los sitios que utilizo como referencia para los codigos http es [httpstatuscode](https://httpstatuses.com/), recomendable 100%

	* **Arlex Felipe Llanos Betancourt** [825988] (1)

		Que gran aporte, gracias üòÑ

* **Israel Yance** (8) [674978](https://platzi.com/comentario/674978/) 

	Los c√≥digos de estado en HTTP se clasifican en varios tipos:  
	1xx: Respuestas informativas  
	2xx: Peticiones correctas  
	3xx: Redirecciones  
	4xx: Errores del cliente  
	5xx: Errores del servidor  
	Los m√°s comunes:  
	**400 Bad Request:** Error en la petici√≥n.  
	**401 Unauthorized:** Falta iniciar sesi√≥n.  
	**403 Forbidden:** No se poseeen los permisos necesarios.  
	**404 Not Found:** No se ha podido encontrar el recurso.  
	**500 Internal Server error:** Usualmente fallo en la aplicaci√≥n web.  
	**502 Bad Gateway:** Error entre la comunicaci√≥n del servidor web y alguno de los servidores que act√∫an de proxy.  
	**503 Service Unavailable:** Servidor est√° caido por mantenimiento o est√° sobrecargado.  
	**504 Gateway Timeout:** El servidor act√∫a como puerta de enlace y no puede obtener una respuesta a tiempo.

	* **mariorm1106** [674978] (1)

		Una gran lista de codigos.

* **Christian David S√°nchez** (5) [763625](https://platzi.com/comentario/763625/) 

	C√≥digos de estado 4XX  
	Indican que se ha producido un error cuyo responsable es el navegador:
	
	400 (Bad Request), el servidor no es capaz de entender la petici√≥n del navegador porque su sintaxis no es correcta.  
	401 (Unauthorized), el recurso solicitado por el navegador requiere de autenticaci√≥n. La respuesta incluye una cabecera de tipo WWW-Authenticate para que el navegador pueda iniciar el proceso de autenticaci√≥n.  
	402 (Payment Required), este c√≥digo est√° reservado para usos futuros.  
	403 (Forbidden), la petici√≥n del navegador es correcta, pero el servidor no puede responder con el recurso solicitado porque se ha denegado el acceso.  
	404 (Not Found), el servidor no puede encontrar el recurso solicitado por el navegador y no es posible determinar si esta ausencia es temporal o permanente.  
	405 (Method Not Allowed), el navegador ha utilizado un m√©todo (GET, POST, etc.) no permitido por el servidor para obtener ese recurso.  
	406 (Not Acceptable), el recurso solicitado tiene un formato que en teor√≠a no es aceptable por el navegador, seg√∫n los valores que ha indicado en la cabecera Accept de la petici√≥n.  
	407 (Proxy Authentication Required), es muy similar al c√≥digo 401, pero en este caso, el navegador debe autenticarse primero con un proxy.  
	408 (Request Timeout), el navegador ha tardado demasiado tiempo en realizar su petici√≥n y el servidor ya no espera esa petici√≥n. No obstante, el navegador puede realizar nuevas peticiones cuando quiera.  
	409 (Conflict), la petici√≥n del navegador no se ha podido completar porque se ha producido un conflicto con el recurso solicitado. El caso m√°s habitual es el de las peticiones de tipo PUT que intentan modificar un recurso que a su vez ya ha sido modificado por otro lado.  
	410 (Gone), no es posible encontrar el recurso solicitado por el navegador y esta ausencia se considera permanente. Si existe alguna posibilidad de que el recurso vuelva a estar disponible, se debe utilizar el c√≥digo 404.  
	411 (Length Required), el servidor rechaza la petici√≥n del navegador porque no incluye la cabecera Content-Length adecuada.  
	412 (Precondition Failed), el servidor no es capaz de cumplir con algunas de las condiciones impuestas por el navegador en su petici√≥n.  
	413 (Request Entity Too Large), la petici√≥n del navegador es demasiado grande y por ese motivo el servidor no la procesa.  
	414 (Request-URI Too Long), la URI de la petici√≥n del navegador es demasiado grande y por ese motivo el servidor no la procesa (esta condici√≥n se produce en muy raras ocasiones y casi siempre porque el navegador env√≠a como GET una petici√≥n que deber√≠a ser POST).  
	415 (Unsupported Media Type), la petici√≥n del navegador tiene un formato que no entiende el servidor y por eso no se procesa.  
	416 (Requested Range Not Satisfiable), el navegador ha solicitado una porci√≥n inexistente de un recurso. Este error se produce cuando el navegador descarga por partes un archivo muy grande y calcula mal el tama√±o de alg√∫n trozo.  
	417 (Expectation Failed), la petici√≥n del navegador no se procesa porque el servidor no es capaz de cumplir con los requerimientos de la cabecera Expect de la petici√≥n.  
	422 (Unprocessable Entity (WebDAV)), la petici√≥n del navegador tiene el formato correcto, pero sus contenidos tienen alg√∫n error sem√°ntico que impide al servidor responder.  
	423 (Locked (WebDAV)), el recurso solicitado por el navegador no se puede entregar porque est√° bloqueado.  
	424 (Failed Dependency (WebDAV)), la petici√≥n del navegador ha fallado debido al error de alguna petici√≥n anterior (por ejemplo una petici√≥n con el m√©todo PROPPATCH).  
	426 (Upgrade Required), el navegador debe cambiar a un protocolo diferente para realizar las peticiones (por ejemplo TLS/1.0).  
	428 (Precondition Required), el servidor requiere que la petici√≥n del navegador sea condicional (este tipo de peticiones evitan los problemas producidos al modificar con PUT un recurso que ha sido modificado por otra parte).  
	429 (Too Many Requests), el navegador ha realizado demasiadas peticiones en un determinado per√≠odo de tiempo (se utiliza sobre todo para forzar los l√≠mites de consumo de recursos de las APIs).  
	431 (Request Header Fileds Too Large), el servidor no puede procesar la petici√≥n porque una de las cabeceras de la petici√≥n es demasiado grande. Este error tambi√©n se produce cuando la suma del tama√±o de todas las peticiones es demasiado grande.
	
	Fuente: <https://bit.ly/2oAlV6K>

* **jbarriospd** (4) [1018152](https://platzi.com/comentario/1018152/) 

	En esta pagina puedes encontrar los codigos de error en forma de situaciones con gatos üê±  
	<https://http.cat/>

	* **ag94e** [1018152] (1)

		jajajaj genial, gracias!

	* **rubenpenap** [1018152] (1)

		jajajajaja excelente aporte! jajaja

	* **Emmanuel Garc√≠a** [1018152] (1)

		ü§£ü§£ü§£ü§£ü§£üôå

* **caramirezc** (4) [713289](https://platzi.com/comentario/713289/) 

	Codigo del cliente:
	``` 
	    <?php
	    $ch = curl_init( $argv[1]);
	    curl_setopt(
	    	$ch,
	    	CURLOPT_RETURNTRANSFER,
	    	true
	    );
	    
	    $response = curl_exec($ch);
	    $httpCode = curl_getinfo($ch, CURLINFO_HTTP_CODE);
	    
	    switch ($httpCode){
	    	case 200:
	    		echo 'Todo bien!';
	    		break;
	    	case 400:
	    		echo 'Pedido incorrecto';
	    		break;
	    	case 404:
	    		echo 'Recurso no encontrado';
	    		break;
	    	case 500:
	    		echo 'El servidor fallo';
	    		break;
	    }
	    
	```

* **darwinyusef** (3) [763276](https://platzi.com/comentario/763276/) 

	Solicito ayuda üòÑ ----He perdido ya dos veces la evaluaci√≥n por estas preguntas, ustedes me pueden aclarar estos temas la verdad aqu√≠ no encuentro la respuesta
	
	¬øC√≥mo debe informar el servidor acerca de errores ocurridos durante el procesamiento de un pedido?  
	Respuestas usadas / Cuerpo de la Respuesta - Excepciones
	
	¬øA trav√©s de qu√© mecanismo se reciben errores al invocar a una API RESTful?  
	Respuestas usadas / Callbacks - Excepciones

	* **mariorm1106** [763276] (1)

		0.30 del video Codigos de errores

	* **mariorm1106** [763276] (1)

		o sera Http_response_code

	* **william andres rodriguez borja** [763276] (1)

		los errores los informa en el status de la peticion Http.  
		El http status code son los codigos de 2xx si es ok 3xx redireccion 4xx errores controlados en cierta medida y 5xx Fallo del api.

	* **HENRY DSANTIAGO** [763276] (2)

		Los errores se manejan con los encabezados.

* **louismanson** (2) [1043305](https://platzi.com/comentario/1043305/) 

	esa imagen del chicle se ve muy asquerosa D:

* **Luis Rangel Castro** (2) [777312](https://platzi.com/comentario/777312/) 

	```
	    <?php
	    
	    /*
	    //-- Autenticacion via HTTP
	    //------------------------------->
	    $user = array_key_exists('PHP_AUTH_USER',$_SERVER) ? $_SERVER['PHP_AUTH_USER'] : '';
	    $pwd = array_key_exists('PHP_AUTH_PW',$_SERVER) ? $_SERVER['PHP_AUTH_PW'] : '';
	    
	    if ($user !== 'mauro' || $pwd !== '1234') {
	    	die;
	    }
	    //-- Autenticacion via HTTP
	    //-------------------------------<
	    */
	    
	    
	    /*
	    //-- Autenticacion via HMAC
	    //------------------------------->
	    if (!array_key_exists('HTTP_X_HASH',$_SERVER) || !array_key_exists('HTTP_X_TIMESTAMP',$_SERVER) || !array_key_exists('HTTP_X_UID',$_SERVER)) {
	    	die;
	    }
	    
	    list($hash,$uid,$timestamp) = [
	    	$_SERVER['HTTP_X_HASH'],
	    	$_SERVER['HTTP_X_UID'],
	    	$_SERVER['HTTP_X_TIMESTAMP']
	    ];
	    
	    $secret = 'Sh!! No se lo cuentes a nadie!';
	    
	    $newHash = sha1($uid.$timestamp.$secret);
	    
	    if ($newHash !== $hash) {
	    	die;
	    }
	    // Autenticacion via HMAC
	    //-------------------------------<
	    */
	    
	    
	    
	    // Autenticaci√≥n v√≠a Access Tokens
	    //------------------------------->
	    if (!array_key_exists('HTTP_X_TOKEN',$_SERVER)) {
	    	http_response_code(401);
	    	die;
	    }
	    $url = 'http://localhost:8001';
	    
	    $ch = curl_init($url);
	    curl_setopt(
	    	$ch,
	    	CURLOPT_HTTPHEADER,
	    	[
	    		"X-Token: {$_SERVER['HTTP_X_TOKEN']}"
	    	]
	    );
	    curl_setopt(
	    	$ch,
	    	CURLOPT_RETURNTRANSFER,
	    	true
	    );
	    $ret = curl_exec($ch);
	    if ($ret !== 'true'){
	    	http_response_code(403);
	    	die;
	    }
	    // Autenticaci√≥n v√≠a Access Tokens
	    //-------------------------------<
	    
	    
	    // Definimos los recursos disponibles
	    $allowedResourceTypes = [
	    	'books',
	    	'authors',
	    	'genres',
	    ];
	    
	    // Validamos que el recurso este disponible
	    $resourceType = $_GET['resource_type'];
	    
	    if (!in_array($resourceType,$allowedResourceTypes)) {
	    	http_response_code(400);
	    	die;
	    }
	    
	    // Defino los recursos
	    $books = [
	        1 => [
	            'titulo' => 'Lo que el viento se llevo',
	            'id_autor' => 2,
	            'id_genero' => 2,
	        ],
	        2 => [
	            'titulo' => 'La Iliada',
	            'id_autor' => 1,
	            'id_genero' => 1,
	        ],
	        3 => [
	            'titulo' => 'La Odisea',
	            'id_autor' => 1,
	            'id_genero' => 1,
	        ],
	    ];
	    
	    // Se indica al cliente que lo que recibir√° es un json
	    header('Content-Type: application/json');
	    
	    // Levantamos el id del recurso buscado
	    // utilizando un operador ternario
	    $resourceId = array_key_exists('resource_id', $_GET) ? $_GET['resource_id'] : '';
	    
	    // Generamos la respuesta asumiendo que el pedido es correcto
	    switch (strtoupper($_SERVER['REQUEST_METHOD'])) {
	    	case 'GET':
	    		if (empty($resourceId)) {
	    			echo json_encode($books);
	    		} else {
	    			if (array_key_exists($resourceId,$books)) {
	    				echo json_encode($books[$resourceId]);
	    			} else {
	    				http_response_code(404);
	    			}
	    		}
	    		break;
	    
	    	case 'POST':
	    		$json = file_get_contents('php://input');
	    		$books[] = json_decode($json,true);
	    		//echo array_keys($books)[count($books)-1];
	    		end($books);         // move the internal pointer to the end of the array
	    		$key = key($books);  // fetches the key of the element pointed to by the internal pointer
	    		echo json_encode($books[$key]);
	     		break;
	    
	    	case 'PUT':
	    		// Validamos que el recurso buscado exista
	    		if (!empty($resourceId) && array_key_exists($resourceId,$books)) {
	    			// Tomamos la entrada curda
	    			$json = file_get_contents('php://input');
	    
	    			// Tansformamos el json recibido a un nuevo elemento
	    			$books[$resourceId] = json_decode($json,true);
	    
	    			echo json_encode($books[$resourceId]);
	    		}
	    		break;
	    
	    	case 'DELETE':
	    		// Validamos que el recurso buscado exista
	    		if (!empty($resourceId) && array_key_exists($resourceId,$books)) {
	    			unset($books[$resourceId]);
	    			echo json_encode($books);
	    		}
	    		break;
	    }
	    
	    
	    
	    // Inicio el servidor en la terminal 1
	    // php -S localhost:8000 server.php
	    
	    // Terminal 2 ejecutar 
	    // curl http://localhost:8000 -v
	    // curl http://localhost:8000/\?resource_type\=books
	    // curl http://localhost:8000/\?resource_type\=books | jq
	    
	```

* **mariorm1106** (2) [774213](https://platzi.com/comentario/774213/) 

	* Curl_getinfo: obtener error en el cliente
	
	* http_response_code: informar errores del lado del server
	
	
	

* **MisaMagna** (2) [730096](https://platzi.com/comentario/730096/) 

	¬øQue cojones es la imagen del ni√±o que sale en los primeros minutos?

	* **Lele Lester** [730096] (1)

		Horrible

	* **darwinyusef** [730096] (1)

		Obviamente es un error üòê

	* **mariorm1106** [730096] (1)

		Malas practicas en las presentaciones @mchojrin

	* **william andres rodriguez borja** [730096] (1)

		eso fue un error 400 de presentacion.

	* **Diana Carolina Quintero** [730096] (1)

		Es un chicle, pero parece una herida

* **Alex Pacheco** (2) [677117](https://platzi.com/comentario/677117/) 

	como par√©ntesis, creo que la foto de un ni√±o con la cara desfigurada no aporta en nada, es mas es chocante.

	* **alan-saldivar** [677117] (1)

		Concuerdo, es algo grotezca y no puse atenci√≥n a otra cosa jaja

	* **Anfercode** [677117] (4)

		Pues si lo analizas mejor no esta desfigurado, estaba mascando chicle. =)

	* **Franklin Rosas** [677117] (3)

		Es un ni√±o con una bomba de chicle que se revent√≥ en su boda‚Ä¶ me parece que es un s√≠mil a cuando explota las REST API y no sabes que hacer.

* **Daniel Boullon** (1) [1117286](https://platzi.com/comentario/1117286/) 

	Ejemplo completo escrito en python 3:
	``` 
	    from flask import Flask, jsonify, make_response
	    from flask_restful import Resource, Api, abort, request
	    
	    app = Flask(__name__)
	    api = Api(app)
	    
	    books = {
	        '1': {
	            'isbn': '744586',
	            'title': 'Cien a√±os de soledad',
	            'description': 'Lorem insup lol.',
	            'autor': 'Gabriel Garcia Marquez'
	        },
	        '2': {
	            'isbn': '7894546',
	            'title': 'De animales a dioses',
	            'description': 'Lorem insup lol.',
	            'autor': 'Yuval Noah Harari'
	        }
	    }
	    
	    allowed_resource_types = [
	        "books",
	        "authors",
	        "genres"
	    ]
	    
	    defabort_if_book_doesnt_exist(book_id):
	        if book_id notin books:
	            abort(404, message='El libro con ID {} no existe'.format(book_id))
	    
	    
	    classRoot(Resource):
	        defget(self, resource_type):
	            if resource_type notin allowed_resource_types:
	                return'', 400
	    
	    
	    classBookList(Resource):
	        defget(self):
	            return jsonify(books)
	    
	        defpost(self):
	            json = request.get_json(force=True)
	            # The +1 is for create subsecuent index in the list of books
	            index = len(books) + 1 
	            books.update( {'{}'.format(index): json } )
	            return make_response(jsonify({'message': 'Libro agregado correctamente con ID: ' + str(index)}), 201)
	    
	    
	    classBook(Resource):
	        defget(self, book_id):
	            abort_if_book_doesnt_exist(book_id)
	            return make_response( jsonify(books[book_id]), 200 )
	        
	        defput(self, book_id):
	            abort_if_book_doesnt_exist(book_id)
	            json = request.get_json(force=True)
	            books.update( {'{}'.format(book_id): json} )
	            return jsonify(books)
	        
	        defdelete(self, book_id):
	            abort_if_book_doesnt_exist(book_id)
	            del books[ book_id ]
	            return jsonify({'message':'Libro con ID {} eliminado correctamente'.format(book_id)})
	    
	    
	    classAuthors(Resource):
	        pass
	    
	    
	    classGenres(Resource):
	        pass
	    
	    
	    api.add_resource(Root, '/<resource_type>')
	    api.add_resource(BookList, '/books')
	    api.add_resource(Book, '/books/<book_id>')
	    api.add_resource(Authors, '/authors')
	    api.add_resource(Genres, '/genres')
	    
	    
	    if __name__ == '__main__':
	        app.run(debug=True)
	    
	```

* **Iv√°n Acosta** (1) [1112068](https://platzi.com/comentario/1112068/) 

	Excelente el control de errores desde al lado del cliente como desde el lado del servidor.

* **Michael Emir Reynosa Beltr√°n** (1) [980186](https://platzi.com/comentario/980186/) 

	Es recomendable aparte de devolver un error 404 devolver el campo o parte del request que est√° mal? Si es as√≠, cual seria la estructura del objeto json recomendada?  
	{  
	errores: [ ‚ÄúEl id es un campo requerido‚Äù, ‚ÄúEl campo nombre no debe exceder los 10 caracteres‚Äù]  
	}

* **Rafael Carrillo** (1) [929966](https://platzi.com/comentario/929966/) 

	Exelente

# Aprender a utilizar una API Rest para la comunicaci√≥n FrontEnd/BackEnd [4332]

## 0150. Introducci√≥n a Ajax [21625](https://platzi.com/clases/1638-api-rest/21625-introduccion-a-ajax/)

### Descripci√≥n:


Es muy com√∫n tener comunicaciones con API REST al momento de tener una aplicaci√≥n de una sola p√°gina o SPA, ya sea para obtener o guardar datos. Esta comunicaci√≥n se realiza a trav√©s de AJAX, Asynchronous JavaScript XML. la clave es la parte de asincronismo pues el cliente no se queda bloqueado.

### Links:

* [Qu√© es AJAX y como funciona - YouTube](https://www.youtube.com/watch?v=_ybgWmSCAu8)

### Comentarios:

* **Franklin Rosas** (5) [711502](https://platzi.com/comentario/711502/) 

	 **¬øQU√â ES BOOTSTRAP Y C√ìMO FUNCIONA EN EL DISE√ëO WEB?**  
	![](https://www.arweb.com/chucherias/wp-content/uploads/2014/09/resp1-300x178.jpg)  
	Bootstrap, es un framework, te permite crear interfaces web con CSS y JavaScript, cuya particularidad es la de adaptar la interfaz del sitio web al tama√±o del dispositivo en que se visualice. Es decir, el sitio web se adapta autom√°ticamente al tama√±o de una PC, una Tablet u otro dispositivo. Esta t√©cnica de dise√±o y desarrollo se conoce como ‚Äúresponsive design‚Äù o dise√±o adaptativo.
	
	Si quieres leer un poco m√°s al respecto encontraras informaci√≥n en: [https://www.arweb.com/chucherias/¬øque-es-bootstrap-y-como-funciona-en-el-diseno-web/](https://www.arweb.com/chucherias/%C2%BFque-es-bootstrap-y-como-funciona-en-el-diseno-web/)  
	y aqu√≠ tambi√©n:  
	<https://es.wikipedia.org/wiki/Bootstrap_(framework)>

	* **Luis Rangel Castro** [711502] (2)

		[Platzi Bootstrap](https://platzi.com/clases/bootstrap/)

* **Rafael Carrillo** (2) [929978](https://platzi.com/comentario/929978/) 

	La parte de programaci√≥n de html deber√≠a saltar porque y dejar los archivos en la zona descarga, porque quita tiempo de la explicaci√≥n

	* **Gabriel De Andrade (Platzi)** [929978] (4)

		Algunas personas prefieren tener la explicaci√≥n, otras prefieren ir directo al grano ü§∑. De todas maneras te puedes saltar esa parte de la clase y descargar el archivo desde la secci√≥n de enlaces üòÑ

* **eduk2** (2) [825799](https://platzi.com/comentario/825799/) 
El javascript deber√≠a ir dentro del body, algo as√≠: <body> ... <script type="text/javascript" src="fichero.js"></script> </body> Aunque funcione fuera del body, no valida.

* **william andres rodriguez borja** (2) [783290](https://platzi.com/comentario/783290/) 

	Ajax es una tecnologia y una manera de realizar peticiones asincronas desde los navegadores web utilizando el objeto XMLHttpRequest.  
	actualmente lo navegadores modernos proveen una libreria llamada fetch para realizar estas llamadas sin necesidad de instalar nada.  
	Lo digo por que en ocasiones la gente se confunde y cre ajax es solo la libreria de jquery. angular usa ajax, react y en la actualidad casi cualquier sitio web.

* **Christian David S√°nchez** (2) [764049](https://platzi.com/comentario/764049/) 

	Documentaci√≥n de AJAX:  
	<https://api.jquery.com/category/ajax/>

* **caramirezc** (2) [713364](https://platzi.com/comentario/713364/) 

	c√≥digo index.html
	``` 
	    <html>
	        <head>
	            <linkrel="stylesheet"href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"crossorigin="anonymous">
	        </head>
	        <body>
	            <tableid="booksTable"class="table">
	                <thead>
	                    <tr>
	                        <th>Titulo</th>
	                        <th>Id_Autor</th>
	                        <th>Id_Genero</th>
	                    </tr>
	                </thead>
	            </table>
	            <tbody>
	            </tbody>
	            <inputtype="button"value="Cargar libros"id="loadBooks"/>
	            <divstyle="display: none;"id="messages">
	                <p></p>
	            </div>
	            <divstyle="display: none;"id="bookForm">
	                <hr/>
	                <table>
	                    <tr>
	                        <td>Titulo:</td>
	                        <td><inputtype="text"name="bookTitle"id="bookTitle"></td>
	                    </tr>
	                    <tr>
	                        <td>ID Autor:</td>
	                        <td><inputtype="number"name="bookAuthorId"id="bookAuthorId"min="1"></td>
	                    </tr>
	                    <tr>
	                        <td>ID Genero:</td>
	                        <td><inputtype="number"name="bookGenreId"id="bookGenreId"min="1"></td>
	                    </tr>
	                    <tr>
	                        <tdcolspan="2"><inputtype="button"value="Guardar"id="bookSave"/></td>
	                    </tr>
	                </table>
	            </div>
	        </body>
	    </html>
	    
	```

* **Ivan Alexis Carbajal Sandin** (2) [692885](https://platzi.com/comentario/692885/) 

	Me perd√≠, como hizo que el servidor tuviera el HTML despu√©s de ser levantado??

	* **Claudio Jesus V√°zquez Villanueva** [692885] (6)

		El servidor al no tener un punto de entrada lo que hace es Buscar autom√°ticamente un Index. Es como declarar que abriera impl√≠citamente el index.

	* **mariorm1106** [692885] (1)

		Como es solo Html + JS no es necesario un servidor

## 0160. Get via Ajax [21626](https://platzi.com/clases/1638-api-rest/21626-get-via-ajax/)

### Descripci√≥n:


### Comentarios:

* **Freddy C√≥rdova Arana** (6) [779531](https://platzi.com/comentario/779531/) 

	Si no te cargan bien los datos, tranquilo. En la siguiente clase lo solucionan üëç

* **MisaMagna** (4) [730146](https://platzi.com/comentario/730146/) 

	No entiendo porque en platzi se le da tanto hate al JQuery (que todos sabemos que no se usa) y se esta utilizando en un curso actualizado de API REST.

	* **Emerson Cede√±o Salazar** [730146] (8)

		cr√©eme que de primera pens√© lo mismo, mas como dice el profe: por temas de **simplicidad** est√° utilizando esta librer√≠a; y tomando en consideraci√≥n que el curso es de **API REST** y ~~no de javascript~~ _(que su implementaci√≥n con vanilla conllevar√≠a a m√°s l√≠neas de c√≥digo y podr√≠a desviar el tema n√∫cleo del curso‚Ä¶)_ , entonces me parece v√°lido ‚Ä¶

	* **william andres rodriguez borja** [730146] (1)

		fetch es una libreria que ya traen los navegadores para hacer peticiones ajax.  
		Jquery es un framework de javascript que adiciona muchas mas caracteristicas que hoy en dia js ya hace nativamente.  
		el solo hecho de cargar todo ese codigo no da ningun beneficio.  
		la libreria fetch es incluso mas facil de implementar.

	* **Abner Paul Ccari Lindo** [730146] (1)

		Miralo de otra perspectiva, porque en realidad este no es un curso de Javascript. Asi que puede ser una oportunidad para poner en practicar y cambiar de jQuery a Vanilla JavaScript.

* **platzerito02112019 platzerito02112019** (3) [684398](https://platzi.com/comentario/684398/) 
<h1>El codigo de router.php :</h1>
	``` 
	    <?php
	    
	    $matches = $_GET = [];
	    
	    // Excepcion para las  url principal sea index.html
	    if (in_array( $_SERVER["REQUEST_URI"], [ '/index.html', '/', '' ] )) {
	        echo file_get_contents( 'ruta de\index.html' );
	        die;
	    }
	    
	    if (preg_match('/\/([^\/]+)\/([^\/]+)/', $_SERVER["REQUEST_URI"], $matches)) {
	        $_GET['resource_type'] = $matches[1];
	        $_GET['resource_id'] = $matches[2];
	        
	        require 'server.php';
	    } elseif ( preg_match('/\/([^\/]+)\/?/', $_SERVER["REQUEST_URI"], $matches) ) {
	        $_GET['resource_type'] = $matches[1];
	        
	        require 'server.php';
	    } else {
	        error_log('No matches');
	        http_response_code( 404 );
	    }
	    
	```

	* **lgalagarza** [684398] (2)

		Gracias! Con este cambio s√≠ carga el listado de libros.

* **Jeronimo_T** (2) [1096551](https://platzi.com/comentario/1096551/) 

	JQuerry es una librer√≠a antigua. Lo digo para que nadie se lance a aprender esta librer√≠a cuando ya existen muchas que la reemplazaron. No en si porque sean mejores sino porque en el tiempo que se creo JQuerry era muy complicado crear comandos para interactuar con el DOM. Sin embargo el JS que hoy conocemos nos permite hacerlo sin la necesidad de usar JQuerry y de una forma mas sencilla que en aquellos tiempos.  
	Hoy en d√≠a existen muchas otras librerias, tales como **React.js** , **Vue.js** , etc.

	* **Diego Andres Cabrera Rojas** [1096551] (1)

		Muy cierto , Jquery , tuvo su tiempo , en estos momentos la mayoria de cosas que se hacen con Jquery se hacen facilmente como dices , de hecho hay un curso aca en platzi de Jquery a Javascript.

* **Christian David S√°nchez** (2) [764073](https://platzi.com/comentario/764073/) 

	Ejemplo:
	``` 
	    $.ajax({
	    	url: 'https://reqres.in/api/users',
	    	success: function(respuesta) {
	    		console.log(respuesta);
	    	},
	    	error: function() {
	            console.log("No se ha podido obtener la informaci√≥n");
	        }
	    });
	    
	```

* **Juan Felipe Lara Martinez** (1) [1093250](https://platzi.com/comentario/1093250/) 

	Buenas tarde envio mis c√≥digo de los cambio que me toco hacer para que funcionara. Es importante iniciar el servidor con route.php  
	index.html
	``` 
	    <scripttype="text/javascript">
	            //Se identifica el elemento por el id para que realice una funcion
	            $('#loadBooks').click(function () {
	                //Dentro de la funcion toma el parrafo con el id 'messages' para cargar el texto mientras realiza la consulta
	                $('#messages').first('p').text('Cargando libros....');
	                $('#messages').show();
	                //Se ejecuta la llamada al servidor mediante el metodo Ajax. Recibe un objeto jSon de la configuracion de la conexion
	                console.log('hola');
	                $.ajax(
	    
	                    {
	                        'url' : '/books', 'dataType': 'json',
	                        // Metodo que recibe la respuesta del servidor (HTTP_ERROR_CODE)
	                        'success': function (data) {
	    
	                            //Desaparece el mensaje
	                            $('#messages').hide();
	                            //Vacia la tabla
	                            $('#booksTable > tbody').empty();
	                            //Recorrer el arreglo de los resultados obtenidos y agregar cada uno a la tabla
	                            for (b in data) {
	                                addBook(data[b]);
	                            }
	                            $('#bookForm').show();
	                        }
	                    }
	                );
	            });
	            // Funcion para agregar cada unos elementos a la fila de la tabla
	            functionaddBook(book) {
	                $('#booksTable tr:last').after('<tr><td>' + book.titulo + '</td><td>' + book.id_autor + '</td><td>' + book.id_genero + '</td></tr>');
	            }
	        </script>
	    
	```
	
	route.php
	``` 
	    <?php
	    
	    $matches=[];
	    // Excepcion para las  url principal sea index.html
	    if (in_array( $_SERVER["REQUEST_URI"], [ '/index.html', '/', '' ] )) {
	        echo file_get_contents( 'ruta_aqui_directorio/index.html' );
	        die;
	    }
	    
	```

* **RemyLebeau** (1) [958969](https://platzi.com/comentario/958969/) 

	Hola estoy intentando cargar los libros por medio de un input text y que a pulsar el boton cargar libros los busque en el localhost y solo me traiga los libros que coincidan con la palabra que este en el input pero no he podido dar on el caso, alguien sabria como podria hacerlo y que metodos deberia emplear correctamente.

* **albertodanielcastillomendoza** (1) [941623](https://platzi.com/comentario/941623/) 

	Toda la tabla al momento de dar cargar libros, me aparece como undefined‚Ä¶ Ayuda!

	* **albertodanielcastillomendoza** [941623] (2)

		Si alguien le pasa lo mismo, logre resolverlo.  
		En el $.ajax despu√©s de la url le agregue esto:  
		‚Äòurl‚Äô: ‚Äò<http://localhost:8000/books>‚Äô,  
		‚ÄòdataType‚Äô : ‚Äòjson‚Äô,
		
		Quedando as√≠ y despu√©s ya todo igual. Mas aparte el profesor modifica algo del router.php en el siguiente video üòÉ

* **caramirezc** (1) [713367](https://platzi.com/comentario/713367/) 

	c√≥digo a√±adido a index.html
	``` 
	    <scriptsrc="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"type="text/javascript"></script>
	        <scripttype="text/javascript">
	        $('#loadBooks').click( function() {
	            $('#messages').first('p').text('Cargando libros...');
	            $('#messages').show();
	            $.ajax( {
	                'url': 'http://localhost:8000/books',
	                'success' : function( data ) {
	                    $('#messages').hide();
	                    $('#booksTable > tbody').empty();
	                    for ( b in data ) {
	                        addBook( data[b] );
	                    }
	                    $('#bookForm').show();
	                }
	            } );
	        });
	    
	        functionaddBook( book )
	        {
	            $('#booksTable tr:last').after('<tr><td>' + book.titulo + '</td><td>' + book.id_autor + '</td><td>' + book.id_genero + '</td></tr>');
	        }
	        </script>
	    
	```

* **sebastianjoshua** (1) [80379](https://platzi.com/comentario/957696/) 
Aqu√≠ el profesor levanta el servidor con: php -S localhost:8000 router.php No? o lo hace al igual que en la clase anterior c...

	* **Pablo_** [80379] (1)

		Me pas√≥ exactamente lo mismo, as√≠ que intent√© levantando el servidor _**php -S localhost:8000 router.php**_ y funcion√≥.

* **asanchez2091** (1) [77414](https://platzi.com/comentario/903833/) 
Tengo una pregunta: existe alguna otra alternativa para implementar Ajax que no sea jquery ??. He escuchado comentarios sobre que jquery ...

	* **Juan Carlos Pinz√≥n** [77414] (1)

		Por supuesto, puedes usar JavaScript puro para eso tenemos **Fetch** y pues funciona con promesas. JavaScript moderno, ten en cuenta que quiz√° no funcione en todos los navegadores, lo puedes transpilar. O hay una librer√≠a que he visto que est√° un poco de moda se llama Axios.

## 0170. Post via Ajax [21627](https://platzi.com/clases/1638-api-rest/21627-post-via-ajax/)

### Descripci√≥n:


### Comentarios:

* **Luis Rangel Castro** (4) [777496](https://platzi.com/comentario/777496/) 

	server.php
	``` 
	    <?php
	    
	    /*
	    //-- Autenticacion via HTTP
	    //------------------------------->
	    $user = array_key_exists('PHP_AUTH_USER',$_SERVER) ? $_SERVER['PHP_AUTH_USER'] : '';
	    $pwd = array_key_exists('PHP_AUTH_PW',$_SERVER) ? $_SERVER['PHP_AUTH_PW'] : '';
	    
	    if ($user !== 'mauro' || $pwd !== '1234') {
	    	die;
	    }
	    //-- Autenticacion via HTTP
	    //-------------------------------<
	    */
	    
	    
	    /*
	    //-- Autenticacion via HMAC
	    //------------------------------->
	    if (!array_key_exists('HTTP_X_HASH',$_SERVER) || !array_key_exists('HTTP_X_TIMESTAMP',$_SERVER) || !array_key_exists('HTTP_X_UID',$_SERVER)) {
	    	die;
	    }
	    
	    list($hash,$uid,$timestamp) = [
	    	$_SERVER['HTTP_X_HASH'],
	    	$_SERVER['HTTP_X_UID'],
	    	$_SERVER['HTTP_X_TIMESTAMP']
	    ];
	    
	    $secret = 'Sh!! No se lo cuentes a nadie!';
	    
	    $newHash = sha1($uid.$timestamp.$secret);
	    
	    if ($newHash !== $hash) {
	    	die;
	    }
	    // Autenticacion via HMAC
	    //-------------------------------<
	    */
	    
	    
	    
	    /*
	    // Autenticaci√≥n v√≠a Access Tokens
	    //------------------------------->
	    if (!array_key_exists('HTTP_X_TOKEN',$_SERVER)) {
	    	http_response_code(401);
	    	die;
	    }
	    $url = 'http://localhost:8001';
	    
	    $ch = curl_init($url);
	    curl_setopt(
	    	$ch,
	    	CURLOPT_HTTPHEADER,
	    	[
	    		"X-Token: {$_SERVER['HTTP_X_TOKEN']}"
	    	]
	    );
	    curl_setopt(
	    	$ch,
	    	CURLOPT_RETURNTRANSFER,
	    	true
	    );
	    $ret = curl_exec($ch);
	    if ($ret !== 'true'){
	    	http_response_code(403);
	    	die;
	    }
	    // Autenticaci√≥n v√≠a Access Tokens
	    //-------------------------------<
	    */
	    
	    
	    // Definimos los recursos disponibles
	    $allowedResourceTypes = [
	    	'books',
	    	'authors',
	    	'genres',
	    ];
	    
	    // Validamos que el recurso este disponible
	    $resourceType = $_GET['resource_type'];
	    
	    if (!in_array($resourceType,$allowedResourceTypes)) {
	    	http_response_code(400);
	    	die;
	    }
	    
	    // Defino los recursos
	    $books = [
	        1 => [
	            'titulo' => 'Lo que el viento se llevo',
	            'id_autor' => 2,
	            'id_genero' => 2,
	        ],
	        2 => [
	            'titulo' => 'La Iliada',
	            'id_autor' => 1,
	            'id_genero' => 1,
	        ],
	        3 => [
	            'titulo' => 'La Odisea',
	            'id_autor' => 1,
	            'id_genero' => 1,
	        ],
	    ];
	    
	    // Se indica al cliente que lo que recibir√° es un json
	    header('Content-Type: application/json');
	    
	    // Levantamos el id del recurso buscado
	    // utilizando un operador ternario
	    $resourceId = array_key_exists('resource_id', $_GET) ? $_GET['resource_id'] : '';
	    
	    // Generamos la respuesta asumiendo que el pedido es correcto
	    switch (strtoupper($_SERVER['REQUEST_METHOD'])) {
	    	case 'GET':
	    		if (empty($resourceId)) {
	    			echo json_encode($books);
	    		} else {
	    			if (array_key_exists($resourceId,$books)) {
	    				echo json_encode($books[$resourceId]);
	    			} else {
	    				http_response_code(404);
	    			}
	    		}
	    		break;
	    
	    	case 'POST':
	    		$json = file_get_contents('php://input');
	    		$books[] = json_decode($json,true);
	    		//echo array_keys($books)[count($books)-1];
	    		end($books);         // move the internal pointer to the end of the array
	    		$key = key($books);  // fetches the key of the element pointed to by the internal pointer
	    		echo json_encode($books[$key]);
	     		break;
	    
	    	case 'PUT':
	    		// Validamos que el recurso buscado exista
	    		if (!empty($resourceId) && array_key_exists($resourceId,$books)) {
	    			// Tomamos la entrada curda
	    			$json = file_get_contents('php://input');
	    
	    			// Tansformamos el json recibido a un nuevo elemento
	    			$books[$resourceId] = json_decode($json,true);
	    
	    			echo json_encode($books[$resourceId]);
	    		}
	    		break;
	    
	    	case 'DELETE':
	    		// Validamos que el recurso buscado exista
	    		if (!empty($resourceId) && array_key_exists($resourceId,$books)) {
	    			unset($books[$resourceId]);
	    			echo json_encode($books);
	    		}
	    		break;
	    }
	    
	    
	    
	    // Inicio el servidor en la terminal 1
	    // php -S localhost:8000 server.php
	    
	    // Terminal 2 ejecutar 
	    // curl http://localhost:8000 -v
	    // curl http://localhost:8000/\?resource_type\=books
	    // curl http://localhost:8000/\?resource_type\=books | jq
	    
	```

* **Luis Rangel Castro** (4) [777495](https://platzi.com/comentario/777495/) 

	router.php
	``` 
	    <?php
	    
	    $matches=[];
	    
	    // Excepcion para las  url principal sea index.html
	    if (in_array( $_SERVER["REQUEST_URI"], [ '/index.html', '/', '' ] )) {
	        echo file_get_contents( '/Users/luisrangel/dev/cursos/php/APIRest/index.html' );
	        die;
	    }
	    
	    if(preg_match('/\/([^\/]+)\/([^\/]+)/',$_SERVER["REQUEST_URI"],$matches))
	    {
	        $_GET['resource_type']=$matches[1];    
	        $_GET['resource_id']=$matches[2];
	        error_log(print_r($matches,1));
	        require 'server.php';
	    }elseif(preg_match('/\/([^\/]+)\/?/',$_SERVER["REQUEST_URI"],$matches))
	    {
	        $_GET['resource_type']=$matches[1];        
	        error_log(print_r($matches,1));
	        require 'server.php';
	    }else
	    {
	        error_log('No matches');
	        http_response_code(404);
	    }
	    
	```

* **Luis Rangel Castro** (4) [777493](https://platzi.com/comentario/777493/) 

	Index.html
	``` 
	    <!DOCTYPE html>
	    <htmllang="en">
	    
	    <head>
	        <metacharset="UTF-8">
	        <metaname="viewport"content="width=device-width, initial-scale=1.0">
	        <metahttp-equiv="X-UA-Compatible"content="ie=edge">
	        <title>Document</title>
	        <linkrel="stylesheet"href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
	            integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"crossorigin="anonymous">
	    </head>
	    <tableid="booksTable"class="table">
	        <thead>
	            <tr>
	                <th>Titulo</th>
	                <th>Id_Autor</th>
	                <th>Id_Genero</th>
	            </tr>
	        </thead>
	    </table>
	    <tbody>
	    </tbody>
	    <inputtype="button"value="Cargar libros"id="loadBooks" />
	    <divstyle="display: none;"id="messages">
	        <p></p>
	    </div>
	    <divstyle="display: none;"id="bookForm">
	        <hr />
	        <table>
	            <tr>
	                <td>Titulo:</td>
	                <td><inputtype="text"name="bookTitle"id="bookTitle"></td>
	            </tr>
	            <tr>
	                <td>ID Autor:</td>
	                <td><inputtype="number"name="bookAuthorId"id="bookAuthorId"min="1"></td>
	            </tr>
	            <tr>
	                <td>ID Genero:</td>
	                <td><inputtype="number"name="bookGenreId"id="bookGenreId"min="1"></td>
	            </tr>
	            <tr>
	                <tdcolspan="2"><inputtype="button"value="Guardar"id="bookSave" /></td>
	            </tr>
	        </table>
	    </div>
	    </body>
	    <scriptsrc="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"type="text/javascript"></script>
	    <scriptsrc="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
	        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
	        crossorigin="anonymous"></script>
	    <tableid="booksTable"class="table">
	        <thead>
	            <tr>
	                <th>Titulo</th>
	                <th>Id_Autor</th>
	                <th>Id_Genero</th>
	            </tr>
	        </thead>
	    </table>
	    <tbody>
	    </tbody>
	    <inputtype="button"value="Cargar libros"id="loadBooks" />
	    <divstyle="display: none;"id="messages">
	        <p></p>
	    </div>
	    <divstyle="display: none;"id="bookForm">
	        <hr />
	        <table>
	            <tr>
	                <td>Titulo:</td>
	                <td><inputtype="text"name="bookTitle"id="bookTitle"></td>
	            </tr>
	            <tr>
	                <td>ID Autor:</td>
	                <td><inputtype="number"name="bookAuthorId"id="bookAuthorId"min="1"></td>
	            </tr>
	            <tr>
	                <td>ID Genero:</td>
	                <td><inputtype="number"name="bookGenreId"id="bookGenreId"min="1"></td>
	            </tr>
	            <tr>
	                <tdcolspan="2"><inputtype="button"value="Guardar"id="bookSave" /></td>
	            </tr>
	        </table>
	    </div>
	    </body>
	    <scriptsrc="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
	        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
	        crossorigin="anonymous"></script>
	    <scriptsrc="//ajax.googleapis.com/ajax/libs/jquery/1.10.2/jquery.min.js"type="text/javascript"></script>
	    <scripttype="text/javascript">
	        $('#loadBooks').click(function () {
	            $('#messages').first('p').text('Cargando libros...');
	            $('#messages').show();
	            $.ajax({
	                'url': 'http://localhost:8000/books',
	                'success': function (data) {
	                    $('#messages').hide();
	                    $('#booksTable > tbody').empty();
	                    for (b in data) {
	                        addBook(data[b]);
	                    }
	                    $('#bookForm').show();
	                }
	            });
	        });
	    
	        functionaddBook(book) {
	            $('#booksTable tr:last').after('<tr><td>' + book.titulo + '</td><td>' + book.id_autor + '</td><td>' + book.id_genero + '</td></tr>');
	        }
	    
	        $('#bookSave').click(function() {
	            var newBook = {
	                'titulo' : $('#bookTitle').val(),
	                'id_autor' : $('#bookAuthorId').val(),
	                'id_genero' : $('#bookGenreId').val()
	            };
	            $('#messages').first('p').text('Guardando libro...');
	            $('#messages').show();
	    
	            $.ajax({
	                'url' : 'http://localhost:8000/books',
	                'method': 'POST',
	                'data': JSON.stringify(newBook),
	                'success': function(data){
	                    $('#messages').hide();
	                    addBook(newBook);
	                }
	            });
	        });
	    </script>
	    
	    </html>
	    
	```

* **HENRY DSANTIAGO** (2) [931097](https://platzi.com/comentario/931097/) 

	Ayuda por favor.  
	Este es mi m√©todo POST en el server.php
	``` 
	        case'POST':
	    
	            //Tomamos la entrada "cruda"
	            $json = file_get_contents('php://input');
	    
	            //Transformamos el json recibido a un nuevo elemento del arreglo
	            $books[] = json_decode( $json, true);
	    
	            //Devuelve el nuevo n√∫mero identificador del libro reci√©n a√±adido
	            echo array_keys($books)[count($books) - 1];
	    
	            //Devuelve el arreglo de libros como si fuese GET
	            echo json_encode( $books );
	        
	        break;```
	    
	    Y este es mi script de agregar un nuevo libro: 
	    
	    
	    
	    
	```
	
	$(‚Äô#bookSave‚Äô).click( function(){  
	var newBook = {  
	‚Äòtitulo‚Äô: $(‚Äô#bookTitle‚Äô).val(),  
	‚Äòid_autor‚Äô: $(‚Äô#bookAuthorId‚Äô).val(),  
	‚Äòid_genero‚Äô: $(‚Äô#bookGenreId‚Äô).val()  
	}
	``` 
	            console.log(JSON.stringify(newBook));
	    
	            $('#messages').first('p').text('Guardando Libro...');
	            $('#messages').show();
	    
	            $.ajax({
	                'url': 'http://localhost:8000/books',
	                'method' : 'POST',
	                'data' : JSON.stringify( newBook ),
	                'beforeSend': function(){
	                    console.log('Agregando libro...');
	                },
	                'success' : function( data ) {
	                    $('#messages').hide();
	                    addBook( newBook );                    
	                }
	            }); 
	    
	    });```
	    
	```
	
	El problema es que no se carga el nuevo libro en la p√°gina. Coloqu√© un ‚ÄòbeforeSend‚Äô, el cual al darle click al bot√≥n agregar, me env√≠a en consola el mensaje ‚ÄúAgregando libro‚Ä¶‚Äù y esto s√≠ se ejecuta, pero al parecer el problema est√° en el ‚Äòsuccess‚Äô, es como si nunca se ejecutara. Entonces no s√© como solucionarlo, si alguien sabe, le agradezco me ayude con eso.

* **Christian David S√°nchez** (1) [764177](https://platzi.com/comentario/764177/) 

	POST con AJAX
	``` 
	    $.ajax({
	      type: "POST",
	      url: url,
	      data: data,
	      success: success,
	      dataType: dataType
	    });
	```

* **caramirezc** (1) [713375](https://platzi.com/comentario/713375/) 

	c√≥digo a√±adido a index.html
	``` 
	    $('#bookSave').click( function() {
	            var newBook = {
	                titulo: $('#bookTitle').val(),
	                id_autor: $('#bookAuthorId').val(),
	                id_genero: $('#bookGenreId').val(),
	            }
	    
	            $('#messages').first('p').text('Guardando libro...');
	            $('#messages').show();
	            
	            $.ajax( {
	                'url': window.location.href + (window.location.href.substr(window.location.href.length - 1) == '/' ? '' : '/' ) + 'books',
	                'method': 'POST',
	                'data': JSON.stringify( newBook ),
	                'success' : function( data ) {
	                    $('#messages').hide();
	                    addBook( newBook );
	                }
	            });
	        });
	    
	```

* **Cristian Pisco** (1) [695455](https://platzi.com/comentario/695455/) 

	En el AJAX cuando se hace el request a localhost:8000/books, no viene el Json, sino el HTML, pens√© que corrigiendo el router.php se arreglaba. ¬øQu√© estoy haciendo mal?

	* **abrahamaquinoe** [695455] (1)

		Hola revisa estos detalles:
		
		Revisa si tienes esto en router.php:  
		if ( in_array( $_SERVER[‚ÄúREQUEST_URI‚Äù], [ ‚Äò/index.html‚Äô, ‚Äò/‚Äô, ‚Äò‚Äô ] ) ) {  
		echo file_get_contents( ‚Äò‚Ä¶/api_rest_and_ajax/index.html‚Äô );
		``` 
		    die;
		    
		```
		
		}
		
		‚Äì en file_get_contents() pon la ruta de tu archivo index.html (si todo est√° en una sola carpeta solo pones ‚Äòindex.html‚Äô)
		
		Ejecuta el servidor:  
		php -S localhost:8000 router.php
		
		Si la ruta <http://localhost:8000/books> lo ejecutas en el navegador, deber√≠as obtener el json.

* **platzerito02112019 platzerito02112019** (1) [684404](https://platzi.com/comentario/684404/) 

	## router.php
	``` 
	    <?php
	    
	    $matches = $_GET = [];
	    
	    // Excepcion para las  url principal sea index.html
	    if (in_array( $_SERVER["REQUEST_URI"], [ '/index.html', '/', '' ] )) {
	        echo file_get_contents( 'E:\curso de API - REST\index.html' );
	        die;
	    }
	    
	    if (preg_match('/\/([^\/]+)\/([^\/]+)/', $_SERVER["REQUEST_URI"], $matches)) {
	        $_GET['resource_type'] = $matches[1];
	        $_GET['resource_id'] = $matches[2];
	        
	        require 'server.php';
	    } elseif ( preg_match('/\/([^\/]+)\/?/', $_SERVER["REQUEST_URI"], $matches) ) {
	        $_GET['resource_type'] = $matches[1];
	        
	        require 'server.php';
	    } else {
	        error_log('No matches');
	        http_response_code( 404 );
	    }
	    
	    
	```

## 0180. Deploy [21628](https://platzi.com/clases/1638-api-rest/21628-deploy/)

### Descripci√≥n:


### Comentarios:

* **Luis Rangel Castro** (5) [777500](https://platzi.com/comentario/777500/) 

	[Curso de Deploy con Now.sh](https://platzi.com/clases/deploy-now/)

* **Iv√°n Acosta** (2) [1113772](https://platzi.com/comentario/1113772/) 

	Me perd√≠ con las versiones y los archivos en la secci√≥n de AJAX por lo diferentes cambios que se realizaron a los archivos y que no quedaron documentadas o en e video! üò¶

* **Christian David S√°nchez** (2) [764216](https://platzi.com/comentario/764216/) 

	Que espectacular, no conoc√≠a NOW para el deployment üòÆ

* **MisaMagna** (2) [730206](https://platzi.com/comentario/730206/) 

	Esto de [now.sh](http://now.sh) me ha parecido espectacular, siempre me pregunte como pod√≠a yo hacer un deployment de una aplicaci√≥n front, as√≠ que muchas gracias!

	* **Christian David S√°nchez** [730206] (1)

		X2, en 3 minutos de videos aprendimos algo nuevo.

* **Gonzalo Vazquez** (1) [786673](https://platzi.com/comentario/786673/) 

	No entiendo por que la url puede cambiar constantemente y qu√© fue lo que modific√≥? Mando imagen de la linea que no entiendo
	
	![pegunta.png](https://static.platzi.com/media/user_upload/pegunta-720978d7-f82a-4235-bbaa-e33f52ac094c.jpg)

	* **Jecsham Castillo** [786673] (3)

		Con cambiar constantemente se refiere a que se va a utilizar la URL de tu dominio (en este caso se usa el que proporcion√≥ Now)
		
		Lo que hace la l√≠nea de c√≥digo 76 es obtener la URL de la pesta√±a y agregarle el parametro books al final.
		
		Puedes reemplazar dicha URL por una est√°tica tambi√©n.

# Conocer buenas pr√°cticas del dise√±o de APIs REST [4367]

## 0190. 7 Buenas pr√°cticas del dise√±o de APIs RESTful [21789](https://platzi.com/clases/1638-api-rest/21789-7-buenas-practicas-del-diseno-de-apis-restful/)

### Descripci√≥n:


Felicitaciones has llegado al final del curso, ahora conoces todos los tecnicismos para generar una API RESTful. Recuerda seguir las buenas pr√°cticas:

  1. Siempre utiliza **sustantivos para nombrar tus recursos**.
  2. A√±ade los **nombres en plural** para las urls.
  3. Las modificaciones a recursos deben hacerse con su verbo HTTP correspondiente: POST, PUT o DELETE.
  4. Para devolver recursos asociados a otro recurso utiliza url que incorporen subrecursos: `/Autos/1/Choferes`.
  5. Navegabilidad v√≠a v√≠nculos.
  6. Cuando devuelvas colecciones deben ser filtrables, ordenables y paginables.
  7. Versiona tu API, a√±ade el n√∫mero de versi√≥n en la url: `v1/Autos`.



No olvides tomar el examen para evaluar tus conocimientos y dejar una review del curso.

### Comentarios:

* **MisaMagna** (5) [730217](https://platzi.com/comentario/730217/) 

	Tambi√©n quiero agregar una muy buena practica y es que si el servidor maneja mas de un recurso, lo suyo es usar un basepath, que normalmente viene con el versionado, ejemplo:
	
	<https://misitio.com/serviciosbancarios/v1/transferencias/>  
	<https://misitio.com/serviciosbancarios/v1/pagoprovedores/>  
	<https://misitio.com/serviciosbancarios/v1/nominas/>
	
	Aqui la estructura es: protocolo://misitioweb/basepath/versionado/recurso

* **Jose Luis Campos Bautista** (4) [1022315](https://platzi.com/comentario/1022315/) 

	Les comparto algunas notas tomadas durante el curso. [Notas](https://github.com/bautistaj/notes/blob/master/BACK_END/API_REST/note.md)

* **Fabio Andres Arango Grajales** (3) [674590](https://platzi.com/comentario/674590/) 

	Gracias platzi justo lo que necesito en mi trabajo,

* **Michael Emir Reynosa Beltr√°n** (2) [980220](https://platzi.com/comentario/980220/) 

	Seria buena idea que se agregar√°n ejemplos a cada uno de los puntos de las buenas pr√°cticas. En especial me interesa cuando menciona que al devolver colecciones deban ser filtrables, paginables y ordenables.

* **Christian David S√°nchez** (2) [763069](https://platzi.com/comentario/763069/) 

	üòÆ lo del versionado no lo sabia.  
	Comenzare a implementarlo

	* **mariorm1106** [763069] (2)

		o: si muy bueno para tener en cuenta

* **Alex Pacheco** (2) [677161](https://platzi.com/comentario/677161/) 

	Recursos = Sustantivos, siempre las URLs en Plurar.  
	Colecciones deben ser Filtrables,Ordenables y paginables por medio de parametros

* **Rafael Carrillo** (1) [930081](https://platzi.com/comentario/930081/) 

	Excelente

* **Jorge Ra√∫l Piscoya Calder√≥n** (1) [913449](https://platzi.com/comentario/913449/) 

	Me gust√≥ el enfoque tem√°tico del curso (que es lo importante). Pero particularmente lo que me desagrad√≥ fue que diga ‚Äúei pi ai‚Äù en lugar de API tal y como suena. Bajo esa l√≥gica; curl, http, rest, ful, tambi√©n tendr√≠a que haberlo deletrado en ingl√©s.

* **Arlex Felipe Llanos Betancourt** (1) [893822](https://platzi.com/comentario/893822/) 

	El curso estuvo genial, el conocimiento b√°sico que se debe tener, las normas para unas buenas practicas de dise√±o de API‚Äôs e incluso el deploy con now fue increible, üòÑ

* **David Santiago Gonz√°lez Ramos** (1) [873510](https://platzi.com/comentario/873510/) 

	Muy buen curso!!!

	* **Kevin Javier Morales (Platzi)** [873510] (1)

		Cu√©ntanos que fue lo que m√°s te gusto del curso üòÉ

* **Freddy C√≥rdova Arana** (1) [779545](https://platzi.com/comentario/779545/) 

	Me encant√≥ este curso üòÑ

* **annaduarte** (1) [674175](https://platzi.com/comentario/674175/) 

	¬ø Com√≥ ser√≠a el endpoint cuando quiero realizar una acci√≥n ?  
	/employees/take-joboffert por ejemplo est√°?

	* **Mois√©s Cede√±o** [674175] (1)

		¬øQu√© acci√≥n quieres hacer con take-joboffert?
		
		Recuerda que tienes 4 m√©todos b√°sicos: GET, POST, PUT, DELETE.
		
		  1. Si al ejecutar esa acci√≥n quieres crear un nuevo registro de una persona que tom√≥ un trabajo, deber√≠a usar POST.
		
		
		
		Ejemplo: /employees/take-joboffert/1.
		
		Usas el m√©todo POST, donde 1 es el id de la persona que est√° tomando el trabajo.
		
		  1. Si deseas modificar la vacante de trabajo y decir que el atributo inscritos ahora es 1, deber√≠as usar PUT.
		
		
		
		Ejemplo: /employees/take-joboffert/10
		
		Usas el m√©todo PUT, donde 10 es el id de la vacante a la cu√°l ahora le vas a inscribir a 1 persona.
		
		  1. Si deseas eliminar la vacante de trabajo porque una persona la est√° tomando, debes usar DELETE.
		
		
		
		Ejemplo: /employees/take-joboffert/1
		
		Usas el m√©todo DELETE vacante con id 1 porque la est√°n tomando.

* **HENRY DSANTIAGO** (0) [935745](https://platzi.com/comentario/935745/) 

	¬°Ayuda por favor!  
	Ya instal√© el m√°s reciente Nodejs, el m√°s reciente Now, pero a√∫n as√≠ me sigue generando este error:
	``` 
	    The Runtime @now/php is using nodejs8.10, which was discontinued byan upstream provider. In turn, we have to ask you to upgrade your Runtime toa more recent versionor consult the author for more details.```
	    
	    ¬øC√≥mo se soluciona? 
	    
	```

