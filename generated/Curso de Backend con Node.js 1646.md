# Tu primera experiencia con Node.js

## 0010. Introducci√≥n y bienvenida

### Descripci√≥n:


**Guillermo Rodas** ser√° tu profesor en este curso, √©l tiene m√°s 6 a√±os dedicado a programar s√≥lo en JavaScript y forma parte del equipo de **Auth0** , adem√°s de ser **Google Developer Expert** (GDE) en Web Technologies y organizador de eventos como Medellin CSS y CSS Conf.

Requisitos antes de iniciar:

  * Node y NPM
  * Editor de texto ya sea vsCode, Atom o Sublime Text
  * Navegador Chrome o Firefox
  * Extensi√≥n JSON viewer
  * Postman



### Links:

* [Careers - Auth0](https://auth0.com/careers)

* [https://www.meetup.com/medellincss](https://www.meetup.com/medellincss)

* [Medell√≠n Identidad y Seguridad (Medell√≠n, Colombia) | Meetup](https://www.meetup.com/Medellin-Identidad-y-Seguridad/)

* [https://cssconf.co](https://cssconf.co)

* [GitHub - tulios/json-viewer: It is a Chrome extension for printing JSON and JSONP.](https://github.com/tulios/json-viewer)

* [Postman | API Development Environment](https://www.getpostman.com/)

### Comentarios:

* **Felipe Acosta** (3)

	
	Yo tomeee la foto de medellin CSS jaajajajaja !

	* **glrodasz** (1)

		
		Gracias por la buena foto!

* **Erik Alexander Estrada Otondo** (2)

	
	Alguien sabe que proyectos se pueden hacer con Node.js y si conoce links donde se puedan ver esos proyectos, como en github o en la web?

	* **glrodasz** (3)

		
		Se puede hacer cualquier tipo de proyecto como por ejemplo un CMS: <https://strapi.io>.
		
		Hay un lista de proyectos aca: <https://github.com/sqreen/awesome-nodejs-projects>

* **Brando Rodr√≠guez** (2)
Javascript üíõ El primero y entusiasmado!!

	* **glrodasz** (1)

		
		Espero que hayas podido terminar. Cualquier feedback es bienvenido!

* **Pablo Puente** (2)

	
	lo estaba esperando! yeah!!

	* **glrodasz** (1)

		
		Espero que hayas podido terminalos, cualquier feedback es bienvenido.

* **Jose Rodriguez Luis** (2)

	
	super motivado por este curso

	* **glrodasz** (1)

		
		Espero que te haya gustado, cualquier feedback es bievenido!

* **ferroblesh** (2)

	
	¬øCuales son los requisitos previos para este curso?

	* **ignacio ele** (2)

		
		Lo dice al final del v√≠deo üòÜ  
		-Conocer los fundamentos de js  
		-Nodejs  
		-Un editor de texto(vscode o atom)  
		-Navegador(chrome, firefox)  
		-Plugins de chrome para ver JSON en la web y Postman para las peticiones

	* **ferroblesh** (2)

		
		Gracias

* **carlosextra1** (1)

	
	vamos a ver que tal el curso y el profe!

* **karl-behrens-gil** (1)

	
	Con todo a Node!

* **diego-miranda-vazquez** (1)

	
	Nodeeee

* **Cristobal Pe√±a** (1)

	
	Qu√© curso se hace primero? Este de backend o el que se llama ‚ÄúCurso de Fundamentos de Node.js‚Äù?. El nombre me indica que deber√≠a ser el de fundamentos, sin embargo la ruta de aprendizaje de la carrera sugiere lo contrario. Ojal√° alguien me lo pudiera aclarar. Gracias.

	* **CaroB (Platzi)** (2)

		
		Hola Cristobal, primero el de Fundamentos y despu√©s el de Backend con Node.

* **Iair Poloniecki** (1)

	
	Si para ustedes el backend y Node son un ‚Äúagujero negro‚Äù como para m√≠, les recomiendo que primero hagan [este curso de Node](https://platzi.com/clases/backend-js/) que empieza desde m√°s b√°sico que este.  
	üòÉ

* **luis-carlos-zabala** (1)
Hola a todos, A nivel de conocimientos ¬øque diferencia hay entre este curso y todos los dem√°s de NodeJs? Incluso, creo que esta semana se...

	* **Erik Ochoa (Platzi)** (4)

		
		Es un curso intermedio que forma parte de la **Escuela de Javascript** , una serie de cursos en los que se va trabajando un mismo proyecto desde las bases hasta un resultado profesional.
		
		Pueder conocer m√°s, [aqu√≠](https://platzi.com/blog/escuela-javascript-fullstack/).

## 0020. ¬øQu√© es Node.js

### Descripci√≥n:


En esta clase el profesor Guillermo Rodas nos explica qu√© es Node.js y algunas de sus ventajas.

Node.js es un entorno de ejecuci√≥n para JavaScript construido con el motor JavaScript V8 de Chrome. JavaScript es un lenguaje interpretado pero en Node.js tenemos algo llamado el JIT Compiler que es una especie de monitor que optimiza fragmentos de c√≥digo que son ejecutados frecuentemente.

### Links:

* [Node.js](https://nodejs.org/es/)

* [A crash course in just-in-time (JIT) compilers - Mozilla Hacks - the Web developer blog](https://hacks.mozilla.org/2017/02/a-crash-course-in-just-in-time-jit-compilers/)

* [JavaScript engine - Wikipedia](https://en.wikipedia.org/wiki/JavaScript_engine)

* [History of Node.js on a Timeline | @RisingStack](https://blog.risingstack.com/history-of-node-js/)

### Comentarios:

* **heysoypaez** (22)

	
	 _Hagamos como hac√≠a Socrates: preguntar y preguntar_
	
	**¬øQu√© es node.js ?**  
	Node.js es un entorno de ejecucion para javascript
	
	**¬øQu√© es un entorno de ejecuci√≥n?**
	
	Un entorno de ejecucion es una capa encima del sistema operativo que ejecuta una pieza de software.
	
	**¬øQu√© nos permite?**
	
	Usar javascript para el servidor.

	* **karl-behrens-gil** (1)

		
		Muy buen resumen, muchas gracias!

* **Jorge Velasquez** (3)

	
	 **En conclusi√≥n**  
	Node js: es el resultado de tomar el motor de JavaScript Chrome V8 para crear un entorno de ejecuci√≥n y as√≠ ejecutar JavaScript del lado del Servidor. üë®‚Äçüíª

* **Jes√∫s Antonio Chac√≥n Rodriguez** (2)

	
	muy buena la animacion!

* **oscar-leon846** (2)
![nodejs.png](https://static.platzi.com/media/user_upload/nodejs-0b96c842-708f-4bba-8709-136281bb1e54.jpg)

	* **Pablo Dom√≠nguez Dur√°n** (2)

		
		Notas del Cornell!
		
		Qu√© app usas?

	* **gsusmab** (1)

		
		Notion

* **Jes√∫s Miguel Quinto Teran** (2)

	
	Este articulo sobre V8 esta muy bueno: [https://medium.com/reactbrasil/como-o-javascript-funciona-dentro-da-engine-v8-5-dicas-sobre-como-escrever-c√≥digo-otimizado-e05af6088fd5](https://medium.com/reactbrasil/como-o-javascript-funciona-dentro-da-engine-v8-5-dicas-sobre-como-escrever-c%C3%B3digo-otimizado-e05af6088fd5)

* **Jes√∫s Miguel Quinto Teran** (2)

	
	Chrome V8 es un motor de c√≥digo abierto para JavaScript creado por Google, siendo su programador jefe Lars Bak.4‚Äã
	
	Est√° escrito en C++ y es usado en Chromium, Google Chrome y en Microsoft Edge a partir del 2019.5‚Äã6‚Äã Tambi√©n est√° integrado en el navegador de internet del sistema operativo Android 2.2 ‚ÄúFroyo‚Äù

* **carlosextra1** (1)

	
	jeje esta cool el video!

* **sergio-medina93** (1)

	
	S√∫per la animaci√≥n.

* **FizIrvin** (1)

	
	buena animaci√≥n de la maquinita

* **Iraida Mercedes Barreto D√≠az** (1)
Hola ¬øAlguien conoce una buena librear√≠a para trabajar con workers de descargas (como Redis) en Node.js? Gracias üòÉ

	* **Erik Ochoa (Platzi)** (4)

		
		Si buscas una alternativa a **Redis** puedes probar [memcached](https://www.npmjs.com/package/memcached), en cuanto a ‚ÄúWorkers de descargas‚Äù no s√© si te refieres multi-hilos, para eso en Node puedes usar cosas como [worker threads](https://nodejs.org/api/worker_threads.html) o [cluster](https://nodejs.org/api/cluster.html).

## 0030. ¬øQu√© es Node.js y para qu√© sirve

### Descripci√≥n:


### Comentarios:

* **jasanhdz** (55)

	
	Les dejo mis notas que me apoyaron en el aprendizaje del curso üòÑ  
	<https://github.com/JasanHdz/backendnodejs/tree/master/notes>  
	pd: no se rindan, √©xito üí™

	* **glrodasz** (2)

		
		Wow! Estas notas estan increibles! Gracias por el aporte!

	* **romerodiesan** (3)

		
		No te conozco pero ya te amo.

	* **Arlex Felipe Llanos Betancourt** (1)

		
		Grandes apuntes, geniales ! (y)

	* **predator0077** (1)

		
		Wooow Muchas Gracias compa√±ero, se agradece ese tipo de aportes. √âxitos para ti tambi√©n en todo.

	* **Jaime Gonzalez** (1)

		
		muy bueno. Gracias por el aporte!

	* **David Valecillo** (1)

		
		excelente aporte. Gracias

	* **Karel Mu√±iz Perdomo** (1)

		
		Te invito a una cerveza man.

	* **karl-behrens-gil** (1)

		
		Tremendo aporte!! Muchas gracias por tu dedicaci√≥n y colaboraci√≥n.

	* **Tom√°s Mercado** (1)

		
		Much√≠simas gracias!!!

	* **leovalero** (1)

		
		Muchas gracias!!! Me has ayudado un mont√≥n.

	* **carlosextra1** (1)

		
		Gracias por el aporte!

* **Sebastian Cardoso Castillo** (6)

	
	 **Dato curioso:** el mismo creador de Node, Ryan Dahl cre√≥ hace poco **Deno** (Node al rev√©z). El mismo esta creado con Rust y Typescript.

	* **edwintrumpet** (2)

		
		S√≠, se supone que va a ser el reemplazo de Nodejs ya que desde que fue creado Nodejs javaScript ha tenido muchos cambios que requieren hacer un cambio grande para sacarle el mayor provecho al lenguaje.

	* **glrodasz** (5)

		
		Gracias por el dato. La realidad es que siempre se estar√°n creando nuevos lenguajes y frameworks. Mi recomendaci√≥n es tener mucho cuidado con el hype de estos, porque el exito de ellos dependen de la aceptaci√≥n en la comunidad y el respaldo que tenga detras del mismo.

* **mrcMesen** (4)

	
	Me gust√≥ la clase, facil de entender y sin mucho rodeo.

* **Hebert de Le√≥n** (2)

	
	¬°¬°Qu√© emoci√≥n!!

	* **glrodasz** (1)

		
		Espero que hayas podido terminar el curso. Cualquier feedback es bienvenido!

* **carlosextra1** (1)

	
	wooo eso de que node se compila esta muy chingon!!

## 0040. Diferencias entre Node.js y JavaScript

### Descripci√≥n:


En JavaScript del lado del cliente tenemos el DOM y el CSSDOM as√≠ como el objeto window para manipular los elementos de nuestra p√°gina adem√°s una serie de APIs, aqu√≠ unos ejemplos:

  * fetch
  * SessionStorage y LocalStorage
  * canvas
  * bluetooth
  * audio
  * web authentication



Mientras que en Node.js no tenemos un DOM ni un objeto windows, lo que s√≠ tenemos son una serie de m√≥dulos que nos permiten interactuar con los recursos de la m√°quina como el sistema operativo y el sistema de archivos, por ejemplo:

  * os
  * fs
  * http
  * util
  * debugger
  * stream
  * events



### Links:

* [Web APIs | MDN](https://developer.mozilla.org/en-US/docs/Web/API)

* [Index | Node.js v12.9.0 Documentation](https://nodejs.org/api/)

### Comentarios:

* **heysoypaez** (21)

	
	#Diferencias entre javascript y node.js
	
	**En javascript**
	
	  * En javascript tenemos el DOM. La interfaz web.
	  * En javascript tambien tenemos el CSSOM
	  * Tambien el fetch API
	  * Toda la capa del web storage
	  * Tambien el canvas API
	  * Las APIs en general del navegador
	
	
	
	**En Node.js**
	
	  * Node tiene el modulo de HTTP para crear servidores
	  * El modulo del sistema operativo para comunicarse con el SO
	  * El modulo utiliddes
	  * El modulo debugger
	
	
	
	**En com√∫n**
	
	  * Librerias comunes streams
	  * Eventos
	  * Ecmascript modules
	  * Consola
	
	

	* **Samuel Pilay Mu√±oz** (1)

		
		por favor corregir **El modulo utiliddes**

	* **carlosextra1** (1)

		
		Gracias!

* **oscar-leon846** (9)
![diferenciasJS-Nodejs.png](https://static.platzi.com/media/user_upload/diferenciasJS-Nodejs-2c5e4928-c144-495b-9378-88c95996f0e0.jpg)

	* **carlosextra1** (1)

		
		Excelente aporte, solo que se pixelea un poco

* **citux** (2)

	
	üòÉ el primero por aca !!

* **Diego Andres Cabrera Rojas** (1)

	
	Entonces se podr√≠a decir que Javascript se maneja a trav√©s de Api‚Äôs y Node,js se maneja a traves de m√≥dulos ?

## 0050. Resumen Diferencias Nodejs y Javascript

### Descripci√≥n:


Ahora que ya sabes qu√© es Node.js y su diferencia con Javascript, te compartimos este resumen gr√°fico para que no olvides las actividades que los hacen distintos.  
![Mesa de trabajo 2.png](https://static.platzi.com/media/user_upload/Mesa%20de%20trabajo%202-f92e8007-a0be-4bbe-9d53-98bc5f0180db.jpg)

### Comentarios:

* **Camilo Andr√©s Santana Lizcano** (4)

	
	Al fin voy a dejar creer que el backend es pura magia negra üòÑ  
	Muy emocionado de completar este curso e iniciar mi camino ninja como fullstack

* **leonardo-albino** (4)

	
	Gracias por el gr√°fico, me gustaron los iconos

* **daniel-zurita** (3)

	
	Muy genial su infograf√≠a , estoy emocionado por aprender esto para completar mi stack MEAN y MERN.

	* **Jos√© Abdiel Ortega V√°zquez** (1)

		
		Por algo amo est√° plataforma. Saben hacer buenas ilustraciones con la info correcta.

* **wilantury** (2)

	
	con muchas espectativas, let¬¥s do it.

* **franciscohreyes** (2)

	
	genial!!

* **HeartHunter** (1)

	
	excelente

* **carlosextra1** (1)

	
	Muy bien su forma de explicar!

* **karl-behrens-gil** (1)

	
	genial!

* **jecarmona** (1)

	
	excelente !

* **jeansanchezr** (1)

	
	Muy buena infografia, emocionado por aprender mas de NodeJS. Saludos!

* **Jhonn Sebastian Quiroz Pirazan** (1)

	
	Los mejores cursos definitivamente donde se apoyan de apuntes, descripciones e infografias‚Ä¶

* **Robinson Maqui** (1)

	
	Muy buena explicaci√≥n.

* **mkitivenic** (1)

	
	Muchas gracias conciso y puntual !!!

* **Diego Alberto Rozo Herrera** (1)

	
	Super claro

* **predator0077** (1)

	
	Excelente informaci√≥n. üòÉ

* **sergio-medina93** (1)

	
	Re bien. Como necesitaba esto üòÉ

* **Emanuel Valero** (1)

	
	Excelente manera de mostrar que hace JS del lado del cliente y que hace NodeJS del lado del servidor

* **Aaron Yamil Luna Parrado** (1)

	
	muy buena infograf√≠a

## 0060. Instalaci√≥n de Node.js

### Descripci√≥n:


Para instalar Node.js tienes que dirigirte a <https://nodejs.org/es/> y elegir entre la ultima versi√≥n o la version LTS.

Por defecto Node.js detecta tu sistema operativo y descarga el archivo indicado para la instalaci√≥n, si no es tu caso puedes dirigirte al enlace de otras descargas: <https://nodejs.org/es/download/>.

![download-node.png](https://static.platzi.com/media/user_upload/download-node-7c420a71-2425-49bf-a95c-d089d500f823.jpg)

La diferencia entre la version LTS a la ultima versi√≥n es que la versi√≥n LTS tiene soporte de mantenimiento por 3 a√±os.

### Comentarios:

* **wilantury** (8)

	
	Para instalar en ubuntu 18.04 LTS la √∫ltima version de node:
	``` 
	    curl -sL https://deb.nodesource.com/setup_12.x | sudo -E bash -
	    sudo apt-get install -y nodejs```
	    
	```

* **giothcode** (5)

	
	Aqu√≠ est√° como instalar Node a partir de nvm (Node version manager)  
	[](https://github.com/nvm-sh/nvm)

	* **giothcode** (3)

		
		<https://github.com/nvm-sh/nvm>

* **manuel-mendoza142** (3)

	
	Para este curso que versi√≥n se recomienda?? O cualquiera sirve?

	* **Daniel Esteves** (2)

		
		Desde la versi√≥n 8 hacia adelante se puede utilizar Node üôå

	* **glrodasz** (2)

		
		Mi recomendaci√≥n es siempre usar la versi√≥n LTS, sin embargo para proyectos peque√±os y experimentos recomiendo usar la ultima version.

	* **Wladimir Rocha** (1)

		
		Yo usualmente uso la ultima versi√≥n LTS ya que uso windows y as√≠ garantizo que no encuentre incompatibilidades

* **mauricio garcia** (2)

	
	[actualizar nodejs usando modulo n de npm](https://askubuntu.com/questions/426750/how-can-i-update-my-nodejs-to-the-latest-version)

* **Carlos Gerardo P√©rez Horta** (2)

	
	Les dejo la liga del repositorio de ‚Äún‚Äù una herramienta para manejar diversas versiones de n
	
	<https://github.com/tj/n#installation>
	
	Tengo tiempo us√°ndola y es muy buena

* **Omar Flores Grimontt** (2)

	
	Instalaci√≥n de Node 10.16.0 LTS a trav√©s de la terminal de Ubuntu:
	
	Primero ejecutas:
	``` 
	    curl -sL https://deb.nodesource.com/setup_10.x | sudo -E bash -
	    
	```
	
	Y luego.
	``` 
	    sudo apt install -y nodejs
	    
	```

* **carlosextra1** (1)

	
	ya lo tengo, vamos a la siguiente

* **Roso Pe√±aranda** (1)

	
	Si usan Linux les recomiendo instalar node.js por medio de node version manager  
	<https://github.com/nvm-sh/nvm>
	
	entre las ventajas que se optienen es el no necesitar permisos de super usuario para utilizar npm

## 0070. Arquitectura orientada a eventos

### Descripci√≥n:


### Links:

* [Events | Node.js v12.9.0 Documentation](https://nodejs.org/api/events.html#events_class_eventemitter)

### Comentarios:

* **jasanhdz** (16)

	
	Les dejo mis notas que me apoyaron en el aprendizaje del curso üòÑ  
	<https://github.com/JasanHdz/backendnodejs/tree/master/notes>  
	No se rindan, √©xito üí™  
	_**Mis mejores notas**_ ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

	* **Juan Jos√© Vega Quintero** (1)

		
		Crack, gracias!

* **Cristian Fabian Tovar** (8)

	
	Muy teso pa‚Äô explicar!!! en una sola clase entend√≠ lo que no pude en un mes!, Mounstro!!!

* **roDRYgo_0** (7)

	
	En windows para dar formato al c√≥digo es **alt + shift + f**

	* **Steven Benjam√≠n Diaz Flores** (1)

		
		Gracias

* **Samuel Pilay Mu√±oz** (6)

	
	Investigando un poco y respondi√©ndome a mi pregunta jeje üòÑ, seg√∫n la versi√≥n de Node.js v12.11.1 estos son los m√≥dulos nativos que vienen por default:
	
	  * [Assertion Testing](https://nodejs.org/api/assert.html)
	  * [Async Hooks](https://nodejs.org/api/async_hooks.html)
	  * [Buffer](https://nodejs.org/api/buffer.html)
	  * [C++ Addons](https://nodejs.org/api/addons.html)
	  * [C/C++ Addons - N-API](https://nodejs.org/api/n-api.html)
	  * [Child Processes](https://nodejs.org/api/child_process.html)
	  * [Cluster](https://nodejs.org/api/cluster.html)
	  * [Command Line Options](https://nodejs.org/api/cli.html)
	  * [Console](https://nodejs.org/api/console.html)
	  * [Crypto](https://nodejs.org/api/crypto.html)
	  * [Debugger](https://nodejs.org/api/debugger.html)
	  * [Deprecated APIs](https://nodejs.org/api/deprecations.html)
	  * [DNS](https://nodejs.org/api/dns.html)
	  * [Domain](https://nodejs.org/api/domain.html)
	  * [ECMAScript Modules](https://nodejs.org/api/esm.html)
	  * [Errors](https://nodejs.org/api/errors.html)
	  * [Events](https://nodejs.org/api/events.html)
	  * [File System](https://nodejs.org/api/fs.html)
	  * [Globals](https://nodejs.org/api/globals.html)
	  * [HTTP](https://nodejs.org/api/http.html)
	  * [HTTP/2](https://nodejs.org/api/http2.html)
	  * [HTTPS](https://nodejs.org/api/https.html)
	  * [Inspector](https://nodejs.org/api/inspector.html)
	  * [Internationalization](https://nodejs.org/api/intl.html)
	  * [Modules](https://nodejs.org/api/modules.html)
	  * [Net](https://nodejs.org/api/net.html)
	  * [OS](https://nodejs.org/api/os.html)
	  * [Path](https://nodejs.org/api/path.html)
	  * [Performance Hooks](https://nodejs.org/api/perf_hooks.html)
	  * [Policies](https://nodejs.org/api/policy.html)
	  * [Process](https://nodejs.org/api/process.html)
	  * [Punycode](https://nodejs.org/api/punycode.html)
	  * [Query Strings](https://nodejs.org/api/querystring.html)
	  * [Readline](https://nodejs.org/api/readline.html)
	  * [REPL](https://nodejs.org/api/repl.html)
	  * [Report](https://nodejs.org/api/report.html)
	  * [Stream](https://nodejs.org/api/stream.html)
	  * [String Decoder](https://nodejs.org/api/string_decoder.html)
	  * [Timers](https://nodejs.org/api/timers.html)
	  * [TLS/SSL](https://nodejs.org/api/tls.html)
	  * [Trace Events](https://nodejs.org/api/tracing.html)
	  * [TTY](https://nodejs.org/api/tty.html)
	  * [UDP/Datagram](https://nodejs.org/api/dgram.html)
	  * [URL](https://nodejs.org/api/url.html)
	  * [Utilities](https://nodejs.org/api/util.html)
	  * [V8](https://nodejs.org/api/v8.html)
	  * [VM](https://nodejs.org/api/vm.html)
	  * [Worker Threads](https://nodejs.org/api/worker_threads.html)
	  * [Zlib](https://nodejs.org/api/zlib.html)
	
	

* **edwintrumpet** (5)

	
	Un experimento enviando c√≥digo as√≠ncrono dentro del callback.  
	Para que se mantenga el orden se deben usar callbacks, promesas o como en este caso _async-await_
	``` 
	    const EventEmmiter = require('events')
	    
	    classLoggerextendsEventEmmiter{
	        execute(cb) {
	            (async() => {
	                console.log('Before')
	                this.emit('start')
	                try{
	                    const res = await cb()
	                    console.log(res)
	                }catch(e){
	                    console.log(e)
	                }
	                this.emit('finish')
	                console.log('After')
	            })()
	        }
	    }
	    
	    const logger = new Logger()
	    
	    logger.on('start', () => console.log('Starting'))
	    
	    logger.on('finish', () => console.log('Finishing'))
	    logger.on('finish', () => console.log('It\'s Done!'))
	    
	    logger.execute(() => newPromise((resolve, reject) => {
	        setTimeout(() => {
	            if(Math.random() < 0.5) {
	                resolve('Hello world!')
	            }else {
	                reject(newError('Hello error!'))
	            }
	        }, 2000)
	    }))
	    
	    
	```

* **oscar-leon846** (4)

	
	en windows, para formatear el documento shft+alt+f

* **oscar-leon846** (4)

	
	Una arquitectura orientada por eventos es un patron de dise√±o el cual permite a un conjunto de sistemas comunicarse entre si de forma reactiva mediante la publicacion y el consumo de eventos, los cuales se pueden interpretar como cambios de estado de objetos

* **annaduarte** (4)

	
	Es arquitectura orientada a eventos o paradigma orientado a eventos ? saludos

	* **glrodasz** (2)

		
		Es algo que se puede discutir, pero de acuerdo a la documentaci√≥n oficial: <https://nodejs.org/api/events.html#events_events>
		
		> Much of the Node.js core API is built around an idiomatic asynchronous **event-driven architecture** in which certain kinds of objects (called ‚Äúemitters‚Äù) emit named events that cause Function objects (‚Äúlisteners‚Äù) to be called.

* **Alan Santiago** (3)
No es necesario ejecutar el comando para formatearlo el c√≥digo siempre. En VsCode puedes abrir el archivo de configuraci√≥n y agregar la siguiente l√≠nea: ``` "editor.formatOnSave": true ```

* **Andrea M√©ndez D√≠az** (3)

	
	Para que les salga la paleta de comando que usa el profesor en el minuto 2.38 en mac deben de pulsar -> `cmd + shift + p`

* **edwintrumpet** (3)

	
	Con _async-await_ no es necesario que se envuelva la promesa dentro de una funci√≥n.  
	Se puede dejar igual a como se estaba manejando con `.then` y `.catch` y asignar el resultado a la nueva variable usando el _async_  
	A m√≠ me funciona as√≠
	``` 
	    const promise = newPromise((resolve, reject) => {
	        setTimeout(() => {
	            if(Math.random() < 0.5) {
	                resolve('Hello world!')
	            }else {
	                reject(newError('Hello error!'))
	            }
	        }, 2000)
	    })
	    
	    asyncfunctionasyncAwait() {
	        try{
	            const msg = await promise
	            console.log(`Message: ${msg}`)
	        }catch(err){
	            console.log(`Error: ${err}`)
	        }
	    }
	    
	    asyncAwait()
	    
	```

* **Alejandro Gonz√°lez Reyes** (3)

	
	ahora ya entiendo como trabaja SocketIO. emito un evento con informaci√≥n, escucho eventos y proceso la data.

* **heysoypaez** (3)

	
	Damas y caballeros se va poniendo dificil la cuesti√≥n

	* **glrodasz** (2)

		
		Cualquier duda, por aca estoy. üòÉ

	* **heysoypaez** (2)

		
		Guau! Gracias profe, cualquier cosa concreta le digo. Ahora ando con el desaf√≠o del miniservidor con el cumplea√±os.

	* **roganoalien** (3)

		
		Te recomiendo que empieces por los cursos de fundamentos de JS y luego el avanzado de JS

* **danielsanz (Platzi)** (3)

	
	Repositorio de la clase: <https://github.com/glrodasz/platzi-backend-node/tree/arquitectura-orientada-a-eventos>

* **Sebastian Cardoso Castillo** (2)

	
	Me gusto mucho esta clase.

* **T-gold** (1)

	
	el event emiter solo puede aplicarse en classes?

* **carlosextra1** (1)

	
	event emmiter

* **carlosextra1** (1)

	
	asyc-await.js
	``` 
	    const promiseFunction = () =>  newPromise((resolve, reject) => {
	        setTimeout(() => {
	            if (Math.random() < 0.5)
	                resolve("hello world")
	            else
	                reject(newError("hello error "));
	        }, 500);
	    })
	    
	    asyncfunctionasyncAwait() {
	        try {
	            const msg = await promiseFunction();
	            console.log('message => ', msg)
	        } catch(e){
	            console.log('error => ',e)
	        }
	    }
	    
	    asyncAwait(); ```
	    
	```

* **carlosextra1** (1)

	
	promise.js
	``` 
	    const promise = new Promise((resolve, reject) => {
	        setTimeout(() => {
	            if (Math.random() < 0.5)
	                resolve("hello world")
	            else
	                reject(new Error("hello error "));
	        }, 2000);
	    })
	    
	    promise
	        .then(msg => msg.toUpperCase())
	        .then(msg => console.log("MAYUSCULAS => ", msg))
	        .catch(err => console.error("Esto es el error => ", err))
	    
	```

* **carlosextra1** (1)

	
	callback.js
	``` 
	    const asyncCallback = function (cb) {
	        setTimeout(() => {
	            if (Math.random() < 0.5) {
	                return cb(null, "hello world")
	            } else {
	                cb(newError("hello error "));
	            }
	        }, 2000);
	    };
	    
	    asyncCallback((err, msg) => {
	        if (err)
	            console.log("error", err)
	        else
	            console.log("message", msg)
	    })```
	    
	```

* **karl-behrens-gil** (1)

	
	Me costo un poco el event emitter, creo que practicando voy a entenderlo mejor.

* **Angel Infanti** (1)

	
	Al ejecutar node callback.js me aparece el error SyntaxError: Unexpected identifier , saben porque ??

	* **Gabriel De Andrade (Platzi)** (1)

		
		Hola! Nos podr√≠as mostrar el error y tu c√≥digo? üòÑ

* **Samuel Pilay Mu√±oz** (1)

	
	cuales son los modulos nativos con los que viene por default NodeJS ?

* **Samuel Pilay Mu√±oz** (1)

	
	Las ultimas noticias del motor [V8](https://v8.dev/)

* **SKILLON** (1)

	
	Un practica corta de event emmiter:
	``` 
	    const EventEmmiter= require('events');
	    
	    classContadorextendsEventEmmiter{
	        init(tiempo,incremento,start){
	            this.tiempo=tiempo;
	            this.incremento=incremento;
	            this.number=start;
	            this.counter=setInterval(()=>{
	                this.number+=this.incremento;
	                if(this.esPrimo(this.number)){
	                   this.emit('primo'); 
	                }
	                if(this.number%2==0){
	                    this.emit('par');
	                }else{
	                    this.emit('impar');
	                }
	            },this.tiempo);
	        }
	        esPrimo(n){
	            var primo=true;
	            if(n>2){
	                for(let i=2;i<n;i++){
	                    if(n%i==0){
	                        primo=false;
	                    }
	                }
	            }
	            return(primo);
	        }
	        detener(){
	            clearInterval(this.counter);
	        }
	    }
	    
	    const conteo=new Contador();
	    conteo.init(200,1,0);
	    conteo.on('primo',()=>console.log(conteo.number));```
	    
	    
	    
	```

* **Ramiro** (1)

	
	¬øPor qu√© en el primer caso del callback (cb), cuando se devuelve un error no es necesario agregar el return?, me refiero a la parte que hacemos:
	``` 
	    else{
	            cb(newError('This is an Error'))
	        }
	    
	```

	* **Daniel Alberto Esquinazi** (3)

		
		En realidad no hace falta hacer `return` en el bloque que maneja el caso de √©xito del `if` porque esta ejecutando la funcion `cb`y enviandole los parametros de `err` y `msg`

* **Ricardo Lugo Recillas** (1)

	
	Arquitectura Orientada a objetos: permite manipular c√≥digo as√≠ncrono
	
	  * el callback = es el par√°metro que se va a ejecutar despu√©s
	  * async-await = manera de escribir codigo asyncrono que no se vea asyncrono
	
	

	* **Marcelo Diaz** (1)

		
		Creo que es arquitectura Orientada a Eventos, no a objetos compa√±ero.

* **Jes√∫s Duarte Garc√≠a** (1)
Para mantener el orden con event-emitter ¬øEs necesario combinarlo con promesas o async-await?

	* **Juan Carlos Pinz√≥n** (1)

		
		Si realmente necesita el orden, ser√≠a coherente que funcione con async/await

* **wilantury** (1)
Hola, solo para tener claro. Event Emiter es solo en nodeJS desde el backend? quiero decir, event emiter no se puede aplicar en frontend.

	* **Juan David Castro (Platzi)** (2)

		
		Correcto. Event Emitter solo existe en Node.js. Pero no significa que no puedas crear eventos con JS del navegador. Mira: <https://stackoverflow.com/questions/45831911/is-there-any-eventemitter-in-browser-side-that-has-similar-logic-in-nodejs>. üòâ

* **Hebert de Le√≥n** (1)
Tengo una pregunta, en el archivo callback.js tienes que dentro del if va a retornar un cb(), pero en else no tienes el ‚Äúreturn‚Äù. ¬øA qu√© ...

	* **Manuel Ojeda** (2)

		
		La funci√≥n cb es para evitar que no se cicle la funci√≥n al encontrar un error

* **Oscar Molleapaza Flores** (0)

	
	Wow, esperaba algo mas ligero jajaja, me esta costando aprender, es normal para un java developer?

	* **mrcMesen** (1)

		
		yo dir√≠a que primero te relaciones con javascript antes de tomar el curso, entender los fundamentos del lenguaje es importante para luego aprender de node js

	* **Karel Mu√±iz Perdomo** (1)

		
		NO te desesperes. Lo que necesitas es mas practica. EN vez de ver solo videos , reescribe el c√≥digo de todos los ejercicios. Hay muchos videos en youtube que explican conceptos b√°sicos como async, callback, promises, etc

## 0080. Node.js para la web

### Descripci√≥n:


### Links:

* [HTTP | Node.js v12.9.0 Documentation](https://nodejs.org/api/http.html#http_http_createserver_options_requestlistener)

* [Anatomy of an HTTP Transaction | Node.js](https://nodejs.org/es/docs/guides/anatomy-of-an-http-transaction/)

### Comentarios:

* **Manuel Ojeda** (5)
![carbon \(1\).png](https://static.platzi.com/media/user_upload/carbon%20%281%29-4eb636d7-282e-4163-b6a4-7a27e824f72c.jpg)

	* **Jes√∫s Miguel Quinto Teran** (1)

		
		Hola Manuel, me podr√≠as indicar que programa usas para mostrar el c√≥digo de esa forma, se me genial. Saludos.

	* **Manuel Ojeda** (1)

		
		Hola Jes√∫s, checa la p√°gina en [carb√≥n.now.sh](http://xn--carbn-3ta.now.sh)
		
		<https://carbon.now.sh/>
		
		Detecta m√∫ltiples idiomas y trae varios sets de colores

	* **Juan Jos√© Vega Quintero** (1)

		
		No entend√≠ la parte de  
		body[2];  
		Explicala por fa

	* **Manuel Ojeda** (1)

		
		Dentro del body llegan parametros en forma de array, entonces el a√±o viene en el body[2]

* **Matias Sosa** (3)

	```
	    const http = require("http");
	    const moment = require("moment");
	    
	    const server = http.createServer();
	    
	    server.on("request", (req, res) => {
	      if (req.method === "POST" && req.url == "/echo") {
	        let body = [];
	        req
	          .on("data", chunk => {
	            body.push(chunk);
	          })
	          .on("end", () => {
	            res.writeHead(200, { "Content-type": "text/plain" });
	            body = Buffer.concat(body).toString();
	            if (!moment(body, "YYYY-MM-DD").isValid()) {
	              res.end("no es un formato valido. Formato esperado YYYY-MM-DD");
	            } else {
	              var weekDayName = moment(body).format("dddd");
	    
	              res.end("Tu dia de Nacimiento es:" + weekDayName);
	            }
	          });
	      } else {
	        res.statusCode = 404;
	        res.end();
	      }
	    });
	    
	    server.listen(8002);
	    console.log("Servidor enla url http://localhost:8002");
	    
	```
	
	Utilizando el Modulo Moment

* **Juan Carlos Garc√≠a Esquivel** (3)

	
	Les comparto mi reto, tuve que modificar un poco para que se vea bien en los aportes de platzi, pueden utilizarlo de referencia, espero les ayude üòÉ
	``` 
	    //obtain http module for create the server
	    const http = require('http')
	    //create the server and assign to const
	    const server = http.createServer()
	    
	    const isValidMethod = (req, method) => {
	      return req.method === method ? true : false
	    }
	    
	    const isValidUrl = (req, url) => {
	      return req.url == url ? true : false
	    }
	    
	    const getWeekDay = date => {
	      const weekDays = [
	        'Sunday',
	        'Monday',
	        'Tuesday',
	        'Wednesday',
	        'Thursday',
	        'Friday',
	        'Saturday'
	      ]
	      const message = 'Your were born on'
	      return`${message}${weekDays[date.getDay()]}`
	    }
	    
	    //handle events
	    server.on('request', (request, response) => {
	      const okMethod = isValidMethod(request, 'POST')
	      const okUrl = isValidUrl(request, '/challenge')
	      const content = { 'Content-Type': 'text/plain' }
	      if (okMethod && okUrl) {
	        let body = newArray()
	        //handle data
	        request
	          .on('data', chunk => {
	            /*chunk is the data that we sent 
	             in the request*/
	            body.push(chunk)
	          })
	          .on('end', () => {
	            //now body contains your birth date
	            body = Buffer.concat(body).toString()
	            let birthDate = newDate(body)
	            response.writeHeader(200, content)
	            response.end(getWeekDay(birthDate))
	          })
	      } else {
	        response.writeHeader(400, content)
	        response.end('404 not found :C')
	      }
	    })
	    
	    server.listen(8002)
	    console.log('running on http://localhost:8002/challenge')
	    /*
	    in posttman try with your birthdate
	    like yyyy mm dd
	    1994 12 09
	    */
	    
	```

* **David Behar** (3)

	
	Pues ac√° est√° mi servidor que valida una fecha
	``` 
	    const http = require('http');
	    const server = http.createServer();
	    
	    server.on('request',(req,res)=>{
	        if(req.method === 'POST' && req.url=='/'){
	            let body=[];
	            const days=['Domingo','Lunes','Martes','Mi√©rcoles','Jueves','Viernes','S√°bado'];
	            const months = ['enero','febrero','marzo','abril','mayo','junio','julio','agosto','septiembre','octubre','noviembre','diciembre'];
	    
	            req.on('data', (chunk)=>{
	                body.push(chunk);
	            })
	            .on('end',()=>{
	                res.writeHead(200,{'Content-Type':'text/plain'})
	                body=Buffer.concat(body).toString();
	                const birthday=newDate(body)
	                if(birthday.getFullYear()){
	                    res.end(`Naciste un ${days[birthday.getDay()]}, ${birthday.getDate()+1} de ${months[birthday.getMonth()]} de ${birthday.getFullYear()}`);
	                }else{
	                    res.end(`Inserta una fecha correcta con el formato YYYY-MM-DD`)
	                }
	            })
	    
	        }else{
	            res.statusCode=404;
	            res.end();
	        }
	    })
	    
	    server.listen(8000);
	    console.log('servidor en la url http://localhost:8000')```
	    
	```

	* **MauricioF** (1)

		
		Al definir birthday en tu c√≥digo, new y Date quedan unidos (newDate), por lo que no corre el c√≥digo cuando uno copia y pega.

	* **David Behar** (2)

		
		Es un problema con el c√≥digo de platzi, se tiene que separar, jaja, no lo dise√±√© as√≠

* **Jose Jaime Figueroa Barrios** (3)
![Node.PNG](https://static.platzi.com/media/user_upload/Node-5c8a3634-8099-430a-9a5a-36d0ae87d519.jpg)

* **Victor Martin Ortiz Palacio** (3)

	
	El challenge me quedo de la siguiente manera, ya que no encontre el como darle formato al input que requiere Date.getDay(), y asi obtener el dia en menos lineas de codigo.
	
	![birthday.png](https://static.platzi.com/media/user_upload/birthday-f1747978-79e3-48ec-8b22-2158410e3f7a.jpg)

	* **Victor Martin Ortiz Palacio** (1)

		
		Despues de ver el video nuevamente, pude entender un poco mejor algunas cosas que no tenia claro, y asi hacer un poco mas legible el codigo.  
		![codigo.jpg](https://static.platzi.com/media/user_upload/codigo-432740f1-ee4b-4e5f-aab4-f7db0381c08c.jpg)

* **Luis Miguel gonzalez** (3)
¬øPregunta? ¬øEn que parte del evento de la variable es mejor hacer la l√≥gica que se desea procesar? ¬øEn el 'data? ¬øEn el ‚Äòend‚Äô? ¬øy por que...

	* **glrodasz** (1)

		
		Depende la necesidad de tu l√≥gica, si es algo que puedes ir aplicando a medida que recibes los datos, puedes definitivamente hacerlo ahi. Si es algo que solo se puede hacer cuando tengas todo el set de datos deber√≠as usar el end.

* **Alver Ortega** (2)

	
	Mi aporte
	``` 
	    const http = require('http');
	    const server = http.createServer();
	    
	    server.on('request', (req, res) => {
	        let birthday = [];
	    
	        req.on('data', chunk => birthday.push(chunk.toString()));
	        req.on('end', () => {
	            res.writeHead(200, {'Content-Type': 'text/plain'});
	            res.end(`Tu d√≠a de nacimiento es: ${getDayOfBirthday(birthday)}`);
	        })
	    
	    });
	    
	    functiongetDayOfBirthday(date) {
	        const days = ['Lunes', 'Martes', 'Miercoles', 'Jueves', 'Viernes', 'Sabado', 'Domingo'];
	        const birthday = newDate(date);
	        return days[birthday.getDay()]
	    }
	    
	    server.listen(8001);
	    
	    console.log('Servidor en la url http://localhost:8001')
	    
	    
	```

	* **Jos√© Abdiel Ortega V√°zquez** (1)

		
		Si me permites corregirte el arreglo de d√≠as empieza en domingo segun la doc de MDN. Pero me gusto mucho t√∫ soluci√≥n.

	* **Alver Ortega** (2)

		
		si y muchas gracias por la correci√≥n

	* **karl-behrens-gil** (1)

		
		Muy buena soluci√≥n, bastante legible y limpio.

* **seiro** (2)

	```
	    const http = require('http')
	    const server = http.createServer()
	    const dia = [
	        'Domingo',
	        'Lunes',
	        'Martes',
	        'Miercoles',
	        'Jueves',
	        'Viernes',
	        'Sabado'
	    ]
	    server.on('request', (req, res) => {
	        if (req.method === 'POST' && req.url == '/time') {
	            let fecha = []
	            req.on('data', (chunk) => {
	                fecha.push(chunk)
	            })
	            req.on('end', () => {
	    
	                res.writeHead(200, { 'content-type': 'text/plain' })
	                fecha = Buffer.concat(fecha).toString()
	                const cumple = new Date(fecha);
	                let diaCumple
	    
	                if (!isNaN(cumple) && typeof cumple === 'object') {
	                    diaCumple = dia[cumple.getDay()]
	                } else {
	                    diaCumple = 'Fecha inexistente'
	                }
	                res.end(diaCumple)
	            })
	        } else {
	            res.statusCode = 404
	            res.end()
	        }
	    })
	    
	    server.listen(8080)
	    
	    console.log('servidor en linea');
	    
	```

* **mkitivenic** (2)

	
	**CHALLENGE No.1**
	
	**CODE**  
	![Reto1.1.jpg](https://static.platzi.com/media/user_upload/Reto1.1-6656a8cb-b775-4443-bec6-8dab9c0d895b.jpg)  
	![Reto1.2.jpg](https://static.platzi.com/media/user_upload/Reto1.2-3b428516-b049-4155-9071-cd5aa95f9ef7.jpg)  
	![Reto1.3.jpg](https://static.platzi.com/media/user_upload/Reto1.3-94b38056-b4eb-42c6-8d6f-a2806bb43791.jpg)
	
	**POSTMAN**  
	![Reto1.4.jpg](https://static.platzi.com/media/user_upload/Reto1.4-6caac2b9-1a94-47d7-ba31-3d90e81e0f18.jpg)  
	![Reto1.5.jpg](https://static.platzi.com/media/user_upload/Reto1.5-4d85168a-ddb9-4c53-b759-d964e08d4d76.jpg)

* **cristofers530** (2)

	
	me da como cosita ense√±ar mi codigo luego de ver que los demas tienen su solucion con menos codigo, pero aqui esta XD
	
	PD: esa formula es del ‚ÄòAlgoritmo de Zeller‚Äô, si quieren hacer pruebas y eso [](https://www.disfrutalasmatematicas.com/juegos/dia-de-la-semana.html)
	``` 
	    const http = require("http");
	    const server = http.createServer();
	    
	    server.on('request', (req,res)=>{
	        if(req.method === 'POST' && req.url == "/echo"){
	            let body = [];
	            req.on("data", chunck =>{
	                body.push(chunck)
	            }).on("end",()=>{
	                res.writeHead(200, {'content-type': 'text/plain'})
	    
	                var dayBorn = fechaNacimiento(Buffer.concat(body).toString());
	                res.end(dayBorn)
	            }) 
	        }else{
	            res.statusCode = 404
	            res.end()
	        }
	    })
	    
	    server.listen(8000, ()=>{
	        console.log("running in http://localhost:8000");
	    })
	    
	    functionfechaNacimiento(data){
	        var parts = data.split('-');
	        //var mydate = new Date(parts[2], parts[1] - 1, parts[0]);
	    
	        var year = parseInt(parts[2]); 
	        var month = parseInt(parts[1]); 
	        var day = parseInt(parts[0]); 
	    
	        if(month <= 2){
	            month += 2
	            year -= 1
	        }else{
	            month -= 2
	        }
	        var a = year % 100;
	        var b = year / 100;
	        var dayBorn = ( 700 +
	            (month*26-2)/10 +
	            day +
	            a +
	            a / 4 + 
	            b / 4 - 
	            b * 2
	          ) % 7
	    
	        console.log(dayBorn)
	        dayBorn = parseInt(dayBorn)
	        switch(dayBorn){
	            case0: 
	                dayBorn = "domingo"
	                break 
	            case1: 
	                dayBorn = "lunes"
	                break 
	            case2: 
	                dayBorn = "martes"
	                break 
	            case3: 
	                dayBorn = "miercoles"
	                break 
	            case4: 
	                dayBorn = "jueves"
	                break 
	            case5: 
	                dayBorn = "viernes"
	                break 
	            case6: 
	                dayBorn = "sabado"
	                break 
	        }
	    
	        console.log("dia=" + dayBorn)
	        return dayBorn
	    }```
	    
	```

	* **cristofers530** (1)

		
		[de aqui hice las pruebas](https://www.disfrutalasmatematicas.com/juegos/dia-de-la-semana.html)

	* **sergio-medina93** (1)

		
		El sentimiento es mutuo jajaja

* **pablopoggiog** (2)

	
	ü§ì
	``` 
	    const http = require('http');
	    const server = http.createServer();
	    
	    const semana = ['Domingo', 'Lunes', 'Martes', 'Miercoles', 'Jueves', 'Viernes', 'Sabado'];
	            
	    server.on('request', (req, res) => {
	        if (req.method === 'POST' && req.url == '/adivinarDia') {  
	            let body = [];
	            
	            req.on('data', chunk => {
	                body.push(chunk);
	            })
	            .on('end', () => {            
	                body = Buffer.concat(body).toString();
	                const date = new Date(body);
	                let diaSemana = semana[date.getDay()];
	    
	                res.writeHead(200, {"Content-type": "text-plain"});
	                res.end(`El dia de mi nacimiento fue un ${diaSemana}`);
	            })
	        }
	        else {
	            res.status = 404;
	            res.end();
	        }
	    })
	    const PORT = 3003;
	    
	    server.listen(PORT, () => {
	        console.log(`Eschuchando en el puerto ${PORT}`)
	    });
	    
	```

* **Erick Leao P√©rez Medina** (2)

	
	Mi soluci√≥n al reto de la clase:
	``` 
	    // Importamos http y creamos el servidor
	    const http = require('http');
	    const server = http.createServer();
	    
	    // Funci√≥n para obtener el d√≠a de la semana a partir de una fecha
	    const getWeekDay = (date) => {
	      const weekDays = [
	        'Domingo',
	        'Lunes',
	        'Martes',
	        'Mi√©rcoles',
	        'Jueves',
	        'Viernes',
	        'S√°bado',
	      ];
	    
	      return date instanceof Date && !isNaN(date)
	        ? weekDays[date.getDay()]
	        : 'Fecha inv√°lida';
	    };
	    
	    // Procesamos el request
	    server.on('request', (req, res) => {
	      if (req.method === 'POST' && req.url == '/echo') {
	        let body = [];
	        req
	          .on('data', (chunk) => {
	            body.push(chunk);
	          })
	          .on('end', () => {
	            res.writeHead(200, { 'Content-Type': 'text/plain' });
	            body = Buffer.concat(body).toString();
	            // Utilizamos la funci√≥n creando una instancia de Date
	            body = getWeekDay(new Date(body));
	            res.end(body);
	          });
	      } else {
	        res.statusCode = 404;
	        res.end();
	      }
	    });
	    
	    server.listen(8001);
	    console.log('Servidor en la url http://localhost:8001');
	    
	```

* **Iv√°n Dar√≠o S√°nchez Jim√©nez** (2)

	
	Mi soluci√≥n:
	``` 
	    const http = require('http');
	    const server = http.createServer();
	    const weekdays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Fryday', 'Saturday']
	    
	    server.on('request', (req, res) => {
	        if (req.method === 'POST' && req.url == '/echo') {
	    
	            let body = [];
	            req.on('data', chunk => {
	                body.push(chunk)
	            })
	            .on('end', () => {
	                res.writeHead(200, { 'Content-Type': 'text/plain' });
	    
	                let dateBday = new Date(body);
	    
	                body = Buffer.concat(body).toString();
	                res.end(`You were born on an ${weekdays[dateBday.getDay()]}`);
	            })
	        }
	        else {
	            res.statusCode = 404;
	            res.end();
	        }
	    })
	    
	    server.listen(8010);
	    console.log('Servidor en la URL http://localhost:8010');
	    
	```

	* **Juan Carlos Garc√≠a Esquivel** (1)

		
		Muy bueno gracias, con tu ejemplo pude entender como utilizar el server y pasarle datos.

* **Alejandro Lopez Ram√≠rez** (2)

	
	Hola les comparto mi solucion:
	``` 
	    const http = require('http');
	    const server = http.createServer();
	    const port = 8001;
	    const url = 'http://localhost:';
	    const weekdays =[
	      'Domingo',
	      'Lunes',
	      'Martes',
	      'Mi√©rcoles',
	      'Jueves',
	      'Viernes',
	      'S√°bado'
	    ]
	    
	    
	    server.on('request', (req, res) => {
	    	if (req.method === 'POST' && req.url === '/brithDay') {
	    		let body = [];
	    		req.on('data', chunk => {
	    			body.push(chunk);
	    		}).on('end', () => {
	          res.writeHead(200, { 'Content-Type': 'text/plain' });
	          let weekday = new Date (body).getDay()
	    			body = Buffer.concat(body).toString();
	    			res.end(`si naciste el ${body} naciste el dia ${weekdays[weekday]}`);
	    		});
	    	} else {
	    		res.statusCode = 404;
	    		res.end();
	      }
	      
	    });
	    
	    server.listen(port);
	    console.log(`servidor en la url ${url}${port}`);
	    
	```

* **wilantury** (2)

	
	Soluci√≥n a mi reto:
	``` 
	    //formato de fecha de entrada: opcion 1: 10-16-2019, opcion2: 2019/10/16
	    const http = require('http');
	    const server = http.createServer();
	    
	    const weekday = new Array(7);
	    weekday[0] = "Domingo";
	    weekday[1] = "Lunes";
	    weekday[2] = "Martes";
	    weekday[3] = "Miercoles";
	    weekday[4] = "Jueves";
	    weekday[5] = "Viernes";
	    weekday[6] = "Sabado";
	    
	    server.on('request', (req, res)=> {
	      if(req.method == 'POST' && req.url === '/birthday'){
	        let body = []
	        req.on('data', chunk => {
	          body.push(chunk)
	        })
	        .on('end', () => {
	          res.writeHead(200, {'Content-Type': 'text/plain'})
	          let dayOfBirth = new Date(body)
	          console.log(weekday[dayOfBirth.getDay()])
	          body = Buffer.concat(body).toString()
	          res.end(body)
	        })
	      }else{
	        res.statusCode = 404
	        res.end()
	      }
	    })
	    
	    server.listen(8001)
	    console.log('servidor en la url: http://localhost:8001')```
	    
	```

* **josdanind** (2)

	
	**Mi solucion**
	``` 
	    const http = require("http");
	    const server = http.createServer();
	    
	    server.on("request", (req, res) => {
	      if (req.method === "POST") {
	        let body = [];
	        req
	          .on("data", chunk => {
	            body.push(chunk);
	          })
	          .on("end", () => {
	            res.writeHead(200, { "Content-Type": "text/plain" });
	            body = Buffer.concat(body).toString();
	            let dateBirth = newDate(body).getDay();
	    
	            let week = [
	              "Domingo",
	              "Lunes",
	              "Martes",
	              "Mi√©rcoles",
	              "Jueves",
	              "Viernes",
	              "S√°bado"
	            ];
	    
	            dateBirth = week[dateBirth];
	    
	            res.end(`Naciste un ${dateBirth}`);
	          });
	      } else {
	        res.statusCode = 404;
	        res.end("404");
	      }
	    });
	    
	    server.listen(8001);
	    console.log("Servidor en la url http://localhost:8001");
	    
	```

	* **oteka21** (1)

		
		Creo que al obtener el dia del arreglo tienes que obtenerlo con el `dateBird - 1` para que te tome e d√≠a que es

* **soyaligarciap** (2)

	
	Mi reto
	``` 
	    onst http = require('http')
	    const server = http.createServer()
	    
	    const getDayFromDate = data => {
	        var d = newDate(data)
	        var dd = d.getDay()
	        const dayNames = ["Lunes", "Martes", "Miercoles", "Jueves", "Viernes", "Sabado", "Domingo"]
	        return dayNames[dd - 1]
	    }
	    
	    server.on('request', (req, res) => {
	        if (req.method === 'POST' && req.url == '/birthday') {
	            let body = []
	            req
	                .on('data', chunk => {
	                    body.push(chunk)
	                })
	                .on('end', () => {
	                    res.writeHead(200, { 'Content-Type': 'text/plan' })
	                    body = Buffer.concat(body).toString()
	                    var dayName = getDayFromDate(body)
	                    res.end(`Tu naciste el dia ${dayName}`)
	                })
	        } else {
	            res.statusCode = 404
	            res.end()
	        }
	    })
	    
	    server.listen(8001)
	    console.log('Servidor en http://localhost:8001')```
	    
	```

* **ThAlan** (2)

	
	Les dejo mi soluci√≥n al reto, una va con los comentarios que me sirvieron para resolverlo y la otra imagen solo el c√≥digo.
	
	Sin comentarios  
	![birthday-node.png](https://static.platzi.com/media/user_upload/birthday-node-67fdc0f6-7a4e-440b-b7be-c36dbb00f309.jpg)
	
	Con comentarios  
	![birthday-comments.png](https://static.platzi.com/media/user_upload/birthday-comments-bfebdb64-de68-4fc2-b794-5b428b70e30b.jpg)

* **Daniel Herrera** (2)

	```
	    const http = require('http');
	    const server = http.createServer();
	    
	    server.on('request', (req, res) => {
	        if (req.method == 'POST' && req.url === '/edad') {
	            let body = [];
	            let semana = ['Lunes', 'Martes', 'Miercoles', 'Jueves', 'Viernes', 'Sabado', 'Domingo'];
	            req
	              .on('data', chunck => {
	                body.push(chunck);
	            })
	              .on('end', () => {
	                res.writeHeader(200, { "Content-Type": "text/plain" });
	                let edad = new Date(body);
	                edad = semana[edad.getDay()];
	                res.end('Naciste el d√≠a ' + edad);
	            });     
	        } else {
	            res.statusCode = 404;
	            res.end();
	        }
	    });
	    
	    server.listen(3001);
	    console.log('Servidor en la url http://localhost:3001');
	    
	```

* **Erik Alexander Estrada Otondo** (2)

	
	En ‚ÄúArchivos y Enlaces‚Äù, cuando se preciona Descargar todo. No se descargan los archivos de la clase.

	* **Daniel Esteves** (1)

		
		¬°Hola! Gracias por reportar, lo arreglaremos lo m√°s pronto posible

* **andresquinterogalvan** (2)

	```
	    const http = require("http");
	    constserver = http.createServer();
	    
	    server.on("request", (req, res) => {
	        if (req.method === "POST" && req.url == "/echo") {
	            let body = [];
	    
	            req
	                .on("data", chunk => {
	                    body.push(chunk);
	                })
	                .on("end", () => {
	                    res.writeHead(200, { "Content-Type": "text/plain" });
	                    body = Buffer.concat(body).toString();
	    
	                    letday = newDate(body).getDay();
	                    console.log(day)
	                    let res_day = ["Sunday", "Monday", "Tuesday", , "Wednesday", "Thuesday", "Fryday", "Saturday"];
	                    console.log(res_day[day])
	    
	    
	                    res.end(res_day[day]);
	                });
	        } else {
	            res.statusCode = 404;
	            res.end();
	        }
	    });
	    
	    server.listen(8000);
	    console.log("Servidor en la url http://localhost:8000");
	    
	```

* **Steven Benjam√≠n Diaz Flores** (2)
![solution.png](https://static.platzi.com/media/user_upload/solution-b6d1e1a7-b313-4221-99f7-9fac9da6b2e1.jpg)

* **sergioRios** (2)

	```
	    const http = require('http')
	    const server = http.createServer()
	    
	    server.on('request', (req, res) => {
	        if (req.method == 'POST' && req.url == "/echo"){
	            let body = []
	    
	            req.on('data', chunk =>{
	                body.push(chunk)
	            })
	    
	            .on('end', () => {
	                res.writeHead(200, {'Content-Type': 'text/plain'})
	                body = Buffer.concat(body).toString()
	                fecha = body.split(" ")
	    
	                year = fecha[0]
	                month = fecha[1]
	                day= fecha[2]
	    
	                birthday = new Date(year, month, day)
	                weekday = birthday.getDay() // dia de la semana
	                console.log(weekday)
	    
	                res.end(weekday.toString())
	            })
	        }else {
	            res.statusCode = 404
	            res.end()
	        }
	    })
	    
	    server.listen(8002)
	    console.log('servidor en la url http://localhost:8002')```
	    
	```

* **Gaston Caldera** (2)

	```
	    <'use strict'
	    
	    const http = require('http')
	    const server = http.createServer();
	    
	    server.on('request', (req,res) => {
	        if (req.method === 'POST' && req.url == "/echo"){
	            let body = []
	            let day, month, year;
	            let birthday
	    
	            req.on('data', chunk => {
	                body.push(chunk)
	            })
	            .on('end', () => {
	                res.writeHead(200, {'Content-Type': 'text/plain'})
	                body = Buffer.concat(body).toString().split(' ');
	                day= body[0]
	                month = body[1] - 1;
	                year = body[2]
	                birthday = new Date(year,month,day)
	                birthday = birthday.toString();
	                console.log(birthday);
	                res.end(birthday)
	            })
	        } else {
	            res.statusCode = 404
	            res.end();
	        }
	    })
	    
	    server.listen(8001)
	    console.log('Servidor en la url http://localhost:8001');>
	    
	    
	```

* **danielsanz (Platzi)** (2)

	
	Repositorio de la clase: <https://github.com/glrodasz/platzi-backend-node/tree/node-js-para-la-web/learning-node>

* **heysoypaez** (2)
Muchachos, no entiendo porque cuando activo el servidor y envio un PUT con postman SIEMPRE me retorna como dia de cumplea√±os mier...

	* **Manuel Ojeda** (3)

		
		El m√©todo PUT es para realizar actualizaciones, debes de utilizar POST.

* **ocandoja** (1)

	```
	    const http = require('http');
	    const server = http.createServer();
	    let days = [ "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday" ];
	    server.on('request', (req, res) =>{
	      if (req.method === 'POST' && req.url == "/echo"){
	        let body = [];
	        req
	        .on('data', chunk => {
	          body.push(chunk);
	        })
	        .on('end', () =>{
	          res.writeHead(200, {'Content-type': 'text/plain'});
	          body = Buffer.concat(body).toString();
	          var hbd = new Date(body);
	          if (hbd){
	            body = days[hbd.getDay()];
	          }
	          res.end(body);
	        });
	      } else {
	        res.statusCode = 404;
	        res.end();
	      };
	    });
	    server.listen(8003);
	    console.log('server url http://localhost:8003')```
	    
	```

* **carlosextra1** (1)

	
	Mi respuesta:** Naciste el d√≠a Lunes 28 de Marzo del a√±o 1988**
	``` 
	    const http = require('http');
	    const server = http.createServer();
	    
	    const ArrayDias = [
	            'Lunes', 
	            'Martes', 
	            'Miercoles',
	            'Jueves',
	            'Viernes',
	            'Sabado',
	            'Domingo'];
	    const ArrayMeses = [
	            'Enero', 
	            'Febrero', 
	            'Marzo', 
	            'Abril',
	            'Mayo',
	            'Junio',
	            'Julio',
	            'Agosto',
	            'Septiembre',
	            'Octubre',
	            'Noviembre',
	            'Diembre'];
	    
	    server.on("request", (req, res) => {
	        if (req.method === "POST" && req.url == "/birthday") {
	            let body = [];
	            req.on('data', chunk => {
	                body.push(chunk);
	            })
	                .on('end', () => {
	                    res.writeHead(200, { "Content-Type": "text/plain" });// enviamos el codigo y el tipo de contenido en una sola funcion
	                    body = Buffer.concat(body).toString();
	    
	                    let fecha = body.split('-');
	                    let mes = parseInt(fecha[1])-1;
	                    let dia = new Date(body);
	                    let diaSemana = dia.getDay();
	    
	                    res.end(`Naciste el d√≠a ${ArrayDias[diaSemana]} ${fecha[2]} de ${ArrayMeses[mes]} del a√±o ${fecha[0]}`);
	    
	                })
	        } else {
	            res.statusCode = 404;
	            res.end();
	        }
	    })
	    
	    server.listen(8000, () => console.log('Server corriendo en el puerto 8000'));```
	    
	```

* **Marco Antonio Benites Espinoza** (1)

	
	Para el reto dado, no es necesario usar chunk, por lo cual mi soluci√≥n con lo minimo necesario seria la siguiente:
	``` 
	    const http = require("http");
	    const url = require("url");
	    const server = http.createServer();
	    
	    const daysOfWeek = [
	      "Domingo",
	      "Lunes",
	      "Martes",
	      "Miercoles",
	      "Jueves",
	      "Viernes",
	      "S√°bado"
	    ];
	    
	    server.on("request", (req, res) => {
	      try {
	        const q = url.parse(req.url, true).query;
	        const birthdayText = q.birthday;
	        const birthdayParams = birthdayText.split("-");
	    
	        const isDateFormatValid =
	          birthdayParams.length != 3 ||
	          birthdayParams[2].length != 4 ||
	          birthdayParams[1].length != 2 ||
	          birthdayParams[0].length != 2;
	    
	        if (isDateFormatValid) {
	          throw new Error("Formato de fecha incorrecta. Esperado: dd-MM-yyyy");
	        }
	    
	        const birthdayDate = new Date(
	          parseInt(birthdayParams[2]),
	          parseInt(birthdayParams[1] - 1),
	          parseInt(birthdayParams[0])
	        );
	    
	        console.log(birthdayDate);
	    
	        res.writeHead(200, { "Content-Type": "text/html" });
	        res.end(
	          "El d√≠a de la semana de tu nacimiento fue: " +
	            daysOfWeek[birthdayDate.getDay()]
	        );
	      } catch (err) {
	        console.error(err.stack);
	        res.writeHead(500, { "Content-Type": "text/html" });
	        res.end(err.message);
	      }
	    });
	    
	    server.listen(3000);
	    console.log("Servidor escuchando en http://localhost:3000");
	    
	```

* **Jos√© Abdiel Ortega V√°zquez** (1)

	
	Mi soluci√≥n
	``` 
	    server.on('request', (req, res) => {
	        if (req.method === 'POST' && req.url === '/echo') {
	            let body = [];
	    
	            req.on('data', chunk => {
	                body.push(chunk);
	            })
	            .on('end', () => {
	                res.writeHead(200, {'Content-Type': 'text/plain'});
	                body = Buffer.concat(body).toString();
	                const dayOfTheWeek = getDay(body);
	                console.log(dayOfTheWeek);
	                res.end(dayOfTheWeek);
	            });
	        } else {
	            res.statusCode = 404;
	            res.end();
	        }
	    });
	    
	    const getDay = body => {
	        const birthdayArr = body.trim().split(',');
	        const date = newDate();
	        date.setFullYear(birthdayArr[0], birthdayArr[1], birthdayArr[2]);
	        const dayNumber = date.getDay();
	        switch (dayNumber) {
	            case0:
	                return"Domingo";
	            case1:
	                return"L√∫nes";
	            case2:
	                return"Martes";
	            case3:
	                return"Miercoles";
	            case4:
	                return"Jueves";
	            case5:
	                return"Viernes";
	            case6:
	                return"Sabado";
	        }
	    };
	    
	```

* **Carlos Vallejo** (1)

	
	Mi aporte, sin validaciones üòâ
	``` 
	    let body = []
	        req.on('data', chunk => {
	          birthDate = chunk.toString();
	          dt = new Date(birthDate);
	          days = ['Domingo', 'Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado'];
	          str = days[dt.getDay()].toString();
	          var newChunk = Buffer.from(str, 'utf8');
	          body.push(newChunk);
	        })
	        .on('end', () => {
	          res.writeHead(200, {'Content-Type':'text/plain'});
	    
	          body = Buffer.concat(body).toString();
	          res.end('Naciste un d√≠a: '+body);
	        })
	    
	```

* **asismelgarejo** (1)

	```
	    // INGRESA TU CUMPLEA√ëOS SIGUIENDO EL SIGUIENTE FORMATO: a√±o mes d√≠a
	    
	    const http = require('http');
	    const server = http.createServer();
	    
	    function weedays(day){
	      switch(day){
	        case'1':
	          return'Lunes'
	          break;
	        case'2':
	          return'Martes'
	          break;
	        case'3':
	          return'Mi√©rcoles'
	          break;
	        case'4':
	          return'Jueves'
	          break;
	        case'5':
	          return'Viernes'
	          break;
	        case'6':
	          return'S√°bado'
	          break;
	        case'7':
	          return'Domingo'
	          break;
	        default:
	          return'No v√°lido'
	      }
	    }
	    
	    function birthday(year, month, day){
	      return new Date(year, (month - 1), day)
	    }
	    
	    server.on('request', (req, res) => {
	      if(req.method === 'POST' && req.url == '/day'){
	        const currentDay = new Date();
	        
	        let body = []
	        req.on('data', chunk => body.push(chunk))
	        .on('end', ()=>{
	          res.writeHead(200, {'Content-type':'text/plain'});
	          body = Buffer.concat(body).toString();
	          const arreglo = body.split(" ");
	          const wD = birthday(arreglo[0], arreglo[1], arreglo[2]);
	          const dayIwasBorn = weedays(wD.getDay().toString());
	          console.log(dayIwasBorn)
	          res.end('T√∫ naciste un: ' + dayIwasBorn);
	        })
	        
	      }else{
	        res.statusCode = 404;
	        res.end();
	        console.log('404')
	      }
	      
	    }).listen(8000);
	    
	    console.log('Sever on http://localhost:8000')
	    
	    
	```

* **Jaime Gonzalez** (1)

	```
	    const http = require('http');
	    const server = http.createServer();
	    
	    const days = [
	      'Domingo',
	      'Lunes',
	      'Mastes',
	      'Mi√©rcoles',
	      'Jueves',
	      'Viernes',
	      'S√°bado'
	    ]
	    
	    server.on('request', (req, res) => {
	      if(req.method === 'POST' && req.url == '/echo') {
	        let body = [];
	        req
	          .on('data', chunk => {
	            body.push(chunk);
	          })
	          .on('end', () => {
	            body = Buffer.concat(body).toString();
	            const date = new Date(body);
	            if (date instanceof Date && !isNaN(date)) {
	              const day = days[date.getDay()];
	              res.writeHead(200, 'Content-Type','text/plain');
	              res.end(`Naciste el d√≠a ${day}`);
	            } else {
	              res.writeHead(400, 'Content-Type','text/plain');
	              res.end('Fecha ingresada no v√°lida. Debe ser en formato aaaa-mm-dd');
	            }
	          });
	      } else {
	        res.statusCode = 404;
	        res.end();
	      }
	    });
	    
	    server.listen(8000);
	    console.log("Servidor levantado");
	    
	```

* **Abraham Gonzalez** (1)

	```
	    const days = [
	      'Sunday',
	      'Monday',
	      'Tuesday',
	      'Wednesday',
	      'Thursday',
	      'Friday',
	      'Saturday'
	    ];
	    
	    server.on('request', (req, res) =>{
	      if(req.method === 'POST' && req.url === '/echo'){
	        let body = [];
	        req
	          .on('data', chunk =>{
	            body.push(chunk);
	          })
	          .on('end', ()=>{
	            body = Buffer.concat(body).toString();
	            let birthDate = new Date(body);
	            if(birthDate.getFullYear()){
	              res.writeHead(200, {'Content-Type': 'plain/text'});
	              res.end('Your birth day is: ${days[birthDate.getDay()]}');
	            }else{
	              res.statusCode = 500;
	              res.end('500 Error please, enter valid date');
	            }
	    
	          });
	      }else{
	        res.statusCode = 404;
	        res.end('404 Not found');
	      }
	    });
	    
	    
	    server.listen(8001);
	    console.log("Server run on http://localhost:8001");```
	    
	```

* **nova12** (1)

	
	mi soluci√≤n al reto:
	``` 
	    const http=require('http');
	    const server=http.createServer();
	    const dia=[
	        'lunes',
	        'martes',
	        'miercoles',
	        'jueves',
	        'viernes',
	        'sabado',
	        'domingo'
	    ]
	    server.on('request',(req,res)=>{
	        try {
	             if (req.method==='POST'&&req.url=='/echo') {
	            let body=[];
	            req.on('data',chunk=>{
	                body.push(chunk)
	            })
	            .on('end',()=>{
	                res.writeHead(200,{'Content-Type':'text/plain'})
	                body=Buffer.concat(body).toString()
	                constdate=newDate(body);
	                if(isNaN(date.getTime())){
	                    res.end(`fecha no reconocida`) 
	                }
	                const diade=dia[date.getDay()];
	                res.end(`nasiete el dia ${diade}`) 
	            })
	            
	        }else{
	            throw {mensage:"Page not found"}
	        } 
	        } catch (error) {
	            res.statusCode=404;
	            let mensaje="internal error, not found"
	            if(error.mensage){
	                mensaje=error.mensage;
	            }
	            res.end(mensaje)
	        }
	       
	        
	    })
	    server.listen(8050)
	    console.log("conection server http://localhost:8050");
	    
	```

* **ApolloAu** (1)

	
	Mi version del reto agregando un protoype a Date para validar la fecha recibida.
	``` 
	    const http = require("http");
	    const server = http.createServer();
	    
	    Date.prototype.isValid = function() {
	      // An invalid date object returns NaN for getTime() and NaN is the only
	      // object not strictly equal to itself.
	      return this.getTime() === this.getTime();
	    };
	    
	    let days = [
	      "Sunday",
	      "Monday",
	      "Tuesday",
	      "Wednesday",
	      "Thursday",
	      "Friday",
	      "Saturday"
	    ];
	    
	    server.on("request", (req, res) => {
	      if (req.method === "POST" && req.url == "/echo") {
	        let body = [];
	        req
	          .on("data", chunk => {
	            body.push(chunk);
	          })
	          .on("end", () => {
	            res.writeHead(200, { "Content-Type": "text/plain" });
	            body = Buffer.concat(body).toString();
	            var d = new Date(body);
	    
	            if (d.isValid()) {
	              body = days[d.getDay()];
	            } else {
	              body = "Date IS NOT VALID";
	            }
	    
	            res.end(body);
	          });
	      } else {
	        res.statusCode = 404;
	        res.end();
	      }
	    });
	    
	    server.listen(8001);
	    console.log("Servidor en la url http://localhost:8001");```
	    
	```

* **CarlosSalasFT** (1)

	```
	    const server = require('http').createServer()
	    
	    server.on('request', (req, res) => {
	        if (req.method == 'POST' && req.url == '/getDay') {
	            let body = []
	    
	            req.on('data', chunck => body.push(chunck))
	                .on('end', () => { 
	                    res.writeHead(200, { "Content-Type": "text/plain"})
	                    const day = new Date(Buffer.concat(body).toString()).toLocaleDateString('en-us', { weekday: 'long'})
	                    res.end(day)
	            })
	        } else {
	            res.statusCode = 404
	            res.end()
	        }
	    })
	    
	    server.listen(8002)
	    console.log('Server on http://localhost:8002')```
	    
	    con el formato de fecha por ejemplo : 14 January 2020
	```

* **jehielmartinez** (1)

	
	Reto
	``` 
	    const http = require('http');
	    const server = http.createServer();
	    
	    const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
	    
	    server.on('request', (req, res) => {
	        if(req.method === 'POST' && req.url === '/birthday'){
	            let body = [];
	            req.on('data', chunk => {
	                body.push(chunk);
	            })
	            .on('end', () => {
	                res.writeHead(200, {'Content-Type': 'text/plain'});
	                body = Buffer.concat(body).toString();
	                let birthday = new Date(body).getDay();
	                res.end(days[birthday]);
	            })
	        } else {
	            res.statusCode = 404;
	            res.end();
	        }
	    });
	    
	    server.listen(8001);
	    console.log('Birthday server on http://localhost:8001');
	    
	```

* **Miguel Angel** (1)

	
	Reto
	``` 
	    const http = require('http')
	    const server = http.createServer()
	    const days = ['Sunday','Monday','Tuesday','Wednesday','Thursday','Friday','Saturday']
	    
	    server.on('request',(req,res)=>{
	        if(req.method==='POST' && req.url=='/birthday'){
	            let body= []
	            req.on('data',chunk=>{
	                body.push(chunk)
	                body = Buffer.concat(body).toString()
	            })
	            .on('end',()=>{
	                res.writeHead(200,{'Content-Type':'text/plain'})
	                let i = newDate(body)
	                if(Number.isNaN(i.getDay())){
	                    res.end('Incorrect Date Entered!')
	                }else{
	                    res.end(`You were born on ${days[i.getDay()]}`)
	                }
	            })
	        }else{
	            res.statusCode=404
	            res.end()
	        }
	    })
	    
	    server.listen(8003)
	    console.log('Server in the url http://localhost:8003')```
	    
	```

* **Santa Karina Madre de Dios** (1)

	
	Mi soluci√≥n, intente hacerlo modular en caso de que se me ocurra como optimizarla m√°s adelante con lo que aprenda.
	``` 
	    /*
	    	birthday-server.js
	    */
	    const HandleRoutes= require('./modules/HandleRoutes.js');
	    const http = require('http');
	    const server = http.createServer();
	    
	    server
	        .on('request', (req, res)=>{
	    
	            if(req.method == 'GET' && req.url == '/birthday'){
	                HandleRoutes.getBirthday(req, res);
	            }elseif(req.method == 'POST' && req.url == '/birthday'){
	                HandleRoutes.postBirthday(req, res);
	            }else{
	                HandleRoutes.send404(req, res);
	            }
	        })
	        .listen(8080);
	    
	    
	        console.log('Server running on port http://localhost:8080');
	    
	```
	``` 
	    /*
	    	HandlerRoutes.js
	    */
	    
	    
	    const Year = require('./Year.js');
	    
	    functionrequestGetBirthday(req, res){
	        res.writeHead(200, {
	            'Content-Type': 'text/plain'
	        });
	        res.end('Solo envios de fecha por insomnia');
	    }
	    
	    functionrequestPostBirthday(req, res){
	        letdate = new Year();
	        let body = [];
	        console.log('Running function');
	        req
	            .on('data', chunk => {
	                console.log('Running chunks');
	                body.push(chunk);
	            })
	            .on('end', ()=>{
	                console.log('Running end');
	                res.writeHead(200, {'Content-Type': 'application/json'});
	    
	                body = Buffer.concat(body);
	                date.day =  JSON.parse(body);
	                body = date.day;
	                phrase = `Naciste el dia ${body}`;
	                res.end(phrase);
	            });
	    
	    
	    }
	    
	    functionrequest404(req, res){
	        res.writeHead(200, {
	            'Content-Type': 'text/html'
	        });
	        res.end('Ir a la seccion <a href="/birthday"> Birthday </a>');
	    }
	    
	    module.exports = {
	        getBirthday : requestGetBirthday,
	        postBirthday: requestPostBirthday,
	        send404 : request404
	    }
	    
	    
	```
	
	En esta sent√≠ que puedo modularla un poco m√°s con ‚ÄúRuta - Controlador‚Äù pero lo deje as√≠ por el momento.
	``` 
	    /*
	    	Year.js
	    */
	    
	    classYear {
	        week = ["Domingo", "Lunes", "Martes", "Miercoles", "Jueves", "Viernes", "Sabado"];
	        date;
	        constructor(obj){
	            if(obj){
	             this.date = newDate(obj.year,obj.month,obj.date);
	            }
	        }
	    
	        getday(){
	            letweekDay = this.date.getDay();
	            return this.week[weekDay];
	        }
	    
	        setday(obj){
	                this.date = newDate(obj.year,obj.month,obj.date);
	        }
	    }
	    
	    module.exports = Year;
	    
	    
	```
	
	Les agradecer√≠a si me comentan algunos tips para proteger mejor las propiedades de la clase.

* **PaoloTorregrosa** (1)

	
	Mi solucion, me costo un poco el tema de los eventos (Si alguien me puede dar una mano en los comentarios lo agradeceria :3 )
	``` 
	    const http = require('http');
	    const server = http.createServer();
	    
	    constDays = ['Domingo', 'Lunes', 'Martes', 'Miercoles', 'Jueves', 'Viernes', 'Sabado'];
	    constMonths = [
	        'Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio', 'Julio',
	        'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'
	    ];
	    
	    server.on('request', (req, res) => {
	        if (req.method === 'POST') {
	    
	            let body = []
	    
	            req.on('data', chunk => {
	                body.push(chunk);
	            })
	                .on('end', () => {
	                    res.writeHead(200, { "Content-Type": "text/plain" });
	                    body = Buffer.concat(body).toString();
	                    
	                    letresult = body.split('-');
	                    let date = new Date(result[0], result[1]-1, result[2]);
	                    let responseString = `Naciste en ${Months[date.getMonth()]}, ${Days[date.getDay()]} de ${date.getFullYear()}`;
	    
	                    res.end(responseString);
	                })
	    
	        } else {
	            res.statusCode = 404;
	            res.end();
	        }
	    });
	    
	    function getDay(body) {
	    
	    }
	    
	    server.listen(8001)
	    console.log("Server running at: localhost:8001");
	    
	```

* **Daniel Hurtado** (1)

	
	Creo que he sido el √∫nico que he hecho el ejercicio enviando los datos como un formulario de verdad, con los valores en los headers, como funciona POST. Para luego leerlos en node usando req.headers (year, month y day):
	``` 
	    const http = require('http');
	    const server = http.createServer();
	    
	    server.on('request', (req, res) => {
	        if(req.method === 'POST') {
	            if(!req.headers.year || !req.headers.month || !req.headers.day) {
	                var response = 'No haz enviado todos los datos requeridos';
	            } else{
	                letdate = newDate(req.headers.year, req.headers.month, req.headers.day)
	                let days = ['Domingo', 'Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado'];
	                var response = `Naciste un ${days[date.getDay()]}`;
	            }
	            res.writeHead(200, {'Content-Type': 'text/plain'});
	            res.end(response);
	        } else {
	            res.statusCode = 404;
	            res.end();
	        }
	    })
	    .listen(8001);
	    
	    console.log('Servidor en la url: http://localhost:8001');
	    
	```

* **Alfredo Gonzalez** (1)

	
	Mi soluci√≥n üòÑ  
	el usuario hace la petici√≥n ‚ÄòPOST‚Äô en el formato normal:  
	dd/mm/yyyy
	
	![Screen Shot 2019-12-07 at 19.14.59.png](https://static.platzi.com/media/user_upload/Screen%20Shot%202019-12-07%20at%2019.14.59-86bcee6c-7eb4-4d9c-a7c5-11367b030050.jpg)

* **Dante Calder√≥n** (1)

	
	Mi solucion:
	``` 
	    const http = require('http')
	    
	    const server = http.createServer()
	    
	    const DAYS = ['Domingo', 'Lunes', 'Martes', 'Miercoles', 'Jueves', 'Viernes', 'Sabado']
	    
	    server.on('request', (req, res) => {
	      if(req.method === 'POST' && req.url === '/get-day') {
	        let body = []
	    
	        req.on('data', chunk => {
	          body.push(chunk)
	        }).on('end', () => {
	          body = Buffer.concat(body).toString()
	          const dateOfBirth = newDate(body)
	          
	          if(dateOfBirth.toString() !== 'Invalid Date') {
	            const day = DAYS[dateOfBirth.getDay()] 
	            res.writeHead(200, { 'Content-Type': 'text/plain' })
	            res.end(day)
	          } else {
	            res.statusCode = 400// Bad Request
	            res.end('La fecha es invalida')
	          }
	        })
	      } else {
	        res.statusCode = 404
	        res.end('Not Found')
	      }
	    })
	    
	    server.listen(8039)
	    console.log('Serving on http://localhost:8039')
	    
	```

* **rusbel berm√∫dez rivera** (1)

	
	Muy animado con este nuevo curso, aqu√≠ mi soluci√≥n, batall√© porque pensaba que la l√≥gica iba en el request, en lugar de haberla puesto en el response, al saqu√© la logica a a una arrow fuction haciendo un callback
	``` 
	    const http = require("http");
	    constserver = http.createServer();
	    
	    const days = ["lunes", "martes", "mi√©rcoles", "jueves", "viernes", "s√°bado", "domingo"]
	    const getWeekDay = (body) => {
	    	birthDate = newDate(body)
	    	birthDate = days[birthDate.getDay() - 1]
	    	return (`Usted naci√≥ un d√≠a ${birthDate}`)
	    };
	    
	    server.on("request", (request, response) => {
	    	if (request.method === "POST" && request.url == "/echo") {
	    		let body = []
	    		request.on('data', (chunk) => {
	    			body.push(chunk);
	    		})
	    		.on('end', () => {
	    			response.writeHead(200, {"Content-type": "text/plain"});
	    			body = Buffer.concat(body).toString()
	    			response.end(getWeekDay(body));
	    		});
	    	} else {
	    			response.statusCode = 404
	    			response.end();
	    		}
	    });
	    
	    server.listen(8002);
	    console.log("Servidor en la url http://localhost:8002");
	    
	    
	```

* **Manuel Silva Guevara** (1)

	
	Aqu√≠ mi soluci√≥n!
	``` 
	    const http = require("http");
	    const server = http.createServer();
	    
	    const getBrithDay = (date) => {
	      const weekDays = ["Lunes", "Martes", "Mi√©rcoles", "Jueves", "Viernes", "S√°bado", "Domingo"];
	      return weekDays[date.getDay()];
	    }
	    
	    server.on("request", (req, res) => {
	      if(req.method === "POST" &&  req.url === "/echo") {
	        let body = [];
	    
	        req
	          .on("data", chunk => {
	            body.push(chunk);
	          })
	          .on("end", () => {
	            res.writeHead(200, { "Content-Type": "text/plain"} );
	            const birthDay = getBrithDay(new Date(Buffer.concat(body).toString()));
	            if(birthDay !== undefined) {
	              res.end(birthDay);
	            } else {
	              console.log(birthDay);
	              res.end("no es una fecha");
	            }
	          });
	      } else {
	        res.statusCode = 404;
	        res.end();
	      }
	    });
	    
	    server.listen(8085);
	    
	```

* **Fernando Torres** (1)

	
	Aqu√≠ mi propuesta de soluci√≥n al reto.  
	Incluye uso horario para mayor precisi√≥n y validaci√≥n de fecha
	``` 
	    const http = require('http');
	    const server = http.createServer();
	    
	    server.on('request', (req, res) => {
	        if (req.method === 'POST' && req.url == "/echo") {
	            let body = [];
	            req.on('data', chunk => {
	                body.push(chunk);
	            })
	            .on('end', () => {
	                res.writeHead(200, {'Content-Type': 'text/plain'});
	    
	                body = Buffer.concat(body).toString();
	                //Hay que incluir el uso horario, en mi caso para M√©xico -6hrs desde UTC
	                fechaEntrada = body + 'T12:00:00-06:00';
	    
	                let fechaCumple = new Date(fechaEntrada);
	                if (fechaCumple instanceof Date && !isNaN(fechaCumple.valueOf())) {
	                    console.log(`\nFecha v√°lida: ${body} `);
	                    console.log(`Fecha de nacimiento en horario local: ${fechaCumple}`);
	    
	                    //Obtenemos el d√≠a de la semana
	                    let dayOfWeek = 
	                        ['Domingo', 'Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado'];
	                    let message = dayOfWeek[fechaCumple.getDay()];
	                    console.log(`El d√≠a de tu nacimiento fue: ${message}`);
	    
	                    res.end(message);
	                } else {
	                    console.log(`\nFecha inv√°lida: ${body}. Por favor usa formato 'YYYY-MM-DD'`);
	                    res.statusCode = 404;
	                    res.end('FECHA INV√ÅLIDA');
	                }
	            })
	        } else {
	            res.statusCode = 404;
	            res.end();
	        }
	    
	    });
	    
	    server.listen(8001);
	    console.log('Servidor en la url http://localhost:8001');
	    
	    
	```

* **Yesenia S√°nchez E.** (1)

	
	Aqu√≠ mi soluci√≥n üòÑ
	``` 
	    const http = require('http');
	    const server = http.createServer();
	    
	    server.on('request', (req, res) => {
	        if(req.method === 'POST' && req.url == '/echo'){
	            let weekdays = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
	            let date = [];
	            req.on('data', chunk => {
	                date.push(chunk);
	            })
	            .on('end', () => {
	                res.writeHead(200, {'Content-Type': 'text/plain'});
	                date = Buffer.concat(date).toString();
	                let birthDate = new Date(date)
	                res.end(weekdays[birthDate.getDay()]);
	            })
	        } else {
	            res.statusCode = 404;
	            res.end();
	        }
	    
	    });
	    
	    server.listen(8080);
	    console.log('Servidor en la url http://localhost:8080');
	    
	    
	```

* **Luis Rodriguez** (1)

	
	Mi soluci√≥n al reto:
	``` 
	    //Challenge: crear un servidor que reciba mi fecha de cumplea√±os y
	    // devuelva el dia de la que nac√≠
	    //Expected input: Sep 1, 1991 o 09/01/1991
	    //Expected output: Domingo
	    
	    const http = require('http');
	    const server = http.createServer();
	    
	    server.on('request', (req, res) => {
	    	if (req.method === 'POST' && req.url == '/echo') {
	    		let bday = [];
	    		var weekday = new Array(7);
	    		weekday[0] = 'Sunday';
	    		weekday[1] = 'Monday';
	    		weekday[2] = 'Tuesday';
	    		weekday[3] = 'Wednesday';
	    		weekday[4] = 'Thursday';
	    		weekday[5] = 'Friday';
	    		weekday[6] = 'Saturday';
	    		req
	    			.on('data', chunk => {
	    				bday.push(chunk);
	    			})
	    			.on('end', () => {
	    				res.writeHead(200, { 'Content-Type': 'text/plain' });
	    				dt = new Date(bday);
	    				dayOfBday = weekday[dt.getDay()];
	    				res.end(`Si tu fecha de nacimiento es ${dt}, naciste en un ${dayOfBday}`);
	    			});
	    	} else {
	    		res.statusCode = 404;
	    		res.end();
	    	}
	    });
	    
	    server.listen(8001);
	    console.log('El servidor est√° corriendo en la url http://localhost.8001');
	    
	```

	* **claudiomorales** (1)

		
		buen d√≠a, y como podr√≠a probar tu ejemplo. tengo problemas al enviar el a√±o de nacimiento

	* **claudiomorales** (1)

		
		solucionado, muchas gracias

* **Alejandro Silva Berbesi** (1)

	
	Mi soluci√≥nn a reto. Basado en el c√≥digo de @Antury üòÖ
	``` 
	    const http = require('http');
	    const server = http.createServer();
	    
	    const weekdays = [
	        'Domingo',
	        'Lunes',
	        'Martes',
	        'Mi√©rcoles',
	        'Jueves',
	        'Viernes',
	        'S√°bado'
	    ];
	    
	    server.on('request', (req, res) => {
	      if (req.method == 'POST' && req.url === '/birthday') {
	        let body = [];
	        req.on('data', chunk => {
	          body.push(chunk);
	        })
	        .on('end', () => {
	          res.writeHead(200, {'Content-Type': 'text/plain'});
	          let dayOfBirth = (new Date(body)).getDay();
	          res.end(`Naciste un d√≠a: ${weekdays[dayOfBirth]}`);
	        })
	      }else{
	        res.statusCode = 404;
	        res.end();
	      }
	    })
	    
	    server.listen(8001);
	    console.log('servidor en la url: http://localhost:8001');
	    
	```

* **sebastianalzte** (1)

	```
	    	const http = require('http')
	    
	    
	    const server = http.createServer()
	    
	    
	    server.on('request', (req, res) => {
	        if (req.method === 'POST' && req.url === '/data') {
	            res.writeHead(200, {
	                'Content-Type': 'text/plain'
	            })
	            dateBirthday = []
	            req.on('data', data => {
	                dateBirthday.push(data)
	            })
	                .on('end', () => {
	                    dateBirthday = Buffer.concat(dateBirthday).toString()
	                    let DaysOfWeek = ['Domingo', 'Lunes', 'Martes', 'Miercoles', 'Jueves', 'Viernes', 'Sabado']
	                    let date = new Date()
	                    console.log(`Naciste el dia de la semana ${DaysOfWeek[date.getDay((dateBirthday - 1))]}`);
	                })
	        } else {
	            res.statusCode = 404
	            res.end({
	                message: "Servicio no encontrado"
	            })
	        }
	    })
	    
	    server.listen(8000)
	    console.log("Server on port 8000");
	    
	    
	```

* **IVANCHIPATECUA** (1)

	
	Trabaje validando el formato de fecha ISO Date.
	``` 
	    const http = require('http');
	    
	    http.createServer((request, response) => {
	      if (request.method === 'POST' && request.url === '/echo') {
	        const isoPattern = /^\d{4}-\d\d-\d\d$/;
	        let body = [];
	        const days = ['lunes', 'martes', 'mi√©rcoles', 'jueves', 'viernes', 's√°bado', 'domingo'];
	        request.on('data', (chunk) => {
	          body.push(chunk);
	        }).on('end', () => {
	          body = Buffer.concat(body).toString();
	          if (isoPattern.test(body)) {
	            const dayBirthday = new Date(body);
	            response.end(`T√∫ d√≠a de nacimiento es un ${days[dayBirthday.getDay()]}`);
	          } else {
	            response.end(`El formato de fecha debe ser YYYY-MM-DD`);
	          }
	        });
	      } else {
	        response.statusCode = 404;
	        response.end('La p√°gina no se encuentra');
	      }
	    }).listen(8080);
	    
	```

* **edwintrumpet** (1)

	
	**Respuesta al reto**  
	En este caso se puede pasar la fecha en formatos aceptados por el constructor de `Date()` como:
	
	  * October 13, 2019
	  * 10-13-2019
	
	
	``` 
	    const http = require('http')
	    const server = http.createServer()
	    
	    const PORT = 8000
	    
	    server.on('request', (req, res) => {
	        if(req.method === 'POST' && req.url === '/echo'){
	            let body = []
	            let days = ['Domingo', 'Lunes', 'Martes', 'Mi√©rcoles', 'Jueves', 'Viernes', 'S√°bado']
	    
	            req
	                .on('data', chunk => {
	                    body.push(chunk)
	                })
	                .on('end', () => {
	                    res.writeHead(200, {'Content-Type': 'text/plain'})
	                    body = Buffer.concat(body).toString()
	                    let birth = newDate(body)
	                    res.end(`T√∫ naciste un ${days[birth.getDay()]}`)
	                })
	        }else{
	            res.writeHead(404, {'Content-Type': 'text/plain'})
	            res.end('Esta p√°gina no existe')
	        }
	    })
	    
	    server.listen(PORT)
	    console.log(`Server on http://localhost:${PORT}`)
	    
	    
	```

* **SKILLON** (1)

	```
	    const http=require('http');
	    const server=http.createServer();
	    
	    server.on('request',(req,res)=>{
	        if(req.method==='POST' && req.url=='/diacumple'){
	            let body=[];
	            req
	            .on('data',chunk=>{//evento de cada ves que se reciben datos en el buffer
	                body.push(chunk);
	            })
	            .on('end',()=>{//evento que se ejecuta cuando el Buffer ya tiene todos los datos
	                body=Buffer.concat(body).toString();
	                res.writeHead(200,{'Content-Type':'text/plain'});
	                let fecha=new Date(body);
	                let dias=['Domingo','Lunes','Martes','Miercoles','Jueves','Viernes','Sabado'];
	                res.end(`Naciste un ${dias[fecha.getDay()]}`);
	    
	            })
	        }else{
	            res.writeHead(404,{'Content-Type':'text/plain'});
	            res.end('ERROR 404 - PAGINA NO ENCONTRADA');
	        }
	    })
	    
	    server.listen(8000);
	    
	```

* **Jeison Vargas** (1)

	
	Mi reto:  
	La fecha debe ser ingresada: aaaa/mm/dd
	``` 
	    const http = require("http");
	    const server = http.createServer();
	    
	    server.on("request", (req, res) => {
	      if (req.method === "POST" && req.url === "/birthday") {
	        let body = [];
	    
	        req
	          .on("data", chunk => {
	            body.push(chunk);
	          })
	          .on("end", () => {
	            res.writeHead(200, { "Content-Type": "text/plain" });
	            body = Buffer.concat(body).toString();
	    
	            let day = new Date(body);
	            let weekday = day.getDay();
	            let week = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
	    
	            res.end(`Your born day is ${week[weekday]}`);
	          });
	      } else {
	        res.statusCode = 404;
	        res.end();
	      }
	    });
	    
	    server.listen(4001);
	    console.log("Servidor en la url http://localhost:4001");
	    
	```

* **jasanhdz** (1)

	
	Mi reto üòÑ  
	![img.png](https://static.platzi.com/media/user_upload/img-dfcd6872-5a57-4e20-94f9-60f1f9ebb842.jpg)

* **Ernesto Palafox** (1)

	
	Mi soluci√≥n. Nac√≠ un d√≠a mi√©rcoles , revis√© y es verdad.  
	Puedes utilizar inputs como: YYYY-MM-DD, YYYY|MM|DD, YYYY/MM/DD  
	Aqu√≠ el c√≥digo: <https://gist.github.com/palafoxernesto/b6c37b17b0929b51c699e82682c3b1f0>  
	![](https://i.imgur.com/X319lpW.png)

* **Alejandro Gonz√°lez Reyes** (1)

	
	Va mi soluci√≥n.
	``` 
	    /**
	     * Este servidor echo, tiene como finalidad recibir datos (fecha de nacimiento) mediante POST
	     * y responder con el nombre del d√≠a que le corresponde a dicha fecha
	     */
	    const http = require("http");
	    const server = http.createServer();
	    
	    server.on("request", (req, res) => {
	      if (req.method === "POST" && req.url === "/birthday") {
	        let birthday = [];
	        req
	          .on("data", chunk => {
	            birthday.push(chunk);
	          })
	          .on("end", () => {
	            res.writeHeader(200, { "Content-type": "text/plain" });
	            birthday = Buffer.concat(birthday).toString();
	            const day = getDayBirth(birthday);
	            res.end(`Tu naciste un d√≠a ${day}`);
	          });
	      }
	    });
	    
	    server.listen(3000, () => {
	      console.log("Servidor escuchando en http://localhost:3000");
	    });
	    
	    function getDayBirth(birthday) {
	      // Tomando como base que la fecha me llega en YYYY-mm-dd
	      const data = birthday.split("-");
	      // Construir una fecha valida. el mes 0 es Enero
	      const newdate = new Date(
	        Number(data[0]),
	        Number(data[1]) - 1,
	        Number(data[2])
	      );
	    
	      switch (newdate.getDay()) {
	        case0:
	          return"Domingo";
	        case1:
	          return"Lunes";
	        case2:
	          return"Martes";
	        case3:
	          return"Mi√©rcoles";
	        case4:
	          return"Jueves";
	        case5:
	          return"Viernes";
	        case6:
	          return"S√°bado";
	      }
	    }
	    
	```

* **carlos-bolivar** (1)

	```
	    const http = require('http');
	    const server = http.createServer();
	    
	    server.on("request", (req, res) => {
	        if (req.method === 'POST' && req.url == "/echo") {
	            let body = [];
	    
	            req
	                .on('data', chunck => {
	                    body.push(chunck)
	                })
	                .on('end', () => {
	                    res
	                        .writeHead(200, 'Content-Type', 'text/plain');
	    
	                    body = Buffer
	                        .concat(body)
	                        .toString()
	                        .split('-');
	    
	                    res
	                        .end(returnDayOfWeekend(body));
	                })
	        } else {
	            res.statusCode = 404;
	            res.end();
	        }
	    
	    });
	    
	    function returnDayOfWeekend(date) {
	    
	        date = new Date(date[0], date[1] - 1, date[2]);
	        let day = '';
	    
	        switch (String(date.getDay())) {
	            case'0': day = 'Domingo'
	            break;
	            case'1': day = 'Lunes'
	            break;
	            case'2': day = 'Martes'
	            break;
	            case'3': day = 'Miercoles'
	            break;
	            case'4': day = 'Jueves'
	            break;
	            case'5': day = 'Viernes'
	            break;
	            case'6': day = 'Sabado'
	            break;
	        }
	    
	        return `El dia de tu cumplea√±os es el dia ${day}`;
	    }
	    
	    const PORT = '8001'
	    server.listen(PORT);
	    console.log(`Servidor iniciado en la url http://localhost:${PORT}`);
	    
	    
	```

* **Gonzalo Vazquez** (1)
No entiendo como hacer para que poniendo mi fecha de cumplea√±os sepa el dia que nac√≠ en ese a√±o. Tiene que haber un calendario con los d√≠...

	* **Juan Jos√© Vega Quintero** (1)

		
		No necesariamente  
		Hay una forma muy sencilla que hizo @darkjeda

* **Alonso Carrillo Ru√≠z** (0)

	
	Mi soluci√≥n üòÉ
	``` 
	    <code>
	    const http = require("http");
	    const server = http.createServer();
	    
	    let dias = ['Sunday', 'Monday', 'Tursday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
	    
	    server.on("request", (req, res) => {
	        if(req.method === "POST" && req.url === "/echo"){
	                let fecha = [];
	            req.on('data', chunk => {
	                fecha.push(chunk);
	            })
	            .on ('end', () => {
	                res.writeHead(200, {"Content-Type":"text/plain"});
	                let miDia = new Date(fecha);
	                fecha = Buffer.concat(fecha).toString();
	                miDia = miDia.getDay();
	                res.end(dias[miDia]);
	            });    
	        } else {
	            res.statusCode = 404;
	            res.end();
	        }
	        
	    });
	    
	    server.listen(8001);
	    console.log('Servidor disponible en http://localhost:8001');
	    
	```

# Manejo y uso de Streams con Node.js

## 0090. Introducci√≥n a streams

### Descripci√≥n:


Los Streams son una colecci√≥n de datos como los arrays o strings s√≥lo que se van procesando pedazo por pedazo, esta capacidad los hace muy poderosos porque podemos manejar una gran cantidad de datos de manera √≥ptima.

### Links:

* [Stream | Node.js v12.9.0 Documentation](https://nodejs.org/api/stream.html#stream_stream)

### Comentarios:

* **Juan Carlos Garc√≠a Esquivel** (7)

	```
	    //m√≥dulo para crear un servidor
	    const http = require('http')
	    //m√≥dulo para trabajar con archivos
	    const fs = require('fs')
	    //inicializamos el servidor
	    const server = http.createServer()
	    //manejamos los eventos del servidor
	    server.on('request', (request, response) => {
	      /**
	       * lee el archivo como un stream
	       * el tama√±o del chunk por defecto es de 64kb
	       * para un fs, para un stream normal es de 16kb
	       */
	      const src = fs.createReadStream('./big')
	      
	      /**
	       * la funci√≥n de 'pipe()' es limitar el 
	       * almacenamiento en buffer de datos a niveles
	       * aceptables de modo que no se sobrecargue la
	       * memoria disponible.
	       */
	      src.pipe(response)
	    })
	    
	    server.listen(3000)
	    
	```

* **Juan Carlos Garc√≠a Esquivel** (6)

	
	Les comparto un articulo muy bueno que encontr√© de streams en **Node.js** me ayudo a entender mejor, y saber porque uso los chunks en el v√≠deo anterior, espero que les ayude üòÉ [Streams en Node.js](https://elabismodenull.wordpress.com/2017/03/28/el-manejo-de-streams-en-nodejs/)

* **danielsanz (Platzi)** (5)

	
	Repositorio de la clase: <https://github.com/glrodasz/platzi-backend-node/tree/introduccion-a-streams/learning-node/streams>

* **Mariano34** (3)

	
	Interesante, en vez de cargar el archivo de una sola vez y agotar la memoria. Se va cargando por lotes o fracciones reduciendo as√≠ el consumo de memoria y una eventual sobrecarga del servidor.

* **Fernando Torres** (2)

	
	¬øQu√© ocurre cuando se omite la l√≠nea
	``` 
	    file.end();
	    
	```
	
	Lo intent√© y no noto nada extra√±o, pero seguramente algo sale mal, no?

	* **Luis Miguel gonzalez** (4)

		
		Lo que pasa es que el no va a ejecutar el evento end, por lo tanto no te va a enviar una respuesta que en este caso es que no crearia el archivo.

* **heysoypaez** (2)

	
	Shit: de 14.0 el porcentaje de consumo de memoria a 2.0 el porcentaje m√°s alto!

* **Jose Rodriguez Luis** (2)

	
	no se puede observar el error de memoria que mencionan en el v√≠deo ( tiempo 4:20)

	* **glrodasz** (4)

		
		Si, mientras solucionan el problema del video te cuento que lo que sucede: Es que la memoria va a empezar a aumentar y va a ocupar el tama√±o del archivo grande del ejemplo.
		
		Recuerda que lo puedes reproducir en tu maquina.

* **Christian Michell** (2)
Algo pasa que cuando hago curl -i localhost:3000 en una segunda terminal, me sale este mensaje cmdlet Invoke-WebRequest en la posic...

	* **glrodasz** (1)

		
		No estoy familiarizado con el error, pero una alternativa es usar HTTPie que permite hacer HTTP request en la terminal de una manera mas sencilla (Es lo que yo uso normalmente) <https://httpie.org/>

* **Juan Carlos Pinz√≥n** (1)

	
	Hice la misma prueba en mi Windows y sucede que en un primer momento me consumi√≥ 105Mb, pero luego volvi√≥ a la normalidad 5,7Mb aprox, sin embargo en la consola se segu√≠ mostrando la data por un buen rato y ya lo que empez√≥ a subir memoria y cpu fue la consola que lleg√≥ hasta un 37% de cpu. Imagino que lo inicial fue cuando node sirvi√≥ el archivo el resto ya fue pura impresi√≥n en la consola.

* **carlosextra1** (1)

	
	Este script con pipe ( Funciona como tuber√≠a ) es muy bueno, ya que consume muy pocos recursos
	``` 
	    const fs  = require("fs");
	    const server = require('http').createServer();
	    
	    server.on("request", (req, res) => {
	        const src = fs.createReadStream("./big.txt")
	        src.pipe(res);
	    })
	    
	    server.listen(3000, () =>console.log('Corriendo en el puerto 3000'))```
	    
	    link con un articulo peque√±o que reforzara esta clase
	    https://guru99.es/node-js-streams-filestream-pipes/
	```

* **Iv√°n Dar√≠o S√°nchez Jim√©nez** (1)

	
	 ** _stream-server.js_**
	``` 
	    const fs = require('fs');
	    const server = require('http').createServer();
	    
	    server.on('request', (req, res) => {
	        const src = fs.createReadStream('./big');
	        src.pipe(res);
	    
	    })
	    
	    server.listen(3000)
	    
	```
	
	Hacer una petici√≥n al servidor stream-server.js con curl
	``` 
	    curl -i localhost:3000
	    
	```

* **Iv√°n Dar√≠o S√°nchez Jim√©nez** (1)

	
	**_file-server.js_**
	``` 
	    const fs = require('fs');
	    const server = require('http').createServer();
	    
	    server.on('request', (req, res) => {
	        fs.readFile("./big", (err, data) => {
	            if(err){
	                console.log('error', err)
	            }
	    
	            res.end(data)
	        })
	    })
	    
	    server.listen(3000)
	    
	```
	
	Hacer una petici√≥n al servidor file-server.js con curl
	``` 
	    curl -i localhost:3000
	    
	    
	```

* **Iv√°n Dar√≠o S√°nchez Jim√©nez** (1)

	
	**big-file.js**
	``` 
	    const fs = require('fs');
	    const file = fs.createWriteStream('./big');
	    
	    for (let i = 0; i < 1e6; i++) {
	        file.write('La escuela de JS es nuestro primer paso para un gran futuro');
	    }
	    
	    file.end();
	    
	```

* **Alejandro Gonz√°lez Reyes** (1)

	
	Es interesante, ahora entiendo mucho mejor para que sirven los Strams, para enviar flujos de datos y consumirlos poco a poco y no enviar todo de un solo golpe.
	
	![2019-09-14-125114_1366x768_scrot.png](https://static.platzi.com/media/user_upload/2019-09-14-125114_1366x768_scrot-6a5b0bbc-52aa-49c1-97ae-ace489ebf7c1.jpg)

	* **Sebastian Cardoso Castillo** (1)

		
		Estas usando Debian? Que tal? Hace 5 a√±os uso Ubuntu y estoy pensando en migrar. Tema offtopic. Ahora veo Debian en todas partes.

	* **Alejandro Gonz√°lez Reyes** (5)

		
		De hecho Ubuntu est√° basado en Debian. En mi caso uso Lubuntu, tengo una laptop con muy pocos recursos y esta distro le ha quedado perfecta a mi ordenador. Sin mentirte que tarda aproximadamente 1 minuto en abrir vscode y con el navegador abierto bueno ya te imaginar√°s. Pero hay que trabajar con lo que se tiene.

* **Andrea M√©ndez D√≠az** (1)
Corro el curl, y no lo imprime en la terminal pero s√≠ en el browser. No s√© por qu√©. ¬øAlguien sabe qu√© es lo que sucede?

	* **Juan David Castro (Platzi)** (1)

		
		¬°Hola! ¬øPuedes mostrarnos el resultado que te arroja la consola? As√≠ sin ver los detalles es muy complicado ayudarte. üôèüêõ

## 0100. Readable y Writable streams

### Descripci√≥n:


Los Readable y Writeable streams tienen los siguientes eventos y funciones respectivamente:

## Readable

### Eventos

  * **data**. Se dispara cuando recibe datos.
  * **end**. Se dispara cuando termina de recibir datos.
  * **error**. Se dispara cuando hay un error.



### Funciones

  * pipe
  * unpipe
  * read
  * push



## Writeable

### Eventos

  * **drain**. Se dispara cuando emite datos.
  * **finish**. Se dispara cuando termina de emitir.
  * **error**. Se dispara cuando hay un error.



### Funciones

  * write
  * end



Recuerda que tienen estos eventos porque los heredan de la clase **EventEmitter**.

### Links:

* [Stream | Node.js v12.9.0 Documentation](https://nodejs.org/api/stream.html#stream_writable_streams)

* [Stream | Node.js v12.9.0 Documentation](https://nodejs.org/api/stream.html#stream_readable_streams)

### Comentarios:

* **Juan Carlos Garc√≠a Esquivel** (9)

	
	 **writable-stream.js**
	``` 
	    //importamos Writable del m√≥dulo de streams
	    const { Writable } = require('stream')
	    
	    /**
	     * Creamos un nuevo Writable y lo asignamos
	     * a la constante writableStream
	     */
	    const writableStream = new Writable({
	      defaultEncoding: 'utf8',
	      /**
	       *
	       * @param {*} chunk el buffer de entrada
	       * @param {*} encoding la codificaci√≥n
	       * del buffer, si el chunk es un string
	       * el enconding es la codificaci√≥n en
	       * caracteres de esa cadena, si la
	       * codificaci√≥n es un buffer esta se puede
	       * ignorar
	       * @param {*} callback esta funci√≥n es
	       * llamada cuando se complete el
	       * procesamiento para el chunk
	       * proporcionado.
	       */
	      write(chunk, encoding, callback) {
	        console.log(chunk.toString())
	        callback()
	      }
	    })
	    process.stdin.pipe(writableStream)
	    
	```
	
	**readable-stream.js**
	``` 
	    //requerimos el m√≥dulo de Readable stream
	    const { Readable } = require('stream')
	    //instanciamos un nuevo Readable stream
	    const readableStream = new Readable()
	    /**
	     * Cuando se ejecuta el m√©todo push()
	     * los datos son almacenados en el buffer
	     * si no se consumen los datos en el buffer 
	     * estos se almacenan en la cola interna 
	     * hasta que son consumidos
	     */
	    readableStream.push(`${0 / 0}`.repeat(10).concat(' Batman, Batman!'))
	    /**
	     * El stream de lectura se da por terminado
	     * cu√°ndo el buffer recibe un null en este caso
	     * con el m√©todo push(null)
	     */
	    readableStream.push(null)
	    
	    /**
	     * "pipe(writable)" Este m√©todo nos permite 
	     * encadenar diferentes streams para su 
	     * manipulaci√≥n por medio de c√≥mputos. Lo que
	     * hace es recibir un stream
	     * de entrada, realiza una operaci√≥n sobre 
	     * dicho stream y devuelve un nuevo stream con
	     * dicha transformaci√≥n.
	     * 
	     * "stdout" es un writable stream que toma el 
	     * buffer y lo muestra en pantalla
	     */
	    readableStream.pipe(process.stdout)
	    
	```
	
	**readable-stream-on-demand.js**
	``` 
	    //importamos el modulo readable
	    const { Readable } = require('stream')
	    
	    //instanciamos un nuevo readable stream
	    const readableStream = new Readable({
	      /**
	       * constructor
	       * @param {*} size tama√±o del buffer
	       * de lectura este se representa en bytes
	       * y el valor por defecto es 16kb para un
	       * readable stream y para fs es de 64kb
	       * par√°metro opcional
	       */
	      read(size) {
	        setTimeout(() => {
	          //la letra es mayor que z
	          if (this.chartCode > 90) {
	            //finalizamos la lectura
	            this.push(null)
	            return;
	          }
	          /**
	           * agregamos la letra al buffer y despu√©s
	           * se le suma 1 
	           */
	          this.push(String.fromCharCode(this.chartCode++))
	        }, 100)
	      }
	    })
	    
	    /**
	     * inicializamos el atributo chartCode
	     * y le asignamos el valor  ASCII de la letra A
	     */
	    readableStream.chartCode = 65
	    /**
	     * manejamos el stream de lectura y le asignamos
	     * un stream de salida por pantalla
	     */
	    readableStream.pipe(process.stdout)
	    
	```

* **Sebastian** (8)

	
	jajajajja NaN NaN Batman!!! Batman!! la mejor parte de la clase

* **David Behar** (4)

	
	Si les cuesta trabajo entender el **`process.stdout`** , cuando corremos un programa en consola tenemos 3 outputs posibles
	
	  * standard input (stdin)
	  * standard output (stdout)
	  * standard error (stderr)  
	.  
	El output es lo que mostramos en consola  
	el input es el argumento que le damos al programa, todo lo que sigue al `programa.js`  
	El error es un n√∫mero que regresamos dependiendo del error que queramos mostrar (Puede no ser un n√∫mero)
	
	
	
	Por lo mismo, hice el siguiente programa usando lo que vimos en Readable y Writable, pero el output del Readable se tomar√° como argumento del Writable. As√≠:
	``` 
	    const  {Writable, Readable} = require( 'stream' );
	    
	    const  readableStream = new Readable();
	    readableStream.push(`${0/0} `.repeat(10).concat('Batman! Batman\n'))
	    readableStream.push(null);
	    readableStream.pipe(process.stdin);
	    
	    const  writableStream = new Writable({
	        write(chunk, encoding, callback){
	            console.log(chunk.toString());
	            callback()
	        }
	    
	    });
	    
	    process.stdin.pipe(writableStream);
	    
	```

* **heysoypaez** (4)

	
	Us√≥ el n√∫mero 90 porque ese es el c√≥digo ASCII de la Z, la √∫ltima letra del abecedario.
	
	Ac√° hay varios c√≥digos ASCII por si alguno andaba perdido:  
	<https://ascii.cl/>

* **PaoloTorregrosa** (2)

	
	Si como yo tuvieron problemas entendiendo esta clase, les dejo una buena info (si manejan ingles) sobre [streams de node](https://www.freecodecamp.org/news/node-js-streams-everything-you-need-to-know-c9141306be93/) espero les sea √∫til :3

	* **Maximo Martinez Soria** (2)

		
		Wow es una explicaci√≥n increiblemente parecida a la de este curso jajaja

* **Harold Velasquez Barona** (2)

	
	No entend√≠ para que el size si nunca lo usa?

	* **Juan Carlos Garc√≠a Esquivel** (5)

		
		cuando se crea un stream se puede definir el tama√±o (size) del buffer, este tama√±o representa el n√∫mero de bytes que el buffer puede almacenar, esto lo puedes utilizar cuando tienes un tama√±o de memoria limitado y quieres asegurarte que el buffer no sobrepasen un tama√±o que perjudique tu servidor, esto no se menciona en el video pero este size se define en el constructor (el m√©todo `read(size)`) del readable stream, este par√°metro es opcional y por defecto es de **16kb** para un readable stream normal y de **64kb** para un readable stream del fs.
		
		Espero haberte ayudado, por si no me explique bien ac√° te dejo un enlace con mas info del size [Read size](https://nodejs.org/api/stream.html#stream_readable_read_size)

* **Diego Artiles** (2)

	
	Podr√≠an hacer un curso de NestJS, el framework con arquitectura similar a Angular para NodeJS?

	* **edwintrumpet** (1)

		
		¬øNextjs?  
		Hay un curso ya en Platzi  
		[Nextjs](https://platzi.com/clases/next-js/)

	* **edwintrumpet** (1)

		
		A lo confund√≠ con Next, se parecen los nombres.  
		No conoc√≠a ese framework.  
		Siempre he trabajado con Express que me parece sencillo

* **heysoypaez** (2)

	
	Esto me recuerda mucho a la clase de terminal.
	
	El pipe en terminal es este signo " | " , en la terminal el std_out , es el output que manda cuando ingresamos un comando. El std_in por l√≥gica el input que le enviamos en los comandos.
	
	¬øNodejs y los servidores en general son una capa de abstraci√≥n sobre bash?

	* **glrodasz** (2)

		
		bash es solo un tipo de prompt de la terminal, la terminal en si es una interfaz del sistema operativo.

* **danielsanz (Platzi)** (2)

	
	Repositorio de la clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/readable-y-writable-streams/learning-node>

* **mafevito** (2)
¬øEn que casos se hace uso de los streams Readable y Writable ?

	* **glrodasz** (1)

		
		Creo que la clase responde esa pregunta. üòâPero una aplicaci√≥n real por ejemplo, es la manera como esta construida Express, as√≠ las peticiones HTTP pueden manejar largos set de datos sin sobrecargar la memoria del servidor.

* **carlosextra1** (1)

	
	Aqu√≠ la lista de ASCII CODE!  
	<https://ascii.cl/>

* **asismelgarejo** (1)

	
	Todos los streams son instancias de EventEmitter.

* **Alfredo Gonzalez** (1)

	
	Eventos de streams

* **Matias Sebastian Perez** (1)

	
	No entiendo porque al asignar el `readableStream.currentCharcode = 65` es cuando se ejecuta el metodo `read` que implementamos en el constructor del Readable stream

	* **Ren√© Felipe Ram√≠rez Barrera** (1)

		
		`readableStream.currentCharCode = 65` define el Charcode para la letra ‚ÄúA‚Äù

	* **asismelgarejo** (1)

		
		Es la manera de asignar valor a la variable de la clase.

* **Alejandro Gonz√°lez Reyes** (1)
¬øPoque se repite si no se ha definido un ciclo o un interval?

	* **Erik Ochoa (Platzi)** (3)

		
		Se repite por la forma interna en la que trabajan los Streams, en este caso el **Readable es un Stream** y tiene que leer algo, lo que hacemos con el push es mandar datos al buffer para ser le√≠dos y despu√©s ligado al stdout de nuestra terminal para ser impresos.
		
		Una vez que push es llamado el Stream va a seguir leyendo del buffer hasta que reciba null, aqu√≠ es donde sucede el ‚Äúloop‚Äù. Lee un poco m√°s sobre [Streams](https://nodejs-es.github.io/api/stream.html#stream_es_streams) y lo entender√°s sin problema.

## 0110. Duplex y Transforms streams

### Descripci√≥n:


Ambos sirven para simplificar nuestro c√≥digo:

  * **Duplex:** implementa los m√©todos write y read a la vez.
  * **Transform:** es similar a Duplex pero con una sintaxis m√°s corta.



### Links:

* [Stream | Node.js v12.9.0 Documentation](https://nodejs.org/api/stream.html#stream_duplex_and_transform_streams)

### Comentarios:

* **Victor Martin Ortiz Palacio** (5)

	
	Challenge: utilizando el codigo visto en clase.
	``` 
	    const { Transform } = require("stream");
	    
	    String.prototype.capitalize = function () {
	      returnthis.replace(/(?:^|\s)\S/g, (input) => { return input.toUpperCase(); });
	    };
	    
	    const transformStream = new Transform({
	      transform(chunk, enconding, callback) {
	        this.push(chunk.toString().capitalize());
	        callback();
	      }
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	```

	* **Victor Martin Ortiz Palacio** (1)

		
		Codigo corregido:
		``` 
		    const { Transform } = require("stream");
		    
		    String.prototype.toCamelCase = function() {
		      returnthis
		          .replace(/\s(.)/g, input => input.toUpperCase())
		          .replace(/ /gi, '')
		          .replace(/^(.)/, input => input.toLowerCase());
		    };
		    
		    const transformStream = new Transform({
		      transform(chunk, enconding, callback) {
		        this.push(chunk.toString().toCamelCase());
		        callback();
		      }
		    });
		    
		    process.stdin.pipe(transformStream).pipe(process.stdout);
		    
		```
		
		Esta web <https://jsperf.com/js-camelcase/5> me sirvio mucho, no solo para ver los distintos casos, sino tambien para saber cual puede ser la mas optima.

* **Juan Carlos Garc√≠a Esquivel** (4)

	
	El prop√≥sito de tener distintos tipos de streams no solo es simplificar el c√≥digo, tienen peque√±as diferencias en su objetivo.
	
	**Tipos de streams**  
	Hay cuatro tipos fundamentales de streams en Node.js
	
	  * Writable: streams en los que los datos pueden ser escritos.
	  * Readable: streams en los que los datos pueden ser le√≠dos.
	  * Duplex: streams que pueden ser le√≠dos y escritos.
	  * Transform: Duplex streams que pueden modificar o transformar los datos cuando son escritos o le√≠dos.
	
	
	
	**Mi Reto desglosado**
	``` 
	    const { Transform } = require('stream')
	    
	    /** ingresa un string y convierte el primer
	     * car√°cter a may√∫scula
	     */
	    const upperFirst = text => {
	      //obtiene primer letra y convierte a may√∫scula
	      let first = text.charAt(0).toUpperCase()
	      //el string a partir de la segunda letra
	      let rest = text.slice(1)
	      //uni√≥n primer letra + resto
	      return first + rest
	    }
	    
	    const transformStream = new Transform({
	      transform(chunk, encoding, callback) {
	        //la cadena de entrada en string
	        const strChunk = chunk.toString()
	        //cadena en min√∫sculas
	        const lowerChunk = strChunk.toLowerCase()
	        //array separado por espacio en blanco
	        const arrayChunk = lowerChunk.split(' ')
	        /**
	         * creaci√≥n de un nuevo array con camelCase
	         * si  i (index) es 0 se retorna la primer
	         * palabra sin cambios, si no se cambia la
	         * primer letra de la palabra a may√∫scula
	         */
	        const arrayCamel = arrayChunk.map((word,i)=>{
	          return i === 0 ? word : upperFirst(word)
	        })
	        //se junta el array anterior y listo
	        const camelCase = arrayCamel.join('')
	        this.push(camelCase)
	        //finaliza la el flujo para esta chunk
	        callback()
	      }
	    })
	    process.stdin.pipe(transformStream)
	    .pipe(process.stdout)
	    
	```
	
	**Mi reto simplificado**
	``` 
	    const { Transform } = require('stream')
	    
	    const upperFirst = text => {
	      return text.charAt(0)
	        .toUpperCase()
	        .concat(text.slice(1))
	    }
	    
	    const transformStream = new Transform({
	      transform(chunk, encoding, callback) {
	        const camelCase = 
	        chunk
	        .toString()
	        .toLowerCase()
	        .split(' ')
	        .map((word, index) => {
	          return index === 0 ? word : upperFirst(word)
	        })
	        .join('')
	        this.push(camelCase)
	        callback()
	      }
	    })
	    
	    process.stdin.pipe(transformStream)
	    .pipe(process.stdout)
	    
	```
	
	se puede optimizar m√°s pero no se ver√≠a bien en este cuadrito de los aportes, esto lo hago con la finalidad de ayudar un poco a entender el c√≥digo a los que no entienden muy bien üòÉ.

* **Steven Benjam√≠n Diaz Flores** (3)

	
	Un poco de informaci√≥n extra que me ayudo a comprender mejor los Streams [node-js-streams-everything-you-need-to-know](https://www.freecodecamp.org/news/node-js-streams-everything-you-need-to-know-c9141306be93/)

	* **beaps** (2)

		
		Gracias!! üòÑ

* **Kevin Rodolfo cosio sanchez** (3)

	```
	    const {Transform} = require('stream');
	    
	    const transformStream = new Transform({
	        transform(chunk, encoding, callback) {
	    
	            let arrayToTransform = chunk.toString().split(' ');
	            let stringToCamelCase = '';
	            arrayToTransform.forEach(function (element) {
	                    stringToCamelCase += element.charAt(0).toUpperCase() + element.slice(1)
	                }
	            )
	    
	            this.push(stringToCamelCase);
	    
	            callback();
	        }
	    
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	```

	* **Steven Benjam√≠n Diaz Flores** (2)

		
		Muy buena soluci√≥n !

* **Manuel Ojeda** (3)

	
	Aqu√≠ est√° mi soluci√≥n, nada extra√±o y haciendo uso de c√≥digo normal:
	
	![CapitalizeJs.png](https://static.platzi.com/media/user_upload/CapitalizeJs-6fd37b1f-6bc0-480f-a283-2367f15d4704.jpg)
	
	Evidencia:  
	![ConEmu64_VNMrHNX1Es.png](https://static.platzi.com/media/user_upload/ConEmu64_VNMrHNX1Es-321813e2-41ad-42bc-b6cc-2042034d013d.jpg)

* **carlosextra1** (2)

	
	My code!
	``` 
	    const { Transform } = require('stream');
	    
	    const capitalizeStream = new Transform({
	        transform(chunk, encoding, cb) {
	            letstring =  chunk
	                .toString()
	                .trim()
	                .split(' ')
	                .map( res =>  {
	                    returntypeof res === 'string' ? res.charAt(0).toUpperCase() + res.slice(1) : ''
	                })
	                .join('');
	                
	            this.push(string)
	            cb();
	            
	        }
	    })
	    
	    process.stdin.pipe(capitalizeStream).pipe(process.stdout);
	    
	```

* **Ernesto Vizca√≠no Alvarado** (2)

	
	**Mi soluci√≥n al reto**
	``` 
	    const { Transform } = require("stream")
	    
	    functiontoCamelCase(str) {
	      return str
	        .split(" ")
	        .map(function(word, index) {
	          if (index == 0) {
	            returnword.toLowerCase()
	          }
	          returnword.charAt(0).toUpperCase() + word.slice(1).toLowerCase()
	        })
	        .join("")
	    }
	    
	    const transformStream = new Transform({
	      transform(chunk, encoding, callback) {
	        this.push(toCamelCase(chunk.toString()))
	        callback()
	      }
	    })
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout)
	    
	```

* **Jos√© Abdiel Ortega V√°zquez** (2)

	
	Reto hecho:
	``` 
	    const { Transform } = require('stream');
	    
	    String.prototype.replaceAt=function(index, replacement) {
	        returnthis.substr(0, index) + replacement+ this.substr(index + replacement.length);
	    };
	    
	    const transformStream = new Transform({
	        transform(chunk, encoding, callback) {
	            this.push(toCamelCase(chunk));
	            callback();
	        }
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	    const toCamelCase = typeChar => {
	        const arrayWord = typeChar.toString().split(' ');
	        arrayWord[0] = arrayWord[0].toLowerCase();
	        for (let i = 1; i < arrayWord.length; i++){
	            arrayWord[i] = arrayWord[i].replaceAt(0, arrayWord[i][0].toUpperCase());
	            console.log(arrayWord[i][0].toUpperCase());
	        }
	    
	        return arrayWord.join('');
	    };
	    
	```

* **Alver Ortega** (2)

	
	el reto:
	``` 
	    const { Transform } = require("stream");
	    
	    const transformStream = new Transform({
	        transform(chunk, enconding, callback) {
	            this.push(ucwords(chunk.toString()));
	            callback();
	        }
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	    
	    const ucwords = (word) => {
	        return word.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g,
	            (_, s) => s.toUpperCase());
	    };
	    
	```

* **seiro** (2)

	```
	    const { Transform } = require('stream');
	    
	    const transformStream = new Transform({
	        transform(chunk, encoding, callback) {
	            const camel = chunk
	                .toString()
	                .trim()
	                .split(' ')
	                .map(item => cadenaTexto(item))
	                .join('');
	            this.push(camel)
	            callback()
	        }
	    })
	    
	    
	    functioncadenaTexto(cadena) {
	        let primeraLetra = cadena.charAt(0).toUpperCase()
	        cadena = cadena.slice(1)
	        return primeraLetra.concat(cadena)
	    }
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout)
	    
	```

* **Juan Franco** (2)

	```
	    const { Transform } = require("stream");
	    
	    const transformStream = new Transform({
	        transform(chunk, enconding, callback) {
	            let first = chunk.toString().replace(/ /g, '')
	            this.push(chunk.toString().charAt(0).toUpperCase()+first.slice(1));
	            callback();
	        }
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);```
	    
	```

* **Matias Sebastian Perez** (2)

	
	Mi solucionn:
	``` 
	    const { Transform } = require('stream');
	    
	    const toCamel = new Transform({
	        transform(chunk, encoding, callback){
	            const data = chunk.toString();
	            const wordsArray = data.split(' ');
	            const camelString = wordsArray.reduce((prev, curr) => {
	                return prev + curr[0].toUpperCase() + curr.slice(1);
	            }, '');
	            this.push(camelString);
	            callback();
	        }
	    });
	    
	    process.stdin.pipe(toCamel).pipe(process.stdout);
	    
	```

* **Jes√∫s Miguel Quinto Teran** (2)

	
	Challenge:
	``` 
	    const { Transform } = require('stream');
	    
	    const camelize = (str) => {
	        return str.replace(/(?:^\w|[A-Z]|\b\w)/g, (word, index) => {
	            return index == 0 ? 
	                word.toLowerCase(): 
	                word.toUpperCase();
	        }).replace(/\s+/g, '');
	    }
	    
	    const transformStream = new Transform({
	        transform(chuck, enc, callback) {
	            this.push(camelize(chuck.toString()));
	            callback();
	        }
	    });
	    
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	```

* **AMILKAR CRUZ HERBAS** (2)

	
	Mi solucion al reto:
	``` 
	    const { Transform } = require('stream');
	    
	    functioncamelText(str) {
	    	return str
	    		.toLowerCase()
	    		.replace(/[^a-zA-Z0-9]+(.)/g, (m, chr) => chr.toUpperCase());
	    }
	    
	    const transfromStream = new Transform({
	    	transform(chunk, encoding, callback) {
	    		this.push(camelText(chunk.toString()));
	    		callback();
	    	}
	    });
	    process.stdin.pipe(transfromStream).pipe(process.stdout);
	    
	    
	```

* **wilson_romero** (2)

	
	Mi soluci√≥n
	``` 
	    const { Transform } = require('stream');
	    
	    String.prototype.toCamelCase = function() {
	      returnthis.toLowerCase()
	        .replace(/\b(\w)/g, function(match, capture) {
	          return capture.toUpperCase();
	        })
	        .replace(/\s+/g, '');
	    };
	    
	    const transformStream = new Transform({
	      transform(chunk, encoding, callback) {
	        this.push(chunk.toString().toCamelCase());
	        callback();
	      }
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	```

	* **Juan Carlos Garc√≠a Esquivel** (1)

		
		cool, me gusto la soluci√≥n.

* **Fernando Azuaje** (2)

	
	mi solucion:
	``` 
	    const { Transform } = require('stream')
	    
	    const toCamelCase = new Transform({
	        transform (chunk, encoding, callback) {
	            let words = chunk.toString().split(' ')
	            let camelWords = ''
	            words.forEach(element => {
	                let newWord = element.slice(0,1).toUpperCase() + element.slice(1)
	                camelWords += newWord
	            })
	            this.push(camelWords)
	            callback()
	        }
	    })
	    
	    
	    process.stdin.pipe(toCamelCase).pipe(process.stdout)
	    
	```

* **Steven Benjam√≠n Diaz Flores** (2)

	
	Reto: convertir texto cualquiera a CamelCase  
	Resultado: hola amigos como estan => HolaAmigosComoEstan
	
	![solutionWritableStream.png](https://static.platzi.com/media/user_upload/solutionWritableStream-5dd4e7f7-f322-4ffc-a132-08562fbabe0e.jpg)

* **juanfar** (2)

	```
	    const { Transform } = require("stream");
	    
	    const transformStream = new Transform({
	      transform(chunk, encoding, callback) {
	        const newChunk = chunk.toString();
	        const initChar = newChunk.slice(0,1);
	        const otherChars = newChunk.slice(1, newChunk.length);
	        this.push(initChar.toUpperCase() + otherChars);
	        callback();
	      }
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	```

* **Gaston Caldera** (2)

	
	üòÉ un poco noobster pero ahi vamos
	``` 
	    <'use strict'
	    
	    const { Transform } = require('stream')
	    
	    const transformStream = new Transform({
	        transform(chunk, encoding, callback) {
	            this.push(chunk.toString().charAt(0).toUpperCase() + chunk.slice(1).toString().replace(/\s/g, ''))
	            callback
	        }
	    })
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout)>
	    
	```

* **heysoypaez** (2)

	
	Muchacho ahi dejo mi soluci√≥n al reto y me l√≥gica en un comentario !!!  
	Escucho aportes
	``` 
	    /*
	    Challenge
	    
	    Usando Streams crea una funci√≥n en Node que reciba una cadena de texto y la convierta en camel case usando streams.
	    
	    "hola como estas"
	    "holaComoEstas"
	    
	    ¬øQue quiero?
	    
	    Una funci√≥n stringToCamelCase() que cuando reciba un string cualquiera lo convierta en CameCase, usando Streams.
	    
	    El proceso para hacerlo realidad.
	    
	    1. Recibo una cadena de texto.
	    2. Detecto los separadores: espacios en blanco o guiones que separan las palabras.
	    3. A la primera letra de la palabra que est√° a la derecha del separador la paso a mayusculas.
	    4. Creo un nuevo string donde elimino el separador.
	    5. Retorno la nueva cadena de texto.
	    
	    Una vez hecho esto creare un WritableStream desde donde consumire los datos y los devolver√© transformados.
	    
	    */
	    
	    const {Writable} = require("stream");
	    
	    function stringToCamelCase(string) {
	    
	    	//"Hola-soy-una-persona-chevere"
	    	const whiteSpaceAndLetter = /(?<=[\-. ])\w/g;
	    	const separatorString = /[\-. ]/g;
	    
	    	const upperCaseCharacterFound = (characterFound) => characterFound.toUpperCase();
	    
	    	let stringTransformed = string.replace(whiteSpaceAndLetter, upperCaseCharacterFound);
	    	stringTransformed = stringTransformed.replace(separatorString, "");
	    	
	    	return stringTransformed
	    }
	    
	    
	    const writableStream = new Writable({
	    	write(chunk,encoding, callback) {
	    		const stringChunk = chunk.toString()
	    		console.log( stringToCamelCase(stringChunk) );
	    		callback();
	    	}
	    });
	    
	    process.stdin.pipe(writableStream);
	    
	```

* **ocandoja** (1)

	
	Aqu√≠ esta mi idea
	``` 
	    const { Transform } = require('stream');
	    const stream = new Transform({
	      transform(chunk, encoding, callback){
	        this.push(chunk.toString().replace(/\b\w/g, l => l.toUpperCase()).replace(/\s/g, ""));
	        callback();
	      }
	    });
	    functionchamel(string) {
	      string.toString()
	    }
	    process.stdin.pipe(stream).pipe(process.stdout);```
	    
	```

* **ThAlan** (1)

	
	Mi respuesta al reto.
	``` 
	    const { Transform } = require('stream');
	    
	    function toCamelCaseTransform(msg) {
	      const newMsg = msg
	        .toString()
	        .split(' ')
	        .map((word) => {
	          const item = word.charAt(0).toUpperCase();
	          return item.concat(word.slice(1));
	        })
	        .join('');
	    
	      return newMsg;
	    }
	    
	    const transformStream = new Transform({
	      transform(chunk, encoding, cb) {
	        this.push(toCamelCaseTransform(chunk));
	        cb();
	      }
	    })
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	```

* **pndafran** (1)

	
	Mi Reto

* **pndafran** (1)

	
	const { Transform } = require(‚Äústream‚Äù);
	
	function CamelCase(string) {  
	return string  
	.split(" ‚Äú)  
	.map(function(word, index) {  
	if (index == 1) {  
	return word.toLowerCase()  
	}  
	return word.charAt(0).toUpperCase() + word.slice(1).toLowerCase()  
	})  
	.join(‚Äù")  
	}
	
	const transformStream = new Transform({  
	transform(chunk, encoding, callback) {  
	this.push(CamelCase(chunk.toString()))  
	callback()  
	}  
	})
	
	process.stdin.pipe(transformStream).pipe(process.stdout)

* **lgfh** (1)

	
	creo que la ultima linea deberia ser asi:
	``` 
	    duplexStream.pipe(duplexStream);
	    
	```
	
	para que se ejecute el metodo write del mismo duplex üòÉ

* **carlosextra1** (1)

	
	transform

* **Carlos Vallejo** (1)

	
	Soluci√≥n al reto:
	``` 
	    const { Transform } = require('stream');
	    
	    const transformStream = new Transform({
	      transform(chunk, encoding, callback) {
	        cadena_array = chunk.toString().split(" ");
	        let camelCase = "";
	        for (let i = 0; i < cadena_array.length ; i++) {
	          palabra = cadena_array[i];
	            palabra_uppercase = palabra.charAt(0).toUpperCase() + palabra.slice(1);
	            camelCase = camelCase.concat(palabra_uppercase);
	        }
	        this.push(camelCase);
	        callback();
	      },
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	```

* **Diego Camino** (1)

	
	La soluci√≥n al reto:
	``` 
	    // Transform es muy similar a Duplex, solo que la sintaxis es mucho m√°s reducida
	    const { Transform } = require("stream");
	    
	    const transformStream = new Transform({
	        // se pueden ejecutar todas las propiedades del write y todas del read
	        transform(chunk, encoding, callback) {
	            let palabras = chunk.toString().split(" ");
	            let palabrasConcatenadas = "";
	            let camelCase = "";
	            palabras.map((palabra, key) => {
	                palabrasConcatenadas = palabra.charAt(0).toUpperCase() + palabra.slice(1)
	                camelCase = camelCase.concat(palabrasConcatenadas);
	            })
	            this.push(camelCase);
	            callback();
	        }
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	```

* **Miguel √Ångel Mu√±oz Pozos** (1)

	```
	    const {
	        Transform
	    } = require("stream");
	    
	    const transformStream = new Transform({
	        transform(chunk, enconding, callback) {
	            this.push(camelCase(chunk.toString()));
	            callback();
	        },
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	    const camelCase = (text) => {
	        let palabras = text.split(' ');
	        palabras.map((palabra, key) => {
	            palabras[key] = palabra[0].toUpperCase().concat(palabra.substring(1, palabra.length));
	        });
	        return palabras.join('')
	    };
	    
	```

* **Marco Antonio Benites Espinoza** (1)

	
	Reto realizado:
	``` 
	    const { Transform } = require("stream");
	    
	    const toCamelCase = text => {
	      const words = text.split(" ");
	    
	      let textCamelCase = "";
	      words.forEach(word => {
	        textCamelCase +=
	          word.substring(0, 1).toUpperCase() + word.substring(1).toLowerCase();
	      });
	    
	      return textCamelCase;
	    };
	    
	    const transformStream = new Transform({
	      transform(chunk, encoding, callback) {
	        this.push(toCamelCase(chunk.toString()));
	        callback();
	      }
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	```

* **Armando Duarte Qui√±ones** (1)

	```
	    const { Transform } = require('stream')
	    
	    const transformToCamel = new Transform({
	      transform(chunk, encoding, callback) {
	        let text = chunk
	          .toString()
	          .split(/\W/)
	          .map((word, index) => {
	            if (index === 0) {
	              return word
	            }
	            let letra = word.charAt(0).toUpperCase()
	            return letra.concat(word.slice(1))
	          })
	          .join('')
	    
	        this.push(text);
	        callback();
	      }
	    });
	    
	    process.stdin.pipe(transformToCamel).pipe(process.stdout);
	    
	    
	```

* **Jaime Gonzalez** (1)

	
	El reto üòÉ
	``` 
	    const { Transform } = require('stream');
	    
	    const transformStream = new Transform({
	      transform(chunk, _, callback) {
	        this.push(chunk.toString().camelize());
	        callback();
	      }
	    });
	    
	    String.prototype.camelize = function () {
	      returnthis.
	                trim().
	                split(/(\s+)/).
	                map((word) => { 
	                  return word.charAt(0).toUpperCase().
	                       concat(word.substr(1, word.length)) })
	                .join('')
	                .replace(/ /g,'');
	    }
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	```

* **asismelgarejo** (1)

	
	Mi soluci√≥n:
	``` 
	    const { Transform } = require('stream');
	    
	    const transformStream = new Transform({
	      transform(chunck, enconding, callback){
	        this.push(
	          chunck
	            .toString()
	            .trim()
	            .split(" ")
	            .map(firstChar)
	            .reduce(reducer, "")
	            .trim()
	        );
	        callback();
	      }
	    });
	    
	    const reducer = (acum, item) => acum + item;
	    
	    const firstChar = (item) => item.charAt(0).toUpperCase() + item;
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	    
	```

* **Romel Javier Gomez Herrera** (1)

	
	El reto‚Ä¶
	``` 
	    const { Transform } = require("stream");
	    
	    String.prototype.camalize = functioncamalize() {
	      returnthis.toLowerCase().replace(/[^a-zA-Z0-9]+(.)/g, (_, chr) =>
	        chr.toUpperCase()
	      );
	    };
	    
	    const toCamelCaseStream = new Transform({
	      transform(chunk, _, callback) {
	        this.push(chunk.toString().camalize());
	        callback();
	      }
	    });
	    
	    process.stdin.pipe(toCamelCaseStream).pipe(process.stdout);
	    
	```

* **jnapalynch** (1)

	
	Mi soluci√≥n del reto üòÑ
	``` 
	    const { Duplex } = require('stream');
	    
	    const duplexStream = new Duplex({
	        write(chunk, encoding, callback) {
	            const lstText = chunk.toString().split(/(\s+)/);
	    
	            const data = lstText.filter((text) => text.trim().length > 0).map((text) => {
	                returntext.charAt(0).toUpperCase() + text.substring(1, text.length);
	            }).join('');
	    
	            console.log(data);
	    
	            callback();
	        }
	    });
	    
	    process.stdin.pipe(duplexStream);
	    
	```

* **ApolloAu** (1)

	
	Mi version reducida
	``` 
	    const { Transform } = require("stream");
	    
	    const transformStream = new Transform({
	      transform(chunk, enconding, callback) {
	        this.push(
	          chunk
	            .toString()
	            .trim()
	            .split(" ")
	            .map((world, index) => {
	              return index != 0
	                ? world.charAt(0).toUpperCase() + world.substring(1).toLowerCase()
	                : world.toLowerCase();
	            })
	            .reduce( (string, world) => string + world)
	        );
	        callback();
	      }
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);```
	    
	```

* **ApolloAu** (1)

	
	Esta es mi version, me gustarian que la testeen, trate de cubrir diferentes posibilidades de strings para que siempre te devuelva una cadena camelCase.
	
	  * Espacios al Principio de la Cadena
	  * Escribir en mayusculas.
	
	
	
	_**comentame si se te ocurre alguna otra posibilidad?**_
	``` 
	    const { Transform } = require("stream");
	    
	    const transformStream = new Transform({
	      transform(chunk, enconding, callback) {
	        //genero un Array de palabras a partir de los espacion entre ellas en la cadena. 
	        // .trim() para remover los espacios en blanco en los extremos de la cadena.
	        let words = chunk.toString().trim().split(" ");
	    
	        
	        let camelCaseString =''; // donde se va a concatenar el string camelCase.
	        
	        words.map((letter, index) => {
	          if (!index == 0) {
	            let capitalize =
	              letter.charAt(0).toUpperCase() + letter.substring(1).toLowerCase();
	            camelCaseString += capitalize;
	          } else {
	            let firstWordNotCapitalize = letter.toLowerCase();
	            camelCaseString += firstWordNotCapitalize;
	          }
	        });
	    
	        this.push(camelCaseString);
	        callback();
	      }
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);```
	    
	```

* **nova12** (1)

	
	mi solucion del reto:
	``` 
	    const { Transform } =require('stream')
	    const TransformStream = new Transform({
	        transform(chunk,encoding,callback){
	             let data=chunk.filter((e)=>{
	                 if (e!==32){
	                   returntrue
	                 }else{
	                     returnfalse
	                 }
	             })
	            this.push(data.toString().charAt(0).toUpperCase()+data.slice(1).toString())
	            callback()
	        }
	    })
	    
	    process.stdin.pipe(TransformStream).pipe(process.stdout)
	    
	```

	* **ApolloAu** (1)

		
		Probe tu codigo, pero no devuelve lo que deber√≠a devolver,  
		te dejo un link a que es la escritura camel case.  
		<https://es.wikipedia.org/wiki/Camel_case>

* **Roso Pe√±aranda** (1)

	
	mi respuesta al reto:
	``` 
	    const { Transform } = require("stream");
	    
	    const capitalize = s => {
	      if (typeof s !== "string") return"";
	      return s.charAt(0).toUpperCase() + s.slice(1);
	    };
	    
	    const reducer = (acc, value) => acc.concat(capitalize(value));
	    
	    const transformStream = new Transform({
	      transform(chunk, encodign, callback) {
	        this.push(
	          chunk
	            .toString()
	            .split(" ")
	            .reduce(reducer, "")
	        );
	        callback();
	      },
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	```

* **Vicalex96** (1)

	
	aqu√≠ tengo una forma sencilla de pasar una frase a formato Camel
	``` 
	    <const{Transform} = require('stream')
	    
	    const toCamelCase= new Transform({
	        transform(chunk,encoding,callback){
	            let cadena = chunk.toString().charAt(0).toUpperCase() + chunk.toString().slice(1).split(' ').join('') 
	            this.push(cadena)
	            callback()
	        }
	    })
	    
	    process.stdin.pipe(toCamelCase).pipe(process.stdout)>
	    
	```

	* **ApolloAu** (1)

		
		Probe tu codigo, pero no devuelve lo que deber√≠a devolver,  
		te dejo un link a que es la escritura camel case.  
		<https://es.wikipedia.org/wiki/Camel_case>

* **Santa Karina Madre de Dios** (1)

	```
	    const transformStream = new Transform({
	        transform(chunk, encoding, callback){
	            this.push(toCamelCase(chunk.toString()));
	            callback();
	        }
	    });
	    
	    const toCamelCase = str =>{
	    
	        let phrase = '';
	    
	        let text = str.toLowerCase().trim().split(' ');
	            
	        text = text.map(word => {
	            let firstChar = word.charAt(0);
	            word = word.replace(firstChar, firstChar.toUpperCase());
	            returnword;
	        });
	    
	        for (let word in text){
	            if(word < text.length - 1){
	                phrase += text[word] + ' ';
	                console.log(text[word]);
	            }else{
	                phrase += text[word];
	            }
	        }
	    
	        return phrase;
	    
	    }
	    
	    process.stdin
	        .pipe(transformStream)
	        .pipe(process.stdout);
	    
	    
	```

	* **ApolloAu** (1)

		
		Me encanta como lo resolviste y que hayas validado diferentes tipos de cadenas, solo que entiendo que camelCase no lleva espacios entre las palabras

* **jdpo2008** (1)

	```
	    const {
	        Transform
	    } = require('stream');
	    
	    const camelcaseTransform = new Transform({
	        transform(chunk, encoding, callback) {
	            const string = chunk.toString().trim().split(' ');
	            string.forEach(element => {
	                this.push(element.charAt(0).toUpperCase() + element.slice(1));
	            });
	            callback();
	        }
	    });
	    
	    process.stdin.pipe(camelcaseTransform).pipe(process.stdout);
	    
	```

* **Daniel Hurtado** (1)

	
	Mi soluci√≥n, cortita:
	``` 
	    const { Transform } = require('stream');
	    
	    const camelcaseTransform = new Transform({
	        transform(chunk, encoding, callback) {
	            chunk.toString().trim().split(' ').forEach(element => {
	                this.push(element.charAt(0).toUpperCase() + element.slice(1));
	            });
	            callback();
	        }
	    });
	    
	    process.stdin.pipe(camelcaseTransform).pipe(process.stdout);
	    
	```

* **pablopoggiog** (1)

	
	Mi solucion:
	``` 
	    const {Transform} = require('stream');
	    
	    const camelCaseando = (chunk) => {    
	        let resultadoRial = [];
	        chunk.toString()
	            .trim()
	            .split(' ')
	            .map((palabra, index) => {
	                if (index === 0){
	                    resultadoRial.push(palabra.toLowerCase())
	                }
	                else {                
	                    palabra = palabra[0].toUpperCase() + palabra.substring(1, palabra.length);
	                    resultadoRial.push(palabra);
	                    }
	                })
	                return resultadoRial.join('');
	            };
	    
	    const transformStream = new Transform({
	        transform(chunk, encoding, callback) {
	            this.push(camelCaseando(chunk));
	            callback();
	        }
	    })
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	    
	```

* **oscar-leon846** (1)

	
	de la documentacion de NodeJs  
	**Duplex **Streams son streams que implementan las interfaces Readable and Writeable  
	**Transform** Stream son duplex en donde la salida (output) en alguna forma esta relacionada con la entrada y al igual que duplex, tambien implementan las clases Readable and Writeable

* **cristofers530** (1)

	
	Aqui mi solucion, un poco larga pero funciona
	``` 
	    const {Transform} = require('stream')
	    
	    const transform = new Transform({
	        transform(chunck, encoding, callback){
	            // this.push(chunck.toString())
	            var texto = chunck.toString()
	            this.push("texto original:\n" + texto)
	    
	            //realmente no se por que, pero no importa el texto que escriba
	            //siempre le suma dos espacios en blanco y pos...
	            var textoLength = texto.length - 2;
	            this.push("tama√±o:\n" + textoLength + "\n")
	    
	            var newText = "";
	            var letterToUpperCase = false;
	            for(let i = 0; i <= textoLength; i++){
	                // this.push(texto.charAt(i) + "\n")
	                if(texto.charAt(i) != " "){
	                    if(letterToUpperCase){
	                        newText += texto.charAt(i).toUpperCase();
	                        letterToUpperCase = false;
	                    }else{
	                        newText += texto.charAt(i)
	                    }
	                }else{
	                    //en caso de que la letra leida sea un espacio, la variable
	                    //letterToUpperCase pasara a ser verdadera para que la
	                    //siguiente letra sea mayuscula
	                    letterToUpperCase = true;
	                }
	            }
	    
	            this.push(newText)
	            callback()
	        }
	    })
	    
	    process.stdin.pipe(transform).pipe(process.stdout)
	    // process.stdin.pipe()```
	    
	```

* **Massimo Di Berardino** (1)

	
	Challenge accepted
	``` 
	    const toCamelCase = (str) => {
	        let camel = str.charAt(0).toUpperCase();
	        let strSpaces = str.toLowerCase().replace(/ /g, '').slice(1);
	        camel += strSpaces;
	        return camel;
	    }
	    
	    const transfromStream = new Transform({
	        transform(chunk, encoding, callback) {
	            this.push(toCamelCase(chunk.toString()));
	            callback();
	        }
	    });
	    
	```

* **Ren√© Felipe Ram√≠rez Barrera** (1)

	
	Mi soluci√≥n:
	``` 
	    const { Transform } = require("stream");
	    
	    const toCamelCase = (data) =>{
	      let strText = data.trim().split(' ')
	      let strCamelCase = ''
	      strText.forEach(element => {
	        strCamelCase += element.substr(0, 1).toUpperCase() + element.substr(1)
	      });
	      return strCamelCase
	    }
	    
	    const transformStream = new Transform({
	      transform(chunk, enconding, callback) {
	        this.push(toCamelCase(chunk.toString()));
	        callback();
	      }
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	```

* **Luis Arturo Lira Cerda** (1)

	
	Eta fue mi soluci√≥n üòÉ
	``` 
	    const { Transform } = require('stream')
	    
	    const toCamel = new Transform({
	        transform(chunk, encoding, callback) {
	            let words = chunk.toString().trim().split(' ')
	            let camelText = ''
	            words.map((word, index) => {
	                if (index == 0) {
	                    camelText += word
	                } else {
	                    word = word.charAt(0).toUpperCase() + word.slice(1)
	                    camelText += word
	                }
	            })
	            this.push(camelText)
	            callback()
	        }
	    })
	    process.stdin.pipe(toCamel).pipe(process.stdout)
	    
	```

* **rusbel berm√∫dez rivera** (1)

	
	MI soluci√≥n al reto
	``` 
	    const { Transform } = require('stream');
	    
	    const stringToCamelCase = (data) => {
	        data = data.split(' ')
	        capitalized = data.slice(1).map((str) => str.substr(0, 1).toUpperCase() + str.substr(1))
	        data = data[0] + capitalized.join(' ').replace(/ /g, "")
	    
	        return data
	    }
	    
	    const transformStream = new Transform({
	        transform(chunk, encoding, callback) {
	            this.push(stringToCamelCase(chunk.toString()));
	            callback();
	        }
	    })
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout)
	    
	    
	```

* **rusbel berm√∫dez rivera** (1)

	
	Es de mucha ayuda repasar la clase de Streams del curso de terminal y linea de comandos del profesor Beco

* **rusbel berm√∫dez rivera** (1)

	
	Les dejo esta lectura para comprender m√°s sobre los streams  
	<https://desarrolloweb.com/articulos/streams-nodejs.html>

* **Erick Leao P√©rez Medina** (1)

	
	Aqu√≠ mi soluci√≥n al reto:
	
	camelCase.js
	``` 
	    const { Transform } = require('stream');
	    
	    const stringToCamelCase = (str) => {
	      return (
	        str
	          // Removes accents "¬¥`" ex. "P√©rez"or"Cr√®me Brul√©e"
	          .normalize('NFD')
	          .replace(/[\u0300-\u036f]/g, '')
	          // Convert to lowercase word, except for first letter of the word.
	          .replace(/(?:^\w|[A-Z]|\b\w)/g, (word, index) => {
	            return index === 0 ? word.toLowerCase() : word.toUpperCase();
	          })
	          // Removes whitespace
	          .replace(/\s+/g, '')
	      );
	    };
	    
	    const transformStream = new Transform({
	      transform(chunk, encoding, callback) {
	        this.push(stringToCamelCase(chunk.toString()));
	        callback();
	      },
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	```

* **stephencatano** (1)

	
	Mi soluci√≥n:
	``` 
	    const { Transform } = require('stream')
	    
	    const transformStream = new Transform({
	        transform(chunk, encoding, callback) {
	            let input = chunk.toString()
	            let index = input.charAt(0)
	            chunk = chunk.toString().replace(input.charAt(0), index.toUpperCase())
	            this.push(chunk.toString())
	        }
	    })
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout)```
	    
	    alguna sugerencia?
	    de antemano gracias!
	```

* **4mjaimes** (1)

	```
	    const { Transform } = require('stream');
	    
	    const transformStream = new Transform({
	      transform(chunk, encoding, callback){
	        this.push(
	          chunk
	          .toString()
	          .toLowerCase()
	          .split(' ')
	          .map(word => {
	            returnword.charAt(0).toUpperCase().concat(word.slice(1));
	          })
	          .join('')
	        );
	        callback();
	      }
	    });
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	```

* **Edward Orlando Hurtado** (1)

	
	Aca mi reto:
	``` 
	    const { Duplex } = require('stream');
	    
	    functioncamelize(str) {
	        return str.replace(/(?:^\w|[A-Z]|\b\w)/g, function(word, index) {
	          return index == 0 ? word.toLowerCase() : word.toUpperCase();
	        }).replace(/\s+/g, '');
	    }
	    
	    
	    
	    const duplexStream = new Duplex({
	        write(chunk,encoding,callback){
	            console.log(chunk.toString());
	            callback();
	        },
	    
	        read(size){
	            setTimeout(()=>{
	                var text = "hola como estas";
	                this.push(camelize(text));
	                this.push(null);
	            },200)
	        }
	    });
	    
	    process.stdin.pipe(duplexStream).pipe(process.stdout);```
	    
	```

* **Iv√°n Dar√≠o S√°nchez Jim√©nez** (1)

	
	Mi soluci√≥n transforma una frase a UpperCamelCase y lowerCamelcase
	``` 
	    const { Transform } = require('stream');
	    const transformStream = new Transform({
	        transform(chunk, encoding, callback) {
	            let toTransform = chunk.toString().toLowerCase().split(' ');
	            toTransform = toTransform.map((value) => {
	                constresult = value.charAt(0).toUpperCase().concat(value.replace(value.charAt(0), ''))
	                returnresult;
	            });
	            letUpperCamelCase = toTransform.join('');
	            let lowerCamelCase = UpperCamelCase.charAt(0).toLowerCase().concat(UpperCamelCase.replace(UpperCamelCase.charAt(0), ''))
	            constresult = `Input: ${chunk} \nUpperCamelCase: ${UpperCamelCase} \nlowerCamelCase: ${lowerCamelCase}`;
	    
	            this.push(result);
	            callback();
	        }
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	```

* **baenacc** (1)

	
	Reto Reto!
	``` 
	    const { Transform } = require("stream");
	    
	    const toUpperCase = phrase => {
	      words = phrase.split(" ");
	      let upperCaseWords = [];
	      words.map(word => {
	        upperCaseWords.push(word.slice(0, 1).toUpperCase() + word.slice(1));
	      });
	      return upperCaseWords.join(" ");
	    };
	    
	    const transfromStream = new Transform({
	      transform(chunk, encoding, callback) {
	        this.push(toUpperCase(chunk.toString()));
	        callback();
	      }
	    });
	    
	    process.stdin.pipe(transfromStream).pipe(process.stdout);
	    
	```
	``` 
	    Hola mundo mundial
	    Hola Mundo Mundial
	    
	```

	* **Rodrigo Ortiz Moreno** (1)

		
		Me gusta tu solucion, pero creo que deberias primero convertirlo todo a lower case y luego si aplicar la transformacion
		``` 
		    const { Transform } = require("stream");
		    
		    const toUpperCase = phrase => {
		      
		        words = phrase.toLowerCase().split(" ");
		      let upperCaseWords = [];
		      words.map(word => {
		    
		        upperCaseWords.push(word.slice(0, 1).toUpperCase() + word.slice(1));
		      });
		      return upperCaseWords.join(" ");
		    };
		    
		    const transfromStream = new Transform({
		      transform(chunk, encoding, callback) {
		        this.push(toUpperCase(chunk.toString()));
		        callback();
		      }
		    });
		    
		    process.stdin.pipe(transfromStream).pipe(process.stdout);```
		    
		```

* **David Behar** (1)

	
	Ac√° el reto
	``` 
	    const { Transform } = require('stream');
	    
	    function toCamelCase(string) {
	      let upperString = '';
	      arrayOfStrings = string.split(' ');
	      arrayOfStrings.map((str) => {
	        let word = '';
	        for (let i = 0; i < str.length; i++) {
	          let char = '';
	          if (i === 0) {
	            char = str.charAt(i).toUpperCase();
	          } else {
	            char = str.charAt(i).toLowerCase();
	          }
	          word += char;
	        }
	        upperString += word;
	      });
	      return upperString;
	    }
	    
	    const transformStream = new Transform({
	      transform(chunk, encoding, callback) {
	        this.push(toCamelCase(chunk.toString()));
	        callback();
	      },
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	    
	```

* **ngmartinezs** (1)

	
	Mi aporte
	
	const {Transform} = require(‚Äòstream‚Äô);
	
	const transformStream = new Transform({  
	transform(chunk, encoding, callback){
	``` 
	        this.push(chunk.toString().split(" ").map( item => {
	                                                   let lFirtsLeter = item.charAt(0).toUpperCase();
	                                                   let lSecondLeter = item.slice(1,item.length).toLowerCase();
	                                                   item = `${lFirtsLeter}${lSecondLeter}`;
	                                                   return item;
	                                                   }
	                                                 ).join("")
	                 );
	        callback();
	    }
	    
	```
	
	});
	
	process.stdin.pipe(transformStream).pipe(process.stdout);

* **Javier Fuentes Mora** (1)

	```
	    const { Transform } = require("stream");
	    
	    const transformStream = new Transform({
	      transform(chunk, encoding, callback) {
	        this.push(
	          chunk
	            .toString()
	            .charAt(0)
	            .toUpperCase()
	            .concat(chunk.slice(1))
	            .replace(/ +/g, "")
	        );
	        callback();
	      }
	    });
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	```

* **pepitofriki** (1)

	```
	    const {Transform} = require('stream')
	    
	    const tranformStream = new Transform({
	        transform(chunk, encoding, callback){
	            letresult  = chunk.toString().split(" ")
	            let value = ""
	            result.forEach(element =>{
	                value = value + element.substring(0,1).toUpperCase() + element.substring(1)
	            })
	            this.push(value)
	            callback()
	        }
	    })
	    
	    process.stdin.pipe(tranformStream).pipe(process.stdout)
	    
	```

* **Erik Ricardo S√°nchez P√©rez** (1)

	
	Esta muy interesante esto de los streams con node üòé
	``` 
	    const { Transform } = require("stream");
	    
	    const transformStream = new Transform({
	      transform(chunk, enconding, callback) {
	        const convertedString = chunk.toString()
	            .split(' ')
	            .map((word, key) => key === 0 ? word.toLowerCase() : word.charAt(0).toUpperCase() + word.substring(1, word.length))
	            .join('');
	        this.push(convertedString);
	        callback();
	      }
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	    
	```

* **wilantury** (1)

	
	Hola, esta es mi soluci√≥n al reto:
	``` 
	    const { Transform } = require('stream');
	    
	    const transformStream = new Transform({
	      transform(chunk, encoding, callback){
	        const input = chunk.toString();
	        let first = input.substring(0,1);
	        let body = input.substring(1);
	        body = body.toLowerCase();
	        let sizeBody = body.length
	        let bodyCleanSpace = ""
	        for(let i=0; i < sizeBody; i++){
	          const character = body.substring(i,i+1)
	          if(character != ' '){
	            bodyCleanSpace += character;
	          }else{
	            bodyCleanSpace += body.substring(i+1, i+2).toUpperCase()
	            i++
	          }
	        }
	        const codeFirst = first.charCodeAt(0);
	        if( !(codeFirst > 65 && codeFirst < 90)){
	          first = first.toUpperCase();
	        }
	        this.push(`${first}${bodyCleanSpace}`)
	        callback()
	      }
	    })
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout)```
	    
	```

* **solej77** (1)

	
	Un reto muy divertido, Coool!!
	``` 
	    const { Transform } = require('stream');
	    
	    const transformStream = new Transform({
	      transform(chunk, uncoding, callback) {
	        let array = chunk.toString().split(' ');
	        let camelCase = '';
	    
	        for (let index = 0; index < array.length; index++) {
	          let element = array[index];
	          let firstLetter = element.charAt(0);
	          let complement = element.substring(1);
	          if (index === 0) {
	            firstLetter = firstLetter.toLowerCase();
	            
	          } else {
	            firstLetter = firstLetter.toUpperCase();
	          }
	    
	          element.replace()
	    
	          camelCase += firstLetter + complement;
	        }
	    
	        this.push(camelCase);
	        callback();
	      }
	    })
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	    
	```

* **edwintrumpet** (1)

	
	**Respuesta al reto**
	``` 
	    const { Writable } = require('stream')
	    
	    const writableStream = new Writable({
	        write(chunk, encoding, callback) {
	            let text = chunk.toString()
	            text= text.split(' ')
	    
	            text = text.map(item => {
	                let result
	                result = item.substr(1, item.length+1).toLowerCase()
	                result = item.charAt(0).toUpperCase() + result
	                return result
	            })
	    
	            console.log(text.join(''))
	            callback()
	        }
	    })
	    
	    process.stdin.pipe(writableStream)
	    
	    
	```

* **SKILLON** (1)

	
	No tan elegante como por palabras pero divertida igual jajaja
	``` 
	    const {Transform}=require('stream');
	    
	    const transformStream=new Transform({
	        transform(chunk,encoding,callback){
	            let flag=true;
	            let camelCase=[].map.call(chunk.toString(),(char)=>{
	                if(flag){
	                    flag=false;
	                    return(char.toUpperCase());
	                }else{
	                    if(char==' '){
	                        flag=true;
	                        return
	                    }else{
	                        return(char.toLowerCase());
	                    }
	                }     
	            }).join('');
	            this.push(camelCase);
	            callback();
	        }
	    })
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);```
	    
	```

* **jasanhdz** (1)

	
	Les dejo mis notas que me apoyaron en el aprendizaje del curso üòÑ  
	<https://github.com/JasanHdz/backendnodejs/tree/master/notes>  
	No se rindan, √©xito üí™  
	_**Mis mejores notas**_ ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

* **Nicolas Pereyra** (1)

	
	Mi Solucion
	``` 
	    const { Transform } = require('stream');
	    
	    const camelize = word => {
	        const camelized = (word.charAt(0).toUpperCase() + word.slice(1));
	        return camelized;
	    }
	    
	    const normalize = text => {
	        const words = text.split(' ');
	        return words.map(word => camelize(word)).join('');
	    }
	    
	    const transformStream = new Transform({
	        transform(chunk, encoding, cb) {
	            this.push(normalize(chunk.toString()));
	            cb();
	        }
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	```

* **Jeison Vargas** (1)

	
	Mi reto
	``` 
	    const { Transform } = require("stream");
	    
	    const camelCase = new Transform({
	      transform(chunk, encoding, callback) {
	        this.push(
	          chunk
	            .toString()
	            .split(" ")
	            .map(word => {
	              returnword.charAt(0).toUpperCase() + word.slice(1).toLowerCase();
	            })
	            .join("")
	        );
	        callback();
	      }
	    });
	    
	    process.stdin.pipe(camelCase).pipe(process.stdout);
	    
	    
	```

* **Gabriel De Andrade (Platzi)** (1)

	
	Mi soluci√≥n:  
	![carbon.png](https://static.platzi.com/media/user_upload/carbon-4825d7b1-9e1e-4c8f-8423-8585203a45de.jpg)

* **Ernesto Palafox** (1)

	
	Mi soluci√≥n usando reduce
	``` 
	    const { Transform } = require('stream')
	    
	    /*
	    * Recibe una cadena de texto y la traduce a
	    * camelCase usando streams
	    * @param {array} - Array of words
	    * @return {string} - textoEnCamelCase
	    */
	    functiontoCamelCase (arrayOfWords) {
	      return arrayOfWords.reduce((accum, word) => {
	        const firstLetter = word.charAt(0).toUpperCase()
	        accum.push(firstLetter + word.slice(1))
	        return accum
	      }, []).join('')
	    }
	    
	    const transformStream = new Transform({
	      transform (chunk, encoding, callback) {
	        this.push(toCamelCase(chunk.toString().split(' ')))
	        callback()
	      }
	    })
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout)
	    
	```

* **Sebastian Cardoso Castillo** (1)

	
	Estas clases son geniales!

* **JUAN SILVA** (1)

	
	script del tranforms

* **Alejandro Gonz√°lez Reyes** (1)

	
	Mi soluci√≥n
	``` 
	    const { Transform } = require("stream");
	    
	    const camelCase = new Transform({
	      transform(chunk, encoding, callback) {
	        lettext = chunk.toString();
	        letelements = text.split(" ");
	        letcapitalize = elements.map(
	          element =>
	            element.charAt(0).toUpperCase() + element.slice(1).toLowerCase()
	        );
	        this.push(capitalize.join(""));
	        callback();
	      }
	    });
	    
	    process.stdin.pipe(camelCase).pipe(process.stdout);
	    
	```

* **carlos-bolivar** (1)

	
	Recuerden usar el metodo toLowerCase(), de javascript para convertir el resto de la palabra en minuscula, ya que si colocas toda la palabra en letras mayusculas, retornara todas las letras de la palabra en cuestion en mayusculas.
	
	Esto lo acoto por el hecho de que he visto en los retos colocados por los compa√±eros, que algunos no lo aplicaron, es una recomendacion üòÑ!! Excelente curso hasta ahora!

* **carlos-bolivar** (1)

	
	Mi solucion al reto!
	``` 
	    const { Transform } = require('stream');
	    
	    const transformStream = new Transform({
	        transform(chunck, encoding, callback) {
	            this.push(textToCamelCase(chunck.toString()));
	            callback();
	        }
	    })
	    
	    functiontextToCamelCase(string) {
	        let stringArray = string.split(' ');
	        let finalString = '';
	    
	        stringArray.forEach(element => {
	            let currentString = element.charAt(0).toUpperCase() + element.toLowerCase().slice(1);
	            finalString += currentString;
	        })
	    
	        return finalString;
	    }
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);```
	    
	```

* **Daniel Herrera** (1)

	```
	    const { Transform } = require('stream');
	    
	    const transformStream = new Transform({
	        transform(chunk, encoding, callback) {
	            this.push(chunk.toString().replace(/(?:^\w|[A-Z]|\b\w)/g, function (word, index) {
	                return index == 0 ? word.toLowerCase() : word.toUpperCase();
	            }).replace(/\s+/g, ''));
	        }
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	```

* **danielsanz (Platzi)** (1)

	
	Repositorio de la clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/duplex-y-transforms-streams>

* **Daniel Cappelletti** (0)

	```
	    const { Transform } = require("stream");
	    
	    const transformStream = new Transform({
	      transform(chunk, encoding, callback) {
	        let cad = chunk.toString().toLowerCase();
	        let arr = cad.split(" ");
	        let words = [];
	    
	        arr.forEach((word) => {
	          let w = word.toLowerCase().charAt(0).toUpperCase() + word.slice(1);
	          words.push(w);
	        });
	    
	        let camelCase = words.join("");
	        let exit = camelCase.charAt(0).toLowerCase() + camelCase.slice(1);
	    
	        this.push(exit);
	        callback();
	      },
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	    
	```

* **sistemasChozas** (0)

	
	mi solucion :
	``` 
	    const { Transform } = require("stream");
	    
	    const transformStream = new Transform({
	      transform(chunk, encoding, callback) {
	        this.push(transformToCapitalize(chunk));
	        callback();
	      }
	    });
	    
	    process.stdin.pipe(transformStream).pipe(process.stdout);
	    
	    functiontransformToCapitalize(chunk){
	      letarray = chunk.toString().split(" ");
	    
	      for (let i in array) {
	        array[i] = (array[i][0]).toUpperCase() + array[i].substr(1);
	      }
	    
	      returnarray.join(" ");
	    }
	    
	```

# Uso de utilidades de Node.js

## 0120. Sistema operativo y sistema de archivos

### Descripci√≥n:


En esta clase vemos dos m√≥dulos b√°sicos:

  * **os**. Sirve para consultar y manejar los recursos del sistema operativo.
  * **fs**. Sirve para administrar (copiar, crear, borrar etc.) archivos y directorios.



Los m√©todos contenidos en estos m√≥dulos (y en todo Node.js) funcionan de forma as√≠ncrona por default, pero tambi√©n se pueden ejecutar de forma s√≠ncrona, por ejemplo el m√©todo `readFile()` tiene su versi√≥n s√≠ncrona `readFileSync()`.

### Links:

* [NodeSchool](https://nodeschool.io/)

* [File System | Node.js v12.9.0 Documentation](https://nodejs.org/api/fs.html)

### Comentarios:

* **Sebastian Cardoso Castillo** (10)

	
	En la versi√≥n 12.10 de Node me interpreta **undefined** en el objeto _os.networkInterfaces().en0_  
	Mirando la doc solo acepta **lo** o **eth0**. En mi casa estoy conectado con Wifi as√≠ me quedo as√≠:  
	![CodeScreen1.png](https://static.platzi.com/media/user_upload/CodeScreen1-836fde53-ddeb-4f0c-8a3c-3c37b5c96a24.jpg)

	* **Hebert de Le√≥n** (1)

		
		¬°Gracias! üòÆ

* **danielsanz (Platzi)** (8)

	
	Repositorio de la clase: <https://github.com/glrodasz/platzi-backend-node/tree/administrar-directorios-y-archivos>

* **Massimo Di Berardino** (3)

	
	Para windows pueden hacer primero hacen
	``` 
	    console.log('IP address', os.networkInterfaces());
	    
	```
	
	con eso se fijan todas sus interfaces de su red y luego con esto pueden mapear alguna para mostrarla
	``` 
	    console.log('IP address', os.networkInterfaces()['nombre red].map(i => i.address));
	    
	```

* **daulisg** (2)

	
	Aqui les dejo un** npm** package que les ayudara con el display/La muestra de los logs [Chalk](https://www.npmjs.com/package/chalk)

	* **carlosextra1** (1)

		
		Gracias por el aporte!

	* **pndafran** (1)

		
		Gracias

* **rusbel berm√∫dez rivera** (2)

	
	process.argv argumentos en vector, tiene los siguientes items
	
	[0] Node /usr/bin/node  
	[1] Path  
	[2] Nombre del archivo ejecutando

* **carlosextra1** (1)

	
	sacar las l√≠neas de un archivo con async

* **carlosextra1** (1)

	
	leer canci√≥n

* **daniel-zurita** (1)

	
	Para interfaces WiFi en windows.
	``` 
	    console.log("IP addres", os.networkInterfaces().WiFi.map(i => i.address));
	    
	```

* **Betty Rossana Jimenez Cede√±o** (1)

	
	En linux, pude encontrar la info de la ip y mac
	``` 
	    console.log("IP address", os.networkInterfaces().wlp2s0.map(i => i.address));```
	    
	```

* **Luis Miguel Rodriguez** (1)

	
	Memoria disponible en gigas
	``` 
	    console.log("Free memory ", (((os.freemem() / 1024) / 1024) / 1024).toFixed(2), "gb"); ```
	    
	```

* **Sebastian** (1)

	
	Hola gente, estoy trabajando en Windows cuando quiero obtener el ip del os la propiedad lo, eth0 me dan undefined, estoy usando la version 10 de node.

	* **edwintrumpet** (2)

		
		Yo estoy en Linux y me pas√≥ lo mismo, puede quitarle esa parte y dejar solo que le muestre las interfaces y ver cuales tiene
		``` 
		    console.log('IP adress', os.networkInterfaces())
		    
		```

	* **raulfbgomez** (1)

		
		Si usan Windows abran el CMD y escriban `ipconfig` y les apareceran las interfaces que tienen disponibles y en Linux escriban `ifconfig` normalmente las interfaces wifi aparecen como wlan o wl0

	* **jagallego** (2)

		
		para windows Os
		``` 
		    console.log('IP Address', os.networkInterfaces().Ethernet.map(i => i.address));
		    
		```

* **oqodigital** (1)
No me funciona, me dice: console.log(‚ÄúIP address‚Äù, os.networkInterfaces().lo.map(i => address)); ^ TypeError: Cannot read property ‚Äòma...

	* **Juan David Castro (Platzi)** (1)

		
		¬°Hola!
		
		Creo que tienes mal escrito el c√≥digo. Intenta con este:
		``` 
		    console.log("IP Address", os.networkInterfaces().en0.map(i => i.address));
		    
		```

* **Alejandro Gonz√°lez Reyes** (1)
Es correcto declararlo as√≠ fs.readFile("naranja.txt", (err, content) => { if (err) { return console.log(err); } const...

	* **Erik Ochoa (Platzi)** (2)

		
		S√≠, ese c√≥digo te funciona para contar lineas, s√≥lo toma en cuenta que si el documento tiene un salto de linea al final tambi√©n ser√° contabilizado.

## 0130. Administrar directorios y archivos

### Descripci√≥n:


### Comentarios:

* **Victor Martin Ortiz Palacio** (6)

	
	Un ejemplo de lo que comenta Guillermo al final de la clase, sobre pasar los archivos por parametro.
	
	![directotios_archivos.jpg](https://static.platzi.com/media/user_upload/directotios_archivos-9b7bf53a-d813-4822-aff2-106be59e77f6.jpg)

* **Gtiseira** (4)

	
	Que mundo enorme es NodeJS. La verdad me encanta pero habra que practicar practicar, leer y leer-

* **Hebert de Le√≥n** (3)

	
	Si no les funciona el mkdir con m√∫ltiples subcarpetas, aseg√∫rense de tener una versi√≥n de NodeJS actualizada.

	* **Sofia Nupieri** (1)

		
		Gracias!

* **danielsanz (Platzi)** (3)

	
	Repositorio de la clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/administrar-directorios-y-archivos>

* **Aram Ceballos Gonzalez** (2)

	
	Para borrar archivos pueden usar el metodo ‚Äòunlink‚Äô de fs pasandole como primer parametro el archivo que desean borrar y como segundo parametro un callback

* **nova12** (1)

	```
	    const fs=require("fs")
	    
	    
	    constfile=fs.copyFile(process.argv[2],process.argv[3],(error,files)=>{
	        if(error){
	            return console.error(error)
	        }
	        console.log("archivo copiado")
	    })```
	    
	```

* **pablopoggiog** (1)

	
	Pasados los vectores como parametros en el comando de ejecucion:
	``` 
	    const fs = require('fs');
	    
	    const arg1= process.argv[2];
	    
	    const arg2= process.argv[3];
	    
	    fs.copyFile(arg1, arg2, error => {
	        if (error) {
	            console.log(error);
	        }
	        console.log(`${arg1} fue copiado como ${arg2}`);
	    })
	    
	```

* **Sebastian Cardoso Castillo** (1)

	
	Con arrow function quedar√≠a asi:
	``` 
	    fs.copyFile('naranja.txt', 'limon.txt', err => console.log(err))
	    
	```

* **JUAN SILVA** (1)

	
	MkDir script

* **Alejandro Gonz√°lez Reyes** (1)

	
	una clase importante para crear directorios y copiar archivos con fechas y nombres espec√≠ficos. (como lo hace wordpress cuando publicas una imagen)

* **Alejandro Gonz√°lez Reyes** (1)
Me pregunto si es necesario crear esa constante files, o basta con solo invocar el metodo readdir

	* **Erik Ochoa (Platzi)** (1)

		
		S√≠ se puede omitir, en este caso al ser una funci√≥n as√≠ncrona los valores de retorno los obtenemos en la funci√≥n callback.

## 0140. Consola, utilidades y debugging

### Descripci√≥n:


### Links:

* [Console | Node.js v12.9.0 Documentation](https://nodejs.org/api/console.html)

* [Debugger | Node.js v12.9.0 Documentation](https://nodejs.org/api/debugger.html)

* [Util | Node.js v12.9.0 Documentation](https://nodejs.org/api/util.html)

* [GitHub - workshopper/learnyounode: Learn You The Node.js For Much Win! An intro to Node.js via a set of self-guided workshops.](https://github.com/workshopper/learnyounode)

### Comentarios:

* **Juan Carlos Garc√≠a Esquivel** (11)

	
	El m√≥dulo √∫til esta dise√±ado para resolver las necesidades internas de las API de Node, sin embargo muchas de estas utilidades tambi√©n son √∫tiles para los m√≥dulos de las aplicaciones en desarrollo. Se puede acceder a estas utilidades usando:  
	`const util = require('util');`
	
	**util.format()**  
	El m√©todo util.format () devuelve una cadena formateada utilizando el primer argumento como una cadena de formato tipo printf que puede contener cero o m√°s especificadores de formato. Cada especificador se reemplaza con el valor convertido del argumento correspondiente. Los especificadores compatibles son:
	
	  * %s - String
	  * %d - Number
	  * %i - parseInt(value, 10)
	  * %f - parseFloat(value)
	  * %j - JSON
	  * %o - Object
	  * %c - Css
	  * %% - signo de '%'  
	**Inspector**  
	cuando se inicia la inspecci√≥n `--inspect`, Node escucha a un cliente de depuraci√≥n , Por defecto escuchara el host y el puerto `127.0.0.1:9229` y a cada proceso se le asigna un id √∫nico.  
	**Opciones de la l√≠nea de comandos**  
	`--inspect`: Habilita el agente de inspecci√≥n y escucha el puerto por defecto 127.0.0.1:9229  
	`--inspect=[host:port]`: Habilita el agente de inspecci√≥n, vincula la direcci√≥n y el puerto a la direcci√≥n de inspecci√≥n.
	
	
	
	**Reto (estuvo super interesante me costo mucho trabajo)**
	``` 
	    const log = newconsole.Console({
	      stdout: process.stdout,
	      strerr: process.strerr
	    });
	    
	    const emojis = {
	      log: "  \u001b[37m ‚ò∫",
	      danger: "  \u001b[31m ‚ò†",
	      info: "  \u001b[34m ‚Ñπ",
	      warning: "  \u001b[33m ‚ö†",
	      love: "  \u001b[35m ‚ù§"
	    };
	    
	    console.Console.prototype.logger = function(text) {
	      this.log(`${emojis.log}${text}`);
	    };
	    
	    console.Console.prototype.warning = function(text) {
	      this.warn(`${emojis.warning}${text}`);
	    };
	    
	    console.Console.prototype.information = function(text) {
	      this.info(`${emojis.info}${text}`);
	    };
	    
	    console.Console.prototype.danger = function(text) {
	      this.error(`${emojis.danger}${text}`);
	    };
	    
	    console.Console.prototype.love = function() {
	      this.error(`${emojis.love} This was made with love for you`);
	    };
	    
	    log.logger("this is a normal log");
	    log.information("this is a info log");
	    log.warning("this is a warning log you should read it");
	    log.danger("this is a error log, You are in fire");
	    log.love();
	    
	```
	
	**output**  
	![Captura.PNG](https://static.platzi.com/media/user_upload/Captura-96668d2f-ae5e-443a-ad9c-0e269dda8945.jpg)

* **Ernesto Palafox** (5)

	
	Mi soluci√≥n: ![](https://i.imgur.com/2tWuiBM.png)

	* **Ernesto Palafox** (2)

		
		Se ve as√≠: ![](https://i.imgur.com/VtnkiUX.png)

	* **pabloverduzcos** (1)

		
		¬°Bien ahi dev üòä!

	* **Javier Fuentes Mora** (1)

		
		Pero no lo estas creando a partir de la clase Console o si??

* **Marco Antonio Benites Espinoza** (3)

	
	Reto:
	``` 
	    const miConsola = newconsole.Console(process.stdout, process.stderr);
	    
	    miConsola.imprimirInfo = (msg = '') => {
	        console.log('-> [Information]: %s', msg)
	    };
	    
	    miConsola.imprimirWarning = (msg = '') => {
	        console.log('-> [Warning]: %s', msg)
	    };
	    
	    miConsola.imprimirError = (msg = '') => {
	        console.log('-> [Error]: %s', msg)
	    };
	    
	    miConsola.imprimirInfo('Hola mundo');
	    miConsola.imprimirWarning('Hola mundo');
	    miConsola.imprimirError('Hola mundo');
	    
	```
	
	![](https://i.ibb.co/XSpm1tB/Screenshot-1.png)

* **Jos√© Abdiel Ortega V√°zquez** (3)

	
	Mi consola üòâ:
	``` 
	    const consoleFile = newconsole.Console(out, err);
	    
	    consoleFile.meliodas = (msg = '') => {
	        console.log('\x1b[31m', `üêâ Full Counter! ${msg}`)
	    };
	    
	    consoleFile.escanor = (msg = '') => {
	        console.log('\x1b[33m', `ü¶Å Sunshine! ${msg}`)
	    };
	    
	    consoleFile.ban = (msg = '') => {
	        console.log('\x1b[37m', `ü¶ä Physical Hunt! ${msg}`)
	    };
	    
	    consoleFile.king = (msg = '') => {
	        console.log('\x1b[34m', `üêª Status Promotion! ${msg}`)
	    };
	    
	    consoleFile.diane = (msg = '') => {
	        console.log('\x1b[33m', `üêç Mother Catastrophe! ${msg}`)
	    };
	    
	    consoleFile.gowther = (msg = '') => {
	        console.log('\x1b[35m', `üêè Lost World! ${msg}`)
	    };
	    
	    consoleFile.merlin = (msg = '') => {
	        console.log('\x1b[35m', `üêó Enchant Infinity! ${msg}`)
	    };
	    
	    consoleFile.meliodas();
	    consoleFile.escanor();
	    consoleFile.ban();
	    consoleFile.king();
	    consoleFile.diane();
	    consoleFile.gowther();
	    consoleFile.merlin();
	    
	```

* **Miguel Angel** (3)

	
	Reto
	``` 
	    const fs = require('fs')
	    const output = fs.createWriteStream('./stdout.log')
	    const error = fs.createWriteStream('./stderr.log')
	    
	    constdate = newDate()
	    const customConsole = newconsole.Console(output,error)
	    
	    customConsole.logger = (element) => {
	        customConsole.log(`Logger created on ${date} : ${element}`)
	        console.log("\x1b[34m%s\x1b[0m",`üí¨  This part is log : ${element}`)
	    }
	    customConsole.warning = (element='')=>{
	        customConsole.log(`Warning created on ${date} : ${element}`)
	        console.log("\x1b[33m%s\x1b[0m",`‚ùï  This part is warning : ${element}`)
	    }
	    customConsole.danger = (element='')=>{
	        customConsole.log(`Danger created on ${date} : ${element}`)
	        console.log("\x1b[31m%s\x1b[0m",`‚ùó  This part is danger : ${element}`)
	    }
	    customConsole.err = (error='')=>{
	        customConsole.error('An error occurred')
	        console.log("\x1b[32m%s\x1b[0m",`‚ùå  An error occurred : ${error}`)
	    }
	    
	    customConsole.logger('Hello')
	    customConsole.warning()
	    customConsole.danger()
	    customConsole.err()
	    
	```
	
	Consola:
	
	![console.png](https://static.platzi.com/media/user_upload/console-cb307525-6c2d-4c5c-aadb-acb29758801a.jpg)

* **danielsanz (Platzi)** (3)

	
	Repositorio de la clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/consola-utilidades-y-debugging>

* **Alfredo Gonzalez** (2)

	
	![](![Screen Shot 2019-12-15 at 18.42.37.png](https://static.platzi.com/media/user_upload/Screen%20Shot%202019-12-15%20at%2018.42.37-1f11e906-73b2-4e3b-ab03-462583e877a2.jpg)

* **Erik Ricardo S√°nchez P√©rez** (2)

	
	Ahora si que me pas√≥ algo bien curioso pero me ayud√≥ a entender m√°s lo que hemos venido viendo.
	
	![Screen Shot 2019-10-16 at 22.47.11.png](https://static.platzi.com/media/user_upload/Screen%20Shot%202019-10-16%20at%2022.47.11-64d75b1c-55cb-4d9b-9462-d494301d15ba.jpg)
	
	Al momento de querer hacer el `new console.Console` me tira el error de que espera un writable stream, por lo que decid√≠ a probar con ello.  
	En la clase de [Readable y Writeable streams](https://platzi.com/clases/1646-backend-nodejs/22019-readable-y-writable-streams/) menciona que el `process.stdout` lo llama `console.log` por debajo, esto me ha parecido muy interesante entonces decid√≠ a probar a hacer mi propio console.log.
	
	El resultado es el siguiente:
	``` 
	    const { Writable } = require("stream");
	    
	    const writableStreamLog = new Writable({
	      write(chunk, encoding, callback) {
	          const now = newDate().toISOString().replace(/T/, ' ').replace(/\..+/, '');
	          process.stdout.write('----------------------------------------\n');
	          process.stdout.write('------- Escuela de Javascript ----------\n');
	          process.stdout.write(`------- LOG ${now} --------\n`);
	          process.stdout.write(`\x1b[32m${chunk.toString()}\x1b[0m`);
	          process.stdout.write('----------------------------------------\n\n');
	          callback();
	      }
	    });
	    
	    const writableStreamError = new Writable({
	        write(chunk, encoding, callback) {
	            const now = newDate().toISOString().replace(/T/, ' ').replace(/\..+/, '');
	            process.stdout.write('----------------------------------------\n');
	            process.stdout.write('------- Escuela de Javascript ----------\n');
	            process.stdout.write(`------ ERROR ${now} -------\n`);
	            process.stdout.write(`\x1b[31m${chunk.toString()}\x1b[0m`);
	            process.stdout.write('----------------------------------------\n\n');
	            callback();
	        }
	    });
	    
	    const ej_console = newconsole.Console(writableStreamLog, writableStreamError);
	    ej_console.log('esto es un log');
	    ej_console.error('esto es un error');
	    
	```
	
	El resultado en la consola.
	
	![Screen Shot 2019-10-16 at 22.57.47.png](https://static.platzi.com/media/user_upload/Screen%20Shot%202019-10-16%20at%2022.57.47-59be5f1b-375c-4b9a-a77d-c26d21da5248.jpg)

	* **Javier Fuentes Mora** (1)

		
		Estoy tratando de correr tu codigo para observarlo pero no hace nada

	* **Erik Ricardo S√°nchez P√©rez** (1)

		
		al parecer al copiar el c√≥digo se pegan cosas como `newDate` y marca error, dejo un gist
		
		<https://gist.github.com/eriksape/e231ab86d3d5830a7e5676cbeaad66a7>

* **Jhonatan Sa√∫l Maco Leysequ√≠a** (1)

	
	Reto:
	``` 
	    const consoleAux = newconsole.Console(process.stdout, process.stderr);
	    let fecha = new Date();
	    consoleAux.printInfo = (msg = "") => {
	      console.info(
	        "\x1b[36m%s\x1b[0m",
	        "[Information] - " + fecha + ":: ",
	        "\x1b[0m",
	        "\n\t >> " + msg
	      );
	    };
	    
	    consoleAux.printWarn = (msg = "") => {
	      console.warn(
	        "\x1b[33m%s\x1b[0m",
	        "[Warning] - " + fecha + ":: ",
	        "\x1b[0m",
	        "\n\t >> " + msg
	      );
	    };
	    
	    consoleAux.printErr = (msg = "") => {
	      console.error(
	        "\x1b[31m%s\x1b[0m",
	        "[Error] - " + fecha + ":: ",
	        "\x1b[0m",
	        "\n\t >> " + msg
	      );
	    };
	    
	    consoleAux.printSuc = (msg = "") => {
	      console.log(
	        "\x1b[32m%s\x1b[0m",
	        "[Success]  - " + fecha + ":: ",
	        "\x1b[0m",
	        "\n\t >> " + msg
	      );
	    };
	    
	    consoleAux.printInfo("Mensaje de informaci√≥n.");
	    consoleAux.printWarn("Mensaje de advertencia.");
	    consoleAux.printErr("Mensaje de error.");
	    consoleAux.printSuc("Mensaje de √©xito.");
	    
	```
	
	Resultado en consola:  
	![consolareto.jpg](https://static.platzi.com/media/user_upload/consolareto-b8030568-e8ad-4a23-bc92-0973df524da6.jpg)

* **carlosextra1** (1)

	
	Un poco largo, pero ahi esta!
	``` 
	    const _console = newconsole.Console(process.stdout, process.stderr);
	    
	    _console.xinfo = (msg = '') => {
	        consttype = typeof msg;
	        if(type === 'number')
	            console.info('[info number] => %d', msg);
	        elseif(type === 'object')
	            console.info('[info json] => %j', msg);
	        else
	            console.info('[info string] => %s', msg);
	        
	    }
	    _console.xwarn = (msg = '') => {
	        consttype = typeof msg;
	        if(type === 'number')
	            console.warn('[warn number] => %d', msg);
	        elseif(type === 'object')
	            console.warn('[warn json] => %j', msg);
	        else
	            console.warn('[warn string] => %s', msg);
	        
	    }
	    _console.xerror = (msg = '') => {
	        consttype = typeof msg;
	        if(type === 'number')
	            console.error("[error number] => %d", msg);
	        elseif(type === 'object')
	            console.error("[error json] => %j", msg);
	        else
	            console.error("[error string] => %s", msg);
	    }
	    
	    _console.xinfo('Esto es un info')
	    _console.xinfo(30)
	    _console.xinfo({"Nombre":"Carlos Ram√≠rez"})
	    
	    _console.xwarn('Esto es un warn')
	    _console.xwarn(20)
	    _console.xwarn({"warning":"Validar funcion"})
	    
	    _console.xerror('Esto es un error')
	    _console.xerror(10)
	    _console.xerror({"error":"error 404", "line":50})
	    
	```

	* **carlosextra1** (1)

		```
		    [nodemon] starting `node reto-console.js`
		    [info string] => Esto es un info
		    [info number] => 30
		    [info json] => {"Nombre":"Carlos Ram√≠rez"}
		    [warn string] => Esto es un warn
		    [warn number] => 20
		    [warn json] => {"warning":"Validar funcion"}
		    [error string] => Esto es un error
		    [error number] => 10
		    [error json] => {"error":"error 404","line":50}```
		    
		```

* **carlosextra1** (1)

	
	Usar node -- inspect scritp.js

* **carlosextra1** (1)

	
	placeholders para formatear nuestros datos
	
	%s = string  
	%d = n√∫mero  
	%j = json

* **carlosextra1** (1)

	
	console-utils.js

* **rusbel berm√∫dez rivera** (1)

	
	Esta parte del curso me ha gustado mucho, me agrada mucho node, y la parte de os, en python hay utilidades muy similares, y es sencillo hacer transferencia de conocimiento entre ambos lenguajes

* **Jes√∫s Miguel Quinto Teran** (1)

	
	Reto:
	
	![output.png](https://static.platzi.com/media/user_upload/output-b0bfa4ad-42a1-44c7-9a64-924665fc41ea.jpg)
	
	`const fs = require(‚Äòfs‚Äô);
	
	const COLORS = {  
	cyan: ‚Äò\x1b[36m%s\x1b[0m‚Äô,  
	yellow: ‚Äò\x1b[33m%s\x1b[0m‚Äô,  
	red: ‚Äú\x1b[31m‚Äù,  
	white: ‚Äú\x1b[37m‚Äù  
	}
	
	const ICONS = {  
	err: ‚Äòüí•‚Äô,  
	log: ‚Äò‚ú®‚Äô,  
	info: ‚Äòüó£‚Äô,  
	warn: ‚ÄòüëÄ‚Äô  
	}
	
	const LOGDIR = `${__dirname}/log`;
	
	const selectType = (type) => {  
	let color, icon;  
	switch (type) {  
	case ‚Äòinfo‚Äô:  
	color = COLORS.cyan;  
	icon = [ICONS.info](http://ICONS.info);  
	break;  
	case ‚Äòwarn‚Äô:  
	color = COLORS.yellow;  
	icon = ICONS.warn;  
	break;  
	case ‚Äòerr‚Äô:  
	color = COLORS.red;  
	icon = ICONS.err;  
	break;  
	default:  
	color = COLORS.white;  
	icon = ICONS.log;  
	}
	``` 
	    return { color, icon };
	    
	```
	
	}
	
	class CustomConsole {  
	constructor() {  
	fs.mkdir(LOGDIR, (err) => {  
	if (err.code !== ‚ÄòEEXIST‚Äô) console.log(err);  
	});  
	const out = fs.createWriteStream(`${LOGDIR}/out.log`, {flags:‚Äòa‚Äô});  
	const err = fs.createWriteStream(`${LOGDIR}/err.log`, {flags:‚Äòa‚Äô});  
	this.consoleSave = new console.Console(out, err);  
	}
	``` 
	    __log(message, options) {
	        const { save, type } = options;
	        const { color, icon } = selectType(type);
	        console.log(color, `${icon}  ${message}`);
	        if (!save) return;
	        const header = `${type.toUpperCase()} - ${new Date()}`
	        if (type == 'err') {
	            this.consoleSave.error(header);
	            this.consoleSave.error(message)
	        } else {
	            this.consoleSave.log(header);
	            this.consoleSave.log(message)
	        }
	    }
	    
	    log(message, options = {}) {
	        options.type = 'log';
	        this.__log(message, options);
	    }
	    
	    info(message, options = {}) {
	        options.type = 'info';
	        this.__log(message, options);
	    }
	    
	    warn(message, options = {}) {
	        options.type = 'warn';
	        this.__log(message, options);
	    }
	    
	    error(message, options = {}) {
	        options.type = 'err';
	        this.__log(message, options);
	    }
	    
	```
	
	};
	
	const customConsole = new CustomConsole();  
	customConsole.log(‚ÄòEste es un mensaje de Log‚Äô);  
	customConsole.error(‚ÄòEste es un mensaje de Error‚Äô);  
	customConsole.warn(‚ÄòEste es un mensaje de Advertencia‚Äô);  
	[customConsole.info](http://customConsole.info)(‚ÄòEste es un mensaje de Informacion‚Äô);
	
	customConsole.log(‚ÄòEste es un mensaje de Log‚Äô, { save: true });  
	customConsole.error(‚ÄòEste es un mensaje de Error‚Äô, { save: true });  
	customConsole.warn(‚ÄòEste es un mensaje de Advertencia‚Äô, { save: true });  
	[customConsole.info](http://customConsole.info)(‚ÄòEste es un mensaje de Informacion‚Äô, { save: true });`

	* **Sofia Nupieri** (1)

		
		Por que esa manera de declarar colores? A mi no me funciona

* **mauricio garcia** (1)

	
	Explica como utilizar el debugging con > node --inspect file.js

* **David Behar** (1)

	
	## Am√© el `--inspect`

* **David Behar** (1)

	
	Ac√° un ejemplo con el api randomuser
	``` 
	    const fs = require('fs');
	    // const fetch = require('fetch');
	    const fetch = require('node-fetch');
	    
	    constout = fs.createWriteStream('./out.log');
	    consterr = fs.createWriteStream('./error.log');
	    
	    const consoleFile = new console.Console(out, err);
	    
	    fetch('https://randomuser.me/api/?results=5000')
	      .then((response) => {
	        return response.json();
	      })
	      .then((myJson) => {
	        consoleFile.log('Bienvenido a la oficina del trabajo, le podemos buscar un empleo, si es quenoest√° juvilado');
	        myJson.results.map((user) => {
	          const { age } = user.dob;
	          const name = user.name.first;
	          const { last } = user.name;
	          const fullName = `${name}${last}`;
	          if (age <= 60) {
	            const message = `${fullName}, tienes la edad requerida (${age}) te encontramos un trabajo`;
	            consoleFile.log(message);
	          } else {
	            const message = `${fullName}, usted tiene ${age} a√±os, ya recibe una pensi√≥n, divi√©rtase, ¬°no todo enla vida es trabajar!`;
	            console.log(new Error(message));
	            consoleFile.error(new Error(message));
	          }
	        });
	      });
	    
	```

* **carlosextra1** (1)
placeholders para formatear nuestros datos %s = string %d = n√∫mero %j = json 

	* **glrodasz** (1)

		
		¬°Excelente aporte!

* **cristofers530** (1)
tengo un problema, mi terminal no reconoce el NODE_DEBUG como una variable de entorno, sino como un comando (y evidentem...

	* **Gabriel De Andrade (Platzi)** (1)

		
		Hola! Estas usando la terminal `zsh` que instalamos en el [Curso de Prework](https://platzi.com/clases/prework/)?

* **David Behar** (1)
Est√° muy cool el --inspect, pero no puedo acceder a ninguna de las variables, ¬øc√≥mo le hago?

	* **glrodasz** (1)

		
		Podrias darme un ejemplo m√°s especifico respecto a lo que no puedes acceder a las variables.

## 0150. Clusters y procesos hijos

### Descripci√≥n:


Una sola instancia de Node.js corre un solo hilo de ejecuci√≥n. Para tomar ventaja de los sistemas con multiples core, necesitamos lanzar un cluster de procesos de Node.js para manejar la carga.

El m√≥dulo cluster nos permite la creaci√≥n f√°cil de procesos hijos que comparten el mismo puerto del servidor. Veamos un ejemplo en c√≥digo:
``` 
    const cluster = require("cluster");
    const http = require("http");
    
    
    // Requerimos la cantidad de CPUs que tiene la maquina actual
    const numCPUs = require("os").cpus().length;
    
    
    if (cluster.isMaster) {
      console.log(`Master ${process.pid} is running`);
    
    
      // Si el cluster es maestro, creamos tantos procesos como numero de CPUS
      for (let i = 0; i < numCPUs; i++) {
        cluster.fork();
      }
    
    
      // Si por alguna raz√≥n el cluster se finaliza hacemos un log
      cluster.on("exit", (worker, code, signal) => {
        console.log(`worker ${worker.process.pid} died`);
      });
    } else {
      // Los diferentes workers pueden compartir la conexi√≥n TCP
      // En este caso es una servidor HTTP
      http
        .createServer((req, res) => {
          res.writeHead(200);
          res.end("hello world\n");
        })
        .listen(8000);
    
    
      console.log(`Worker ${process.pid} started`);
    }
    
```

Si corremos nuestro archivo de Node.js ahora compartir√° el puerto 8000 con los diferentes workers:
``` 
    $ node server.js
    Master 3596 is running
    Worker 4324 started
    Worker 4520 started
    Worker 6056 started
    Worker 5644 started
    
```

En Windows, todav√≠a no es posible establecer un nombre de proceso server en un worker.

### Comentarios:

* **Nadir Antonio Soza Solis** (6)

	
	Muy poca informaci√≥n en esta clase, de cualquier forma podemos ir a la segura en la documentaci√≥n oficial (Node/Cluster)[<https://nodejs.org/api/cluster.html>]

	* **carlosextra1** (1)

		
		Gracias !!

* **Alejandro Gonz√°lez Reyes** (4)

	
	Seg√∫n la l√≥gica del c√≥digo, puedo entender que si no hay un cluster maestro se crea el servidor HTTP. pero en que momento se repite el c√≥digo. Ya que un if-else es uno u otro pero no ambos.

	* **Erik Ricardo S√°nchez P√©rez** (2)

		
		Por lo que entiendo el fork genera el mismo proceso pero ya no es maestro si no un worker. Te puedes dar cuanta por los logs que pone en el ejemplo. As√≠ que b√°sicamente el primero entra en modo maestro y los forks en modo worker ü§î

	* **Rafael Andr√©s Cisneros Corro** (3)

		
		Cada vez que se crea un proceso hijo con cluster.fork, se ejecuta todo el codigo desde el principio, con la diferencia de que cluster.isMaster es false. En este caso el proceso principal se encarga de crear los procesos hijos, y cada proceso hijo crea un servidor http.

* **oscar-leon846** (3)

	
	el metodo cluster.fork(), lo que hace, segun la documentacion de node, aparece un nuevo proceso de la app, es como si hubieras ejecutado " node server.js " pero este codigo ya no se ejecuta como master, si no como proceso hijo

	* **carlosextra1** (1)

		
		Ok muy buen aporte!

* **Maximo Martinez Soria** (2)

	
	Esto se divide los procesos a ejecutar entre los distintos nucleos disponibles autom√°ticamente? o nosotros tenemos que decirle que hacer en cada uno?

	* **carlosextra1** (1)

		
		Me gustaria saber la respuesta!

* **Julio J Y√©pez** (1)

	
	Yo dir√≠a que el clustering en NodeJS es una alternativa interesante para garantizar la atenci√≥n de peticiones concurrentes y sacar el m√°ximo provecho al hardware (cantidad de n√∫cleos) del servidor. Otra alternativa que he usado ser√≠a ejecutar las aplicaciones con PM2 o alg√∫n otro process manager, que tambi√©n cuentan con opciones de clusterizaci√≥n o forking de procesos.

* **edwintrumpet** (1)

	
	Ser√≠a bueno saber en qu√© situaciones es recomendable usar el cluster, porque por lo que vi en el _Curso de Esenciales de Node_ que dict√≥ Emir Salazar no necesariamente mejora el rendimiento sino que pueden ocasionar todo lo contrario.

* **heysoypaez** (1)

	
	¬ø Entonces, el uso de clusters nos permitir√° que los archivos que requeramos ejecutar en nuestro servidor en NodeJs cargu√© en m√∫ltiples procesos ?
	
	En la pr√°ctica lo que nos permite es mejorar el rendimiento, ¬øNo?

	* **pabloverduzcos** (1)

		
		Justamente, es la pregunta que tengo ü§î‚Ä¶

	* **edwintrumpet** (3)

		
		Seg√∫n lo que vi en el curso de esenciales de Node no necesariamente mejora el rendimiento, ya que la redirecci√≥n hacia los workers tambi√©n ocupa un procesamiento y puede que sea mayor que lo que pueden mejorar con procesamiento en paralelo.  
		La verdad todav√≠a no he entendido en qu√© casos es bueno usar clusters pero al final del curso de esenciales de node se ve que no necesariamente mejoran el rendimiento.

# Crea tu primer proyecto en Express.js

## 0160. ¬øQu√© es Express.js y para qu√© sirve

### Descripci√≥n:


Express.js es un framework para crear **Web Apps** , **Web APIs** o cualquier tipo de **Web Services** , es libre bajo la licencia MIT.

Express es muy liviano y minimalista adem√°s de ser extensible a trav√©s de Middlewares.

Los Middlewares interceptan el request y el response para ejecutar una acci√≥n en medio.

### Links:

* [Sinatra](http://sinatrarb.com/)

### Comentarios:

* **jasanhdz** (17)

	
	Les dejo mis notas que me apoyaron en el aprendizaje del curso üòÑ  
	<https://github.com/JasanHdz/backendnodejs/tree/master/notes>  
	No se rindan, √©xito üí™  
	_**Mis mejores notas**_ ‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê

	* **franciscohreyes** (1)

		
		.

	* **Andres Leonardo Arevalo** (1)

		
		Como haces tus notas asi, me puedes indicar por favor üòÉ

	* **carlosextra1** (1)

		
		Excelente

* **Ricardo Lugo Recillas** (3)

	
	caracteristicas
	
	  * minimalista
	  * template engines
	  * routing (uso de expreciones regulares)
	  * middlewares
	  * plugins
	
	

## 0170. Creando tu primer servidor con Express.js

### Descripci√≥n:


### Links:

* [
        Relative Path - Visual Studio Marketplace
    ](https://marketplace.visualstudio.com/items?itemName=jakob101.RelativePath)

### Comentarios:

* **Favio Sauto** (30)

	
	Para los que usan Windows y no les funciona el script cuando lo tienen de esta forma:
	``` 
	    "dev": "DEBUG=app:* nodemon index"
	    
	```
	
	De esta forma s√≠ funciona:
	``` 
	    "dev": "set DEBUG=app:*&& nodemon index"
	    
	```

	* **Manuel Ojeda** (4)

		
		Sos un h√©roe sin capa!

	* **IngridSagrero** (2)

		
		Gracias, eso me funcion√≥!!!

	* **diegocruz** (2)

		
		Gracias funciono

	* **Juan Carlos Garc√≠a Esquivel** (2)

		
		Gracias

	* **Jemd** (2)

		
		Heroeeeeeeeeeeeee!

	* **JUAN SILVA** (2)

		
		para los que no les funciona en Windows‚Ä¶ acepten la realidad e instalen ubuntu jajajaja

	* **Manuel Ojeda** (1)

		
		@juanchopatrik  
		Muchas veces por no tener la disponibilidad nos vamos a lo nativo de Windows, el cual ya es una buena plataforma de desarrollo y no hay muchas complicaciones de uso como ambiente de desarrollo.
		
		Ya est√° en el dev si utiliza Linux, Windows o Mac.

* **Kevin Rodolfo cosio sanchez** (10)

	
	Configuracion .eslintrc.json
	``` 
	    {
	      "parserOptions": {
	        "ecmaVersion": 2018
	      },
	      "extends": [
	        "eslint:recommended",
	        "prettier"
	      ],
	      "env": {
	        "es6": true,
	        "node": true,
	        "mocha": true
	      },
	      "rules": {
	        "no-console": "warn"
	      }
	    } ```
	    
	```

* **Hebert de Le√≥n** (7)

	
	En Windows es diferente la parte de los Scripts de package.json
	``` 
	    "dev": "set DEBUG=app:*&& nodemon index"
	    "start": "set NODE_ENV=production&& node index"
	    
	```

* **cristofers530** (6)

	
	si estan en windows y la consola le salta error ‚Äòporque no reconoce a DEBUG=app:*‚Äô, coloquen ‚Äò**set **DEBUG=app‚Ä¶‚Äô y de paso tambien tienen que usar **&** antes de nodemon index

	* **daniel-zurita** (1)

		
		Gracias, me ayud√≥ un mont√≥n esto.

	* **Carlos Vallejo** (1)

		
		Perfecto, muchas gracias!

* **Gabriel De Andrade (Platzi)** (4)

	
	Mi soluci√≥n:  
	![carbon \(1\).png](https://static.platzi.com/media/user_upload/carbon%20%281%29-c840e178-4d36-436f-bef2-ee645224e6a9.jpg)

* **Jesus Dario** (3)

	
	Para crear los scripts del package.json en windows se deben separar los comandos con &
	``` 
	    "scripts": {
	        "dev": "DEBUG=app:* & nodemon index",
	        "start": "NODE_ENV=production & node index.js"
	      },
	    
	```

	* **jandrey** (1)

		
		Tmabi√©n puedes usar cross-env

* **Juan Carlos Garc√≠a Esquivel** (3)

	
	 **dotenv**  
	Es un m√≥dulo independiente que carga variables de entorno de un archivo .env en process.env.  
	`npm i express dotenv`
	
	**Nodemon**  
	Nodemon es una utilidad que supervisar√° cualquier cambio en los recursos y reiniciar√° autom√°ticamente su servidor.  
	`npm i -D nodemon eslint eslint-config-prettier eslint-plugin-prettier prettier`
	
	**Husky hooks**  
	Es un m√≥dulo que puede prevenir realizar **git commit** o **git push** sin formato u otros conflictos no deseados.  
	`npx mrm lint-staged`
	``` 
	    const express = require('express');
	    const app = express();
	    const { config } = require('./config/index');
	    
	    const divider = (year, divisor) => {
	      return year % divisor === 0 ? true : false;
	    };
	    
	    app.get('/', (request, response) => {
	      response.send(`Place a year after the url and find out if it is leap year: 
	      http://localhost:${config.port}/1994`);
	    });
	    
	    /**
	     * The year is leap year if
	     * first - it is divisible by 4
	     * second - it is not divisible by 100
	     * third - or it is divisible by 400
	     */
	    app.get('/:year', (request, response) => {
	      const { year } = request.params;
	      if ((divider(year, 4) && !divider(year, 100)) || divider(year, 400)) {
	        response.send(`The year 
	        ${year} is leap year :D`);
	      }
	      response.send(`The year 
	      ${year} is NOT leap year :C`);
	    });
	    
	    app.listen(config.port, () => {
	      console.log(`listening address http://localhost:${config.port}`);
	    });
	    
	    
	```

* **Erik Ricardo S√°nchez P√©rez** (3)

	
	üòé
	``` 
	    const express = require('express')
	    const app = express()
	    
	    const { config } = require('./config/index')
	    
	    app.use(express.urlencoded({extended:false}))
	    app.use(express.json())
	    
	    app.get('/leap-year/:year', (req, res) => {
	        const year = Number(req.params.year);
	        if(year % 4 === 0) return res.send(`${year} es a√±o bisiesto`);
	        res.send(`${year} es un a√±o normie`)
	    })
	    
	    app.listen(config.port, () => {
	        console.log(`Server listen on http://localhost:${config.port}`)
	    })
	    
	```

* **danielsanz (Platzi)** (3)

	
	Repositorio de la clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/creando-tu-primer-servidor-con-expressjs>

* **Carlos Vallejo** (2)

	
	Para mi soluci√≥n al reto, utilic√© un m√≥dulo de npm llamado _leap-year_ que me dice si es o no es bisiesto. Y para la respuesta apliqu√© un if ternario:
	``` 
	    npm install -D leap-year
	    
	```
	``` 
	    const leapYear = require('leap-year');
	    app.get('/leap-year/:year', (req, res) => {
	      leapYear(parseInt(req.params.year)) ? result = 'Si es bisiesto' : result = 'No es bisiesto';
	      res.send(result);
	    });
	    
	    
	```

* **nova12** (2)

	
	aqui les comparto mi solucion
	``` 
	    app.get('/is_leap_year', function(req, res) {
	      const year=req.query.year;
	      constdate=newDate()
	      date.setFullYear(year)
	      date.setMonth(1)
	      date.setDate(29)
	      if(date.getMonth()===1){
	        res.send(`el a√±os ${year} es bifiesto`)
	      }else{
	        res.send(`el a√±os ${year} no  es bifiesto`)
	      }
	    });```
	    
	```

* **PaoloTorregrosa** (2)

	
	Mi solucion al reto :3
	``` 
	    app.get("/year/:year", function(req, res) {
	        res.send(leapYear(req.params.year) ? "Bisiesto" : "No bisiesto");
	    });
	    
	    functionleapYear(year) {
	        if (parseInt(year) % 4 === 0){
	            returntrue;
	        }
	    
	        returnfalse;
	    }
	    
	```

* **cristofers530** (2)

	```
	    const express = require('express');
	    const app = express();
	    
	    const {config} = require('./config/index.js')
	    
	    app.get("/:year", (req,res)=>{
	        var year = req.params.year 
	        
	        if(year % 100 == 0){
	            if(year % 400 == 0){
	                res.send(`el a√±o ${year} <b>es biciesto</b>`)
	            }else{
	                res.send(`el a√±o ${year} <b>no es biciesto</b>`)
	            }
	        }
	        elseif(year % 4 == 0)
	        {
	            res.send(`el a√±o ${year} <b>es biciesto</b>`)
	        }
	        else
	        {
	            res.send(`el a√±o ${year} <b>no es biciesto</b>`)
	        }
	    
	    })
	    
	    app.get("/json", (req,res)=>{
	        res.json({hello: "word"})
	    })
	    
	    app.listen(config.port, ()=>{
	        console.log(`escuchando en http://localhost:${config.port}`)
	    })```
	    
	```

* **edwintrumpet** (2)

	
	**Respuesta al reto**
	``` 
	    const express = require('express')
	    const app = express()
	    
	    const { config } = require('./config')
	    
	    app.use(express.urlencoded({extended:false}))
	    app.use(express.json())
	    
	    app.get('/', (req, res) => {
	        const { year } = req.body
	    
	        const divisibleFour = !(year % 4)
	        const divisibleHundred = !(year % 100)
	        const divisibleFourHundred = !(year % 400)
	    
	        if(divisibleFour && (!divisibleHundred || divisibleFourHundred)){
	            res.status(200).json({message: 'Es un a√±o bisiesto'})
	        }else{
	            res.status(200).json({message: 'No es un a√±o bisiesto'})
	        }
	    })
	    
	    app.listen(config.port, () => {
	        console.log(`Server listen on http://localhost:${config.port}`)
	    })
	    
	    
	```

* **Ernesto Palafox** (2)

	```
	    app.get('/year/:year', function (req, res) {
	      const { year } = req.params
	      const leap = year % 4 === 0 && year % 1000 !== 0
	      res.send(`${year} is ${leap ? 'a' : 'not a'} leap year`)
	    })
	    
	    app.listen(port, function () {
	      console.log(`Listening http://localhost:${port}`)
	    })
	    
	```

* **Sebastian Cardoso Castillo** (2)

	
	Servidor de express al m√≠nimo:
	``` 
	    const express = require('express')
	    const app = express()
	    const { config } = require('./config/index')
	    app.get('/', (req, res) => {res.send('Hello world')})
	    app.get('/', (req, res) => {res.json({ hello: 'world'})})
	    app.listen(config.port, () => console.log(`Listening http://localhost:3000${config.port}`))
	    
	```

* **ThAlan** (2)

	
	Reto.
	``` 
	    const express = require('express')
	    const app = express()
	    
	    app.get('/:year', (req, res) => {
	      constyear = req.params.year
	      if (year % 4 === 0 && year % 100 != 0) {
	        res.send(`${year} is a leap year`)
	      } else {
	        res.send(`${year} isnot a leap year`)
	      }
	    })
	    
	```

* **JUAN SILVA** (2)

	```
	    <code>const express = require('express');
	    const app = express();
	    
	    const { config } = require('./config/index');
	    
	    app.get('/', function(req, res) {
	      res.send('hello world');
	    });
	    
	    app.get('/json', function(req, res) {
	      res.json({ hello: 'world' });
	    });
	    
	    app.get('/:year', (req, res)=>{
	        let year = req.params.year;
	     if ( year % 4 == 0 && year % 100 != 0 || year % 400 == 0){
	        res.send("el "+ req.params.year + " es biciesto")}
	     else{
	        res.send("el "+ req.params.year + " no es biciesto")}
	     }
	    )
	    
	    app.listen(config.port, function() {
	      console.log(`Listening http://localhost:${config.port}`);
	    });
	    <code>
	    
	```

* **Luis Miguel gonzalez** (2)
Tengo problemas para installar el npx mrm lint-staged, ando programando en windows y el error que me sale es el siguiente: Agradeceria d...

	* **glrodasz** (1)

		
		Yo revisar√≠a dos cosas:
		
		  1. Que tengas Node.js y NPM instalados de manera correcta y no dependan de los permisos del administrador. Quiz√°s puedas intentar usar nvm para windows: <https://github.com/coreybutler/nvm-windows>
		
		  2. Usar mejor la version de Ubuntu para Windows y trabajar desde all√≠ para evitar problemas de compatibilidad: <https://ubuntu.com/tutorials/tutorial-ubuntu-on-windows#2-requirements>
		
		
		

* **SKILLON** (2)
Un saludo, estoy programando en windows y al correr el npm run dev no me reconoce DEBUG, luego prob√© haciendo un nodemon index directo y ...

	* **Juan David Castro (Platzi)** (3)

		
		¬°Hola! Para usar el comando **`nodemon`** desde tu consola debes tenerlo instalado globalmente. ¬øPuedes mostrarnos tu **`package.json`** y el error o resultado que te muestra la consola al ejecutar los _scripts_?

* **Juan Carlos Pinz√≥n** (1)

	```
	    app.get('/leap-year/:year', function(req, res) {
	    	const year = req.params.year
	    	const message = (year % 4 == 0) ? `El a√±o ${year} es un a√±o bisiesto` : `El a√±o ${year} NO es un a√±o bisiesto`
	    	res.send(message)
	    })```
	    
	```

* **pndafran** (1)

	```
	    const express = require('express');
	    const app = express();
	    const { config } = require('./config/index');
	    app.get('/', (req, res) => {
	      res.send('indica el a√±o');  
	    })
	    app.get('/:year', (req, res) => {
	      const year = req.params.year;
	      if (year % 4 === 0) {
	        res.send(`El ${year} es bisiesto`);
	      } else {
	        res.send(`el a√±o ${year} no es bisiesto`);
	      }
	    })
	    app.listen(config.port, () =>{
	      console.log(`Listening http://localhost:${config.port}`);
	    
	    
	```

* **ocandoja** (1)

	```
	    const express = require('express');
	    const app = express();
	    const { config } = require('./config/index');
	    app.get('/', (req, res) => {
	      res.send('indica un anno');
	    })
	    app.get('/:year', (req, res) => {
	      const year = req.params.year;
	      if (year % 4 === 0) {
	        res.send(`El ${year} es bisiestoü§ì`);
	      } else {
	        res.send(`Lo siento el a√±o ${year} no es bisiesto üòî`);
	      }
	    })
	    app.listen(config.port, () =>{
	      console.log(`Listening http://localhost:${config.port}`);
	    })```
	    
	```

* **carlosextra1** (1)

	
	my code!!
	``` 
	    const express = require('express');
	    const app = express();
	    const { config } = require('./config/index');
	    
	    app.get('/:amo', (req, res) => {
	        const amo = parseInt(req.params.amo);
	        if ((((amo % 4 == 0)
	            && (amo % 100 != 0))
	            || (amo % 400 == 0))
	        )
	            res.send(`El a√±o ${amo} es bisiesto!`)
	        else
	            res.send(`El a√±o ${amo} NO es bisiesto`);
	    });
	    
	    app.listen(config.port, () =>{
	        console.log(`Corriendo en http://localhost:${config.port}`)
	    })
	    
	```

* **carlosextra1** (1)

	
	plug-in relative path

* **carlosextra1** (1)

	
	instalar npx mrm lint-staged

* **carlosextra1** (1)

	
	Dependencias de desarrollo npm i -D nodemon eslint eslint-config-prettier eslint-plugin-prettier prettier

* **carlosextra1** (1)

	
	Installer express y dotenv

* **David Lara Chirinos** (1)

	
	Le dejo mi solucion,
	
	  1. descargar npm i -D is-leap-year
	
	
	``` 
	    const express = require('express');
	    const app = express();
	    const isLeapYear = require('is-leap-year');
	    
	    const { config } = require('./config/index');
	    
	    anioBistiento = (n) => isLeapYear(n)
	    
	    app.get('/', function (req, res) {
	      res.send('Hello Word');
	    });
	    app.get('/bisiento', function (req, res) {
	      res.send(
	        anioBistiento(2020)
	          ? '<h1>es bisieto</h1>'
	          : '<h1>no es bisieto</h1>'
	      );
	    });
	    
	    app.get('/json', function (req, res) {
	      res.send({ hello: 'Hola' });
	    });
	    
	    app.listen(config.port, function () {
	      console.log('Todo bien');
	    });
	    
	    
	```

* **Carlos Vallejo** (1)

	
	Si tienen un error de
	``` 
	    "DEBUG"nose reconoce como un comando interno o externo,
	    
	```
	
	Un compa√±ero dej√≥ la soluci√≥n a esto [aqu√≠](https://platzi.com/comentario/869144/)

* **Diego Camino** (1)

	
	Mi soluci√≥n al reto:
	``` 
	    const express = require("express");
	    const app = express();
	    const { config } = require("./config/index");
	    
	    app.get("/", function(req, res) {
	        res.send("Hello world! creando un servidor con Express");
	    });
	    
	    app.get("/json", function(req, res) {
	        res.json({hello: "Hello world! creando un servidor con Express"});
	    });
	    
	    app.get("/isLeapYear/:year", function(req, res) {
	        let year = Number(req.params.year);
	        let answer="";
	        let isLeapYear = year%4;
	        !isLeapYear?answer = "S√≠ es a√±o bisiesto": answer = "No es a√±o bisiesto";
	        res.json({isLeapYear: answer});
	    });
	    
	    app.listen(config.port, function() {
	        console.log(`Listening http//localhost:${config.port}`);
	    });
	    
	```

* **Marco Antonio Benites Espinoza** (1)

	
	Reto:
	``` 
	    const express = require('express');
	    
	    const app = express();
	    
	    const { config } = require('./config/index');
	    
	    app.get('/bisiesto', function(req, res){
	    
	        const anio = req.query.anio;
	    
	        const isBisiestoText = isBisiesto(anio) ? "si": "no";
	    
	        res.send(`El anio ${anio}${isBisiestoText} bisiesto!`)
	    });
	    
	    app.listen(config.port, function(){
	        console.log(`Listening in http://localhost:${config.port}`);
	    });
	    
	    const isBisiesto = (anio) => {
	        return (anio % 4 == 0 && anio % 100 != 0)
	    };
	    
	```

* **mrcMesen** (1)

	
	Les dejo mis apuntes en caso de que les sirva  
	Adicional los que usen windows puede que el run dev no les sirva, pueden poner npx antes de nodemon y listo
	``` 
	    npm init -y 
	    
	    Modificar scripts iniciales:
	    "scripts": {
	        "start": "DEBUG=app:* nodemon index.js", 
	        "build": "NODE_ENV=production node index.js"
	      }
	    
	    Configuraci√≥n de .eslint.json 
	    Crea el archivo con las siguientes configuraciones
	    
	      {
	        "parserOptions": {
	          "ecmaVersion": 2018                             /** indica la versi√≥n de EcmaScript que se va a usar
	        }, 
	        "extends": ["eslint:recommended", "prettier"],    /** Indica que extienda la versi√≥n recomendada y que utilice prettier
	        "env": {                                          /** Configura las variables de entorno indicando que se usar√°n es6, node, mocha
	          "es6": true,
	          "node": true,
	          "mocha": true
	        },
	        "rules": {                                        /** regla de no poner la consola es unicamente un warning, no un error
	          "no-console": "warn"
	        }
	      }
	    
	    Se configura prettier
	    Crear archivo .prettierrc.json
	    
	    {
	      "tabWidth": 2,        /** numero de espacios en los taps 
	      "semi": true,         /** que se utilice ; 
	      "singleQuote": true   /** comillas simples no dobles
	    }
	    
	    
	    instalar express y dotenv  /** prodccion
	    npm i express dotenv
	    
	    
	    instalar dependencias de desarrollo:
	    
	    /* -D abreviatura de --save-dev
	    npm i -D nodemon eslint eslint-config-prettier eslint-plugin-prettier prettier
	    
	    /* installar hook para que cuando se haga commit se formatee con eslint y prettier
	    npx mrm lint-staged
	    
	    /* Se crea archivo config/index.js de configuracion de variables de entorno ENV 
	    
	    require('dotenv').config();
	    
	    const config = {
	      dev: process.env.NODE_ENV !== 'procdution',   /** cuando no est√© en prodccion */
	      port: process.env.PORT || 3000                /** buena practica tener una variable global para el puerto */
	    }
	    
	    module.exports = { config };
	    
	```

* **juan-d-martin** (1)

	
	Mi reto:
	``` 
	    app.get('/year/:year', (req, res) => {
	    	var yr = req.params.year;
	    	if(Bisiesto(yr)){
	    		res.send("Es bisiesto");
	    	}else{
	    		res.send("No es bisiesto);
	    	}
	    });
	    
	    function Bisiesto(year){
	    	return (year % 4 === 0 && year % 100 != 0 || year % 400 === 0)
	    }
	    
	```

* **Alver Ortega** (1)

	
	Mi reto:
	``` 
	    app.get('/year/:year', function (req, res) {
	       const message = isBisiesto(req.params.year) ? 'The yearis bisiesto' : "The year not is bisiesto";
	       res.send(message);
	    });
	    
	    function isBisiesto(year) {
	        return ((year % 4 == 0 && year % 100 != 0) || year % 400 == 0) ? true : false;
	    }```
	    
	```

* **daniel-zurita** (1)

	
	antes de ver las respuestas elegantes, lo hice as√≠
	``` 
	    app.get('/year/:year', function(req, res) {
	      constdate = newDate();
	      const anio = req.params.year;
	      const ultimoDia = newDate(anio, date.getMonth() + 1, 0).getDate();
	      let estadoAnio = '';
	      ultimoDia === 29 ? (estadoAnio = 'Es ') : (estadoAnio = 'No es');
	      res.send(`${anio}${estadoAnio} bisiesto, pues febrero tiene: ${ultimoDia} d√≠as.`);
	    });
	    
	    
	```

* **seiro** (1)

	```
	    app.get('/bisiesto/:year', function (req, res) {
	        const year = Number(req.params.year);
	        let bisiesto = 'bisiesto';
	        if (year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0)) {
	            bisiesto = `<h1>El a√±o ${year} es bisiesto</h1>`
	        } else {
	            bisiesto = `<h1>El a√±o ${year} no es bisiesto</h1>`
	        }
	        res.send(bisiesto);
	    })
	    
	```

* **Alvaro Ruben Hurtado Maldonado** (1)

	
	¬øC√≥mo se llama el m√≥dulo para encontrar la ruta relativa? es una extensi√≥n de visual studio code no?

	* **Gabriel De Andrade (Platzi)** (1)

		
		[Relative path](https://marketplace.visualstudio.com/items?itemName=jakob101.RelativePath) üòÑ

* **asismelgarejo** (1)

	```
	             __
	      ____  / /_
	     / __ \/ __ \
	    //_// // /
	    \____/_//_/
	    
	```

* **Jesus Dario** (1)

	
	Me quedo una duda, cuando en el package.json se configura el entorno de produccion ‚ÄúNODE_ENV‚Äù = production node index,.
	
	cuando se refiere a NODE_ENV esta es una variable de entorno que se creara en el despliegue?

	* **jandrey** (1)

		
		Si es una variable de entorno que se crea al ejercutar el script npm start

* **Diego Felipe Garcia Cortes** (1)

	
	Quisas otra forma‚Ä¶
	``` 
	    app.get('/year/:year', (req, res) => {
	        constdate = newDate(req.params.year, 1, 29);
	        res.send(`Es bisiesto?: ${date.getMonth() === 1}`);
	    });```
	    
	```

* **idmc3010** (1)

	```
	    app.get('/anio/:anio', function(req, res) {
	        let anio = req.params.anio;
	        let mod = anio % 4;
	    
	        if (mod === 0) {
	            res.json({ bisiesto: true });
	        } else {
	            res.json({ bisiesto: false });
	        }
	    
	    });```
	    
	```

* **Ren√© Felipe Ram√≠rez Barrera** (1)

	```
	    app.post("/:year", function(req, res){
	      letyear = req.params.year
	      let status = ((year % 4 === 0 && year % 100 !== 0) || (year % 400 === 0))
	      res.status(200).json({"bisiesto" : status})
	    })
	    
	```

* **Leonardo Daniel Benitez Cuenca** (1)

	```
	    app.get("/:year",(req, res)=>{
	        constyear = req.params.year;
	    
	        if (year % 4 == 0 && year % 100 !== 0 && year % 400 !==0){
	            res.send(`El a√±o ${year} es biciesto`);
	        } else {
	            res.send(`El a√±o ${year} NO es biciesto`);
	        }
	    });
	    
	```

* **Brian Dennis Vega Hidalgo** (1)

	
	La configuracion del eslint
	``` 
	    {
	        "parserOptions": {
	          "ecmaVersion": 2018
	        },
	        "extends": ["eslint:recommended", "prettier"],
	        "env": {
	          "es6": true,
	          "node": true,
	          "mocha": true
	        },
	        "rules": {
	          "no-console": "warn"
	        }
	      }
	    
	```

* **Luis Miguel gonzalez** (1)

	
	Reto:
	
	Mi soluci√≥n al reto
	``` 
	    const express = require('express');
	    const app = express();
	    
	    const { config } = require('./config/index');
	    
	    const anoBisiesto = fechaRequest => {
	      const fecha = {
	        dia: fechaRequest.getDate(),
	        mes: fechaRequest.getMonth(),
	        a√±o: fechaRequest.getFullYear()
	      };
	      return (fechaRequest.a√±o % 4 == 0 && fechaRequest.a√±o % 100 != 0) ||
	        fechaRequest.a√±o % 400 == 0
	        ? 'Bisiesto'
	        : 'No es bisiesto';
	    };
	    
	    app.post('/bisiesto', (req, res) => {
	      try {
	        let body = [];
	    
	        req
	          .on('data', chunk => {
	            body.push(chunk);
	          })
	          .on('end', () => {
	            res.writeHead(200, { 'Content-type': 'text/plain' });
	            body = anoBisiesto(newDate(body));
	            res.end(body);
	          });
	      } catch (error) {
	        console.log('Error: ', error);
	      }
	    });
	    
	    app.listen(config.port, function() {
	      console.log(`El servidor esta corriendo en el puerto: ${config.port}`);
	    });```
	    
	    
	```

* **rusbel berm√∫dez rivera** (1)

	
	Mi soluci√≥n al reto, una variante mas larga era usar date (antes de tomar caf√©)
	``` 
	    const express = require('express');
	    const app = express();
	    const { config } = require('./config/index');
	    const bodyParser = require("body-parser")
	    app.use(bodyParser.text({ type: 'text/plain' }));
	    
	    const isLeap = (year) => (
	        year % 4 === 0 ?
	            `${year} es a√±o bisesto` :
	            `${year} no es a√±o bisesto`
	    );
	    
	    app.post('/yearchallenge', function (req, res) {
	        let message = isLeap(req.body)
	        res.send(message)
	    });
	    
	    app.listen(config.port, function () {
	        console.log(`Listening http://localhost:${config.port}`)
	    });
	    
	```

* **Jes√∫s Miguel Quinto Teran** (1)

	
	Reto:
	``` 
	    const express = require('express');
	    const app = express();
	    
	    const HOST = 'localhost'
	    const PORT = 8000;
	    
	    functionisValidYear (year) {
	        if (typeof(year) !== "number")
	            returnfalse;
	        returntrue;
	    };
	    
	    functionisLeapYear (year) {
	        return year % 400 === 0 || (year % 100 !== 0 && year % 4 === 0);
	    }
	    
	    app.get('/', (req, res) => {
	        const year = Number(req.query.year) || null;
	        if (!isValidYear(year))
	            return res.send(`El a√±o: ${year}, no es valido`);
	            
	        if (isLeapYear(year))
	            return res.send('A√±o Bisiesto');
	        return res.send('A√±o no Bisiesto');
	    });
	    
	    app.listen(PORT, HOST, () => {
	        console.log(`listen in: http://${HOST}:${PORT}`);
	    });
	    
	```

* **AlexGarrixen** (1)

	```
	    functionisLeapYear(year) {
	      if (Number(year) % 4 === 0) returntrue;
	      returnfalse;
	    }
	    
	    app.get('/:year', function(req, res, next) {
	      const { year } = req.params;
	      try {
	        const isLeapYear_ = isLeapYear(year) ? `El a√±o ${year} es bisiesto` :  `El a√±o ${year} no es bisiesto`;
	        res.status(200).json({
	          response: isLeapYear_
	        })
	      } catch(e) {
	        next(e)
	      }
	    })
	    
	```

* **Erick Leao P√©rez Medina** (1)

	
	Mi soluci√≥n al reto:
	``` 
	    const leapYear = year => {
	      return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0
	        ? `El a√±o ${year} es bisiesto.`
	        : `El a√±o ${year} NO es bisiesto.`;
	    };
	    
	    app.get('/bisiesto/:year', function(req, res) {
	      const { year } = req.params;
	      res.send(leapYear(year));
	    });
	    
	```

* **AMILKAR CRUZ HERBAS** (1)

	
	Aqui mi solucion al reto:
	``` 
	    const bisiesto = year => {
	      if (year % 4 === 0 && (year % 100 !== 0 || year % 400 === 0)) {
	        return `El a√±o ${year} es Bisiesto`;
	      } else {
	        return `NO ES UN A√ëO BISIESTO`;
	      }
	    };
	    app.get('/bisiesto/:year', function(req, res) {
	      let year = req.params.year;
	      let msg = bisiesto(year);
	    
	      res.send(msg);
	    });
	    
	```

* **JESUS ALMIRCAR CASTELLANOS** (1)

	```
	    const express = require('express');
	    
	    const app = express();
	    
	    const { config } = require('./config/index');
	    
	    
	    const bisiesto = (year) => {
	        aux=0;
	        if (year%4 ===0){
	            aux=-1;
	            if(year%100 ===0){
	                aux=0;
	            if (year%400 === 0){
	                aux=-1;
	            }
	            }else{
	                aux=-1;
	            }
	        }else{
	            aux=0;
	        }
	       
	        if (aux===0){
	            year=0;
	        }if (aux===-1) {
	            year=-1
	        }
	        return (year === -1) ?'El a√±o es bisiesto':'El a√±o no es bisiesto';
	      }
	      
	      app.get('/bisiesto/:year', function(req, res) {
	        let message = bisiesto(req.params.year);
	        res.send(message);
	      });
	    
	    app.get('/json', (req, res) => {
	        res.json({hello: 'world'});
	    });
	    
	    app.listen(config.port, function (){
	        console.log(`Listening http://localhost:${config.port}`);
	    });```
	    
	```

* **Manuel Silva Guevara** (1)

	
	Aqu√≠ el reto:
	``` 
	    const express = require('express');
	    const app = express();
	    
	    const isLeap = (year) => {
	      return (year % 4 == 0) ?'El a√±o es bisiesto':'El a√±o no es bisiesto'
	    }
	    
	    app.get('/isLeap/:year', function(req, res) {
	      let message = isLeap(req.params.year);
	      res.send(message);
	    });```
	    
	```

* **Luis Daniel Caraballo** (1)

	
	Reto:
	
	![Screenshot_1.png](https://static.platzi.com/media/user_upload/Screenshot_1-d9f02a8e-f8ff-47dc-836d-279c7c2c268d.jpg)

* **David Behar** (1)

	
	Anexo mi soluci√≥n
	``` 
	    app.get('/year/:year', (req, res) => {
	      const { year } = req.params;
	      const isFourDivisible = !(year % 4);
	      const isHundredDivisible = !(year % 100);
	      const isFourHundredDivisible = !(year % 400);
	    
	      if (isFourDivisible && !isHundredDivisible || isFourHundredDivisible) {
	        res.send(`El a√±o ${year} es bisiesto`);
	      } else {
	        res.send(`El a√±o ${year} no es bisiesto`);
	      }
	    });
	    
	```

* **Javier Fuentes Mora** (1)

	
	Aqu√≠ una forma mas corta de hacer el reto
	``` 
	    app.get('/year/:year2', (req, res) => {
	      const leapyear = year => {
	        return (year % 4 == 0 && year % 100 != 0) || year % 400 == 0;
	      };
	      res.send(leapyear(req.params.year2)?'El a√±o es bisiesto':'El a√±o no es bisiesto');
	    });```
	    
	    
	```

* **AryRosvall** (1)

	```
	    app.get('/:year', function(req, res){
	      const year = req.params.year;
	    
	     let isLeapYear=`El a√±o ${year} no es bisiesto`;
	    
	      if((year % 4 === 0)&&((year % 100 !== 0)||(year % 400 === 0))){
	        isLeapYear = `El a√±o ${year} es bisiesto`;
	      }
	      res.send(isLeapYear);
	    });```
	    
	```

* **jasanhdz** (1)

	
	Mi reto üòÑ
	``` 
	    const express = require('express');
	    const app = express();
	    
	    // Cuando hagamos un request de tipo GET 
	    app.get('/', (req, res) => {
	      // Lo que vamos a enviar a pantalla
	      res.send("Envianos el a√±o en la url escribiendo '/a√±o'");
	    })
	    
	    app.get('/:year', (req, res) => {
	      const year = req.params.year;
	      if (year % 4 === 0 && year % 100 !== 0) {
	        res.send(`El ${year} Es bisiesto`);
	      } else {
	        res.send(`Lo siento el a√±o ${year} no es bisiesto :(`);
	      }
	    })
	    
	    app.listen(2000, function () {
	      console.log('Litening http://localhost:2000');
	    })
	    
	```

* **Jeison Vargas** (1)

	
	Mi reto:
	``` 
	    const express = require('express');
	    const app = express();
	    
	    const { config } = require('./config/index');
	    
	    app.get('/:year', function(req, res) {
	      let year = req.params.year;
	      if (year % 400 === 0 || (year % 4 === 0 && year % 100 !== 0)) {
	        res.send(`The year ${year} is leap-year`);
	      } else {
	        res.send(`The year ${year} isn¬¥t leap-year`);
	      }
	    });
	    
	    app.listen(config.port, function() {
	      console.log(`Listening http://localhost:${config.port}`);
	    });
	    
	```

* **pabloverduzcos** (1)

	```
	    const express = require('express');
	    const app = express();
	    
	    app.get('/:year', (req, res) => {
	      const { year } = req.params;
	      
	      if(year % 4 === 0) {
	        res.status(200).send(`The year ${ year } is leap-year`);
	      } else {
	        res.status(500).send(`Not leap-year found.`);
	      }
	    });
	    
	    app.listen(3000, () => console.log('Server online');
	    
	```

* **Victor Martin Ortiz Palacio** (1)

	
	Challenge:
	``` 
	    app.get('/bisiesto/:year', (req, res) => {
	      res.send(
	        leapYear(req.params.year)
	          ? req.params.year + ' es bisiesto'
	          : req.params.year + ' no es bisiesto'
	      );
	    });
	    
	    function leapYear(year) {
	      return (year % 4 === 0 && year % 100 != 0) || year % 400 === 0 ? true : false;
	    }
	    
	```

* **Daniel Herrera** (1)

	```
	    // challenge
	    const express = require('express');
	    const app = express();
	    
	    const { config } = require('./config/index.js');
	    
	    app.get('/year/:year', (req, res) => { 
	        let year =  newDate(req.params.year).getUTCFullYear();
	        let leapYear = year % 4 == 0 ? res.send(`el a√±o ${year} es bisiesto`) : res.send(`el a√±o ${year} no es bisiesto`);
	        res.end()
	    })
	    
	    app.listen(config.port, () => {
	        console.log(`Listening http://localhost:${config.port}`);
	    });
	    
	```

* **eduardoluisgr** (1)

	
	npx mrm lint-staged

* **eduardoluisgr** (1)

	
	npm i -D nodemon eslint eslint-config-prettier eslint-plugin-prettier prettier

* **Alejandro Gonz√°lez Reyes** (1)

	
	Soluci√≥n al reto
	``` 
	    app.get('/biciesto/:year', function(req, res) {
	      constyear = req.params.year;
	      if ((year % 4 == 0 && year % 100 != 0) || year % 400 == 0) {
	        res.send(`El a√±o ${year} que ingres√≥ como par√°metro es biciesto`);
	      } else {
	        res.send(`El a√±o ${year} no es biciesto`);
	      }
	    });
	    
	```

* **ludwing_ra** (1)

	
	Reto:
	``` 
	    const express = require("express");
	    const app = express();
	    
	    const { config } = require("./config/index");
	    
	    app.use(express.json());
	    
	    app.get('/year/:year', (req, res) => {
	      var year = req.params.year;
	      if (year % 4 == 0 && year % 100 != 0 || year % 400 == 0) {
	        res.json({
	          message: `El a√±o ${year} es bisiesto`
	        })
	      } else {
	        res.json({
	          message: `El a√±o ${year} no es bisiesto`
	        })
	      }
	    });
	    
	    app.listen(config.port, () => {
	      console.log(`Listening http://localhost:${config.port}`);
	    });```
	    
	```

* **Rigo Antonio Galicia Barrera** (1)

	
	¬øEs recomendable utilizar arrow functions en epress?

	* **Sebastian Cardoso Castillo** (1)

		
		Vas a encontrar opiniones distintas. Cambia la forma de leer que a mi me parece mas simple.

* **Kevin Rodolfo cosio sanchez** (1)

	
	Reto:
	``` 
	    const express = require('express');
	    const app = express();
	    
	    const {config} = require('./config/index');
	    
	    app.get('/:year', (req, res) => {
	        let year = req.params.year;
	        if ((year % 4 == 0 && year % 100 != 0) || year % 400 == 0) {
	            res.send('Es bisiesto')
	    
	        }else {
	            res.send('No es bisiesto')
	    
	        }
	    })
	    app.get('/json', (req, res) => {
	        res.json('hello people')
	    
	    })
	    
	    app.listen(config.port, () => {
	        console.log(`Listening http://localhost:${config.port}`)
	    })```
	    
	```

* **mafevito** (1)
¬øQu√© significa formatear el c√≥digo? Aun no entiendo el uso de Prettier

	* **Kevin Javier Morales (Platzi)** (2)

		
		Formatear c√≥digo es hacerlo legible cuando la l√≠nea de c√≥digo super cierta cantidad de longitud y as√≠ hacerla m√°s agradable a la lectura.
		
		Ese es el trabajo de Prettier para hacerlo autom√°tico. Lo ir√°s entendiendo a medida que lo vayas usando.

* **Hebert de Le√≥n** (1)
¬øQu√© significa eso de quemar un puerto? ¬øCu√°l es el riesgo? ¬øAlguien me podr√≠a explicar? Por favor üò¶ ¬øHay alguna documentaci√≥n sobre eso?

	* **Manuel Ojeda** (4)

		
		Con quemar se refiere a poner el puerto directamente en el c√≥digo, por ejemplo:
		``` 
		    axios({
		    	url: 'http://localhost:3000/api/movies', 
		    	method: 'get'
		    })
		    
		```
		
		Esa parte de los **:3000** es e; puerto, lo adecuado ser√≠a que en un .env pongan el puerto
		``` 
		    PORT=3000
		    API_URL=http://localhost
		    
		```
		
		Por lo que si lo hacemos as√≠ desde express podemos:
		``` 
		    axios({
		    	url: `${process.env.API_URL}:${process.env.PORT}api/movies`, 
		    	method: 'get'
		    })
		    
		```

## 0180. Request y Response Objects

### Descripci√≥n:


El objeto `req` (Request) en Express representa el llamado HTTP y tiene diferentes propiedades del llamado, como la cadena de texto _query_ (Query params), los par√°metros de la URL (URL params), el cuerpo (Body), los encabezados (HTTP headers), etc.

Para acceder al `req` basta con acceder al primer par√°metro de nuestros router handlers (router middleware) √≥ middleware.

Como por ejemplo as√≠ lo hemos visto siempre:
``` 
    app.get("/user/:id", function(req, res) {
      res.send("user " + req.params.id);
    });
    
```

Pero tambi√©n funcionaria sin problemas:
``` 
    app.get("/user/:id", function(request, response) {
      response.send("user " + request.params.id);
    });
    
```

## Exploremos las propiedades m√°s importantes

### req.body

Contiene los pares de llave-valor de los datos enviados en el cuerpo (body) del llamado (request). Por defecto es `undefined` pero es establecido cuando se usa alg√∫n ‚Äúbody-parser‚Äù middleware como `body-parser` y `multer`.

En **Postman** cuando hacemos un _request_ y enviamos datos en la pesta√±a **Body** , estos middlewares son los que nos ayudan a entender el tipo de datos que vamos a recibir en el `req.body`.

Aqu√≠ podemos ver como se pueden usar estos middlwares para establecer el valor del `req.body`:
``` 
    const app = require("express")();
    const bodyParser = require("body-parser");
    const multer = require("multer");
    const upload = multer(); // Para datos tipo multipart/form-data
    
    app.use(bodyParser.json()); // Para datos tipo application/json
    app.use(bodyParser.urlencoded({ extended: true })); // Para datos tipo application/x-www-form-urlencoded
    
    app.post("/profile", upload.array(), function(req, res, next) {
      console.log(req.body);
      res.json(req.body);
    });
    
```

> M√°s informaci√≥n sobre los diferentes formatos que puede tener el body: <https://developer.mozilla.org/es/docs/Web/HTTP/Methods/POST>

### req.params

Esta propiedad contiene un objeto con las propiedades equivalentes a los par√°metros nombrados en la ruta. Por ejemplo, si tenemos una ruta de la forma `/user/:name` entonces la propiedad `name` est√° disponible como `req.params.name` y all√≠ podremos ver su valor. Supongamos que llamaramos a la ruta con `/user/glrodasz`, entonces el valor de `req.params.name` ser√≠a `glrodasz`. Este objeto por defecto tiene el valor de un objeto vac√≠o `{}`.
``` 
    // GET /user/glrodasz
    req.params.name;
    // => "glrodasz"
    
```

### req.query

Esta propiedad contiene un objeto con las propiedades equivalentes a las cadenas de texto _query_ de la ruta. Si no hay ninguna cadena de texto _query_ tendr√° como valor por defecto un objeto vac√≠o `{}`.
``` 
    req.query.q;
    // => "tobi ferret"
    
    // GET /shoes?order=desc&shoe[color]=blue&shoe[type]=converse
    req.query.order;
    // => "desc"
    
    req.query.shoe.color;
    // => "blue"
    
    req.query.shoe.type;
    // => "converse"
    
```

> M√°s informaci√≥n sobre los query strings en: <https://es.wikipedia.org/wiki/Query_string> y <https://tools.ietf.org/html/rfc3986#section-3.4>

# Response Object

El objeto `res` representa la respuesta HTTP que env√≠a una aplicaci√≥n en Express.

Para acceder al `res` basta con acceder al segundo par√°metro de nuestros _router handlers_ (router middleware) o _middleware_.

Como por ejemplo as√≠ lo hemos visto siempre:
``` 
    app.get("/user/:id", function(req, res) {
      res.send("user " + req.params.id);
    });
    
```

Pero tambi√©n funcionar√≠a sin problemas:
``` 
    app.get("/user/:id", function(request, response) {
      response.send("user " + request.params.id);
    });
    
```

## Exploremos los m√©todos m√°s comunes

### res.end()

Finaliza el proceso de respuesta. Este m√©todo viene realmente del _core_ de Node.js, espec√≠ficamente del m√©todo `response.end()` de `http.ServerResponse`.

Se usa para finalizar el _request_ r√°pidamente sin ning√∫n dato. Si necesitas enviar datos se debe usar `res.send()` y `res.json()`.
``` 
    res.end();
    res.status(404).end();
    
```

### res.json()

Env√≠a una respuesta JSON. Este m√©todo env√≠a una respuesta (con el content-type correcto) y convierte el par√°metro enviado a una cadena de texto JSON haciendo uso de `JSON.stringify()`.

El par√°metro puede ser cualquier tipo de JSON, incluido un objeto, un arreglo, una cadena de texto, un _boolean_ , n√∫mero, _null_ y tambi√©n puede ser usado para convertir otros valores a JSON.
``` 
    res.json(null);
    res.json({ user: "tobi" });
    res.status(500).json({ error: "message" });
    
```

### res.send()

Env√≠a una respuesta HTTP. El par√°metro `body` puede ser un objeto tipo _Buffer_ , una cadena de texto, un objeto, o un arreglo. Por ejemplo:
``` 
    res.send(Buffer.from("whoop"));
    res.send({ some: "json" });
    res.send("<p>some html</p>");
    res.status(404).send("Sorry, we cannot find that!");
    res.status(500).send({ error: "something blew up" });
    
```

### Comentarios:

* **Jes√∫s Miguel Quinto Teran** (5)

	
	Esta clase es realmente sencilla:
	
	El **request** trae todos los datos del cliente hacia el servidor (client => request => server).  
	El **response** se usa para cargar la respuesta que se devuelve al cliente (server => response => client)

* **Iraida Mercedes Barreto D√≠az** (4)

	
	Uy, yo creo que esta secci√≥n amerita una explicaci√≥n mejor. Creo que queda muy t√©cnico y es muy f√°cil perderse en esta explicaci√≥n. Adem√°s hablan de los middlware como si fuera un tema ya visto.

* **wilantury** (3)

	
	Estuve algunos videos adelante, y ahora repitiendo este contenido ya es mas claro todo.

	* **Juan Carlos Garc√≠a Esquivel** (1)

		
		yo igual y vaya que todo toma sentido ahora

* **Javier Fuentes Mora** (2)

	
	Muy mal que esto se ponga como texto y no en un video explic√°ndolo

	* **Rene Ismael Barrios Rojas** (3)

		
		La verdad si, sin √°nimo de ofender pero si es lectura la puedes hasta buscar en google, yo de igual manera preferir√≠a ver un video, pero en fin.

* **T-gold** (1)

	```
	    app.get("/ano/:date" , (req,res)=>{
	        const date = req.params.date;
	        if(date % 4 === 0){
	            return res.send("es biciesto")
	        }else{
	            res.send("no es biciesto")
	        }
	    })
	    
	    
	```

* **ocandoja** (1)

	
	genial!

* **carlosextra1** (1)

	```
	    const express = require('express');
	    const app = express();
	    const { config } = require('./config/index');
	    
	    app.get('/:amo', (req, res) => {
	        const amo = parseInt(req.params.amo);
	        if(amo){
	            if ((((amo % 4 == 0)
	                && (amo % 100 != 0))
	                || (amo % 400 == 0))
	            )
	                res.send(`El a√±o ${amo} es bisiesto!`)
	            else
	                res.send(`El a√±o ${req.params.amo} NO es bisiesto`);
	        }else{
	            res.send(`Dame un a√±o en la url en 4 digitos`);
	        }
	    });
	    
	    app.listen(config.port, () =>{
	        console.log(`Corriendo en http://localhost:${config.port}`)
	    })```
	    
	```

* **David Lara Chirinos** (1)

	
	Solo agregen el codigo al index y ejecutar en el navegado /bisieto/id(el anio)
	``` 
	    const express = require('express');
	    const app = express();
	    
	    const { config } = require('./config/index');
	    
	    app.get('/', function (req, res) {
	      res.send('Hello Word');
	    });
	    app.get('/bisieto/:id', function (req, res) {
	      //parametro de calculo bisieto
	      const isLeapYear = (year) => {
	        year = year instanceofDate ? year.getFullYear() : year;
	        return !(newDate(year, 1, 29).getMonth() - 1);
	      };
	      //Se le pasa id con req.params.id)
	      const IsBistiento = isLeapYear(parseInt(req.params.id));
	      
	      //ternario
	      const mensaje = IsBistiento
	        ? '<h1>es bisieto</h1>'
	        : '<h1>no es bisieto</h1>';
	      res.send(mensaje);
	    });
	    
	    app.get('/json', function (req, res) {
	      res.send({ hello: 'Hola' });
	    });
	    
	    app.listen(config.port, function () {
	      // eslint-disable-next-line no-console
	      console.log('Todo bien');
	    });
	    
	    
	```

* **nick** (1)

	
	Reto:
	``` 
	    const express = require('express');
	    
	    const app = express();
	    
	    const { config } = require('./config/index');
	    
	    app.get('/', (req, res) => {
	        res.send('Hello World');
	    });
	    
	    app.get('/json', (req, res) => {
	        res.json({hello: 'world'});
	    });
	    
	    app.get('/leap-year/:year', (req, res) => {
	        const year = parseInt(req.params.year);
	        const leapYear = (year) => {
	            return year % 4 === 0 && year % 100 !== 0 || year % 400 === 0;
	        }
	    
	        const isLeapYear = leapYear(year);
	        const message = isLeapYear ? 'Yes, it\'s a leap-year' : 'Nop, it\'s not a leap-year';
	    
	        res.send({isLeapYear: isLeapYear, year: year, message: message});
	    
	    })
	    
	    app.listen(config.port, () => {
	        console.log(`Listening in http://localhost:${config.port}`);
	    });
	    
	```

* **Armando Duarte Qui√±ones** (1)

	```
	    const express = require('express');
	    const app = express();
	    
	    functionbisiesto(year) {
	      const isLeap = !(newDate(year, 1, 29).getMonth() - 1)
	      if (isLeap) {
	        return'a√±o bisiesto'
	      }
	      return'a√±o no bisiesto'
	    }
	    
	    app.get('/params/:name', function (req, res) {
	      res.send(`El a√±o ${req.params.name} es un ${bisiesto(req.params.name)}`);
	    });
	    
	    app.listen('3001', function () {
	      console.log('Listening to port 3001');
	    });```
	    
	```

* **johannpino** (1)

	```
	    const express = require('express')
	    const app = express()
	    
	    const { config } = require('./config/index')
	    
	    app.get('/', (req, res) => {
	      res.send('Hello world')
	    })
	    
	    app.get('/json', (req, res) => {
	      res.json({hello: 'world'})
	    })
	    
	    app.get('/year/:year', (req, res) => {
	      const { year } = req.params
	      const leapYear =
	        (year % 4 === 0 && (year % 100 !== 0 || year % 400 == 0)) ?
	          "is leap-year" :
	          "is not leap-year"
	      res.send(`The ${year} ${leapYear} `)
	    } )
	    
	    app.listen(config.port, () => {
	      console.log(`listening http://localhost:${config.port}`)
	    })```
	    
	```

* **Miguel Angel Martelo Quiroz** (1)

	```
	    app.get('/bisiesto/:anio', (req, res) => {
	      let anio = req.params.anio;
	    
	      if (anio % 4 == 0 && anio % 100 != 0) {
	        res.send('El a√±o es bisiesto!');
	      } else {
	        res.send('El a√±o no es bisiesto :(');
	      }
	    });
	    
	```

* **Jose Gustavo Pacheco Sanchez** (1)

	```
	    const express = require('express');
	    const app = express();
	    
	    const { config } = require('./config/index');
	    
	    app.get('/', ( req, res ) => {
	       res.send('Hello World');
	    });
	    
	    
	    app.get('/json', ( req, res ) => {
	       res.json({ hello: 'world' });
	    });
	    
	    app.get('/bisiesto/:year', ( req, res ) => {
	       let year = req.params.year;
	    
	       let isBisiesto = ((year % 4 === 0) && (year % 100 !== 0 )) || (year % 400 === 0);
	    
	       isBisiesto ? res.send(`${ year } es bisiesto`) : res.send(`${ year } no es bisiesto`);
	       
	    });
	    
	    app.listen(config.port, () => {
	       console.log(`Listening http://localhost:${config.port}`);
	    });
	    
	```

* **ApolloAu** (1)

	
	mi version
	``` 
	    const express = require("express");
	    const app = express();
	    
	    const { config } = require("./config/index");
	    
	    app.get("/", function(req, res) {
	      res.send("hello world");
	    });
	    
	    app.get("/json", function(req, res) {
	      res.send({ hello: "world" });
	    });
	    
	    app.get("/bisiesto/:year", function(req, res) {
	      let year = req.params.year;
	      if (year % 4 == 0 && (year % 100 != 0 || year % 400 == 0)) {
	        res.send(`${req.params.year} is bisiesto`);
	      } else {
	        res.send(`${req.params.year} isn't bisiesto`);
	      }
	    });
	    
	    app.listen(config.port, function() {
	      console.log(`listening http://localhost:${config.port}`);
	    });
	    
	    
	```

* **Roso Pe√±aranda** (1)

	
	el c√≥digo del reto:
	``` 
	    const express = require('express');
	    const app = express();
	    
	    const { config } = require('./config/index');
	    
	    app.get('/:year', function(req, res) {
	      const anio = parseInt(req.params.year);
	      if (isNaN(anio)) {
	        res.send('Se necesita un n√∫mero valido');
	      }
	    
	      if (anio % 4 === 0 && (anio % 100 !== 0 || anio % 400 === 0)) {
	        res.send(`El anio: ${anio}, es bisiesto`);
	      } else {
	        res.send(`El anio: ${anio}, no es bisiesto`);
	      }
	    });
	    
	    app.listen(config.port, function() {
	      console.log(`Listening http://localhost:${config.port}`);
	    });
	    
	```

* **Jes√∫s Miguel Moreno Plasencia** (1)

	
	Este resumen me fue de mucha ayuda, al detallar cada uno de los m√©todos, que usan tanto el request y el response, hace que todo sea mas entendible, por el proceso que lleva el servidor.

* **Alejandro Gonz√°lez Reyes** (1)

	
	Es recomendable seguir usando ExpressJS o un Framework como Sails.JS

	* **David Sanchez** (2)

		
		Esta p√°gina muestran el estado de javascript tanto sus frameworks y librerias en front como en back en una muestra al rededor de 20,000 desarrolladores en javascript en diferentes cortes transversales, donde puedes ver que continua siendo bastante recomendable utilizar express ya que sigue siendo bastate utilizado, puede servirte para decidir. saludos  
		<https://2018.stateofjs.com/back-end-frameworks/overview/>

# Aprende a crear un API con REST

## 0190. Anatom√≠a de una API Restful

### Descripci√≥n:


**REST (Representational State Transfer)** es un estilo de arquitectura para construir web services, no es un est√°ndar pero si una especificaci√≥n muy usada.

Las peticiones HTTP van acompa√±adas de un ‚Äúverbo‚Äù que define el tipo de petici√≥n:

  * **GET**. Lectura de datos.
  * **PUT**. Reemplazar datos.
  * **PATCH**. Actualizar datos en un recurso espec√≠fico.
  * **POST**. Creaci√≥n de datos.
  * **DELETE**. Eliminaci√≥n de datos.



No es recomendable habilitar un endpoint de tipo PUT y DELETE para toda nuestra colecci√≥n de datos, s√≥lo hacerlos para recursos espec√≠ficos, ya que no queremos que por error se puedan borrar todos nuestros datos.

### Links:

* [Postman | API Development Environment](https://www.getpostman.com/)

* [
	The Best APIs are Built with Swagger Tools | Swagger
](https://swagger.io/)

### Comentarios:

* **Rene Ismael Barrios Rojas** (4)

	
	Delete jam√°s me ha tocado usarlo, o al menos a mi que me ha tocado manejar grandes cantidades de datos, al eliminar un dato se pierde la integridad de la DB, lo que se hace es hacer un borrado l√≥gico adem√°s de mantener la relaci√≥n en la auditor√≠a.

	* **Abraham Gonzalez** (2)

		
		Buen punto, a veces es mejor colocar un IsActive para que solo ‚Äúse oculte‚Äù (del lado de la l√≥gica) , aunque se puede hacer borrado y no da√±ar las relaciones, recuerdas en ON DELETE CASCADE para sql.  
		Saludos

	* **Rene Ismael Barrios Rojas** (1)

		
		Bueno eso si, realmente no es mi fuerte el back end jaja pero si tienes mucha raz√≥n. üòÉ

* **wilantury** (3)

	
	CRUD: Create - Read- Update - Delete

	* **carlosextra1** (1)

		
		CORRECTO!

* **Ricardo Lugo Recillas** (3)

	
	REST = representational state transfer.

* **Enrique Alexis Lopez Araujo** (2)
Podrian compartir el material del curso los slides?

	* **Kevin Javier Morales (Platzi)** (2)

		
		Por ahora este tipo de slide no se est√°n compartiendo, lo lamentamos üò¶

* **carlosextra1** (1)

	
	Qu√© es REST? OJO ESTO ES UN MARCADOR

* **Ivan Yovera** (1)

	
	no me queda muy claro por qu√© no aplica POST para /api/movies/:id
	
	alguien me ayuda por favor?

	* **Gabriel De Andrade (Platzi)** (3)

		
		Porque cuando est√°s haciendo Post es para crear una nueva movie, si esta movie no est√° creada no tienes un id porqu este id se genera de manera sistematizada en el backend para asegurar que no se repita üòÑ

* **Sebastian Cardoso Castillo** (1)

	
	Ese Delete movies da miedo definirlo.

* **Alejandro Gonz√°lez Reyes** (1)
Put y patch se pueden usar de forma indiferente o aplica para casos especiales, ya que en la mayor√≠a de la literatura hacen uso de ambos ...

	* **Erik Ochoa (Platzi)** (2)

		
		Ambos sirven para actualizar un recurso, pero su principal diferencia es la forma en la que el servidor procesa la entidad adjunta que enviamos para ser modificada.
		
		Con **PUT** tenemos que enviar la versi√≥n modificada completa de la entidad, as√≠ s√≥lo cambiemos un dato, esto consume mayor ancho de banda. En cambio con **PATCH** s√≥lo enviamos los par√°metros espec√≠ficos que deseamos actualizar.

## 0200. Estructura de una pel√≠cula con Moockaru

### Descripci√≥n:


 _Mockaroo_ * es un servicio que nos permite crear datos simulados a partir de una estructura, por ejemplo para generar la estructura de nuestra pel√≠cula:
``` 
    {
        id: 'd2a4a062-d256-41bb-b1b2-9d915af6b75e',
        title: 'Notti bianche, Le (White Nights)',
        year: 2019,
        cover: 'http://dummyimage.com/800x600.png/ff4444/ffffff',
        description:
          'In hac habitasse platea dictumst. Etiam faucibus cursus urna. Ut tellus.',
        duration: 66,
        contentRating: 'G',
        source: 'https://ovh.net/semper/rutrum/nulla/nunc.jsp',
        tags: [
          'Action|Adventure',
          'Action|Adventure|Thriller',
          'Horror|Western',
          'Horror|Thriller',
          'Comedy|Romance|Sci-Fi',
          'Adventure|Animation|Children|Comedy|Fantasy',
          'Drama'
        ]
      }
    
```

Lo que podemos hacer en Mockaroo es seleccionar la siguiente estructura:

![mockaroo.png](https://static.platzi.com/media/user_upload/mockaroo-8d9bd89a-4f2d-4b04-8031-54910b472776.jpg)

Luego seleccionamos el n√∫mero de filas (rows) que queremos generar y elegimos el formato, en este caso ser√° de tipo JSON. Podemos hacer clic en _preview_ para ver c√≥mo queda y finalmente para descargar los datos hacemos clic en **Download Data**.

![mockaroo-preview.png](https://static.platzi.com/media/user_upload/mockaroo-preview-e4d32e88-7c2b-4fa0-a4bb-7290135ae53c.jpg)

### Comentarios:

* **carlosdummy14** (10)

	
	Este es uno de los momento WoW cuando se toma un curso en platzi‚Ä¶ =)

* **JESUS ALMIRCAR CASTELLANOS** (8)

	
	Y yo que lo estaba haciendo a mano

* **Percy Tejada Donayre** (6)

	
	Les comparto el link : <https://mockaroo.com/>

* **Cmendi** (4)

	
	En el t√≠tulo dice ‚ÄúMoockaru‚Äù.

	* **Andrea M√©ndez D√≠az** (2)

		
		<https://mockaroo.com/>

* **David Behar** (4)

	
	√âsto es lo que export√©
	``` 
	    [{"id":"60be5e14-3396-4ab8-ae5b-2906fde9f2cb","title":"Armless","year":1997,"cover":"http://dummyimage.com/145x171.bmp/5fa2dd/ffffff","description":"In hac habitasse platea dictumst. Etiam faucibus cursus urna. Ut tellus.\n\nNulla ut erat id mauris vulputate elementum. Nullam varius. Nulla facilisi.\n\nCras non velit nec nisi vulputate nonummy. Maecenas tincidunt lacus at velit. Vivamus vel nulla eget eros elementum pellentesque.","duration":1893,"contentRating":"G","source":"https://oracle.com/quis/tortor/id/nulla/ultrices/aliquet/maecenas.js?phasellus=in&sit=lectus&amet=pellentesque&erat=at&nulla=nulla&tempus=suspendisse&vivamus=potenti&in=cras&felis=in&eu=purus&sapien=eu&cursus=magna&vestibulum=vulputate&proin=luctus&eu=cum&mi=sociis&nulla=natoque&ac=penatibus&enim=et&in=magnis&tempor=dis&turpis=parturient&nec=montes&euismod=nascetur&scelerisque=ridiculus&quam=mus&turpis=vivamus&adipiscing=vestibulum&lorem=sagittis&vitae=sapien&mattis=cum&nibh=sociis&ligula=natoque&nec=penatibus&sem=et&duis=magnis&aliquam=dis&convallis=parturient&nunc=montes&proin=nascetur&at=ridiculus&turpis=mus&a=etiam&pede=vel&posuere=augue&nonummy=vestibulum&integer=rutrum&non=rutrum&velit=neque&donec=aenean&diam=auctor&neque=gravida&vestibulum=sem&eget=praesent&vulputate=id&ut=massa&ultrices=id&vel=nisl&augue=venenatis&vestibulum=lacinia&ante=aenean&ipsum=sit&primis=amet&in=justo&faucibus=morbi&orci=ut&luctus=odio&et=cras&ultrices=mi&posuere=pede&cubilia=malesuada&curae=in&donec=imperdiet&pharetra=et&magna=commodo&vestibulum=vulputate&aliquet=justo&ultrices=in&erat=blandit&tortor=ultrices&sollicitudin=enim&mi=lorem&sit=ipsum&amet=dolor&lobortis=sit&sapien=amet&sapien=consectetuer","tags":["Comedy|Drama|Romance","Drama|Film-Noir|Thriller","Documentary","Documentary","Comedy|Fantasy"]},
	    {"id":"d5ca8f28-1809-4dd9-9b53-562991610b69","title":"Pearl Jam Twenty","year":1985,"cover":"http://dummyimage.com/168x119.jpg/5fa2dd/ffffff","description":"Morbi porttitor lorem id ligula. Suspendisse ornare consequat lectus. In est risus, auctor sed, tristique in, tempus sit amet, sem.","duration":1900,"contentRating":"NC-17","source":"https://bandcamp.com/ut/dolor/morbi/vel/lectus/in/quam.html?bibendum=tristique&morbi=est&non=et&quam=tempus&nec=semper&dui=est&luctus=quam&rutrum=pharetra&nulla=magna&tellus=ac&in=consequat&sagittis=metus&dui=sapien&vel=ut&nisl=nunc&duis=vestibulum&ac=ante&nibh=ipsum&fusce=primis&lacus=in&purus=faucibus&aliquet=orci&at=luctus&feugiat=et&non=ultrices&pretium=posuere&quis=cubilia&lectus=curae&suspendisse=mauris&potenti=viverra&in=diam&eleifend=vitae&quam=quam&a=suspendisse&odio=potenti&in=nullam&hac=porttitor&habitasse=lacus&platea=at&dictumst=turpis&maecenas=donec&ut=posuere&massa=metus&quis=vitae&augue=ipsum&luctus=aliquam&tincidunt=non&nulla=mauris&mollis=morbi&molestie=non","tags":["Comedy|Horror","Comedy|Drama|Romance","Drama","Comedy"]},
	    
	    {"id":"eb5479ef-e314-4676-ab80-fff407398f25","title":"Pooh's Heffalump Movie","year":2009,"cover":"http://dummyimage.com/154x151.jpg/5fa2dd/ffffff","description":"Morbi non lectus. Aliquam sit amet diam in magna bibendum imperdiet. Nullam orci pede, venenatis non, sodales sed, tincidunt eu, felis.\n\nFusce posuere felis sed lacus. Morbi sem mauris, laoreet ut, rhoncus aliquet, pulvinar sed, nisl. Nunc rhoncus dui vel sem.","duration":2034,"contentRating":"PG","source":"http://deliciousdays.com/potenti/cras/in/purus.png?mi=volutpat&sit=erat&amet=quisque&lobortis=erat&sapien=eros&sapien=viverra&non=eget&mi=congue&integer=eget&ac=semper&neque=rutrum&duis=nulla&bibendum=nunc&morbi=purus&non=phasellus&quam=in&nec=felis&dui=donec&luctus=semper&rutrum=sapien&nulla=a&tellus=libero&in=nam&sagittis=dui&dui=proin&vel=leo&nisl=odio&duis=porttitor&ac=id&nibh=consequat&fusce=in&lacus=consequat&purus=ut&aliquet=nulla&at=sed&feugiat=accumsan&non=felis&pretium=ut","tags":["Comedy|Musical|Romance","Adventure","Documentary"]},
	    
	    {"id":"8cbf407f-b1ff-4015-9039-257ca0932278","title":"Another Chance","year":2002,"cover":"http://dummyimage.com/221x169.bmp/cc0000/ffffff","description":"Proin interdum mauris non ligula pellentesque ultrices. Phasellus id sapien in sapien iaculis congue. Vivamus metus arcu, adipiscing molestie, hendrerit at, vulputate vitae, nisl.\n\nAenean lectus. Pellentesque eget nunc. Donec quis orci eget orci vehicula condimentum.\n\nCurabitur in libero ut massa volutpat convallis. Morbi odio odio, elementum eu, interdum eu, tincidunt in, leo. Maecenas pulvinar lobortis est.","duration":2013,"contentRating":"G","source":"http://jimdo.com/justo/maecenas/rhoncus/aliquam/lacus.aspx?semper=nunc&interdum=purus&mauris=phasellus&ullamcorper=in&purus=felis&sit=donec&amet=semper&nulla=sapien&quisque=a&arcu=libero&libero=nam&rutrum=dui&ac=proin&lobortis=leo","tags":["Action|Crime|Drama"]},
	    
	    {"id":"ee9a645f-b00a-4fd5-becc-5fb18f3feb68","title":"Black Christmas","year":2010,"cover":"http://dummyimage.com/240x138.jpg/5fa2dd/ffffff","description":"Proin interdum mauris non ligula pellentesque ultrices. Phasellus id sapien in sapien iaculis congue. Vivamus metus arcu, adipiscing molestie, hendrerit at, vulputate vitae, nisl.","duration":2037,"contentRating":"PG","source":"https://alexa.com/nec.jpg?curae=molestie&duis=hendrerit&faucibus=at&accumsan=vulputate&odio=vitae&curabitur=nisl&convallis=aenean&duis=lectus&consequat=pellentesque&dui=eget&nec=nunc&nisi=donec&volutpat=quis&eleifend=orci&donec=eget&ut=orci&dolor=vehicula&morbi=condimentum&vel=curabitur&lectus=in&in=libero&quam=ut&fringilla=massa&rhoncus=volutpat&mauris=convallis&enim=morbi&leo=odio&rhoncus=odio&sed=elementum&vestibulum=eu&sit=interdum&amet=eu&cursus=tincidunt&id=in&turpis=leo&integer=maecenas&aliquet=pulvinar&massa=lobortis&id=est&lobortis=phasellus&convallis=sit&tortor=amet&risus=erat&dapibus=nulla&augue=tempus&vel=vivamus&accumsan=in&tellus=felis&nisi=eu&eu=sapien&orci=cursus&mauris=vestibulum&lacinia=proin&sapien=eu&quis=mi&libero=nulla&nullam=ac&sit=enim&amet=in&turpis=tempor&elementum=turpis&ligula=nec&vehicula=euismod&consequat=scelerisque&morbi=quam&a=turpis&ipsum=adipiscing&integer=lorem&a=vitae&nibh=mattis","tags":["Action|Adventure|Drama|Sci-Fi","Drama|Thriller","Action|Sci-Fi"]},
	    
	    {"id":"d76994c3-3c80-4082-898f-e60646cd2866","title":"Seaside (Bord de Mer)","year":2003,"cover":"http://dummyimage.com/243x228.jpg/dddddd/000000","description":"Donec diam neque, vestibulum eget, vulputate ut, ultrices vel, augue. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Donec pharetra, magna vestibulum aliquet ultrices, erat tortor sollicitudin mi, sit amet lobortis sapien sapien non mi. Integer ac neque.\n\nDuis bibendum. Morbi non quam nec dui luctus rutrum. Nulla tellus.","duration":1941,"contentRating":"R","source":"https://exblog.jp/curae/mauris/viverra/diam/vitae.js?metus=dui&sapien=vel&ut=sem&nunc=sed&vestibulum=sagittis&ante=nam&ipsum=congue&primis=risus&in=semper&faucibus=porta&orci=volutpat&luctus=quam&et=pede&ultrices=lobortis&posuere=ligula&cubilia=sit&curae=amet&mauris=eleifend&viverra=pede&diam=libero&vitae=quis&quam=orci&suspendisse=nullam&potenti=molestie&nullam=nibh&porttitor=in&lacus=lectus&at=pellentesque&turpis=at&donec=nulla&posuere=suspendisse&metus=potenti&vitae=cras&ipsum=in&aliquam=purus&non=eu&mauris=magna&morbi=vulputate&non=luctus&lectus=cum&aliquam=sociis&sit=natoque&amet=penatibus&diam=et&in=magnis&magna=dis&bibendum=parturient&imperdiet=montes&nullam=nascetur&orci=ridiculus&pede=mus&venenatis=vivamus&non=vestibulum&sodales=sagittis&sed=sapien&tincidunt=cum&eu=sociis&felis=natoque&fusce=penatibus&posuere=et&felis=magnis&sed=dis&lacus=parturient&morbi=montes&sem=nascetur&mauris=ridiculus&laoreet=mus&ut=etiam&rhoncus=vel&aliquet=augue&pulvinar=vestibulum&sed=rutrum&nisl=rutrum&nunc=neque&rhoncus=aenean&dui=auctor&vel=gravida&sem=sem&sed=praesent&sagittis=id&nam=massa","tags":["Drama","Documentary","Drama|War"]},
	    
	    {"id":"a2450287-4e6e-4bc2-ba8f-1043c6b49b2a","title":"Fortune, The","year":2001,"cover":"http://dummyimage.com/132x157.bmp/dddddd/000000","description":"Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Vivamus vestibulum sagittis sapien. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus.\n\nEtiam vel augue. Vestibulum rutrum rutrum neque. Aenean auctor gravida sem.","duration":2059,"contentRating":"PG","source":"http://virginia.edu/a.html?cubilia=ornare&curae=imperdiet&donec=sapien&pharetra=urna&magna=pretium&vestibulum=nisl&aliquet=ut&ultrices=volutpat&erat=sapien&tortor=arcu&sollicitudin=sed&mi=augue&sit=aliquam&amet=erat&lobortis=volutpat&sapien=in&sapien=congue&non=etiam&mi=justo&integer=etiam&ac=pretium&neque=iaculis&duis=justo&bibendum=in&morbi=hac&non=habitasse&quam=platea&nec=dictumst&dui=etiam&luctus=faucibus&rutrum=cursus&nulla=urna&tellus=ut&in=tellus&sagittis=nulla&dui=ut&vel=erat&nisl=id&duis=mauris&ac=vulputate","tags":["Drama|Romance","Adventure|Drama"]},
	     
	    {"id":"06735b51-fb4f-428a-91cd-8ad8eeafa5bb","title":"Careful","year":2002,"cover":"http://dummyimage.com/166x142.bmp/ff4444/ffffff","description":"Cras mi pede, malesuada in, imperdiet et, commodo vulputate, justo. In blandit ultrices enim. Lorem ipsum dolor sit amet, consectetuer adipiscing elit.\n\nProin interdum mauris non ligula pellentesque ultrices. Phasellus id sapien in sapien iaculis congue. Vivamus metus arcu, adipiscing molestie, hendrerit at, vulputate vitae, nisl.\n\nAenean lectus. Pellentesque eget nunc. Donec quis orci eget orci vehicula condimentum.","duration":1978,"contentRating":"G","source":"https://shutterfly.com/lorem.jpg?maecenas=ut&rhoncus=odio&aliquam=cras&lacus=mi&morbi=pede&quis=malesuada&tortor=in&id=imperdiet&nulla=et&ultrices=commodo&aliquet=vulputate&maecenas=justo&leo=in&odio=blandit&condimentum=ultrices&id=enim&luctus=lorem&nec=ipsum&molestie=dolor&sed=sit&justo=amet&pellentesque=consectetuer&viverra=adipiscing&pede=elit&ac=proin&diam=interdum&cras=mauris&pellentesque=non","tags":["Animation","Horror|Mystery|Thriller","Drama"]},
	    
	    {"id":"f74c2e02-58dc-41b8-a383-e7efb66fd98c","title":"Burn","year":1996,"cover":"http://dummyimage.com/213x246.jpg/ff4444/ffffff","description":"Duis consequat dui nec nisi volutpat eleifend. Donec ut dolor. Morbi vel lectus in quam fringilla rhoncus.\n\nMauris enim leo, rhoncus sed, vestibulum sit amet, cursus id, turpis. Integer aliquet, massa id lobortis convallis, tortor risus dapibus augue, vel accumsan tellus nisi eu orci. Mauris lacinia sapien quis libero.\n\nNullam sit amet turpis elementum ligula vehicula consequat. Morbi a ipsum. Integer a nibh.","duration":2067,"contentRating":"PG-13","source":"https://dot.gov/sodales/scelerisque/mauris/sit.jpg?in=imperdiet&sapien=et&iaculis=commodo&congue=vulputate&vivamus=justo&metus=in&arcu=blandit&adipiscing=ultrices&molestie=enim&hendrerit=lorem&at=ipsum&vulputate=dolor&vitae=sit&nisl=amet&aenean=consectetuer&lectus=adipiscing&pellentesque=elit&eget=proin&nunc=interdum&donec=mauris&quis=non&orci=ligula&eget=pellentesque&orci=ultrices&vehicula=phasellus&condimentum=id&curabitur=sapien&in=in&libero=sapien&ut=iaculis&massa=congue&volutpat=vivamus&convallis=metus&morbi=arcu&odio=adipiscing&odio=molestie&elementum=hendrerit&eu=at&interdum=vulputate&eu=vitae&tincidunt=nisl&in=aenean&leo=lectus&maecenas=pellentesque&pulvinar=eget&lobortis=nunc&est=donec&phasellus=quis&sit=orci&amet=eget&erat=orci&nulla=vehicula&tempus=condimentum&vivamus=curabitur&in=in&felis=libero&eu=ut&sapien=massa&cursus=volutpat&vestibulum=convallis&proin=morbi&eu=odio&mi=odio&nulla=elementum&ac=eu&enim=interdum&in=eu&tempor=tincidunt&turpis=in&nec=leo&euismod=maecenas&scelerisque=pulvinar&quam=lobortis&turpis=est&adipiscing=phasellus&lorem=sit&vitae=amet","tags":["Horror"]},
	    
	    {"id":"7747ce08-5aa7-4247-bed0-2b83baf0ac2f","title":"Court-Martial of Billy Mitchell, The","year":2012,"cover":"http://dummyimage.com/143x233.bmp/ff4444/ffffff","description":"Duis bibendum. Morbi non quam nec dui luctus rutrum. Nulla tellus.\n\nIn sagittis dui vel nisl. Duis ac nibh. Fusce lacus purus, aliquet at, feugiat non, pretium quis, lectus.","duration":2048,"contentRating":"G","source":"http://phpbb.com/sed.js?venenatis=curabitur&non=convallis&sodales=duis&sed=consequat&tincidunt=dui&eu=nec&felis=nisi&fusce=volutpat&posuere=eleifend&felis=donec&sed=ut&lacus=dolor&morbi=morbi&sem=vel&mauris=lectus&laoreet=in&ut=quam&rhoncus=fringilla&aliquet=rhoncus&pulvinar=mauris&sed=enim&nisl=leo&nunc=rhoncus&rhoncus=sed&dui=vestibulum&vel=sit&sem=amet&sed=cursus&sagittis=id&nam=turpis&congue=integer&risus=aliquet&semper=massa&porta=id&volutpat=lobortis&quam=convallis&pede=tortor&lobortis=risus&ligula=dapibus&sit=augue&amet=vel&eleifend=accumsan&pede=tellus&libero=nisi&quis=eu&orci=orci&nullam=mauris&molestie=lacinia&nibh=sapien&in=quis&lectus=libero&pellentesque=nullam&at=sit&nulla=amet&suspendisse=turpis&potenti=elementum&cras=ligula&in=vehicula&purus=consequat&eu=morbi&magna=a&vulputate=ipsum&luctus=integer&cum=a&sociis=nibh","tags":["Crime|Drama"]}]
	    
	```

	* **Abraham Gonzalez** (2)

		
		Gracias es super util

	* **Enric Vallribera** (2)

		
		muchas gracias

* **Alejandro Gonz√°lez Reyes** (4)

	
	Excelente recurso, ahora mis desarrollos ser√°n un poco m√°s r√°pidos

* **David Valecillo** (3)

	
	se acaba de convertir en una herramienta indispensable para mi‚Ä¶ Amor a primera vista.!

* **diego-serrano** (2)

	
	Demasiado bueno üòÉ

* **XXVSebastianVXX** (2)

	
	Excelente la herramienta, para no crear datos a ‚Äúmano‚Äù.

* **Iair Poloniecki** (2)

	
	Ahh pero esto est√° genial

* **carlosextra1** (1)

	
	Woo enserio que esta herramienta es buena y me ayudar√° mucho en el futuro!!

* **PaoloTorregrosa** (1)

	
	Buen√≠simo para aprender a usar bases de datos proximamente

* **Wilson Marino Pablo Mendez** (1)

	
	Que Genial!!

* **wilantury** (1)

	
	Excelente herramienta.

* **Sebastian Cardoso Castillo** (1)

	
	Hey que bueno que exista esto! La voy a usar.

## 0210. Implementando un CRUD en Express.js

### Descripci√≥n:


Las siglas CRUD vienen de las palabras en ingl√©s:

  * Create - crear
  * Read - leer
  * Update - actualizar
  * Delete - eliminar



### Comentarios:

* **pabloverduzcos** (10)

	
	Dejare esto por aqui: [HTTP Cats](https://http.cat) üòÇ.

	* **Juan Carlos Garc√≠a Esquivel** (2)

		
		üòÇ

	* **Juan Jos√© Vega Quintero** (2)

		
		crack xd

* **Erik Ricardo S√°nchez P√©rez** (9)

	
	Si quieren saber acerca de cuando se debe aplicar cada c√≥digo http hay un diagrama enorme. Siempre es √∫til tenerlo a la mano si no sabes que c√≥digo mandar dependiendo la situaci√≥n üïµÔ∏è‚Äç‚ôÇÔ∏è
	
	<https://github.com/for-GET/http-decision-diagram>

* **beaps** (7)

	
	C√≥digos de estado de respuesta HTTP:  
	<https://developer.mozilla.org/es/docs/Web/HTTP/Status>

* **Rigo Antonio Galicia Barrera** (4)

	
	¬øEs recomendable utilizar arrow functions en node?

	* **Juan David Castro (Platzi)** (3)

		
		Es igual de recomendable que en JS del navegador. Es completamente de gustos. Resuelven el mismo problema. üòâ

* **daniel-zurita** (3)

	
	movies.js
	``` 
	    const moviesMock = [
	      {
	        id: 'd2a4a062-d256-41bb-b1b2-9d915af6b75e',
	        title: 'Notti bianche, Le (White Nights)',
	        year: 2019,
	        cover: 'http://dummyimage.com/800x600.png/ff4444/ffffff',
	        description:
	          'In hac habitasse platea dictumst. Etiam faucibus cursus urna. Ut tellus.',
	        duration: 66,
	        contentRating: 'G',
	        source: 'https://ovh.net/semper/rutrum/nulla/nunc.jsp',
	        tags: [
	          'Action|Adventure',
	          'Action|Adventure|Thriller',
	          'Horror|Western',
	          'Horror|Thriller',
	          'Comedy|Romance|Sci-Fi',
	          'Adventure|Animation|Children|Comedy|Fantasy',
	          'Drama'
	        ]
	      },
	      {
	        id: '3f951b6d-03fa-4fb0-a7a1-188c0abe9e06',
	        title: "King Solomon's Mines",
	        year: 2019,
	        cover: 'http://dummyimage.com/800x600.png/dddddd/000000',
	        description:
	          'Integer tincidunt ante vel ipsum. Praesent blandit lacinia erat. Vestibulum sed magna at nunc commodo placerat.\n\nPraesent blandit. Nam nulla. Integer pede justo, lacinia eget, tincidunt eget, tempus vel, pede.\n\nMorbi porttitor lorem id ligula. Suspendisse ornare consequat lectus. In est risus, auctor sed, tristique in, tempus sit amet, sem.',
	        duration: 77,
	        contentRating: 'NC-17',
	        source:
	          'https://multiply.com/dui/proin/leo/odio/porttitor/id/consequat.jsp',
	        tags: [
	          'Comedy',
	          'War',
	          'Drama|Horror',
	          'Comedy|Drama|Romance',
	          'Drama|Thriller',
	          'Comedy',
	          'Action|Drama|War',
	          'Drama'
	        ]
	      },
	      {
	        id: 'c030eed2-dad1-47f4-b660-9cfb7170eadb',
	        title: 'Inhuman Resources (Redd Inc.)',
	        year: 2018,
	        cover: 'http://dummyimage.com/800x600.png/ff4444/ffffff',
	        description:
	          'Curabiturin libero ut massa volutpat convallis. Morbi odio odio, elementum eu, interdum eu, tincidunt in, leo. Maecenas pulvinar lobortis est.\n\nPhasellus sit amet erat. Nulla tempus. Vivamus in felis eu sapien cursus vestibulum.\n\nProin eu mi. Nulla ac enim. In tempor, turpis nec euismod scelerisque, quam turpis adipiscing lorem, vitae mattis nibh ligula nec sem.',
	        duration: 142,
	        contentRating: 'PG',
	        source: 'http://odnoklassniki.ru/porta/volutpat/erat.jsp',
	        tags: ['Crime|Drama|Thriller']
	      },
	      {
	        id: 'c672ff92-c373-49f4-9c5b-f0151d304361',
	        title: 'Fortress',
	        year: 2019,
	        cover: 'http://dummyimage.com/800x600.png/cc0000/ffffff',
	        description:
	          'In sagittis dui vel nisl. Duis ac nibh. Fusce lacus purus, aliquet at, feugiat non, pretium quis, lectus.\n\nSuspendisse potenti. In eleifend quam a odio. In hac habitasse platea dictumst.',
	        duration: 172,
	        contentRating: 'PG',
	        source: 'https://un.org/tortor/id/nulla/ultrices/aliquet/maecenas.png',
	        tags: ['Drama', 'Drama|Mystery|Thriller', 'Drama|Thriller']
	      },
	      {
	        id: '5ec75811-1001-4612-9743-67296d90071a',
	        title: 'Transylmania',
	        year: 2018,
	        cover: 'http://dummyimage.com/800x600.png/ff4444/ffffff',
	        description:
	          'In quis justo. Maecenas rhoncus aliquam lacus. Morbi quis tortor id nulla ultrices aliquet.',
	        duration: 155,
	        contentRating: 'G',
	        source: 'http://pagesperso-orange.fr/varius/ut/blandit/non/interdum/in.js',
	        tags: [
	          'Crime|Drama|Mystery|Thriller',
	          'Crime|Drama|Mystery|Thriller',
	          'Comedy|Sci-Fi',
	          'Adventure|Comedy|Sci-Fi',
	          'Drama'
	        ]
	      },
	      {
	        id: '63d718f2-4e37-4090-ad57-dd2cf22393e6',
	        title: "Big Girls Don't Cry... They Get Even (Stepkids)",
	        year: 2018,
	        cover: 'http://dummyimage.com/800x600.png/ff4444/ffffff',
	        description:
	          'Cras non velit nec nisi vulputate nonummy. Maecenas tincidunt lacus at velit. Vivamus vel nulla eget eros elementum pellentesque.\n\nQuisque porta volutpat erat. Quisque erat eros, viverra eget, congue eget, semper rutrum, nulla. Nunc purus.\n\nPhasellus in felis. Donec semper sapien a libero. Nam dui.',
	        duration: 173,
	        contentRating: 'R',
	        source: 'https://nih.gov/erat/quisque/erat/eros.jpg',
	        tags: ['Action|Drama', 'Comedy']
	      },
	      {
	        id: 'e9093aaa-daf2-4e32-aa6b-c3d79d0d9120',
	        title: 'Amreeka',
	        year: 2018,
	        cover: 'http://dummyimage.com/800x600.png/ff4444/ffffff',
	        description:
	          'Vestibulum quam sapien, varius ut, blandit non, interdum in, ante. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia Curae; Duis faucibus accumsan odio. Curabitur convallis.',
	        duration: 115,
	        contentRating: 'R',
	        source: 'https://umich.edu/cursus/id/turpis/integer/aliquet.aspx',
	        tags: ['Comedy|Romance', 'Drama|Thriller', 'Animation|Children']
	      },
	      {
	        id: '94f4fa76-fcf9-4aa3-a18f-f54bb7d462bc',
	        title: 'Hollow Man',
	        year: 2018,
	        cover: 'http://dummyimage.com/800x600.png/ff4444/ffffff',
	        description:
	          'Aenean lectus. Pellentesque eget nunc. Donec quis orci eget orci vehicula condimentum.\n\nCurabitur in libero ut massa volutpat convallis. Morbi odio odio, elementum eu, interdum eu, tincidunt in, leo. Maecenas pulvinar lobortis est.\n\nPhasellus sit amet erat. Nulla tempus. Vivamus in felis eu sapien cursus vestibulum.',
	        duration: 158,
	        contentRating: 'NC-17',
	        source: 'https://psu.edu/duis/bibendum/morbi/non/quam.aspx',
	        tags: ['Drama', 'Thriller']
	      },
	      {
	        id: '9a2e5834-4eb5-4083-8c21-87fdfc0b3b52',
	        title: 'Hard Target',
	        year: 2018,
	        cover: 'http://dummyimage.com/800x600.png/dddddd/000000',
	        description:
	          'Praesent blandit. Nam nulla. Integer pede justo, lacinia eget, tincidunt eget, tempus vel, pede.\n\nMorbi porttitor lorem id ligula. Suspendisse ornare consequat lectus. In est risus, auctor sed, tristique in, tempus sit amet, sem.',
	        duration: 173,
	        contentRating: 'PG',
	        source: 'https://flavors.me/lorem/ipsum/dolor/sit.json',
	        tags: [
	          'Animation|Comedy',
	          'Documentary',
	          'Action|Fantasy|Horror',
	          'Thriller',
	          'Comedy|Crime',
	          'Drama'
	        ]
	      },
	      {
	        id: '11fff70c-c312-4791-b8b4-1a0665edd79e',
	        title: 'Siete minutos (Seven Minutes)',
	        year: 2019,
	        cover: 'http://dummyimage.com/800x600.png/5fa2dd/ffffff',
	        description:
	          'Vestibulum ac est lacinia nisi venenatis tristique. Fusce congue, diam id ornare imperdiet, sapien urna pretium nisl, ut volutpat sapien arcu sed augue. Aliquam erat volutpat.\n\nIn congue. Etiam justo. Etiam pretium iaculis justo.',
	        duration: 62,
	        contentRating: 'PG',
	        source:
	          'http://columbia.edu/eget/orci/vehicula/condimentum/curabitur/in/libero.html',
	        tags: ['Action|Adventure|Comedy|Drama|War', 'Animation', 'Drama']
	      }
	    ];
	    
	    module.exports = {
	      moviesMock
	    };
	    
	```

* **Percy Tejada Donayre** (3)

	
	Otra alternativa a Postman es Insomnia, muy similar a Postman.  
	Aqu√≠ les dejo el link: <https://insomnia.rest/download/>

* **Sofia Nupieri** (2)

	
	Buena clase, me gusta la organizacion de los archivos aunque es facil perderse al principio cuando no estas familiarizado con los terminos y las funcionalidades

* **Jes√∫s Miguel Quinto Teran** (2)

	
	Si no tienen Postman, igual pueden hacer la consulta GET en el navegador en: <http://localhost:3000/api/movies>

* **osw4ldev** (2)

	
	porque no se usa PUT y si patch? cual es la diferencia ?

	* **Steven Gonzalez** (5)

		
		Hola!  
		Ambos se utilizan para realizar UPDATE en la data, la diferencia es que con el PUT debes enviar todo el set de datos que conforman la entidad que quieres actualizar, aunque solo quieras modificar un valor de este, y con el PATCH puedes enviar √∫nicamente la el elemento que deseas modifcar.  
		Saludos!

* **Henry Carmenate** (2)

	
	Por alguna razon que no lo logro ver la promesa no esta funcionando!?
	``` 
	    const express = require('express');
	    
	    const { moviesMock } = require('../utils/mocks/movies');
	    
	    functionmoviesApi(app){
	        const router = express.Router();
	        app.use("/api/movies",router);
	        
	        router.get("/",asyncfunction(req, res,next){
	            try{
	                const movies = await Promise.resolve(moviesMock);
	                
	                res.status(200).json({
	                    data: movies,
	                    message: "Movies listed"
	                });
	               
	            } catch(err){
	                next(err);
	            }
	        });
	    }
	    
	    module.exports = moviesApi;
	    
	```

	* **pepitofriki** (1)

		
		Lograste resolverlo?, bueno te comento el ‚Äúasyncfunction‚Äù lo estas escribiendo junto y es separado ‚Äúasync function‚Äù

	* **Andrea M√©ndez D√≠az** (1)

		
		En tu c√≥digo, tienes tambi√©n junto el `function` y el que en este caso es -> nombre de la funci√≥n `moviesApi`
		``` 
		    functionmoviesApi(app){
		    
		```
		
		Eso est√° provocando que no sirva cuando lo exportas.

* **Alejandro Gonz√°lez Reyes** (2)

	
	Excelente, primero se trabaja con datos en crudo con proyecci√≥n a como los servir√≠a la base de datos.

* **rodhsoft** (2)
porque se usa promesa y no un emitter?, solo es duda dado que en las primeras clases se menciono que tiene m√°s ventajas

	* **glrodasz** (1)

		
		En el caso de Express la arquitectura esta orientada a callbacks y promesas, adem√°s que desde el modelo cliente servidor, la respuesta va en una sola direcci√≥n y no requiere que siempre se este escuchando.
		
		Si tuvieramos una arquitectura de suscripci√≥n como los Web Sotckets, tiene m√°s sentido usar Emitters.

* **carlosextra1** (1)

	
	Excelente clase!!

* **Chavez** (1)

	
	tengo un error:  
	ReferenceError: regeneratorRuntime is not defined

	* **Chavez** (1)

		
		alguien?

	* **Alvaro Garracini** (1)

		
		pudiste solucionarlo?

	* **SandroMartinez** (1)

		
		Ten√≠a el mismo problema, en mi caso utilizo babel, y pude solucionarlo instalando el siguiente plugin
		``` 
		    npm i -D @babel/plugin-transform-runtime 
		    
		```
		
		y agregando ‚Äú@babel/transform-runtime‚Äù, en plugins dentro de mi archivo .babelrc
		``` 
		    {
		      "presets": [
		        "@babel/preset-env",
		        "@babel/preset-react"
		      ],
		      "env": {
		        "development": {
		          "plugins": [
		            "@babel/transform-runtime",
		            "transform-class-properties",
		            "react-hot-loader/babel",
		            "babel-plugin-transform-object-assign"
		          ]
		        }
		        }
		      }
		      
		    
		```

* **Andres Roberto Coello Goyes** (1)

	```
	    const express = require('express');
	    const { moviesMock } = require('../utils/mocks/movies');
	    
	    functionmoviesApi(app) {
	        const router = express.Router();
	        app.use("/api/movies", router);
	    
	        router.get("/", asyncfunction(req , res, nex) {
	            try {
	                const movies = await Promise.resolve(moviesMock);
	                res.status(200).json({
	                    data: movies,
	                    message: 'movies listos'
	                });
	            } catch (error) {
	                nex(error);
	            }
	        });
	    }
	    
	    module.exports = moviesApi;
	    
	```
	
	funcionando

* **JUAN SILVA** (1)

	
	Script Index

* **Gianluca Ciccarelli** (1)
Buenas, por que el mock es un array de objetos y no un objeto de objetos?

	* **Ruben Padilla** (1)

		
		Esta lectura te puede ayudar: <https://medium.com/@zac_heisey/objects-vs-arrays-42601ff79421>

* **Eden Gomez Gress** (1)
buenas tardes companeros. Pregunta, Porque la function moviesApi recibe el app como parametro?

	* **Marco Antonio Benites Espinoza** (1)

		
		Hola estimado,  
		la razon es porque esta funcion moviesApi es invocada desde el index.js:
		``` 
		    moviesApi(app);
		    
		```
		
		La variable del servidor es:
		``` 
		    constapp = express();
		    
		```
		
		Con la finalidad de que en el archivo routes/movies.js pueda mapear los endpoints mediante la variable app ( const app = express() ) mediante el router ‚Äú/api/movies‚Äù, esta variable se le debe pasar como parametro en el metodo moviesApi:
		``` 
		    functionmoviesApi(app) {
		        ...
		        app.use("/api/movies", router);
		        ...
		    }
		    
		```

* **PaoloTorregrosa** (1)
La raz√≥n por la que es as√≠ncrono es para poder manejar varias peticiones dentro del servidor?

	* **Gabriel De Andrade (Platzi)** (1)

		
		Si, es para poder manejar peticiones de manera paralela sin bloquear el hilo principal de ejecuci√≥n üòÑ

* **wilantury** (1)
Hola, el siguiente c√≥digo : app.use("/api/movies", router); - le dice a router que la ruta a la que debe responder es ‚Äú/api/mov...

	* **Erik Ochoa (Platzi)** (2)

		
		No entiendo tu pregunta, esto no es un c√≥digo v√°lido:
		``` 
		    router.get("/", - ¬ø"/" === ‚Äú/api/movies‚Äù?
		    
		```
		
		Recuerda que puedes usar tres ‚Äúbackticks(```)‚Äù para dar formato de c√≥digo en la caja de comentarios o simplemente dar click en ‚Äúinsertar c√≥digo‚Äù.
		
		Danos m√°s detalle de tu pregunta para poderte ayudar.

* **Alejandro Gonz√°lez Reyes** (1)
El usar async/await en el ejercicio es por motivos did√°cticos?, Ya que un archivo que expone un arreglo en local no tiene sentido llamarl...

	* **Manuel Ojeda** (4)

		
		Efectivamente, es para fines pr√°cticos ya que en clases m√°s adelante se convierte esa funci√≥n a una promesa

## 0220. M√©todos idempotentes del CRUD

### Descripci√≥n:


### Links:

* [Postman - Google Drive](https://drive.google.com/drive/folders/1Latsb5hLuGS9XuLprGtbpgL3NLGnxh6O?usp=sharing)

### Comentarios:

* **Juan Carlos Garc√≠a Esquivel** (4)

	
	[Gitignore.io](https://www.gitignore.io/)

	* **Jes√∫s Miguel Quinto Teran** (2)

		
		Una gran herramienta.

	* **Juan Carlos Garc√≠a Esquivel** (1)

		
		Claro @Jesuskinto de mucha ayuda üòÉ

	* **predator0077** (1)

		
		Wooow excelente aporte, ni sabia que exist√≠a esa herramienta tan poderosa, Muchas Gracias üòÉ

* **David Behar** (4)

	
	As√≠ se ver√≠a el m√©todo del a√±o bisiesto en una ruta
	``` 
	    const express = require('express');
	    
	    functionyearApi(app) {
	      const router = express.Router();
	      app.use('/', router);
	      app.use(express.urlencoded({ extended: false }));
	      app.use(express.json());
	    
	      router.get('/year/:year', (req, res, next) => {
	        try {
	          const { year } = req.params;
	          const isFourDivisible = !(year % 4);
	          const isHundredDivisible = !(year % 100);
	          const isFourHundredDivisible = !(year % 400);
	    
	          if (isFourDivisible && !isHundredDivisible || isFourHundredDivisible) {
	            res.send(`El a√±o ${year} es bisiesto`);
	          } else {
	            res.send(`El a√±o ${year} no es bisiesto`);
	          }
	        } catch (error) {
	          next(error);
	    
	        }
	      });
	    
	    }
	    
	    module.exports = yearApi;
	    
	    
	```

* **Cristian Fabian Tovar** (3)

	
	Hizo falta la coleccion de postman con los m√©todos ??

	* **danielsanz (Platzi)** (1)

		
		Aqu√≠ puedes ver la colecci√≥n <https://drive.google.com/drive/folders/1Latsb5hLuGS9XuLprGtbpgL3NLGnxh6O?usp=sharing>

* **T-gold** (1)

	
	no entiendo porque en el metodo post llama al id del moviesmock[0]
	
	const createMovieId = await Promise.resolve(moviesMock[0].id)

* **carlosextra1** (1)

	
	http://gitignore.io/

* **daulisg** (1)

	
	Alguien me puede decir por que el API retorna una movie cuando solo hacemos un query cualquiera con abc?

	* **Joe Harry Mancera Monroy** (1)

		
		Claro que si, es porque en el get siempre retorna la primera pel√≠cula
		``` 
		    router.get('/:movieId', async (req, res, next) => {
		            try {
		                const movies = await Promise.resolve(moviesMock[0]) <= aqu√≠
		                res.status(200).json({
		                    data: movies,
		                    messagge: "Movie retrieved"
		                })
		    
		                //console.log(movies)
		            } catch (err) {
		                next(err)
		            }
		        })```
		    
		```

	* **SistemasCBC** (1)

		
		claro, en el c√≥digo si te fij√°s puso un array con un 0,eso hace que siempre te devuelva la primer pel√≠cula

	* **carlosextra1** (1)

		
		siempre retornamos el valor del primer dato del json, en este caso el moviesMock[0].id

* **jandrey** (1)

	
	`npx license mit > LICENSE && npx gitignore node && git init`

	* **Juan Jos√© Vega Quintero** (1)

		
		Ya no funciona npx license mit

* **Alejandro Gonz√°lez Reyes** (1)

	
	Excelente recurso el de gitignore, yo por lo general sol√≠a ignorar node_modules.  
	Lo importante sigue siendo ahorrar tiempo de configuraci√≥n y destinarlo al desarrollo y pruebas

* **Alejandro Gonz√°lez Reyes** (1)

	
	Cuando le√≠ acerca de postman, nunca imagin√© que se volver√≠a una herramienta fundamental en mi trabajo.  
	No conoc√≠a que se pod√≠an guardar las consultas.

* **danielsanz (Platzi)** (1)

	
	Repositorio de la clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/metodos-idempotentes-del-crud>

* **mafevito** (1)
¬øCual es la funcionalidad de las variables de entorno?

	* **Gabriel De Andrade (Platzi)** (3)

		
		Las variables de entorno nos sirven para mantener una configuraci√≥n diferente dependiendo de d√≥nde estemos trabajando, dependiendo de si la app ya est√° producci√≥n o si estamos en una etapa de desarrollo vamos a querer tener diferentes configuraciones. A lo largo del curso ver√°s m√°s a fondo este tema üòÑ

## 0230. Implementando una capa de servicios

### Descripci√≥n:


La arquitectura tradicional MVC se queda corta en aplicaciones modernas, por eso necesitamos una arquitectura diferente c√≥mo la **Clean Arquitecture** que tiene una capa de servicios para manejar la l√≥gica de negocio.

### Links:

* [Clean Coder Blog](https://blog.cleancoder.com/uncle-bob/2012/08/13/the-clean-architecture.html)

* [Ryan Florence - ‚ÄπRethinker stop={false}/‚Ä∫ - YouTube](https://www.youtube.com/watch?v=kp-NOggyz54)

* [Por qu√© Laravel NO es un framework MVC y t√∫ deber√≠as olvidarte de MVC ‚Äì Styde.net](https://styde.net/porque-laravel-no-es-mvc-y-tu-deberias-olvidarte-de-mvc/)

* [Taylor Otwell üèù on Twitter: "I really think the acronym "MVC" has become incredibly unhelpful in development, and instead we should just teach "separation of concerns"."](https://twitter.com/taylorotwell/status/262290285499936768)

### Comentarios:

* **Enrique Devars (Platzi)** (7)

	
	Les dejo esta imagen que hice de la arquitectura clean  
	![arquitectura clean](https://www.dropbox.com/s/n06gjhvukutegr1/clean%20architecture.png?raw=1)

	* **ennma5** (2)

		
		Muchas gracias @edevars. Muy buen aporte.

* **mrcMesen** (3)

	
	Si les interesa encontr√© este link donde hablan un poco m√°s a fondo sobre la arquitectura que se va a implementar 'Clean Arquitecture‚Äô  
	<https://blog.logrocket.com/the-perfect-architecture-flow-for-your-next-node-js-project/>

* **JESUS ALMIRCAR CASTELLANOS** (2)

	
	[Exelente lectura](https://styde.net/porque-laravel-no-es-mvc-y-tu-deberias-olvidarte-de-mvc/), ahora me doy cuenta que no entendia muy bien el modelo MVC. genial!! gracias.

* **wilantury** (2)

	
	Las rutas est√°n para enviar los par√°metros y datos a los servicios, los servicios saben de la l√≥gica de negocio y saben devolver respuestas.

* **Iv√°n Dar√≠o S√°nchez Jim√©nez** (2)

	
	 ** _Controladores_** Es toda la capa del middleware y el router que se comunica con al API y reciben/envia Json.  
	Los controladores no llaman a otros controladores, solo llaman servicios.
	
	* **Servicios** Contiene toda la logica de negocio. Los servicios pueden llamar a otros servicios o librerias.
	
	**_Librerias_** Es la capa que adjunta librerias externas, bases de datos, bases de datos en la nube.

* **edwintrumpet** (2)

	
	 **Respuesta al reto**
	
	Ruta
	``` 
	    router.patch('/:movieId', async (req, res, next) => {
	        const { movieId } = req.params
	        const { body: movie } = req
	    
	        try{
	            const partiallyUpdatedMovieId = await movieService.partialUpdateMovie({ movieId, movie })
	    
	            res.status(200).json({
	                data: partiallyUpdatedMovieId,
	                message: 'partially updated movie'
	            })
	        }catch(err) {
	            next(err)
	        }
	    })
	    
	    
	```
	
	M√©todo
	``` 
	    async partialUpdateMovie() {
	        const updatedMovieId = awaitPromise.resolve(moviesMock[0].id)
	        return updatedMovieId
	    }
	    
	    
	```

* **Daniel Herrera** (2)

	```
	    // patch route
	    router.patch('/:movieId', async (req, res, next) => {
	            const { movieId } = req.params;
	            const { body: movie } = req;
	    
	            try {
	                const patchMovieId = await moviesService.patchMovie({ 
	                    movieId,
	                    movie
	                 })
	                res.status(200).json({
	                    data: patchMovieId,
	                    message: 'resource updated'
	                })
	            } catch (err) {
	                next(err);
	            }
	        });
	    
	    // patch service 
	        async patchMovie() {
	            const patchMovieId = await Promise.resolve(moviesMock[0].id);
	            return patchMovieId;
	        }
	    
	```

* **Victor Martin Ortiz Palacio** (2)

	
	Challenge:
	
	/routes/
	``` 
	    router.patch('/:movieId', asyncfunction(req, res, next) {
	        const { movieId } = req.params;
	        const { body: movie } = req;
	        try {
	          const movieModified = await moviesService.updateOneFieldMovie({
	            movieId,
	            movie
	          });
	          res.status(204).json({
	            data: movieModified,
	            message: 'movie modified'
	          });
	        } catch (error) {
	          next(error);
	        }
	      }); ```
	    
	    
	    
	    
	    
	    
	```
	
	/services/
	``` 
	    asyncupdateOneFieldMovie() {
	        const updateOneFieldMovie = await Promise.resolve(moviesMock[0].id);
	        return updateOneFieldMovie;
	      }
	    
	    
	```

* **Ricardo Lugo Recillas** (2)

	
	  * en los controlladores = es toda la capa del middlewares, y del router comunicaci√≥n con api donde se recibe y se env√≠a JSON
	  * los controlladores solo llaman servicios, pero los servicios si llaman a otros servicios y librer√≠as bases de datos u otras apis
	  * La unica responsabilidad de la rutas en como recibir parametros y como se los envia a los servicios
	
	

* **heysoypaez** (2)
<h1>De los enlaces que dej√≥ el profesor me queda lo siguiente:</h1>
	  1. No hay arquitectura √∫nica, predefinidad, perfecta para una aplicaci√≥n web moderna.
	  2. Por lo tanto, es** tu responsabilidad no limitarte al Modelo Vista Controlador** usado en tiempos pasados (yo nunca lo he tocado) sino entender las capas, las entidades, las piezas que necesita tu aplicaci√≥n para funcionar.
	
	

* **heysoypaez** (2)

	
	Buena clase, valiosa para repasarla.
	
	De lo que mencionas al final de la clase me queda el principio de responsabilidad √∫nica de la programaci√≥n.
	
	_El panadero que haga pan, el ladrillero que haga ladrillo._
	
	En la pr√°ctica recuerdas la idea de separar responsabilidad cuando hablas de las rutas y los servicios. No sobrcargar.

* **danielsanz (Platzi)** (2)

	
	Repositorio de la clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/implementando-una-capa-de-servicios>

* **SistemasCBC** (1)

	
	Que son servicios?  
	Que es la l√≥gica de negocios?

	* **T-gold** (1)

		
		por ejemplo en una red social los servicios serian  
		posts  
		users  
		chat  
		cada feature de tu app tendra un servicio que lo gestione
		
		la logica de negocio es toda la logica que le agregas a cada servicio por ej  
		cada vez que un usuario se crea  
		-se autenticara  
		-se guardara la fecha de creacion  
		etc etc
		
		en la logica de negocio definis que pasa con cada accion
		
		esta clean architecture se basa  
		en
		
		controller(routes) services(logica de negocio) librerias(acceso a DB)

* **Marco Antonio Benites Espinoza** (1)

	
	Reto:
	``` 
	        router.patch("/:movieId", asyncfunction(req, res, next) {
	            const { movieId } = req.params;
	            const { body: movie } = req;
	            try {
	                const partialUpdatedMovieId = await moviesService.partialUpdateMovie({ movieId, movie });
	    
	                res.status(200).json({
	                    data: partialUpdatedMovieId,
	                    message: 'Movie partial updated'
	                });
	            } catch (err) {
	                next(err);
	            }
	        });
	    
	    
	```

* **RichBarusta** (1)

	
	Crear√≠a un m√©todo helper para crear la Promise, as√≠ no se repetir√≠a mucho c√≥digo.

* **Roso Pe√±aranda** (1)

	```
	     router.patch('/:movieId', asyncfunction(req, res, next) {
	        const { movieId } = req.params;
	        const { body: movie } = req;
	        try {
	          const patchedMovie = await moviesService.patchMovie({ movieId, movie });
	    
	          res.status(200).json({
	            data: patchedMovie,
	            message: 'movie patched'
	          });
	        } catch (error) {
	          next(error);
	        }
	      });
	    
	    // service
	    
	     async patchMovie() {
	        const patchedMovieId = await Promise.resolve(moviesMock[0]);
	        return patchedMovieId || {};
	      }
	```

* **PaoloTorregrosa** (1)

	
	Reto:
	``` 
	    router.patch("/:movieId", asyncfunction (req, res, next) {
	            const { movieId } = req.params;
	            const { body: movie } = req;
	    
	            try {
	                const patchedMovie = await moviesService.patchMovie(movieId, movie);
	    
	                res.status(200).json({
	                    data: patchedMovie,
	                    message: "movie Patched"
	                })
	            } catch(e) {
	                next(e)
	            }
	        });
	    
	    // service
	    
	    async patchMovie() {
	            const patchedMovie = await Promise.resolve(moviesMock[0].id);
	            return patchedMovie;
	        }
	    
	    
	```

* **Leonardo Daniel Benitez Cuenca** (1)

	```
	    // METODO PATCH PARA ACTUALIZAR LA PROPIEDAD DE UN ELEMENTO
	        router.patch("/:movieId", asyncfunction(req, res, next){
	            const { movieId } = req.params;
	            const { body: movie } = req;
	            try {
	                const updateMovieId = await moviesService.updateMovie({ movieId, movie });
	    
	                res.status(200).json({
	                    data: updateMovieId,
	                    message: 'movie property updated'
	                });
	    
	    
	            } catch (error) {
	                next(error);
	            }
	        });
	    
	```

* **crimiro** (1)

	```
	    // Route
	    router.patch('/:movieId', asyncfunction(req, res, next) {
	        const { movieId } = req.params;
	        const { body: movie } = req;
	        try {
	          const updatedMovieId = await moviesService.updateMovie({ movieId, movie })
	          res.status(200).json({
	            data: updatedMovieId,
	            message: 'Movies Updated'
	          })
	        } catch(err) {
	          next(err);
	        }
	      });
	    // service
	    async replaceMovie() {
	        const replacedMovie = await Promise.resolve(moviesMock[0]);
	        return replacedMovie;
	      }
	    
	```

* **Jes√∫s Miguel Quinto Teran** (1)

	
	Recordar que la diferencia entre PUT y PATH es:
	
	  * PUT: remplazo total del recurso.
	  * PATH: actualizaci√≥n de algunos elementos del recurso.  
	<https://medium.com/backticks-tildes/restful-api-design-put-vs-patch-4a061aa3ed0b>
	
	

	* **rusbel berm√∫dez rivera** (2)

		
		*patch

* **Jes√∫s Miguel Quinto Teran** (1)

	
	Challenge:
	``` 
	        router.put('/:idMovie', asyncfunction(req, res, next) {
	            const { body } = req;
	            const { idMovie } = req.params;
	    
	            try {
	                const movie = await movieService.remplaceMovie({ body, idMovie });
	                res.status(200).json({
	                    data: movie,
	                    message: 'movie remplaced'
	                });
	            } catch (error) {
	                next(error);
	            }
	        });
	    
	        router.patch('/:idMovie', asyncfunction(req, res, next) {
	            const { body } = req;
	            const { idMovie } = req.params;
	    
	            try {
	                const movie = await movieService.updateMovie({ body, idMovie });
	                res.status(200).json({
	                    data: movie,
	                    message: 'movie edited'
	                });
	            } catch (error) {
	                next(error);
	            }
	        });
	    
	```

* **Iv√°n Dar√≠o S√°nchez Jim√©nez** (1)

	
	La diferencia entre req.query y req.params, es que paramentros se utiliza cuando estan establecidos en la URL y query cuando se usa ?, el nombre query y se puede concatenar.

* **Alejandro Gonz√°lez Reyes** (1)

	
	Pr√°cticamente es lo mismo, pero recordar que con patch solo es una actualizaci√≥n parcial de los datos correspondientes a un recurso.
	``` 
	    router.patch('/:movieId', asyncfunction(req, res, next) {
	        const { movieId } = req.params;
	        const { body: movie } = req;
	    
	        try {
	          const partialMovieId = await moviesServices.updatePartialMovie({
	            movieId,
	            movie
	          });
	          res
	            .status(200)
	            .json({ data: partialMovieId, message: 'movie updated partially' });
	        } catch (err) {
	          next(err);
	        }
	      });
	    
	```
	
	Es aqu√≠ donde se tendr√≠a que agregar la l√≥gica de un for para saber que propiedes se quieren actualizar
	``` 
	    asyncupdatePartialMovie() {
	        const partialUpdateMovieId = await Promise.resolve(moviesMock[6].id);
	        return partialUpdateMovieId;
	      }
	    
	```

* **heysoypaez** (1)

	
	**Mi soluci√≥n al desaf√≠o:**
	
	_routes/movies.js_
	``` 
	    	router.patch("/:movieId", asyncfunction(req,res,next) {
	    		const {movieId} = req.params;
	    		const {body: movie} = req;		
	    		try {
	    			const updatedMovieId = await moviesService.partialUpdateMovie({movieId,movie});
	    
	    			res.status(200).json({
	    				data:updatedMovieId,
	    				message: "movie updated partially"
	    			});
	    		}
	    		catch(error) {
	    			next(error);
	    		}
	    	});
	    
	```
	
	_services/movies.js_
	``` 
	    	asyncpartialUpdateMovie() {
	    		const updatedMovieId = await Promise.resolve(moviesMock[0].id);
	    		return updatedMovieId;
	    	}
	    
	```

* **Daniel Alberto Esquinazi** (1)
Por que declara el service como una clase? Se podr√≠a definir todas las funciones separadas? Tambi√©n me parece que faltaron los try/catch ...

	* **Erik Ochoa (Platzi)** (3)

		
		S√≠ se podr√≠an definir c√≥mo funciones separadas sin ning√∫n problema, en este caso el profesor opt√≥ por usar una clase tal vez por mantener consistencia en todo el c√≥digo.
		
		Siempre es bueno controlar los posibles errores con **try/catch** , eres libre de agregarlos donde los creas necesarios.

* **Hebert de Le√≥n** (1)
Puede que est√© preguntando algo tonto pero, ¬øC√≥mo funciona eso del alias que hizo en el minuto 7:18? Me gustar√≠a saber m√°s de ello, y si ...

	* **Manuel Ojeda** (2)

		
		Lo que hace ah√≠ es una desconstrucci√≥n, es decir, separa los valores directamente en la declaraci√≥n, y lo que hace es darle un valor a ese valor en especifico.
		
		Por ejemplo en ese caso:
		``` 
		    const { body:movies } = req;
		    
		```
		
		o
		``` 
		    const { body } = req;
		    
		```
		
		ser√≠a lo mismo solo que ahora puedes acceder a ese valor con movies.
		
		En resumen, le estas asignando un nombre nuevo o un alias/apodo a la variable body.

# C√≥mo conectarse con librer√≠as externas en Express.js

## 0240. Creaci√≥n de una BD en MongoAtlas

### Descripci√≥n:


### Links:

* [Managed MongoDB Hosting on AWS, Azure, and GCP | MongoDB](https://www.mongodb.com/cloud/atlas)

### Comentarios:

* **Albert K. Camargo Barreda** (15)

	
	‚ù§Ô∏è si vienes del curso de Nodejs

* **israelhuaman** (11)

	
	vengo del curso de Node.js ü§£

	* **Georgie Duarte** (3)

		
		yo desde el de graphql --> node --> backend con node
		
		esto es el MCU nerd --> PCM (Platzi Courses Universe)
		
		.

	* **Juan Jos√© Vega Quintero** (1)

		
		#Cl√°sico

* **Alberto Luebbert M.** (4)

	
	‚ù§Ô∏è si vienes del curso de GraphQL

* **Daniel Hurtado** (4)

	
	NoSQL no significa que no sea una base de datos relacional, el ‚Äúno‚Äù en su nombre realmente significa: NOT ONLY SQL. Es decir, no solo relaciones

* **Jes√∫s Miguel Quinto Teran** (3)

	
	Muchas personas creen que las Bases de datos **No relacionales** son el remplazo de las bases de datos **Relacionales** , y la verdad es que no. Aplican para resolver distintos tipos de problemas, he incluso muchos sistemas complejos hacen uso de las dos.

* **Andres Roberto Coello Goyes** (3)

	
	MongoDB est√° escrito en C++, aunque las consultas se hacen pasando objetos JSON como par√°metro. Es algo bastante l√≥gico, dado que los propios documentos se almacenan en BSON. Por ejemplo:
	
	db.Clientes.find({Nombre:‚ÄúPedro‚Äù});  
	La consulta anterior buscar√° todos los clientes cuyo nombre sea Pedro.
	
	MongoDB viene de serie con una consola desde la que podemos ejecutar los distintos comandos. Esta consola est√° construida sobre JavaScript, por lo que las consultas se realizan utilizando ese lenguaje. Adem√°s de las funciones de MongoDB, podemos utilizar muchas de las funciones propias de JavaSciprt. En la consola tambi√©n podemos definir variables, funciones o utilizar bucles.
	
	Si queremos usar nuestro lenguaje de programaci√≥n favorito, existen drivers para un gran n√∫mero de ellos. Hay drivers oficiales para C#, Java, Node.js, PHP, Python, Ruby, C, C++, Perl o Scala. Aunque estos drivers est√°n soportados por MongoDB, no todos est√°n en el mismo estado de madurez. Por ejemplo el de C es una versi√≥n alpha. Si queremos utilizar un lenguaje concreto, es mejor revisar los drivers disponibles para comprobar si son adecuados para un entorno de producci√≥n.

* **Agustin Felicetti** (2)

	
	Hola disculpen pero para mi el boton ‚ÄúCOLLECTIONS‚Äù y ‚ÄúMEtRICS‚Äù aparecen bloquedos ¬øAlguien sabe solucionarlo?

* **carlosextra1** (2)

	
	Se ve excelente este curso!!!  
	Me mandaron a esta clase desde el curso de node con Carlos Hernandez para crear nuestra DB!

* **Pacool84** (2)

	
	Yo vengo del curso de EXPRESS !!! üòÉ

* **sergio-medina93** (2)

	
	Me enviaron ac√° pues el otro curso usa mlab üò¶

	* **danilovalenzuela** (5)

		
		Entonces el curso es de hace un siglo jajaj

* **johann_tolima** (1)

	
	Hola, no fue posible crear la BD, al momento de generarla arroja un error ‚ÄúWe‚Äôre sorry, an unexpected error has occurred‚Äù

* **Abraham Gonzalez** (1)
Yo tuve que crear la base de datos desde mi terminal ‚Ä¶ en connect te dan las opciones. Porque desde la interfaz como lo hace el profesor ...

	* **Erik Ochoa (Platzi)** (1)

		
		Wow, es muy **Pro** crearla desde la terminal. A la pr√≥xima que tengas un error recuerda que la comunidad est√° aqu√≠ para ayudarte, no dudes en preguntar. üí™

* **Karo Adyan** (1)
Que es un cluster?

	* **Juan David Castro (Platzi)** (1)

		
		Aqu√≠ se explica muy bien: <https://stackoverflow.com/questions/43445975/what-is-a-cluster-in-mongodb/43447558>.
		
		De todas formas, te recomiendo tomar el Curso de MongoDB. üòâ
		
		üëâ <https://platzi.com/clases/mongodb/>

* **Alejandro Gonz√°lez Reyes** (1)
Entonces ya no es necesario instalar mongoDB en nuestra maquina local?

	* **Erik Ochoa (Platzi)** (6)

		
		Para el caso ejemplo de est√° clase no es necesario, pero siempre es recomendable que tengas mongoDB instalado en local para que puedes hacer pruebas sin conexi√≥n.

## 0250. Conexi√≥n a MongoAtlas una instancia de MongoDB

### Descripci√≥n:


### Links:

* [GitHub - wmaurer/vscode-change-case: Change Case Extension for Visual Studio Code](https://github.com/wmaurer/vscode-change-case)

### Comentarios:

* **Jes√∫s Miguel Quinto Teran** (5)

	
	 **retryWrite = true**  
	_Las escrituras recuperables permiten a los controladores MongoDB reintentar autom√°ticamente ciertas operaciones de escritura una sola vez si encuentran errores de red, o si no pueden encontrar un primario sano en los conjuntos de r√©plica o cl√∫ster fragmentado._  
	<https://docs.mongodb.com/manual/core/retryable-writes/>
	
	**w=majority**  
	_Solicita el reconocimiento de que las operaciones de escritura se han propagado al majority ( M) de los miembros con derecho a voto. La mayor√≠a ( M) se calcula como la mayor√≠a de todos los miembros con derecho a voto [1] , pero la operaci√≥n de escritura devuelve el reconocimiento despu√©s de propagarse al n√∫mero M de miembros con derecho a voto (primarios y secundarios con members[n].votesmayor que 0).
	
	Por ejemplo, considere una r√©plica configurada con 3 miembros votantes, Primario-Secundario-Secundario (PSS). Para este conjunto de r√©plica, M es dos [1] , y la escritura debe propagarse a la primaria y una secundaria para reconocer la preocupaci√≥n de escritura al cliente._  
	<https://docs.mongodb.com/manual/reference/write-concern/>

	* **carlosextra1** (1)

		
		Gracias por el aporte

* **danielsanz (Platzi)** (5)

	
	Repositorio de la clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/conexion-a-mongo-atlas>

* **Washington Antonio Delgado Neira** (2)

	
	COMO HIZO PARA PONER TODAS LAS VARIABLES DE ENTORNO DE UNA SOLA, SE AUTOCOMPLETO DE FORMA AUTOMATICA (MINUTO 2:34)

	* **nova12** (1)

		
		cons vs code puedes poner varios punteros a la ves y si escrives pues autocompleta en cada linea donde tengas cursor,

* **rusbel berm√∫dez rivera** (2)

	
	que sucedio con ObjectId? lo importamos pero no lo utilizamos

	* **Juan Jos√© Vega Quintero** (1)

		
		M√°s adelante

* **Jes√∫s Miguel Quinto Teran** (2)

	
	paquete **lowecase** donde estuviste toda mi vida‚Ä¶

* **Matias Niz** (2)

	
	Porque no crear una variable de entorno con la connection string?

	* **Jos√© Mar√≠a Cuevas Ram√≠rez** (1)

		
		Es una buena pregunta, pero supongo que tambi√©n lo tiene por separado para poder manipular la informaci√≥n de manera individual.

* **renny10037** (2)

	
	¬øDonde consigo el host?

	* **Erik Ochoa (Platzi)** (5)

		
		En tu Cluster de Mongo Atlas vas a encontrar un bot√≥n de connect donde te va a dar la informaci√≥n que necesitas.
		
		![Screen Shot 2019-10-24 at 19.24.00.png](https://static.platzi.com/media/user_upload/Screen%20Shot%202019-10-24%20at%2019.24.00-d9b444f2-7a23-4277-bd2b-c241b9ab566a.jpg) ![Screen Shot 2019-10-24 at 19.24.14.png](https://static.platzi.com/media/user_upload/Screen%20Shot%202019-10-24%20at%2019.24.14-99fe7ef4-1a19-4826-86fd-7553f1de28df.jpg) ![Screen Shot 2019-10-24 at 19.24.23.png](https://static.platzi.com/media/user_upload/Screen%20Shot%202019-10-24%20at%2019.24.23-295d33a2-7e76-4d84-8fec-e9fd8e37fed5.jpg)

* **Tonalli L√≥pez** (2)

	
	Que paquete de iconos tienes instalado para que le de un icono a los .env?

	* **Fernando Azuaje** (3)

		
		material icon theme

* **T-gold** (1)

	
	entonces el archivo .env debe ir al .gitignore?

* **Cristian Caraballo** (1)

	
	Primer acercamiento a bases de datos!! Que emoci√≥n!! üòÑ

* **carlosextra1** (1)

	
	paquete para camelCase OJO esto es un marcador!

* **Andres Roberto Coello Goyes** (1)

	```
	    const { MongoClient, ObjectId } = require('mongodb');
	    const {config} = require('../config/index');
	    
	    const USER = encodeURIComponent(config.DB_USER);
	    const PASSWORD = encodeURIComponent(config.DB_PASSWORD);
	    const DB_NAME = encodeURIComponent(config.DB_NAME);
	    
	    const MONGO_URI = `mongodb+srv://${USER}:${PASSWORD}@${config.DB_HOST}:${config.port}/${DB_NAME}?retryWrites=true&w=majority`;
	    
	    classMongoLib{
	        constructor(){
	            this.client = new MongoClient(MONGO_URI, {useNewUrlParser: true });
	            this.db_name = DB_NAME;
	        }
	        connect(){
	            if(MongoLib.connection){
	                MongoLib.connection = newPromise((resolve, reject) => {
	                    this.client.connect( err => {
	                        if(err){
	                            reject(err);
	                        }
	                        console.log('conectado');
	                        resolve(this.client.db(this.db_name));    
	                    });
	                });
	            }
	            return MongoLib.connection;
	        }
	    }
	    
	    module.exports = MongoLib;
	    
	```
	
	por si no quieres escribir

	* **Daniel Ram√≠rez Mendoza** (2)

		
		Tienes un error en if(MongoLib.connection) es con ‚Äú!‚Äù para comprobar que no existe connection.

	* **Andres Roberto Coello Goyes** (1)

		
		si me di cuenta poco despues de subirlo, y por que me dio error.

	* **Eden Gomez Gress** (1)

		
		aprobechando esta discucion. de donde viene el metodo .connection?

	* **T-gold** (1)

		
		EdenGg buena pregunta , calculo que del paquete mongodb

* **Jaider Orlando Cano Botero** (1)

	
	Esta conexi√≥n no debe ser cerrada?

* **Helber Fabian Toro Palacios** (1)

	
	.env en node.js

* **heysoypaez** (1)

	
	¬øPara qu√© es este trozo del c√≥digo `?retryWrites=true&w=majority` ?

	* **Juan David Castro (Platzi)** (2)

		
		üëã ¬°Hola!
		
		En la documentaci√≥n encuentras la informaci√≥n sobre estas propiedades:
		
		üëâ <https://docs.mongodb.com/manual/core/retryable-writes/>  
		üëâ <https://docs.mongodb.com/manual/reference/write-concern/>  
		üëâ <https://stackoverflow.com/questions/27039717/whats-the-usage-and-behaviour-of-wmajority-on-half-cluster-down>

	* **T-gold** (2)

		
		retryWrite = true  
		Las escrituras recuperables permiten a los controladores MongoDB reintentar autom√°ticamente ciertas operaciones de escritura una sola vez si encuentran errores de red, o si no pueden encontrar un primario sano en los conjuntos de r√©plica o cl√∫ster fragmentado.  
		<https://docs.mongodb.com/manual/core/retryable-writes/>
		
		w=majority  
		_Solicita el reconocimiento de que las operaciones de escritura se han propagado al majority ( M) de los miembros con derecho a voto. La mayor√≠a ( M) se calcula como la mayor√≠a de todos los miembros con derecho a voto [1] , pero la operaci√≥n de escritura devuelve el reconocimiento despu√©s de propagarse al n√∫mero M de miembros con derecho a voto (primarios y secundarios con members[n].votesmayor que 0).
		
		Por ejemplo, considere una r√©plica configurada con 3 miembros votantes, Primario-Secundario-Secundario (PSS). Para este conjunto de r√©plica, M es dos [1] , y la escritura debe propagarse a la primaria y una secundaria para reconocer la preocupaci√≥n de escritura al cliente._  
		<https://docs.mongodb.com/manual/reference/write-concern/>

## 0260. Conexi√≥n con Robot3T y MongoDB Compass a una BD

### Descripci√≥n:


**Robo 3T** y **MongoDB Compass** son dos clientes con interfaz gr√°fica que nos permiten conectarnos a nuestras instancias de Mongo DB y manipularlas de una manera m√°s f√°cil. Con ambos clientes nos podemos conectar a una instancia de cualquier servidor, inclusive a una instancia de MongoDB Atlas.

Para descargarlos se pueden usar los siguientes enlaces respectivamente:

  * <https://robomongo.org/download>
  * <https://www.mongodb.com/download-center/compass>



## Conexi√≥n usando MongoDB Compass

Si nosotros copiamos el Mongo URI desde Mongo Atlas podemos conectarnos f√°cilmente con MongoDB Compass:

  1. Iniciamos sesi√≥n en MongoDB Atlas <https://www.mongodb.com/cloud/atlas>
  2. Nos vamos a la secci√≥n de **Clusters** en el men√∫ lateral izquierdo.
  3. Seleccionamos **connect** en nuestro cluster sandbox.
  4. Seleccionamos la opci√≥n **Connect with MongoDB Compass**.
  5. Si no tenemos MongoDB Compass instalado, podemos descargarlo desde all√≠. Si ya lo tienes instalado continua con el paso 6.
  6. Le damos clic en el bot√≥n **copy** para copiar el Mongo URI.
  7. Abrimos **MongoDB Compass** e inmediatamente va a reconocer nuestra URI que tenemos en el portapapeles.
  8. Hacemos clic en **yes** para que nos cree una nueva conexi√≥n, pero es necesario introducir el **password** del usuario de la base de datos.
  9. Podemos ponerle un nombre favorito y darle en **Create favorite** y luego en **Connect**.

![mongodb-compass.png](https://static.platzi.com/media/user_upload/mongodb-compass-17619c01-4409-4039-984b-d46e05e7ff47.jpg)

## Conexi√≥n usando Robo 3T

Para poder conectarnos a MongoDB Atlas haciendo uso de Robo 3T, necesitamos copiar el Mongo URI:

  1. Iniciamos sesi√≥n en MongoDB Atlas <https://www.mongodb.com/cloud/atlas>
  2. Nos vamos a la secci√≥n de **Clusters** en el menu lateral izquierdo.
  3. Seleccionamos **connect** en nuestro cluster sandbox.
  4. Seleccionamos la opci√≥n **Connect with MongoDB Compass**.
  5. Si no tenemos MongoDB Compass instalado, podemos descargarlo desde alli. Si ya lo tienes instalado continua con el paso 6.
  6. Le damos clic en el bot√≥n **copy** para copiar el Mongo URI.
  7. Abrimos **Robo 3T** y hacemos clic arriba en la parte izquierda en el link de **create**.
  8. En la parte de abajo hay un input donde pegaremos el Mongo URI y hacemos clic en **From SRV**
  9. Le cambiamos el nombre a nuestra conexi√≥n en **Name** por el que consideres m√°s conveniente.
  10. Nos vamos a la pesta√±a de **Authentication** y actualizamos el **password** por el password correcto del usuario.
  11. Hacemos clic en **test** en la parte inferior izquierda para probar que todo esta OK, y luego podemos hacer clic en **save** y **connect**.

![robo-3t.png](https://static.platzi.com/media/user_upload/robo-3t-6e1979a3-698b-4a9c-95fb-b30de530b4c3.jpg)

### Comentarios:

* **Wilson Marino Pablo Mendez** (3)

	
	Yo uso la terminal y tambien el cliente MongoDB Compas

* **Juan Carlos Garc√≠a Esquivel** (2)

	
	Super sencilla la conexi√≥n con **MongoDB Compass** , ya me esta gustando este curso.

* **carlosextra1** (1)

	
	Excelentes clientes!

* **daniel-zurita** (1)

	
	Aunque es algo obvio , deben remplazar en el connection string , la parte de <password> , con su contrase√±a de la bd. tanto como para el compass y el robo 3t

* **Alver Ortega** (1)

	
	Me pueden ayudar con la conexi√≥n, me sale este error
	``` 
	    Cannot connect tothe MongoDB at cluster0-shard-00-02-qcpaq.mongodb.net:27017.
	    
	    Error:
	    SSL connection failure: Network errorwhile attempting torun command 'buildInfo' on host 'cluster0-shard-00-02-qcpaq.mongodb.net:27017```
	    
	```

* **Abraham Gonzalez** (1)

	
	Gracias por el tutorial, antes no habia podido conectarme desde Robo 3T

* **Arlex Felipe Llanos Betancourt** (1)

	
	Yo no pude conectarme de la forma en que se explica, tuve que recurrir a otro tutorial en este [link](https://medium.com/@samurc.net/crear-mongodb-atlas-y-conectarse-usando-robo-3t-ex-robomongo-15781eebd7f4) de medium, donde se habilita el SSL, se los dejo por si alguno lo necesita y le ayuda üòÑ

* **Leonardo Daniel Benitez Cuenca** (1)

	
	me sale este mensaje al intentar conectarme con MongoDB Compass. Si alguien podr√≠a ayudarme. please
	``` 
	    Server selection timed out after 30000ms
	    
	```

	* **PaoloTorregrosa** (5)

		
		Hola, me paso lo mismo, tienes que reemplazar el <password> que esta dentro de el texto que pegas con la contrase√±a que le pusiste a tu usuario en la base de datos

* **franciscohreyes** (1)

	
	genial!!

## 0270. Implementaci√≥n de las acciones de MongoDB

### Descripci√≥n:


Los m√©todos de MongoDB para implementar un CRUD son:

  * **C** reate 
    * insertOne
  * **R** ead 
    * find
    * findOne
  * **U** pdate 
    * updateOne
  * **D** elete 
    * deleteOne



### Links:

* [Collection Methods ‚Äî MongoDB Manual](https://docs.mongodb.com/manual/reference/method/js-collection/)

* [MongoDB CRUD Operations ‚Äî MongoDB Manual](https://docs.mongodb.com/manual/crud/)

* [the-little-mongodb-book/mongodb.markdown at master ¬∑ uokesita/the-little-mongodb-book ¬∑ GitHub](https://github.com/uokesita/the-little-mongodb-book/blob/master/es/mongodb.markdown)

### Comentarios:

* **danielsanz (Platzi)** (6)

	
	Repositorio de la clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/implementacion-de-las-acciones-de-mongodb>

* **carlosextra1** (2)

	
	JAJAJA gusto mucho esto!!
	
	**No es mi culpa que los cap√≠tulos sean cortos, MongoDB solo es f√°cil de aprender.**
	
	del recurso compartido del profe  
	<https://github.com/uokesita/the-little-mongodb-book/blob/master/es/mongodb.markdown>

* **Alejandro Gonz√°lez Reyes** (2)
Para este tipo de proyectos que recomiendas, hacer uso de una librer√≠a para establecer conexion directa con la base de datos, o hacer uso...

	* **Erik Ochoa (Platzi)** (2)

		
		En este proyecto se usa **Mongoose** porque es muy com√∫n encontrarlo en proyectos profesionales. Ofrece una soluci√≥n basada en esquemas para modelar los datos de tu aplicaci√≥n, incluyendo cosas como casting de tipos, validaciones y construcci√≥n de queries entre muchas m√°s.
		
		La **conexi√≥n directa** con el driver oficial de MongoDB te va a permite hacer cosas a m√°s bajo nivel, personalizar mucho m√°s, pero con el trabajo que eso conlleva. Esta puede servir tanto para un proyecto peque√±o por su sencillez como para un proyecto grande y muy especializado por su versatilidad.
		
		Como siempre todo depende del tipo de proyecto que vas a llevar acabo y cada proyecto es √∫nico.

* **AlexGarrixen** (1)

	
	No deberiamos controlar el rechazo de la promesa de **connect** con el **catch** y mostar un mensaje si llegara a fallar la conexion.  
	Donde posteriormente en los servicios verificariamos el valor que retornara la funcion,en este caso,por ejemplo en getAll  
	devuelvo null en caso de que falle y en el servicio validaria si me regresa un falsyvalue(null,undefines,etc),y responder algo al respecto.
	``` 
	    async getAll({ collection, filter = {} }) {
	        let response = null;
	        try {
	          const db = awaitthis.connect();
	          response = await db.collection(collection).find(filter).toArray();
	        }
	        catch(e) {
	          console.log(`ERROR: ${e.message}`);
	        }
	    
	        return response;
	      }
	    ``` 
	```

* **george-montenegro** (1)
Hola Amigos, me podrian ayudar por favor con este error que se produce cuando ejecuto la llamada del (POST: 

	* **Ruben Padilla** (1)

		
		Hey!
		
		Por favor compartenos el codigo donde realizas la conecci√≥n a mongodb para poder brindarte una mejor ayuda.

* **jhonaikerfarias** (1)
¬øRecomiendan usar esta libreria mongodb o mongoose que se usa en el otro curso de nodejs?

## 0280. Conexi√≥n de nuestros servicios con MongoDB

### Descripci√≥n:


### Links:

* [Curso B√°sico de MongoDB | Materiales](https://platzi.com/clases/mongodb/)

* [Curso B√°sico de MongoDB | Materiales](https://platzi.com/clases/mongodb/)

### Comentarios:

* **Alejandro Gonz√°lez Reyes** (12)

	
	Con la configuraci√≥n actual env√≠a un warning
	``` 
	    DeprecationWarning: current Server Discovery and Monitoring engine isdeprecated, and will be removed in a future version. To use the new Server Discover and Monitoring engine, pass option { useUnifiedTopology: true }to the MongoClient constructor
	    
	```
	
	A√±adir lo siguiente al archivo de librer√≠a ‚ÄúMongoLib‚Äù
	``` 
	    constructor(){
	        this.client = new MongoClient(MONGO_URI, {
	          useNewUrlParser: true,
	          useUnifiedTopology: true
	        });
	        this.dbName = DB_NAME;
	      }
	    
	```

	* **Andrea M√©ndez D√≠az** (1)

		
		Gracias.

	* **Jes√∫s Miguel Quinto Teran** (1)

		
		Thanks

* **Jes√∫s Miguel Quinto Teran** (5)

	
	A diferencia de los **JSON** que escribimos com√∫nmente, para que express logre parcear correctamente el json, deben usar comillas dobles en la clave.
	``` 
	    //bad üí•
	    {
	    	title: "lorem ipsum"
	    }
	    
	    // bad üí•
	    {
	    	'title': 'lorem ipsum'
	    }
	    
	    
	    //Good ‚ú®
	    {
	    	"title": "lorem ipsum"'
	    }
	    
	    
	```

* **Andres Roberto Coello Goyes** (5)

	
	En mi caso me arrojaba un error del PORT, y me di cuenta que en la conexi√≥n del cluster
	``` 
	    mongodb+srv://<username>:<password>@cluster0-pm1ma.mongodb.net/test?retryWrites=true&w=majority
	    
	```
	
	no especificaba el puerto as√≠ que lo borre y listo.

* **mrcMesen** (3)

	
	Alg√∫n heroe sin capa que explique esta linea a detalle:
	``` 
	    const query = tags && {tags: {$in: tags}};
	    
	```

	* **Carlos Vallejo** (1)

		
		Esto es lo que se llama un IF Ternario, cumple la misma funci√≥n de un condicional IF, nada m√°s que escrito de distinta manera.
		``` 
		    const ifBasico = <condici√≥n> && <haz esto>;
		    const ifConElse = <condici√≥n> && <haz esto> : <sino haz esto>;
		    
		```
		
		En el caso del profesor, lo que hace es una verificaci√≥n para ver si la variable _tags_ est√° definida (hay datos) y en caso de que as√≠ sea est√° creando un objeto con el atributo tags

* **Carlos Vallejo** (2)

	
	Si tienen el siguiente error:
	``` 
	    MongoError: MongoClient must be connected before calling 
	    
	```
	
	Traten con esto:
	
	  1. Quiten el n√∫mero de puerto (${config.port}) del string de conexi√≥n en lib/mongo.js, deber√≠a quedar as√≠:
	
	
	``` 
	    const MONGO_URI = `mongodb+srv://${USER}:${PASSWORD}@${config.dbHost}/${DB_NAME}?retryWrites=true&w=majority`;
	    
	```
	
	  1. En el mismo archivo lib/mongo.js aumentar un par√°metro al constructor del this.client. Deber√≠a quedar as√≠:
	
	
	``` 
	    this.client = new MongoClient(MONGO_URI, { useNewUrlParser:true, useUnifiedTopology:true });
	    
	```
	
	Espero esto les sirva.

	* **carlosextra1** (2)

		
		no manches! te debo una. Tengo el mismo error. muchas gracias de verdad!

	* **Juan Jos√© Vega Quintero** (2)

		
		Alguien me podr√≠a ayudar  
		Mis variables de entorno me retornan undefined üò¶

	* **carlosextra1** (1)

		
		Que onda @Juan Puedes compartir tu c√≥digo!

* **daulisg** (2)

	
	ü§Ø Cuando tienes un typo y pasas 1 hora de tu via averiguando porque tu proyecto no esta funcionando lol

* **David Behar** (2)

	
	Para conectarme a mi base de datos tuve que modificar mi endpoint de la siguiente manera
	``` 
	    const MONGO_URI = `${config.dbConnectionType}://${USER}:${PASSWORD}@${config.dbHost}:${config.dbPort}`;
	    
	```
	
	Donde `dbConnectionType` cambia a `mongodb`, tambi√©n tuve que quitar la base de datos porque tenemos el c√≥digo
	``` 
	              resolve(this.client.db(this.dbName));
	    
	```
	
	En ese c√≥digo realizamos de nuevo la conecci√≥n a una base de datos espec√≠fica, si alguien batalla por conectarse a base de datos privada, le ayudar√© desde este mensaje.

* **Jonatan Francisco Gonzalez Donis** (2)
Una duda ahi dejas la conexi√≥n abierta de mongo. Si utilizo un driver para una base de datos relacional ejemplo oracle-db. Es recomendabl...

	* **glrodasz** (1)

		
		La verdad depende el tipo de de aplicaci√≥n que este usando. Por ejemplo, cuando es una aplicaci√≥n que tiene muchas transacciones lo mejor es dejar las conexiones abiertas para que se reutilicen, porque es mas costoso abrir y cerrar conexiones. Pero generalmente, mantener una conexi√≥n abierta sin transacciones es un consumo de memoria no necesario.
		
		Los drivers suelen tomar esta decisi√≥n por ti. Mi consejo, es ensaya varias opciones y monitorea como se comporta tu aplicaci√≥n para tomar la mejor decisi√≥n.

* **ocandoja** (1)

	
	Tengo este error si alguien me puede ayudar lo apreciar√≠a mucho
	``` 
	    MongoServerSelectionError: bad auth Authentication failed.```
	    
	```

* **David Lara Chirinos** (1)

	
	Casi 2 horas leyendo documentacion y repitiendo videos, pero todo bien. Por fin!

* **daulisg** (1)

	
	Solo use el `config.dbHost` y el nombre de la collection porque no tengo **usuario/password** en la local:  
	en el **.env: ** **DB_HOST=mongodb://127.0.0.1:27017**
	
	![Screen Shot 2020-03-04 at 12.02.57 AM.png](https://static.platzi.com/media/user_upload/Screen%20Shot%202020-03-04%20at%2012.02.57%20AM-5f982f24-ac29-4dd9-82b1-2ea145e2c801.jpg)

* **daniel-zurita** (1)

	
	Si les arroja error prueben quitando el puerto, ya que en la cadena de conexi√≥n del cluster no se incluye el puerto.
	``` 
	    const MONGO_URI = `mongodb+srv://${USER}:${PASSWORD}@${config.dbHost}/${DB_NAME}?retryWrites=true&w=majority`;
	    
	```
	
	adem√°s que en config tenemos port, no dbport.

* **Betty Rossana Jimenez Cede√±o** (1)

	
	Tengo este error
	
	`MongoParseError: Unescaped at-sign in authority section at parseConnectionString (/home/olivia/Documentos/ESTUDIOS/NODE/movies-api/node_modules/mongodb/lib/core/uri_parser.js:589:21) at connect (/home/olivia/Documentos/ESTUDIOS/NODE/movies-api/node_modules/mongodb/lib/operations/connect.js:297:3) at ConnectOperation.execute (/home/olivia/Documentos/ESTUDIOS/NODE/movies-api/node_modules/mongodb/lib/operations/connect.js:208:5) at executeOperation (/home/olivia/Documentos/ESTUDIOS/NODE/movies-api/node_modules/mongodb/lib/operations/execute_operation.js:81:17) at MongoClient.connect (/home/olivia/Documentos/ESTUDIOS/NODE/movies-api/node_modules/mongodb/lib/mongo_client.js:219:10) at /home/olivia/Documentos/ESTUDIOS/NODE/movies-api/lib/mongo.js:20:21 at new Promise (<anonymous>) at MongoLib.connect (/home/olivia/Documentos/ESTUDIOS/NODE/movies-api/lib/mongo.js:19:29) at MongoLib.getAll (/home/olivia/Documentos/ESTUDIOS/NODE/movies-api/lib/mongo.js:35:17) at MoviesService.getMovies (/home/olivia/Documentos/ESTUDIOS/NODE/movies-api/services/movies.js:12:39)`

* **george-montenegro** (1)

	
	Buenas noches por favor su ayuda con este error  
	adjunto URL ( <https://gitlab.com/kerberos001/curso/-/tree/master/platzi-videos> )
	
	mongodb+srv://admin711:ty0wPxq1anmhv81U@cluster0-shard-00-02-txclx.mongodb.net/dbMovies?retryWrites=true&w=majority  
	listener <http://localhost:3000>  
	Connect succesFull  
	/home/jorgemontenegro/Documentos/WORKSPACE/curso/platzi-videos/node_modules/mongodb/lib/mongo_client.js:274  
	throw new MongoError(‚ÄòMongoClient must be connected before calling MongoClient.prototype.db‚Äô);  
	^
	
	MongoError: MongoClient must be connected before calling MongoClient.prototype.db  
	at MongoClient.db (/home/jorgemontenegro/Documentos/WORKSPACE/curso/platzi-videos/node_modules/mongodb/lib/mongo_client.js:274:11)  
	at /home/jorgemontenegro/Documentos/WORKSPACE/curso/platzi-videos/lib/mongo.js:28:41  
	at executeCallback (/home/jorgemontenegro/Documentos/WORKSPACE/curso/platzi-videos/node_modules/mongodb/lib/operations/execute_operation.js:74:5)  
	at /home/jorgemontenegro/Documentos/WORKSPACE/curso/platzi-videos/node_modules/mongodb/lib/operations/connect.js:209:23  
	at /home/jorgemontenegro/Documentos/WORKSPACE/curso/platzi-videos/node_modules/mongodb/lib/operations/connect.js:299:21  
	at QueryReqWrap.callback (/home/jorgemontenegro/Documentos/WORKSPACE/curso/platzi-videos/node_modules/mongodb/lib/core/uri_parser.js:56:21)  
	at QueryReqWrap.onresolve [as oncomplete] (dns.js:202:10) {  
	name: ‚ÄòMongoError‚Äô,  
	[Symbol(mongoErrorContextSymbol)]: {}  
	}  
	[nodemon] app crashed - waiting for file changes before starting‚Ä¶
	
	Por su ayuda gracias ‚Ä¶

	* **Luis Fern√°ndez** (3)

		
		x2

* **Maximo Martinez Soria** (1)

	
	Por qu√© hace destructuring en todos los par√°metros que reciben los m√©todos?

	* **mrcMesen** (1)

		
		Creo que es por la manera en que envie los parametros, suele enviarlos como objetos y por eso los destructura luego, no se si ser√° un tema de persistencia de los objetos en memoria o alguna ‚Äòbuena practica‚Äô, la verdad me gustar√≠a que lo aclaren.

* **rulobars** (1)

	
	Hola ! a mi me da este error en el servidor :  
	MongoError: MongoClient must be connected before calling MongoClient.prototype.db  
	mi cadena de mongo est√° asi:  
	`mongodb+srv://${aqu√≠ puse mi usu}:${aqu√≠ puse mi pass}@${config.dbHost}/test?retryWrites=true&w=majority`
	
	y en postman me sale esto:
	
	There was an error connecting to <http://localhost:3000/api/movies/>.  
	Why this might have happened:  
	The server couldn‚Äôt send a response:  
	Ensure that the backend is working properly  
	Self-signed SSL certificates are being blocked:  
	Fix this by turning off ‚ÄòSSL certificate verification‚Äô in Settings > General  
	Proxy configured incorrectly  
	Ensure that proxy is configured correctly in Settings > Proxy  
	Request timeout:  
	Change request timeout in Settings > General
	
	¬øAlguien me ayuda por favor?

	* **Juan Franco** (1)

		
		tengo el mismo error no se si hay alguien que me pueda orientar

	* **Joaquin Mayer Breitkreitz** (1)

		
		Para solucionar este error hay que cambiar la url de mongo.
		
		Ya que se conecta local, deberia ser asi: mongodb://${config.dbHost}üòí{config.dbPort}/${DB_NAME}?retryWrites=true&w=majority
		
		Lo que cambia es que en vez de ser mongodb+srv es mongodb y que no se usa el usuario y contrase√±a, solamente el host

	* **Eden Gomez Gress** (1)

		
		Tambien tengo el mismo error: Deberian de brindarnos ayuda porque ya somos varions con este error. Aqui esta el error:
		``` 
		    throw error;
		              ^
		    
		    MongoError: MongoClient must be connected before calling MongoClient.prototype.db
		        at MongoClient.db (/Users/eden/Desktop/platzi/backend-nodejs/movies-api/node_modules/mongodb/lib/mongo_client.js:312:11)
		        at /Users/eden/Desktop/platzi/backend-nodejs/movies-api/lib/mongo.js:29:31
		        at /Users/eden/Desktop/platzi/backend-nodejs/movies-api/node_modules/mongodb/lib/utils.js:717:9
		        at /Users/eden/Desktop/platzi/backend-nodejs/movies-api/node_modules/mongodb/lib/mongo_client.js:222:23
		        at connectCallback (/Users/eden/Desktop/platzi/backend-nodejs/movies-api/node_modules/mongodb/lib/operations/connect.js:350:5)
		        at /Users/eden/Desktop/platzi/backend-nodejs/movies-api/node_modules/mongodb/lib/operations/connect.js:417:14
		        at Server.<anonymous> (/Users/eden/Desktop/platzi/backend-nodejs/movies-api/node_modules/mongodb/lib/topologies/server.js:230:11)
		     at Object.onceWrapper (events.js:299:26)
		        at Server.emit (events.js:209:13)
		        at Pool.<anonymous> (/Users/eden/Desktop/platzi/backend-nodejs/movies-api/node_modules/mongodb/lib/core/topologies/server.js:436:21) {
		      name:'MongoError',
		      [Symbol(mongoErrorContextSymbol)]: {}
		    }
		    
		```

	* **Eden Gomez Gress** (1)

		
		Asi queda la variable:
		``` 
		    const MONGO_URI = `mongodb://${config.dbHost}:${config.dbPort}/${DB_NAME}?retryWrites=true&w=majority`;```
		    
		```

	* **Jos√© Abdiel Ortega V√°zquez** (1)

		
		Te falta el nombre de la base de datos

	* **Eden Gomez Gress** (1)

		
		Gracias por contestar companero, pero creo que si estoy incluyendo =el nombre de la BD
		
		const DB_NAME = config.dbName;
		
		const MONGO_URI = `mongodb://${config.dbHost}:${config.dbPort}/${DB_NAME}?retryWrites=true&w=majority`;
		
		Asi es como tengo declarada la variable

	* **Jos√© Abdiel Ortega V√°zquez** (1)

		
		Quita el puerto

* **darwinyusef** (1)

	
	como se manejan las relaciones usando mongo db ?

* **Luis Miguel Rodriguez** (1)

	
	Una alternativa puede ser Model View Controller(MVC) y se puede usar [Moongose](https://mongoosejs.com/) si se te dificulta el clean code architecture.

* **Nadir Antonio Soza Solis** (1)

	
	Hola @glrodasz tu recomendar√≠as tener una √∫nica clase Servicio que reciba en su constructor el nombre de la colleccion y que esta implemente los CRUD‚Äôs para todas? algo similar a esto‚Ä¶
	``` 
	    const MongoLib = require('../lib/mongo');
	    
	    classServicesCRUD {
	      constructor(_collection) {
	        this.collection = _collection;
	        this.mongoDB = new MongoLib();
	      }
	    
	      asyncgetDataByTags({ tags }) {
	        const query = tags && { tags: { $in: tags } };
	        const data = awaitthis.mongoDB.getAll(this.collection, query);
	        return data || [];
	      }
	    
	      asyncgetDataById({ ID }) {
	        const data = awaitthis.mongoDB.get(this.collection, ID);
	        return data || [];
	      }
	    
	      asynccreateData({ data }) {
	        const createdDataId = awaitthis.mongoDB.create(this.collection, data);
	        return createdDataId;
	      }
	    
	      asyncupdateDataById({ ID, data } = {}) {
	        const updatedDataId = awaitthis.mongoDB.update(this.collection, ID, data);
	        return updatedDataId;
	      }
	    
	      asyncdeleteDataById({ ID }) {
	        const deletedDataId = awaitthis.mongoDB.delete(this.collection, ID);
	        return deletedDataId;
	      }
	    }
	    
	    module.exports = ServicesCRUD;
	    
	    
	```

	* **Jes√∫s Miguel Quinto Teran** (1)

		
		@glrodasz Me hago la misma pregunta, realizar CRUD es tarea de todos los d√≠as y podr√≠a ser muy bueno este enfoque. ¬øtu que opinas?

* **danielsanz (Platzi)** (1)

	
	Repositorio de la clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/capa-de-manejo-de-errores-usando-un-middleware>

* **Juan David Alcala Sanchez** (1)
Buenos d√≠as, alguien podr√≠a colaborarme con una duda? no me sirve el patch al hacer seguimiento, veo que llega hasta el metodo update de ...

	* **Ruben Padilla** (1)

		
		¬°Hola, Juan! Por favor comparte un _screenshot_ de tu c√≥digo para poder brindarte ayuda.

* **Luis Miguel gonzalez** (1)
Cuando pense que todo estaba bien, me salio un error en los servicios que se debe enviar el ID, me sale el siguiente error Error: Argumen...

	* **Luis Miguel gonzalez** (1)

		
		Resolv√≠ el error, era que en la capa de routes/movies.js estaba recibiendo el id de la siguiente manera:
		``` 
		    const moviesId = req.param
		    
		```
		
		y hab√≠a que utilizar las llaves
		``` 
		    const { moviesId } = req.param
		    
		```

* **Luis Miguel gonzalez** (1)
Tengo el siguiente problema al intentar realizar una petici√≥n, me dice Invalid Connetion String. Comparto mi codigo para ver si alguien m...

	* **Luis Miguel gonzalez** (1)

		
		Ya resolvi el Issue, estaba escribiendo mal la URI, la tenia asi:
		``` 
		    const MONGO_URI = `mongo+srv://${USER}:${PASSWORD}@${config.dbHost}/${DB_NAME}?retryWrites=true&w=majority`;
		    
		```
		
		y era:
		``` 
		    const MONGO_URI = `mongodb+srv://${USER}:${PASSWORD}@${config.dbHost}/${DB_NAME}?retryWrites=true&w=majority`;
		    
		```
		
		Por otra parte, me sale otro error cuando dejo el puerto  
		Error: MongoParseError: Ports not accepted with ‚Äòmongodb+srv‚Äô URIs  
		Entiendo que se refiere a que la manera en que lo usa Mongo Atlas en el URI, no permite colocar el puerto.  
		si existe una forma de agregar el puerto les agredeceria.

* **Edward Orlando Hurtado** (1)
Por que el los parametros de las funciones las coloca dentro de llaves y no solamente las coloca como parametros unicos?? Ejemplo el pone...

	* **Juan David Castro (Platzi)** (4)

		
		Esto lo conocemos como **Named Arguments** (o argumentos con nombre).
		
		Imagina que debes crear una funci√≥n para alimentar a tu perrito:
		``` 
		    functionalimentarPerrito(perrito) {
		      perrito.alimentar();
		    }
		    
		    const perrito = new Dog("Patricio");
		    
		    alimentarPerrito(perrito);
		    
		```
		
		Ahora el negocio crece y tu funci√≥n puede alimentar m√°s animales:
		``` 
		    functionalimentarAnimales(perrito, gatito, pescadito, pulgita, conejito) {
		      perrito.alimentar();
		      gatito.alimentar();
		      pescadito.alimentar();
		      pulgita.chuparSangre();
		      conejito.alimentar();
		    }
		    
		```
		
		Ahora al enviar tus argumentos debes saber exactamente en qu√© posici√≥n va cada animal:
		``` 
		    const perrito = new Dog("Patricio");
		    const gatito = new Cat("Michin");
		    const pescadito = new Fish("Nemo");
		    const pulgita = new Flea("El Diablo");
		    const conejito = new Rabbit("Dientes de Acero");
		    
		    alimentarAnimales(perrito, gatito, pescadito, pulgita, conejito);
		    
		```
		
		As√≠ es m√°s f√°cil equivocarte. Si tienes muy bien tus nombres de variables pos todo va a estar bien (como en este caso). Pero imag√≠nate un caso real: tienes 20 archivos diferentes y alguien del equipo a√±ade un nuevo animal todos los d√≠as.
		
		Al usar argumentos con nombres te evitas muchos problemas. No tienes que recordar la posici√≥n de cada argumento, sino solo su nombre.
		``` 
		    functionalimentarAnimales({
		      perrito,
		      gatito,
		      pescadito,
		      pulgita,
		      conejito,
		    }) {
		      perrito.alimentar();
		      gatito.alimentar();
		      pescadito.alimentar();
		      pulgita.chuparSangre();
		      conejito.alimentar();
		    }
		    
		    const perrito = new Dog("Patricio");
		    const gatito = new Cat("Michin");
		    const pescadito = new Fish("Nemo");
		    const pulgita = new Flea("El Diablo");
		    const conejito = new Rabbit("Dientes de Acero");
		    
		    alimentarAnimales({
		      perrito,
		      gatito,
		      pescadito,
		      pulgita,
		      conejito,
		    });
		    
		```
		
		Si no me entendiste nada puedes ver este tutorial: <https://medium.com/@afontcu/cool-javascript-9-named-arguments-functions-that-get-and-return-objects-337b6f8cfa07>. üòÖ

* **SKILLON** (1)
Estoy trabajando desde windows tengo el siguiente error queryTxt EREFUSED cluster0-im9ep.mong...

	* **glrodasz** (1)

		
		Es muy posible que se deba a la version del URI que estas usando: <https://stackoverflow.com/a/55639024/1360383>

* **wilantury** (1)
Hola, no pude conectarme a la BD de mongoDB, he intentado hacerlo con MongoDB Compass y no fue posible. Alguien tiene idea de que estoy o...

	* **Manuel Ojeda** (1)

		
		¬øHaz revisado si la consola te arroja alg√∫n mensaje de error?  
		Posiblemente sea cuestiones de credenciales

* **edwintrumpet** (1)
No pude conectar mi api a la instancia local. Instal√© mongo y parece funcionar bien en local, hasta le cre√© un usuario a la base de datos...

	* **Juan David Castro (Platzi)** (1)

		
		¬°Hola! Claro que te ayudamos. Mu√©stranos tu c√≥digo para ver si es que hay alg√∫n ligero typo o algo por el estilo. Tambi√©n si la consola te muestra alg√∫n error. üôèüêõ

* **Rub√©n Jim√©nez Torres** (0)
tengo este error al momento de guardar nuevos datos MongoError: w has to be anumberorastring``` 

	* **Rub√©n Jim√©nez Torres** (1)

		
		Encontr√© la soluci√≥n, el constructor de la clase MongoLib qued√≥ as√≠
		``` 
		    constructor(){
		            this.client = new MongoClient(MONGO_URI, {
		                useNewUrlParser: true,
		                useUnifiedTopology: true,
		                w: 'majority'
		            });
		            this.dbName = DB_NAME;
		        }
		    
		```

* **oqodigital** (0)
Hola. Todo bien, pero al crear una nueva movie con el lorem ipsum, se crea bien y obtengo el ID, pero cuando hago el get all, solo se gua...

	* **oqodigital** (3)

		
		Era porque cuando hac√≠a post lo hac√≠a como TEXTO no JSON, al igual que el profe lo hizo en el update jejejeje. ‚Äúsi ser√©‚Äù

# Conoce como funcionan los Middleware en Express.js

## 0290. ¬øQu√© es un middleware Capa de manejo de errores usando un middleware

### Descripci√≥n:


### Comentarios:

* **Carlos Rodr√≠guez Huerta** (7)

	
	Trabajo con Windows y tuve un ligero problema con la variable de entorno en el archivo errorHandlres.js
	``` 
	    if(config.dev)//siempre retornaba true
	    
	```
	
	Haci√©ndome imposible visualizar el cambio de funcionalidad, de el errorHandler, en las pruebas con postman al cambiar de entorno(dev to prod).
	
	Resulta que en Windows ocurre lo siguiente:
	``` 
	    // En package.json
	    "start": "set NODE_ENV=production && node index"
	    
	    //en errorHandlers.js
	    console.log(process.env.NODE_ENV === 'production') //false
	    console.log(process.env.NODE_ENV.trim() === 'production') //true
	    
	```
	
	En windows al parecer inserta caracteres especiales a la variable de entorno. Por ello, realic√© los siguientes cambios:
	
	**package.json** :
	``` 
	    "dev": "set DEBUG=app:* && set NODE_ENV=development && nodemon index",
	    
	```
	
	**config/index.js**
	``` 
	    dev: process.env.NODE_ENV.trim() !== 'production',
	    
	```
	
	Para usar el entorno de desarrollo sete√© la variable de entorno ‚Äúdevelopment‚Äù para que al usar trim() no me marque error por asignar un m√©todo a un undefined.

	* **Miguel Segura** (1)

		
		Gracias por la explicacion!

* **Hebert de Le√≥n** (6)

	
	En Windos al parecer para ejecutar _npm run start_ , debe ir esto en el **package.json** :
	``` 
	    {
	      "scripts": {
	        "start": "set NODE_ENV=production&& node index"
	      }
	    }
	    
	```

	* **IngridSagrero** (1)

		
		Gracias, Eso funciona!!!

	* **carlosdummy14** (1)

		
		Ojo, el espacio inexistente entre la palabra producction y && es muy importante!!

	* **Luis Miguel gonzalez** (2)

		
		Como dice carlosdummy14, los espacios pueden afectar, se debe escribir de la siguiente manera:
		``` 
		    {
		      "scripts": {
		        "start": "set NODE_ENV=production&&node index.js"
		      }
		    }
		    
		```

* **edwintrumpet** (4)

	
	**Dato:** El orden en el que ponemos los middlewares en este caso importa much√≠simo.
	
	Estamos poniendo los middlewares de error despu√©s de las rutas porque cuando se crea el error en la ruta pasa al _catch_ y ese _catch_ tiene un callback _next()_ que le pasa el error al siguiente middleware.
	
	El siguiente middleware es _logErrors_ que igual tiene un callback _next()_ que le env√≠a el error al siguiente middleware.
	
	Podemos comprobar que si invertimos el orden de los middlewares y ponemos _ _errorHandler_ antes que _logErrors_ en el _index_ despu√©s de las rutas vemos que no funcionar√° el middleware _logErrors_ porque el middleware _errorHandler_ no est√° pas√°ndole el error a un siguiente middleware por medio del callback _next()_

* **David Behar** (3)

	
	## Middleware
	
	Un Middleware es una capa intermedia que intercepta la informaci√≥n de algo, un middleware se define por defecto con una funci√≥n del siguiente formato:
	``` 
	    function(req,res,next){
	    	next()
	    }
	    
	```
	
	Donde:  
	`req` es un `httpRequest()` con la informaci√≥n de la petici√≥n  
	`res` es un `httpResponse()` con la respuesta de la petici√≥n  
	`next` es un `callback` de la siguiente funci√≥n a llamar
	
	Para definir un middleware que reciba un error, s√≥lo se le agregar√≠a un argumento con el error
	``` 
	    function errorHandler(err, req, res, next){
	    	if(err){
	    		res.status(err.status || 500);
	    		res.json({error:err})
	    	}
	    	next();
	    }
	    
	```

* **jasanhdz** (3)

	
	Seguro mis notas te ayudan a repasar todo el curso, puedes leerlas desde la comidad de tu telefono. üòÑ  
	<https://github.com/JasanHdz/backendnodejs/tree/master/notes>  
	No se rindan, √©xito üí™

	* **Juan Jos√© Vega Quintero** (1)

		
		Mucho, parce excelentes notas.  
		Son el curso en texto jaja

* **danielsanz (Platzi)** (2)

	
	Repositorio de la clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/capa-de-manejo-de-errores-usando-un-middleware>

* **Carlos Vallejo** (1)

	
	Si cuando corren el servidor no diferencia si est√° en producci√≥n o en desarrollo, veriquen su package.json. El comando ‚Äòstart‚Äô debe estar as√≠:
	``` 
	    "start": "set NODE_ENV=production&&node index.js"
	    
	```
	
	Nota: Esto me parece que solo funciona en Windows

* **carlosextra1** (1)

	
	Lanzando el error!

* **carlosextra1** (1)

	
	Middleware de error siempre deben de ir al final de las rutas!!

* **carlosextra1** (1)

	
	Explicaci√≥n muy muy buena de que es un middleware

* **Juanse Calvi√±o** (1)

	
	Hola, una consulta, es m√°s recomendable utilizar
	``` 
	    console.error(err)
	    
	```
	
	para mostrar errores por consola?

	* **carlosextra1** (1)

		
		en consola no hay diferencia, en la consola de google chrome si. Creo que seria igual

* **David Behar** (1)

	
	Mi middleware de errorHandler() no funciona, paso un [branch](https://github.com/behagoras/mongo_store/tree/errorHandler): <https://github.com/behagoras/mongo_store/tree/errorHandler> y copio el c√≥digo
	
	**ErrorHandler.js**
	``` 
	    const { config } = require('../../config');
	    
	    console.log('config.dev', config.dev);
	    
	    function withErrorStack(error, stack) {
	      if (config.dev) {
	        console.log('dev = true');
	        return { error, stack };
	      }
	      return error;
	    }
	    
	    function logErrors(err, req, res, next) { //eslint-disable-line
	      console.log('Erroring');
	      console.log(withErrorStack(err.message, err.stack)); //eslint-disable-line
	      next();
	    }
	    
	    function errorHandler(err, req, res, next) { //eslint-disable-line
	      res.json('erroring v2');
	      console.log('erroring v2');
	      res.status(err.status || 500);
	      res.json(withErrorStack(err.message, err.stack));
	    }
	    
	    module.exports = {
	      logErrors,
	      errorHandler,
	    };
	    
	```
	
	**index.js**
	``` 
	    const express = require('express');
	    const { config } = require('./config/index');
	    const moviesApi = require('./routes/movies');
	    const yearApi = require('./routes/year');
	    const { logErrors, errorHandler } = require('./utils/middleware/errorHandlers');
	    
	    const app = express();
	    
	    // body parser middleware
	    app.use(express.json());
	    
	    yearApi(app);
	    moviesApi(app);
	    
	    //Error middleware
	    app.use(logErrors);
	    app.use(errorHandler);
	    
	    app.listen(config.port, () => {
	      // eslint-disable-next-line no-console
	      console.log(`Listening http://localhost:${config.port}`);
	    });
	    
	    
	```

	* **mayraaceves** (2)

		
		Creo que te hace falta pasarle err a next en la funci√≥n logErrors

	* **David Behar** (1)

		
		Suena l√≥gico, creo que s√≠, gracias Mayra

	* **David Behar** (1)

		
		Noup, se rompe

	* **Jorge Humberto Nemog√° Pinz√≥n** (1)

		
		Prueba con estos cambios:
		``` 
		    functionlogErrors(err, req, res, next) {
		      console.log(err);
		      next(err);
		    }
		    
		    functionerrorHandler(err, req, res, next) { //eslint-disable-line
		      res.status(err.status || 500);
		      res.json(withErrorStack(err.message, err.stack));
		    }
		    
		```
		
		Si ya lo resolviste es bueno que coloques la soluci√≥n, aun si fuera muy personal como un typo o un error en el llamado de modulos que no presentas.

* **David Behar** (1)
Mi middleware de errorHandler() no funciona, paso un branch: https:/...

	* **Juan David Castro (Platzi)** (1)

		
		¬°Hola, David!
		
		¬øTienes alg√∫n error? ¬øO es que el middleware nunca se ejecuta?

* **Alejandro Gonz√°lez Reyes** (1)
A que se si declaro el lanzamiento del error antes de llamada asincrona, me retorna una pila mas completa del error, pero en su mayor√≠a r...

	* **Edward Steven Ramos Palacios** (2)

		
		Como tienes tu c√≥digo?

## 0300. Manejo de errores as√≠ncronos y s√≠ncronos en Express

### Descripci√≥n:


El manejo de errores en Express es el proceso de capturar un error de manera as√≠ncrona como s√≠ncrona . Por defecto Express viene con un manejador de errores por defecto, as√≠ que no es necesario escribir uno para empezar a usarlo.

Los errores que ocurren de manera s√≠ncrona dentro un manejador de rutas o un _middleware_ no requieren trabajo extra. Si un c√≥digo s√≠ncrono lanza un error Express autom√°ticamente capturar√° el error. Por ejemplo:
``` 
    app.get("/", function(req, res) {
      throw new Error("BROKEN"); // Express capturara este error por s√≠ solo.
    });
    
```

Para errores que se retornan desde funciones as√≠ncronas invocadas desde un manejador de ruta o un _middleware_ , es necesario pasar el error como argumento a la funci√≥n `next()`, de esta manera Express capturar√° el error y lo procesar√°. Por ejemplo:
``` 
    app.get("/", function(req, res, next) {
      fs.readFile("/file-does-not-exist", function(err, data) {
        if (err) {
          next(err); // Se debe pasar el error a Express.
        } else {
          res.send(data);
        }
      });
    });
    
```

Es responsabilidad de nosotros capturar errores que puedan ocurrir en c√≥digo as√≠ncrono invocado desde un manejador de ruta o _middleware_ para que Express lo procese. Por ejemplo:
``` 
    app.get("/", function(req, res, next) {
      setTimeout(function() {
        try {
          throw new Error("BROKEN");
        } catch (err) {
          next(err);
        }
      }, 100);
    });
    
```

El ejemplo de arriba usa un bloque `try...catch` para capturar los errores en el c√≥digo as√≠ncrono y pasarlo a Express. Si el bloque `try...catch` fuese omitido, Express no podr√≠a capturar el error debido a que no es parte de un manejador s√≠ncrono de c√≥digo.

Cuando se usan funciones que retornan promesas, puedes simplemente proveer la funcionalidad **next** al final del manejador catch de la promesa y Express autom√°ticamente capturar√° el error. Por ejemplo:
``` 
    app.get("/", function(req, res, next) {
      Promise.resolve()
        .then(function() {
          throw new Error("BROKEN");
        })
        .catch(next); // Errores ser√°n pasados a Express.
    });
    
```

### Comentarios:

* **Nadir Antonio Soza Solis** (3)

	
	En la documentaci√≥n oficial explican un poco mas sobre el tema. [Manejo de Errores Express](https://expressjs.com/en/guide/error-handling.html)

	* **carlosextra1** (1)

		
		Gracias por el aporte!

* **carlosextra1** (2)

	
	Ya hab√≠a usado next() pero no entend√≠a c√≥mo era su funci√≥n. Con esta lectura me queda un poco m√°s claro. Checare documentaci√≥n para entenderlo al 100%

* **Alejandro Gonz√°lez Reyes** (1)

	
	Si se invoca
	``` 
	    next('mensaje del error') 
	    
	```
	
	en lugar de
	``` 
	    thrownewError('mensaje del error')
	    
	```
	
	¬øTiene el mismo efecto, o es obligatorio declararlo as√≠?

	* **Omar Flores Grimontt** (2)

		
		En ese caso lo que sucede es que Express no devolve≈ïia un error, s√≥lo un string.
		
		Pero igual se ir√≠a por 500.

	* **edwintrumpet** (3)

		```
		    thrownewError('mensaje de error')
		    
		```
		
		Crea un mensaje de error
		
		Mientras que la funci√≥n `next()` se encarga de enviarle par√°metros al siguiente middleware, no solo puede enviar mensajes de error sino modificaciones del objeto _req_ por ejemplo, entonces al pasar un string en la funci√≥n `next()` est√° enviando solo eso, un string y nada m√°s, no est√° enviando un error.

## 0310. Capa de validaci√≥n de datos usando un middleware

### Descripci√≥n:


### Comentarios:

* **danielsanz (Platzi)** (2)

	
	Repositorio de una clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/capa-de-validacion-de-datos-usando-un-middleware>

* **carlosextra1** (1)

	
	Crear validationHandler.js OJO ES UN MARCADOR

* **Javier Fuentes Mora** (1)

	
	Nunca lo prueba cierto?

	* **deveeup** (2)

		
		Clases m√°s adelante se usa‚Ä¶

## 0320. ¬øQu√© es Joi y Boom

### Descripci√≥n:


 **Joi** (Object Schema Validation). Sirve para validar que los datos que recibimos vengan en el formato adecuado.

**Boom** (HTTP-friendly error objects). Nos ayuda a imprimir errores comunes en peticiones HTTP de forma sencilla.

### Links:

* [GitHub - hapijs/joi: The most powerful data validation library for JS](https://github.com/hapijs/joi)

* [GitHub - hapijs/boom: HTTP-friendly error objects](https://github.com/hapijs/boom)

### Comentarios:

* **carlosextra1** (1)

	
	Esto me recuerda Laravel. Tambi√©n su manejador de validaci√≥n es muy amigable!

* **Jose Alberto Arango S√°nchez** (1)

	
	Excelente forma de validar los datos, ¬øSaben como usar un servicio como S3 con Nodejs? ¬øPara poder enviar archivos atravez de una petici√≥n que tipo de formato debe ser?  
	Muchas gracias de antemano

	* **carlosextra1** (1)

		
		Es interesante tu pregunta. Tambi√©n espero la respuesta!

## 0330. Implementando Boom

### Descripci√≥n:


### Comentarios:

* **Juan Carlos Garc√≠a Esquivel** (7)

	
	##  **[Boom](https://hapi.dev/family/boom/?v=8.0.1)**
	
	Boom nos provee una serie de utilidades para retornar errores HTTP, cada utilidad es un objeto de respuesta de tipo Boom que incluye las siguientes propiedades:
	
	**`isBoom`** \- si es `true` indica que es una instancia de Boom.
	
	**`isServer`** \- si es `true` indica que el c√≥digo de respuesta es mayor o igual 500, aqu√≠ m√°s informacion de los codigos de respuesta [HTTP status Code](https://developer.mozilla.org/es/docs/Web/HTTP/Status).
	
	**`message`** \- el mensaje del error.  
	**`typeof`** \- el constructor usado para crear el error (ejemplo: `Boom.badRequest`).  
	**`output`** \- la respuesta formateada **(generalmente esta es la que usamos)** y contiene las siguientes claves:
	
	  * **`statusCode`** \- c√≥digo de estatus HTTP.
	  * **`headers`** \- un objeto que contiene encabezados HTTP donde cada clave es un nombre de encabezado y el valor es el contenido del encabezado.
	  * **`payload`** \- el objeto formateado usado como respuesta y contiene las siguientes claves:  
	\- **`statusCode`** \- c√≥digo de estatus HTTP, proviene de `statusCode`  
	\- **`error`** \- nombre derivado del error HTTP `statusCode`.  
	\- **`message`** \- mensaje de error derivado de `error.message`
	
	

	* **Maximo Martinez Soria** (2)

		
		Excelente

	* **carlosextra1** (2)

		
		Gracias por el aporte!

* **danielsanz (Platzi)** (3)

	
	Repositorio de la clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/implementando-boom>

* **Juan Jos√© Vega Quintero** (1)

	
	No olviden instalar boom
	``` 
	    npm i @hapi/boom
	    
	```

* **carlosextra1** (1)

	
	Crear notFoundHandler.js : OJO esto es un marcador

## 0340. Implementando Joi

### Descripci√≥n:


### Comentarios:

* **eduardohackone** (16)

	
	Con la nueva version me funciono de esta manera
	``` 
	    const boom = require('@hapi/boom')
	    const joi = require('@hapi/joi')
	    
	    const validate = (data, schema) => {
	      const { error } = joi.object(schema).validate(data);
	      returnerror
	    }
	    
	    const validationHandler = (schema, check = 'body') => {
	      
	      return (req, res, next) => {
	        consterror = validate(req[check], schema)
	    
	        error? next(boom.badRequest(error)) : next()
	      }
	    }
	    
	    module.exports = validationHandler
	    
	```

	* **Andres Leonardo Arevalo** (1)

		
		Me funciono super bien, much√≠simas gracias

* **Alejandro Gonz√°lez Reyes** (8)

	
	Si tienen problemas para validar, dejo un ejemplo con los cambios m√≠nimos a implementar  
	En lugar de retornar un objeto plano, se retorna un objeto de tipo joi
	``` 
	    const createMovieSchema = joi.object({
	      title: movieTitleSchema.required(),
	      year: movieYearSchema.required(),
	      cover: movieCoverSchema.required(),
	      description: movieDescriptionSchema.required(),
	      duration: movieDurationSchema.required(),
	      contentRating: movieContentRatingSchema.required(),
	      source: movieSourceSchema.required(),
	      tags: movieTagsSchema
	    });
	    
	```
	
	En la secci√≥n del middleware de validaci√≥n, el schema es el que debe validar ahora la informaci√≥n
	``` 
	    functionvalidate(data, schema) {
	      // Esta verificaci√≥n es necesaria, ya que cuando validamos el id pasado como par√°metro, pasamos un objeto plano, por tanto, lo convertimos a uno de tipo joi. (de lo contrario no tenemos acceso al metood validate
	      if (!schema.isJoi) {
	        schema = joi.object({ ...schema });
	      }
	      console.log(data);
	      const { error } = schema.validate(data);
	      return error;
	    }
	    
	```
	
	Espero haber auxiliado a mas de uno.

	* **Alejandro Gonz√°lez Reyes** (4)

		
		Correcci√≥n‚Ä¶  
		El schema solo puede contener objetos planos. Por tanto sus schemas deben quedar como antes
		``` 
		    const createMovieSchema = {
		      title: movieTitleSchema.required(),
		      year: movieYearSchema.required(),
		      cover: movieCoverSchema.required(),
		      description: movieDescriptionSchema.required(),
		      duration: movieDurationSchema.required(),
		      contentRating: movieContentRatingSchema.required(),
		      source: movieSourceSchema.required(),
		      tags: movieTagsSchema
		    };
		    
		```
		
		y en el middleware ahi si es convertirlos a objetos de tipo joi‚Ä¶

* **eduardoluisgr** (6)

	
	Esta es la actualizaci√≥n que hay que hacer para que funcionen las validaciones
	``` 
	    const boom = require('@hapi/boom')
	    const joi = require('@hapi/joi')
	    
	    const validate = (data, schema) => {
	      const { error } = schema.validate(data)
	      return error
	    }
	    
	    const validationHandler = (schema, check = 'body') => {
	      
	      return (req, res, next) => {
	        const error = validate(req[check], schema)
	    
	        error? next(boom.badRequest(error)) : next()
	      }
	    }
	    
	    module.exports = validationHandler
	    
	```

	* **eduardohackone** (5)

		
		Esto me ayudo pero adicional me toco agregar joi.object
		
		const { error } = joi.object(schema).validate(data);

* **David Behar** (4)

	
	## Importante, hay un problema con la versi√≥n
	
	.  
	Si seguiste el tutorial y no te funcion√≥, tal vez tu versi√≥n se instal√≥ mal, para arreglarlo s√≥lo hacer:  
	.
	``` 
	    ~ npm uninstall --save @hapi/joi
	    ~ npm install --save @hapi/joi@15.0.3
	    
	```

* **heysoypaez** (3)

	
	_Estamos colocando el middleware validation handler entre la ruta y el middleware final. Asi mismo podemos colocar varios middleware._
	
	¬°Esto es lo que querias decir con la explicaci√≥n del middleware con la metafora de la poblaci√≥n y el agua! colocamos varios intermediarios antes de la acci√≥n HTTP final.

* **eduardoluisgr** (3)

	
	ahh!!! tambi√©n hay una nueva forma para los schemas asi
	``` 
	    // Un objeto
	    const schema = Joi.object({
	        a: Joi.string()
	    });
	    
	    // Validaci√≥n
	    const { error, value } = schema.validate({ a: 'a normal string' });
	    
	    // Un string f√°cilmente cualquier tipo de valor
	    const schema2 = Joi.string().min(10);
	    
	    // Validaci√≥n 
	    const { error, value } = schema2.validate('Hello');
	    
	```

* **Antonio Luis Gil Rodr√≠guez** (2)

	
	Hay una librer√≠a muy √∫til que nos da la validaci√≥n para los id de mongodb <https://www.npmjs.com/package/joi-objectid>

	* **carlosextra1** (1)

		
		gracias por el aporte!

* **AlexGarrixen** (2)

	
	Hola,como mecionan los compa√±eros,si tienes problemas con la impementacion de joi debido a una actualizacion,puedes hacer esto.
	
	## Create un schema de joi
	``` 
	    const joi = require('@hapi/joi');
	    
	    const movieCreate = joi.object().keys({
	      name: joi.string().min(5).required().error((errors) => newError('EL nombre es requerido y debe tener minimo 5 caracteres')),
	      type: joi.string().min(5).required().error((errors) => newError('EL tipo  es requerido y debe tener minimo 5 caracteres')),
	    })
	    
	```
	
	Adicionalmente puedes pasar un error personalizado en la funcion **error**.
	
	## EL VALIDADOR DE SCHEMA
	``` 
	    const boom = require('@hapi/boom');
	    
	    functionvalidation(schema,data) {
	     //Aca recibes el esquema de joi y ejecutamos su metodo validate donde le pasaras la data(objeto) de la peticion que recibiremos del la peticion,este  y otros mas estan disponible en los schemas,puedes darle un viztazo a la doc 
	      const  { error } = schema.validate(data);
	      return error;
	    }
	    
	    functiondataValidation(schema, check = 'body' ) {
	      returnfunction(req, res, next) {
	        const error = validation(schema, req[check])
	        error ? next(boom.badRequest(error)) : next();
	      }
	    }
	    
	```

* **Diego Ivan Padilla Bernal** (2)

	
	En la nueva versi√≥n de Joi ya no existe la funci√≥n de joi.validate, ahora se hace de otra forma as√≠ que si usas a partir de la versi√≥n 16 este video ya no ayuda

	* **eduardoluisgr** (1)

		
		Ya tengo la soluci√≥n, en los aportes dej√© la actualizaci√≥n

	* **Juan David Castro (Platzi)** (2)

		
		Como lo describe la documentaci√≥n, en vez de usar **`joi.validate`** podemos directamente crear nuestro **`schema`** y al tenerlo listo usar la propiedad **`schema.validate`** para obtener un error o valor de retorno.
		
		üëâ <https://www.npmjs.com/package/@hapi/joi>
		``` 
		    const schema = Joi.object({ /* ... */ });
		    
		    const { error, value } = schema.validate({ /* ... */ });
		    
		```
		``` 
		    Joi.string().validate(undefined); // Ok
		    Joi.string().required().validate(undefined); // No OK
		    
		```

* **danielsanz (Platzi)** (2)

	
	Repositorio de la clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/implementando-joi>

* **Joel Jose Yustiz Carmona** (1)

	
	Joi esta deprecada, encontr√© esta alternativa express-validator, no se si conocen alguna otra

	* **Miguel Angel Escurra** (1)

		
		No esta deprecada, simplemente ahora forma parte del ecosistema hapi.
		
		<https://www.npmjs.com/package/@hapi/joi>

* **Abraham Gonzalez** (1)
No existe una mejor manera de estructurar este c√≥digo, es decir, lo veo un poco desorganizado. Imaginen tener 4 middlewares en una misma ...

	* **Luis Arturo Lira Cerda** (1)

		
		Yo lo organic√© de esta manera, un middleware por l√≠nea me parece mucho m√°s legible
		
		![Screenshot_2.png](https://static.platzi.com/media/user_upload/Screenshot_2-3360487a-9520-405e-a875-6b9e625df0db.jpg)

* **SKILLON** (1)
Me da un error: err? next(boom.badRequest(err)):next(); a que creen que puede deberse?

	* **glrodasz** (1)

		
		Hola @SKILLON, pudiste solucionar el error? No es claro que tipo de error te esta sucediendo. Te recomiendo siempre poner el stack completo del error en la pregunta.

## 0350. Probar la validaci√≥n de nuestros endpoints

### Descripci√≥n:


### Comentarios:

* **Dante Calder√≥n** (18)

	
	Para los que les sale el error `joi.validate is not a function` yo lo solucione cambiando la funcion validate a:
	``` 
	    ....
	    const validate = (data, schema) => {
	      const { error } = joi.object(schema).validate(data)
	    
	      return error
	    }
	    ....
	    
	```
	
	o tambien pueden bajarle la version de `@hapi/joi` a la `15.0.3` como se indico en un comentario abajo

	* **Arlex Felipe Llanos Betancourt** (1)

		
		Gran aporte, me sirvi√≥ mucho, gracias üòÑ

	* **Luis Miguel gonzalez** (1)

		
		Excelente aporte, muchas gracias!

	* **carlosextra1** (1)

		
		Gracias me ayudo bastante!

* **Omar Flores Grimontt** (14)

	
	La versi√≥n 16.1.1 de Joi sali√≥ ayer con algunos cambios que rompen el c√≥digo, por ende es muy probable que las validaciones de datos no te funcionen. Puedes encontrar [ac√°](https://github.com/hapijs/joi/issues/2037) m√°s informaci√≥n al respecto.
	
	Para corregir estos errores s√≥lo debes meter tus objetos de schema que le pasas a la funci√≥n validate en una funci√≥n joi.object(). Y llamar el m√©todo validate desde el schema, ahora s√≥lo va a recibir la data. Esto va a afectar principalmente tres porciones de c√≥digo del proyecto, la primera son los schemas que declaras, quedar√≠an as√≠:
	``` 
	    const joi = require('@hapi/joi')
	    const createMovieSchema = joi.object({
	        title: movieTitleSchema.required(),
	        year: movieYearSchema.required(),
	        cover: movieCoverSchema.required(),
	        description: movieDescriptionSchema.required(),
	        duration: movieDurationSchema.required(),
	        contentRating: movieContentRatingSchema.required(),
	        source: movieSourceSchema.required(),
	        tags: movieTagsSchema
	    })
	    
	```
	
	La segunda son los m√©todos de las rutas de movies, quedar√≠an as√≠:
	``` 
	    const express = require('express')
	    const joi = require('@hapi/joi')
	    const { MovieService } = require('../services')
	    const {
	        movieIdSchema,
	        createMovieSchema,
	        updateMovieSchema
	    } = require('../utils/schemas/movies')
	    
	    const validationHandler = require('../utils/middlewares/validation-handler')
	    
	    functionmoviesApi(app) {
	        const router = express.Router()
	        const movieService = new MovieService()
	    
	        app.use('/api/movies', router)
	    
	        router.get(
	            '/:movieId',
	            validationHandler(joi.object({ movieId: movieIdSchema }), 'params'),
	            asyncfunction(req, res, next) {
	                const { movieId } = req.params
	                try {
	                    const movie = await movieService.getMovie({ movieId })
	                    res.status(200).json({
	                        data: movie,
	                        message: 'movie by id'
	                    })
	                } catch (error) {
	                    next(error)
	                }
	            }
	        )
	    }
	    
	    module.exports = moviesApi
	    
	```
	
	Y la tercera es el m√©todo validate del validation handler que quedar√≠a as√≠:
	``` 
	    functionvalidate(data, schema) {
	        const { error } = schema.validate(data)
	        returnerror
	    }
	    
	```
	
	Habiendo hecho estos cambios vas a poder validar tus datos.
	
	O podr√≠as instalar la versi√≥n 15.1.0 de @hapi/joi que es la que usa el profesor üòõ

	* **oqodigital** (1)

		
		Me funcion√≥  
		`functionvalidate(data, schema) { const { error } = schema.validate(data) returnerror }`  
		pero al querer usar el DELETE me arroja error.  
		y ah√≠ uso el que public√≥ otro:
		
		`function validate(data, schema) { const { error } = joi.object(schema).validate(data); return error; }`
		
		üò¶

	* **oqodigital** (1)

		
		Ahhh, ya encontr√© mi error, no actualic√© el delete con joi.object
		
		jajajajaja
		
		ahora con la soluci√≥n del otro, no era necesario agregar el joi.object en cada uno, sino solo una vez. Ambas cosas sirven.

	* **Andrea M√©ndez D√≠az** (1)

		
		Muchas gracias, realmente me ayudaste.

* **Manuel Ojeda** (7)

	
	Reto cumplido:
	
	Agregue CORS al c√≥digo usando:
	``` 
	    npm i cors
	    
	```
	
	Y siguiendo la documentaci√≥n apliqu√© cors:
	``` 
	    const express = require('express');
	    const cors = require('cors');
	    const app = express();
	    
	    const { config } = require("./config/index");
	    const moviesApi = require('./routes/movies');
	    
	    const { logErrors, wrapErrors, errorHandler } = require('./utils/middleware/errorHandlers');
	    const notFoundHandler = require('./utils/middleware/notFoundHandler');
	    
	    // body.parser
	    app.use(express.json());
	    app.use(cors());
	    
	```
	
	¬øPorqu√© decid√≠ utilizarlo?  
	En clases anteriores quise probar la API desde otro proyecto en Vue solamente para poder consumir la API, obtuve un error de CORS, al aplicar este middleware ya pude consumir el proyecto API en mi proyecto Vue:  
	![chrome_TluF9cFXYK.png](https://static.platzi.com/media/user_upload/chrome_TluF9cFXYK-2f0a1533-efa3-4d2b-b3c9-edbf3d00bd7d.jpg)

	* **daniel-zurita** (1)

		
		excelente, no sabia que para eso era cors.

	* **Juan Jos√© Vega Quintero** (1)

		
		crack

* **platzerito02112019 platzerito02112019** (6)

	
	Al enviar el SEND en c√≥digo como dice la clase me trono " TypeError: joi.validate is not a function " y lo solucione con esto:
	    **`npm uninstall --save @hapi/joi`**
	    **`npm install --save @hapi/joi@15.0.3`**

* **Ernesto Palafox** (2)

	
	Si alguien m√°s se pregunta por qu√© su error stack no se ve igual que el de @glrodasz  
	![](https://i.imgur.com/atkYRpC.png)  
	es por que por defecto el stack est√° desactivado ahora. Ahora hay que hacer:
	``` 
	    const { error } = schema.validate(data, { errors: { stack: true } })
	    
	```

	* **David Behar** (1)

		
		Enqu√© parte hay que hacer eso, en el index?

	* **platzerito02112019 platzerito02112019** (2)

		
		yo tambien pregunto lo mismo, donde va el codigo?

	* **Andres Roberto Coello Goyes** (1)

		
		en el index se importa‚Ä¶  
		pero se escribe en el midelware de validacion

* **Marco Antonio Benites Espinoza** (1)

	
	Reto:
	``` 
	    const express = require('express');
	    const app = express();
	    
	    const bodyParser = require('body-parser');
	    
	    const { config } = require('./config/index');
	    const moviesApi = require('./routes/movies');
	    const notFoundHandler = require('./utils/middleware/notFoundHandler');
	    
	    const {
	        logErrors,
	        wrapErrors,
	        errorHandlers
	    } = require('./utils/middleware/errorHandlers');
	    
	    **// parse application/x-www-form-urlencoded
	    app.use(bodyParser.urlencoded({ extended: false }));
	    // parse application/json
	    app.use(bodyParser.json());**
	    
	    // Se agrega middleware de body-parser
	    //app.use(express.json());
	    
	    // routes
	    moviesApi(app);
	    
	    // Catch 404
	    app.use(notFoundHandler);
	    
	    app.use(logErrors);
	    app.use(wrapErrors);
	    app.use(errorHandlers);
	    
	    app.listen(config.port, function(){
	        console.log(`Listening in http://localhost:${config.port}`);
	    });
	    
	```

* **carlosextra1** (1)

	
	Tengo el siguiente error
	``` 
	    Error: Object schema must be a valid object
	        at new module.exports (/Applications/XAMPP/xamppfiles/htdocs/platzimaster/backend-con-nodejs/movies-api/node_modules/@hapi/hoek/lib/error.js:23:19)
	        at module.exports (/Applications/XAMPP/xamppfiles/htdocs/platzimaster/backend-con-nodejs/movies-api/node_modules/@hapi/hoek/lib/assert.js:20:11)
	        at internals.Base.method [as keys] (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/@hapi/joi/lib/types/keys.js:241:17)
	        at Object.args (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/@hapi/joi/lib/types/keys.js:48:23)
	        at Object.internals.generate (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/@hapi/joi/lib/index.js:259:31)
	        at Object.root.<computed> [as object] (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/@hapi/joi/lib/index.js:58:30)
	        at validate (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/utils/middleware/validationHandler.js:12:27)
	        at /Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/utils/middleware/validationHandler.js:18:23
	        at Layer.handle [as handle_request] (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/express/lib/router/layer.js:95:5)
	        at next (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/express/lib/router/route.js:137:13)
	    Error: Object schema must be a valid object
	        at new module.exports (/Applications/XAMPP/xamppfiles/htdocs/platzimaster/backend-con-nodejs/movies-api/node_modules/@hapi/hoek/lib/error.js:23:19)
	        at module.exports (/Applications/XAMPP/xamppfiles/htdocs/platzimaster/backend-con-nodejs/movies-api/node_modules/@hapi/hoek/lib/assert.js:20:11)
	        at internals.Base.method [as keys] (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/@hapi/joi/lib/types/keys.js:241:17)
	        at Object.args (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/@hapi/joi/lib/types/keys.js:48:23)
	        at Object.internals.generate (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/@hapi/joi/lib/index.js:259:31)
	        at Object.root.<computed> [as object] (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/@hapi/joi/lib/index.js:58:30)
	        at validate (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/utils/middleware/validationHandler.js:12:27)
	        at /Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/utils/middleware/validationHandler.js:18:23
	        at Layer.handle [as handle_request] (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/express/lib/router/layer.js:95:5)
	        at next (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/express/lib/router/route.js:137:13)
	    
	```
	
	Mi C√≥digo
	``` 
	    const boom = require('@hapi/boom');
	    const joi = require('@hapi/joi');
	    
	    functionvalidate(data, schema) {
	        //console.log(schema);
	        const { error } = joi.object(schema).validate(data);
	        returnerror;
	    }
	    
	    functionvalidationHandler(schema, check = 'body') {
	        returnfunction(req, res, next) {
	            const error = validate(req[check], schema);
	            error ? next(boom.badRequest(error)) : next();
	        }
	    }
	    
	    module.exports = validationHandler;
	    
	```

* **abiruh** (1)

	
	la diferencia es que haciendolo como dice Dante, no aplica la validacion al menos no en el POST crea la pelicula sin la validacion, solo colocando el titulo pasa

## 0360. Middlewares populares en Express.js

### Descripci√≥n:


A continuaci√≥n te compartir√© una lista de los _middlewares_ m√°s populares en Express.

## Body parser

Analiza los cuerpos de las solicitudes entrantes en un _middleware_ antes que los manejadores de ruta disponibles bajo la propiedad `req.body`. <http://expressjs.com/en/resources/middleware/body-parser.html>

## CORS

_Middleware_ para habilitar CORS (Cross-origin resource sharing) en nuestras rutas o aplicaci√≥n. <http://expressjs.com/en/resources/middleware/cors.html>

## Morgan

Un _logger_ de solicitudes HTTP para Node.js. <http://expressjs.com/en/resources/middleware/morgan.html>

## Helmet

Helmet nos ayuda a proteger nuestras aplicaciones Express configurando varios encabezados HTTP. ¬°No es a prueba de balas de plata, pero puede ayudar! <https://github.com/helmetjs/helmet>

## Express Debug

Nos permite hacer _debugging_ de nuestras aplicaciones en Express mediante el uso de un _toolbar_ en la pagina cuando las estamos desarrollando. <https://github.com/devoidfury/express-debug>

## Express Slash

Este _middleware_ nos permite evitar preocuparnos por escribir las rutas con o sin _slash_ al final de ellas. <https://github.com/ericf/express-slash>

## Passport

Passport es un _middleware_ que nos permite establecer diferentes estrategias de autenticaci√≥n a nuestras aplicaciones. <https://github.com/jaredhanson/passport>

> Puedes encontrar m√°s _middlewares_ populares en el siguiente enlace: <http://expressjs.com/en/resources/middleware.html>

### Comentarios:

* **Alejandro Gonz√°lez Reyes** (7)

	
	Yo implement√© el middleware de slash
	``` 
	    const express = require('express');
	    const slash = require('express-slash');
	    const MoviesServices = require('../services/movies');
	    
	    // habilitar rutas estructas
	    app.enable('strict routing');
	    
	    functionmoviesApi(app){
	      // Crear el router con algunas opciones para establecer el modo estricto de ruta
	      const router = express.Router({
	        caseSensitive: app.get('case sensitive routing'),
	        strict: app.get('strict routing')
	      });
	    
	      app.use('/api/movies', router);
	      // a√±adir el middleware de slash
	      app.use(slash());
	    ...
	    }
	    
	```

* **Diego Felipe Garcia Cortes** (2)

	
	Implementaci√≥n de morgan para el manejo de logs tipo access.log
	``` 
	    npm i morgan
	    
	```
	
	Para poder tener rotaci√≥n del archivo de log usamos:
	``` 
	    npm i rotating-file-stream
	    
	```
	
	en nuestro index.js agregamos lo siguiente:
	``` 
	    const morgan = require('morgan');
	    const path = require('path');
	    const rfs = require('rotating-file-stream');
	    ...
	    // create a rotating write stream
	    const accessLogStream = rfs.createStream('access.log', {
	        interval: '1d', // rotate daily
	        path: path.join(__dirname, 'log')
	    })
	    
	    //Logger
	    app.use(morgan('combined', { stream: accessLogStream }))
	    ...
	    
	```
	
	Esto nos genera un archivo en la carpeta ./log/access.log con la siguiente salida de ejemplo:
	``` 
	    ::1 - - [17/Jan/2020:22:38:13 +0000]"GET /api/asdsd HTTP/1.1"40460"-""Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.108 Safari/537.36"
	    ::1 - - [17/Jan/2020:22:38:30 +0000]"PUT /api/users/098 HTTP/1.1"20044"-""PostmanRuntime/7.19.0"
	    
	```

* **PaoloTorregrosa** (2)

	
	Implementaci√≥n de helmet:
	
	1: Instalar helmet
	``` 
	    npm i helmet --save
	    
	```
	
	2: Requerirlo dentro de index.js
	``` 
	    const helmet = require('helmet');
	    
	```
	
	3: Usarlo dentro de los midlewares antes de las rutas de la aplicaci√≥n
	``` 
	    app.use(helmet());
	    //Here is moviesApi(app);
	    
	```
	
	Listo, protegidos al establecer multiples encabezados http dentro de la aplicaci√≥n.  
	(Se pueden habilitar y desabilitar funciones de helmet individualmente llam√°ndolas o no independientemente)

* **carlosextra1** (1)

	
	body parse y cords
	``` 
	    /*
	    video 14 https://platzi.com/clases/1646-backend-nodejs/22026-creando-tu-primer-servidor-con-expressjs/
	    para llegar ha este punto se tuvo que instalar y configurar las siguientes dependencias
	    
	    Instalar: express y dotenv
	    
	    Dependencias de desarrollo
	     npm i -D nodemon  eslint eslint-config-prettier eslint-plugin-prettier prettier
	    
	     instalar 
	     npx mrm lint-staged
	    */
	    const express = require('express');
	    const app = express();
	    
	    const cors = require('cors');
	    const bodyParser = require('body-parser');
	    
	    const { config } = require('./config/index');
	    const moviesApi = require('./routes/movies')
	    
	    const { logErrors, wrapErrors, errorHandler } = require('./utils/middleware/errorHandlers');
	    const notFoundHandler = require('./utils/middleware/notFoundHandler');
	    
	    
	    //app.use(express.json());
	    app.use(cors());
	    app.use(bodyParser.json());
	    app.use(bodyParser.urlencoded({extended: false }));
	    
	    moviesApi(app);
	    
	    // para manejar el error 404
	    app.use(notFoundHandler);
	    //menejadores de errores
	    //middleware siempre van al final de las rutas
	    app.use(logErrors);
	    app.use(wrapErrors);
	    app.use(errorHandler);
	    
	    app.listen(config.port, () => {
	        console.log(`Corriendo en http://localhost:${config.port}`);
	    });
	    
	```

* **Jes√∫s Miguel Quinto Teran** (1)

	
	Implementaci√≥n de CORS (Cross-origin resource sharing)
	``` 
	    const express = require('express');
	    const app = express();
	    const cors = require('cors');
	    
	    const { config } = require('./config/index');
	    const moviesApi = require('./routes/movies');
	    const { logError, wrraperError, errorHandler } = require('./utils/middleware/errorsHandler');
	    const notFoundHandler = require('./utils/middleware/notFoundHandler');
	    
	    // Permitir solicitudes cruzadas
	    app.use(cors())
	    
	    // Body parser
	    app.use(express.json());
	    
	    // Routes
	    moviesApi(app);
	    
	    // NotFound
	    app.use(notFoundHandler);
	    
	    // Middleware Error
	    app.use(logError);
	    app.use(wrraperError);
	    app.use(errorHandler);
	    
	    
	    app.listen(config.port, () => {
	        console.log(`Listening http://localhost:${config.port}`);
	    });
	    
	```

# Implementa tests en Node.js

## 0370. Creaci√≥n de tests para nuestros endpoints

### Descripci√≥n:


### Links:

* [GitHub - visionmedia/supertest: üï∑Super-agent driven library for testing node.js HTTP servers using a fluent API.](https://github.com/visionmedia/supertest)

### Comentarios:

* **beaps** (10)

	
	  * [mocha](https://mochajs.org/): nos ayuda a correr los test
	  * [supertest](https://github.com/visionmedia/supertest): levanta un servidor temporal
	  * [sinon](https://sinonjs.org/): crea mocks para tests
	  * [proxyquire](https://github.com/thlorenz/proxyquire) inyecta los mocks cuando se requieren los paquetes
	
	

	* **carlosextra1** (2)

		
		gracias!

* **Omar Flores Grimontt** (5)

	
	¬øAlguien sabe por qu√© esto funciona
	
	En ‚Äòroutes/movies.js‚Äô
	``` 
	    const MovieService = require('../services/MovieService')
	    
	```
	
	En ‚Äòtest/routes.movies.test.js‚Äô
	``` 
	    const route = proxyquire('../routes/movies', {
	            '../services/MovieService': MoviesServiceMock
	    })
	    
	```
	
	Pero esto no:
	
	En ‚Äòroutes/movies.js‚Äô
	``` 
	    const { MovieService } = require('../services/')
	    
	```
	
	En ‚Äòtest/routes.movies.test.js‚Äô
	``` 
	    const route = proxyquire('../routes/movies', {
	            '../services/': { MovieService: MoviesServiceMock }
	    })
	    
	```
	
	?

	* **Ezequiel Guerra** (5)

		
		Depende como lo est√©s exportando es decir,
		
		aqu√≠
		``` 
		    const MovieService = require('../services/MovieService')
		    
		```
		
		lo exportas as√≠:
		``` 
		    module.exports = MovieService
		    
		```
		
		esto dentro de un archivo **MovieService.js.**  
		Ahora si lo quieres exportar haciendo destructuring
		
		debes exportarlo asi:
		``` 
		    module.exports = {
		    	MovieService
		    }
		    
		```
		
		Otra cosa a tener en cuenta es que en el ejemplo que no te funciona lo estas buscando dentro del directorio **services** sin indicar el nombre del archivo.
		``` 
		    const { MovieService } = require('../services/')
		    
		```
		
		para que esto funcione el archivo no debe llamarse MovieService debe ser **services/index.js**
		
		y de nuevo debes exportarlo **module.exports = MovieService** y llamarlo
		``` 
		    const MovieService  = require('../services/') 
		    
		```

* **Alver Ortega** (4)

	
	Les recomiendo jest para los test unitarios, tanto en el front como en el back

* **Juan Sebastian Cortes Torres** (3)

	
	No olviden en test-server hacer uso del parse de express para formato json, el no hacerlo puede generarle error, en su defectoque la prueba falle.
	``` 
	    const express = require('express')
	    const supertest = require('supertest')
	    
	    functiontestServer(route){
	        const app = express()
	        app.use(express.json())
	        route(app)
	        return supertest(app)
	    }
	    
	    module.exports = testServer
	    
	```

* **carlosextra1** (2)

	
	instalar: npm i -D mocha supertest sinon proxyquire

* **cesar-a-guerron** (2)

	
	Al ejecutar el script de test me dio un error porque faltaba setear la variable NODE_ENV
	
	‚Äútest‚Äù: ‚Äúset NODE_ENV=development && mocha --exit‚Äù

* **Luis Rodriguez** (2)

	
	Siempre es bueno escribir las cosas un@ mism@‚Ä¶ pero a veces es m√°s f√°cil con un simple copy/paste:
	
	npm i -D mocha supertest sinon proxyquire
	
	üòÉ

* **danielsanz (Platzi)** (2)

	
	Repositorio de la clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/creacion-de-tests-para-nuestros-endpoints>

* **edwintrumpet** (2)
¬øC√≥mo se hace un test para una ruta que recibe par√°metros? Por ejemplo la ruta para obtener un solo producto GET /api/:productId

	* **Juan Carlos Garc√≠a Esquivel** (2)

		
		Hola Edwin espero no sea muy tarde, la petici√≥n la puedes hacer de la siguiente forma :
		``` 
		    request.get(`/api/movies/12345678`).end...
		    
		```
		
		Como en postman solo tienes que poner la ruta y el valor por par√°metro en este caso el par√°metro productId le coloque el valor de 12345678 puedes ponerle el que tu quieras.

* **lgalagarza** (2)
Hola! Al levantar el servidor de Test, nos presenta el siguiente mensaje: ‚ÄòInvalid stub: ‚Äú‚Ä¶/services/movies‚Äù cannot be undefined‚Äô. Probam...

	* **Erik Ochoa (Platzi)** (3)

		
		El error que nos muestras dice `.../services/movies` la ruta deber√≠a ser `../services/movies` con dos puntos, a menos que hayas cambiado la estructura de directorios.
		
		Si esto no es el error, asegurate de exportar la clase **MoviesServiceMock** , el archivo _/movies-api/utils/mockups/movies.js_ :
		``` 
		    //... RESTO DEL C√ìDIGO
		    
		    classMoviesServiceMock{
		      async getMovies() {
		        returnPromise.resolve(moviesMock);
		      }
		    
		      async createMovie() {
		        returnPromise.resolve(moviesMock[0]);
		      }
		    }
		    
		    module.exports = {
		      moviesMock,
		      filteredMoviesMock,
		      MoviesServiceMock
		    };
		    
		```

* **Cristian Caraballo** (1)

	```
	    npm i -D mocha supertest sinon proxyquire
	    
	```

* **victorhcortes** (1)

	
	Los test no tienen en cuenta el validationSchema que hace parte de la ruta.

* **STYVEN MALDONADO CISNERO** (1)

	
	El proxyquire me genera error :  
	const route = proxyquire(‚Äô‚Ä¶/controllers/routes.js‚Äô, {  
	‚Äô‚Ä¶/services/Animals‚Äô : Animals  
	})  
	TypeError: route is not a function

	* **carlosextra1** (1)

		
		A mi tambien. Lo pudiste resolver?

* **AlejoE02** (1)

	
	El video esta incompleto, hay archivos que Guillermo no explica como por ejemplo utils/mocks/mongoLib.js y otros dos archivos que estan en la carpeta de test, tampoco explica el buildMessage.js en la carpeta de utils.  
	Clase muy incompleta -.-

* **kirtash123** (1)

	
	creo que falta mas detalles sobre el tema de test, deber√≠a ser un modulo completo.

* **XXVSebastianVXX** (1)

	
	Excelente, no ten√≠a en mente la importancia de los test de prueba y como muchos siempre los omito, pero creo que de hoy en adelante ser√° necesario realizarlos en mi c√≥digo.

* **rusbel berm√∫dez rivera** (1)

	
	No entendi como se relacionan las rutas de MoviesServiceMock, cuando hacemos el test con describe, por ejemplo para seleccionar la ruta con getMovie pasando un ID

* **cristofers530** (1)

	
	cuando vayan a crear los ‚Äòservicios‚Äô de mock, aseg√∫rense que las funciones tenga el mismo nombre que del servicio original (osea, si en su capa de servicio para obtener peliculas es getAll, en el mock coloquenlo igual), dure media hora con un error por culpa de una ‚Äòs‚Äô üòÉ
	
	y realmente la consola no es que ayudo mucho para solucionar el error, ya que me daba a entender que el error estaba en el archivo de test en si, y no en el mock xd

* **Alvaro Garracini** (1)
Cuando ejecuto npm run test me da el siguiente error: name: ‚ÄòProxyquireError‚Äô, message: ‚ÄòInvalid stub: ‚Äú‚Ä¶/services/movies‚Äù cannot be unde...

	* **Juan David Castro (Platzi)** (2)

		
		¬øPodr√≠as mostrarnos tu c√≥digo? As√≠ sin verlo es muy dif√≠cil adivinar cu√°l es el error. üôè
		
		Tambi√©n verifica muy bien las rutas de tus archivos. En el mensaje que nos muestras dice "‚Ä¶/services/movies‚Äù. Esos 3 puntos me parecen sospechosos. Tal vez deber√≠an ser solo dos. :eyes;

## 0380. Creaci√≥n de tests para nuestros servicios

### Descripci√≥n:


### Comentarios:

* **jasanhdz** (12)

	
	Creo que investigar√© m√°s porque entend√≠ un 50% ü§Øü§Ø

	* **heysoypaez** (1)

		
		Comparto un poco la inquietud.

	* **oqodigital** (12)

		
		Creo que hay mucho en este curso de node que se consideran ciertas experiencias y conocimientos previos que frente al hilo de cursos tomados en la Escuela de Javascript, que la verdad, puede que ni se tenga. Entiendo lo del por qu√© de los test (que fue demasiado r√°pido explicando eso y deber√≠a recalcarlo en todo momento el por qu√©), pero m√°s all√°, solo vi c√≥digo y c√≥digo y c√≥digo jajaja.  
		Me siento un poco loco, ya viniendo con dos cursos atr√°s de React (y he tomado todos los cursos de manera peri√≥dica, para no perder el hilo), pero en s√≠, ha sido bastante dif√≠cil.

	* **rusbel berm√∫dez rivera** (2)

		
		Comparto, este curso se he me complicado un poco por falta de tiempo para dedicarle, otro poco por su extensi√≥n, no es rindan

* **Fernando Azuaje** (3)

	
	Esta lectura esta interesante para entender un poco mas acerca de tests y los terminos nombrados <https://solidgeargroup.com/tests-unitarios-en-javascript-sinon/?lang=es>

* **danielsanz (Platzi)** (2)

	
	Repositorio de la clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/creacion-de-tests-para-nuestros-servicios>

* **carlosextra1** (1)

	
	me arroja el siguiente error. Alguna Idea!
	
	ya he comparado mi c√≥digo con el del profesor y todo esta bien
	``` 
	    > backend-con-nodejs@1.0.0 test /Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api
	    > mocha --exit
	    
	    
	    ProxyquireError: Invalid stub:"../services/movies" cannot be undefined
	        at Proxyquire.load (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/proxyquire/lib/proxyquire.js:115:13)
	        at Suite.<anonymous> (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/test/routes.movies.test.js:8:17)
	        at Object.create (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/mocha/lib/interfaces/common.js:140:19)
	        at context.describe.context.context (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/mocha/lib/interfaces/bdd.js:42:27)
	        at Object.<anonymous> (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/test/routes.movies.test.js:7:1)
	        at Module._compile (internal/modules/cjs/loader.js:956:30)
	        at Object.Module._extensions..js (internal/modules/cjs/loader.js:973:10)
	        at Module.load (internal/modules/cjs/loader.js:812:32)
	        at Function.Module._load (internal/modules/cjs/loader.js:724:14)
	        at Module.require (internal/modules/cjs/loader.js:849:19)
	        at require (internal/modules/cjs/helpers.js:74:18)
	        at requireOrImport (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/mocha/lib/esm-utils.js:15:12)
	        at Object.exports.loadFilesAsync (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/mocha/lib/esm-utils.js:28:26)
	        at Mocha.loadFilesAsync (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/mocha/lib/mocha.js:351:19)
	        at singleRun (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/mocha/lib/cli/run-helpers.js:107:15)
	        at exports.runMocha (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/mocha/lib/cli/run-helpers.js:144:11)
	        at Object.exports.handler (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/mocha/lib/cli/run.js:306:11)
	        at Object.runCommand (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/yargs/lib/command.js:242:26)
	        at Object.parseArgs [as _parseArgs] (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/yargs/yargs.js:1113:24)
	        at Object.parse (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/yargs/yargs.js:575:25)
	        at Object.exports.main (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/mocha/lib/cli/cli.js:68:6)
	        at Object.<anonymous> (/Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api/node_modules/mocha/bin/mocha:133:29)
	        at Module._compile (internal/modules/cjs/loader.js:956:30)
	        at Object.Module._extensions..js (internal/modules/cjs/loader.js:973:10)
	        at Module.load (internal/modules/cjs/loader.js:812:32)
	        at Function.Module._load (internal/modules/cjs/loader.js:724:14)
	        at Function.Module.runMain (internal/modules/cjs/loader.js:1025:10)
	        at internal/main/run_main_module.js:17:11
	    npm ERR! code ELIFECYCLE
	    npm ERR! errno 1
	    npm ERR! backend-con-nodejs@1.0.0test:`mocha --exit`
	    npm ERR! Exit status 1
	    npm ERR! 
	    npm ERR! Failed at the backend-con-nodejs@1.0.0 test script.
	    npm ERR! This is probably not a problem with npm. There is likely additional logging output above.
	    
	    npm ERR! A complete log of this run can be found in:
	    npm ERR!     /Users/carlosramirez/.npm/_logs/2020-04-04T09_39_12_923Z-debug.log
	    
	    carlosramirez@MacBook-Pro-de-Carlos /Applications/XAMPP/xamppfiles/htdocs/platzi master/backend-con-nodejs/movies-api                                                                                           master
	    ‚ö° ```
	    
	```

## 0390. Creaci√≥n de tests para nuestras utilidades

### Descripci√≥n:


### Comentarios:

* **heysoypaez** (8)

	
	TDD es test driven development.
	
	En otras palabras: crear primero las pruebas que hay que superar y despu√©s desarrollar el c√≥digo.
	
	  * El profesor considera magn√≠fico usar esto cuando se tiene muy claro la l√≥gica de negocio.
	  * Si no lo tienes claro no es recomendable.
	  * Tambi√©n es recomendable hacerlo cuando tienes un bug para que tu soluci√≥n de √©l perdure en el tiempo.
	
	

* **Enrique Devars (Platzi)** (3)

	
	Otra manera de resolver si el mensaje es listado lo pueden hacer con el operador ternario üòÉ
	``` 
	    functionbuildMessage(entity, action) {
	      return action === "list" ? `${entity}s ${action}ed` : `${entity}${action}d`;
	    }
	    
	    module.exports = buildMessage;
	    
	    
	```

* **danielsanz (Platzi)** (3)

	
	Repositorio de la clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/creacion-de-tests-para-nuestras-utilidades>

* **carlosextra1** (1)

	
	wuff creo que tendr√© que ver esto de test un par de veces mas!

* **Andres Leonardo Arevalo** (1)

	
	Este curso es un tesoro dentro de platzi, este y el curso avanzado de Nodejs con Julian duque son excelentes.

	* **Juan Jos√© Vega Quintero** (1)

		
		La cuesti√≥n es entenderlo y aplicarlo üò¶

## 0400. Agregando un comando para coverage

### Descripci√≥n:


### Comentarios:

* **IngridSagrero** (3)

	
	Alguien m√°s tuvo este error:  
	‚Äúopen‚Äù no se reconoce como un comando interno o externo‚Ä¶

	* **platzerito02112019 platzerito02112019** (2)

		
		si ami me salio error y no abrio el html.
		``` 
		    Nose puede conseguir un descriptor de archivo referido a la consola
		    npm ERR! code ELIFECYCLE
		    npm ERR! errno 1
		    npm ERR! movies-api@1.0.0 report: `nyc report --reporter=html && open coverage/index.html````
		    
		    
		    
		```

	* **david_gtz** (2)

		
		yo tuve el mismo problema y buscando en la documentaci√≥n de nyc, vi que esta mal escrito el script debe de ser **reporter** en lugar de **report**.
		``` 
		    "report": "nyc report --reporter=html && open coverage/index.html"
		    
		```

	* **Jorge Humberto Nemog√° Pinz√≥n** (8)

		
		A m√≠ el comando `open` tampoco opera as√≠ que lo cambie por:
		``` 
		    {
		    "scripts": {
		    	"report": "nyc report --reporter=html && URL='./coverage/index.html'; xdg-open $URL || sensible-browser $URL || x-www-browser $URL"
		    	}
		    }
		    
		```

	* **Jhurgen Maraza** (9)

		
		Simplemente cambias el Open (MacOs) por el Start (Windows)
		``` 
		    "report": "nyc report --reporter=html && start coverage/index.html"
		    
		```

	* **Juan Jos√© Vega Quintero** (1)

		
		Nada de lo anterior funciona üò¶

* **jorgeoxi** (2)

	
	Que interesante toda la parte de **coverage** , sin duda, buenas pr√°cticas para aplicarlas en proyectos futuros.

* **carlosextra1** (1)

	
	uff mucho que experimentar con test!

* **rusbel berm√∫dez rivera** (1)

	
	alguien pudo resolver con peticion get a un Id?
	
	aqui mi codigo, pero me responde con 301
	``` 
	        describe('GET /movies/:movieId', function () {
	            
	            it('should respond with status 200', function (done) {
	                var movieId = '55419c54bad54b35a9cb32e64c949102/'
	                request.get('/api/movies/' + movieId )
	                    .expect(200, done);
	            });```
	    
	```

	* **Corporativo The Villa Group Resorts** (2)

		
		Asegurate de estar creando el metodo en tu clase MoviesServiceMock

	* **rusbel berm√∫dez rivera** (1)

		
		En efecto hice el metodo respectivo, pero proxiquire no llamaba a la ruta correspondiente, ni siquiera pude obtener el status 200

	* **Jos√© Abdiel Ortega V√°zquez** (1)

		
		Tienes que poner un id que pase el middleware de validaci√≥n del id  
		como 5e62ed0afc13ae0eae000009

* **rdelacruz** (1)

	
	Test del Post
	``` 
	    describe.only('POST /movies/', function() {
	            it('Should respond with status 201', function(done) {
	                request.post('/api/movies').expect(201, done)
	            })
	            
	            it('Should respond with the movie created id', function(done) {
	                request
	                    .post('/api/movies')
	                    .end((err, res) => {
	                        assert.deepEqual(res.body, {
	                            data: moviesMock[0].id,
	                            message: 'movie created'
	                        })
	            
	                        done()
	                    })
	            })
	        })```
	    
	```

* **danielsanz (Platzi)** (1)

	
	Repositorio de la clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/agregando-un-comando-para-coverage>

* **Juan Jos√© Vega Quintero** (1)
Alguien pudo hacer el coverage en html?

## 0410. Debugging e inspect

### Descripci√≥n:


## Haciendo _debugging_

Para aprovechar por completo la funcionalidad de _debugging_ que implementa Express, lo que recomiendo es cambiar todos los `console.log` por `debug` haciendo uso de un _namespace_ de la siguiente forma:
``` 
    const debug = require("debug")("app:server");
    debug("Hello debug");
    
```

De esta manera si ejecutamos nuestra aplicaci√≥n con el comando `DEBUG=app:* node index.js` nos mostrar√° los diferentes logs.

Los _namespaces_ que recomiendo son los siguientes:

  * **app:server** para todo lo relacionado con el inicio del servidor como el mensaje `Listening on http://localshost`
  * **app:db** para todo lo relacionado con _logs_ de las bases de datos, inicializaci√≥n y ejecuci√≥n de _scripts_.
  * **app:error** para todo lo relacionado con errores en nuestra aplicaci√≥n.



> N√≥tese que esta convenci√≥n es opcional, es decir, tu puedes seleccionar cualquier _namespace_. Lo m√°s importante es que sea el mismo que se pasar√° en la opci√≥n **DEBUG**.

Express.js por defecto ya trae unos _logs_ de _debugging_ por defecto los podemos activar mediante la variable de entorno `DEBUG=express:*`.

Por lo que recomiendo los _scripts_ en nuestro archivo `package.json` de la siguiente manera:
``` 
      "scripts": {
        "dev": "DEBUG=express:*,app:* nodemon index",
        "debug": "DEBUG=express:*,app:* npm run start",
      },
    
```

## Ejecutando el modo _inspect_ en desarrollo

El modulo `inspect` de Node.js nos permite ejecutar un ambiente para hacer _debugging_ de c√≥digo haciendo uso de la consola de desarrolladores de Google. Para ejecutarlo en modo desarrollo con `nodemon` basta con agregar el flag `--inspect` por lo que recomiendo el siguiente script en nuestro archivo `package.json`
``` 
      "scripts": {
        "inspect": "DEBUG=express:*,app:* nodemon --inspect index"
      },
    
```

### Comentarios:

* **carlosextra1** (3)

	
	Cierre del tema de test muy bien hecho, pero a mi en lo personal es un nuevo objetivo por aprender porque creo que estas clases me dieron el panorama de lo que es y lo que puedes llegar hacer con proyectos grandes!!

* **Jeison Vargas** (3)

	```
	    app.listen(config.port, function() {
	      const debug = require('debug')('app:server');
	      debug(`Listening http://localhost:${config.port}`)
	    });
	    
	```

# Despliega tu primera aplicaci√≥n en Express.js

## 0420. Considerando las mejores pr√°cticas para el despliegue

### Descripci√≥n:


  * Remover contrase√±as quemadas.
  * Encapsular c√≥digo spaghetti.
  * Revisar la estructura del proyecto.
  * Configurar los scripts de build.
  * Agregar soporte de cach√©.
  * A√±adir HTTPS y CORS.
  * Revisar otras pr√°cticas de seguridad.



### Links:

* [Curso de Buenas Pr√°cticas para la Escritura de C√≥digo](https://platzi.com/cursos/mejor-codigo/)

* [Category:OWASP Top Ten Project - OWASP](https://www.owasp.org/index.php/Category:OWASP_Top_Ten_Project)

* [Removing sensitive data from a repository - GitHub Help](https://help.github.com/articles/removing-sensitive-data-from-a-repository/)

### Comentarios:

* **Alejandro Gonz√°lez Reyes** (3)

	
	Le dedicar√© tiempo a las recomendaciones de la OWASP. Conoc√≠a el csrf desde laravel pero veo que hay m√°s.

	* **carlosextra1** (2)

		
		No sabia que es OWASP => The Open Web Application Security Project

* **Juan Jos√© Vega Quintero** (1)

	
	<https://owasp.org/>

## 0430. Variables de entorno, CORS y HTTPS

### Descripci√≥n:


## Como usar las variables de entorno para diferente ambientes

Ya vimos c√≥mo en nuestro ambiente local podemos hacer uso de las variables de entorno usando el archivo `.env` y la librer√≠a `dotenv`. Generalmente lo que se recomienda es usar el mismo para los diferentes ambientes como **Staging (Pruebas)** y **Producci√≥n**.

Para ello se debe acceder al servidor remoto:

  1. Duplicar el archivo `.env.example` y renombrarlo por `.env`.
  2. Cargar las respectivos valores de las variables de entorno.
  3. Usar valores y servicios diferentes para cada ambiente, esto quiere decir que las credenciales de desarrollo, _staging_ y producci√≥n deben ser completamente diferente.
  4. Si se quiere tener un _backup_ de estos valores se recomienda usar las notas seguras de aplicaciones como [1Password](https://1password.com/) o [LastPass](https://www.lastpass.com/).



> Como lo hemos dicho antes no se debe hacer _commit_ del archivo `.env` y este debe estar en el `.gitignore`, ademas se recomienda manejar solo un archivo `.env`. M√°s informaci√≥n: <https://github.com/motdotla/dotenv#faq>

### Cuando no es posible acceder al servidor remoto

Algunos servicios como [Heroku](https://www.heroku.com/) o [Now](https://zeit.co/now) no nos permiten acceder a un servidor remoto pues la administraci√≥n del servidor es controlada por los mismos servicios, sin embargo cada servicio tiene sus mecanismos para establecer las variables de entorno:

  * [Configuraci√≥n de variables de entorno en Heroku](https://devcenter.heroku.com/articles/config-vars)
  * [Configuraci√≥n de variables de entorno en Now](https://zeit.co/docs/v2/development/environment-variables)



### Variables de entorno de forma nativa

El uso del archivo `.env` junto con la biblioteca `dotenv` es un mecanismo que nos facilita la configuraci√≥n de variables de entorno pero si por alguna raz√≥n las quisi√©ramos cargar de manera nativa, es decir desde el sistema operativo recomiendo este tutorial de [Digital Ocean](https://www.digitalocean.com/community/tutorials/how-to-read-and-set-environmental-and-shell-variables-on-a-linux-vps)

## Habilitando CORS en producci√≥n

El Intercambio de Recursos de Origen Cruzado (Cross-Origin Resource Sharing) es un mecanismo que agrega unos encabezados (Headers) adicionales HTTP para permitir que un _user agent_ (generalmente un navegador) obtenga permisos para acceder a los recursos de un servidor en un _origin_ distinto (dominio) del que pertenece.

**Por ejemplo una solicitud de origen cruzado seria** hacer una petici√≥n AJAX desde una aplicaci√≥n que se encuentra en <https://dominio-a.com> para cargar el recurso <https://api.dominio-b.com/data.json>.

> Por razones de seguridad, los navegadores restringen las solicitudes HTTP de origen cruzado iniciadas dentro de un script.

Si necesitamos permitir request desde un dominio diferente al del servidor podemos usar el _middleware_ `cors` para permitirlo, pero es importante no dejarlo expuesto a todos los dominios.

### Habilitar CORS para todos los _request_ (No recomendado en producci√≥n)
``` 
    const express = require("express");
    const cors = require("cors");
    const app = express();
    
    app.use(cors());
    
    app.get("/products/:id", function(req, res, next) {
      res.json({ msg: "This is CORS-enabled for all origins!" });
    });
    
    app.listen(8000, function() {
      console.log("CORS-enabled web server listening on port 8000");
    });
    
```

### Habilitar CORS para los _request_ espec√≠ficos de un cliente (Recomendado para producci√≥n)
``` 
    const express = require("express");
    const cors = require("cors");
    const app = express();
    
    const corsOptions = { origin: "http://example.com" };
    
    app.use(cors(corsOptions));
    
    app.get("/products/:id", function(req, res, next) {
      res.json({ msg: "This is CORS-enabled for only example.com." });
    });
    
    app.listen(8000, function() {
      console.log("CORS-enabled web server listening on port 8000");
    });
    
```

Debemos tener en cuenta que para aplicaciones _server-side_ es poco probable que necesiten el uso de CORS debido a que las aplicaciones conviven en el mismo dominio. Sin embargo, es buena practica habilitarlo para los llamados externos de nuestra API.

M√°s informaci√≥n sobre el _middleware_ CORS en <https://expressjs.com/en/resources/middleware/cors.html>

## C√≥mo funciona y por qu√© es importante el uso de HTTPS

El Protocolo Seguro de Transferencia de Hipertexto (HTTPS) es un protocolo HTTP que funciona en el puerto 443 y utiliza un cifrado basado en SSL (Secure Sockets Layer) / TLS (Transmission Layer security) con el fin de crear un canal de comunicaci√≥n seguro entre el cliente y el servidor.

### Por qu√© usar HTTPS

Una de las razones por la cual siempre debemos usar sitios con HTTPS es que sin este cualquier individuo podr√≠a efectuar ataques conocidos como [man-in-the-middle](https://en.wikipedia.org/wiki/Man-in-the-middle_attack) o [eavesdropping](https://en.wikipedia.org/wiki/Eavesdropping) y obtener nuestro usuario y contrase√±a en el momento en que intentamos acceder a este servicio que no tiene HTTPS establecido.

### C√≥mo funciona

  1. El cliente env√≠a un mensaje al servidor y este responde con su certificado publico.
  2. El cliente comprueba que este certificado sea valido y toma la llave publica.
  3. El cliente genera una cadena llamada `pre-master secret` y la cifra usando la llave publica del servidor y se lo env√≠a.
  4. El servidor usa su llave privada para comprobar el `pre-master secret`.
  5. En ese momento tanto el cliente como el servidor usan el `pre-master secret` para generar un `master secret` que es usado como una llave sim√©trica.
  6. Teniendo este par de llaves ya se pueden enviar mensajes seguros entre ellos.



### C√≥mo habilitar HTTPS en nuestro servidor

Dependiendo el servicio de _hosting_ que estemos usando puede ofrecernos o no una instalaci√≥n de certificados de seguridad SSL/TLS que pueden tener alg√∫n costo. Sin embargo existen servicios como [Let‚Äôs Encrypt](https://letsencrypt.org/) que permiten la instalaci√≥n de este certificado completamente gratis. Servicios como Now y Heroku ofrecen HTTPS por defecto.

M√°s informaci√≥n:

  * <https://letsencrypt.org/how-it-works/> <https://www.digitalocean.com/community/tutorials/how-to-secure-nginx-with-let-s-encrypt-on-ubuntu-16-04>
  * <https://devcenter.heroku.com/articles/ssl>
  * <https://devcenter.heroku.com/articles/automated-certificate-management>
  * <https://zeit.co/docs/v1/features/certs>



### Comentarios:

* **carlosextra1** (1)

	
	En algun momento me tope con que no podia hacer peticiones a mi [api.dominio.com](http://api.dominio.com) desde [app.dominio.com](http://app.dominio.com) y siempre me marco esto de los CORS fue en ese momento cuando escuche por primera vez de esto!!

* **Sebas20** (1)

	
	SI alguno la API le funcionaba en Postman y no en el front, les recomiendo instalar cors ($ npm install cors) con eso ya solucionan, dicho problema.

	* **Jes√∫s Miguel Quinto Teran** (1)

		
		Llegue a tener este problema hace un par de A√±os mientras desarrollaba una plataforma que estaba compuesta por un BackEnd en Laravel y un Front en Vuejs. Recuedo que me volvi√≥ loco por un d√≠a.

	* **JaimeRamos** (1)

		
		en el front?

## 0440. ¬øC√≥mo implementar una capa de manejo de cach√©

### Descripci√≥n:


### Links:

* [Cache-Control - HTTP | MDN](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Cache-Control)

* [Performance Best Practices Using Express in Production](https://expressjs.com/en/advanced/best-practice-performance.html#cache-request-results)

* [Performance Best Practices Using Express in Production](https://expressjs.com/en/advanced/best-practice-performance.html#set-node_env-to-production)

### Comentarios:

* **Nadir Antonio Soza Solis** (4)

	
	Por alguna raz√≥n que no logre identificar la configuraci√≥n de la cache en Windows 10 no funciona utilizando la funcion cacheResponse de la forma que el profe la creo:
	``` 
	    const { config } = require('../config');
	    
	    functioncacheResponse(res, seconds) {
	      if (!config.dev) {
	        res.set('Cache-Control', `public, max-age=${seconds}`);
	      }
	    }
	    
	```
	
	Por lo cual hice un peque√±o cambio que aqu√≠ les dejo
	``` 
	    require('dotenv').config();
	    
	    functioncacheResponse(res, seconds) {
	      if (process.env.NODE_ENV) {
	        res.set('Cache-Control', `public, max-age=${seconds}`);
	      }
	    }
	    
	```
	
	Espero les sea de utilidad.

	* **Andres Roberto Coello Goyes** (1)

		
		Si amigo a mi me sirvi√≥ tengo windosw 10‚Ä¶  
		lo mismo me paso con el server en producci√≥n pero ya lo arregle‚Ä¶  
		saludos

	* **Juan Jos√© Vega Quintero** (1)

		
		A mi me funcion√≥ como el profesor lo hizo y tambi√©n tengo windows 10

* **danielsanz (Platzi)** (3)

	
	Repositorio de la clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/como-implementar-una-capa-de-manejo-de-cache>

* **Matias Niz** (2)

	
	Tiene sentido implementar chache en un servicio como now en su version 2? es decir, serverless?

	* **Gabriel De Andrade (Platzi)** (3)

		
		Hola Matias! Como puedes ver [ac√°](https://zeit.co/docs/v2/network/caching/) Now tiene soporte para cach√© por lo que si, tiene sentido implementar cach√©. Saludos üòÑ

* **Arlex Felipe Llanos Betancourt** (1)

	
	Muy bueno el concepto, aplicaci√≥n y funcionamiento del Cache Control para estos casos, üòÑ

* **Jes√∫s Miguel Quinto Teran** (1)

	
	Excelente clase, la cache para desarrollo suele ser un problema; por lo general usaba una ventana de inc√≥gnito o limpiaba la cache con la extensi√≥n Clear Cache.
	
	Esta es una soluci√≥n realmente elegante.

	* **carlosextra1** (1)

		
		Totalmente de acuerdo yo he tenido los mismos problemas!!

* **Andres Roberto Coello Goyes** (1)

	
	Si estas en windows puede que tengas problemas para ejecutar **npm run start**  
	Tenes que modificar un poco el script
	``` 
	    SET NODE_ENV=production & node./index.js
	    
	```

## 0450. ¬øC√≥mo contener tu aplicaci√≥n en Docker

### Descripci√≥n:


Para contener nuestra aplicaci√≥n en Docker y ejecutarla lo primero es asegurarnos que tenemos instalado Docker.

Podemos seguir las instrucciones para Windows en <https://docs.docker.com/docker-for-windows/install/> o las instrucciones para Mac en <https://docs.docker.com/docker-for-mac/install/>.

Luego lo que debemos hacer es crear un nuevo archivo llamado `Dockerfile` y en el insertamos el siguiente contenido:
``` 
    FROM node:10-alpine
    WORKDIR /srv/app
    COPY . .
    RUN npm install
    EXPOSE 3000
    ENV NODE_ENV=production
    CMD ["node", "index.js"]
    
```

Con el siguiente script creamos una imagen con nuestro de nuestro aplicativo.
``` 
    docker build -t movies-api .
    
```

Con el siguiente _script_ podemos ejecutar nuestra imagen en modo `detach`.
``` 
    docker run -d movies-api
    
```

Si nos dirigimos a `http://localhost:3000` deber√≠amos ver nuestra API funcionando.

### Comentarios:

* **Omar Flores Grimontt** (12)

	
	[Instrucciones](https://docs.docker.com/install/linux/docker-ce/ubuntu/) para la instalaci√≥n de Docker en Ubuntu.

	* **heysoypaez** (3)

		
		Gracias buen hombre!

* **Javier Fuentes Mora** (10)

	
	Insisto esto deber√≠a estar en un video no en texto para eso mejor googleo

	* **jandrey** (1)

		
		Te recomiendo el curso de docker, y tambi√©n esta lectura [instalaci√≥n de docker](https://johnserrano.co/blog/instalacion-de-docker)

* **Omar Flores Grimontt** (10)

	
	Si el contenedor les corre, pero no pueden acceder a la api mediante `http://localhost:3000`, det√©nganlo y corran el comando run de la siguiente manera:
	``` 
	    docker run -p 3000:3000 -d movies-api
	    
	```

	* **Ricardo Medina** (2)

		
		Gracias @omarefg, el que coloco el profesor no me sirvio.

	* **carlosextra1** (2)

		
		gracias me funciono perfecto en mac

* **carlosextra1** (1)

	
	OJO el Dockerfile => va en la carpeta de movies_api  
	Pegamos el c√≥digo:
	``` 
	    FROM node:10-alpine
	    WORKDIR/srv/app
	    COPY. .
	    RUNnpm install
	    EXPOSE3000
	    ENV NODE_ENV=production
	    CMD["node", "index.js"]
	    
	```
	
	corremos el comando
	``` 
	    dockerbuild -t movies-api .
	    
	```
	
	y hasta aqu√≠ todo OK
	
	pero al correr el comando
	``` 
	    docker run -d movies-api
	    
	```
	
	no me funciona cuando voy a <http://localhost:3000>

* **rusbel berm√∫dez rivera** (1)

	
	Desafortunadamente no se puede instalar Docket en windows 10 ya que requerimos tener activada la opci√≥n de virtualizaci√≥n (solo disponible en windows 10 pro), les dejo un link para quienes quieran comprar una licencia OEM (va quemado a la motherboard no la puedes compartir) <http://www.cdkoffers.com/sk/windows10ProOem>, usen el codigo tq20, o tc20 para obtener un descuento adicional, termine comprando a buen precio

* **Ricardo Medina** (1)

	
	Para los que usan Linux Fedora 31.
	
	[Tutorial instalar docker Fedora 31](https://medium.com/@drpdishant/installing-docker-on-fedora-31-beta-6c7a05901613)
	
	  * Crear el archiv Dockerfile en la raiz del proyecto y agregar el contenido que dejo el profesor.
	
	  * Ejecutar el comando para crear la imagen.
	
	
	
	``` 
	    dockerbuild -t movies-api .
	    
	```
	
	  * Habilitar docker y levantar el servicio.
	
	
	``` 
	    sudo systemctl start docker
	    
	    sudo systemctl enable docker
	    
	    
	```
	
	  * Ejecutar la imagen
	
	
	``` 
	    docker run -p 3000:3000 -d movies-api
	    
	```
	
	Listo!

* **rusbel berm√∫dez rivera** (1)

	
	segui lo pasos, sin embargo usando windows 10 con un container de linux, si puedo entrar a localhost pero las rutas no funcionaron.

* **Wilson Marino Pablo Mendez** (1)

	
	Al parecer no es compatible con ‚Äúwindows 10 home‚Äù üò•

	* **zach** (1)

		
		Lamentablemente no, Docker requiere virtualizacion y esta solo esta disponible en windows pro

	* **Wilson Marino Pablo Mendez** (1)

		
		Si‚Ä¶ Lo que hiso fue activar windows pasarlo a PRO.

* **Jes√∫s Miguel Quinto Teran** (1)

	
	Docker es genial; pero algo complejo. En platzi hay un curso de Docker y esta muy bueno. <https://platzi.com/clases/docker/>

* **Sebastian** (1)

	
	El archivo DockerFile va en la raiz del proyecto?

	* **Javier Fuentes Mora** (2)

		
		x2 esto por eso deberia de haber video

	* **rusbel berm√∫dez rivera** (1)

		
		x3 el tiempo es un recurso valioso, si bien hay documentaci√≥n nada costaba hacer un video explicando

	* **carlosextra1** (1)

		
		tengo la misma pregunta!

## 0460. Despliegue en Now

### Descripci√≥n:


Now es una plataforma en constante actualizaci√≥n, si te llega a pasar un mensaje de error relacionado con Express, intenta esto:

En el archivo now.json cambia

`"builds": [{ "src": "index.js", "use": "@now/node" }]`

por

`"builds": [{ "src": "index.js", "use": "@now/node-server" }]`

### Links:

* [Download Now CLI - ZEIT](https://zeit.co/download)

### Comentarios:

* **Luis Rodriguez** (4)

	
	hola! oigan‚Ä¶ al llegar a este curso, revisen que su conexi√≥n a MongoDB est√© abierta y que cualquier IP se pueda conectar. Por que si no la dejan abierta en esta ocasi√≥n, su deploy fallar√° y zeit/now les dar√° un error 502 cuando intenten entrar a su ruta de /api/movies o como en proyecto que ten√≠a /api/hotels .
	
	Me tard√© 2 d√≠as en encontrar mi error‚Ä¶ entonces, no cometan el mismo error que yo. üòÉ
	
	Sean felices.

	* **Andres Roberto Coello Goyes** (1)

		
		aun que cualquier ip se puede conectar a mi db de mongo,  
		en la aplicaci√≥n no se puede conectar.

	* **Luis Rodriguez** (2)

		
		uf! Cu√°l es el error que te est√° saliendo, hermano? Y is pones el link a ti GitHub, la comunidad te puede apoyar.

	* **Andres Roberto Coello Goyes** (2)

		
		Ya lo resolvi gracias‚Ä¶ !!

	* **Luis Rodriguez** (1)

		
		Genial! Qu√© fue lo que hiciste para resolverlo? O cual fue tu problema?

	* **Andres Roberto Coello Goyes** (1)

		
		lo que tengo ahora es un problema con NODE js con una api, tengo que crear un registro con una imagen , estoy utilizando **multer** y moverlo a una carpeta.  
		En modo desarrollo funciona bien pero subi api a production en **NOW** y solo ese POST de imagen me da error.  
		[](https://github.com/GandresCoello18/api-next-carreta)

	* **Andres Roberto Coello Goyes** (1)

		
		<https://github.com/GandresCoello18/api-next-carreta>
		
		este es el repositorio @iamluisro

* **Arlex Felipe Llanos Betancourt** (3)

	
	Tuve que agregar en el package.json en la secci√≥n de scripts, al instrucci√≥n `"build": "movies-api build",` para que me permitiera desplegar, pero al final se pudo, genial lo que se aprende cada dia üòÑ
	
	<https://platzivideo.devfko.now.sh/api/movies/>

	* **carlosextra1** (1)

		
		Gracias me funciono a la perfeccion!

* **Jes√∫s Miguel Quinto Teran** (3)

	
	Para no tener que agregar las variables una por una, pueden escribir las todas y unirlas usando **& &**
	
	Ejemplo:
	``` 
	    now secret add platzi-videos-db-user **su_usuario** &&
	    now secret add platzi-videos-db-password **su_password** &&
	    now secret add platzi-videos-db-host **su_host** &&
	    now secret add platzi-videos-db-name **nombre_db**
	    
	```

* **Jorge Velasquez** (2)

	
	**Reto cumplido**  
	üë®‚ÄçüíªüëèüèÉ‚Äç‚ôÄÔ∏è  
	<https://platzilive-api.now.sh/api/movies>

* **oqodigital** (2)

	
	Lo logr√©!!!  
	<https://platzivideo-api-niko.now.sh>

* **danielsanz (Platzi)** (2)

	
	Repositorio de la clase:  
	<https://github.com/glrodasz/platzi-backend-node/tree/despliegue-en-now>

* **carlosextra1** (1)

	
	Me dio el siguiente error
	``` 
	    ‚ö° now dev
	    Now CLI 17.1.1 dev (beta) ‚Äî https://zeit.co/feedback
	    Error! Your `package.json` file is missing a `build`property inside the `scripts` property.
	    More details: https://zeit.co/docs/v2/platform/frequently-asked-questions#missing-build-script
	    
	```
	
	y lo solucione con esto ‚Äúbuild‚Äù: ‚Äúmovies-api build --output public‚Äù
	
	en los scripts de package.json
	``` 
	    "scripts": {
	        "dev": "DEBUG=app:* nodemon index",
	        "start": "NODE_ENV=production node index",
	        "test": "mocha --exit",
	        "build": "movies-api build --output public"
	      },
	    
	```
	
	M√°s info <https://zeit.co/docs/v2/platform/frequently-asked-questions#missing-build-script>

* **lgfh** (1)

	
	Reto cumplido üòÉ  
	<https://platzivideo.lgfh98.now.sh/api/movies>

* **Jos√© Abdiel Ortega V√°zquez** (1)

	
	<https://platzivideo-d4az593bp.now.sh/api/movies>  
	Reto cumplido!

* **Alver Ortega** (1)

	
	<https://platzivideo-six.now.sh/api/movies>

* **asismelgarejo** (1)

	
	Seguimos aprendiendo üòÑ  
	<https://asismelgarejo-api.now.sh/api/movies>

* **Jose Gustavo Pacheco Sanchez** (1)

	
	Despliegue de la aplicaci√≥n
	
	<https://gustavo-api.now.sh/api/movies>

* **Massimo Di Berardino** (1)

	
	Genial, platzi es increible mi primer deploy de una app  
	<https://platzivideo.massimokris.now.sh/>

* **Luis Arturo Lira Cerda** (1)

	
	Me surgi√≥ una duda.  
	Mi despliegue en Now funciona bien, pero si pasan unas 2 o 3 horas y entro de nuevo a api/movies me regresa siempre un error 500. Para arreglarlo debo entrar al repositorio y ejecutar now o now --prod
	
	¬øEso a qu√© puede deberse?

* **Jes√∫s Miguel Quinto Teran** (1)

	
	Esta vivo‚Ä¶ Muajjajajaja
	
	<https://platzivideos.now.sh/api/movies>

* **Camilo Andr√©s Santana Lizcano** (1)

	
	<https://andrew-api.now.sh/api/movies>  
	Excelente mi primer despliegue üòÑ

* **david_gtz** (1)

	
	ya no me aparece la opci√≥n desktop app, intente con la CLI pero me manda el siguiente error
	``` 
	    zsh: command not found: now
	    
	```

	* **Gabriel De Andrade (Platzi)** (2)

		
		Ve intentado cada una de estas:
		
		  * Colocar en la consola: `source ~/.zshrc`
		  * Cerrar y abrir la consola
		  * Volver a instalar now con `npm i -g now`
		
		
		
		Si esta √∫ltima te da un EACCESS Error intenta cambiando el directorio ra√≠z de npm siguiendo [este tutorial](https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally) de la documentaci√≥n de npm. Luego puedes proceder a tratar de instalarlo nuevamente

* **platzerito02112019 platzerito02112019** (1)

	
	<https://ruber.now.sh/api/movies>

* **David Behar** (1)

	
	En el sitio creado por el profesor no funcionan las b√∫squedas de movies espec√≠ficas  
	.  
	<https://platzivideos-api.now.sh/api/movies/5da146a186b754378cca7265>

# Conclusiones

## 0470. ¬øQu√© aprendiste en este curso

### Descripci√≥n:


¬°Felicitaciones por terminar el **Curso de Backend con Node.js**!

En este curso aprendiste:

  * El uso de streams y de utilidades
  * A crear una aplicaci√≥n con Express.js
  * A crear una RESTful API
  * A conectar tu proyecto con librer√≠as externas como mongoDB
  * El concepto de Middlewares y su uso
  * Hacer testing de tu aplicaci√≥n
  * Desplegar tu aplicaci√≥n en [Now.sh](http://Now.sh)



Este contenido forma parte de la **Escuela JS** continua con el **Curso de Autenticaci√≥n con Passport.js** y el **Curso de Integraci√≥n Backend con Frontend** que puedes encontrar en la secci√≥n de enlaces.

No olvides aprobar el examen y **Nunca parar de aprender**.

### Links:

* [Curso de Autenticaci√≥n con Passport | Materiales](https://platzi.com/clases/passport/)

* [Curso de Integraci√≥n Backend con Frontend | Materiales](https://platzi.com/clases/bff/)

### Comentarios:

* **jasanhdz** (9)

	
	Seguro mis notas te ayudan a repasar todo el curso, puedes leerlas desde la comidad de tu telefono. üòÑ  
	<https://github.com/JasanHdz/backendnodejs/tree/master/notes>  
	No se rindan, √©xito üí™

* **oqodigital** (8)

	
	Ha sido uno de los cursos donde he quedado dando bote o rebotando al m√°ximo. No creo que este curso est√© hecho para salir y montar r√°pidamente tus propios backends y listo, sino que es para entender c√≥mo se crea todo ese ambiente y poder vivir en carne propia como se va creando una API. Eso me encant√≥.  
	Fue dif√≠cil la verdad, ven√≠a con mucho √°nimo desde REACT, pero aqu√≠ ca√≠ pesado, mucha informaci√≥n, much√≠sima, pero una buena base  
	Gracias profe!

	* **heysoypaez** (3)

		
		Comparto la emoci√≥n ! Este curso aunque lo senti pesado, d√≠ficil pero soy consciente que ese desaf√≠o me hace crecer como desarrollador.
		
		Y a ti tambi√©n amigo mio.

* **heysoypaez** (6)

	
	Me da risa como el profesor hac√≠a algo sin errores, y yo que supuestamente estoy haciendo lo mismo me ocurren mil errores.
	
	Pero bueno, aprender√© de ellos y me reire en el proceso.

* **Massimo Di Berardino** (2)

	
	este curso te da las bases para armar una api escalable con la seguridad y las validaciones b√°sicas, gracias guillermo muy buen profe!

* **carlos-bolivar** (2)

	
	El curso es de esos que te despiertan la curiosidad de seguir alimentando muchos mas conocimientos del tema, Guillermo eres un crack, todo explicado a nivel de detalle, y te deja la satisfaccion de que puedes iniciar un proyecto con node y express por ti mismo apoyandote con la documentacion!
	
	Brutal este curso!

* **heysoypaez** (2)

	
	Tengo que admitir que este curso lo he sentid m√°s dificil, hasta ahora nunca habia hecho un curso de backend.  
	Me gust√≥ el desaf√≠o que implic√≥ para mi, me gusto crear una API y entender en la pr√°ctica como funciona en la API es lo primero que ha≈ï√© para mis propios proyectos.
	
	GRACIAS por tu tiempo, esfuerzo, empe√±o y sabidur√≠a compartido en este curso Profe, tenga un gran d√≠a y una mejor vida üòÉ

* **carlosextra1** (1)

	
	Muy buen curso!!! Muchas gracias!

* **Andres Leonardo Arevalo** (1)

	
	Uno de los mejores cursos de platzi üòÉ

* **Jorge Velasquez** (1)

	
	Mi primer curso de Backend, me pareci√≥ muy interesante üëèüëèüëè

* **Ricardo Medina** (1)

	
	Me gusto el curso fue bastante practico y en resumen el profesor lo explico bien.

* **JPinedaHN** (1)

	
	Fue un curso que te ense√±a de todo lo que es necesario para desplegar una aplicaci√≥n. Gracias al profe y ahora a seguir aprendiendo m√°s a detalle

* **Alejandro Gonz√°lez Reyes** (1)
Mi duda son todas las rutas originales de Express. ¬øporque no se agregaron al archivo de configuraci√≥n de now.json? y en su lugar se colo...

	* **Erik Ochoa (Platzi)** (2)

		
		Hola üëã  
		**Primer pregunta:** No es necesario agregar ruta por ruta, lo puedes hacer si quieres agregar configuraciones o cambiar la ruta con la que el usuario final va a interactuar. Al usar una expresi√≥n regular indicamos que cualquier petici√≥n sea enviada a nuestro servidor Express.
		
		**Segunda pregunta** : Claro, siempre puedes hacer cambios en tu proyecto y volver a hacer deploy con el comando `now`, por default las nuevas versiones de Now no te cambian la URL. Si tienes una al√≠as has deploy con este comando para que lo mantenga `now alias $(now) tu-alias.now.sh`.
		
		Suerte!

