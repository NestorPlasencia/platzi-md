# Introducci√≥n

## 0010. Introducci√≥n al curso y prerequisitos del curso

### Descripci√≥n:


Bienvenido al Curso B√°sico de GraphQL. En este curso el profesor Adri√°n Estrada, desarrollador Node.js trabajando para NodeSource, te mostrar√° las bases de GraphQL y por qu√© es tan importante en el mundo.

Para este curso es necesario tener buenas bases de Node y conocimientos de bases de datos no relacionales como MongoDB. Puedes checar el [Curso B√°sico de Node.js](https://platzi.com/clases/basico-nodejs/) y el [Curso B√°sico de MongoDB](https://platzi.com/clases/mongodb/).

### Links:

* [Curso B√°sico de Node.js | Materiales](https://platzi.com/clases/basico-nodejs/)

* [Curso B√°sico de MongoDB | Materiales](https://platzi.com/clases/mongodb/)

### Comentarios:

* **Sa√∫l Pinedo Ramallo** (36)

	
	MORFEOOOOOOOO HEHE

	* **ANDDY JOSUE ANDRADE BERRONES** (2)

		
		AJAJAJAAJ

	* **Manuel Rivera** (1)

		
		jajajajajaja üéØ

	* **Decoderunner** (2)

		
		MORFEO  
		Puedo verlo en tus ojos, Tienes la mirada de un hombre que acepta lo que ve,porque espera despertarse,Ir√≥nicamente, no dista mucho de la realidad,¬øCrees en el destino, Neo?  
		NEO  
		No.  
		MORFEO  
		¬øPor qu√© no?  
		NEO  
		No me gusta la idea de no ser yo el que controle mi vida.  
		MORFEO  
		S√© exactamente a lo que te refieres. Te explicar√© por qu√© est√°s aqu√≠ Est√°s porque sabes algo. Aunque lo que sabes no lo puedes explicar.Pero lo percibes. Ha sido as√≠ durante toda tu vida. Algo no funciona en el mundo. No sabes lo que es, pero ah√≠ est√° como una astilla clavada en tu mente y te est√° enloqueciendo. Esa sensaci√≥n te ha tra√≠do hasta m√≠ ¬øSabes de lo que estoy hablando?  
		NEO  
		¬øDe Matrix?  
		MORFEO  
		¬øTe gustar√≠a saber lo que es? Matrix nos rodea. Est√° por todas partes incluso ahora, en esta misma habitaci√≥n. Puedes verla si miras por la ventana o al encender la televisi√≥n Puedes sentirla, cuando vas a trabajar cuando vas a la iglesia cuando pagas tus impuestos. Es el mundo que ha sido puesto ante tus ojos para ocultarte la verdad.  
		NEO  
		¬øQu√© verdad?  
		MORFEO  
		Que eres un esclavo, Neo, Igual que los dem√°s, naciste en cautiverio naciste en una prisi√≥n que no puedes ni oler ni saborear ni tocar. Una prisi√≥n para tu mente. Por desgracia no se puede explicar lo que es Matrix. Has de verla con tus propios ojos. Esta es tu √∫ltima oportunidad. Despu√©s, ya no podr√°s echarte atr√°s. Si tomas la pastilla azul fin de la historia (La historia acabar√°). Despertar√°s en tu cama y creer√°s lo que quieras creerte. Si tomas la roja, te quedas en el Pa√≠s de las Maravillas y yo te ense√±ar√© hasta d√≥nde llega la madriguera de conejos. Recuerda, lo √∫nico que te ofrezco es la verdad, Nada m√°s.
		
		Si eliges la azul viviras en la ignorancia.
		
		En cambio, si eliges la pastilla roja veras la realidad osea, esto.

* **lizita136** (6)

	
	Vine para comenzar este curso, si alguien m√°s vino y a√∫n no llev√≥ el del Node.js, hay un curso de Node un poco m√°s nuevo que el que est√° en la descripci√≥n.  
	Les dejo el link: <https://platzi.com/clases/backend-js/>  
	Lo da Carlos Hernandez y sus explicaciones son muy geniales üòÉ

* **Christian David S√°nchez** (2)

	
	He escuchado sobre est√° herramienta. Sacar√© el curso pero antes voy a ver los cursos que recomiendan.
	
	Luego regreso por ti GraphQL üòé

* **Christian Le√≥n √Ålvarez** (2)

	
	¬°Hola! ¬°Que emoci√≥n! Aun que, que mal, no cumplo con los pre requisitos, tomar√© el curso de Node.js

	* **adrianrbp** (6)

		
		usando docker hace m√°s sencillo y r√°pido empezar a usar node, me evit√© hacer toda la configuracion gracias a docker üòÉ  
		el profe de docker explica super claro y en 1 d√≠a acab√© el curso.

	* **Christian Le√≥n √Ålvarez** (1)

		
		Gracias @adnPe!

	* **hacodeml** (1)

		
		Hola!, solo hay un curso de Docker, o te refieres a alguno especificamente?

* **Bryan Estiven Silva Mercado** (1)
Vine a ver este curso en particular y ahora voy a ver los mencionados antes de empezar

* **Jhoy Berrocal** (1)

	
	Hola, qu√© tan dif√≠cil podr√≠a ser una integraci√≥n con firebase y qu√© tan viable ser√≠a.  
	Es para usar en una web app usando React.

	* **Diego Alexander Forero Higuera (Platzi)** (3)

		
		No es muy complicado, debes construir el backend que consuma de firebase y te conecte con GraphQL, pero tienes que tener en cuenta una cosa Firebase para proyectos peque√±o no tiene problema pero en proyectos grandes el costo de Firebase es muy alto, piensa en otras alternativas de bases de datos.

## 0020. ¬øQu√© es GraphQL

### Descripci√≥n:


En esta clase el profesor Adri√°n Estrada nos explica qu√© es GraphQL, su importancia y las ventajas que tiene.

GraphQL es un nuevo paradigma aplicado para el intercambio de informaci√≥n entre diferentes aplicaciones. Anteriormente exist√≠an protocolos como CORBA, SOAP, RPC y el m√°s reciente y utilizado REST. GraphQL creado en el 2015 por Facebook puede ser visto como una evoluci√≥n al protocolo REST.

### Links:

* [GraphQL | A query language for your API](https://graphql.org/)

### Comentarios:

* **adrianrbp** (18)

	
	Hace unas semanas se public√≥ un [documental de GraphQL](https://www.youtube.com/watch?v=783ccP__No8), de muy buena calidad el documental üòÉ
	
	En el video aparecen los 3 co-creadores de la especificaci√≥n de GraphQL: Lee Byron, Nick Schrock y Dan Schafer.
	
	Spoiler üòÑ : Tambi√©n aparecen personas de AirBnB, Medium, Netflix, Github. Vale la pena verlo de inicio a fin. Enjoy.

	* **silvermiguel96** (2)

		
		El video es muy muy bueno , recomendable verlos !

	* **David Behar** (2)

		
		Excelente video, me hace entender muy bien qu√© monstruo estamos montando, me emociona mucho este curso

* **Andres Roberto Coello Goyes** (9)

	
	quiero utilizar gatsby y para eso necesito este curso

	* **David Behar** (3)

		
		Estamos en las mismas

	* **Cristian Andr√©s C√≥rdova Valencia** (2)

		
		x2

* **pabloverduzcos** (6)

	
	Pueden ver este [documental](https://youtu.be/783ccP__No8) (GraphQL: The Documentary) para conocer un poco m√°s acerca de la historia de GraphQL e incluso para tomar este curso un poco m√°s inspirados üòÅ

	* **Cristian Andr√©s C√≥rdova Valencia** (1)

		
		Gracias!! üòÑ

	* **pabloverduzcos** (1)

		
		De nada Barck üòÅ

* **David Behar** (5)

	
	## Les dejo los links de inter√©s que nos presentaron en esta introducci√≥n:
	
	  * [Especificaciones de graphql (junio 2018)](https://spec.graphql.org/June2018/)
	  * [GraphQL foundation](https://foundation.graphql.org/)
	  * [Comunidad de graphql](https://graphql.org/community/)
	
	

* **Davidre0795** (4)

	
	**GraphQL** fue creado por Facebook en el 2015 para resolver ciertas limitaciones que en algunos casos presenta **REST**
	
	Un nuevo paradigma aplicado a la necesidad que siempre han tenido los desarrolladores de realizar intercambios de informaci√≥n entre diferentes aplicaciones.
	
	GraphQL cuenta con una forma estandarizada para definir todas las interacciones posibles con la informaci√≥n, haciendo posible que la manera de escribir y usar una API sea mas **predecible y entendible**
	
	**Ventajas**  
	*Un **Lenguaje agn√≥stico** que permite definir de una forma clara y simple los objetos y acciones del API.
	
	  * Una **validaci√≥n autom√°tica** de la informaci√≥n a ingresar
	  * **Control de errores** de una manera uniforme y predecible.
	  * Una **documentaci√≥n m√≠nima autogenerada** que permite saber exactamente c√≥mo debe ser usado el API tanto a la hora de pedir y enviar informaci√≥n.
	  * Un **entorno de desarrollo amigable** donde se puede probar todas las interacciones.
	
	
	
	[Link](https://graphql.org/)

* **Walter Ugalde A** (3)

	
	Cuando van a dar el curso avanzado ?

	* **Mariana Valencia** (1)

		
		¬øQu√© temas te gustar√≠a ver en un curso avanzado de GraphQL?

	* **juan camilo castillo saucedo** (1)

		
		cierto , que paso con el curso?. Seria interesante ver como construir un api gateway que se conecte a varios servicios

	* **Walter Ugalde A** (3)

		
		  1. Arquitectura que podamos usar en el mundo real. 
		    * Desde de seguridad, (login, token etc)
		    * Enviar imagenes, video, entreo otro tipo de archivos.
		    * Como conectarme con varios servicios externos, tomando datos de diferentes fuentes.
		    * Del lado del cliente como consumir esos servicios de forma segura e eficiente.  
		Con el primer curso me anime a realizar una aplicaci√≥n para el mundo real, pero creo que aun tengo muchas deficiencias de como lo hice y mi arquitectura no es tan robusta y muchas de las formas como resolvi los problemas no son de la mejor forma.
		
		

	* **Freddy Rojas Valera** (2)

		
		A mi me gustar√≠a saber como manejar y optimizar consultas con graphql y un service worker en un server side render e estado buscando como hacer un api de este modo para una PWA aun soy nuevo en el tema aprecio mucho la ayuda si alguien tiene algunos tips üòÉ. Lo apreciaria mucho

* **ehnbytes** (2)

	
	Iniciando el curso!!

* **Armando Reyes Perez Reyes Perez** (2)

	
	Por que quitaron el curso avanzado de GraphQL ? estaba mas completo y mejor explicado

	* **Jose Daniel Barr√≠a Reyes** (1)

		
		mas que quitarlos esta oculto, si mandas un mensaje seguro te dan el link para volver a verlo

	* **Freddy C√≥rdova Arana** (10)

		
		Aqu√≠ te dejo el link: [GraphQL 2016](https://platzi.com/clases/graphql-2016/)

	* **Carlos Alberto Garc√≠a Rosales** (2)

		
		seguro tienen planeado renovarlo suelen hacer eso cuando van a renovar un curso, Saludos!

* **Yurley** (2)

	
	GrapQL es un nuevo paradigma desarrollado por facebook - aplicado a un problema que siempre se a tenido al momento de enviar informacion atravez de aplicaciones.

* **Abraham Flores Cosme** (1)

	
	GraphQL es muy poderoso, yo he trabajado en PHP con Laravel y realmente hay demasiadas posibilidades, manejo de errores, definici√≥n de tipos, documentaci√≥n y m√°s. Veamos la complejidad ahora en NodeJS!!

	* **platzerito080420202** (1)

		
		Un bot, que lindo jaja

	* **Abraham Flores Cosme** (1)

		
		¬øA qu√© te refieres amigo?

* **matheoNieto** (1)

	
	excelente!!

* **Helard Flores Copa** (1)

	
	demasiado basico

	* **Jos√© Antonio Torres** (1)

		
		el video o el curso completo?

	* **Aram Ceballos Gonzalez** (4)

		
		Claro por eso el curso se llama ‚ÄúCurso Basico de GraphQL‚Äù

* **jhon manuel angulo moncada** (1)

	
	Excelente‚Ä¶!

* **Jos√© Arturo Soto Calder√≥n** (1)

	
	Excelente, muy bien explicado

* **Walter Ugalde A** (1)
Cuando van a dar el curso avanzado ?

	* **Mariana Valencia** (1)

		
		¬øQu√© temas te gustar√≠a ver en un curso avanzado de GraphQL?

# Conceptos b√°sicos

## 0030. Schema y types

### Descripci√≥n:


El Schema es la base de una API en GraphQL, es el encargado de describir todos los tipos de informaci√≥n que va a contener.

Para la creaci√≥n de este proyecto usaremos una herramienta llamada `npx`, para ello primero debes instalarlo con el comando:
``` 
    npm i -g npx
    
```

Una vez instalado, dentro de la carpeta de nuestro proyecto vamos a correr el siguiente comando:
``` 
    npx license mit > LICENSE && npx gitignore node && git init && npm init -y
    
```

Ya que termina de correr el comando es momento de a√±adir la dependencia de GraphQL a nuestro proyecto:
``` 
    npm i graphql
    
```

Dentro de GraphQL contamos con distintos tipos de datos escalares:

  * String
  * Int
  * Float
  * Boolean
  * ID



### Links:

* [GraphQL | A query language for your API](https://graphql.org/)

### Comentarios:

* **yoyox221** (13)

	
	a 1.25 x se entiende mejor

	* **Nicol√°s A. Rodr√≠guez** (2)

		
		me duermo a 1 x

	* **juandavidcoloradoalvarez** (2)

		
		1.5x esta fenomenal. üòÑ

	* **_jrgarciadev** (1)

		
		1.5x y flecha derecha

* **aragonesteban (Platzi)** (9)

	
	Aqu√≠ dejo el comando para que s√≥lo copien y peguen üò¨  
	`npx license mit > LICENSE && npx gitignore node && git init && npm init -y`

	* **kenedydm10** (3)

		
		Buenas Tardes me aparece un error
		``` 
		    /var/www/platzi-dir$ sudo npx license mit > LICENSE && npx gitignore node&& git init && npm init -y
		    /usr/bin/env: ‚Äònode‚Äô: No such file or directory
		    
		```

	* **David Behar** (1)

		
		Est√° extra√±o tu error, ya revisaste que tengas instalado npx? Por qu√© usaste sudo para instalar la licencia?

* **Juan Luis Rojas Le√≥n** (7)

	
	 **Por si a alguien le interesa:**
	
	El tema que est√° usando el profesor es: [**_Cobalt2 Theme Official_**](https://marketplace.visualstudio.com/items?itemName=wesbos.theme-cobalt2)  
	Para ver el tama√±o de los paquetes: [**_Import Cost_**](https://marketplace.visualstudio.com/items?itemName=wix.vscode-import-cost)

	* **hacodeml** (1)

		
		Buenazo!

* **David Behar** (4)

	
	Est√° tan cool el script para inicializar el proyecto que me hice un alias con los comandos necesarios para m√≠ para iniciar un proyecto en js en general, lo puse en m√≠ `~/.zshrc` y `~/.basrc`:
	``` 
	    alias jsinit='npx license mit > LICENSE && npx gitignore node && git init && npm init -y && npx eslint --init'
	    
	```

	* **Juan Jos√© Vega Quintero** (1)

		
		David a d√≠a de hoy te funciona?  
		esta parte no me funciona üò¶  
		npx license mit > LICENSE

	* **David Behar** (2)

		
		Creo que esa parte ya no funciona, creo que si lo corres s√≥lo con npx licence te coloca la licencia mit por defecto.

* **Edgar Gomez Alvarado** (3)

	
	Demoras al cargar este v√≠deo

* **Jos√© Antonio Torres** (2)

	
	Los tips de variable son: String, Integer, float, boolean.

* **Oscar Torres** (2)

	
	E el arrow function que implime data se pueden quitar los parentesis de data pues solo recibe un parametro, lo aprend√≠ en el curso de javascript xd

* **Oscar Martinez** (2)

	
	Para los que estan instalando npm i -g npx ren linux y les da error usen: npm install-g npx

* **David Gallego** (2)

	
	Empieza un poco confuso, espero que sea como el profe dice y tenerle confianza de que se ir√°n despejando las dudas en los pr√≥ximos cursos.

* **Paul Gualambo Giraldo** (2)
Que debo hacer ?

	* **Diego Alexander Forero Higuera (Platzi)** (2)

		
		Ejecuta el comando utilizando sudo, `sudo npm i -g npx`

* **Juan Jos√© Vega Quintero** (1)

	
	Ejecuto el comando y se queda ah√≠  
	![](![Annotation 2020-03-30 232020.png](https://static.platzi.com/media/user_upload/Annotation%202020-03-30%20232020-a9340348-0ee2-41c8-9e0c-11a554e75ab0.jpg))

	* **Juan Jos√© Vega Quintero** (1)

		
		Que raro quitando  
		npx license mit > LICENSE  
		Todo sigue correcto

* **ing.stephanysc** (1)

	
	Que maluco esos colores en ese editor, y los caracteres se ven muy raros

* **ulises arturo gonzalez callejas** (1)

	
	¬øy si no tengo un tipo definido como le pongo?, no hay algo como any?

	* **Daniel Esteves** (1)

		
		No, se le debe declarar de qu√© tipo ser√°n los datos obligatoriamente

* **Fernando Cordero** (1)

	
	no se que hacer con esto!! alguna idea?
	``` 
	    npm ERR! code ENOLOCAL
	    npm ERR! Could not installfrom"Cordero\AppData\Roaming\npm-cache\_npx\18168"as it does not contain a package.jsonfile.
	    
	    npm ERR! A completelogof this run can be foundin:
	    npm ERR!     C:\Users\Fernando Cordero\AppData\Roaming\npm-cache\_logs\2019-09-21T16_05_39_642Z-debug.log
	    Installfor license@latest failedwith code 1```
	    
	```

	* **Fernando Cordero** (1)

		
		resuelto

	* **Karl Heitmann** (1)

		
		como???

* **jangove** (1)

	
	el 172.1k que se refieres  
	codigo de teclado para las comillas hacia las izquierda  
	antemano gracias

	* **francodilu** (3)

		
		Si no me equivoco es un plugin de VSCode que te dice cuanto pesa la libreria que importaste. No lo escribi√≥ el.  
		Comillas " ` " Alt+96

* **Oscar Martinez** (1)

	
	Tengo una duda. ¬øA que hace refrencia el 172.1k que aparece en su codigo despues de require(`graphql`)? yo estoy trabajandio desde una terminal linux y para que el codigo me funcionara correctamente tuve que omitir ese numero.

	* **francodilu** (2)

		
		Si no me equivoco es un plugin de VSCode que te dice cuanto pesa la libreria que importaste. No lo escribi√≥ el.

* **nicolas-garcia-puerta** (1)

	
	Ejecut√© el comando pero no me cambio la licencia ISC. ¬øCual puede ser la soluci√≥n?

	* **Diego Alexander Forero Higuera (Platzi)** (1)

		
		Hola puedes compartir el comando tal cual lo estas ejecutando en la terminal?, puede ser un error de digitaci√≥n.

* **Paul Gualambo Giraldo** (1)

	
	Que debo hacer ?  
	![errorJP.JPG](https://static.platzi.com/media/user_upload/errorJP-60ba7160-1814-453d-a1a3-4fdaa2ca5e8f.jpg)

	* **Diego Alexander Forero Higuera (Platzi)** (2)

		
		Ejecuta el comando utilizando sudo, `sudo npm i -g npx`

	* **Paul Gualambo Giraldo** (1)

		
		ejecute -> npm i -g npx  
		y me salio el error de la imagen

	* **Diego Alexander Forero Higuera (Platzi)** (2)

		
		Por eso ejecuta usando sudo  
		`sudo npm i -g npx`

	* **Jonathan Martin  Jimenez Ortega** (2)

		
		No ejecutes con sudo el comando, eso puede ocasionar conflictos en la instalacion. Lo que debes hacer es reinstalar Node con los permisos adecuados, o realizarte la correccion de forma manual, yo normalmente he reinstalado. Aqui una referencia del problema del propio npm: <https://docs.npmjs.com/resolving-eacces-permissions-errors-when-installing-packages-globally>

* **DavidArmandoVelazquez** (1)
si un dato en el schema es un arreglo, que tipo de dato seria? o como lo puedo declarar ?

	* **Diego Alexander Forero Higuera (Platzi)** (2)

		
		Hola lo declaras de la siguiente manera.
		``` 
		    typeCharacter {
		      name: String!
		      appearsIn: [Episode]!
		    }
		    
		```
		
		appearsIn es un listado o array de episodios y debe llegar por lo menos vac√≠o su fuera `[Episode!]!` no puede ser un array vacio.

* **gustavoalbertorestrepopelae** (1)
En grapql pueden exitir varios schemas? y si pueden existir como se implementar√≠an? Gracias

	* **Juan David Castro (Platzi)** (1)

		
		Te recomiendo que sigas adelante con el curso para que lleguemos a la parte pr√°ctica. Si llegando a esta parte sigues teniendo dudas puedes preguntar en la secci√≥n de comentarios y te ayudamos a resolver el problema. Pero est√°s preguntando en casi la primera clase, a√∫n te falta ver gran parte del curso. üòâ

## 0040. Queries y Resolvers

### Descripci√≥n:


Una query permite ejecutar una petici√≥n al API, dentro de una query debes indicar la consulta que quieres ejecutar y los campos que deseas obtener. GraphQL te va a devolver la informaci√≥n que solicitaste dentro del objeto `data`.

El resultado de tu petici√≥n no se va a ejecutar de manera m√°gica, para ello debes definir el objeto `resolvers`, este objeto va a contener una propiedad del mismo nombre que la query que va a resolver o ejecutar.

### Links:

* [Queries and Mutations | GraphQL](https://graphql.org/learn/queries/)

### Comentarios:

* **Yurley** (10)

	
	este es un post en medium que quiero compartir de las buenas practicas en los resolves en graphQL:  
	<https://medium.com/paypal-engineering/graphql-resolvers-best-practices-cd36fdbcef55>

	* **pblfergt** (1)

		
		buen√≠simo aporte üëå

* **Luis Paredes** (3)

	
	Deira y Dara!

	* **elvis.sanchez** (1)

		
		Se puede:  
		<https://dictionary.cambridge.org/us/dictionary/english/data>

* **Bigpoe** (3)

	
	Es posible llamar a m√°s de un resolver:
	``` 
	    graphql(schema, '{ hello, saludo }', resolvers).then((data) => {
	        console.log(data)
	    })
	    
	```

	* **Diego Galocha** (2)

		
		Que finalidad tiene pasar varios resolvers?

* **jhernandez_z** (2)

	```
	    'use strict'
	    
	    const { graphql, buildSchema } = require('graphql');
	    
	    // schema
	    const schema = buildSchema(`
	        type Query {
	            hello: String,
	            saludo: String
	        }
	    `);
	    
	    // resolvers
	    const resolvers = {
	        hello: () => 'Hola mundo',
	        saludo: () => 'Hola a todos'
	    }
	    
	    // execute query
	    graphql(schema, '{ saludo }', resolvers).then((data) => {
	        console.log(data);
	    });
	    
	```

* **gustavoalbertorestrepopelae** (1)

	
	Como se puede resolver un tipo escalar, por ejemplo  
	date, datatime, binary, entre otros

	* **Cristian Camilo Cucunub√°** (1)

		
		Para poder utilizar estos tipos es necesarios crearlos usando los custom scalars: [ejemplos de custom scalars](https://www.apollographql.com/docs/graphql-tools/scalars/#custom-scalar-examples)

* **EPadronU23** (1)

	```
	    // Directive introduced in ECMAScript version 5
	    // Indicate that the code should be executed in "strict mode"
	    // More info: https://www.w3schools.com/js/js_strict.asp
	    'use strict';
	    
	    const { graphql, buildSchema } = require('graphql');
	    
	    // Build the schema
	    const schema = buildSchema(`
	      type Query {
	        hello: String,
	        hola: String
	      }
	    `);
	    
	    // Configure resolvers
	    const resolvers = {
	      hello: () => "Hello, world!",
	      hola: () => "Hola, Mundo!"
	    }
	    
	    // Query the schema
	    graphql(schema, '{ hello, hola }', resolvers).then((data) => {
	      console.log(data);
	    });
	    
	```

* **David Gallego** (1)

	
	Un schema, si comprendi bien, es como la estructura base que describe los componentes que hay en la API.

	* **Diego Alexander Forero Higuera (Platzi)** (7)

		
		Hola, el schema es la estructura de los datos que se pueden consultar y el tipo de dato que es, por ejemplo tu puedes tener una tabla que tiene los post de un blog, esta tabla tiene titulo, fecha de creaci√≥n, contenido, fecha de actualizaci√≥n, autor del blog, pero tu quieres tener en graphql un schema que solo pueda mostrar el titulo, fecha de actualizaci√≥n y el autor, pero nada m√°s, esto se define en el schema.

	* **AryRosvall** (1)

		
		Diego con base en lo que dices se podr√≠a decir que es algo similar a las vistas de SQL?

	* **Diego Alexander Forero Higuera (Platzi)** (3)

		
		@AryRosvall si, defines una estructura similar a como se hace una vista SQL en la cual ya tienes unos ciertos datos definidos para mostrar y utilizar.

* **elvis.sanchez** (0)

	
	¬°Ahhhhhhhh! Con raz√≥n es tan √∫til. En una API REST (hecha con Spring Boot y Java) tendr√≠amos que ‚Äúarmar‚Äù la respuesta con un objeto, por ejemplo. Aqu√≠ es m√°s pr√°ctico.

## 0050. Sirviendo el API en la web

### Descripci√≥n:


Ya viste que nuestra API funciona a trav√©s de la l√≠nea de comandos, pero necesitamos que est√° funcione dentro de la web, para ello necesitas de las dependencias de **express** y un middleware de GraphQL, vamos a instalarlo con el siguiente comando:
``` 
    npm i express express-graphql
    
```

Para evitar el proceso de detener nuestro servidor cada que ejecutamos un nuevo cambio vamos a utilizar la dependencia de desarrollo Nodemon:
``` 
    npm i nodemon -D
    
```

### Comentarios:

* **Karl Heitmann** (10)

	
	Una sugerencia, porfavor escriba el c√≥digo un poco m√°s arriba de la pantalla. Porque los controles del video obstruyen la vista de lo que est√° usted escribiendo.
	
	Lo mismo sucede con el panel del terminal, que cuando lo levanta este tapa lo √∫ltimo que escribi√≥.
	
	Saludos

* **Luis Paredes** (4)

	
	Este profesor es demasiado bueno lo llevo viendo desde node y me encanta como profesor.

* **masuro** (2)

	
	En que momento agrega la descripci√≥n üò∂
	``` 
	    hello: String
	    "retorna un saludo al mundo" 
	    
	```

	* **Jonathan Martin  Jimenez Ortega** (1)

		
		Es parte del esquema que ya tenia definido. Realmente llegamos a la clase con eso como parte del esquema.

* **David Gallego** (2)

	
	Que plugin usas para que aparezca el men√∫ contextual para auto completar?

	* **AryRosvall** (1)

		
		yo uso este para vscode:
		
		<https://marketplace.visualstudio.com/items?itemName=dsznajder.es7-react-js-snippets>
		
		Tambi√©n puedes crear los tuyos propios presionando cmd+P y buscas >Preferences: Configure user snippets.

* **Jos√© Antonio Torres** (2)
D√≥nde se puede hostear un servicio de Graphql?

	* **Erik Ochoa (Platzi)** (1)

		
		GraphQL es s√≥lo un lenguaje de comunicaci√≥n entre el servidor y el cliente, corre sobre tu aplicaci√≥n sin importar el hosting.
		
		Aunque s√≠ existen soluciones especializadas como [NodeChef](https://www.nodechef.com/graphql-hosting).

* **ing.stephanysc** (1)
Que es express-graphql, no me quedo claro.

	* **Luis Arturo Lira Cerda** (2)

		
		Es un middleware que nos permite poder usar el lenguaje de GraphQL con Express. Un Middleware lo que hace es atrapar lo que le mandemos y procesarlo.
		
		Por ejemplo, hay otros middlewares para crear logs, para autenticar, etc. Express es un framework 100% basado en middlewares. Si no has tomado el [Curso de Express](https://platzi.com/clases/express-js/) te lo recomiendo. Guillermo es un excelente profesor.

* **David Gallego** (1)
Que plugin usas para que aparezca el men√∫ contextual para auto completar?

	* **AryRosvall** (1)

		
		yo uso este para vscode:
		
		<https://marketplace.visualstudio.com/items?itemName=dsznajder.es7-react-js-snippets>
		
		Tambi√©n puedes crear los tuyos propios presionando cmd+P y buscas >Preferences: Configure user snippets.

## 0060. Custom Types

### Descripci√≥n:


Para este proyecto vamos a seguir el est√°ndar de estilos [_Standard_](https://standardjs.com/), para instalarlo corremos el siguiente comando:
``` 
    npm i standard -D
    
```

GraphQL nos permite configurar nuestros propios tipos de datos, estos deben tener la siguientes sintaxis:
``` 
    type <Nombre del tipo> {
      propiedad: Tipo de dato
    }
    
```

Dentro de nuestros tipos de datos podemos configurar un campo de un tipo como obligatorio con el signo ‚Äú!‚Äù, quedando por ejemplo:
``` 
    type Course {
      title: String!
    }
    
```

### Comentarios:

* **Georgie Duarte** (5)

	
	si no les muestra el highlight en los archivos .graphql pueden instalar un pluggin en vs studio code GraphQL for VSCode
	
	<https://marketplace.visualstudio.com/items?itemName=kumar-harsh.graphql-for-vscode>

* **Roberto Gian Franco Carbonell Saravia** (3)

	
	Como se manejar√≠a la parte de seguridad (JWT | OAuth) en graphQL?

	* **raulfbgomez** (1)

		
		x2

* **David Gallego** (3)

	
	Que extension en visual studio code es recomendable para el syntax higlighting de los archivos .graphql?

	* **edsadr** (3)

		
		yo uso esta <https://marketplace.visualstudio.com/items?itemName=kumar-harsh.graphql-for-vscode>

	* **jesusmurf** (1)

		
		Yo he probado la @edsadr y me peta al instalarla. Finalmente he instalado una llamada GraphQL creada por Apollo.

	* **Kevin Nick Pascual Tuesta** (1)

		
		Si aun sirve para algunos. Prefiero la ayuda de apollo. Aparte que tiene una ui m√°s agradable a la hora de trabajar. Por lo que veo aca lo tiene una capa de envoltura extra que la tienes que hacer. Algo que Apollo Server lo hace solo llamando. Nuevamente es a gustos de cada uno. Pero prefiero una capa mas descentralizada que hacer solo un archivo .graphql y ver como peta.

	* **Kevin Nick Pascual Tuesta** (1)

		
		Si tienen dudas sobre que librer√≠a miren este comentario. <https://github.com/prisma/graphql-yoga/issues/382#issuecomment-408390953>

	* **AryRosvall** (1)

		
		Yo uso la oficial de Apollo <https://marketplace.visualstudio.com/items?itemName=apollographql.vscode-apollo>

* **Cristian Camilo Cucunub√°** (2)

	
	Como buena practica de GraphQL en el schema al declarar los queries se evita usar verbos como get,list en vez de getCourses puede ir solo **courses** , en algunos casos ponen los verbos es cuando se crean un query para consumir la informacion y pasar variables.

* **jhon manuel angulo moncada** (2)

	
	=(‚Ä¶ perd√≠ 10 minutos de tiempo buscando un error y era que en ves de ‚ÄúreadFileSync‚Äù escrib√≠ ‚ÄúreadFileSycn‚Äù

* **Alberto Gonz√°lez** (2)
¬°Hola! ¬øPara qu√© se usa la l√≠nea de c√≥digo: ‚Äòuse strict‚Äô?

	* **Juan David Castro (Platzi)** (2)

		
		Esta lectura explica muy bien su utilidad;
		
		üëâ <https://developer.mozilla.org/es/docs/Web/JavaScript/Referencia/Modo_estricto>

* **Javier Fuentes Mora** (1)

	
	Se parece un poco a angular con los models ,los Custom Types

* **jsosorio** (1)

	
	Genial, muy bien explicado.

* **Wilson Marino Pablo Mendez** (1)

	
	Excelente!!

* **Fernando Cordero** (1)

	
	[](https://graphql.org/learn/queries/)

* **ivan-francisco721** (1)

	
	Quiero hacer esto:
	``` 
	    typeAlumno {
	      "Retorna algo"
	      ID: String
	      NOMBRE: String
	      NOTAS:  [{
	        CURSO: String
	        NOTA: String
	      }]
	    }
	    
	```
	
	Se que se puede separar NOTAS en otro type, pero deseo hacerlo de esa forma porque me ocupar√≠a menos codigo, ademas al trabajar con objetos mas complejos(anidados 3 o 4 veces) seria mas f√°cil de entender tenerlo todo junto.

* **Kevin Nick Pascual Tuesta** (1)

	
	No se pero en el curso anterior me parece mas amigable separar todo esto por archivo y sus respectivos resolvers. Es una observaci√≥n domas.

* **Ybrahin Martinez** (1)
No me queda claro pero ¬øen qu√© se diferencian ESLint y Standard?

	* **Gustavo Garcia Millasaky** (3)

		
		Ofrecen b√°sicamente lo mismo; sin embargo, ESLint es solo una herramienta de ‚Äúlinting‚Äù a la cual t√∫ le introduces una configuraci√≥n; mientras que Standard es un linter ‚Äúbatteries included‚Äù que ya contiene la configuraci√≥n basada en sus recomendaciones.
		
		En ESLint puedes configurar tu entorno a tu gusto: si quieres punto y coma obligatoria al final de cada sentencia, etc. Hay distintas configuraciones prove√≠das por terceros, entre las m√°s populares est√° la de AirBnB.

* **David Gallego** (1)
Que extension en visual studio code es recomendable para el syntax higlighting de los archivos .graphql?

	* **edsadr** (3)

		
		yo uso esta <https://marketplace.visualstudio.com/items?itemName=kumar-harsh.graphql-for-vscode>

* **gustavoalbertorestrepopelae** (0)

	
	En el caso que tenga dominos mas complejos con muchas colecciones de datos, tener todos los tipos en un esquema, al igual que los resolvers, se puede volver caotico, que practica se recomienda en este caso, se pueden crear esquemas por colecciones, y en el llamado como se har√≠an?

## 0070. Argumentos

### Descripci√≥n:


Vamos a instalar una nueva dependencia para facilitar el trabajo con GraphQL, vamos a correr el siguiente comando:
``` 
    npm i graphql-tools
    
```

Podemos pasar argumentos con distintos tipos de informaci√≥n dentro de las peticiones que hagamos en GraphQL, su sintaxis quedar√≠a de la siguiente manera:
``` 
    nombreQuery(campo: tipo): tipo
    
```

Dentro del resolver los argumentos de la petici√≥n pasar√≠an como segundo par√°metro, el primero es `root` y el segundo es `args`.

### Comentarios:

* **Felipe Acosta** (18)

	
	Tal vez si usas `find` en vez de `filter` podemos evitar el `course.pop()` üòÉ

	* **Cristian Camilo Cucunub√°** (4)

		```
		    const course = courses.find((course) => course._id === args.id)
		    
		```

	* **David Behar** (3)

		
		Algo as√≠ me funcion√≥
		``` 
		    const resolvers = {
		      Query: {
		        getCourses: () => courses,
		        getCourse: (root, args) => courses.find((course) => course._id === args.id)
		      }
		    }
		    
		```

* **Joel Aravena Villegas** (9)

	
	como se puede pedir un curso de GraphQL avanzado en @platzi?

	* **Gabriel De Andrade (Platzi)** (4)

		
		Hola! Escribenos a [team@platzi.com](mailto:team@platzi.com) üòÑ

* **FizIrvin** (1)

	
	argumento para query por id

* **JosephZ** (1)

	
	Cuando definimos el schema con la propiedad `_id`, ¬øno deber√≠a definirse de la misma manera en Query? Es decir, que quede as√≠:
	``` 
	    typeQuery {
	      "Devuelve un curso"
	      getCourse(_id: ID!): Course
	    }
	    
	```
	
	En vez de as√≠:
	``` 
	    type Query {
	      "Devuelve todos los cursos"
	      getCourses: [Course]
	      "Devuelve un curso"
	      getCourse(id: ID!): Course
	    }
	    
	```

	* **aragonesteban (Platzi)** (2)

		
		Hola Jose, de las dos maneras funcionar√°, ya que no depende de c√≥mo se declaro el `id` en el schema, s√≥lo es recibir el `id` en `getCourse(id: ID!)`, es decir, al llamar ese query desde un cliente debes pasar el `id`.

	* **Jonathan Martin  Jimenez Ortega** (1)

		
		Por temas de consistencia si deberia, pues parte del hecho de usar Graphql es que sea auto documentativo el esquema, por eso deberia tener el mismo nombre pero si te fijas en el resolver se le asigna el `id` a `_id` al momento de buscarlo

* **Oscar Torres** (1)
Hola a veces se me queda escuchando en el puerto y no me deja hacer cambios, alguien sabe a que se debe?

* **Kerepakupai** (1)
Hola a todos, cual es la extension para VSCode que se utiliza para que muestre la ayuda de los metodos? Como que hace, los parametros, e...

	* **Erik Ochoa (Platzi)** (1)

		
		Ve a tu archivo _settings.json_ presionando `CTRL/‚åò + ‚áß + P` y escribes `>open settings json`. Ah√≠ aseg√∫rate de tener la siguiente linea en **true**.
		``` 
		        "editor.parameterHints.enabled": true,
		    
		```
		
		As√≠ siempre te va a dar ‚Äúhints‚Äù de los par√°metros en los m√©todos con solo abrir los parentesis.
		
		Si no quieres que sea autom√°tico puedes dejar esa opci√≥n en **false** y presionar `CTRL/‚åò + ‚áß + Space` siempre que necesites ayuda.

* **daer13_** (1)
Hola a todos, desde la clase de Custom Types me esta dando este error. Alguna idea de por que. Dice algo de la UTF-8 y la version pero no...

* **Ybrahin Martinez** (1)
Entiendo que graph-tools es un wrapper sin embargo tengo dos preguntas: S√© que makeExecutableSchema hace lo mismo que ...

* **JosephZ** (1)
Cuando definimos el schema con la propiedad _id, ¬øno deber√≠a definirse de la misma manera en Query? Es decir, que quede as√≠:...

	* **aragonesteban (Platzi)** (2)

		
		Hola Jose, de las dos maneras funcionar√°, ya que no depende de c√≥mo se declaro el `id` en el schema, s√≥lo es recibir el `id` en `getCourse(id: ID!)`, es decir, al llamar ese query desde un cliente debes pasar el `id`.

## 0080. Configuraci√≥n de base de datos

### Descripci√≥n:


Por el momento nuestra API maneja pura informaci√≥n est√°tica, vamos a cambiar esto pasando la informaci√≥n a una base de datos, en este caso usaremos MongoDB.

Es recomendable almacenar las credenciales de conexi√≥n a la base de datos como variables de entorno del sistema y utilizar _dotenv_ para la lectura de dichas credenciales. Para su instalaci√≥n vamos a correr el comando
``` 
    npm i dotenv
    
```

### Links:

* [Quick-Start Guide to mLab | mLab Documentation & Support](https://docs.mlab.com/)

* [Robo 3T - formerly Robomongo ‚Äî native MongoDB management tool (Admin UI)](https://robomongo.org/)

* [dotenv  -  npm](https://www.npmjs.com/package/dotenv)

### Comentarios:

* **EPadronU23** (8)

	
	  1. Creen una cuenta en [MongoDB Atlas](https://www.mongodb.com/download-center)
	  2. Creen un nuevo cluster
	  3. En el nuevo cluster, hagan click en _Connect_  
	3.1) Coloquen en lista blanca su IP  
	3.2) Creen un usuario para la BD con su contrase√±a  
	3.3) Creen un nuevo enlace de conexi√≥n
	  4. En robot3t hagan click en _Create_ en la ventana _MongoDB Connections_  
	4.1) Peguen el enlace de conexi√≥n generado en (3.2)  
	4.2) Hagan click en _From SRV_
	  5. Hagan click en _Connect_ en la ventana _MongoDB Connections_
	
	

	* **JerezA** (1)

		
		O sean aun mas independientes y utilicen todo el poder de herramientas como docker, se hacen un compose con volumenes y no sufren con todo eso y todos felices

* **jhon manuel angulo moncada** (7)

	
	MLAB ya no esta disponible, ahora se usa Mongo Atlas
	
	aqui el codigo de db.js para atlas
	``` 
	    'use strict'
	    
	    const MongoClient = require('mongodb').MongoClient
	    
	    const {
	        DB_USER,
	        DB_PASSWD,
	        DB_HOST,
	        DB_PORT,
	        DB_NAME
	    } = process.env
	    
	    const uri = `mongodb+srv://${DB_USER}:${DB_PASSWD}@test-qgluq.mongodb.net/test?retryWhites=true&w=majority`
	    
	    
	    let connection
	    
	    asyncfunctionconnectDB() {
	        if (connection) return connection
	        let client
	        
	        try {
	            client = await MongoClient.connect(uri, { useNewUrlParser: true, useUnifiedTopology: true })
	            connection = client.db(DB_NAME)
	        } catch (error) {
	            console.log('No se pudo conectar a la base de datos de mongo', uri, error)
	            process.exit(1)        
	        }
	        return connection
	    }
	    
	    module.exports = connectDB
	    
	```

	* **Freddy C√≥rdova Arana** (1)

		
		Muchas gracias, de gran ayuda para los que estamos siguiendo el curso con MongoDB Atlas

* **David Behar** (4)

	
	Yo prefer√≠ crearme un archivo llamado **`config.js`** mismo que accede a mis variables de entorno:
	``` 
	    require('dotenv').config()
	    
	    const db = {
	      port: process.env.DB_PORT || 27017,
	      username: process.env.DB_USERNAME,
	      password: process.env.DB_PASSWORD,
	      cluster: process.env.DB_CLUSTER,
	      name: process.env.DB_NAME
	    }
	    
	    module.exports = {
	      db
	    }
	    
	```

	* **Juan Jos√© Vega Quintero** (1)

		
		David podr√≠as compartir c√≥mo lo hiciste con github

	* **David Behar** (1)

		
		No lo hab√≠a subido, pero ya lo dej√© ac√° <https://github.com/behagoras/course-graphql>

* **andres-alba** (3)

	
	De esta clase en adelante empiezan los problemas por usar tecnolog√≠as obsoletas. Ojal√° cambien este curso para Mongo Atlas y poderlo seguir sin problemas.

* **Yank Carlos Reyes Espinal** (3)

	
	Sin miedo a equivocarme, creo que sin duda alguna podr√≠a decir que este es uno de los mejores profesores que tiene Platzi.

* **Esteban Ciudad** (3)

	
	hubo una confusi√≥n por parte del profesor, se debe utilizar mongodb para acceder a MongoClient:
	``` 
	    npm i mongodb
	    
	```

	* **Freddy C√≥rdova Arana** (1)

		
		Importante ‚òù

* **Leonardo Casallas Beltran** (2)

	
	Para las versiones actuales se instala es mongodb
	``` 
	    npm install mongodb
	    
	```
	
	Luego el archivo de conexi√≥n queda de la siguiente manera:
	``` 
	    const { MongoClient } = require('mongodb');
	    
	    const { DB_USER, DB_PASSWORD, DB_HOST, DB_NAME } = process.env;
	    
	    const mongoUrl = `mongodb+srv://${DB_USER}:${DB_PASSWORD}@${DB_HOST}/${DB_NAME}?retryWrites=true&w=majority`;
	    let connection;
	    
	    asyncfunctionconnectDB() {
	      if (connection) return connection;
	    
	      let client;
	      try {
	        client = new MongoClient(mongoUrl, {
	          useNewUrlParser: true,
	          useUnifiedTopology: true,
	        });
	        connection = await client.connect();
	      } catch (error) {
	        console.error('Could not connect to db', mongoUrl, error);
	        process.exit(1);
	      }
	    
	      return connection;
	    }
	    
	    module.exports = connectDB;
	    
	```

* **Angel Infanti** (2)

	
	Para que puedan continuar con el curso
	
	Es necesario registrarse desde mongo atlas igual y crear su base de datos igual , la url de conexi√≥n deber√≠a de hacer algo como esta
	
	mongodb+srv://user:password@numbercluster.mongodb.net/databasename?retryWrites=true&w=majority
	
	Mongodb para node ya esta en desuso instalen mongoose  
	npm i mongoose
	
	Y la funci√≥n que deben usar para retornar la conexi√≥n es esta
	``` 
	    asyncfunctionconnectDB() {
	      await db
	        .connect(mongoUrl, { useNewUrlParser: true, useUnifiedTopology: true })
	        .then(() => console.log("[db] Conectada con √©xito"))
	        .catch(err => console.error("[db] Error", err));
	    }
	    
	    module.exports = connectDB;
	    
	```

* **Patricio Pilco** (2)

	
	No se puede seguir !!! Debe existir actualizaci√≥n del curso o mas bien quitarla.  
	Las personas necesitan aprender no perder su tiempo.

* **Fernando Azuaje** (2)

	
	El metodo connect no se encuentra en el paquete de mongo, es de mongodb asi que deben instalarlo para que funcione

	* **Daniel Alberto Esquinazi** (2)

		
		Con mongodb hice la conexi√≥n de la siguiente forma:
		``` 
		    const { MongoClient } = require('mongodb')
		    
		    asyncfunctionconnectDb() {
		      if (db) return db
		    
		      let client = new MongoClient(
		        mongoUrl,
		        { useNewUrlParser: true }
		      );
		    
		      try {
		        await client.connect();
		        db = client.db(DB_NAME);
		      } catch (error) {
		        console.error('Could not connect to db', mongoUrl, error)
		        process.exit(1)
		      }
		    
		      return db;
		    }
		    
		```

* **kenedydm10** (2)

	
	Buenos dias profesor para poder conectarme a una base de dos de POSTGRESS ???

* **Esteban Ciudad** (2)

	
	Al momento de estrenarse el curso ya no se encuentra disponible el registro directo para mLab, ya que este fue adquirido por MongoDB y por lo tanto toca usar MongoDB Atlas, funciona muy bien y sirve de igual manera para seguir el curso, si tienes alguna problema al configurarlo com√©ntalo y te podemos ayudar.

* **Alexander  Silvera** (2)

	
	Una consulta no es mejor utilizar Compas para usar MongoDB??

	* **edsadr** (1)

		
		es otra muy buena opci√≥n

	* **David Gallego** (2)

		
		creo que Robo3T es un cliente mas ligero en comparacion a Compass pero igual todos 2 son recomendados

* **Ernesto Vizca√≠no Alvarado** (2)
Como encuentro mi host y port en mongo atlas?

* **Alexander  Silvera** (2)
Una consulta no es mejor utilizar Compas para usar MongoDB??

	* **edsadr** (1)

		
		es otra muy buena opci√≥n

* **Roberto Gian Franco Carbonell Saravia** (1)

	
	como debuggear y como realizar test?

* **Julio Ignacio Oyarzun Cayuman** (1)

	
	Cada cual usa la herramienta que quiere xD. Hace poco termine el curso de mongodb y ahi te piden crear una cuenta en Atlas y se usan mongodb shell y mongodb compass xD. Quien les entiende.

	* **luisguiroman** (1)

		
		si, a mi tambi√©n me gusta mas mongoatlas

	* **oscar** (1)

		
		mlab es la version vieja de mongoatlas‚Ä¶ lo que pasa que este curso se grabo antes cdo era mlab‚Ä¶ ahora es mongoatlas‚Ä¶ en definitiva es lo mismo

	* **Alejandro Vel√°squez Molina** (1)

		
		Por qu√© son cursos diferentes y profesores diferentes .-.

* **Fernando Cordero** (1)

	
	Segun entendi, no es obligatorio realizar el proceso de mLab si tengo instalado MongoDB o me equivoco?

	* **Juan Caicedo** (1)

		
		mlab es solo un server de mongo, si ya tienes instalado mongoDB ya tienes mongo en un sevidor local

* **Engels Prado** (1)

	
	En que parte encuentro mi host y el port?

	* **Carlos Enrique Gonzalez Pe√±a** (1)

		
		Si estas en mLab?  
		Primero tienes que crear una nueva base de datos, una ves creas la base de datos le das click en el enlace que te aparece despu√©s de crear la BD  
		Una ves dentro en la parte de arriba te sale la informaci√≥n de como conectarte a la BD
		
		Espero aun te sirva

* **JACH** (1)

	
	Hola buen d√≠a,  
	¬øEs posible conectar GraphQL con una Base de Datos relacional?

	* **dagaor** (1)

		
		Si lo es, <https://medium.com/@alexanderleon/creating-a-scalable-api-using-node-graphql-mysql-and-knex-710a1a475ff4>

	* **Jonathan Martin  Jimenez Ortega** (1)

		
		Es posible, tienes que hacer la parte laboriosa que es armar los resolvers. O puedes usar algunas herramientas que te dan una mejor estructura como lo son <https://www.prisma.io/> o <https://hasura.io/>

* **Alan Isaac Vazquez** (1)

	
	Necesito ayuda, use la cedena de conexi√≥n que me da Atlas para conectar mi aplicacion
	
	<h4>Cadena de conexion original de proporcionada por Atlas</h4>
	``` 
	    mongodb+srv://AlanVazquez:<password>@cluster0-q7onz.mongodb.net/test?retryWrites=true&w=majority
	    
	```
	
	_Replace <password> with the password for the AlanVazquez user.  
	When entering your password, make sure that any special characters are URL encoded._
	
	<h4>Conexion a DB</h4>
	``` 
	    /* eslint-disable no-console */
	    const { MongoClient } = require('mongodb');
	    
	    const {
	      DB_USER,
	      DB_PASSWORD,
	      DB_CLUSTER,
	      DB_NAME,
	    } = process.env;
	    
	    const mongoUrl = `mongodb+srv://${DB_USER}:${DB_PASSWORD}@${DB_CLUSTER}.mongodb.net/${DB_NAME}?retryWrites=true&w=majority
	    `;
	    let connection;
	    
	    asyncfunctionconnectDb() {
	      if (connection) return connection;
	    
	      let client;
	    
	      try {
	        client = await MongoClient.connect(mongoUrl, { useNewUrlParser: true });
	        connection = client.db(DB_NAME);
	      } catch (error) {
	        console.error('No se pudo conectar a: ', mongoUrl, error);
	        process.exit(1);
	      }
	    
	      return connection;
	    }
	    
	    module.exports = connectDb();
	    
	    
	```
	
	<h4> _Shell_ </h4>
	``` 
	    PS C:\Users\Alan Vazquez\OneDrive - Centro de Ense√±anza T√©cnica Industrial\APLICACIONES\PERSONAL\NodeJS\GraphQL> node src/index
	    Server is lstening on
	     localhost:3000/api
	    No se pudo conectar a:  mongodb+srv://AlanVazquez:{PASSWORD}@cluster0-q7onz.mongodb.net/prueba?retryWrites=true&w=majority
	    Error: querySrv ESERVFAIL _mongodb._tcp.cluster0-q7onz.mongodb.net
	        at QueryReqWrap.onresolve [as oncomplete] (dns.js:203:19) {
	      errno: 'ESERVFAIL',
	      code: 'ESERVFAIL',
	      syscall: 'querySrv',
	      hostname: '_mongodb._tcp.cluster0-q7onz.mongodb.net'
	    }
	    
	```
	
	No se si el problema sea de alguna configuracion de Atlas  
	Ya intente con:
	
	  * Permitir accros a todas las IPs
	  * Quitar el sring que esta despues del nombre de la Base de datos
	  * Usar la Base de datos **test**
	
	<h4>Nota</h4>
	``` 
	      Si me puedo conectar con la Cadema de conexion que me da para conexion desde el Shell
	```

## 0090. Integrando una base de datos

### Descripci√≥n:


### Comentarios:

* **Esteban Ciudad** (10)

	
	quien se haya registrado a Mongo Atlas en vez de Mlab porque el registro a este √∫ltimo esta cerrado, y tenga el problema al seguir esta clase con la conexi√≥n a la base de datos, debe cambiar la siguiente l√≠nea de la configuraci√≥n de mongoUrl en el archivo db.js:
	``` 
	    const mongoUrl = `mongodb+srv://${DB_USER}:${DB_PASSWD}@${DB_HOST}/${DB_NAME}`;```
	    
	```

	* **JosephZ** (2)

		
		Gracias, lo necesitaba

	* **David Gallego** (1)

		
		Igual para los que sigan teniendo problemas para conectar la app con mongo atlas, se pueden fiar del ejemplo que Mongo Atlas ofrece para conectarse:
		
		Por ejemplo:
		``` 
		    const MongoClient = require(‚Äòmongodb‚Äô).MongoClient;
		    const uri = "mongodb+srv://admin:<password>@platzi-db-jmryr.mongodb.net/test?retryWrites=true";
		    const client = new MongoClient(uri, { useNewUrlParser: true });
		    client.connect(err => {
		      const collection = client.db("test").collection("devices");
		      // perform actions on the collection object
		      client.close();
		    });
		    
		```
		
		Yo simplemente reorganize las variables y demas para que quedaran como en el curso y me funciono.

	* **CodingLeonardo** (1)

		
		Gracias, buen aporte

* **jsosorio** (5)

	
	Si utilizan docker-compose para mongo seria:
	``` 
	    version: '3.7'
	    
	    services:
	      mongodb:
	        image: mongo:latest
	        environment:
	          - MONGO_INITDB_ROOT_USERNAME=<username>
	          - MONGO_INITDB_ROOT_PASSWORD=<password>
	        ports:
	          - "27017:27017"
	    
	```
	
	y en db.js
	``` 
	    ...
	    const mongoUrl = `mongodb://${DB_USER}:${DB_PASSWD}@${DB_HOST}:${DB_PORT}`;
	    ...
	    
	```
	
	Tener presente la configuraci√≥n de las variables de entorno del archivo **.env**

* **Paul Mayorga** (5)

	
	## Para los que quieran hacerlo con mySQL usando localhost con Xampp
	
	  1. Crean la base de datos
	
	
	``` 
	    CREATETABLE`courses` (
	      `id`int(11) NOTNULL,
	      `title`varchar(1000) COLLATE latin1_general_ci NOTNULL,
	      `description`varchar(1000) COLLATE latin1_general_ci NOTNULL,
	      `teacher`varchar(1000) COLLATE latin1_general_ci NOTNULL
	    ) ENGINE=InnoDBDEFAULTCHARSET=latin1 COLLATE=latin1_general_ci;
	    
	```
	
	  1. Instalan mysql
	
	
	``` 
	    npm install--save mysql2
	    
	```
	
	  1. resolvers.js
	
	
	``` 
	    const mysql = require('mysql2/promise')
	    const dataDB = {
	      host: 'localhost',
	      user: 'root',
	      password: '',
	      database: 'academy'
	    }
	    
	    
	    module.exports = {
	      Query: {
	        getCourses: async () => {
	          const connection = await mysql.createConnection(dataDB)
	          const [rows, fields] = await connection.execute('SELECT * FROM courses');
	          return rows
	        },
	        getCourse: async (root, args) => {
	          const connection = await mysql.createConnection(dataDB)
	          const [rows, fields] = await connection.execute(`SELECT * FROM courses WHERE id = ${args.id}`);
	          return rows[0]
	        }
	      }
	    }
	    
	```

	* **juandavidcoloradoalvarez** (2)

		
		Genial, ¬°muchas gracias! ‚úåÔ∏è

* **Bruno Kamiche** (3)

	
	A los que les sale error de autenticaci√≥n, aqu√≠ la soluci√≥n:  
	const mongoUrl= `mongodb://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}`
	
	Quitenle el db name

	* **Luis Rogelio Reyes Hern√°ndez** (1)

		
		mil gracias

* **ing.stephanysc** (2)

	
	Como no explican como crear la conexi√≥n con Robo 3T.

	* **Javier Fuentes Mora** (3)

		
		Ve este curso ahi te explica todo esto <https://platzi.com/clases/1646-backend-nodejs/22033-creacion-de-una-bd-en-mongoatlas/> pero con Mongo Atlas

	* **AryRosvall** (2)

		
		Yo hice la conexi√≥n con MongoAtlas, una vez que tienes tu cluster creado, seleccionas el bot√≥n connect y seleccionas la opci√≥n connect using MongoDB Compass. Saldr√° una liga para copiar, es la seleccionas, agregas tu password y en Robo 3T seleccionas la opci√≥n create connection, y la pegas donde dice FROM SRV.

	* **aliriodiaz** (1)

		
		Si estan en linux, descarguen la ultima version para que les aparezca el boton FROM SRV(RoboT3 1.3 en AUR usando manjaro)

* **Gaston Morales** (2)

	
	 **En caso de que hallas creado la Base De Datos Mongo localmente puedes usar esto**
	``` 
	    const mongoUrl = `mongodb://localhost/${DB_NAME}`
	    
	```

* **Luis Arturo Lira Cerda** (2)

	
	En mi caso yo tengo instalado MongoDB en mi computadora y como no tengo configurado usuario y contrase√±a ya que s√≥lo la uso para desarrollos aqu√≠ mismo, esta l√≠nea me fue suficiente:
	``` 
	    `mongodb://${DB_HOST}:${DB_PORT}/${DB_NAME}`
	    
	```
	
	Tengo una duda, tengo una API REST alojada en Heroku. Para la conexi√≥n a la base de datos en ‚Äúproducci√≥n‚Äù s√≥lo puse: process.env.MONGODB_URI  
	.  
	La cual toma la cadena de conexi√≥n que est√° configurada en Heroku. ¬øhacerlo de esta manera representa alg√∫n problema de seguridad para la API o es una mala pr√°ctica?

	* **juan diego ramirez rojas** (1)

		
		gracias amigo sos un campeon!

* **Navarrock33** (2)

	
	Yo estuve teniendo errores, lo resolv√≠ como lo explican en este enlace  
	[https://support.glitch.com/t/cant-connect-to-mongodb-cluster-discord-js-mongoose-econreset/6371/13](url)
	
	B√°sicamente explican que se debe conectar a todos los fragmentos del cluster para que no haya evitar problemas de conexi√≥n.
	
	Ponen el ejemplo:
	``` 
	    MongoUrl = `mongodb://${process.env.MONGOUSER}:${process.env.MONGOPASSWORD}@pydow-shard-00-00-15jok.mongodb.net:27017,pydow-shard-00-01-15jok.mongodb.net:27017,pydow-shard-00-02-15jok.mongodb.net:27017/PydowDatabase?ssl=true&replicaSet=Pydow-shard-0&authSource=admin&retryWrites=true`
	    
	```
	
	En mi caso cree tres variables HOST en el archivo .env y la url me qued√≥ como a continuaci√≥n
	``` 
	    mongoUrl=mongodb://${DB_USER}:${DB_PASSWS}@${DB_HOST_1}:${DB_PORT},${DB_HOST_2}:${DB_PORT},${DB_HOST_3}:${DB_PORT}/${DB_NAME}?ssl=true&replicaSet=Cluster0-shard-0&authSource=admin&retryWrites=true`
	    
	```
	
	Espero les ayude‚Ä¶

* **JACH** (2)
Hola buen d√≠a, tengo la siguiente duda. ¬øEs posible trabajar GrahpQL con otros SGBD?, por ejemplo MySQL?

	* **Rafael Pardo Rodriguez** (2)

		
		GraphQL, tengo entendido, no funciona presisamente con una base de datos, esta hecho para la parte del front-end, funciona mas que todo con API‚Äôs, para pedir datos y mostrarlos, ahora, con un lenguaje de programacion puedese crear una API que este conectada a una base de datos cualquiera.

* **sueherrera** (1)

	
	uuuoo uooo tranquilo viejo, como llego a esa parte de robo 3T, me siento un little bit extraviada üò¶ pero a ver vamos a hacerle con el curso que sugieren abajo üòÑ  
	hubiera estado padre que viniera esa parte, por que soy un beb√© en esto.

	* **AryRosvall** (2)

		
		Hola Sue! en qu√© est√°s atorada??? yo te ayudo

	* **sueherrera** (1)

		
		iujuuuu gracias ary! ya te mando un mensajito üòÑ

* **EnmanuelCastillo** (1)

	
	tengo un problema con mongo local, cuando ejecuto me dice que mongoDb no es una funcion, no ehh podido resolver el probelma
	``` 
	    'use strict'
	    const { MongoClient } = require('mongodb')
	    const {
	        DB_USER,
	        DB_PASSWD,
	        DB_HOST,
	        DB_PORT,
	        DB_NAME
	    } = process.env
	    
	    /* const mongoUrl = `mongodb://${DB_USER}:${DB_PASSWD}@${DB_HOST}:${DB_PORT}/${DB_NAME}` */
	    const mongoUrl = 'mongodb://localhost:27017'
	    
	    
	    let connection;
	    
	    const connectDb = async () => {
	    if (connection) return connection
	    
	    let client
	    try {
	        client = await MongoClient.connect(mongoUrl, {
	            useNewUrlParser: true
	        })
	        Connection = client.db(DB_NAME)
	        
	    } catch (error) {
	        console.error('no pudo conectrse', mongoUrl, error)
	        process.exit(1)
	    }
	    return connection;
	    }
	    
	    module.export = connectDb
	    
	    
	    
	    
	    
	```
	``` 
	    server is listening at http://localhost:4000
	    TypeError: connectDb is not a function
	        at getCourses (/home/enmanuelcastillo/Escritorio/proyecto/graphQl-practica/lib/resolvers.js:13:22)
	        at resolveFieldValueOrError (/home/enmanuelcastillo/Escritorio/proyecto/graphQl-practica/node_modules/graphql/execution/execute.js:467:18)
	        at resolveField (/home/enmanuelcastillo/Escritorio/proyecto/graphQl-practica/node_modules/graphql/execution/execute.js:434:16)
	        at executeFields (/home/enmanuelcastillo/Escritorio/proyecto/graphQl-practica/node_modules/graphql/execution/execute.js:275:18)
	        at executeOperation (/home/enmanuelcastillo/Escritorio/proyecto/graphQl-practica/node_modules/graphql/execution/execute.js:219:122)
	        at executeImpl (/home/enmanuelcastillo/Escritorio/proyecto/graphQl-practica/node_modules/graphql/execution/execute.js:104:14)
	        at execute (/home/enmanuelcastillo/Escritorio/proyecto/graphQl-practica/node_modules/graphql/execution/execute.js:64:35)
	        at getGraphQLParams.then.then.optionsData (/home/enmanuelcastillo/Escritorio/proyecto/graphQl-practica/node_modules/express-graphql/index.js:152:16)
	        at process._tickCallback (internal/process/next_tick.js:68:7)
	    
	```
	
	alguien con buen ojo que me ayude , tengo mongo instalado en la PC

	* **EnmanuelCastillo** (1)

		
		[](https://github.com/enmanuelCastillo5/graphql-practica)
		
		<https://github.com/enmanuelCastillo5/graphql-practica>.
		
		este es el enlace al repositorio en github

	* **Cristian Camilo Cucunub√°** (2)

		
		Es porque tienes un typo en export es **exports**

* **Saul** (1)

	
	Porque me corre graphiql pero no me trae nada de mi base de datos?  
	me refiero a que me trae ‚ÄúgetCourses‚Äù:[]

	* **Luis Arturo Lira Cerda** (1)

		
		En la consola no te lanza alg√∫n error luego de ejecutar la query?  
		Si pones tu c√≥digo puede ser m√°s f√°cil ayudarte tambi√©n üòÉ

	* **Blank-tech** (1)

		
		Por si a alguien mas le pasa esto, actualicen el navegador donde est√°n corriendo GraphiQL y listo.

* **Alexis Ulises Barba P√©rez** (1)

	
	Desde un principio me pasa que tengo que definir el argumento recibido de getCourse() como _id en lugar de cualquier otra variable, pues si no lo hago de ese modo me devuelve vac√≠as las consultas, me pregunto por qu√© si claramente funciona con cualquier variable mientras la uses con ese nombre dentro del resolver.

* **ThAlan** (1)

	
	Tengo problemas para conectarme con la base de datos, estoy usando Mongo Atlas, adjunto el c√≥digo y errores que me arroja, si alguien pudiera ayudarme, me seria de mucha ayuda.  
	Las variables de entorno para crear el url las revise y seg√∫n yo est√°n correctas.
	``` 
	    'use strict'
	    const { MongoClient } = require('mongodb')
	    const {
	      DB_USER,
	      DB_PASSWORD,
	      DB_HOST,
	      DB_PORT,
	      DB_NAME
	    } = process.env
	    
	    const mongoUrl = `mongodb+srv://${DB_USER}:${DB_PASSWORD}@${DB_HOST}/${DB_NAME}`
	    
	    let connection
	    
	    asyncfunctionconnectDB() {
	      if (connection) return connection
	      let client
	      try {
	        client = await MongoClient.connect(mongoUrl, {
	          useNewUrlParser: true
	        })
	        connection = client.db(`${DB_NAME}`)
	      } catch (error) {
	        console.error('Could not connect to db', mongoUrl, error)
	        process.exit(1)
	      }
	      return connection
	    }
	    module.exports = connectDB
	    
	```
	
	![error.png](https://static.platzi.com/media/user_upload/error-a3cc06fa-f260-4853-a6f7-87b9320e89f8.jpg)

	* **Diego Sald√≠var** (1)

		
		Intenta con el c√≥digo que pongo a continuaci√≥n, la √∫ltima opci√≥n de $DB_NAME sacala
		``` 
		    `mongodb://${DB_USER}:${DB_PASSWORD}@${DB_HOST}:${DB_PORT}/`
		    
		```

	* **Carlos Fuentes** (2)

		
		MongoDB Atlas te da una URL de conexi√≥n como la siguiente: mongodb+srv://<USER>:<PASS>@<HOST>/<DB_NAME>?retryWrites=true&w=majority
		
		Intenta con ese formato.
		
		Adem√°s Mongo ya te da los valores en el URL de casi todos los datos, solo tienes que agregar el password.

* **Diego Sald√≠var** (1)

	
	Para aquellos que tienen alg√∫n problema de conexi√≥n con la base de datos, publico el c√≥digo que me funciono.
	``` 
	    'use strict'
	    
	    const { MongoClient } = require('mongodb')
	    const {
	      DB_USER,
	      DB_PASSWD,
	      DB_HOST,
	      DB_PORT,
	      DB_NAME
	    } = process.env
	    
	    const mongoUrl = `mongodb://${DB_USER}:${DB_PASSWD}@${DB_HOST}:${DB_PORT}/`
	    let connection
	    
	    asyncfunctionconnectDB() {
	      if (connection) return connection
	    
	      let client
	      try {
	        client = await MongoClient.connect(mongoUrl, {
	          useNewUrlParser: true
	        })
	        connection = client.db(`${DB_NAME}`)
	      } catch (error) {
	        console.log('Could not connect to db', mongoUrl, error)
	        process.exit(1)
	      }
	    
	      return connection
	    }
	    
	    module.exports = connectDB
	    
	```

* **Alejandro Gonz√°lez Reyes** (1)
Me preguntaba si es buena pr√°ctica retornar el resultado fuera del try/catch. No ser√≠a buena idea dejarlo dentro

	* **Cristian Camilo Cucunub√°** (1)

		
		Si lo dejamos dentro tendr√≠amos que declarar dos returns, uno para el try y otro para el catch, dejando solo uno por fuera ahorramos c√≥digo.

* **masuro** (0)


## 0100. Mutations e Inputs

### Descripci√≥n:


Ya hemos visto c√≥mo consultar informaci√≥n mediante GraphQL, pero en un API tambi√©n vas a necesitar mandar informaci√≥n para que sea almacenada, dentro de GraphQL esto es posible gracias a la especificaci√≥n [mutation](https://graphql.org/learn/queries/#mutations).

Un mutation va a requerir de un campo de tipo **Input** que son como plantillas que le van a indicar qu√© campos son necesarios para insertar o modificar informaci√≥n.

La sintaxis de una mutation queda de la siguiente manera:
``` 
    nombreMutation(input: InputType): tipo
    
```

### Links:

* [Queries and Mutations | GraphQL](https://graphql.org/learn/queries/#mutations)

### Comentarios:

* **Jean Carlos Nu√±ez Hernandez** (5)

	
	Mutation para insertar o guardar informacion

* **RoiderSP** (4)

	
	Al usar MongoDB Atlas y querer hacer un insertOne a la base de datos me sal√≠a el siguiente error
	``` 
	    MongoError: w has to be anumberorastring
	    
	```
	
	Lo solucione en el **archivo db.js** agregando los par√°metros de la  
	URL(?retryWrites=true&w=majority) a los par√°metros de la funci√≥n **_connect_**
	``` 
	    client = await MongoClient.connect(mongoUrl, {
	          useNewUrlParser: true, 
	          retryWrites: true, 
	          w: 'majority'
	        })
	    
	```
	
	El c√≥digo completo quedar√≠a de la siguiente forma:
	``` 
	    'use stric'
	    
	    const {MongoClient} = require('mongodb') 
	    const {
	      DB_USER,
	      DB_PASS,
	      DB_HOST,
	      DB_NAME,
	    } = process.env
	    
	    const mongoUrl = `mongodb+srv://${DB_USER}:${DB_PASS}@${DB_HOST}/test`
	    
	    let connection
	    
	    asyncfunctionconnectDB () {
	      if (connection) return connection
	    
	      let client
	      try {
	        client = await MongoClient.connect(mongoUrl, {
	          useNewUrlParser: true,
	          retryWrites: true,
	          w: 'majority'
	        })
	        connection = client.db(DB_NAME)
	      } catch (error) {
	        console.error('Could not connect to db', mongoUrl, error)
	        process.exit(1)
	      }
	    
	      return connection
	    }
	    
	    module.exports = connectDB
	    
	    
	```

	* **Oscar Martinez** (1)

		
		Te funcion√≥ normal el codigo de los resolvers? o hiciste alguna modificaci√≥n, tambien estoy usando atlas y lo uncio que veo es en el dashboard de atlas que si hay operaciones pero en web no me retorna nada

	* **RoiderSP** (2)

		
		Hola @oscar no cambie nada en los resolvers, solo en el archivo db.js

* **jsosorio** (3)

	
	Podemos reemplazar **const newCourse** simplemente con:
	``` 
	    course = await db.collection('courses').insertOne({...defaults, ...input});
	    
	```

* **alejandro2396** (2)
Para utilizar GraphQL con una base de datos relacional como MySQL o PostgreSQL, seria bueno utilizar un ORM como sequelize??

	* **Juan David Castro (Platzi)** (1)

		
		Que sea 'bueno" o ‚Äúmalo‚Äù es relativo. üòÖ
		
		Algunas personas aman los ORMs. Pero otras aman tener el control total y absoluto de las consultas a la base de datos.
		
		En este tutorial usamos sentencias SQL directamente. No est√° nada mal.
		
		üëâ [Creating a scalable API using Node, GraphQL, MySQL, and Knex](https://steemit.com/graphql/@alien35/creating-a-scalable-api-using-node-graphql-mysql-and-knex)

* **wildChild** (1)

	
	Ayuda!!! Estoy intent√°ndolo con MySQL, pero no logro hacer que la mutaci√≥n inserte‚Ä¶ alguien tiene alg√∫n ejemplo?

* **danilovalenzuela** (1)

	
	Aiuuuda, los datos s√≠ quedan guardados en la DB pero en la herramienta de GraphiQL se genera el siguiente error.  
	‚Äúmessage‚Äù: ‚ÄúCannot return null for non-nullable field Course.description.‚Äù

	* **Juan Jos√© Vega Quintero** (1)

		
		Estoy en las mismas, √©l lo soluciono con el await pero ahora no funciona üò¶

	* **AlexRodriguez1218** (1)

		
		Buen dia, yo estoy haciendo el ejercicio con MySql, y me bloque por lo mismo, despues de tanto verificar descubri que en el type tenia campos que no estaba devolviendo la query, asi que fue error de digitacion, tambien otro error que tuve fue en el tipo de response que obtenia por que el respondia un array de objeto en donde la inforamcion estaba en la posicion [0] y yo estaba retornando todo el objeto, chekeate lo que response antes del return final, espero ser de ayuda

* **alexabellerman** (1)

	
	tengo una duda. La API no me regresa tanto en getCourse como en la mutation nada a menos que el return sea un array. Por qu√© podr√° ser?
	``` 
	    let db;
	    			let course = [];
	    
	    			try {
	    				db = await connectDb();
	    				courseToAdd = await db
	    					.collection('courses')
	    					.findOne({ _id: ObjectID(_id) });
	    				course.push(courseToAdd);
	    			} catch (error) {
	    				console.error(error);
	    			}
	    
	    			return course;```
	    
	    
	    
	    
	```
	
	let db;  
	let course;
	``` 
	    		try {
	    			db = await connectDb();
	    			course = await db.collection('courses').insertOne(input);
	    			input._id = course.insertedId;
	    		} catch (error) {
	    			console.log(error);
	    		}
	    		return [input];
	    
	```
	``` 
	    A menos que haga eso, me dice un error como este:
	    
	    
	    
	```
	
	{  
	‚Äúerrors‚Äù: [  
	{  
	‚Äúmessage‚Äù: ‚ÄúExpected Iterable, but did not find one for field Mutation.createCourse.‚Äù,  
	‚Äúlocations‚Äù: [  
	{  
	‚Äúline‚Äù: 2,  
	‚Äúcolumn‚Äù: 3  
	}  
	],  
	‚Äúpath‚Äù: [  
	‚ÄúcreateCourse‚Äù  
	]  
	}  
	],  
	‚Äúdata‚Äù: {  
	‚ÄúcreateCourse‚Äù: null  
	}  
	}```
	
	Por eso es que lo meti todo en array‚Ä¶ pero est√° bien eso?

* **Julio Ignacio Oyarzun Cayuman** (1)

	
	Yo lo hice siguiendo los consejos de otros estudiantes y me funciono a la primera xD

* **Jecsham Castillo** (1)

	
	Con mongo no es necesario agregar campos como defaults

	* **Juan Jos√© Vega Quintero** (1)

		
		Pero si no se hace devuelve null

* **Jose Daniel Barr√≠a Reyes** (1)

	
	muy buena clase!

* **RoiderSP** (1)
Alguien sabe como se llama el plugin que utilizar para mostrar hace cuento tiempo se hizo un cambio y el commit?

	* **RoiderSP** (4)

		
		Ya lo encontr√©, se llama GitLens se ve interesante les dejo el link por si les interesa
		
		[https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens](url)
		
		[https://gitlens.amod.io/](url)

## 0110. Repaso - Creando el tipo Estudiante

### Descripci√≥n:


### Comentarios:

* **Esteban Ciudad** (6)

	
	Mi soluci√≥n al desaf√≠o:
	
	Implemento los mutation deleteCourse y deleteStudent que requieren un ID y devuelven en este caso un string indicando si se realiz√≥ o no la operaci√≥n de borrado de la DB.
	
	schema.graphql
	``` 
	    type Mutation {
	      "Crea un nuevo curso"
	      createCourse(input: CourseInput): Course
	      "Edita un curso"
	      editCourse(id: ID!, input: CourseEditInput): Course
	      "Elimina un curso"
	      deleteCourse(id: ID!): String
	      "Crea un nuevo estudiante"
	      createStudent(input: StudentInput): Student
	      "Edita un estudiante"
	      editStudent(id: ID!, input: StudentEditInput): Student
	      "Elimina un estudiante"
	      deleteStudent(id: ID!): String
	    }
	    
	```
	
	mutations.js
	``` 
	    deleteCourse: async (root, { id }) => {
	        let db, info;
	        try {
	          db = await connectDb();
	          info = await db.collection('courses').deleteOne({
	            _id: ObjectID(id)
	          });
	        } catch (error) {
	          console.error(error);
	        }
	        return info.deletedCount
	          ? `El curso con id ${id} fue eliminado exitosamente.`
	          : 'No existe el curso con el id indicado';
	      },
	    
	```

	* **Manuel Eguiluz** (1)

		
		Gracias, man.

	* **Esteban Ciudad** (1)

		
		de nada bro @manolo0189, me alegro que te haya servido.

	* **masuro** (1)

		
		Como puedo saber que metodos hay en
		``` 
		    db.collection('...').
		    
		```
		
		as√≠ como .deleteOne()

	* **Esteban Ciudad** (1)

		
		@masuro te recomiendo la documentaci√≥n de mongodb as√≠ como el curso que hay en platzi.  
		<https://docs.mongodb.com/manual/reference/method/js-collection/index.html>

* **David Gallego** (5)

	
	Para seleccionar multiples definiciones de la misma palabra como el profe le hace:
	
	  1. Selecciona la palabra a editar
	  2. Ctrl + d para seleccionar las pr√≥ximas occurencias de esa palabra y editarlas al mismo tiempo (sin tener que ir a seleccionarlas una por una)
	
	
	
	Referencia: [Keyboard shortcuts](https://code.visualstudio.com/shortcuts/keyboard-shortcuts-windows.pdf)

	* **David Gallego** (1)

		
		Alt + Shift + ‚Üì : para copiar una linea entera hacia abajo

	* **Favio N√°quira** (1)

		
		estos son los comentarios que contribuyen =D

* **Andres Roberto Coello Goyes** (3)

	```
	    {
	      "errors": [
	        {
	          "message": "Field \"createStudent\" of type \"Student\" must have a selection of subfields. Did you mean \"createStudent { ... }\"?",
	          "locations": [
	            {
	              "line": 2,
	              "column": 3
	            }
	          ]
	        }
	      ]
	    }```
	    
	    si alguien me puede ayudar con este error al crear estudiante
	    
	```

	* **Daniel Esteves** (2)

		
		No est√°s pasando bien los inputs de selecci√≥n para crear al estudiante

	* **Andres Roberto Coello Goyes** (1)

		
		si me di cuenta 5 horas despues üòÉ üòÑ

* **Alejandro Gonz√°lez Reyes** (3)

	
	Comparto mis soluciones al reto
	``` 
	    deleteCourse: async (root, { id }) => {
	        let info
	        try {
	          const db = await connectDB()
	          // MongoDB al eliminar un documento, retorna un objeto con informaci√≥n del resultado del proceso, sin embargo, no retorna el documento eliminado
	          info = await db.collection('courses').deleteOne({ _id: ObjectId(id) })
	        } catch (error) {
	          console.error(error)
	        }
	        console.log(info)
	        return info.deletedCount ? `Curso con id ${id} eliminado satisfactoriante` : `No existe el curso con el id ${id} indicado`
	      },
	    
	```
	
	Este es otro enfoque
	``` 
	    deleteStudent: async (root, { id }) => {
	        let student
	        try {
	          const db = await connectDB()
	          // Consulto primero el documento para devolverlo como resultado de la eliminaci√≥n, esto puede ser interesante en Clientes que dese√©n notificar a sus usuarios de que datos se elemin√≥
	          student = db.collection('students').findOne({ _id: ObjectId(id) })
	          // Elimino el documento
	          await db.collection('students').deleteOne({ _id: ObjectId(id) })
	        } catch (error) {
	          console.error(error)
	        }
	        return student
	      }
	    
	```

* **mariomenjr** (3)

	
	Segu√≠ una resoluci√≥n simple:
	
	Mutation Type:  
	![Mutation Type Screenshot](https://imgur.com/6EXK3GO.png)
	
	Mutation Resolver:  
	![Mutation Resolver Screenshot](https://imgur.com/ATZCkq2.png)
	
	Result:  
	![Result Screenshot](https://imgur.com/jDu5SHY.png)

	* **Juan Jos√© Vega Quintero** (1)

		
		no hab√≠a pensado en usar postman  
		esto da para jugar mucho

* **Navarrock33** (3)

	
	Mi approach, yo utilizo el `findOneAndDelete()` y retorno un custom type con un Boolean que resuelve se se ha borrado o no y la entidad borrada
	
	Schema.graphql
	``` 
	    module.exports = {
	    .
	    .
	    .
	    type DeleteStudentOut{
	        status: Boolean
	        entity: Student
	    }
	    type DeleteCourseOut{
	        status: Boolean
	        entity: Course
	    }
	    
	    type Mutation {
	    .
	    .
	    .
	    "Eliminar un curso"
	        deleteCourse(_id: ID!): DeleteCourseOut
	     "Elimina un estudiante"
	        deleteStudent(_id: ID!): DeleteStudentOut
	    }
	    
	```
	
	Mutations.js
	``` 
	    module.exports = {
	    .
	    .
	    .
	     deleteCourse: async (root, {_id}) => {
	            let db, flag
	            try {
	                db = await connectDB()
	                flag = await db.collection('cursos').findOneAndDelete({_id: ObjectID(_id)})
	            } catch (error) {
	                console.error(error)
	            }
	            return {status:flag.lastErrorObject.n, entity:flag.value}
	        },
	     deleteStudent: async (root, {_id}) => {
	            let db, flag
	            try {
	                db = await connectDB()
	                flag = await db.collection('estudiantes').findOneAndDelete({_id: ObjectID(_id)})
	            } catch (error) {
	                console.error(error)
	            }
	            return {status:flag.lastErrorObject.n, entity:flag.value}
	        }
	    }
	    
	```

* **Byron Mesias Cueva Cabrera** (2)

	
	Reto resuelto:  
	![reto.png](https://static.platzi.com/media/user_upload/reto-613360e1-bcb6-413f-9177-32b6425e6c4a.jpg)

* **jasanhdz** (2)

	
	Schema
	``` 
	    "Elimina un Estudiante"
	      deleteStudent(_id: ID!): String
	        "Eliminar un Curso"
	      deleteCourse(_id: ID!): String,
	    
	```
	
	Resolvers
	``` 
	    deleteStudent: async (root, { _id }) => {
	          const id = await mongoDb.delete('courses', _id);
	          return`Curso con Id: ${id} eliminado`;
	        }
	    
	```
	
	Tambi√©n les comparto la manera en como me conecto a Mongo, pienso que es la manera m√°s limpia que la que hace el profesor.
	``` 
	    const { MongoClient, ObjectId } = require('mongodb');
	    const { config } = require('../config');
	    
	    const USER = encodeURIComponent(config.dbUser);
	    const PASSWORD = encodeURIComponent(config.dbPassword);
	    const DB_NAME = config.dbName;
	    
	    const MONGO_URI = `mongodb+srv://${USER}:${PASSWORD}@${config.dbHost}:${config.dbPort}/${DB_NAME}?retryWrites=true&w=majority`;
	    
	    class MongoLib {
	      constructor() {
	        this.client = new MongoClient(MONGO_URI, { useNewUrlParser: true, useUnifiedTopology: true });
	        this.dbName = DB_NAME;
	      }
	    
	      connect() {
	        if (!MongoLib.connection) {
	          MongoLib.connection = new Promise((resolve, reject) => {
	            this.client.connect(err => {
	              if (err) {
	                reject(err);
	              }
	              console.log('Connected succesfully to mongo');
	              resolve(this.client.db(this.dbName));
	            });
	          });
	        }
	        return MongoLib.connection;
	      }
	    
	      getAll(collection) {
	        returnthis.connect().then(db => {
	          return db
	            .collection(collection)
	            .find()
	            .toArray();
	        });
	      }
	    
	      get(collection, id) {
	        returnthis.connect().then(db => {
	          return db
	            .collection(collection)
	            .findOne({ _id: ObjectId(id) });
	        })
	      }
	    
	      create(collection, data) {
	        returnthis.connect()
	          .then(db => {
	            return db
	            .collection(collection).insertOne(data);
	        })
	          .then(result => result.insertedId);
	      }
	    
	      updated(collection, id, data) {
	        returnthis.connect()
	          .then(db => {
	            return db
	              .collection(collection)
	              .updateOne({ _id: ObjectId(id) }, { $set: data }, { upsert: true });
	          })
	          .then(result => result.updsertdId || id);
	      }
	    
	      delete(collection, id) {
	        returnthis.connect()
	          .then(db => {
	            return db
	              .collection(collection)
	              .deleteOne({ _id: ObjectId(id) })
	          })
	          .then(() => id);
	      }
	    }
	    
	    module.exports = MongoLib;
	    
	```

* **Jecsham Castillo** (2)

	
	Yo recomiendo usar findOneAndUpdate en lugar de hacer 2 requests a mongodb  
	findOneAndUpdate retorna el documento en la propiedad value, a loq ue quedar√≠a:  
	students.value

* **Lian Nivin** (2)

	
	Me parece super genial que haya repaso en este curso. Algo bueno para imitar en los demas cursos.

* **jdpo2008** (1)

	
	Consulta seria recomendable utilizar un api en firebase functions que implemente graphql tanto para el auth como insercion en firestore?

* **alexabellerman** (1)

	```
	    deleteCourse: async (root, { _id }) => {
	    			let db;
	    
	    			try {
	    				db = await connectDb();
	    				await db.collection('courses').deleteOne({ _id: ObjectID(_id) });
	    			} catch (error) {
	    				console.log(error);
	    			}
	    		},
	    		deleteStudent: async (root, { _id }) => {
	    			let db;
	    
	    			try {
	    				db = await connectDb();
	    				await db.collection('students').deleteOne({ _id: ObjectID(_id) });
	    			} catch (error) {
	    				console.log(error);
	    			}
	    		}```
	    
	    
	    
	    
	```
	``` 
	    # Deletes a course
	    deleteCourse(_id: ID!): [Course]
	    
	    # Deletes a student
	    deleteStudent(_id: ID!): [Student]```
	    
	```

* **jhernandez_z** (1)

	
	Soluci√≥n al reto.
	
	Schema
	``` 
	    "Elimina un elemento de una colecci√≥n"
	      deleteElement(_id: ID!, collection: String!): Boolean
	    
	```
	
	Resolver
	``` 
	    deleteElement: async (root, { _id, collection }) => {
	            let db, element
	    
	            try {
	                db = await connectDB()
	                element = await db.collection(collection).findOneAndDelete(
	                    { _id: ObjectID(_id) }
	                )
	            } catch (error) {
	                console.error(error)
	            }
	    
	            return element ? true : false
	        }
	    
	```

* **Jose Vinicio Flores Arias** (1)

	
	Excelente como funciona todo ‚ù§Ô∏è!

* **jhon manuel angulo moncada** (1)

	
	reto cumplido =) un mutation que permita eliminar tanto un estudiante como un curso.
	
	schema.ghaphql
	``` 
	    	"Elimina un elemento"
	       	delele(id: ID!, collection: String!): String
	    
	```
	
	mutation.js
	``` 
	    delele: async (root, { id, collection }) => {
	            let db
	            let element
	    
	            try {
	                db = await connectDb()
	                element = await db.collection(collection).deleteOne({ _id: ObjectID(id) })
	            } catch (error) {
	                console.error(error)
	            }
	            return element.deletedCount
	            ? `El elemento con id ${id} fue eliminado exitosamente de la colecion ${collection}.`
	            : `No existe el elemento con el id: ${id} en la colecion ${collection}.`;
	        }
	    
	```

* **jhon manuel angulo moncada** (1)

	
	de acuerdo con Jecshan Castillo, adicional mente si est√°n haciendo todo en las nuevas versiones mongodb y usan mongo atlas me toco hacerlo as√≠ para que retornara la actualizaci√≥n del documento:
	``` 
	    editCourse: async (root, { id, input }) => {
	            let db
	            let course
	    
	            try {
	                db = await connectDb()
	                course = await db.collection('courses').findOneAndUpdate(
	                    { _id: ObjectID(id) },
	                    { $set: input },
	                    { new : true, returnOriginal: false }
	                )
	            } catch (error) {
	                console.error(error)
	            }
	            return course.value
	        }
	    
	```

* **Juan David G√≥mez G√≥mez** (1)

	
	Mi soluci√≥n a reto:  
	schema.graphql
	
	type Mutation {  
	"Crea un curso"  
	createCourse(input: CourseInput!): Course  
	"Edita un curso"  
	editCourse(_id: ID!, input: CourseEditInput): Course  
	"Elimina un curso"  
	deleteCourse(_id: ID!): Course  
	"Crea un estudiante"  
	createStudent(input: StudentInput!): Student  
	"Edita un estudiante"  
	editStudent(_id: ID!, input: StudentEditInput): Student  
	"Elimina un estudiante"  
	deleteStudent(_id: ID!): String  
	}
	
	mutation.js
	
	deleteStudent: async (root, { _id }) => {  
	let db, info  
	try {  
	db = await connetDb()  
	info = await db.collection(‚Äòstudents‚Äô).deleteOne({ _id: ObjectID(_id) })  
	return info.deletedCount ? ‚ÄòSe elimino con exito‚Äô : `El id ${_id} no existe en la base de datos`  
	} catch (error) {  
	console.error(error)  
	}  
	}
	
	llamado en consola
	
	mutation{  
	deleteStudent(_id: ‚Äú‚Ä¶‚Äù)  
	}

* **pabloverduzcos** (1)
¬øHay manera de separar el Schema para poder hacerlo m√°s mantenible?

* **Alvaro Ruben Hurtado Maldonado** (0)

	
	Para que la interf√°s schema.graphql se pinte se puede instarlar esta extensi√≥n de Visual Studio Code: ext install kumar-harsh.graphql-for-vscode

## 0120. Nested Types

### Descripci√≥n:


### Comentarios:

* **Angel Hernandez** (6)

	
	Con Mongoose se podria tener un codigo mas ordenado y consultas a la base de datos mas simple

	* **Daniel Esteves** (1)

		
		De hecho! Acabo de reformular todo mi c√≥digo con mongoose y wow que limpio

	* **Javier Fuentes Mora** (2)

		
		podrian poner un ejemplo para poder ver la diferencia??

	* **Juan Jos√© Vega Quintero** (1)

		
		X2 un ejemplo plis

* **Andres Silva Gomez** (6)

	
	üòÅ Una de las cosas que me cost√≥ cuando trate de implementar GraphQL fue el performance, sobre todo en este tema cuando haces cargas de datos de objetos relacionados, y aun m√°s si es sobre base de datos relacionarles, as√≠ que me cree esta funci√≥n que me ayudo a suplir este problema
	``` 
	    const fields = (context) => {
	      const items = context.fieldNodes[0].selectionSet.selections.map((item) => {
	        return item.name.value
	      });
	      return items;
	    }
	    
	    exports.fields = fields;
	    
	```
	``` 
	    const { City } = require('../db/');
	    const { fields } = require('../util');
	    
	    const cities = async (resolve, root, args, context, info) => {
	      const related = fields(context).includes('related');
	    
	      let query = City.query().whereNull('city_id');
	      query = related ? query.eager('related') : query;
	    
	      return query;
	    };
	    
	    module.exports = cities;
	    
	```
	
	de esta forma solo cargo las relaciones solo si √©l usuario lo solicito.
	
	Si alguien conoce una mejor forma de hacerlo ü§ì comp√°rtalo

* **jesusmurf** (3)

	
	$addToSet comprueba si es un arreglo y si no lo es crear el arreglo y a√±ade el valor del ID de persona.

* **gustavoalbertorestrepopelae** (2)

	
	esos metodos updateOne, findOne, insertOne, son de mongo, pero si quisiera utilizar los de otro tipo de base de datos como mysql o postgres utilizar√≠a los conocidos Select, Insert, Update, Delete‚Ä¶?

	* **Yerlinson** (3)

		
		Exacto, o le metes un ORM para estandarizar las consultas en caso de que cambies de BD.

* **gustavoalbertorestrepopelae** (1)

	
	Si yo quiesiera hacer un api multibase de datos tendr√≠a que hacer el api para cada base de datos, o puedo utilizar un ORM y por ejemplo que ORM?

	* **Juan Sebasti√°n Cardozo Lozano** (2)

		
		Se puede utilizar Prisma. Aqu√≠ te dejo el enlace de este ORM <https://www.prisma.io/>

## 0130. Resolver de tipos

### Descripci√≥n:


GraphQL necesita de un resolver para el tipo de dato padre y una funci√≥n para el campo del nested type para poder extraer su informaci√≥n.

### Comentarios:

* **David Behar** (3)

	
	Exacta mente qu√© son los resolvers, esta clase me confundi√≥ porque estamos agregando los tipos a la ra√≠z de los resolvers, osea
	``` 
	    const resolvers = {
	      ...
	      Course { ... }
	    }
	    
	```

	* **IT Desarrollo invertirOnline.com** (1)

		
		En realidad lo que estas agregando es el resolvers de los types que tienes definido en tu schema.

	* **David Behar** (1)

		
		Eso qu√© significa, jeje üòÖ

* **Fernando Cordero** (3)
No se porque pero no a mi no me devuelve el arreglo de people con informaci√≥n, siempre lo muestra vaci√≥. Revise el c√≥digo por todos lados...

	* **Juan Jos√© Vega Quintero** (1)

		
		tiene que haber un error en addPeople  
		Ya revisaste si la DB los guardo?

* **PaoloTorregrosa** (2)

	
	Este curso no lo quer√≠a tomar al principio pero resulta ser realmente interesante, tome la primera clase y ahora quiero hacerlo todo! no conoc√≠a a este profesor tan bueno

* **Jose Vinicio Flores Arias** (2)

	
	Y aqui esta el alcance de GraphQL!

* **gustavoalbertorestrepopelae** (2)

	
	Como se puede resolver un tipo escalar, por ejemplo  
	date, datatime, binary, entre otros
	
	gracias

	* **Daniel Esteves** (1)

		
		Hola! Debes crear un archivo de tipo Scalar.graphql y guardar los tipos de datos que necesites; m√°s informaci√≥n aqu√≠: <https://github.com/danestves/GraphQL-CMS-Backend/tree/master/src/graphql/types>

* **Fernando Cordero** (2)

	```
	    'use strict'
	     
	    const connectDb = require('./db')
	    const { ObjectID } = require('mongodb')
	    
	    module.exports = {
	        Course: {
	        people: async ({ people }) => {
	            let db
	            let peopleData
	            let ids
	    
	            try {
	                db = await connectDb()
	                ids = people ? people.map(id => ObjectID(id)) : []
	                peopleData = ids.lenght > 0 
	                   ? await db.collection('students').find(
	                        { _id: { $in: ids} }
	                    ).toArray()
	                    : []
	            } catch (error) {
	                console.log(error)    
	            }
	            return peopleData
	            }
	        }
	    }```
	    
	```

* **danilovalenzuela** (1)

	
	¬øC√≥mo puedo hacer un resolver para types sin necesidad de GraphQL tools?

* **Yerlinson** (1)

	```
	    'use strict'
	    
	    const connectDB = require('./db');
	    const { ObjectID } = require('mongodb')
	    
	    const types = {
	      Course: {
	        people: async ({ people }) => {
	          try {
	            const db = await connectDB()
	            const ids = people ? people.map(id => ObjectID(id)) : []
	            const peopleData = ids.length > 0 ? 
	              await db.collection('students').find(
	                { _id: { $in: ids } }
	              ).toArray() : []
	            return peopleData
	          } catch (error) {
	            console.error(error)
	          }
	        }
	      }
	    }
	    
	    module.exports = types```
	    
	```

* **jhon manuel angulo moncada** (1)

	
	excelente funcionalidad, aplicable para la mayor√≠a de proyectos.

## 0140. Errores

### Descripci√≥n:


Si sucede un **error** al momento de realizar una petici√≥n GraphQL nos va a retornar un objeto llamado `errors` que contendr√° la informaci√≥n del error y su mensaje. Podemos configurar el mensaje que le retorne al usuario simplemente con una funci√≥n que lance un **error** con el mensaje que queramos.

### Comentarios:

* **Yerlinson** (3)

	
	Una alternativa: <https://www.npmjs.com/package/express-boom>

* **Andres Roberto Coello Goyes** (3)

	
	hasta aqu√≠ he podido entender la mayor√≠a de las cosas‚Ä¶

	* **Juan Jos√© Vega Quintero** (1)

		
		Este profesor explica muy bien

* **daer13_** (3)
Se puede configurar los mensajes de error con m√°s parametros, ej: CODE, TYPE: Warning, Info etc

	* **Daniel Esteves** (2)

		
		Si exactamente, le puedes pasar todo tipo de par√°metros a tus errores para personalizarlos a√∫n m√°s

* **Angel Infanti** (2)

	
	Muy Buen Profesor de verdad

* **Andres Roberto Coello Goyes** (2)

	```
	    'use strict'
	    
	    functionerrorHandler(err){
	        console.err(err);
	        thrownewError('Fallo en la operacion');
	    }
	    
	    module.exports = errorHandler;
	    
	```
	
	Maneja los errores con este funcion‚Ä¶

# Conceptos avanzados

## 0150. Alias y fragments

### Descripci√≥n:


Dentro de GraphQL podemos correr m√°s de una petici√≥n a la vez y nombrarlas de distinta manera para poder identificarlas, esto es posible gracias a los _**Aliases**_ o simplemente Alias.

La sintaxis de un **Alias** es bastante simple:
``` 
    nombreDelAlias: tipoDeDato(argumento: tipo) {
      datos
    }
    
```

Adem√°s de los Alias, podemos agrupar campos para ser reutilizados en distintas peticiones gracias a los _**Fragments**_.

### Links:

* [Queries and Mutations | GraphQL](https://graphql.github.io/learn/queries/#aliases)

### Comentarios:

* **Jecsham Castillo** (4)

	
	Cada vez me est√° encantando m√°s GraphQL

* **CarlMateus** (4)

	
	Es bueno hacer varios consultas en una misma peticion es rapido el servicio?

	* **Favio N√°quira** (2)

		
		Creo que va a depender de que tan optimizados est√©n tus resolvers, pero sin lugar a dudas, el hecho de solamente hacer una petici√≥n y no varias es un upgrade mayor a tus aplicaciones.

	* **mariomenjr** (2)

		
		Depender√° de su complejidad. Y esta depender√° de tu creatividad al resolver los requerimientos üòÉ

* **Hector Daniel Hernandez Castillo** (2)

	
	GraphQL realmente enamora a primera vista.

* **Yerlinson** (2)

	
	Definitivamente esto deja a Rest en pa√±ales. üòÆ

* **alexabellerman** (2)

	
	Brutal

* **CarlMateus** (2)

	
	He visto este curso de Graphql y me parece excelente. Pero es bueno hacerlo de esta manera o es mejor utilizar herramientas como prisma o postgraphile para llamar la informacion desde la base de datos?

	* **Jesus Eduardo Murrieta Rosas** (2)

		
		TE recomiendo prisma, lo utilizo como microservicios en kubernetes, conectando diferentes bases de datos y respondiendo con prisma graphql para diferentes apps.

* **pabloverduzcos** (1)

	
	ü§Ø

* **JerezA** (1)
Muchachos tengo una duda, intente hacer el mismo fragment tal cual el ejemplo del profesor, pero en el course1 y course2 me devuelve null...

	* **JerezA** (2)

		
		nvm, ya encontre que era

## 0160. Variables

### Descripci√≥n:


Podemos utilizar variables dentro de las peticiones que hagamos a GraphQL simplemente defini√©ndolas con la siguiente sintaxis:
``` 
    $nombre: tipo
    
```

### Links:

* [Queries and Mutations | GraphQL](https://graphql.github.io/learn/queries/#variables)

### Comentarios:

* **gustavoalbertorestrepopelae** (2)

	
	Esas consultas de Alias, Fragments y Variables, no se implementar√≠an en el c√≥digo de la API, ya que el mismo Graphql lo permite?.
	
	Osea que eso ya ser√≠an funciones que se pueden utilizar desde frontend o desde otra aplicaci√≥n para reutilizar los querys y las mutaciones. ?

	* **ferchop2002** (2)

		
		Lo vi en el curso de React Avanzado , y es parte de Graph QL y es flexible en el c√≥digo deberias pasar desde el client

	* **Yerlinson** (1)

		
		No creo, esta es m√°s bien la forma de consumir el API de diferentes formas, porque en el controlador no hay forma de expresar esa sintaxis, me corrigen si estoy equivocado.

	* **Cristian Camilo Cucunub√°** (2)

		
		GraphQL es un cliente de prueba para poder testear nuestros queries y mutations al igual que todo los features como fragments, variables etc. Pero en un proyecto real instalamos y usamos un cliente(libreria) para poder escribir las mismas sentencias de GraphQL a nuestro proyecto. Para react por ejemplo existe [apollo](https://www.apollographql.com/docs/react/)

	* **Cheil Colombia** (1)

		
		Inclusive con Axios se puede consumir la API. Ejemplo s√∫per sencillo aqu√≠ <https://blog.apollographql.com/4-simple-ways-to-call-a-graphql-api-a6807bcdb355>

## 0170. Enums

### Descripci√≥n:


Los _**Enums**_ o enumeration types son tipos de datos escalares cuyos valores son configurables. Si definimos un tipo de dato como enum sus valores posibles solamente ser√°n aquellos que se encuentren entre los definidos en el enum.

### Links:

* [Schemas and Types | GraphQL](https://graphql.github.io/learn/schema/#enumeration-types)

### Comentarios:

* **pabloverduzcos** (2)

	
	Me record√≥ a TypeScript üòÇ

* **oqodigital** (2)
Video Cortado!!

	* **Nestor Cepeda (Platzi)** (2)

		
		¬°Hola @oqodigital! üòä¬øPodr√≠as darnos m√°s info sobre la parte que ves cortada? ¬øEn qu√© min ocurre exactamente?

## 0180. Interfaces - Tipo Monitor

### Descripci√≥n:


Las **interfaces** son muy importantes y √∫tiles cuando nos encontramos con tipos de datos similares. Una **interfaz** nos permite definir un tipo de dato padre que utilizando la palabra `implements` va a implementar los campos que tenga definidos dentro del tipo de dato que queramos.

### Comentarios:

* **Daniel Alberto Esquinazi** (3)

	
	Para consultar se puede hacer un `fragment` de una `interface`. No estoy seguro si es muy √∫til pero es posible.
	``` 
	    fragment Person onPerson{
	    	... onStudent {
	          avatar
	        }
	        ... onMonitor {
	          phone
	        }
	    }
	    
	    query getPeople{
	      getPeople {
	        _id
	        name
	        email
	        ...Person
	      }
	    }
	    
	```

* **Jecsham Castillo** (2)

	
	A pesar de haber implementado la interface, los campos deben seguir escritos en los types.

* **Javier Fuentes Mora** (1)

	
	Aqui algo que le falto decir es que __resolveType es parte de graphQL no es algo que este el definiendo como en Course con people , aqui este ejemplo donde se entiende de una mejor manera  
	<https://www.apollographql.com/docs/apollo-server/schema/unions-interfaces/>

* **Alejandro Gonz√°lez Reyes** (1)
Si quiero recuperar solo los Monitores, como se haria la consulta

	* **jhon manuel angulo moncada** (2)

		
		Hola, esta seria una forma de hacerlo:
		``` 
		    {
		      getPersons {
		        ... on Monitor {
		          _id
		        	name
		        	email
		          phone
		        }
		      }
		    }
		    
		```

## 0190. Directivas

### Descripci√≥n:


Las **directivas** son una instrucci√≥n que permite agregar condicionales a nuestras peticiones. Podemos modificar de manera din√°mica nuestra query simplemente a√±adiendo:
``` 
    @include(if: Boolean) {
      datos
    }
    
```

### Links:

* [Queries and Mutations | GraphQL](https://graphql.github.io/learn/queries/#directives)

### Comentarios:

* **swapuruguay** (6)

	
	Hola, el profesor por error cuando fue a mostrar la directiva @skip en su lugar puso nuevamente la directiva @include

	* **Wilson Marino Pablo Mendez** (3)

		
		  * @include(if: Boolean)Solo incluya este campo en el resultado si el argumento es true.
		
		  * @skip(if: Boolean)Omita este campo si el argumento es true.
		
		
		

* **Yerlinson** (1)

	
	Wonderful!

* **DiegoTinitana** (1)

	
	monitor es un type MONITOR ??? esto no es herencia

	* **Juan Jos√© Vega Quintero** (1)

		
		mas o menos  
		grahpql lo denomina agrupar grupos que tengan algo en com√∫n

## 0200. Unions

### Descripci√≥n:


 **Unions** permite agrupar varios custom types sin importar si tienen algo en com√∫n, su sintaxis es la siguiente:
``` 
    union SearchResult = CustomType1 | CustomType2 | CustomType3
    
```

Al momento de realizar una query que retorna una union podemos identificar el tipo de dato solicitando el campo `__typename`.

### Links:

* [Schemas and Types | GraphQL](https://graphql.github.io/learn/schema/#union-types)

### Comentarios:

* **Andres Roberto Coello Goyes** (6)

	
	3 dias para llegar aqui‚Ä¶ üò¶

	* **Luis Jeanpier Monserrate** (2)

		
		Igual me paso a mi jajaja

* **albertodsosa** (3)

	
	Query para crear indices:
	``` 
	    db.<collection>.createIndex({"$**": "text"})
	    
	```

	* **Juan Jos√© Vega Quintero** (1)

		
		Alguien sabe c√≥mo hacer eso con mongo compass?

	* **albertodsosa** (2)

		
		No se si [esto](https://docs.mongodb.com/compass/current/indexes/) te puede ayudar.

	* **Juan Jos√© Vega Quintero** (1)

		
		Siiii, muchas gracias!

* **Javier Fuentes Mora** (1)

	
	Si quieren ampliar un poco mas sobre el tema <https://platzi.com/clases/1533-mongodb/18493-consultas-mas-rapidas-con-indices/>

* **Jos√© Andr√©s Nava Campos** (1)

	
	Hola, alguien sabe por qu√© me regresa este error?
	``` 
	    { MongoError: text index required for $text query
	        at MessageStream.messageHandler (/Users/andresnava/Documents/Programacion/graphQL/platzi-dir/node_modules/mongodb/lib/cmap/connection.js:261:20)
	        at emitOne (events.js:116:13)
	        at MessageStream.emit (events.js:211:7)
	        at processIncomingData (/Users/andresnava/Documents/Programacion/graphQL/platzi-dir/node_modules/mongodb/lib/cmap/message_stream.js:144:12)
	        at MessageStream._write (/Users/andresnava/Documents/Programacion/graphQL/platzi-dir/node_modules/mongodb/lib/cmap/message_stream.js:42:5)
	        at doWrite (_stream_writable.js:396:12)
	        at writeOrBuffer (_stream_writable.js:382:5)
	        at MessageStream.Writable.write (_stream_writable.js:290:11)
	        at TLSSocket.ondata (_stream_readable.js:639:20)
	        at emitOne (events.js:116:13)
	      operationTime: Timestamp { _bsontype:'Timestamp', low_:9, high_:1582842781 },
	      ok:0,
	      errmsg:'text index required for $text query',
	      code:27,
	      codeName:'IndexNotFound',
	      '$clusterTime': 
	       { clusterTime: Timestamp { _bsontype:'Timestamp', low_:9, high_:1582842781 },
	         signature: { hash: [Object], keyId: [Object] } },
	      name:'MongoError',
	      [Symbol(mongoErrorContextSymbol)]: {} }
	    { MongoError: text index required for $text query
	        at MessageStream.messageHandler (/Users/andresnava/Documents/Programacion/graphQL/platzi-dir/node_modules/mongodb/lib/cmap/connection.js:261:20)
	        at emitOne (events.js:116:13)
	        at MessageStream.emit (events.js:211:7)
	        at processIncomingData (/Users/andresnava/Documents/Programacion/graphQL/platzi-dir/node_modules/mongodb/lib/cmap/message_stream.js:144:12)
	        at MessageStream._write (/Users/andresnava/Documents/Programacion/graphQL/platzi-dir/node_modules/mongodb/lib/cmap/message_stream.js:42:
	    
	    Programacion/graphQL/platzi-dir                                      
	    ‚ñ∂ node index.js
	    Server is listening at http://localhost:3000/api
	    { MongoError: text index required for $text query
	        at MessageStream.messageHandler (/Users/andresnava/Documents/Progr
	    amacion/graphQL/platzi-dir/node_modules/mongodb/lib/cmap/connection.js
	    :261:20)
	        at emitOne (events.js:116:13)
	        at MessageStream.emit (events.js:211:7)
	        at processIncomingData (/Users/andresnava/Documents/Programacion/g
	    raphQL/platzi-dir/node_modules/mongodb/lib/cmap/message_stream.js:144:
	    12)
	        at MessageStream._write (/Users/andresnava/Documents/Programacion/
	    graphQL/platzi-dir/node_modules/mongodb/lib/cmap/message_stream.js:42:
	    5)
	        at doWrite (_stream_writable.js:396:12)
	        at writeOrBuffer (_stream_writable.js:382:5)
	        at MessageStream.Writable.write (_stream_writable.js:290:11)
	        at TLSSocket.ondata (_stream_readable.js:639:20)
	        at emitOne (events.js:116:13)
	      operationTime: Timestamp { _bsontype:'Timestamp', low_:1, high_:1
	    582842800 },
	      ok:0,
	      errmsg:'text index required for $text query',
	      code:27,
	      codeName:'IndexNotFound',
	      '$clusterTime': 
	       { clusterTime: Timestamp { _bsontype:'Timestamp', low_:2, high_:1582842800 },
	         signature: { hash: [Object], keyId: [Object] } },
	      name:'MongoError',
	      [Symbol(mongoErrorContextSymbol)]: {} }
	    { MongoError: text index required for $text query
	        at MessageStream.messageHandler (/Users/andresnava/Documents/Programacion/graphQL/platzi-dir/node_modules/mongodb/lib/cmap/connection.js:261:20)
	        at emitOne (events.js:116:13)
	        at MessageStream.emit (events.js:211:7)
	        at processIncomingData (/Users/andresnava/Documents/Programacion/graphQL/platzi-dir/node_modules/mongodb/lib/cmap/message_stream.js:144:12)
	        at MessageStream._write (/Users/andresnava/Documents/Programacion/graphQL/platzi-dir/node_modules/mongodb/lib/cmap/message_stream.js:42:5)
	        at doWrite (_stream_writable.js:396:12)
	        at writeOrBuffer (_stream_writable.js:382:5)
	        at MessageStream.Writable.write (_stream_writable.js:290:11)
	        at TLSSocket.ondata (_stream_readable.js:639:20)
	        at emitOne (events.js:116:13)
	      operationTime: Timestamp { _bsontype:'Timestamp', low_:1, high_:1582842800 },
	      ok:0,
	      errmsg:'text index required for $text query',
	      code:27,
	      codeName:'IndexNotFound',
	      '$clusterTime': 
	       { clusterTime: Timestamp { _bsontype:'Timestamp', low_:2, high_:1582842800 },
	         signature: { hash: [Object], keyId: [Object] } },
	      name:'MongoError',
	      [Symbol(mongoErrorContextSymbol)]: {} }
	    
	```
	``` 
	        searchItems: async (root, { keyword }) => {
	          let db;
	          let items;
	          let courses;
	          let people;
	          try {
	              db = await connectDb();
	              courses = await db.collection('courses').find(
	                { $text: { $search: keyword} }
	              ).toArray();
	              people = await db.collection('students').find(
	                { $text: { $search: keyword} }
	              ).toArray();
	              items = [...courses, ...people];
	            } catch (error) {
	              errorHandler(error); 
	          }
	          return items;
	        }
	    
	```

	* **Javier Fuentes Mora** (1)

		
		yo tengo este mismo error lo lograste resolver?

	* **Javier Fuentes Mora** (1)

		
		Ya lo logre resolver estaba usando , solo mongo Atlas pero no encontre como crear un indice de type text , tuve que instalar Robo 3 T y crearlo mediante el comando que usa el profesor

# Consumiendo el API

## 0210. Preparando API para producci√≥n

### Descripci√≥n:


Para que nuestra API sea accesible desde cualquier lugar debemos a√±adir el middleware **cors** a express, primero debemos instalarlo con el siguiente comando:
``` 
    npm i cors
    
```

### Links:

* [cors  -  npm](https://www.npmjs.com/package/cors#configuring-cors-w-dynamic-origin)

### Comentarios:

* **jhon manuel angulo moncada** (9)

	
	para usuarios windows usar:
	``` 
	    "start": "SET NODE_ENV=production & node index",
	    
	```

* **Walter Ugalde A** (3)
Me gustar√≠a saber cuando van a dar el curso avanzado ? Seguridad ? Cuando el proyecto es grande como separar los resolv...

	* **rucardona** (2)
Hola, espero lo mismo ya que en la vida real y en un proyecto grande hay muchas cosas q son necesarias

* **Fernando Cordero** (2)

	
	{‚Äúerrors‚Äù:[{‚Äúmessage‚Äù:‚ÄúMust provide query string.‚Äù}]}

	* **Juan Jos√© Vega Quintero** (1)

		
		cambio la url, tiene que estar en la url del query

* **Walter Ugalde A** (2)

	
	Gracias Prof. El curso para principiantes esta bien, en realidad aporto muy poco, con respecto al que ya existia.

* **Juan Jos√© Vega Quintero** (1)

	
	Usen gitbash o zsh en hyper

* **Mateo Loaiza Rios** (1)

	
	npm ERR! errno 1  
	npm ERR! platzi-dir@1.0.0 start: `NODE_ENV=production node index.js`  
	npm ERR! Exit status 1

	* **AlexGarrixen** (1)

		
		Prueba usando la librer√≠a cross-env
		
		y escribe en tu script:  
		**‚Äústart‚Äù : " cross-env NODE_ENV=production node index"**

	* **danielalbertopaz** (1)

		
		Si estas usando windows, puedes instalar la librer√≠a **win-node-env**.  
		**npm i win-node-env **o si lo quieres de manera global **npm i -g win-node-env**  
		con esto no se tiene que modificar la l√≠nea y se ejecuta sin problemas

	* **Juan David G√≥mez G√≥mez** (1)

		
		tambien puedes poner  
		"start": ‚ÄúSET NODE_ENV=production && node index‚Äù

* **Walter Ugalde A** (1)

	
	Me gustar√≠a saber cuando van a dar el curso avanzado ?
	
	  * Seguridad ?
	  * Cuando el proyecto es grande como separar los resolvers, types, schemas entre otros ?
	
	

	* **rucardona** (2)
Hola, espero lo mismo ya que en la vida real y en un proyecto grande hay muchas cosas q son necesarias

## 0220. HTTP requests

### Descripci√≥n:


### Comentarios:

* **mariomenjr** (13)

	
	Postman tiene una feature espec√≠fica para construir queries en GraphQL.
	
	![PostmanGraphQL](https://imgur.com/bbE5vvV.png)

	* **Alejandro Gonz√°lez Reyes** (1)

		
		Excelente, gracias por el aporte.

	* **Jecsham Castillo** (1)

		
		buen aporte

	* **Juan Jos√© Vega Quintero** (1)

		
		No sab√≠a que postman ten√≠a modo dark, nice

	* **Juan Jos√© Vega Quintero** (1)

		
		No sab√≠a que postman ten√≠a modo dark, nice

* **Javier Fuentes Mora** (1)

	
	a ustedes no les sali√≥ este error al ejecutar en consola??  
	{‚Äúerrors‚Äù:[{‚Äúmessage‚Äù:‚ÄúExpected type String!, found monitor.‚Äù,‚Äúlocations‚Äù:[{‚Äúline‚Äù:2,‚Äúcolumn‚Äù:24}]}]}%
	
	intente con varios querys pero el resultado fue el mismo sin embargo al hacerlo con Postman funciono sin ning√∫n problema

	* **Juan Jos√© Vega Quintero** (1)

		
		con la url de query funcional no deber√≠a dar error

## 0230. Clientes de GraphQL

### Descripci√≥n:


### Links:

* [fetchql  -  npm](https://www.npmjs.com/package/fetchql)

* [graphql-request  -  npm](https://www.npmjs.com/package/graphql-request)

* [apollo-client  -  npm](https://www.npmjs.com/package/apollo-client)

* [Relay ¬∑ A JavaScript framework for building data-driven React applications](https://facebook.github.io/relay/)

* [Vue Apollo](https://vue-apollo.netlify.com/)

* [Introduction - Apollo Docs](https://www.apollographql.com/docs/angular/)

### Comentarios:

* **Jean Carlos Nu√±ez Hernandez** (8)

	
	Apollo Client para graphql

* **juan camilo castillo saucedo** (1)

	
	Apollo Client es bastante util.

* **Juan Jos√© Vega Quintero** (1)

	
	A veces usar lo mas simple es lo mejor

## 0240. Consumiendo el API desde un frontend simple

### Descripci√≥n:


### Comentarios:

* **Walter Ugalde A** (35)

	
	Falta curso avanzado donde se ense√±en algunas cosas que se usan en la vida real.
	
	  * Asegurar el API
	  * Subir y obtener imagnes
	  * Subir videos y consumir videos.
	  * Organizar en una estructura correcta para proyectos grandes.
	  * Aquietectura para un proyecto de en la vida real.  
	Esta bien el curso para alguien que no conoce graphql, pero ya existia un curso para ese caso.  
	Esta pasando mucho, que ahy muchas versiones de cursos del mismo nivel y se repiten lo que ya otros cursos lo ven.
	
	
	
	Si no se aporta cosas nuevas, van a ir perdiendo subscriptores.

	* **Diego Alexander Forero Higuera (Platzi)** (7)

		
		Gracias por las sugerencias, vamos a tenerlas en cuenta para una versi√≥n avanzada del curso, en cuanto a que se repita el temario es porque cambian las versiones de las librer√≠as y en algunos casos cambian la forma de implementar algo si el curso no se actualiza la implementaci√≥n no va a funcionar y todo va a fallar por eso se actualizan los cursos aproximadamente una vez al a√±o.

	* **Felipe Acosta** (16)

		
		Lo de las actualizaciones esta muy bien, pero tambien deben tener en cuenta que habemos suscriptores permanentes que esperamos seguir avanzando en nuestros conocimientos entonces si ya sabemos lo basico tambien queremos algo avanzado por que si no es ahi donde uno piensa en dejar la plataforma para ir buscando otra con cosas avanzandas y poder seguir subiendo nuestro nivel. üòÉ BTW El curso esta excelente.

	* **Paul Mayorga** (1)

		
		hay*

	* **flavioaandres** (3)

		
		Hay muchos cursos en los que se ense√±a a proteger la API con JWT y subiur imagenes y videos

* **pabloverduzcos** (3)

	
	GraphQL üíö

* **Pacool84** (3)

	
	Mucho mas clases como estas !!!

* **Juan Jos√© Vega Quintero** (1)
Alguien pudo conectar el frontend?

	* **Juan David Castro (Platzi)** (1)

		
		¬øTuviste alg√∫n problema con el que te podamos ayudar?

## 0250. Cierre del curso

### Descripci√≥n:


Hemos llegado al final de este curso, recuerda tomar el examen y si tienes alguna duda d√©jala en la secci√≥n de discusiones.

### Comentarios:

* **Jose Vinicio Flores Arias** (8)

	
	Vali√≥ cada maldito segundo!

* **jhon manuel angulo moncada** (7)

	
	Excelente, pero se merece una versi√≥n mas avanzada.

* **ivanruiz__** (5)

	
	Genial el curso, con ganas de uno para nivel medio/avanzado!

* **gustavoalbertorestrepopelae** (4)

	
	Genial el curso,
	
	Pero me queda la duda con respecto al manejo de graphql, si un equipo de desarrollares esta trabajando en diferentes dominios de la aplicaci√≥n, como hacen para no pisarse el c√≥digo con respecto al manejo de esquema, querys, resolvers, mutaciones ‚Ä¶
	
	Quedo atento a la respuesta, gracias

	* **JoseUrango** (5)

		
		git

* **Luis Paredes** (3)

	
	Gracias.

* **jhernandez_z** (2)

	
	Excelente el curso, esperando el curso avanzado.

* **daer13_** (2)

	
	Genial el curso, muchas gracias

* **juan camilo castillo saucedo** (1)

	
	Muy buen curso!. Estaria genial un curso un poco m√°s avanzado.

* **Jecsham Castillo** (1)

	
	Excelente curso

